"use strict";
(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __require = /* @__PURE__ */ ((x2) => typeof require !== "undefined" ? require : typeof Proxy !== "undefined" ? new Proxy(x2, {
    get: (a, b) => (typeof require !== "undefined" ? require : a)[b]
  }) : x2)(function(x2) {
    if (typeof require !== "undefined") return require.apply(this, arguments);
    throw Error('Dynamic require of "' + x2 + '" is not supported');
  });
  var __esm = (fn, res2) => function __init() {
    return fn && (res2 = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res2;
  };
  var __commonJS = (cb, mod) => function __require2() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));

  // node_modules/@inboxsdk/core/inboxsdk.js
  var require_inboxsdk = __commonJS({
    "node_modules/@inboxsdk/core/inboxsdk.js"(exports2, module2) {
      (function webpackUniversalModuleDefinition(root, factory2) {
        if (typeof exports2 === "object" && typeof module2 === "object")
          module2.exports = factory2();
        else if (typeof define === "function" && define.amd)
          define([], factory2);
        else if (typeof exports2 === "object")
          exports2["InboxSDK"] = factory2();
        else
          root["InboxSDK"] = factory2();
      })(globalThis, () => {
        return (
          /******/
          (() => {
            var __webpack_modules__2 = {
              /***/
              8587: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      ajax
                    )
                  });
                  var querystring_es3 = __webpack_require__3(6448);
                  var js = __webpack_require__3(8498);
                  ;
                  const r = /([?&])_=[^&]*/;
                  let nonce = Date.now() + Math.floor(Math.random() * Math.pow(2, 32));
                  function cachebustUrl(url) {
                    if (r.test(url)) {
                      return url.replace(r, "$1_=" + nonce++);
                    } else {
                      return url + (/\?/.test(url) ? "&" : "?") + "_=" + nonce++;
                    }
                  }
                  ;
                  const MAX_TIMEOUT = 64 * 1e3;
                  const MAX_RETRIES = 5;
                  const serversToIgnore = {};
                  function ajax(opts) {
                    if (!opts || typeof opts.url !== "string") {
                      throw new Error("URL must be given");
                    }
                    return new Promise(function(resolve, reject) {
                      const method = opts.method ? opts.method : "GET";
                      let url = opts.url;
                      let stringData = null;
                      if (opts.data) {
                        stringData = typeof opts.data === "string" ? opts.data : querystring_es3.stringify(opts.data);
                        if (method === "GET" || method === "HEAD") {
                          url += (/\?/.test(url) ? "&" : "?") + stringData;
                          stringData = null;
                        }
                      }
                      const canRetry = opts.canRetry != null ? opts.canRetry : method === "GET" || method === "HEAD";
                      const match = url.match(/(?:(?:[a-z]+:)?\/\/)?([^/]*)\//);
                      if (!match) {
                        throw new Error("Failed to match url");
                      }
                      const server = match[1];
                      if (Object.prototype.hasOwnProperty.call(serversToIgnore, server)) {
                        reject(new Error(`Server at ${url} has told us to stop connecting`));
                        return;
                      }
                      if (opts.cachebust) {
                        url = cachebustUrl(url);
                      }
                      const XMLHttpRequest2 = opts.XMLHttpRequest || window.XMLHttpRequest;
                      const xhr = new XMLHttpRequest2();
                      Object.assign(xhr, opts.xhrFields);
                      xhr.onerror = function(event) {
                        if ((opts.retryNum || 0) < MAX_RETRIES) {
                          if (xhr.status === 502 || (xhr.status === 0 || xhr.status >= 500) && canRetry) {
                            resolve(_retry(opts));
                            return;
                          }
                        }
                        const err = Object.assign(new Error(`Failed to load ${url}`), {
                          event,
                          xhr,
                          status: xhr.status
                        });
                        if (xhr.status == 490) {
                          serversToIgnore[server] = true;
                        }
                        reject(err);
                      };
                      xhr.onload = function(event) {
                        if (xhr.status === 200) {
                          resolve({
                            xhr,
                            text: xhr.responseText
                          });
                        } else {
                          xhr.onerror(event);
                        }
                      };
                      xhr.open(method, url, true);
                      if (opts.headers) {
                        const {
                          headers
                        } = opts;
                        Object.keys(headers).forEach((name) => {
                          const value = headers[name];
                          xhr.setRequestHeader(name, value);
                        });
                      }
                      xhr.send(stringData);
                    });
                  }
                  function _retry(opts) {
                    const retryNum = (opts.retryNum || 0) + 1;
                    const retryTimeout = Math.min(Math.pow(2, retryNum) * 1e3, MAX_TIMEOUT);
                    return (0, js.A)(retryTimeout).then(() => ajax(Object.assign({}, opts, {
                      retryNum
                    })));
                  }
                })
              ),
              /***/
              1602: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    v: () => (
                      /* binding */
                      assert2
                    )
                    /* harmony export */
                  });
                  class AssertionError extends Error {
                    name = "AssertionError";
                    constructor(message) {
                      super(message ?? "assertion failed");
                    }
                  }
                  function assert2(condition, message) {
                    if (!!condition) {
                    } else {
                      throw new AssertionError(message);
                    }
                  }
                })
              ),
              /***/
              4158: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      censorHTMLstring
                    ),
                    /* harmony export */
                    Z: () => (
                      /* binding */
                      ATTRIBUTE_WHITELIST
                    )
                    /* harmony export */
                  });
                  const ATTRIBUTE_WHITELIST = /* @__PURE__ */ new Set([
                    // standard html props
                    "class",
                    "rel",
                    "target",
                    "type",
                    "tabindex",
                    "id",
                    "style",
                    "role",
                    "contenteditable",
                    "aria-expanded",
                    "aria-hidden",
                    "aria-disabled",
                    "aria-haspopup",
                    "aria-labelledby",
                    "aria-busy",
                    "aria-multiselectable",
                    "name",
                    // inbox props
                    "data-action-data",
                    "data-item-id",
                    "data-msg-id",
                    "data-map-id",
                    "g_editable",
                    "jsnamespace",
                    "jsaction"
                  ]);
                  function censorHTMLstring(html) {
                    return html.replace(/\s([^\s=]+)\s*=\s*"[^"]+"/g, (match, attr) => ATTRIBUTE_WHITELIST.has(attr) ? match : ` ${attr}="..."`).replace(/(^|>)([^<]+)/g, (match, start, text) => start + (text.trim().length ? "..." : ""));
                  }
                })
              ),
              /***/
              1443: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      censorHTMLtree
                    )
                    /* harmony export */
                  });
                  var auto_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(1812);
                  var auto_html__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(auto_html__WEBPACK_IMPORTED_MODULE_1__);
                  var _censorHTMLstring__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(4158);
                  function censorHTMLtree(target) {
                    const openers = [];
                    const closers = [];
                    let parent = target;
                    let lastIndex = 0;
                    while (parent) {
                      const attrHtml = Array.from(parent.attributes).map((_ref) => {
                        let {
                          name,
                          value
                        } = _ref;
                        return auto_html__WEBPACK_IMPORTED_MODULE_1___default()` ${name}="${_censorHTMLstring__WEBPACK_IMPORTED_MODULE_0__.Z.has(name) ? value : "..."}"`;
                      }).join("");
                      const headerElCount = lastIndex;
                      const footerElCount = parent.children.length - 1 - lastIndex;
                      const headers = target !== parent && headerElCount ? `[${headerElCount}]` : "";
                      const footers = target !== parent && footerElCount ? `[${footerElCount}]` : "";
                      openers.push(auto_html__WEBPACK_IMPORTED_MODULE_1___default()`<${parent.nodeName.toLowerCase()}${{
                        __html: attrHtml
                      }}>${headers}`);
                      closers.push(auto_html__WEBPACK_IMPORTED_MODULE_1___default()`${footers}</${parent.nodeName.toLowerCase()}>`);
                      if (parent.parentElement) {
                        lastIndex = Array.from(parent.parentElement.children).indexOf(parent);
                      }
                      parent = parent.parentElement;
                    }
                    return openers.reverse().join("") + (0, _censorHTMLstring__WEBPACK_IMPORTED_MODULE_0__.A)(target.innerHTML) + closers.join("");
                  }
                })
              ),
              /***/
              4531: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  const get = function get2(map, key) {
                    const value = map.get(key);
                    if (value === void 0) {
                      throw new Error("Key not found in map");
                    }
                    return value;
                  };
                  const __WEBPACK_DEFAULT_EXPORT__ = get;
                })
              ),
              /***/
              6305: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      htmlToText2
                    )
                  });
                  ;
                  function removeHtmlTags(html) {
                    return html.replace(/<[^>]*>?/g, "");
                  }
                  const removeHtmlTagsPolicy = globalThis.trustedTypes?.createPolicy("inboxSdk__removeHtmlTagsPolicy", {
                    createHTML(string) {
                      return removeHtmlTags(string);
                    }
                  }) ?? {
                    createHTML(string) {
                      return removeHtmlTags(string);
                    }
                  };
                  ;
                  function htmlToText2(html) {
                    const div = document.createElement("div");
                    div.innerHTML = removeHtmlTagsPolicy.createHTML(html);
                    return div.textContent;
                  }
                })
              ),
              /***/
              8130: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      isElementVisible
                    )
                    /* harmony export */
                  });
                  function isElementVisible(el) {
                    return el.offsetWidth > 0 || el.offsetHeight > 0;
                  }
                })
              ),
              /***/
              960: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      isNotNil
                    )
                    /* harmony export */
                  });
                  function isNotNil(value) {
                    return value != null;
                  }
                })
              ),
              /***/
              4782: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    Q: () => (
                      /* binding */
                      BUILD_VERSION
                    )
                    /* harmony export */
                  });
                  const BUILD_VERSION = "2.2.7-1753737313283-f941d482eba8eb97";
                  if (false) {
                  }
                })
              ),
              /***/
              6280: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    Cs: () => (
                      /* binding */
                      ROUTE_TYPES
                    ),
                    /* harmony export */
                    Kc: () => (
                      /* binding */
                      NATIVE_LIST_ROUTE_IDS
                    ),
                    /* harmony export */
                    Vi: () => (
                      /* binding */
                      NATIVE_ROUTE_IDS
                    )
                    /* harmony export */
                  });
                  const NATIVE_ROUTE_IDS = Object.freeze({
                    INBOX: "inbox/:page",
                    ALL_MAIL: "all/:page",
                    SENT: "sent/:page",
                    STARRED: "starred/:page",
                    DRAFTS: "drafts/:page",
                    SNOOZED: "snoozed/:page",
                    DONE: "done",
                    REMINDERS: "reminders",
                    LABEL: "label/:labelName/:page",
                    TRASH: "trash/:page",
                    SPAM: "spam/:page",
                    IMPORTANT: "imp/:page",
                    SEARCH: "search/:query/:page",
                    THREAD: "inbox/:threadID",
                    CHATS: "chats/:page",
                    CHAT: "chats/:chatID",
                    CONTACTS: "contacts/:page",
                    CONTACT: "contacts/:contactID",
                    SETTINGS: "settings/:section",
                    /** DEC 2022 */
                    SCHEDULED: "scheduled",
                    /** FEB 2023 */
                    CHAT_WELCOME: "chat/welcome",
                    /** FEB 2023 */
                    CHAT_DM: "chat/dm/:chatID",
                    /** FEB 2023 */
                    SPACES_WELCOME: "rooms/welcome",
                    /** FEB 2023 */
                    SPACE: "chat/space/:spaceID",
                    /** FEB 2023 */
                    MEET: "calls",
                    ANY_LIST: "*"
                  });
                  const NATIVE_LIST_ROUTE_IDS = Object.freeze({
                    INBOX: NATIVE_ROUTE_IDS.INBOX,
                    ALL_MAIL: NATIVE_ROUTE_IDS.ALL_MAIL,
                    SENT: NATIVE_ROUTE_IDS.SENT,
                    STARRED: NATIVE_ROUTE_IDS.STARRED,
                    DRAFTS: NATIVE_ROUTE_IDS.DRAFTS,
                    SNOOZED: NATIVE_ROUTE_IDS.SNOOZED,
                    DONE: NATIVE_ROUTE_IDS.DONE,
                    REMINDERS: NATIVE_ROUTE_IDS.REMINDERS,
                    LABEL: NATIVE_ROUTE_IDS.LABEL,
                    TRASH: NATIVE_ROUTE_IDS.TRASH,
                    SPAM: NATIVE_ROUTE_IDS.SPAM,
                    IMPORTANT: NATIVE_ROUTE_IDS.IMPORTANT,
                    SEARCH: NATIVE_ROUTE_IDS.SEARCH,
                    ANY_LIST: NATIVE_ROUTE_IDS.ANY_LIST
                  });
                  const ROUTE_TYPES = Object.freeze({
                    LIST: "LIST",
                    THREAD: "THREAD",
                    SETTINGS: "SETTINGS",
                    CHAT: "CHAT",
                    SPACE: "SPACE",
                    MEET: "MEET",
                    CUSTOM: "CUSTOM",
                    UNKNOWN: "UNKNOWN"
                  });
                })
              ),
              /***/
              876: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var lodash_memoize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(9513);
                  var lodash_memoize__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(lodash_memoize__WEBPACK_IMPORTED_MODULE_0__);
                  var ud__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__3(7332);
                  var _driver_common_gmailAjax__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(5609);
                  var _gmail_response_processor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(1433);
                  var _lib_isStreakAppId__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__3(8579);
                  module3 = __webpack_require__3.hmd(module3);
                  async function uncachedGetDraftIDForMessageID(driver, messageID) {
                    const response = await (0, _driver_common_gmailAjax__WEBPACK_IMPORTED_MODULE_1__.A)({
                      method: "GET",
                      url: document.location.origin + document.location.pathname,
                      data: {
                        ui: "2",
                        ik: driver.getPageCommunicator().getIkValue(),
                        view: "cv",
                        th: messageID,
                        prf: "1",
                        nsc: "1",
                        mb: "0",
                        rt: "j",
                        search: "drafts"
                      }
                    });
                    try {
                      const draftID = (0, _gmail_response_processor__WEBPACK_IMPORTED_MODULE_2__.Vo)(response.text, messageID);
                      const debugData = {
                        responseText: response.text
                      };
                      return {
                        draftID,
                        debugData
                      };
                    } catch (err) {
                      if ((0, _lib_isStreakAppId__WEBPACK_IMPORTED_MODULE_3__.A)(driver.getAppId())) {
                        driver.getLogger().error(err, {
                          message: "failed to read draft ID",
                          messageID,
                          text: response.text
                        });
                      }
                      throw err;
                    }
                  }
                  const cachedGetDraftIDForMessageID = lodash_memoize__WEBPACK_IMPORTED_MODULE_0___default()(uncachedGetDraftIDForMessageID, (driver, messageID) => messageID);
                  function getDraftIDForMessageID(driver, messageID) {
                    let skipCache = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
                    if (skipCache) {
                      return uncachedGetDraftIDForMessageID(driver, messageID);
                    } else {
                      return cachedGetDraftIDForMessageID(driver, messageID);
                    }
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_4__.defn)(module3, getDraftIDForMessageID);
                })
              ),
              /***/
              7101: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var lodash_includes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(5193);
                  var lodash_includes__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(lodash_includes__WEBPACK_IMPORTED_MODULE_0__);
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(7332);
                  var _constants_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(6280);
                  var _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__3(4603);
                  module3 = __webpack_require__3.hmd(module3);
                  const gotoView = ud__WEBPACK_IMPORTED_MODULE_2__.defn(module3, async function gotoView2(gmailDriver, viewName, params) {
                    if (viewName[0] === "#") {
                      if (params) {
                        throw new Error("params parameter can't be passed with resolved URL");
                      }
                      viewName = viewName.slice(1);
                    }
                    if (lodash_includes__WEBPACK_IMPORTED_MODULE_0___default()(_constants_router__WEBPACK_IMPORTED_MODULE_1__.Vi, viewName)) {
                      if (params && typeof params !== "string") {
                        const threadID = params.threadID;
                        if (threadID && typeof threadID === "string") {
                          const int = parseInt(threadID, 16);
                          if (!isNaN(int)) {
                            const syncThreadId = await gmailDriver.getSyncThreadIdForOldGmailThreadId(threadID);
                            params = {
                              ...params,
                              threadID: "#" + syncThreadId
                            };
                          }
                        }
                      }
                      const newHash = gmailDriver.createLink(viewName, params);
                      const link = document.createElement("a");
                      link.style.display = "none";
                      link.href = newHash;
                      document.body.appendChild(link);
                      (0, _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_3__.jp)(link);
                      link.remove();
                    } else {
                      const newHash = gmailDriver.createLink(viewName, params);
                      window.location.hash = newHash;
                    }
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = gotoView;
                })
              ),
              /***/
              6908: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    Ay: () => (
                      /* binding */
                      isIntegratedViewGmail
                    ),
                    /* harmony export */
                    HW: () => (
                      /* binding */
                      isCollapsiblePanelHidden
                    ),
                    /* harmony export */
                    Zu: () => (
                      /* binding */
                      isGoogleChatEnabled
                    )
                    /* harmony export */
                  });
                  function isIntegratedViewGmail() {
                    const nav = document.querySelector("div[role=navigation] > :nth-child(1).Xa");
                    return nav != null;
                  }
                  function isCollapsiblePanelHidden() {
                    if (!isIntegratedViewGmail()) {
                      return null;
                    }
                    return document.querySelector("div[role=navigation].aBA") != null;
                  }
                  function isGoogleChatEnabled() {
                    return document.querySelector("div[role=navigation] > .ao4") != null;
                  }
                })
              ),
              /***/
              2268: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      overrideGmailBackButton
                    )
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(7332);
                  var _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(4003);
                  var _lib_dom_on_mouse_down_and_up__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(8734);
                  module3 = __webpack_require__3.hmd(module3);
                  function overrideGmailBackButton(gmailDriver, gmailRouteProcessor) {
                    _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.waitForGmailModeToSettle().then(function() {
                      if (_gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.isStandalone()) {
                        return;
                      }
                      _setupManagement(gmailDriver, gmailRouteProcessor);
                    });
                  }
                  function _setupManagement(gmailDriver, gmailRouteProcessor) {
                    gmailDriver.getRouteViewDriverStream().scan((prev, gmailRouteView) => {
                      let lastCustomRouteID, lastCustomRouteParams;
                      if (prev && prev.gmailRouteView && prev.gmailRouteView.isCustomRouteBelongingToApp()) {
                        lastCustomRouteID = prev.gmailRouteView.getRouteID();
                        lastCustomRouteParams = prev.gmailRouteView.getParams();
                      }
                      return {
                        gmailRouteView,
                        lastCustomRouteID,
                        lastCustomRouteParams
                      };
                    }, void 0).changes().onValue((_ref) => {
                      let {
                        gmailRouteView,
                        lastCustomRouteID,
                        lastCustomRouteParams
                      } = _ref;
                      handleGmailRouteView(gmailRouteView, lastCustomRouteID, lastCustomRouteParams, gmailDriver, gmailRouteProcessor);
                    });
                  }
                  const handleGmailRouteView = (0, ud__WEBPACK_IMPORTED_MODULE_2__.defn)(module3, function handleGmailRouteView2(gmailRouteView, lastCustomRouteID, lastCustomRouteParams, gmailDriver, gmailRouteProcessor) {
                    if (lastCustomRouteID && gmailRouteView.getRouteType() === gmailRouteProcessor.RouteTypes.THREAD) {
                      _bindToBackButton(gmailDriver, gmailRouteView);
                    }
                  });
                  function _bindToBackButton(gmailDriver, gmailRouteView) {
                    const backButton = _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.getThreadBackButton();
                    if (!backButton) {
                      return;
                    }
                    (0, _lib_dom_on_mouse_down_and_up__WEBPACK_IMPORTED_MODULE_1__.A)(backButton).takeUntilBy(gmailRouteView.getStopper()).filter((e) => !e.defaultPrevented).onValue((e) => {
                      window.history.back();
                      e.preventDefault();
                      e.stopImmediatePropagation();
                    });
                  }
                })
              ),
              /***/
              7032: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      setupComposeViewDriverStream
                    )
                  });
                  var kefir_esm = __webpack_require__3(7249);
                  var js = __webpack_require__3(616);
                  var js_default = /* @__PURE__ */ __webpack_require__3.n(js);
                  var make_mutation_observer_chunked_stream = __webpack_require__3(3197);
                  var make_element_child_stream = __webpack_require__3(2843);
                  ;
                  function elementViewMapper(viewFn) {
                    return (event) => {
                      const view = viewFn(event.el);
                      event.removalStream.take(1).onValue(() => {
                        view.destroy();
                      });
                      return view;
                    };
                  }
                  ;
                  class StopperPool {
                    _streamCount = 0;
                    _ended = false;
                    _pool = kefir_esm.pool();
                    constructor(streams) {
                      this.stream = this._pool.filter(() => {
                        this._streamCount--;
                        if (this._streamCount === 0) {
                          this._ended = true;
                          return true;
                        }
                        return false;
                      }).take(1).toProperty();
                      this.stream.onValue(() => {
                      });
                      this.add(streams);
                    }
                    add(newStreams) {
                      if (this._ended) {
                        throw new Error("Tried to add a stream to a stopped StopperPool");
                      }
                      const arrStreams = Array.isArray(newStreams) ? newStreams : [newStreams];
                      this._streamCount += arrStreams.length;
                      this._pool.plug(kefir_esm.merge(arrStreams.map((newStream) => newStream.take(1))));
                    }
                    getSize() {
                      return this._streamCount;
                    }
                  }
                  var delay_asap = __webpack_require__3(1136);
                  ;
                  function makeElementStreamMerger() {
                    const knownElementStopperPools = /* @__PURE__ */ new Map();
                    return (event) => {
                      let stopperPool = knownElementStopperPools.get(event.el);
                      if (stopperPool) {
                        if (stopperPool.getSize() > 1) {
                          console.warn("element is part of multiple element streams", stopperPool.getSize(), event.el);
                        }
                        stopperPool.add(event.removalStream.flatMap(delay_asap.A));
                        return kefir_esm.never();
                      } else {
                        stopperPool = new StopperPool(event.removalStream.flatMap(delay_asap.A));
                        stopperPool.stream.onValue(function() {
                          knownElementStopperPools.delete(event.el);
                        });
                        knownElementStopperPools.set(event.el, stopperPool);
                        return kefir_esm.constant({
                          el: event.el,
                          removalStream: stopperPool.stream
                        });
                      }
                    };
                  }
                  var gmail_element_getter = __webpack_require__3(4003);
                  var gmail_compose_view = __webpack_require__3(3737);
                  var isNotNil = __webpack_require__3(960);
                  ;
                  module3 = __webpack_require__3.hmd(module3);
                  var impStream = js_default()(module3, imp);
                  function setupComposeViewDriverStream(gmailDriver, messageViewDriverStream, xhrInterceptorStream) {
                    return impStream.flatMapLatest((imp2) => imp2(gmailDriver, messageViewDriverStream, xhrInterceptorStream));
                  }
                  function imp(gmailDriver, messageViewDriverStream, xhrInterceptorStream) {
                    return kefir_esm.fromPromise(gmail_element_getter.A.waitForGmailModeToSettle()).flatMap(() => {
                      let elementStream;
                      let isStandalone = false;
                      if (gmail_element_getter.A.isStandaloneComposeWindow()) {
                        elementStream = _setupStandaloneComposeElementStream();
                        isStandalone = true;
                      } else if (gmail_element_getter.A.isStandaloneThreadWindow()) {
                        elementStream = kefir_esm.never();
                      } else {
                        elementStream = _setupStandardComposeElementStream();
                      }
                      return elementStream.map(elementViewMapper((el) => new gmail_compose_view.A(el, xhrInterceptorStream, gmailDriver, {
                        isStandalone,
                        isInlineReplyForm: false
                      })));
                    }).merge(messageViewDriverStream.flatMap((gmailMessageView) => gmailMessageView.getReplyElementStream().map(elementViewMapper((el) => new gmail_compose_view.A(el, xhrInterceptorStream, gmailDriver, {
                      isStandalone: false,
                      isInlineReplyForm: true
                    }))))).flatMap((composeViewDriver) => composeViewDriver.ready());
                  }
                  function _setupStandardComposeElementStream() {
                    return _waitForContainerAndMonitorChildrenStream(() => gmail_element_getter.A.getComposeWindowContainer()).flatMap((composeGrandParent) => {
                      const composeParentEl = composeGrandParent.el.querySelector("div.AD");
                      if (composeParentEl) {
                        return (0, make_element_child_stream.A)(composeParentEl).takeUntilBy(composeGrandParent.removalStream).map(_informElement("composeFullscreenStateChanged"));
                      } else {
                        return kefir_esm.never();
                      }
                    }).merge(gmail_element_getter.A.getFullscreenComposeWindowContainerStream().flatMap((_ref) => {
                      let {
                        el,
                        removalStream
                      } = _ref;
                      return (0, make_element_child_stream.A)(el).takeUntilBy(removalStream);
                    }).map(_informElement("composeFullscreenStateChanged")).map((_ref2) => {
                      let {
                        el,
                        removalStream
                      } = _ref2;
                      const targetEl = el.querySelector("[role=dialog] div.aaZ");
                      if (!targetEl) return null;
                      var hiddenStream = (0, make_mutation_observer_chunked_stream.A)(targetEl, {
                        childList: true
                      }).filter(() => targetEl.childElementCount === 0).map(() => null);
                      return {
                        el,
                        removalStream: removalStream.merge(hiddenStream).take(1)
                      };
                    }).filter(isNotNil.A)).flatMap((event) => {
                      if (!event) throw new Error("Should not happen");
                      const el = event.el.querySelector("[role=dialog]");
                      if (!el || !el.querySelector("form")) {
                        return kefir_esm.never();
                      }
                      return kefir_esm.constant({
                        el,
                        removalStream: event.removalStream
                      });
                    }).flatMap(makeElementStreamMerger());
                  }
                  function _setupStandaloneComposeElementStream() {
                    return _waitForContainerAndMonitorChildrenStream(() => gmail_element_getter.A.StandaloneCompose.getComposeWindowContainer());
                  }
                  function _waitForContainerAndMonitorChildrenStream(containerFn) {
                    return kefir_esm.interval(2e3, void 0).map(containerFn).filter().take(1).flatMap((containerEl) => (0, make_element_child_stream.A)(containerEl));
                  }
                  function _informElement(eventName) {
                    return function(event) {
                      const composeEl = event && event.el && event.el.querySelector && event.el.querySelector("[role=dialog]");
                      if (composeEl) {
                        composeEl.dispatchEvent(new CustomEvent(eventName, {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      }
                      return event;
                    };
                  }
                })
              ),
              /***/
              3759: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(7332);
                  var _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(4003);
                  var _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(4603);
                  module3 = __webpack_require__3.hmd(module3);
                  const ACTIVE_ADD_ON_ICON_SELECTOR = ".J-KU-KO";
                  const showCustomRouteView = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module3, function showCustomRouteView2(gmailDriver, element) {
                    const contentSectionElement = _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.getContentSectionElement();
                    if (!contentSectionElement) {
                      return;
                    }
                    const selection2 = document.getSelection();
                    for (let i2 = 0; i2 < selection2.rangeCount; i2++) {
                      const range = selection2.getRangeAt(i2);
                      if (typeof range.intersectsNode === "function" && range.intersectsNode(contentSectionElement)) {
                        selection2.removeAllRanges();
                        break;
                      }
                    }
                    const customViewContainerElement = _getCustomViewContainerElement(contentSectionElement);
                    customViewContainerElement.appendChild(element);
                    const children = contentSectionElement.children;
                    Array.prototype.forEach.call(children, (child) => {
                      if (child.classList.contains("inboxsdk__custom_view")) {
                        return;
                      }
                      child.style.display = "none";
                    });
                    const companionSidebarIconContainerEl = _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.getCompanionSidebarIconContainerElement();
                    if (companionSidebarIconContainerEl) {
                      const activeThreadAddOnIcon = companionSidebarIconContainerEl.querySelector(ACTIVE_ADD_ON_ICON_SELECTOR);
                      if (activeThreadAddOnIcon) {
                        (0, _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_2__.jp)(activeThreadAddOnIcon);
                      }
                    }
                    document.body.classList.add("inboxsdk__custom_view_active");
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = showCustomRouteView;
                  function _getCustomViewContainerElement(contentSectionElement) {
                    let customViewContainerElement = contentSectionElement.querySelector(".inboxsdk__custom_view");
                    if (customViewContainerElement) {
                      return customViewContainerElement;
                    }
                    customViewContainerElement = document.createElement("div");
                    customViewContainerElement.classList.add("inboxsdk__custom_view");
                    contentSectionElement.appendChild(customViewContainerElement);
                    return customViewContainerElement;
                  }
                })
              ),
              /***/
              4003: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      gmail_element_getter
                    )
                  });
                  var once = __webpack_require__3(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__3.n(once);
                  var kefir_esm = __webpack_require__3(7249);
                  var make_element_child_stream = __webpack_require__3(2843);
                  var querySelectorOrFail = __webpack_require__3(9860);
                  var make_mutation_observer_chunked_stream = __webpack_require__3(3197);
                  ;
                  const waitForGmailModeToSettle = once_default()(() => (0, make_mutation_observer_chunked_stream.A)(document.body, {
                    attributes: true,
                    attributeFilter: ["class"]
                  }).toProperty(() => void 0).filter(() => document.body.classList.length > 0).map(() => void 0).take(1).toProperty());
                  const wait_for_gmail_mode_to_settle = waitForGmailModeToSettle;
                  var last2 = __webpack_require__3(6456);
                  var last_default = /* @__PURE__ */ __webpack_require__3.n(last2);
                  var stream_wait_for = __webpack_require__3(1539);
                  ;
                  function getMainContentElementChangedStream(GmailElementGetter2) {
                    const s = waitForMainContentContainer(GmailElementGetter2).flatMap((mainContentContainer) => (0, make_element_child_stream.A)(mainContentContainer).filter((_ref) => {
                      let {
                        el
                      } = _ref;
                      return el.classList.contains("nH");
                    }).flatMap((_ref2) => {
                      let {
                        el,
                        removalStream
                      } = _ref2;
                      return (0, make_mutation_observer_chunked_stream.A)(el, {
                        attributes: true,
                        attributeFilter: ["style"]
                      }).map((x2) => last_default()(x2)).toProperty(() => {
                        return {
                          target: el
                        };
                      }).filter(_isNowVisible).map((e) => e.target).takeUntilBy(removalStream);
                    })).toProperty();
                    s.onValue(() => {
                    });
                    return s;
                  }
                  function waitForMainContentContainer(GmailElementGetter2) {
                    if (GmailElementGetter2.isStandaloneComposeWindow()) {
                      return kefir_esm.never();
                    }
                    return (0, stream_wait_for.A)(() => GmailElementGetter2.getMainContentContainer());
                  }
                  function _isNowVisible(mutation) {
                    const el = mutation.target;
                    return el.style.display !== "none";
                  }
                  var isIntegratedViewGmail = __webpack_require__3(6908);
                  var logger = __webpack_require__3(2617);
                  var wait_for = __webpack_require__3(5156);
                  ;
                  const APP_MENU = ".aeN.WR.a6o.anZ.nH.oy8Mbf[role=navigation]";
                  const NAV_MENU = ".aeN.WR.nH.oy8Mbf[role=navigation]";
                  const GmailElementGetter = {
                    getActiveMoreMenu() {
                      const elements = document.querySelectorAll(".J-M.aX0.aYO.jQjAxd");
                      for (let ii = 0; ii < elements.length; ii++) {
                        if (elements[ii].style.display !== "none") {
                          return elements[ii];
                        }
                      }
                      return null;
                    },
                    getAddonSidebarContainerElement() {
                      return document.querySelector(".no > .nn.bnl");
                    },
                    getCompanionSidebarContentContainerElement() {
                      return document.querySelector(".brC-brG");
                    },
                    // <div class="brC-aT5-aOt-Jw" role="complementary" aria-label="Side panel">
                    getCompanionSidebarIconContainerElement() {
                      return document.querySelector(".brC-aT5-aOt-Jw");
                    },
                    getComposeButton() {
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return document.querySelector(".aIH .aic div[role=button].L3");
                      }
                      return document.querySelector("[gh=cm]");
                    },
                    getComposeWindowContainer() {
                      return document.querySelector(".dw .nH > .nH > .no");
                    },
                    getContentSectionElement() {
                      const el = document.querySelector("div.nH.bkK > .nH");
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return el;
                      } else {
                        const leftNavContainer = GmailElementGetter.getLeftNavContainerElement();
                        const oldMethodEl = leftNavContainer ? leftNavContainer.nextElementSibling.children[0] : null;
                        if (el !== oldMethodEl) {
                          logger.A.error(new Error("getContentSectionElement old and new method inconsistency"), {
                            elClassName: el?.className,
                            oldMethodClassName: oldMethodEl?.className
                          });
                        }
                        return oldMethodEl;
                      }
                    },
                    getFullscreenComposeWindowContainer() {
                      return document.querySelector(".aSs .aSt");
                    },
                    getFullscreenComposeWindowContainerStream() {
                      if (!document.body) throw new Error();
                      return (0, make_element_child_stream.A)(document.body).filter((_ref) => {
                        let {
                          el
                        } = _ref;
                        return el.classList.contains("aSs");
                      }).flatMap((_ref2) => {
                        let {
                          el,
                          removalStream
                        } = _ref2;
                        return (0, make_element_child_stream.A)(el).takeUntilBy(removalStream);
                      }).filter((_ref3) => {
                        let {
                          el
                        } = _ref3;
                        return el.classList.contains("aSt");
                      }).take(1).map((_ref4) => {
                        let {
                          el
                        } = _ref4;
                        return {
                          el,
                          removalStream: kefir_esm.never()
                        };
                      }).toProperty();
                    },
                    getGtalkButtons() {
                      return document.querySelector(".aeN .aj5.J-KU-Jg");
                    },
                    getLeftNavContainerElement() {
                      if (this.getAppMenu()) {
                        return this.getAppMenuContainer()?.querySelector(".aqn.aIH") ?? null;
                      }
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return document.querySelector("div[role=navigation] + div.aqn");
                      }
                      return document.querySelector(".aeN");
                    },
                    getLeftNavHeightElement() {
                      return document.querySelector(".aeN");
                    },
                    getMainContentBodyContainerElement() {
                      return document.querySelector(".no > .nn.bkK");
                    },
                    getMainContentContainer() {
                      return document.querySelector("div.aeF > div.nH");
                    },
                    getMainContentElementChangedStream: once_default()(function() {
                      return getMainContentElementChangedStream(this);
                    }),
                    /**
                     * This method checks whether we should use the old InboxSDK style of adding nav items
                     * inline among Gmail's nav items (as opposed to the newer style where we put our nav items
                     * in their own sections at the bottom of the leftnav).
                     */
                    shouldAddNavItemsInline() {
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return true;
                      }
                      const leftNavElement = document.querySelector(".aeN[role=navigation], .aeN [role=navigation]");
                      if (!leftNavElement) {
                        throw new Error("shouldAddNavItemsInline failed to find leftNavElement");
                      }
                      if (leftNavElement.classList.contains("aZ6")) {
                        return true;
                      } else {
                        return false;
                      }
                    },
                    getAppMenuAsync: once_default()(async () => {
                      if (!GmailElementGetter.isStandalone()) {
                        await GmailElementGetter.waitForGmailModeToSettle();
                        try {
                          const element = await (0, wait_for.A)(() => document.querySelector(`${APP_MENU}, ${NAV_MENU}`));
                          if (!document.querySelector(APP_MENU)) {
                            return;
                          }
                          return element;
                        } catch (e) {
                          logger.A.error(e);
                        }
                      }
                    }),
                    getAppBurgerMenu() {
                      return document.querySelector('header[role="banner"] > div > div > div[aria-expanded]');
                    },
                    isAppBurgerMenuOpen() {
                      return this.getAppBurgerMenu()?.getAttribute("aria-expanded") === "true";
                    },
                    getAppMenuContainer() {
                      return document.querySelector(".aqk.aql.bkL");
                    },
                    getAppMenu() {
                      return document.querySelector(APP_MENU);
                    },
                    getAppHeader() {
                      return document.querySelector(".oy8Mbf.qp");
                    },
                    getSeparateSectionNavItemMenuInjectionContainer() {
                      return document.querySelector(".aeN");
                    },
                    getSameSectionNavItemMenuInjectionContainer() {
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return document.querySelector(".yJ .wT > .n3");
                      } else {
                        return document.querySelector(".aeN .n3");
                      }
                    },
                    getRowListElementsContainer() {
                      return document.querySelector(".bGI.nH")?.parentElement ?? null;
                    },
                    getRowListElements() {
                      const rowListElements = document.querySelectorAll("[gh=tl]");
                      if (rowListElements.length === 0) {
                        return null;
                      }
                      return Array.from(rowListElements);
                    },
                    getScrollContainer() {
                      return document.querySelector("div.Tm.aeJ");
                    },
                    getSearchInput() {
                      return document.querySelector("form[role=search] input");
                    },
                    getSearchSuggestionsBoxParent() {
                      return document.querySelector("table.gstl_50 > tbody > tr > td.gssb_e");
                    },
                    getSidebarContainerElement() {
                      return document.querySelector("[role=main] table.Bs > tr .y3");
                    },
                    getThreadBackButton() {
                      let toolbarElement;
                      try {
                        toolbarElement = GmailElementGetter.getToolbarElement();
                      } catch (err) {
                        return null;
                      }
                      return toolbarElement.querySelector(".lS");
                    },
                    getThreadContainerElement() {
                      const selector = "[role=main] .g.id table.Bs > tr";
                      const selector_2023_11_16 = "[role=main] .g.id .a98.iY";
                      const threadContainerElement = document.querySelector(selector);
                      if (threadContainerElement) {
                        return threadContainerElement;
                      }
                      return document.querySelector(selector_2023_11_16);
                    },
                    getPreviewPaneContainerElement() {
                      return document.querySelector("div[role=main] .aia");
                    },
                    getToolbarElement() {
                      return (0, querySelectorOrFail.A)(document, "[gh=tm]");
                    },
                    getTopAccountContainer() {
                      return document.querySelector('header[role="banner"] > div:nth-child(2) > div:nth-child(2)');
                    },
                    isGplusEnabled() {
                      const topAccountContainer = GmailElementGetter.getTopAccountContainer();
                      if (!topAccountContainer) {
                        return false;
                      }
                      return topAccountContainer.querySelectorAll('a[href*="https://plus"][href*="upgrade"]').length === 0;
                    },
                    /** @deprecated this doesn't include Gmail themes where the frame is dark and the body is not. Use Global.gmailTheme instead */
                    isDarkTheme() {
                      return document.body.classList.contains("inboxsdk__gmail_dark_theme");
                    },
                    isPreviewPane() {
                      return !!document.querySelector(".aia");
                    },
                    isStandalone() {
                      return this.isStandaloneComposeWindow() || this.isStandaloneThreadWindow();
                    },
                    isStandaloneComposeWindow() {
                      return document.body.classList.contains("xE") && document.body.classList.contains("xp");
                    },
                    isStandaloneThreadWindow() {
                      return document.body.classList.contains("aAU") && document.body.classList.contains("xE") && document.body.classList.contains("Su");
                    },
                    StandaloneCompose: {
                      getComposeWindowContainer() {
                        return document.querySelector("[role=main]");
                      }
                    },
                    waitForGmailModeToSettle() {
                      return wait_for_gmail_mode_to_settle().toPromise();
                    }
                  };
                  const gmail_element_getter = GmailElementGetter;
                })
              ),
              /***/
              1433: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    Vo: () => (
                      /* binding */
                      readDraftId
                    ),
                    /* harmony export */
                    Yl: () => (
                      /* binding */
                      extractMessageIdsFromThreadBatchRequest
                    )
                    /* harmony export */
                  });
                  var lodash_flatten__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(4176);
                  var lodash_flatten__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(lodash_flatten__WEBPACK_IMPORTED_MODULE_0__);
                  var lodash_last__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(6456);
                  var lodash_last__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(lodash_last__WEBPACK_IMPORTED_MODULE_1__);
                  var transducers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(6046);
                  var transducers_js__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__3.n(transducers_js__WEBPACK_IMPORTED_MODULE_2__);
                  var _common_html_to_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__3(6305);
                  var _common_assert__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__3(1602);
                  function extractGmailThreadIdFromMessageIdSearch(responseString) {
                    const threadResponseArray = deserialize(responseString).value;
                    const threadIdArrayMarker = "cs";
                    const threadIdArray = _searchArray(threadResponseArray, threadIdArrayMarker, (markerArray) => markerArray[0] === "cs" && markerArray.length > 20);
                    if (!threadIdArray) {
                      return null;
                    }
                    return threadIdArray[1];
                  }
                  function rewriteSingleQuotes(s) {
                    let i2 = 0;
                    const resultParts = [];
                    while (true) {
                      const nextQuoteIndex = findNextQuote(s, i2);
                      if (nextQuoteIndex < 0) {
                        resultParts.push(s.substr(i2));
                        break;
                      }
                      resultParts.push(s.substr(i2, nextQuoteIndex - i2));
                      resultParts.push('"');
                      i2 = nextQuoteIndex + 1;
                      if (s[nextQuoteIndex] === '"') {
                        const nextDoubleQuoteIndex = findNextUnescapedCharacter(s, i2, '"');
                        if (nextDoubleQuoteIndex < 0) {
                          throw new Error("Unclosed double quote");
                        }
                        resultParts.push(s.slice(i2, nextDoubleQuoteIndex + 1));
                        i2 = nextDoubleQuoteIndex + 1;
                      } else {
                        const nextSingleQuoteIndex = findNextUnescapedCharacter(s, i2, "'");
                        if (nextSingleQuoteIndex < 0) {
                          throw new Error("Unclosed single quote");
                        }
                        const part = s.slice(i2, nextSingleQuoteIndex).replace(/"/g, '\\"').replace(/\\'/g, "'");
                        resultParts.push(part);
                        resultParts.push('"');
                        i2 = nextSingleQuoteIndex + 1;
                      }
                    }
                    return resultParts.join("");
                  }
                  function findNextQuote(s, start) {
                    for (let i2 = start, len = s.length; i2 < len; i2++) {
                      if (s[i2] === '"' || s[i2] === "'") {
                        return i2;
                      }
                    }
                    return -1;
                  }
                  function findNextUnescapedCharacter(s, start, char) {
                    for (let i2 = start, len = s.length; i2 < len; i2++) {
                      if (s[i2] === "\\") {
                        i2++;
                      } else if (s[i2] === char) {
                        return i2;
                      }
                    }
                    return -1;
                  }
                  function deserialize(threadResponseString) {
                    const options = {
                      includeLengths: false,
                      suggestionMode: /^5\n/.test(threadResponseString),
                      noArrayNewLines: !/^[,\]]/m.test(threadResponseString),
                      includeExplicitNulls: true
                    };
                    const value = [];
                    let pos;
                    if (options.suggestionMode) {
                      pos = threadResponseString.indexOf("'\n");
                      if (pos === -1) {
                        throw new Error("Message was missing beginning header");
                      }
                      pos += 2;
                    } else {
                      pos = threadResponseString.indexOf("\n\n");
                      if (pos === -1) {
                        throw new Error("Message was missing beginning newlines");
                      }
                      pos += 2;
                    }
                    while (pos < threadResponseString.length) {
                      let lineEnd = threadResponseString.indexOf("\n", pos + 1);
                      if (lineEnd === -1) {
                        lineEnd = threadResponseString.length;
                      } else if (threadResponseString[lineEnd - 1] === "\r") {
                        lineEnd += 1;
                      }
                      const line = threadResponseString.slice(pos, lineEnd);
                      let dataLine;
                      if (/^\d+\s*$/.test(line)) {
                        options.includeLengths = true;
                        const length = +line;
                        dataLine = threadResponseString.slice(lineEnd, lineEnd + length);
                        pos = lineEnd + length;
                      } else {
                        dataLine = threadResponseString.slice(pos);
                        pos = threadResponseString.length;
                      }
                      value.push(deserializeArray(dataLine));
                    }
                    return {
                      value,
                      options
                    };
                  }
                  function transformUnquotedSections(str, cb) {
                    const parts = [];
                    let nextQuote;
                    let position = 0;
                    let inString = false;
                    while ((nextQuote = findNextUnescapedCharacter(str, position, '"')) !== -1) {
                      if (inString) {
                        parts.push(str.slice(position, nextQuote + 1));
                      } else {
                        parts.push(cb(str.slice(position, nextQuote + 1)));
                      }
                      position = nextQuote + 1;
                      inString = !inString;
                    }
                    if (inString) {
                      throw new Error("string ended inside quoted section");
                    }
                    parts.push(cb(str.slice(position)));
                    return parts.join("");
                  }
                  function deserializeArray(value) {
                    value = value.replace(/[\r\n\t]/g, "");
                    value = rewriteSingleQuotes(value);
                    value = transformUnquotedSections(
                      value,
                      (match) => match.replace(/,\s*(?=,|\])/g, ",null").replace(/\[\s*(?=,)/g, "[null")
                      // "
                    );
                    try {
                      return JSON.parse(value, (k, v) => v == null ? void 0 : v);
                    } catch (err) {
                      throw new Error("deserialization error");
                    }
                  }
                  function serialize(value, options) {
                    if (options.suggestionMode) {
                      assert(options.includeLengths);
                      return suggestionSerialize(value, options.includeExplicitNulls);
                    }
                    return threadListSerialize(value, options);
                  }
                  function threadListSerialize(threadResponseArray, options) {
                    const {
                      includeLengths,
                      noArrayNewLines,
                      includeExplicitNulls
                    } = options;
                    let response = ")]}'\n" + (noArrayNewLines && includeLengths ? "" : "\n");
                    for (let ii = 0; ii < threadResponseArray.length; ii++) {
                      const arraySection = threadResponseArray[ii];
                      const arraySectionString = serializeArray(arraySection, noArrayNewLines, includeExplicitNulls);
                      if (!includeLengths) {
                        response += arraySectionString;
                      } else {
                        const length = arraySectionString.length + (noArrayNewLines ? 2 : 1);
                        response += (noArrayNewLines ? "\n" : "") + length + "\n" + arraySectionString;
                      }
                    }
                    if (!includeLengths) {
                      if (!noArrayNewLines) {
                        const lines = response.split(/\r|\n/);
                        const firstLines = lines.slice(0, -3);
                        const lastLines = lines.slice(-3);
                        response = firstLines.join("\n");
                        response += "\n" + lastLines[0] + lastLines[1].replace(/"/g, "'");
                      } else {
                        response = response.replace(/"([0-9a-f]{8,16})"\]$/, "'$1']");
                      }
                    }
                    return response + (noArrayNewLines && includeLengths ? "\n" : "");
                  }
                  function suggestionSerialize(suggestionsArray, includeExplicitNulls) {
                    let response = "5\n)]}'\n";
                    for (let ii = 0; ii < suggestionsArray.length; ii++) {
                      const arraySection = suggestionsArray[ii];
                      const arraySectionString = serializeArray(arraySection, false, includeExplicitNulls);
                      const length = arraySectionString.length;
                      response += length + "\r\n" + arraySectionString;
                    }
                    return response;
                  }
                  function serializeArray(array, noArrayNewLines, includeExplicitNulls) {
                    let response = "[";
                    for (let ii = 0; ii < array.length; ii++) {
                      const item = array[ii];
                      let addition;
                      if (Array.isArray(item)) {
                        addition = serializeArray(item, noArrayNewLines, includeExplicitNulls);
                      } else if (item == null) {
                        addition = includeExplicitNulls ? "null" : "";
                      } else {
                        addition = JSON.stringify(item).replace(/</gim, "\\u003c").replace(/=/gim, "\\u003d").replace(/>/gim, "\\u003e").replace(/&/gim, "\\u0026");
                      }
                      if (ii > 0) {
                        response += ",";
                      }
                      response += addition;
                    }
                    response += "]" + (noArrayNewLines ? "" : "\n");
                    return response;
                  }
                  function readDraftId(response, messageID) {
                    const decoded = deserialize(response).value;
                    const msgA = transducers_js__WEBPACK_IMPORTED_MODULE_2___default().toArray(decoded, transducers_js__WEBPACK_IMPORTED_MODULE_2___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_2___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_2___default().filter(Array.isArray), transducers_js__WEBPACK_IMPORTED_MODULE_2___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_2___default().filter((x2) => x2[0] === "ms" && x2[1] === messageID), transducers_js__WEBPACK_IMPORTED_MODULE_2___default().take(1), transducers_js__WEBPACK_IMPORTED_MODULE_2___default().map((x2) => x2[60])))[0];
                    if (msgA) {
                      const match = msgA.match(/^msg-[^:]:(\S+)$/i);
                      return match && match[1];
                    }
                    return null;
                  }
                  function replaceThreadsInResponse(response, replacementThreads, _ref) {
                    let {
                      start,
                      total
                    } = _ref;
                    const {
                      value,
                      options
                    } = deserialize(response);
                    const actionResponseMode = value.length === 1 && value[0].length === 2 && typeof value[0][1] === "string";
                    const threadValue = actionResponseMode ? value[0][0].map((x2) => [x2]) : value;
                    const preTbGroups = [];
                    const postTbGroups = [];
                    let preTbItems = [];
                    let postTbItems = [];
                    let hasSeenTb = false;
                    threadValue.forEach((group) => {
                      let tbSeenInThisGroup = false;
                      const preTbGroup = [];
                      const postTbGroup = [];
                      group.forEach((item) => {
                        if (total && item[0] === "ti") {
                          if (typeof total === "number") {
                            item[2] = item[10] = total;
                          } else if (total === "MANY") {
                            item[2] = item[10] = 100 * 1e3;
                            item[3] = 1;
                            const query = item[5];
                            if (item[6]) {
                              item[6][0] = [query, 1];
                            } else {
                              console.error("replaceThreadsInResponse(): Missing item[6]");
                            }
                          }
                        }
                        if (item[0] === "tb") {
                          hasSeenTb = tbSeenInThisGroup = true;
                          if (preTbGroup.length) {
                            preTbItems = preTbGroup;
                          }
                          postTbItems = postTbGroup;
                        } else if (!hasSeenTb) {
                          preTbGroup.push(item);
                        } else {
                          postTbGroup.push(item);
                        }
                      });
                      if (!tbSeenInThisGroup) {
                        if (!hasSeenTb) {
                          preTbGroups.push(preTbGroup);
                        } else {
                          postTbGroups.push(postTbGroup);
                        }
                      }
                    });
                    const newTbs = _threadsToTbGroups(replacementThreads, start);
                    if (preTbItems.length) {
                      newTbs[0] = preTbItems.concat(newTbs[0] || []);
                    }
                    if (postTbItems.length) {
                      if (newTbs.length) {
                        newTbs[newTbs.length - 1] = newTbs[newTbs.length - 1].concat(postTbItems);
                      } else {
                        newTbs.push(postTbItems);
                      }
                    }
                    const parsedNew = flatten([preTbGroups, newTbs, postTbGroups]);
                    const allSections = flatten(parsedNew);
                    const endSection = last(allSections);
                    if (endSection[0] !== "e") {
                      throw new Error("Failed to find end section");
                    }
                    endSection[1] = allSections.length;
                    const fullNew = actionResponseMode ? [[flatten(parsedNew), value[0][1]]] : parsedNew;
                    return serialize(fullNew, options);
                  }
                  function extractThreads(response) {
                    return extractThreadsFromDeserialized(deserialize(response).value);
                  }
                  function extractThreadsFromDeserialized(value) {
                    if (value.length === 1 && value[0].length === 2 && typeof value[0][1] === "string") {
                      value = [value[0][0]];
                    }
                    return _extractThreadArraysFromResponseArray(value).map((thread) => Object.freeze(Object.defineProperty({
                      subject: htmlToText(thread[9]),
                      shortDate: htmlToText(thread[14]),
                      timeString: htmlToText(thread[15]),
                      peopleHtml: cleanupPeopleLine(thread[7]),
                      timestamp: thread[16] / 1e3,
                      isUnread: thread[9].indexOf("<b>") > -1,
                      lastEmailAddress: thread[28],
                      bodyPreviewHtml: thread[10],
                      someGmailMessageIds: [thread[1], thread[2]],
                      gmailThreadId: thread[0]
                    }, "_originalGmailFormat", {
                      value: thread
                    })));
                  }
                  const _extractMessageIdsFromThreadBatchRequestXf = transducers_js__WEBPACK_IMPORTED_MODULE_2___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_2___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_2___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_2___default().filter((item) => item[0] === "cs"), transducers_js__WEBPACK_IMPORTED_MODULE_2___default().map((item) => [item[1], item[2]]));
                  function extractMessageIdsFromThreadBatchRequest(response) {
                    const {
                      value
                    } = deserialize(response);
                    return transducers_js__WEBPACK_IMPORTED_MODULE_2___default().toObj(value, _extractMessageIdsFromThreadBatchRequestXf);
                  }
                  function cleanupPeopleLine(peopleHtml) {
                    return peopleHtml.replace(/^[^<]*/, "").replace(/(<span[^>]*) class="[^"]*"/g, "$1");
                  }
                  const _extractThreadArraysFromResponseArrayXf = transducers_js__WEBPACK_IMPORTED_MODULE_2___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_2___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_2___default().filter((item) => item[0] === "tb"), transducers_js__WEBPACK_IMPORTED_MODULE_2___default().map((item) => item[2]), transducers_js__WEBPACK_IMPORTED_MODULE_2___default().cat);
                  function _extractThreadArraysFromResponseArray(threadResponseArray) {
                    return t.toArray(threadResponseArray, _extractThreadArraysFromResponseArrayXf);
                  }
                  const _extractThreadsFromConversationViewResponseArrayXf = transducers_js__WEBPACK_IMPORTED_MODULE_2___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_2___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_2___default().filter((item) => item[0] === "cs"), transducers_js__WEBPACK_IMPORTED_MODULE_2___default().map((item) => ({
                    threadID: item[1],
                    messageIDs: item[8]
                  })));
                  const _extractMessagesFromResponseArrayXf = transducers_js__WEBPACK_IMPORTED_MODULE_2___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_2___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_2___default().filter((item) => item[0] === "ms"), transducers_js__WEBPACK_IMPORTED_MODULE_2___default().map((item) => ({
                    messageID: item[1],
                    date: item[7]
                  })));
                  function extractMessages(response) {
                    let {
                      value
                    } = deserialize(response);
                    if (value.length === 1) value = value[0];
                    const threads = t.toArray(value, _extractThreadsFromConversationViewResponseArrayXf);
                    const messages = t.toArray(value, _extractMessagesFromResponseArrayXf);
                    const messageMap = {};
                    messages.forEach((message) => {
                      messageMap[message.messageID] = message;
                    });
                    return threads.map((_ref2) => {
                      let {
                        threadID,
                        messageIDs
                      } = _ref2;
                      return {
                        threadID,
                        messages: messageIDs.map((messageID) => messageMap[messageID])
                      };
                    });
                  }
                  function _threadsToTbGroups(threads, start) {
                    const _threadsToTbGroupsXf = t.compose(t.map((thread) => thread._originalGmailFormat), t.partition(10), mapIndexed((threadsChunk, i2) => [["tb", start + i2 * 10, threadsChunk]]));
                    return t.toArray(threads, _threadsToTbGroupsXf);
                  }
                  function _searchArray(responseArray, marker, markerArrayValidator) {
                    const pathArray = _searchObject(responseArray, marker, 100);
                    for (let ii = 0; ii < pathArray.length; ii++) {
                      const pathToMarkerArray = pathArray[ii].path.slice(0, -1);
                      const markerArray = _getArrayValueFromPath(responseArray, pathToMarkerArray);
                      if (markerArrayValidator(markerArray)) {
                        return markerArray;
                      }
                    }
                  }
                  function _searchObject(element, query, maxDepth) {
                    const retVal = [];
                    const initialNode = {
                      el: element,
                      path: []
                    };
                    const nodeList = [initialNode];
                    while (nodeList.length > 0) {
                      const node = nodeList.pop();
                      if (node.path.length <= maxDepth) {
                        if (node.el !== null && typeof node.el === "object") {
                          const keys = Object.keys(node.el);
                          for (let i2 = 0; i2 < keys.length; i2++) {
                            const key = keys[i2];
                            const newNode = {
                              el: node.el[key],
                              path: node.path.concat([key])
                            };
                            nodeList.push(newNode);
                          }
                        } else {
                          if (node.el === query) {
                            retVal.push(node);
                          }
                        }
                      }
                    }
                    return retVal;
                  }
                  function _getArrayValueFromPath(responseArray, path) {
                    let currentArray = responseArray;
                    for (let ii = 0; ii < path.length; ii++) {
                      currentArray = currentArray[path[ii]];
                    }
                    return currentArray;
                  }
                })
              ),
              /***/
              6811: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    Uf: () => (
                      /* binding */
                      extractThreadsFromSearchResponse
                    ),
                    /* harmony export */
                    gb: () => (
                      /* binding */
                      extractThreadsFromThreadResponse
                    ),
                    /* harmony export */
                    q6: () => (
                      /* binding */
                      replaceThreadsInSearchResponse
                    )
                    /* harmony export */
                  });
                  var bignumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(2180);
                  var bignumber_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(bignumber_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _common_isNotNil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(960);
                  function extractThreadsFromSearchResponse(response) {
                    const parsedResponse = JSON.parse(response);
                    if (Array.isArray(parsedResponse)) {
                      try {
                        return extractThreadsFromSearchResponse_20220909(parsedResponse);
                      } catch (err) {
                        return [];
                      }
                    }
                    const threadDescriptors = parsedResponse && parsedResponse[3];
                    if (!threadDescriptors) return [];
                    return threadDescriptors.map((descriptorWrapper, index) => {
                      const descriptor = descriptorWrapper[1];
                      if (!descriptor) return null;
                      return {
                        subject: descriptor[1],
                        snippet: descriptor[2],
                        syncThreadID: descriptor[4],
                        // It seems Gmail is A/B testing including gmailThreadID in descriptor[20] and not including
                        // the encoded version of it in descriptor[18], so pull it from [20] if [18] is not set.
                        oldGmailThreadID: descriptor[18] != null ? new (bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(descriptor[18]).toString(16) : descriptor[20],
                        rawResponse: descriptorWrapper,
                        extraMetaData: {
                          snippet: parsedResponse[15] && parsedResponse[15][1] && parsedResponse[15][1][index] || "",
                          syncMessageData: descriptor[5].map((md) => ({
                            syncMessageID: md[1],
                            oldMessageID: md[56],
                            date: +md[7]
                          }))
                        }
                      };
                    }).filter(_common_isNotNil__WEBPACK_IMPORTED_MODULE_1__.A);
                  }
                  function extractThreadsFromSearchResponse_20220909(parsedResponse) {
                    const threadDescriptors = parsedResponse && parsedResponse[2];
                    if (!threadDescriptors) return [];
                    return threadDescriptors.map((descriptorWrapper, index) => {
                      const descriptor = descriptorWrapper[0];
                      if (!descriptor) return null;
                      return {
                        subject: descriptor[0],
                        snippet: descriptor[1],
                        syncThreadID: descriptor[3],
                        // It seems Gmail is A/B testing including gmailThreadID in descriptor[20] and not including
                        // the encoded version of it in descriptor[18], so pull it from [20] if [18] is not set.
                        oldGmailThreadID: descriptor[17] != null ? new (bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(descriptor[17]).toString(16) : descriptor[19],
                        rawResponse: descriptorWrapper,
                        extraMetaData: {
                          snippet: parsedResponse[14] && parsedResponse[14][0] && parsedResponse[14][0][index] || "",
                          syncMessageData: descriptor[4].map((md) => ({
                            syncMessageID: md[0],
                            oldMessageID: md[55],
                            date: +md[6]
                          }))
                        }
                      };
                    }).filter(_common_isNotNil__WEBPACK_IMPORTED_MODULE_1__.A);
                  }
                  function extractThreadsFromThreadResponse(response) {
                    const parsedResponse = JSON.parse(response);
                    if (Array.isArray(parsedResponse)) {
                      return extractThreadsFromThreadResponse_20220909(parsedResponse);
                    }
                    const threadDescriptors = parsedResponse && parsedResponse[2];
                    if (!threadDescriptors) throw new Error("Failed to process thread response");
                    return threadDescriptors.map((descriptorWrapper) => {
                      if (typeof descriptorWrapper[1] === "string" && Array.isArray(descriptorWrapper[3]) && !(descriptorWrapper[2] && descriptorWrapper[2][1] && descriptorWrapper[2][1][14] && Array.isArray(descriptorWrapper[2][2]))) {
                        return {
                          syncThreadID: descriptorWrapper[1],
                          oldGmailThreadID: descriptorWrapper[2] && descriptorWrapper[2][1] && descriptorWrapper[2][1][16] || void 0,
                          extraMetaData: {
                            snippet: descriptorWrapper[2] && descriptorWrapper[2][1] && descriptorWrapper[2][1][3] || void 0,
                            syncMessageData: (descriptorWrapper[3] || []).filter((md) => Boolean(md[2])).map((md) => ({
                              syncMessageID: md[1],
                              date: +md[2][17],
                              recipients: getRecipientsFromMessageDescriptor(md)
                            }))
                          }
                        };
                      } else {
                        const threadDescriptor = descriptorWrapper[2] && descriptorWrapper[2][1];
                        if (!threadDescriptor) return null;
                        let syncMessageData;
                        const fullMessageDescriptors = Array.isArray(descriptorWrapper[3]) && descriptorWrapper[3];
                        if (fullMessageDescriptors) {
                          syncMessageData = fullMessageDescriptors.map((md) => ({
                            syncMessageID: md[1],
                            date: +md[2][17],
                            recipients: getRecipientsFromMessageDescriptor(md)
                          }));
                        } else {
                          const messageDescriptors = descriptorWrapper[2] && descriptorWrapper[2][2];
                          syncMessageData = messageDescriptors.map((md) => ({
                            syncMessageId: md[1],
                            date: +md[16]
                          }));
                        }
                        return {
                          subject: threadDescriptor[2],
                          snippet: threadDescriptor[3],
                          syncThreadID: threadDescriptor[1],
                          oldGmailThreadID: new (bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(threadDescriptor[14]).toString(16),
                          rawResponse: descriptorWrapper,
                          extraMetaData: {
                            syncMessageData,
                            snippet: ""
                          }
                        };
                      }
                    }).filter(_common_isNotNil__WEBPACK_IMPORTED_MODULE_1__.A);
                  }
                  function extractThreadsFromThreadResponse_20220909(parsedResponse) {
                    const threadDescriptors = parsedResponse && parsedResponse[1];
                    if (!threadDescriptors) throw new Error("Failed to process thread response");
                    return threadDescriptors.map((descriptorWrapper) => {
                      if (typeof descriptorWrapper[0] === "string" && Array.isArray(descriptorWrapper[2]) && !(descriptorWrapper[1] && descriptorWrapper[1][0] && descriptorWrapper[1][0][13] && Array.isArray(descriptorWrapper[1][1]))) {
                        return {
                          syncThreadID: descriptorWrapper[0],
                          oldGmailThreadID: descriptorWrapper[1] && descriptorWrapper[1][0] && descriptorWrapper[1][0][15] || void 0,
                          extraMetaData: {
                            snippet: descriptorWrapper[1] && descriptorWrapper[1][0] && descriptorWrapper[1][0][2] || void 0,
                            syncMessageData: (descriptorWrapper[2] || []).filter((md) => Boolean(md[1])).map((md) => ({
                              syncMessageID: md[0],
                              date: +md[1][16],
                              recipients: getRecipientsFromMessageDescriptor_20220909(md)
                            }))
                          }
                        };
                      } else {
                        const threadDescriptor = descriptorWrapper[1] && descriptorWrapper[1][0];
                        if (!threadDescriptor) return null;
                        let syncMessageData;
                        const fullMessageDescriptors = Array.isArray(descriptorWrapper[2]) && descriptorWrapper[2];
                        if (fullMessageDescriptors) {
                          syncMessageData = fullMessageDescriptors.map((md) => ({
                            syncMessageID: md[0],
                            date: +md[1][16],
                            recipients: getRecipientsFromMessageDescriptor_20220909(md)
                          }));
                        } else {
                          const messageDescriptors = descriptorWrapper[1] && descriptorWrapper[1][1];
                          syncMessageData = messageDescriptors.map((md) => ({
                            syncMessageId: md[0],
                            date: +md[15]
                          }));
                        }
                        return {
                          subject: threadDescriptor[1],
                          snippet: threadDescriptor[2],
                          syncThreadID: threadDescriptor[0],
                          oldGmailThreadID: new (bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(threadDescriptor[13]).toString(16),
                          rawResponse: descriptorWrapper,
                          extraMetaData: {
                            syncMessageData,
                            snippet: ""
                          }
                        };
                      }
                    }).filter(_common_isNotNil__WEBPACK_IMPORTED_MODULE_1__.A);
                  }
                  function getRecipientsFromMessageDescriptor(messageDescriptor) {
                    if (!messageDescriptor[2]) return;
                    const to = messageDescriptor[2][1] || [];
                    const cc = messageDescriptor[2][2] || [];
                    const bcc = messageDescriptor[2][3] || [];
                    return to.concat(cc).concat(bcc).map((recipientDescriptor) => ({
                      emailAddress: recipientDescriptor[2],
                      name: recipientDescriptor[3]
                    }));
                  }
                  function getRecipientsFromMessageDescriptor_20220909(messageDescriptor) {
                    if (!messageDescriptor[1]) return;
                    const to = messageDescriptor[1][0] || [];
                    const cc = messageDescriptor[1][1] || [];
                    const bcc = messageDescriptor[1][2] || [];
                    return to.concat(cc).concat(bcc).map((recipientDescriptor) => ({
                      emailAddress: recipientDescriptor[1],
                      name: recipientDescriptor[2]
                    }));
                  }
                  function replaceThreadsInSearchResponse(response, replacementThreads, _unused) {
                    const parsedResponse = JSON.parse(response);
                    if (Array.isArray(parsedResponse)) {
                      try {
                        return replaceThreadsInSearchResponse_20220909(parsedResponse, replacementThreads, _unused);
                      } catch (err) {
                        console.error("Caught err in replaceThreadsInSearchResponse", err);
                        return response;
                      }
                    }
                    if (parsedResponse[3] || replacementThreads.length) {
                      parsedResponse[3] = replacementThreads.map((_ref, index) => {
                        let {
                          rawResponse
                        } = _ref;
                        return {
                          ...rawResponse,
                          "2": index
                        };
                      });
                    }
                    if (parsedResponse[15] || replacementThreads.length) {
                      parsedResponse[15] = {
                        ...parsedResponse[15],
                        "1": replacementThreads.map((_ref2) => {
                          let {
                            extraMetaData
                          } = _ref2;
                          return extraMetaData.snippet;
                        }),
                        "2": replacementThreads.map((_ref3) => {
                          let {
                            extraMetaData
                          } = _ref3;
                          return extraMetaData.syncMessageData.map((_ref4) => {
                            let {
                              syncMessageID
                            } = _ref4;
                            return syncMessageID;
                          });
                        })
                      };
                    }
                    return JSON.stringify(parsedResponse);
                  }
                  function replaceThreadsInSearchResponse_20220909(parsedResponse, replacementThreads, _unused) {
                    if (parsedResponse[2] || replacementThreads.length) {
                      parsedResponse[2] = replacementThreads.map((_ref5, index) => {
                        let {
                          rawResponse
                        } = _ref5;
                        const res2 = [...rawResponse];
                        res2[1] = index;
                        return res2;
                      });
                    }
                    if (parsedResponse[14] || replacementThreads.length) {
                      parsedResponse[14] = [...parsedResponse[14]];
                      parsedResponse[14][0] = replacementThreads.map((_ref6) => {
                        let {
                          extraMetaData
                        } = _ref6;
                        return extraMetaData.snippet;
                      });
                      if (Array.isArray(parsedResponse[14][1]) && parsedResponse[14][1].length > 0 && Array.isArray(parsedResponse[14][1][0][0])) {
                        parsedResponse[14][1] = replacementThreads.map((_ref7) => {
                          let {
                            extraMetaData
                          } = _ref7;
                          return [[extraMetaData.syncMessageData[0].syncMessageID]];
                        });
                      } else {
                        parsedResponse[14][1] = replacementThreads.map((_ref8) => {
                          let {
                            extraMetaData
                          } = _ref8;
                          return extraMetaData.syncMessageData.map((_ref9) => {
                            let {
                              syncMessageID
                            } = _ref9;
                            return syncMessageID;
                          });
                        });
                      }
                    }
                    return JSON.stringify(parsedResponse);
                  }
                })
              ),
              /***/
              745: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      makePageParserTree
                    )
                  });
                  var js = __webpack_require__3(855);
                  var js_default = /* @__PURE__ */ __webpack_require__3.n(js);
                  var ud_kefir_js = __webpack_require__3(616);
                  var ud_kefir_js_default = /* @__PURE__ */ __webpack_require__3.n(ud_kefir_js);
                  ;
                  const pageParserOptions = {
                    tags: {},
                    watchers: [{
                      sources: [null],
                      tag: "composeLinkPopOverContainer",
                      selectors: ["body", ".Lf.a5s"]
                    }],
                    finders: {
                      supportMenu: {
                        fn: (root) => root.querySelectorAll("header[role=banner] div:not([aria-label]):not([data-ogsr-up]) > div:not(.inboxsdk__appButton) > div[data-tooltip] + div[role=menu]")
                      },
                      composeLinkPopOverContainer: {
                        fn: (root) => root.querySelectorAll("body > .Lf.a5s")
                      }
                    }
                  };
                  const gmail_pageParserOptions = pageParserOptions;
                  var censorHTMLtree = __webpack_require__3(1443);
                  ;
                  module3 = __webpack_require__3.hmd(module3);
                  const pageParserOptionsStream = ud_kefir_js_default()(module3, gmail_pageParserOptions);
                  function makePageParserTree(driver, root) {
                    const _driver = driver;
                    function transformOptions(pageParserOptions2) {
                      return !_driver ? pageParserOptions2 : {
                        ...pageParserOptions2,
                        logError(err, el) {
                          const details = {
                            el,
                            html: el ? (0, censorHTMLtree.A)(el) : null
                          };
                          _driver.getLogger().errorSite(err, details);
                        }
                      };
                    }
                    const page = new (js_default())(root, transformOptions(gmail_pageParserOptions));
                    pageParserOptionsStream.changes().onValue((pageParserOptions2) => {
                      console.log("replacing PageParserTree options");
                      page.replaceOptions(transformOptions(pageParserOptions2));
                    });
                    return page;
                  }
                })
              ),
              /***/
              2893: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      gmail_app_sidebar_view
                    )
                  });
                  var js = __webpack_require__3(616);
                  var js_default = /* @__PURE__ */ __webpack_require__3.n(js);
                  var kefir_esm = __webpack_require__3(7249);
                  var kefir_stopper_js = __webpack_require__3(4924);
                  var kefir_stopper_js_default = /* @__PURE__ */ __webpack_require__3.n(kefir_stopper_js);
                  var findIndex = __webpack_require__3(9339);
                  var findIndex_default = /* @__PURE__ */ __webpack_require__3.n(findIndex);
                  var browser_asap = __webpack_require__3(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__3.n(browser_asap);
                  var kefir_bus = __webpack_require__3(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__3.n(kefir_bus);
                  var order_manager_js = __webpack_require__3(451);
                  var order_manager_js_default = /* @__PURE__ */ __webpack_require__3.n(order_manager_js);
                  var react = __webpack_require__3(7810);
                  var react_dom = __webpack_require__3(2483);
                  ;
                  function _extends() {
                    _extends = Object.assign ? Object.assign.bind() : function(target) {
                      for (var i2 = 1; i2 < arguments.length; i2++) {
                        var source = arguments[i2];
                        for (var key in source) {
                          if (Object.prototype.hasOwnProperty.call(source, key)) {
                            target[key] = source[key];
                          }
                        }
                      }
                      return target;
                    };
                    return _extends.apply(this, arguments);
                  }
                  var flatMap = __webpack_require__3(6501);
                  var flatMap_default = /* @__PURE__ */ __webpack_require__3.n(flatMap);
                  var sortBy = __webpack_require__3(3281);
                  var sortBy_default = /* @__PURE__ */ __webpack_require__3.n(sortBy);
                  var classnames = __webpack_require__3(5755);
                  var classnames_default = /* @__PURE__ */ __webpack_require__3.n(classnames);
                  var react_draggable_list_js = __webpack_require__3(6931);
                  var react_draggable_list_js_default = /* @__PURE__ */ __webpack_require__3.n(react_draggable_list_js);
                  var react_smooth_collapse_js = __webpack_require__3(4293);
                  var idMap = __webpack_require__3(5183);
                  ;
                  class ElementContainer extends react.Component {
                    _contentRefCb = (el) => {
                      if (el) this._content = el;
                    };
                    componentDidMount() {
                      this._content.appendChild(this.props.el);
                    }
                    componentDidUpdate(prevProps) {
                      if (prevProps.el !== this.props.el) {
                        while (this._content.lastElementChild) {
                          this._content.lastElementChild.remove();
                        }
                        this._content.appendChild(this.props.el);
                      }
                    }
                    shouldComponentUpdate(nextProps) {
                      return this.props.className !== nextProps.className || this.props.el !== nextProps.el;
                    }
                    render() {
                      return /* @__PURE__ */ react.createElement("div", {
                        className: this.props.className,
                        ref: this._contentRefCb
                      });
                    }
                  }
                  ;
                  const springConfig = {
                    stiffness: 400,
                    damping: 50
                  };
                  const MAX_SIDEBAR_SETTINGS = 200;
                  class AppSidebar extends react.Component {
                    _stopper = kefir_stopper_js_default()();
                    constructor(props) {
                      super(props);
                      this.state = {
                        expansionSettings: this._readExpansionSettings()
                      };
                    }
                    componentDidMount() {
                      kefir_esm["default"].fromEvents(window, "storage").filter((e) => e.key === "inboxsdk__sidebar_expansion_settings").takeUntilBy(this._stopper).onValue(() => {
                        this.setState({
                          expansionSettings: this._readExpansionSettings()
                        });
                      });
                    }
                    componentWillUnmount() {
                      this._stopper.destroy();
                    }
                    scrollPanelIntoView(instanceId) {
                      let useContainer = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
                      const panel = this._list.getItemInstance(instanceId);
                      const getContainer = this.props.container;
                      panel.scrollIntoView(useContainer, getContainer && getContainer());
                    }
                    closePanel(instanceId) {
                      const panelDescriptor = this.props.panels.find((desc) => desc.instanceId === instanceId);
                      if (panelDescriptor) {
                        this._expandedToggle(panelDescriptor.appId, panelDescriptor.id, false);
                      }
                    }
                    openPanel(instanceId) {
                      const panelDescriptor = this.props.panels.find((desc) => desc.instanceId === instanceId);
                      if (panelDescriptor) {
                        this._expandedToggle(panelDescriptor.appId, panelDescriptor.id, true);
                      }
                    }
                    shouldComponentUpdate(nextProps, nextState) {
                      return this.props.panels !== nextProps.panels || this.state.expansionSettings !== nextState.expansionSettings;
                    }
                    _expandedToggle(appId, id, expanded) {
                      const expansionSettings = this._readExpansionSettings();
                      if (!Object.prototype.hasOwnProperty.call(expansionSettings.apps, appId)) {
                        expansionSettings.apps[appId] = {
                          ids: {}
                        };
                      }
                      const appSettings = expansionSettings.apps[appId];
                      appSettings.ids[id] = {
                        lastUse: Date.now(),
                        expanded
                      };
                      this.setState({
                        expansionSettings
                      }, this.props.onExpandedToggle);
                      this._saveExpansionSettings(expansionSettings);
                    }
                    _readExpansionSettings() {
                      let data;
                      try {
                        data = JSON.parse(__webpack_require__3.g.localStorage.getItem("inboxsdk__sidebar_expansion_settings") || "null");
                      } catch (err) {
                        console.error("Failed to read sidebar settings", err);
                      }
                      if (data) return data;
                      return {
                        apps: {}
                      };
                    }
                    _saveExpansionSettings(data) {
                      const allSidebarIds = flatMap_default()(Object.keys(data.apps), (appId) => Object.keys(data.apps[appId].ids).map((id) => [appId, id]));
                      if (allSidebarIds.length > MAX_SIDEBAR_SETTINGS) {
                        const idsToRemove = sortBy_default()(allSidebarIds, (_ref) => {
                          let [appId, id] = _ref;
                          return data.apps[appId].ids[id].lastUse;
                        }).slice(0, allSidebarIds.length - MAX_SIDEBAR_SETTINGS);
                        idsToRemove.forEach((_ref2) => {
                          let [appId, id] = _ref2;
                          delete data.apps[appId].ids[id];
                          if (Object.keys(data.apps[appId].ids).length === 0) {
                            delete data.apps[appId];
                          }
                        });
                      }
                      try {
                        __webpack_require__3.g.localStorage.setItem("inboxsdk__sidebar_expansion_settings", JSON.stringify(data));
                      } catch (err) {
                        console.error("Failed to save sidebar settings", err);
                      }
                    }
                    render() {
                      const {
                        expansionSettings
                      } = this.state;
                      const {
                        panels,
                        onClose,
                        onOutsideClick,
                        onMoveEnd,
                        container
                      } = this.props;
                      const showControls = panels.length > 1;
                      const hideTitleBar = panels.length === 1 && panels[0].hideTitleBar;
                      const panelList = panels.map((panelDescriptor) => {
                        const appExpansionSettings = Object.prototype.hasOwnProperty.call(expansionSettings.apps, panelDescriptor.appId) ? expansionSettings.apps[panelDescriptor.appId] : null;
                        const panelExpansionSettings = appExpansionSettings ? appExpansionSettings.ids[panelDescriptor.id] : null;
                        const expanded = panelExpansionSettings ? panelExpansionSettings.expanded : true;
                        return {
                          panelDescriptor,
                          showControls,
                          expanded,
                          onExpandedToggle: (expanded2) => {
                            this._expandedToggle(panelDescriptor.appId, panelDescriptor.id, expanded2);
                          }
                        };
                      });
                      return /* @__PURE__ */ react.createElement("div", {
                        className: classnames_default()((0, idMap.A)("app_sidebar"), {
                          [(0, idMap.A)("hideTitleBar")]: hideTitleBar
                        })
                      }, /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_main"),
                        ref: (el) => {
                          if (el) this._main = el;
                        }
                      }, /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_content_area")
                      }, /* @__PURE__ */ react.createElement(react_draggable_list_js_default(), {
                        padding: 0,
                        ref: (el) => {
                          if (el) this._list = el;
                        },
                        itemKey: (x2) => x2.panelDescriptor.instanceId,
                        template: Panel,
                        list: panelList,
                        onMoveEnd: (newList, movedItem, oldIndex, newIndex) => {
                          onMoveEnd(newList.map((x2) => x2.panelDescriptor), movedItem.panelDescriptor, oldIndex, newIndex);
                        },
                        springConfig,
                        container: container || (() => this._main)
                      })), onOutsideClick && /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_content_area_padding"),
                        onClick: (event) => {
                          event.preventDefault();
                          onOutsideClick();
                        }
                      })), onClose && /* @__PURE__ */ react.createElement("button", {
                        className: "inboxsdk__close_button",
                        type: "button",
                        title: "Close",
                        onClick: onClose
                      }));
                    }
                  }
                  class Panel extends react.Component {
                    scrollIntoView(useContainer, container) {
                      if (useContainer && container) {
                        const offsetParent = this._el.parentElement;
                        if (offsetParent) {
                          container.scrollTo({
                            top: offsetParent.offsetTop,
                            behavior: "smooth"
                          });
                        }
                      } else {
                        this._el.scrollIntoView({
                          behavior: "smooth"
                        });
                      }
                    }
                    getDragHeight() {
                      return 40;
                    }
                    componentDidMount() {
                      const expanded = !this.props.item.showControls || this.props.item.expanded;
                      if (expanded) {
                        document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated", {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            instanceId: this.props.item.panelDescriptor.instanceId
                          }
                        }));
                      }
                    }
                    componentDidUpdate(prevProps) {
                      const prevExpanded = !prevProps.item.showControls || prevProps.item.expanded;
                      const expanded = !this.props.item.showControls || this.props.item.expanded;
                      if (!prevExpanded && expanded) {
                        document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated", {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            instanceId: this.props.item.panelDescriptor.instanceId
                          }
                        }));
                      } else if (prevExpanded && !expanded) {
                        document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated", {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            instanceId: this.props.item.panelDescriptor.instanceId
                          }
                        }));
                      }
                    }
                    shouldComponentUpdate(nextProps) {
                      return this.props.itemSelected !== nextProps.itemSelected || this.props.item.panelDescriptor !== nextProps.item.panelDescriptor || this.props.item.showControls !== nextProps.item.showControls || this.props.item.expanded !== nextProps.item.expanded;
                    }
                    render() {
                      const {
                        dragHandleProps,
                        itemSelected,
                        item: {
                          panelDescriptor: {
                            title,
                            appName,
                            iconClass,
                            iconUrl,
                            iconLiga,
                            el
                          },
                          showControls,
                          expanded,
                          onExpandedToggle
                        }
                      } = this.props;
                      const scale = itemSelected * 0.01 + 1;
                      const shadow = itemSelected * 4;
                      return /* @__PURE__ */ react.createElement("div", {
                        ref: (el2) => {
                          if (el2) this._el = el2;
                        },
                        className: classnames_default()((0, idMap.A)("app_sidebar_content_panel"), {
                          [(0, idMap.A)("dragged")]: itemSelected > 0.2,
                          [(0, idMap.A)("expanded")]: expanded,
                          [(0, idMap.A)("showControls")]: showControls
                        }),
                        style: {
                          transform: scale === 1 ? "none" : `scale(${scale})`,
                          boxShadow: shadow === 0 ? "none" : `0px 0px ${shadow}px 0px rgba(0, 0, 0, 0.3)`
                        }
                      }, /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_content_panel_top_line"),
                        "data-app-name": appName
                      }, /* @__PURE__ */ react.createElement("span", _extends({
                        className: (0, idMap.A)("app_sidebar_content_panel_title")
                      }, showControls ? dragHandleProps : null), /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_content_panel_grip")
                      }), /* @__PURE__ */ react.createElement("span", {
                        className: (0, idMap.A)("app_sidebar_content_panel_title_icon_container")
                      }, /* @__PURE__ */ react.createElement("span", {
                        className: classnames_default()((0, idMap.A)("app_sidebar_content_panel_title_icon"), iconClass)
                      }, !!iconLiga && iconLiga, iconUrl && /* @__PURE__ */ react.createElement("img", {
                        src: iconUrl
                      }))), /* @__PURE__ */ react.createElement("span", {
                        className: (0, idMap.A)("app_sidebar_content_panel_title_text")
                      }, title)), /* @__PURE__ */ react.createElement("span", {
                        className: (0, idMap.A)("app_sidebar_content_panel_toggle"),
                        onClick: () => onExpandedToggle(!expanded)
                      }, /* @__PURE__ */ react.createElement("button", {
                        type: "button",
                        className: (0, idMap.A)("app_sidebar_content_panel_toggle_button")
                      }))), /* @__PURE__ */ react.createElement(react_smooth_collapse_js.A, {
                        expanded: !showControls || expanded,
                        heightTransition: ".15s ease"
                      }, /* @__PURE__ */ react.createElement(ElementContainer, {
                        className: (0, idMap.A)("app_sidebar_content_panel_content"),
                        el
                      })));
                    }
                  }
                  var gmail_element_getter = __webpack_require__3(4003);
                  ;
                  function incrementName(name) {
                    const m = / (\d+)$/.exec(name);
                    if (m) {
                      return name.slice(0, name.length - m[0].length) + " " + (Number(m[1]) + 1);
                    }
                    return name + " 2";
                  }
                  var querySelectorOrFail = __webpack_require__3(9860);
                  var make_mutation_observer_chunked_stream = __webpack_require__3(3197);
                  var simulate_mouse_event = __webpack_require__3(4603);
                  var fake_window_resize = __webpack_require__3(652);
                  var add_companion_thread_icon_area = __webpack_require__3(1763);
                  var add_companion_global_icon_area = __webpack_require__3(6416);
                  var add_to_icon_area = __webpack_require__3(3451);
                  ;
                  const cssGlobal = "inboxsdk__app_sidebar_waiting_platform";
                  const sidebarWaitingPlatformSelector = [
                    cssGlobal,
                    "inboxsdk__a0oshmeH6N_2vLtc3DNT",
                    "inboxsdk__BV_FA4qVT4qYxs3LbEU4",
                    // Pre CSS module selector <1.1.0
                    (0, idMap.r)("app_sidebar_waiting_platform")
                  ].map((x2) => "." + x2).join(", ");
                  const sidebarWaitingPlatformClassName = classnames_default()(cssGlobal, "inboxsdk__a0oshmeH6N_2vLtc3DNT", "inboxsdk__BV_FA4qVT4qYxs3LbEU4", (0, idMap.r)("app_sidebar_waiting_platform"));
                  var lodash_escape = __webpack_require__3(3131);
                  var escape_default = /* @__PURE__ */ __webpack_require__3.n(lodash_escape);
                  var injectStylesIntoStyleTag = __webpack_require__3(6186);
                  var injectStylesIntoStyleTag_default = /* @__PURE__ */ __webpack_require__3.n(injectStylesIntoStyleTag);
                  var styleDomAPI = __webpack_require__3(2155);
                  var styleDomAPI_default = /* @__PURE__ */ __webpack_require__3.n(styleDomAPI);
                  var setAttributesWithoutAttributes = __webpack_require__3(8626);
                  var setAttributesWithoutAttributes_default = /* @__PURE__ */ __webpack_require__3.n(setAttributesWithoutAttributes);
                  var insertStyleElement = __webpack_require__3(8990);
                  var insertStyleElement_default = /* @__PURE__ */ __webpack_require__3.n(insertStyleElement);
                  var styleTagTransform = __webpack_require__3(9827);
                  var styleTagTransform_default = /* @__PURE__ */ __webpack_require__3.n(styleTagTransform);
                  var index_module = __webpack_require__3(8855);
                  ;
                  var options = {};
                  options.styleTagTransform = styleTagTransform_default();
                  options.setAttributes = setAttributesWithoutAttributes_default();
                  options.insert = (htmlElement) => {
                    htmlElement.setAttribute(
                      "data-inboxsdk-version",
                      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- this is injected by webpack
                      ///@ts-ignore
                      "2.2.7-1753737313283-f941d482eba8eb97"
                    );
                    document.head.append(htmlElement);
                  };
                  options.domAPI = styleDomAPI_default();
                  options.insertStyleElement = insertStyleElement_default();
                  var update = injectStylesIntoStyleTag_default()(index_module.A, options);
                  const primary_index_module = index_module.A && index_module.A.locals ? index_module.A.locals : void 0;
                  ;
                  const ACTIVE_ADD_ON_ICON_SELECTOR = ".aT5-aOt-I-KO";
                  const COMPANION_SIDEBAR_CONTENT_CLOSED_SHADOW_CLASS = "brC-brG-btc";
                  class GmailAppSidebarPrimary {
                    #stopper = kefir_stopper_js_default()();
                    /**
                     * There could be multiple InboxSDK instances (and therefore GmailDrivers)
                     * talking to this Primary, so we shouldn't privilege the specific GmailDriver
                     * that happened to create the Primary. Only use this GmailDriver for
                     * logging-related functionality!
                     */
                    #driver;
                    /**
                     * This Primary has an identifier used by the DOM events to specify they're
                     * talking to this Primary. This leaves us some room for having multiple
                     * Primary instances (representing different visual locations in Gmail) or
                     * multiple classes that make use of the same DOM events, but we don't make
                     * use of that now. Mainly I didn't want to risk baking in the singleton
                     * nature too deeply; that always seems to bite me.
                     */
                    #instanceId = `${Date.now()}-${Math.random()}`;
                    #companionSidebarContentContainerEl;
                    #instanceIdsToDescriptors = /* @__PURE__ */ new Map();
                    #threadSidebarComponent = null;
                    #threadIconArea = null;
                    #globalIconArea = null;
                    #globalButtonContainers = /* @__PURE__ */ new Map();
                    #threadButtonContainers = /* @__PURE__ */ new Map();
                    #contentContainers = /* @__PURE__ */ new Map();
                    #threadSidebarContainerEl = null;
                    #companionSidebarOuterWrapper;
                    #currentIds = /* @__PURE__ */ new Set();
                    #orderManager = new (order_manager_js_default())({
                      get() {
                        try {
                          return JSON.parse(__webpack_require__3.g.localStorage.getItem("inboxsdk__sidebar_ordering") || "null");
                        } catch (err) {
                          console.error("failed to read sidebar order data", err);
                        }
                      },
                      set(data) {
                        try {
                          __webpack_require__3.g.localStorage.setItem("inboxsdk__sidebar_ordering", JSON.stringify(data));
                        } catch (err) {
                          console.error("failed to set sidebar order data", err);
                        }
                      }
                    });
                    #containerProp;
                    #updateHighlightedAppThreadIconBus = kefir_bus_default()();
                    constructor(driver, companionSidebarContentContainerElement) {
                      this.#driver = driver;
                      this.#companionSidebarContentContainerEl = companionSidebarContentContainerElement;
                      this.#setupElement();
                    }
                    getInstanceId() {
                      return this.#instanceId;
                    }
                    /**
                     * Only use this if a different Primary needs to take over this one's elements.
                     * Currently this is only done when hot-reloading in dev. Don't use this when
                     * a threadview exits, the sdk.destroy() is called, etc.
                     */
                    destroy() {
                      this.#stopper.destroy();
                    }
                    /**
                     * This value controls whether the app sidebar should automatically open
                     * itself when available when the chat sidebar isn't present. It's only set
                     * if the user interacts with the app sidebar button.
                     */
                    #getShouldGlobalAppSidebarOpen() {
                      return __webpack_require__3.g.localStorage.getItem("inboxsdk__global_app_sidebar_should_open") === "true";
                    }
                    #setShouldGlobalAppSidebarOpen(open) {
                      try {
                        __webpack_require__3.g.localStorage.setItem("inboxsdk__global_app_sidebar_should_open", String(open));
                      } catch (err) {
                        console.error("error saving", err);
                      }
                    }
                    #getShouldThreadAppSidebarOpen() {
                      return __webpack_require__3.g.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open") !== "false";
                    }
                    #setShouldThreadAppSidebarOpen(open) {
                      try {
                        __webpack_require__3.g.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open", String(open));
                      } catch (err) {
                        console.error("error saving", err);
                      }
                    }
                    #createThreadSidebarIfNeeded() {
                      if (this.#threadSidebarContainerEl) return this.#threadSidebarContainerEl;
                      const threadSidebarContainerEl = this.#threadSidebarContainerEl = document.createElement("div");
                      threadSidebarContainerEl.classList.add("thread_app_sidebar", (0, idMap.A)("app_sidebar_container"), "addon_sidebar");
                      this.#companionSidebarContentContainerEl.insertBefore(threadSidebarContainerEl, this.#companionSidebarContentContainerEl.firstElementChild);
                      this.#containerProp = () => threadSidebarContainerEl;
                      this.#updateHighlightedAppThreadIconBus.bufferWithTimeOrCount(150, 100).filter((events) => events.length > 0).takeUntilBy(this.#stopper).onValue(() => {
                        const containerBoundingBox = threadSidebarContainerEl.getBoundingClientRect();
                        const titleBars = Array.from(threadSidebarContainerEl.querySelectorAll(`.${(0, idMap.A)("app_sidebar_content_panel")}.${(0, idMap.A)("expanded")} .${(0, idMap.A)("app_sidebar_content_panel_top_line")}`));
                        const absoluteScrollOfViewportTop = threadSidebarContainerEl.scrollTop;
                        const absoluteScrollOfViewportMidpoint = absoluteScrollOfViewportTop + containerBoundingBox.height / 2;
                        let titleBar = titleBars.find((t2) => {
                          const tBoundingBox = t2.getBoundingClientRect();
                          const relativeScrollOfTitleBottom = tBoundingBox.bottom;
                          const absoluteScrollOfTitleBottom = relativeScrollOfTitleBottom + absoluteScrollOfViewportTop;
                          return absoluteScrollOfTitleBottom > absoluteScrollOfViewportTop && absoluteScrollOfTitleBottom < absoluteScrollOfViewportMidpoint;
                        });
                        if (!titleBar) {
                          let lastElementAboveViewPort;
                          for (let i2 = 0; i2 < titleBars.length; i2++) {
                            const tElement = titleBars[i2];
                            const tBoundingBox = tElement.getBoundingClientRect();
                            const relativeScrollOfTitleBottom = tBoundingBox.bottom;
                            if (relativeScrollOfTitleBottom < 0) {
                              lastElementAboveViewPort = tElement;
                            } else if (relativeScrollOfTitleBottom > 0) {
                              break;
                            }
                          }
                          titleBar = lastElementAboveViewPort;
                        }
                        if (titleBar) {
                          const instanceId = titleBar.getAttribute("data-instance-id");
                          const appName = titleBar.getAttribute("data-app-name");
                          if (!appName) return;
                          const appButton = this.#threadButtonContainers.get(appName);
                          if (!appButton || !this.#threadIconArea) return;
                          const activeButtonContainer = this.#threadIconArea.querySelector(".sidebar_button_container_active");
                          if (activeButtonContainer) {
                            activeButtonContainer.classList.remove("sidebar_button_container_active");
                          }
                          appButton.classList.add("sidebar_button_container_active");
                        }
                      });
                      this.#updateHighlightedAppThreadIconBus.plug(kefir_esm.fromEvents(threadSidebarContainerEl, "scroll").map(() => null));
                      this.#renderThreadSidebar();
                      return threadSidebarContainerEl;
                    }
                    #renderThreadSidebarIfPresent() {
                      if (!this.#threadSidebarContainerEl) {
                        return;
                      }
                      this.#renderThreadSidebar();
                    }
                    #appSidebarRefSetter = (threadSidebarComponent) => {
                      if (threadSidebarComponent) {
                        this.#threadSidebarComponent = threadSidebarComponent;
                      }
                    };
                    #renderThreadSidebar() {
                      const threadSidebarContainerEl = this.#threadSidebarContainerEl;
                      if (!threadSidebarContainerEl) {
                        throw new Error("_renderThreadSidebar should not be called when _threadSidebarContainerEl is unset");
                      }
                      return new Promise((resolve) => {
                        react_dom.render(/* @__PURE__ */ react.createElement(AppSidebar, {
                          ref: this.#appSidebarRefSetter,
                          panels: this.#orderManager.getOrderedItems().map((x2) => x2.value),
                          onMoveEnd: (newList, movedItem, oldIndex, newIndex) => {
                            this.#orderManager.moveItem(oldIndex, newIndex);
                            this.#renderThreadSidebar();
                          },
                          onExpandedToggle: () => {
                            this.#updateHighlightedAppThreadIconBus.emit(null);
                          },
                          container: this.#containerProp
                        }), threadSidebarContainerEl, () => {
                          if (!this.#threadSidebarComponent) {
                            throw new Error("Should not happen");
                          }
                          resolve(this.#threadSidebarComponent);
                          this.#updateHighlightedAppThreadIconBus.emit(null);
                        });
                      });
                    }
                    #getActiveButtonContainer() {
                      let activeButtonContainer;
                      if (this.#globalIconArea) {
                        activeButtonContainer = this.#globalIconArea.querySelector(".sidebar_button_container_active");
                      }
                      if (!activeButtonContainer && this.#threadIconArea) {
                        activeButtonContainer = this.#threadIconArea.querySelector(".sidebar_button_container_active");
                      }
                      return activeButtonContainer;
                    }
                    #closeButton = null;
                    #addButton(iconArea, event, isGlobal) {
                      var _this = this;
                      browser_asap_default()(() => {
                        if (!iconArea) throw new Error("should not happen");
                        const instanceId = event.detail.instanceId;
                        const iconUrl = isGlobal && event.detail.iconUrl ? event.detail.iconUrl : event.detail.appIconUrl;
                        const appName = event.detail.appName;
                        const {
                          iconClass = "",
                          iconLiga
                        } = event.detail;
                        const existingButtonContainer = isGlobal ? this.#globalButtonContainers.get(appName) : this.#threadButtonContainers.get(appName);
                        let buttonContainer;
                        if (existingButtonContainer) {
                          const currentCount = Number(existingButtonContainer.getAttribute("data-count")) || 1;
                          existingButtonContainer.setAttribute("data-count", String(currentCount + 1));
                          buttonContainer = existingButtonContainer;
                        } else {
                          buttonContainer = document.createElement("div");
                          buttonContainer.className = (0, idMap.A)("sidebar_button_container");
                          buttonContainer.setAttribute("data-app-name", appName);
                          buttonContainer.innerHTML = `
          <button class="inboxsdk__button_icon ${escape_default()(iconClass)}" type="button" data-tooltip="${escape_default()(appName)}">
            ${iconLiga ? `<span class="${escape_default()(index_module.N)}">${escape_default()(iconLiga).trim()}</div>` : `<img class="inboxsdk__button_iconImg" src="${escape_default()(iconUrl)}">`}
          </button>
          <div class="inboxsdk__button_selectedIndicator"></div>
        `;
                          if (event.detail.primaryColor) {
                            (0, querySelectorOrFail.A)(buttonContainer, ".inboxsdk__button_selectedIndicator").style.backgroundColor = event.detail.primaryColor;
                          }
                          if (isGlobal) {
                            this.#globalButtonContainers.set(appName, buttonContainer);
                          } else {
                            this.#threadButtonContainers.set(appName, buttonContainer);
                          }
                          const activate = function() {
                            let dontScrollIntoView = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
                            const activeButtonContainer = _this.#getActiveButtonContainer();
                            if (activeButtonContainer === buttonContainer) {
                              if (!_this.#closeButton) throw new Error();
                              _this.#closeButton(true);
                            } else {
                              if (_this.#closeButton) {
                                _this.#closeButton(true);
                              }
                              if (isGlobal) _this.#setShouldGlobalAppSidebarOpen(true);
                              else _this.#setShouldThreadAppSidebarOpen(true);
                              _this.#openSidebarAndActivateButton(buttonContainer, isGlobal);
                              if (isGlobal) {
                                const contentEl = _this.#contentContainers.get(appName);
                                if (contentEl) contentEl.style.display = "";
                                _this.#companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible");
                                document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated", {
                                  bubbles: true,
                                  cancelable: false,
                                  detail: {
                                    instanceId
                                  }
                                }));
                              } else {
                                const threadSidebarComponent = _this.#threadSidebarComponent;
                                if (!threadSidebarComponent) {
                                  throw new Error("sidebar not mounted");
                                }
                                if (!dontScrollIntoView) {
                                  threadSidebarComponent.openPanel(instanceId);
                                  threadSidebarComponent.scrollPanelIntoView(instanceId, true);
                                }
                              }
                              _this.#closeButton = (userClick) => {
                                _this.#closeButton = null;
                                const activeButtonContainer2 = _this.#getActiveButtonContainer();
                                if (!activeButtonContainer2) {
                                  throw new Error("Expected activeButtonContainer");
                                }
                                _this.#closeSidebarAndDeactivateButton(activeButtonContainer2);
                                if (isGlobal) {
                                  if (userClick) _this.#setShouldGlobalAppSidebarOpen(false);
                                  const contentEl = _this.#contentContainers.get(appName);
                                  if (contentEl) {
                                    contentEl.style.display = "none";
                                  } else {
                                    _this.#driver.getLogger().error(new Error("Unexpected: contentEl not set"));
                                  }
                                  document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated", {
                                    bubbles: true,
                                    cancelable: false,
                                    detail: {
                                      instanceId
                                    }
                                  }));
                                } else {
                                  if (userClick) _this.#setShouldThreadAppSidebarOpen(false);
                                }
                                (0, fake_window_resize.A)();
                              };
                              (0, fake_window_resize.A)();
                            }
                          };
                          (0, querySelectorOrFail.A)(buttonContainer, "button").addEventListener("click", (event2) => {
                            event2.stopPropagation();
                            activate();
                          }, true);
                          if (iconArea) {
                            (0, add_to_icon_area.A)(this.#orderManager, appName, buttonContainer, iconArea);
                          }
                          {
                            const activeButtonContainer = this.#getActiveButtonContainer();
                            if (isGlobal) {
                              if (this.#getShouldGlobalAppSidebarOpen()) {
                                const activeButtonContainerPresentAndIsForGlobal = this.#globalIconArea && activeButtonContainer && this.#globalIconArea.contains(activeButtonContainer);
                                if (!activeButtonContainerPresentAndIsForGlobal) {
                                  activate(true);
                                }
                              }
                            } else {
                              if (this.#getShouldThreadAppSidebarOpen()) {
                                const activeButtonContainerPresentAndIsForThread = this.#threadIconArea && activeButtonContainer && this.#threadIconArea.contains(activeButtonContainer);
                                if (!activeButtonContainerPresentAndIsForThread) {
                                  activate(true);
                                }
                              }
                            }
                          }
                        }
                      });
                    }
                    #removeButton(event, buttonContainers, iconArea) {
                      const appName = event.detail.appName;
                      const container = buttonContainers.get(appName);
                      if (!iconArea || !container) {
                        throw new Error("should not happen: tried to remove button without container or iconArea");
                      }
                      const currentCount = Number(container.getAttribute("data-count"));
                      if (currentCount <= 1) {
                        const activeButtonContainer = iconArea.querySelector(".sidebar_button_container_active");
                        if (container === activeButtonContainer) {
                          if (!this.#closeButton) throw new Error();
                          this.#closeButton(false);
                          this.#companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible");
                          this.#companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible");
                          const contentContainer = this.#companionSidebarOuterWrapper.previousElementSibling;
                          if (contentContainer) contentContainer.classList.remove("companion_container_app_sidebar_visible");
                        }
                        container.remove();
                        buttonContainers.delete(appName);
                      } else if (currentCount === 2) {
                        container.removeAttribute("data-count");
                      } else {
                        container.setAttribute("data-count", String(currentCount - 1));
                      }
                    }
                    #closeSidebarAndDeactivateButton(activeButtonContainer) {
                      activeButtonContainer.classList.remove("sidebar_button_container_active");
                      this.#companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible");
                      this.#companionSidebarContentContainerEl.classList.add(COMPANION_SIDEBAR_CONTENT_CLOSED_SHADOW_CLASS);
                      this.#companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible", "companion_global_app_sidebar_visible");
                      const contentContainer = this.#companionSidebarOuterWrapper.previousElementSibling;
                      if (contentContainer) contentContainer.classList.remove("companion_container_app_sidebar_visible");
                    }
                    #openSidebarAndActivateButton(buttonContainer, isGlobal) {
                      const companionSidebarIconContainerEl = gmail_element_getter.A.getCompanionSidebarIconContainerElement();
                      if (!companionSidebarIconContainerEl) throw new Error("Could not find companion sidebar icon container element");
                      const activeButtonContainer = this.#getActiveButtonContainer();
                      if (activeButtonContainer) {
                        throw new Error("activeButtonContainer should not be true");
                      }
                      {
                        const nativeActiveAddOnIcon = companionSidebarIconContainerEl.querySelector(ACTIVE_ADD_ON_ICON_SELECTOR);
                        if (nativeActiveAddOnIcon) {
                          (0, simulate_mouse_event.jp)(nativeActiveAddOnIcon);
                        }
                      }
                      buttonContainer.classList.add("sidebar_button_container_active");
                      this.#companionSidebarOuterWrapper.classList.add("companion_app_sidebar_wrapper_visible");
                      this.#companionSidebarContentContainerEl.classList.add("companion_app_sidebar_visible");
                      this.#companionSidebarContentContainerEl.classList.remove(COMPANION_SIDEBAR_CONTENT_CLOSED_SHADOW_CLASS);
                      const contentContainer = this.#companionSidebarOuterWrapper.previousElementSibling;
                      if (contentContainer) contentContainer.classList.add("companion_container_app_sidebar_visible");
                      if (isGlobal) this.#companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible");
                    }
                    #setupElement() {
                      const companionSidebarIconContainerEl = gmail_element_getter.A.getCompanionSidebarIconContainerElement();
                      if (!companionSidebarIconContainerEl) throw new Error("Could not find companion sidebar icon container element");
                      this.#companionSidebarContentContainerEl.setAttribute("data-sdk-sidebar-instance-id", this.#instanceId);
                      this.#companionSidebarOuterWrapper = this.#companionSidebarContentContainerEl.classList.contains("bq9") ? this.#companionSidebarContentContainerEl : this.#companionSidebarContentContainerEl.parentElement;
                      if (!this.#companionSidebarOuterWrapper) {
                        throw new Error("should not happen: failed to find companionSidebarOuterWrapper");
                      }
                      if (this.#companionSidebarOuterWrapper.classList.contains("WN9Ejb")) {
                        document.body.classList.add("inboxsdk__sidebar_icons_right");
                        this.#driver.getLogger().eventSite("sidebar_icons_right");
                      }
                      const contentContainer = this.#companionSidebarOuterWrapper.previousElementSibling;
                      if (contentContainer) {
                        contentContainer.classList.add((0, idMap.A)("companion_container_app_sidebar_in_use"));
                      }
                      this.#companionSidebarContentContainerEl.classList.add((0, idMap.A)("app_sidebar_in_use"));
                      if (!document.body.querySelector(sidebarWaitingPlatformSelector)) {
                        const waitingPlatform = document.createElement("div");
                        waitingPlatform.className = classnames_default()(sidebarWaitingPlatformClassName, (0, idMap.A)("app_sidebar_waiting_platform"));
                        document.body.appendChild(waitingPlatform);
                      }
                      {
                        kefir_esm.fromEvents(window, "storage").filter((e) => e.key === "inboxsdk__sidebar_ordering").takeUntilBy(this.#stopper).onValue(() => {
                          this.#orderManager.reload();
                          this.#renderThreadSidebarIfPresent();
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkNewSidebarPanel").filter((e) => e.detail.sidebarId === this.#instanceId && !e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          this.#createThreadSidebarIfNeeded();
                          let id = event.detail.id;
                          while (this.#currentIds.has(id)) {
                            id = incrementName(id);
                          }
                          this.#currentIds.add(id);
                          const appName = event.detail.appName;
                          this.#orderManager.addItem({
                            groupId: event.detail.appId,
                            id,
                            orderHint: event.detail.orderHint,
                            value: {
                              id,
                              appName,
                              appId: event.detail.appId,
                              instanceId: event.detail.instanceId,
                              title: event.detail.title,
                              iconClass: event.detail.iconClass,
                              iconLiga: event.detail.iconLiga,
                              iconUrl: event.detail.iconUrl,
                              hideTitleBar: event.detail.hideTitleBar,
                              el: event.target
                            }
                          });
                          this.#renderThreadSidebar();
                          let threadIconArea = this.#threadIconArea = companionSidebarIconContainerEl.querySelector(".sidebar_thread_iconArea");
                          if (!threadIconArea) {
                            threadIconArea = this.#threadIconArea = document.createElement("div");
                            threadIconArea.className = (0, idMap.A)("sidebar_iconArea");
                            threadIconArea.classList.add("sidebar_thread_iconArea");
                            (0, add_companion_thread_icon_area.A)(this.#driver.getLogger(), threadIconArea, companionSidebarIconContainerEl);
                          }
                          this.#addButton(threadIconArea, event, false);
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkUpdateSidebarPanel").filter((e) => e.detail.sidebarId === this.#instanceId && !e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          const orderedItems = this.#orderManager.getOrderedItems();
                          const index = findIndex_default()(orderedItems, (x2) => x2.value.instanceId === event.detail.instanceId);
                          if (index === -1) throw new Error("should not happen: failed to find orderItem");
                          this.#orderManager.updateItemValueByIndex(index, {
                            id: orderedItems[index].value.id,
                            appId: event.detail.appId,
                            appName: event.detail.appName || event.detail.title,
                            instanceId: event.detail.instanceId,
                            title: event.detail.title,
                            iconClass: event.detail.iconClass,
                            iconLiga: event.detail.iconLiga,
                            iconUrl: event.detail.iconUrl,
                            hideTitleBar: event.detail.hideTitleBar,
                            el: event.target
                          });
                          this.#renderThreadSidebar();
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkRemoveSidebarPanel").filter((e) => e.detail.sidebarId === this.#instanceId && !e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          const orderedItems = this.#orderManager.getOrderedItems();
                          const index = findIndex_default()(orderedItems, (x2) => x2.value.instanceId === event.detail.instanceId);
                          if (index === -1) throw new Error("should not happen: failed to find orderItem");
                          this.#currentIds.delete(orderedItems[index].id);
                          this.#orderManager.removeItemByIndex(index);
                          this.#renderThreadSidebar();
                          this.#removeButton(event, this.#threadButtonContainers, this.#threadIconArea);
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelScrollIntoView").filter((e) => e.detail.sidebarId === this.#instanceId && !e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          if (this.#threadSidebarComponent) this.#threadSidebarComponent.scrollPanelIntoView(event.detail.instanceId);
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelClose").filter((e) => e.detail.sidebarId === this.#instanceId && !e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          if (this.#threadSidebarComponent) this.#threadSidebarComponent.closePanel(event.detail.instanceId);
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelOpen").filter((e) => e.detail.sidebarId === this.#instanceId && !e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((e) => {
                          this.#renderThreadSidebar().then((threadSidebarComponent) => {
                            const descriptor = this.#instanceIdsToDescriptors.get(e.detail.instanceId);
                            if (!descriptor) return;
                            const buttonContainer = this.#threadButtonContainers.get(descriptor.appName);
                            if (!buttonContainer) {
                              throw new Error("missing button container");
                            }
                            const activeButtonContainer = this.#getActiveButtonContainer();
                            if (activeButtonContainer !== buttonContainer) {
                              (0, querySelectorOrFail.A)(buttonContainer, "button").click();
                            }
                          });
                        });
                      }
                      {
                        kefir_esm.fromEvents(document.body, "inboxsdkNewSidebarPanel").filter((e) => e.detail.sidebarId === this.#instanceId && e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          let id = event.detail.id;
                          while (this.#currentIds.has(id)) {
                            id = incrementName(id);
                          }
                          this.#currentIds.add(id);
                          const appName = event.detail.appName;
                          let globalIconArea = this.#globalIconArea = companionSidebarIconContainerEl.querySelector(".sidebar_global_iconArea");
                          if (!globalIconArea) {
                            globalIconArea = this.#globalIconArea = document.createElement("div");
                            globalIconArea.className = (0, idMap.A)("sidebar_iconArea");
                            globalIconArea.classList.add("sidebar_global_iconArea");
                            (0, add_companion_global_icon_area.A)(this.#driver.getLogger(), globalIconArea, companionSidebarIconContainerEl);
                          }
                          const sdkContentContainerEl = document.createElement("div");
                          sdkContentContainerEl.classList.add("addon_sidebar", (0, idMap.A)("app_sidebar_container"), "global_app_sidebar");
                          this.#companionSidebarContentContainerEl.insertAdjacentElement("afterbegin", sdkContentContainerEl);
                          this.#contentContainers.set(appName, sdkContentContainerEl);
                          sdkContentContainerEl.appendChild(event.target);
                          sdkContentContainerEl.style.display = "none";
                          this.#addButton(globalIconArea, event, true);
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkUpdateSidebarPanel").filter((e) => e.detail.sidebarId === this.#instanceId && e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          const buttonContainer = this.#globalButtonContainers.get(event.detail.appName);
                          if (!buttonContainer) return;
                          const {
                            iconClass = "",
                            iconLiga,
                            iconUrl = event.detail.appIconUrl
                          } = event.detail;
                          if (!iconLiga) {
                            const imgElement = (0, querySelectorOrFail.A)(buttonContainer, "img");
                            imgElement.setAttribute("src", iconUrl);
                          }
                          const button = (0, querySelectorOrFail.A)(buttonContainer, "button");
                          button.setAttribute("class", `inboxsdk__button_icon ${iconClass}`);
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkRemoveSidebarPanel").filter((e) => e.detail.sidebarId === this.#instanceId && e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          this.#currentIds.delete(event.detail.id);
                          this.#removeButton(event, this.#globalButtonContainers, this.#globalIconArea);
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelClose").filter((e) => e.detail.sidebarId === this.#instanceId && e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          const descriptor = this.#instanceIdsToDescriptors.get(event.detail.instanceId);
                          if (!descriptor) return;
                          const buttonContainer = this.#globalButtonContainers.get(descriptor.appName);
                          if (!buttonContainer) return;
                          const activeButtonContainer = this.#getActiveButtonContainer();
                          if (activeButtonContainer === buttonContainer) {
                            if (!this.#closeButton) {
                              throw new Error("Expected this._closeButton");
                            }
                            this.#closeButton(true);
                          }
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelOpen").filter((e) => e.detail.sidebarId === this.#instanceId && e.detail.isGlobal).takeUntilBy(this.#stopper).onValue((event) => {
                          const descriptor = this.#instanceIdsToDescriptors.get(event.detail.instanceId);
                          if (!descriptor) return;
                          const buttonContainer = this.#globalButtonContainers.get(descriptor.appName);
                          if (!buttonContainer) return;
                          const activeButtonContainer = this.#getActiveButtonContainer();
                          if (activeButtonContainer !== buttonContainer) {
                            (0, querySelectorOrFail.A)(buttonContainer, "button").click();
                          }
                        });
                      }
                      {
                        kefir_esm.fromEvents(document.body, "inboxsdkNewSidebarPanel").filter((e) => e.detail.sidebarId === this.#instanceId).takeUntilBy(this.#stopper).onValue((event) => {
                          this.#instanceIdsToDescriptors.set(event.detail.instanceId, event.detail);
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkRemoveSidebarPanel").filter((e) => e.detail.sidebarId === this.#instanceId).takeUntilBy(this.#stopper).onValue((event) => {
                          this.#instanceIdsToDescriptors.delete(event.detail.instanceId);
                        });
                        kefir_esm.fromEvents(document.body, "inboxsdkUpdateSidebarPanel").filter((e) => e.detail.sidebarId === this.#instanceId).takeUntilBy(this.#stopper).onValue((event) => {
                          this.#instanceIdsToDescriptors.set(event.detail.instanceId, event.detail);
                        });
                      }
                      const globalAddOnContentContainer = this.#companionSidebarContentContainerEl.children[0];
                      const threadAddOnContentContainer = this.#companionSidebarContentContainerEl.children[1];
                      kefir_esm.merge([globalAddOnContentContainer, threadAddOnContentContainer].map((addonContentEl) => (0, make_mutation_observer_chunked_stream.A)(addonContentEl, {
                        attributes: true,
                        attributeFilter: ["style"]
                      }))).filter(() => globalAddOnContentContainer.style.display !== threadAddOnContentContainer.style.display).takeUntilBy(this.#stopper).onValue(() => {
                        const activeButtonContainer = this.#getActiveButtonContainer();
                        if (activeButtonContainer) {
                          (0, querySelectorOrFail.A)(activeButtonContainer, "button").click();
                        }
                      });
                    }
                  }
                  const gmail_app_sidebar_view_primary = GmailAppSidebarPrimary;
                  var delay_asap = __webpack_require__3(1136);
                  ;
                  class ContentPanelViewDriver {
                    #driver;
                    #stopper;
                    #eventStream = kefir_bus_default()();
                    #isActive = false;
                    /**
                     * This is not the `id` property passed by the application, but a random
                     * unique identifier used to manage a specific instance.
                     * */
                    #instanceId = `${Date.now()}-${Math.random()}`;
                    #sidebarId;
                    #isGlobal;
                    constructor(driver, descriptor, sidebarId, isGlobal) {
                      this.#driver = driver;
                      this.#sidebarId = sidebarId;
                      this.#isGlobal = Boolean(isGlobal);
                      this.#stopper = this.#eventStream.ignoreValues().beforeEnd(() => null).toProperty();
                      this.#eventStream.plug(kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelActivated").filter((e) => e.detail.instanceId === this.#instanceId).map(() => {
                        this.#isActive = true;
                        return {
                          eventName: "activate"
                        };
                      }));
                      this.#eventStream.plug(kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelDeactivated").filter((e) => e.detail.instanceId === this.#instanceId).map(() => {
                        this.#isActive = false;
                        return {
                          eventName: "deactivate"
                        };
                      }));
                      const afterAsap = (0, delay_asap.A)().toProperty().onValue(() => {
                      });
                      let hasPlacedAlready = false;
                      let appName;
                      const waitingPlatform = (0, querySelectorOrFail.A)(document.body, sidebarWaitingPlatformSelector);
                      descriptor.flatMap((x2) => afterAsap.map(() => x2)).takeUntilBy(this.#stopper).onValue((descriptor2) => {
                        const {
                          el,
                          iconUrl,
                          iconLiga,
                          iconClass,
                          title,
                          orderHint,
                          id,
                          hideTitleBar,
                          appIconUrl,
                          primaryColor,
                          secondaryColor
                        } = descriptor2;
                        appName = descriptor2.appName || driver.getOpts().appName || descriptor2.title;
                        if (!document.body.contains(el)) {
                          waitingPlatform.appendChild(el);
                        }
                        const eventName = hasPlacedAlready ? "inboxsdkUpdateSidebarPanel" : "inboxsdkNewSidebarPanel";
                        hasPlacedAlready = true;
                        el.dispatchEvent(new CustomEvent(eventName, {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            appIconUrl: appIconUrl || this.#driver.getOpts().appIconUrl || iconUrl,
                            appId: this.#driver.getAppId(),
                            appName,
                            hideTitleBar: Boolean(hideTitleBar),
                            iconClass,
                            iconLiga,
                            iconUrl,
                            id: String(id || title),
                            instanceId: this.#instanceId,
                            isGlobal,
                            orderHint: typeof orderHint === "number" ? orderHint : 0,
                            primaryColor: primaryColor || this.#driver.getOpts().primaryColor,
                            secondaryColor: secondaryColor || this.#driver.getOpts().secondaryColor,
                            sidebarId: this.#sidebarId,
                            title
                          }
                        }));
                      });
                      this.#stopper.onValue(() => {
                        if (!hasPlacedAlready) return;
                        document.body.dispatchEvent(new CustomEvent("inboxsdkRemoveSidebarPanel", {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            appName,
                            sidebarId: this.#sidebarId,
                            instanceId: this.#instanceId,
                            isGlobal
                          }
                        }));
                      });
                    }
                    getStopper() {
                      return this.#stopper;
                    }
                    getEventStream() {
                      return this.#eventStream;
                    }
                    // TODO: is this used?
                    scrollIntoView() {
                      document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelScrollIntoView", {
                        bubbles: true,
                        cancelable: false,
                        detail: {
                          instanceId: this.#instanceId,
                          sidebarId: this.#sidebarId
                        }
                      }));
                    }
                    close() {
                      document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelClose", {
                        bubbles: true,
                        cancelable: false,
                        detail: {
                          instanceId: this.#instanceId,
                          isGlobal: this.#isGlobal,
                          sidebarId: this.#sidebarId
                        }
                      }));
                    }
                    open() {
                      document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelOpen", {
                        bubbles: true,
                        cancelable: false,
                        detail: {
                          instanceId: this.#instanceId,
                          isGlobal: this.#isGlobal,
                          sidebarId: this.#sidebarId
                        }
                      }));
                    }
                    isActive() {
                      return this.#isActive;
                    }
                    remove() {
                      this.#eventStream.end();
                    }
                  }
                  const sidebar_ContentPanelViewDriver = ContentPanelViewDriver;
                  ;
                  module3 = __webpack_require__3.hmd(module3);
                  const updates = js_default()(module3, null);
                  class GmailAppSidebarView {
                    #stopper = kefir_stopper_js_default()();
                    #driver;
                    #instanceId;
                    constructor(driver, companionSidebarContentContainerElement) {
                      this.#driver = driver;
                      const instanceId = companionSidebarContentContainerElement.getAttribute("data-sdk-sidebar-instance-id");
                      if (instanceId != null) {
                        this.#instanceId = instanceId;
                      } else {
                        let primary = new gmail_app_sidebar_view_primary(driver, companionSidebarContentContainerElement);
                        this.#instanceId = primary.getInstanceId();
                        updates.changes().onValue(() => {
                          primary.destroy();
                          primary = new gmail_app_sidebar_view_primary(driver, companionSidebarContentContainerElement);
                          this.#instanceId = primary.getInstanceId();
                        });
                      }
                    }
                    destroy() {
                      this.#stopper.destroy();
                    }
                    getStopper() {
                      return this.#stopper;
                    }
                    addThreadSidebarContentPanel(descriptor, threadView) {
                      const panel = new sidebar_ContentPanelViewDriver(this.#driver, descriptor, this.#instanceId);
                      kefir_esm.merge([threadView.getStopper(), this.#stopper]).take(1).takeUntilBy(panel.getStopper()).onValue(() => panel.remove());
                      return panel;
                    }
                    addGlobalSidebarContentPanel(descriptor) {
                      const panel = new sidebar_ContentPanelViewDriver(this.#driver, descriptor, this.#instanceId, true);
                      this.#stopper.takeUntilBy(panel.getStopper()).onValue(() => panel.remove());
                      return panel;
                    }
                  }
                  const gmail_app_sidebar_view = GmailAppSidebarView;
                })
              ),
              /***/
              6416: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7332);
                  module3 = __webpack_require__3.hmd(module3);
                  const GLOBAL_ICON_AREA_SELECTOR = ".brC-aT5-aOt-bsf-Jw";
                  function addCompanionGlobalIconArea(logger, iconArea, companionSidebarIconContainerEl) {
                    const sidebarIconArea = companionSidebarIconContainerEl.querySelector(GLOBAL_ICON_AREA_SELECTOR);
                    if (!sidebarIconArea) {
                      logger.error(new Error("addCompanionGlobalIconArea: no sidebarIconArea"));
                      return;
                    }
                    const nativeIconArea = sidebarIconArea.firstElementChild;
                    if (!nativeIconArea) {
                      logger.error(new Error("addCompanionGlobalIconArea: no nativeIconArea"));
                      return;
                    }
                    nativeIconArea.insertAdjacentElement("beforebegin", iconArea);
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_0__.defn)(module3, addCompanionGlobalIconArea);
                })
              ),
              /***/
              1763: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7332);
                  module3 = __webpack_require__3.hmd(module3);
                  const TAB_LIST_SELECTOR = "[role=tablist],.J-KU-Jg";
                  function addCompanionThreadIconArea(logger, iconArea, companionSidebarIconContainerEl) {
                    const tabList = companionSidebarIconContainerEl.querySelector(TAB_LIST_SELECTOR);
                    if (!tabList) {
                      logger.error(new Error("addCompanionThreadIconArea: no tablist"));
                      return;
                    }
                    const separator = companionSidebarIconContainerEl.querySelector("[role=separator]");
                    if (!separator) {
                      logger.error(new Error("addCompanionThreadIconArea: failed to find separator"));
                      tabList.insertAdjacentElement("beforebegin", iconArea);
                    } else {
                      if (!separator.parentElement) throw new Error();
                      separator.parentElement.insertBefore(iconArea, separator.nextElementSibling);
                    }
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_0__.defn)(module3, addCompanionThreadIconArea);
                })
              ),
              /***/
              3451: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(7332);
                  var lodash_findIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(9339);
                  var lodash_findIndex__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(lodash_findIndex__WEBPACK_IMPORTED_MODULE_0__);
                  var _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(5389);
                  module3 = __webpack_require__3.hmd(module3);
                  function addToIconArea(orderManager, appName, container, iconArea) {
                    [...iconArea.querySelectorAll("[data-app-name]")].forEach((el) => {
                      const elAppName = el.getAttribute("data-app-name");
                      const index2 = lodash_findIndex__WEBPACK_IMPORTED_MODULE_0___default()(orderManager.getOrderedItems(), (_ref) => {
                        let {
                          value
                        } = _ref;
                        return value.appName === elAppName;
                      });
                      el.setAttribute("data-order-hint", index2);
                    });
                    const index = lodash_findIndex__WEBPACK_IMPORTED_MODULE_0___default()(orderManager.getOrderedItems(), (_ref2) => {
                      let {
                        value
                      } = _ref2;
                      return value.appName === appName;
                    });
                    if (index > -1) container.setAttribute("data-order-hint", index);
                    (0, _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_1__.A)(iconArea, container, ["data-order-hint"]);
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_2__.defn)(module3, addToIconArea);
                })
              ),
              /***/
              3737: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      gmail_compose_view
                    )
                  });
                  var js = __webpack_require__3(1812);
                  var js_default = /* @__PURE__ */ __webpack_require__3.n(js);
                  var transducers = __webpack_require__3(6046);
                  var transducers_default = /* @__PURE__ */ __webpack_require__3.n(transducers);
                  var once = __webpack_require__3(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__3.n(once);
                  var lodash_escape = __webpack_require__3(3131);
                  var escape_default = /* @__PURE__ */ __webpack_require__3.n(lodash_escape);
                  var constant = __webpack_require__3(7660);
                  var constant_default = /* @__PURE__ */ __webpack_require__3.n(constant);
                  var find = __webpack_require__3(4455);
                  var find_default = /* @__PURE__ */ __webpack_require__3.n(find);
                  var browser_asap = __webpack_require__3(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__3.n(browser_asap);
                  var pdelay_js = __webpack_require__3(8498);
                  var kefir_esm = __webpack_require__3(7249);
                  var kefir_bus = __webpack_require__3(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__3.n(kefir_bus);
                  var kefir_stopper_js = __webpack_require__3(4924);
                  var kefir_stopper_js_default = /* @__PURE__ */ __webpack_require__3.n(kefir_stopper_js);
                  var delay_asap = __webpack_require__3(1136);
                  var simulate_mouse_event = __webpack_require__3(4603);
                  ;
                  async function triggerRelayEvent(element, detail) {
                    element.dispatchEvent(new CustomEvent("inboxsdk_event_relay", {
                      bubbles: true,
                      cancelable: false,
                      detail
                    }));
                  }
                  ;
                  function simulateKey(element, keyCode, charCode) {
                    const ctrlKey = false;
                    const metaKey = false;
                    const altKey = false;
                    const shiftKey = false;
                    triggerRelayEvent(element, {
                      type: "keydown",
                      bubbles: true,
                      cancelable: true,
                      props: {
                        keyCode,
                        charCode,
                        ctrlKey,
                        metaKey,
                        altKey,
                        shiftKey
                      }
                    });
                    triggerRelayEvent(element, {
                      type: "keypress",
                      bubbles: true,
                      cancelable: true,
                      props: {
                        keyCode,
                        charCode,
                        ctrlKey,
                        metaKey,
                        altKey,
                        shiftKey
                      }
                    });
                    triggerRelayEvent(element, {
                      type: "keyup",
                      bubbles: true,
                      cancelable: true,
                      props: {
                        keyCode,
                        charCode,
                        ctrlKey,
                        metaKey,
                        altKey,
                        shiftKey
                      }
                    });
                  }
                  var querySelectorOrFail = __webpack_require__3(9860);
                  var isElementVisible = __webpack_require__3(8130);
                  var make_element_child_stream = __webpack_require__3(2843);
                  ;
                  function makeDataTransferObj(files) {
                    const fileNames = Array.from(files).map((file) => typeof file.name === "string" ? file.name : void 0);
                    return {
                      files,
                      fileNames
                    };
                  }
                  function simulateDragOver(element, files) {
                    const dataTransfer = makeDataTransferObj(files);
                    const props = {
                      screenX: 0,
                      screenY: 0,
                      clientX: 0,
                      clientY: 0,
                      buttons: 1,
                      ctrlKey: false,
                      shiftKey: false,
                      altKey: false,
                      metaKey: false,
                      detail: 0
                    };
                    triggerRelayEvent(element, {
                      type: "dragenter",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                    triggerRelayEvent(element, {
                      type: "dragover",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                  }
                  function simulateDrop(element, files) {
                    const dataTransfer = makeDataTransferObj(files);
                    const props = {
                      screenX: 0,
                      screenY: 0,
                      clientX: 0,
                      clientY: 0,
                      buttons: 1,
                      ctrlKey: false,
                      shiftKey: false,
                      altKey: false,
                      metaKey: false,
                      detail: 0
                    };
                    triggerRelayEvent(element, {
                      type: "drop",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                  }
                  function simulateDragEnd(element, files) {
                    const dataTransfer = makeDataTransferObj(files);
                    const props = {
                      screenX: 0,
                      screenY: 0,
                      clientX: 0,
                      clientY: 0,
                      buttons: 1,
                      ctrlKey: false,
                      shiftKey: false,
                      altKey: false,
                      metaKey: false,
                      detail: 0
                    };
                    triggerRelayEvent(element, {
                      type: "dragleave",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                    triggerRelayEvent(element, {
                      type: "dragend",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                  }
                  var gmail_element_getter = __webpack_require__3(4003);
                  ;
                  function setCss(key, css) {
                    const id = `inboxsdk__${key}`;
                    let style = document.getElementById(id);
                    if (!css) {
                      if (style) {
                        style.remove();
                      }
                      return;
                    }
                    if (!style) {
                      style = document.createElement("style");
                      style.className = "inboxsdk__custom";
                      style.id = id;
                      if (!document.head) throw new Error("missing head");
                      document.head.appendChild(style);
                    }
                    style.textContent = css;
                  }
                  var wait_for = __webpack_require__3(5156);
                  var stream_wait_for = __webpack_require__3(1539);
                  var handle_compose_link_chips = __webpack_require__3(6907);
                  var insert_link_chip_into_body = __webpack_require__3(3174);
                  var insert_element_in_order = __webpack_require__3(5389);
                  var logger = __webpack_require__3(2617);
                  var SimpleElementView = __webpack_require__3(3741);
                  ;
                  function addComposeNotice(gmailComposeView, options) {
                    const {
                      orderHint
                    } = {
                      orderHint: 0,
                      ...options
                    };
                    const composeNotice = new ComposeNotice(gmailComposeView, orderHint);
                    gmailComposeView.getStopper().takeUntilBy(kefir_esm["default"].fromEvents(composeNotice, "destroy")).onValue(() => composeNotice.destroy());
                    return composeNotice;
                  }
                  class ComposeNotice extends SimpleElementView.A {
                    _stopper = kefir_stopper_js_default()();
                    constructor(gmailComposeView, orderHint) {
                      const el = document.createElement("div");
                      el.style.fontFamily = "Roboto,RobotoDraft,Helvetica,Arial,sans-serif";
                      el.style.fontSize = "14px";
                      super(el);
                      this._gmailComposeView = gmailComposeView;
                      this._orderHint = orderHint;
                      el.className = "inboxsdk__compose_notice";
                      el.setAttribute("data-order-hint", String(orderHint));
                      this._setComposeNotice();
                    }
                    destroy() {
                      if (this.destroyed) {
                        return;
                      }
                      super.destroy();
                      this._stopper.destroy();
                    }
                    _setComposeNotice() {
                      try {
                        const composeTable = (0, querySelectorOrFail.A)(this._gmailComposeView.getElement(), ".iN");
                        (0, insert_element_in_order.A)(composeTable, this.el, ["data-order-hint"], true);
                      } catch (err) {
                        logger.A.error(err);
                      }
                    }
                  }
                  var add_status_bar = __webpack_require__3(9121);
                  var insert_html_at_cursor = __webpack_require__3(3166);
                  ;
                  function ensureGroupingIsOpen(gmailComposeViewElement, type) {
                    if (type === "SEND_ACTION") {
                      return;
                    }
                    var groupedButton = gmailComposeViewElement.querySelector(".inboxsdk__compose_groupedActionButton");
                    if (!groupedButton) {
                      return;
                    }
                    if (gmailComposeViewElement.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")) {
                      return;
                    }
                    (0, simulate_mouse_event.jp)(groupedButton);
                  }
                  ;
                  function ensureAppButtonToolbarsAreClosed(gmailComposeViewElement) {
                    var groupedButton = gmailComposeViewElement.querySelector(".inboxsdk__compose_groupedActionButton");
                    if (!groupedButton) {
                      return;
                    }
                    if (gmailComposeViewElement.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")) {
                      (0, simulate_mouse_event.jp)(groupedButton);
                    }
                  }
                  var includes = __webpack_require__3(5193);
                  var includes_default = /* @__PURE__ */ __webpack_require__3.n(includes);
                  var startsWith = __webpack_require__3(7013);
                  var startsWith_default = /* @__PURE__ */ __webpack_require__3.n(startsWith);
                  var findIndex = __webpack_require__3(9339);
                  var findIndex_default = /* @__PURE__ */ __webpack_require__3.n(findIndex);
                  var make_mutation_observer_chunked_stream = __webpack_require__3(3197);
                  ;
                  function cssSelectorEscape(text) {
                    if (text.length === 0 || /^-?[0-9]/.test(text)) {
                      throw new Error("Invalid CSS selector");
                    }
                    return text.replace(/[^a-z0-9]/g, "\\$&");
                  }
                  ;
                  const MATERIAL_UI_GMAIL_STATUS_HEIGHT = 60;
                  const MATERIAL_UI_TOP_FORM_HEIGHT = 72;
                  const SELECTOR_ESCAPE_HATCH_PREFIX = "body:not(.inboxsdk_hack_disableComposeSizeFixer) ";
                  var getSizeFixerSheet = once_default()(() => {
                    const style = document.createElement("style");
                    style.type = "text/css";
                    style.className = "inboxsdk__compose_size_fixer";
                    document.head.appendChild(style);
                    var sheet = style.sheet;
                    if (!(sheet instanceof CSSStyleSheet)) {
                      throw new Error("Could not add stylesheet");
                    }
                    return sheet;
                  });
                  function byId(id) {
                    return "#" + cssSelectorEscape(id);
                  }
                  function sizeFixer(driver, gmailComposeView) {
                    if (gmailComposeView.isInlineReplyForm() || gmailComposeView.getElement().classList.contains("inboxsdk__size_fixer")) {
                      return;
                    }
                    gmailComposeView.getElement().classList.add("inboxsdk__size_fixer");
                    var composeEvents = gmailComposeView.getEventStream();
                    var stopper = composeEvents.filter(() => false).beforeEnd(() => null);
                    var resizeEvents = composeEvents.filter((e) => includes_default()(["resize", "fullscreenChanged"], e.eventName)).merge((0, delay_asap.A)(null));
                    var statusAreaParent = gmailComposeView.getStatusArea().parentElement;
                    var scrollBody = gmailComposeView.getScrollBody();
                    var sheet = getSizeFixerSheet();
                    var topForm = gmailComposeView.getTopFormElement();
                    var composeId = gmailComposeView.getElement().id;
                    if (!composeId) {
                      composeId = gmailComposeView.getElement().id = `x${Math.random()}x${Date.now()}`;
                    }
                    function setRuleForSelector(selector, rule) {
                      const fullSelector = SELECTOR_ESCAPE_HATCH_PREFIX + byId(composeId) + " " + selector;
                      const ix = findIndex_default()(sheet.cssRules, (cssRule) => cssRule.selectorText === fullSelector);
                      if (ix !== -1) {
                        sheet.deleteRule(ix);
                      }
                      sheet.insertRule(fullSelector + " { " + rule + " }", 0);
                    }
                    (0, make_mutation_observer_chunked_stream.A)(statusAreaParent, {
                      attributes: true
                    }).takeUntilBy(stopper).onValue(() => {
                      gmailComposeView.getElement().dispatchEvent(new CustomEvent("resize", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                    });
                    resizeEvents.bufferBy(resizeEvents.flatMap(() => (0, delay_asap.A)(null))).filter((x2) => x2.length > 0).merge((0, make_mutation_observer_chunked_stream.A)(scrollBody, {
                      attributes: true
                    })).takeUntilBy(stopper).onValue(() => {
                      const statusUnexpectedHeight = Math.max(statusAreaParent.offsetHeight - MATERIAL_UI_GMAIL_STATUS_HEIGHT, 0);
                      const topFormUnexpectedHeight = Math.max(topForm.offsetHeight - MATERIAL_UI_TOP_FORM_HEIGHT, 0);
                      const unexpectedHeight = statusUnexpectedHeight + topFormUnexpectedHeight;
                      const maybeBody = gmailComposeView.getMaybeBodyElement();
                      const scrollBodyInner = scrollBody.querySelector(".qz");
                      const height = scrollBodyInner?.offsetHeight || scrollBody.offsetHeight;
                      const maxHeight = parseInt(scrollBody.style.getPropertyValue("max-height"), 10);
                      const isFullScreen = gmailComposeView.isFullscreen();
                      const newMaxHeight = maxHeight - unexpectedHeight;
                      const newHeight = height > newMaxHeight ? newMaxHeight : null;
                      const scrollBodyCssRules = [`max-height: ${newMaxHeight}px !important;`];
                      let maybeBodyCssRules;
                      if (newHeight) {
                        scrollBodyCssRules.push(`height: ${newHeight}px !important;`);
                      }
                      if (isFullScreen) {
                        scrollBodyCssRules.push(`min-height: ${newMaxHeight}px !important;`);
                        const maybeBodyMinHeight = parseInt(maybeBody?.style.minHeight ?? "", 10) || maxHeight;
                        const maybeBodyNewMinHeight = maybeBodyMinHeight - unexpectedHeight;
                        maybeBodyCssRules = `min-height: ${maybeBodyNewMinHeight}px !important;`;
                      }
                      if (scrollBodyCssRules.length > 0) {
                        setRuleForSelector(byId(scrollBody.id), scrollBodyCssRules.join("\n"));
                      }
                      if (maybeBodyCssRules && maybeBody) {
                        setRuleForSelector(byId(maybeBody.id), maybeBodyCssRules);
                      }
                    });
                    stopper.onValue(() => {
                      for (let ix = sheet.cssRules.length - 1; ix >= 0; ix--) {
                        if (startsWith_default()(sheet.cssRules[ix].selectorText, SELECTOR_ESCAPE_HATCH_PREFIX + byId(composeId) + " ")) {
                          sheet.deleteRule(ix);
                        }
                      }
                    });
                  }
                  var gmail_tooltip_view = __webpack_require__3(4806);
                  ;
                  function addTooltipToButton(gmailComposeView, buttonViewController, buttonDescriptor, tooltipDescriptor) {
                    var gmailTooltipView = new gmail_tooltip_view.A(tooltipDescriptor);
                    var tooltipStopperStream = gmailTooltipView.getStopper().merge(gmailComposeView.getStopper());
                    gmailComposeView.getStopper().takeUntilBy(gmailTooltipView.getStopper()).onValue(() => gmailTooltipView.destroy());
                    document.body.appendChild(gmailTooltipView.getElement());
                    _anchorTooltip(gmailTooltipView, gmailComposeView, buttonViewController, buttonDescriptor);
                    gmailComposeView.getEventStream().filter((event) => event.eventName === "buttonAdded" || event.eventName === "fullscreenChanged").merge(gmailTooltipView.getEventStream().filter((_ref) => {
                      let {
                        eventName
                      } = _ref;
                      return eventName === "imageLoaded";
                    })).debounce(10).takeUntilBy(tooltipStopperStream).onValue(_anchorTooltip.bind(null, gmailTooltipView, gmailComposeView, buttonViewController, buttonDescriptor));
                    buttonViewController.getView().getEventStream().takeUntilBy(tooltipStopperStream).filter(function(event) {
                      return event.eventName === "click";
                    }).onValue(gmailTooltipView.destroy.bind(gmailTooltipView));
                    var stoppedIntervalStream = kefir_esm.interval(50, void 0).takeUntilBy(tooltipStopperStream);
                    var left2 = 0;
                    var top = 0;
                    stoppedIntervalStream.takeWhile(() => !!buttonViewController.getView() && !!gmailTooltipView.getElement()).map(() => buttonViewController.getView().getElement().getBoundingClientRect()).filter((rect) => rect.left !== left2 || rect.top !== top).map((rect) => {
                      left2 = rect.left;
                      top = rect.top;
                      return rect;
                    }).onValue(gmailTooltipView.anchor.bind(gmailTooltipView, buttonViewController.getView().getElement(), {
                      position: "top"
                    }));
                    stoppedIntervalStream.filter(() => !buttonViewController.getView() || !buttonViewController.getView().getElement().offsetParent).onValue(gmailTooltipView.destroy.bind(gmailTooltipView));
                    return gmailTooltipView;
                  }
                  function _anchorTooltip(gmailTooltipView, gmailComposeView, buttonViewController, buttonDescriptor) {
                    try {
                      gmailComposeView.ensureGroupingIsOpen(buttonDescriptor.type);
                      setTimeout(function() {
                        gmailTooltipView.anchor(buttonViewController.getView().getElement(), {
                          position: "top"
                        });
                      }, 10);
                    } catch (err) {
                      logger.A.error(err);
                    }
                  }
                  var block_and_reemit_keyboard_events = __webpack_require__3(8416);
                  var page_parser_tree_js = __webpack_require__3(855);
                  var page_parser_tree_js_default = /* @__PURE__ */ __webpack_require__3.n(page_parser_tree_js);
                  var censorHTMLtree = __webpack_require__3(1443);
                  ;
                  function makePageParser(element, logger2) {
                    return new (page_parser_tree_js_default())(element, {
                      logError(err, el) {
                        const details = {
                          el,
                          html: el ? (0, censorHTMLtree.A)(el) : null
                        };
                        logger2.errorSite(err, details);
                      },
                      tags: {},
                      watchers: [{
                        // For regular composes
                        sources: [null],
                        tag: "recipientsCommon",
                        selectors: ["div", "div", "div[jsaction]", "div[role=region]", "table", "tbody", "tr", "td", "form", "div", "table.GS", "tbody", "tr.bzf", "td.eV", "div", "div"]
                      }, {
                        // For inline composes
                        sources: [null],
                        tag: "recipientsCommon",
                        selectors: ["div[role=region]", "table", "tbody", "tr", "td", "form", "div", "table[role=presentation]", "tbody", "tr", "td.Iy", "div.fX", "table.GS", "tbody", "tr.bzf", "td.eV", "div", "div"]
                      }, {
                        sources: ["recipientsCommon"],
                        tag: "toRecipient",
                        selectors: [{
                          $or: [['div.anm[name="to"]', {
                            $or: [
                              [],
                              // Inline reply compose
                              ["div.aUy"]
                            ]
                          }, "div", "div", "div", "div", "[role=listbox]", "div", "div", "div[role=option][data-name]"], [{
                            $map: (el) => el.querySelector("textarea.vO[name=to], input[name=to]")
                          }, {
                            $map: (el) => el.closest("tr")
                          }, "td.eV", "div", "div", ".vR", "input[type=hidden]", {
                            $map: (el) => el.parentElement
                          }]]
                        }]
                      }, {
                        sources: ["recipientsCommon"],
                        tag: "ccRecipient",
                        selectors: [{
                          $or: [['div.anm[name="cc"]', {
                            $or: [
                              [],
                              // Inline reply compose
                              ["div.aUy"]
                            ]
                          }, "div", "div", "div", "div", "[role=listbox]", "div", "div", "div[role=option][data-name]"], [{
                            $map: (el) => el.querySelector("textarea.vO[name=cc], input[name=cc]")
                          }, {
                            $map: (el) => el.closest("tr")
                          }, "td.eV", "div", "div", ".vR", "input[type=hidden]", {
                            $map: (el) => el.parentElement
                          }]]
                        }]
                      }, {
                        sources: ["recipientsCommon"],
                        tag: "bccRecipient",
                        selectors: [{
                          $or: [['div.anm[name="bcc"]', {
                            $or: [
                              [],
                              // Inline reply compose
                              ["div.aUy"]
                            ]
                          }, "div", "div", "div", "div", "[role=listbox]", "div", "div", "div[role=option][data-name]"], [{
                            $map: (el) => el.querySelector("textarea.vO[name=bcc], input[name=bcc]")
                          }, {
                            $map: (el) => el.closest("tr")
                          }, "td.eV", "div", "div", ".vR", "input[type=hidden]", {
                            $map: (el) => el.parentElement
                          }]]
                        }]
                      }],
                      finders: {
                        toRecipient: {
                          fn: (root) => getRecipientChips(root, "to")
                        },
                        ccRecipient: {
                          fn: (root) => getRecipientChips(root, "cc")
                        },
                        bccRecipient: {
                          fn: (root) => getRecipientChips(root, "bcc")
                        }
                      }
                    });
                  }
                  function getRecipientChips(element, addressType) {
                    const oldRow = getOldRecipientRowForType(element, addressType);
                    if (oldRow) {
                      return Array.from(oldRow.querySelectorAll(".vR > input[type=hidden]")).map((el) => el.parentElement);
                    } else {
                      return element.querySelectorAll(`.GS .anm[name="${addressType}"] [role=listbox] [role=option][data-name]`);
                    }
                  }
                  function getRecipientRowElements(element) {
                    return Array.prototype.filter.call(element.querySelectorAll(".GS tr, .GS .anm[name] [role=listbox]"), (tr) => !tr.classList.contains("inboxsdk__recipient_row"));
                  }
                  function getRecipientRowForType(element, addressType) {
                    return element.querySelector(`.GS .anm[name="${addressType}"] [role=listbox]`);
                  }
                  function getOldRecipientRowForType(element, addressType) {
                    const input = element.querySelector(`.GS tr textarea.vO[name="${addressType}"], .GS tr input[name="${addressType}"]`);
                    if (input) {
                      return input.closest("tr");
                    } else {
                      return null;
                    }
                  }
                  ;
                  function addRecipientRow(gmailComposeView, recipientRowOptionStream) {
                    let row;
                    recipientRowOptionStream.takeUntilBy(gmailComposeView.getStopper()).onValue((options) => {
                      if (row) {
                        row.remove();
                        row = null;
                      }
                      if (options) {
                        row = _createRecipientRowElement(gmailComposeView, options);
                        (0, block_and_reemit_keyboard_events.A)(row);
                      }
                      gmailComposeView.getElement().dispatchEvent(new CustomEvent("resize", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                    });
                    return () => {
                      if (row) {
                        row.remove();
                        row = null;
                        gmailComposeView.getElement().dispatchEvent(new CustomEvent("resize", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      }
                    };
                  }
                  function _createRecipientRowElement(gmailComposeView, options) {
                    var row = document.createElement("tr");
                    var labelTD = document.createElement("td");
                    var contentTD = document.createElement("td");
                    row.appendChild(labelTD);
                    row.appendChild(contentTD);
                    row.setAttribute("class", "inboxsdk__recipient_row");
                    if (options.labelText) {
                      labelTD.setAttribute("class", "ok");
                      var span = document.createElement("span");
                      span.setAttribute("class", "gO");
                      labelTD.appendChild(span);
                      span.textContent = options.labelText;
                      if (options.labelClass) {
                        labelTD.classList.add(options.labelClass);
                      }
                      if (options.labelTextClass) {
                        span.classList.add(options.labelTextClass);
                      }
                    }
                    if (options.el) {
                      contentTD.setAttribute("class", "az3");
                      contentTD.appendChild(options.el);
                    }
                    var firstRowElement = getRecipientRowElements(gmailComposeView.getElement())[0];
                    var parent = firstRowElement.parentElement;
                    parent.insertBefore(row, firstRowElement.nextSibling);
                    const addressBarContainer = parent.closest(".fX");
                    addressBarContainer && addressBarContainer.classList.add("inboxsdk__compose_addressList");
                    return row;
                  }
                  var gmail_compose_button_view = __webpack_require__3(5865);
                  var basic_button_view_controller = __webpack_require__3(9755);
                  var dropdown_button_view_controller = __webpack_require__3(9374);
                  var gmail_dropdown_view = __webpack_require__3(3612);
                  ;
                  function addButton(gmailComposeView, buttonDescriptorStream, groupOrderHint, extraOnClickOptions, bus) {
                    let buttonViewController;
                    buttonDescriptorStream.takeUntilBy(gmailComposeView.getStopper()).onValue((buttonDescriptor) => {
                      const buttonOptions = _processButtonDescriptor(buttonDescriptor, extraOnClickOptions, gmailComposeView.getGmailDriver());
                      if (buttonViewController instanceof dropdown_button_view_controller.A && buttonOptions?.hasDropdown !== true || buttonViewController instanceof basic_button_view_controller.A && buttonOptions?.hasDropdown === true) {
                        buttonViewController.destroy();
                        buttonViewController = void 0;
                      }
                      if (!buttonViewController) {
                        if (buttonOptions) {
                          buttonViewController = _addButton(gmailComposeView, buttonOptions, groupOrderHint);
                          bus.emit({
                            buttonViewController,
                            buttonDescriptor
                          });
                        }
                      } else {
                        buttonViewController.update(buttonOptions);
                      }
                    });
                  }
                  function _addButton(gmailComposeView, buttonOptions, groupOrderHint) {
                    if (!gmailComposeView.getElement() || !gmailComposeView.getFormattingToolbar()) {
                      return;
                    }
                    let buttonViewController;
                    if (buttonOptions.type === "MODIFIER") {
                      buttonViewController = _addButtonToModifierArea(gmailComposeView, buttonOptions, groupOrderHint);
                    } else if (buttonOptions.type === "SEND_ACTION") {
                      buttonViewController = _addButtonToSendActionArea(gmailComposeView, buttonOptions);
                    }
                    gmailComposeView.getElement().dispatchEvent(new CustomEvent("buttonAdded", {
                      bubbles: false,
                      cancelable: false,
                      detail: null
                    }));
                    return buttonViewController;
                  }
                  function _addButtonToModifierArea(gmailComposeView, buttonDescriptor, groupOrderHint) {
                    var buttonViewController = _getButtonViewController(buttonDescriptor);
                    buttonViewController.getView().getElement().setAttribute("tabindex", "1");
                    buttonViewController.getView().getElement().setAttribute("data-order-hint", String(buttonDescriptor.orderHint || 0));
                    buttonViewController.getView().getElement().setAttribute("data-group-order-hint", groupOrderHint);
                    var formattingAreaOffsetLeft = gmailComposeView._getFormattingAreaOffsetLeft();
                    var element = buttonViewController.getView().getElement();
                    var actionToolbar = gmailComposeView.getAdditionalActionToolbar();
                    (0, insert_element_in_order.A)(actionToolbar, element);
                    gmailComposeView.updateInsertMoreAreaLeft(formattingAreaOffsetLeft);
                    gmailComposeView.addManagedViewController(buttonViewController);
                    return buttonViewController;
                  }
                  function _addButtonToSendActionArea(gmailComposeView, buttonDescriptor) {
                    const buttonViewController = _getButtonViewController(buttonDescriptor);
                    buttonViewController.getView().removeClass("inboxsdk__composeButton");
                    buttonViewController.getView().addClass("inboxsdk__compose_sendButton");
                    buttonViewController.getView().getElement().setAttribute("tabindex", "1");
                    const sendButtonGroupElement = gmailComposeView.getSendButtonGroup();
                    const buttonElement = buttonViewController.getView().getElement();
                    const parent = sendButtonGroupElement.parentElement;
                    parent.insertBefore(buttonElement, sendButtonGroupElement.nextSibling);
                    gmailComposeView.addManagedViewController(buttonViewController);
                    return buttonViewController;
                  }
                  function _getButtonViewController(buttonDescriptor) {
                    const buttonView = new gmail_compose_button_view.A(buttonDescriptor);
                    const options = {
                      buttonView,
                      ...buttonDescriptor
                    };
                    let buttonViewController;
                    if (buttonDescriptor.hasDropdown) {
                      Object.assign(options, {
                        dropdownViewDriverClass: gmail_dropdown_view.A,
                        dropdownPositionOptions: {
                          vAlign: "top"
                        }
                      });
                      buttonViewController = new dropdown_button_view_controller.A(options);
                    } else {
                      buttonViewController = new basic_button_view_controller.A(options);
                    }
                    return buttonViewController;
                  }
                  function _processButtonDescriptor(buttonDescriptor, extraOnClickOptions, driver) {
                    if (!buttonDescriptor) {
                      return null;
                    }
                    const buttonOptions = {
                      type: "MODIFIER",
                      ...buttonDescriptor
                    };
                    const oldOnClick = buttonOptions.onClick;
                    buttonOptions.onClick = function(event) {
                      driver.getLogger().eventSdkActive("composeView.addedButton.click");
                      oldOnClick({
                        ...extraOnClickOptions,
                        ...event
                      });
                    };
                    if (buttonOptions.hasDropdown) {
                      buttonOptions.dropdownShowFunction = buttonOptions.onClick;
                    } else {
                      buttonOptions.activateFunction = buttonOptions.onClick;
                    }
                    buttonOptions.noArrow = true;
                    buttonOptions.tooltip = buttonOptions.tooltip || buttonOptions.title;
                    delete buttonOptions.title;
                    if (buttonOptions.type === "MODIFIER") {
                      buttonOptions.buttonColor = "flatIcon";
                    } else if (buttonOptions.type === "SEND_ACTION") {
                      buttonOptions.buttonColor = "blue";
                    }
                    return buttonOptions;
                  }
                  var extract_contact_from_email_contact_string = __webpack_require__3(3324);
                  var censorHTMLstring = __webpack_require__3(4158);
                  ;
                  function getAddressInformationExtractor(addressType, composeView) {
                    return function(node) {
                      const contactNode = node instanceof HTMLInputElement && node.getAttribute("name") === addressType ? node : node.querySelector(`input[name='${addressType}']`);
                      if (contactNode) {
                        var contactInfoString = contactNode.value;
                        try {
                          return (0, extract_contact_from_email_contact_string.A)(contactInfoString);
                        } catch (err) {
                          return null;
                        }
                      } else {
                        logger.A.error(new Error(`contactNode can't be found`), {
                          addressType,
                          composeViewHtml: (0, censorHTMLstring.A)(composeView.getElement().outerHTML)
                        });
                        return null;
                      }
                    };
                  }
                  var isNotNil = __webpack_require__3(960);
                  ;
                  function getRecipients(gmailComposeView, addressType) {
                    const contactNodes = getRecipientChips(gmailComposeView.getElement(), addressType);
                    return Array.from(contactNodes).map((contactNode) => {
                      if (contactNode.getAttribute("role") === "option") {
                        return {
                          name: contactNode.getAttribute("data-name"),
                          emailAddress: contactNode.getAttribute("data-hovercard-id")
                        };
                      } else {
                        return getAddressInformationExtractor(addressType, gmailComposeView)(contactNode);
                      }
                    }).filter(isNotNil.A);
                  }
                  ;
                  function setRecipients(gmailComposeView, addressType, emailAddresses) {
                    if (_areContactsEqual(gmailComposeView, addressType, emailAddresses)) {
                      return;
                    }
                    const oldRange = gmailComposeView.getLastSelectionRange();
                    let _contactRow = getRecipientRowForType(gmailComposeView.getElement(), addressType);
                    function openRecipientsSectionIfNeeded(button) {
                      const signalElement = button.closest(".fX.aiL");
                      if (signalElement && signalElement.style.display === "none") {
                        const cover = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), "div.aoD.hl");
                        cover.dispatchEvent(new FocusEvent("focus"));
                      }
                    }
                    if (addressType === "cc") {
                      const ccButton = gmailComposeView.getElement().querySelector("span.pE[role=link]");
                      if (ccButton) {
                        openRecipientsSectionIfNeeded(ccButton);
                        ccButton.click();
                        _contactRow = getRecipientRowForType(gmailComposeView.getElement(), addressType);
                      }
                    } else if (addressType === "bcc") {
                      const bccButton = gmailComposeView.getElement().querySelector("span.pB[role=link]");
                      if (bccButton) {
                        openRecipientsSectionIfNeeded(bccButton);
                        bccButton.click();
                        _contactRow = getRecipientRowForType(gmailComposeView.getElement(), addressType);
                      }
                    }
                    const contactRow = _contactRow;
                    if (contactRow) {
                      const emailAddressEntry = (0, querySelectorOrFail.A)(contactRow, "input[role=combobox][aria-autocomplete=list]");
                      if (!(emailAddressEntry instanceof HTMLInputElement)) {
                        throw new Error();
                      }
                      Array.from(contactRow.querySelectorAll("div[role=option][data-name] div.afX[aria-label]")).forEach((el) => {
                        el.click();
                      });
                      emailAddressEntry.value = "";
                      const clipboardData = new DataTransfer();
                      clipboardData.setData("text/plain", emailAddresses.join(","));
                      emailAddressEntry.dispatchEvent(new ClipboardEvent("paste", {
                        clipboardData
                      }));
                      const nameEl = contactRow.closest("div.anm[name]");
                      if (emailAddresses.length > 0 && nameEl && !nameEl.hasAttribute("data-inboxsdk-handled-reset")) {
                        const claim = String(Number(nameEl.getAttribute("data-inboxsdk-tracking-fresh-compose") || 0) + 1);
                        nameEl.setAttribute("data-inboxsdk-tracking-fresh-compose", claim);
                        setTimeout(() => {
                          if (nameEl.getAttribute("data-inboxsdk-tracking-fresh-compose") === claim) {
                            nameEl.removeAttribute("data-inboxsdk-tracking-fresh-compose");
                            if (contactRow.querySelectorAll("div[role=option][data-name] div.afX[aria-label]").length === 0) {
                              nameEl.setAttribute("data-inboxsdk-handled-reset", "true");
                              setRecipients(gmailComposeView, addressType, emailAddresses);
                            }
                          }
                        }, 100);
                      }
                    } else {
                      let contactRow2;
                      try {
                        contactRow2 = getOldRecipientRowForType(gmailComposeView.getElement(), addressType);
                        if (!contactRow2) {
                          throw new Error("getOldRecipientRowForType failed");
                        }
                      } catch (err) {
                        logger.A.error(err, {
                          addressType
                        });
                        return;
                      }
                      const emailAddressEntry = contactRow2.querySelector("textarea.vO");
                      if (!emailAddressEntry || !(emailAddressEntry instanceof HTMLTextAreaElement)) {
                        return;
                      }
                      Array.from(contactRow2.querySelectorAll(".vR .vM")).forEach((el) => {
                        (0, simulate_mouse_event.jp)(el);
                      });
                      emailAddressEntry.value = emailAddresses.join(",");
                      simulateKey(emailAddressEntry, 13, 0);
                      const cover = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), "div.aoD.hl");
                      cover.dispatchEvent(new FocusEvent("focus"));
                      if (addressType === "cc") {
                        const ccButton = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), "span.aB.gQ.pE");
                        (0, simulate_mouse_event.jp)(ccButton);
                      } else if (addressType === "bcc") {
                        const bccButton = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), "span.aB.gQ.pB");
                        (0, simulate_mouse_event.jp)(bccButton);
                      }
                    }
                    if (document.activeElement instanceof HTMLElement) {
                      document.activeElement.blur();
                    }
                    if (oldRange) {
                      const sel = document.getSelection();
                      if (!sel) throw new Error();
                      sel.removeAllRanges();
                      sel.addRange(oldRange);
                    }
                  }
                  function _areContactsEqual(gmailComposeView, addressType, emailAddresses) {
                    const existingEmailAddresses = getRecipients(gmailComposeView, addressType).map((c) => c.emailAddress);
                    if (!emailAddresses) {
                      return !!existingEmailAddresses;
                    }
                    if (!existingEmailAddresses) {
                      return !!emailAddresses;
                    }
                    if (emailAddresses.length !== existingEmailAddresses.length) {
                      return false;
                    }
                    for (let ii = 0; ii < existingEmailAddresses.length; ii++) {
                      const existingEmailAddress = existingEmailAddresses[ii];
                      if (emailAddresses.indexOf(existingEmailAddress) === -1) {
                        return false;
                      }
                    }
                    return true;
                  }
                  ;
                  function gmail_compose_view_focus(gmailComposeView) {
                    gmailComposeView.getBodyElement().focus();
                    const lastSelectionRange = gmailComposeView.getLastSelectionRange();
                    const selection2 = document.getSelection();
                    if (!selection2) throw new Error();
                    if (lastSelectionRange && selection2.anchorNode === selection2.focusNode && selection2.anchorOffset === selection2.focusOffset) {
                      selection2.removeAllRanges();
                      selection2.addRange(lastSelectionRange);
                    }
                  }
                  var from_event_target_capture = __webpack_require__3(3985);
                  ;
                  function monitor_selection_range(gmailComposeView) {
                    kefir_esm["default"].merge([(0, from_event_target_capture.A)(document.body, "mousedown"), (0, from_event_target_capture.A)(gmailComposeView.getBodyElement(), "keydown"), gmailComposeView.getEventStream().filter((e) => e.eventName === "bodyChanged")]).takeUntilBy(gmailComposeView.getStopper()).onValue(() => {
                      var body = gmailComposeView.getMaybeBodyElement();
                      var selection2 = document.getSelection();
                      if (body && selection2.rangeCount > 0 && body.contains(selection2.anchorNode)) {
                        gmailComposeView.setLastSelectionRange(selection2.getRangeAt(0));
                      }
                    });
                  }
                  var manage_button_grouping = __webpack_require__3(7389);
                  ;
                  function isRangeEmpty(range) {
                    return range.startContainer === range.endContainer && range.startOffset === range.endOffset;
                  }
                  function isRangeInElement(range, el) {
                    return el.contains(range.startContainer) || el.contains(range.endContainer);
                  }
                  function isRangeSuitable(range, el) {
                    return !isRangeEmpty(range) && isRangeInElement(range, el);
                  }
                  function getSelectedTextInElement(element, lastRange) {
                    const selection2 = document.getSelection();
                    return transducers_default().toArray([selection2 && selection2.rangeCount ? selection2.getRangeAt(0) : null, lastRange], transducers_default().compose(transducers_default().keep(), transducers_default().filter((range) => isRangeSuitable(range, element)), transducers_default().map((range) => range.toString()), transducers_default().take(1)))[0];
                  }
                  function getSelectedHTMLInElement(element, lastRange) {
                    const selection2 = document.getSelection();
                    return transducers_default().toArray([selection2 && selection2.rangeCount ? selection2.getRangeAt(0) : null, lastRange], transducers_default().compose(transducers_default().keep(), transducers_default().filter((range) => isRangeSuitable(range, element)), transducers_default().map((range) => {
                      const div = document.createElement("div");
                      div.appendChild(range.cloneContents());
                      return div.innerHTML;
                    }), transducers_default().take(1)))[0];
                  }
                  var get_minimized_stream = __webpack_require__3(5845);
                  ;
                  function insertLinkIntoBody(gmailComposeView, text, href) {
                    return _insertLinkIntoBody(gmailComposeView, text, href);
                  }
                  function _insertLinkIntoBody(gmailComposeView, text, href) {
                    gmailComposeView.focus();
                    gmailComposeView.getBodyElement().focus();
                    const selection2 = document.getSelection();
                    if (!selection2) throw new Error("selection does't exist, what?");
                    const range = selection2.getRangeAt(0);
                    const link = document.createElement("a");
                    link.href = href;
                    range.extractContents();
                    range.insertNode(link);
                    link.textContent = text;
                    selection2.selectAllChildren(link);
                    selection2.collapseToEnd();
                    return link;
                  }
                  var make_mutation_observer_stream = __webpack_require__3(5938);
                  var toItemWithLifetimeStream = __webpack_require__3(370);
                  ;
                  function getAddressChangesStream(gmailComposeView) {
                    const recipientRowElements = getRecipientRowElements(gmailComposeView.getElement());
                    if (!recipientRowElements || recipientRowElements.length === 0) {
                      return kefir_esm.never();
                    }
                    const mergedStream = kefir_esm.merge([_makeSubAddressStream("to", gmailComposeView), _makeSubAddressStream("cc", gmailComposeView), _makeSubAddressStream("bcc", gmailComposeView)]);
                    const umbrellaStream = mergedStream.map(_groupChangeEvents);
                    return kefir_esm.merge([mergedStream, umbrellaStream, getFromAddressChangeStream(gmailComposeView)]);
                  }
                  function readContactFromElement(contactNode, addressType, gmailComposeView) {
                    if (contactNode.getAttribute("role") === "option") {
                      return {
                        name: contactNode.getAttribute("data-name"),
                        emailAddress: contactNode.getAttribute("data-hovercard-id")
                      };
                    } else {
                      return getAddressInformationExtractor(addressType, gmailComposeView)(contactNode);
                    }
                  }
                  function _makeSubAddressStream(addressType, gmailComposeView) {
                    const contactNodes = gmailComposeView.tagTree.getAllByTag(`${addressType}Recipient`);
                    return (0, toItemWithLifetimeStream.A)(contactNodes).flatMap((_ref) => {
                      let {
                        el,
                        removalStream
                      } = _ref;
                      const contact = readContactFromElement(el.getValue(), addressType, gmailComposeView);
                      if (!contact) {
                        return kefir_esm.never();
                      }
                      return kefir_esm.constant({
                        eventName: `${addressType}ContactAdded`,
                        data: {
                          contact
                        }
                      }).merge(removalStream.map(() => ({
                        eventName: `${addressType}ContactRemoved`,
                        data: {
                          contact
                        }
                      })));
                    });
                  }
                  function _groupChangeEvents(event) {
                    const grouping = {
                      to: {
                        added: [],
                        removed: []
                      },
                      cc: {
                        added: [],
                        removed: []
                      },
                      bcc: {
                        added: [],
                        removed: []
                      }
                    };
                    const parts = event.eventName.split("Contact");
                    grouping[parts[0]][parts[1].toLowerCase()].push(event.data.contact);
                    return {
                      eventName: "recipientsChanged",
                      data: grouping
                    };
                  }
                  function getFromAddressChangeStream(gmailComposeView) {
                    return kefir_esm.later(0, null).flatMap(() => {
                      const fromInput = gmailComposeView.getElement().querySelector('input[name="from"]');
                      return kefir_esm.constant(_convertToEvent("fromContactChanged", gmailComposeView.getFromContact())).merge(!fromInput ? kefir_esm.never() : (0, make_mutation_observer_stream.A)(fromInput, {
                        attributes: true,
                        attributeFilter: ["value"]
                      }).map(() => _convertToEvent("fromContactChanged", gmailComposeView.getFromContact())));
                    });
                  }
                  function _convertToEvent(eventName, addressInfo) {
                    return {
                      eventName,
                      data: {
                        contact: addressInfo
                      }
                    };
                  }
                  ;
                  function get_body_changes_stream(gmailComposeView) {
                    var bodyElement = gmailComposeView.getBodyElement();
                    return (0, make_mutation_observer_stream.A)(bodyElement, {
                      childList: true,
                      subtree: true,
                      characterData: true
                    }).map(function() {
                      return {
                        eventName: "bodyChanged"
                      };
                    });
                  }
                  ;
                  function get_response_type_changes_stream(gmailComposeView) {
                    let responseTypeEl;
                    try {
                      responseTypeEl = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".J-J5-Ji .J-JN-M-I-Jm > img");
                      return (0, make_mutation_observer_chunked_stream.A)(responseTypeEl, {
                        attributeFilter: ["class"],
                        attributes: true
                      }).map(() => ({
                        data: {
                          isForward: gmailComposeView.isForward()
                        },
                        eventName: "responseTypeChanged"
                      }));
                    } catch (err) {
                      logger.A.error(err);
                      return kefir_esm.never();
                    }
                  }
                  ;
                  const dispatchCancel = (element) => browser_asap_default()(() => element.dispatchEvent(new CustomEvent("inboxSDKsendCanceled", {
                    bubbles: false,
                    cancelable: false,
                    detail: null
                  })));
                  function getPresendingStream(_ref) {
                    let {
                      element,
                      sendButton,
                      sendAndArchive
                    } = _ref;
                    const domEventStream = kefir_esm.merge([(0, from_event_target_capture.A)(element, "keydown").filter((domEvent) => domEvent.ctrlKey || domEvent.metaKey).filter((domEvent) => domEvent.which === 13 || domEvent.keyCode === 13), (0, from_event_target_capture.A)(element, "keydown").filter((domEvent) => [13, 32].indexOf(domEvent.which) > -1 || [13, 32].indexOf(domEvent.keyCode) > -1).filter((domEvent) => sendButton && sendButton.contains(domEvent.target) || sendAndArchive && sendAndArchive.contains(domEvent.target)), (0, from_event_target_capture.A)(element, "click").filter((domEvent) => sendButton && sendButton.contains(domEvent.target) || sendAndArchive && sendAndArchive.contains(domEvent.target))]);
                    return domEventStream.filter((domEvent) => {
                      if (element.hasAttribute("data-inboxsdk-send-replaced")) {
                        domEvent.preventDefault();
                        domEvent.stopPropagation();
                        domEvent.stopImmediatePropagation();
                        return false;
                      }
                      return true;
                    }).map((domEvent) => ({
                      eventName: "presending",
                      data: {
                        cancel() {
                          domEvent.preventDefault();
                          domEvent.stopPropagation();
                          domEvent.stopImmediatePropagation();
                          dispatchCancel(element);
                        }
                      }
                    }));
                  }
                  var on_mouse_down_and_up = __webpack_require__3(8734);
                  ;
                  const getPrescheduledSendingStream_dispatchCancel = (element) => browser_asap_default()(() => element.dispatchEvent(new CustomEvent("inboxSDKscheduleSendMenuOpenCanceled", {
                    bubbles: false,
                    cancelable: false,
                    detail: null
                  })));
                  function getPrescheduledSendingStream(_ref) {
                    let {
                      element,
                      scheduleSendButton,
                      moreSendOptionsButton
                    } = _ref;
                    const domEventStream = kefir_esm.merge([(0, from_event_target_capture.A)(element, "keydown").filter((domEvent) => (domEvent.which === 13 || domEvent.keyCode === 13) && moreSendOptionsButton && moreSendOptionsButton.contains(domEvent.target)), (0, on_mouse_down_and_up.A)(scheduleSendButton)]);
                    return domEventStream.filter((domEvent) => {
                      if (element.hasAttribute("data-inboxsdk-send-replaced")) {
                        domEvent.preventDefault();
                        domEvent.stopPropagation();
                        domEvent.stopImmediatePropagation();
                        return false;
                      }
                      if (!domEvent.isTrusted) {
                        return false;
                      }
                      return true;
                    }).map((domEvent) => ({
                      eventName: "scheduleSendMenuOpening",
                      data: {
                        cancel() {
                          domEvent.preventDefault();
                          domEvent.stopPropagation();
                          domEvent.stopImmediatePropagation();
                          getPrescheduledSendingStream_dispatchCancel(element);
                        }
                      }
                    }));
                  }
                  ;
                  const getDiscardStream_dispatchCancel = (element) => browser_asap_default()(() => element.dispatchEvent(new CustomEvent("inboxSDKdiscardCanceled", {
                    bubbles: false,
                    cancelable: false,
                    detail: null
                  })));
                  function getDiscardStream(_ref) {
                    let {
                      element,
                      discardButton
                    } = _ref;
                    const domEventStream = kefir_esm.merge([(0, from_event_target_capture.A)(element, "keydown").filter((domEvent) => [13, 32].indexOf(domEvent.which) > -1 || [13, 32].indexOf(domEvent.keyCode) > -1).filter((domEvent) => discardButton && discardButton.contains(domEvent.target)), (0, from_event_target_capture.A)(element, "click").filter((domEvent) => discardButton && discardButton.contains(domEvent.target))]);
                    return domEventStream.map((domEvent) => ({
                      eventName: "discard",
                      data: {
                        cancel() {
                          domEvent.preventDefault();
                          domEvent.stopPropagation();
                          domEvent.stopImmediatePropagation();
                          getDiscardStream_dispatchCancel(element);
                        }
                      }
                    }));
                  }
                  ;
                  const updateAreaSet = /* @__PURE__ */ new WeakSet();
                  function updateInsertMoreAreaLeft(gmailComposeView, oldFormattingAreaOffsetLeft) {
                    if (updateAreaSet.has(gmailComposeView)) return;
                    updateAreaSet.add(gmailComposeView);
                    window.requestAnimationFrame(() => {
                      updateAreaSet.delete(gmailComposeView);
                      if (gmailComposeView.isDestroyed()) return;
                      var newFormattingAreaOffsetLeft = gmailComposeView._getFormattingAreaOffsetLeft();
                      var insertMoreAreaLeft = parseInt(gmailComposeView.getInsertMoreArea().style.left, 10);
                      var diff = newFormattingAreaOffsetLeft - oldFormattingAreaOffsetLeft;
                      gmailComposeView.getInsertMoreArea().style.left = insertMoreAreaLeft + diff + "px";
                    });
                  }
                  var safe_event_emitter = __webpack_require__3(2788);
                  ;
                  class LinkPopOver extends safe_event_emitter.A {
                    constructor(linkEl, popOverEl) {
                      super();
                      this._linkEl = linkEl;
                      this._popOverEl = popOverEl;
                    }
                    getLinkElement() {
                      return this._linkEl;
                    }
                    getPopOverContainerElement() {
                      return this._popOverEl;
                    }
                    getUrlInputElement() {
                      const inputs = this._popOverEl.querySelectorAll("input.qdOxv-K0-wGMbrd");
                      return inputs[inputs.length - 1];
                    }
                    getTextInputElement() {
                      const inputs = this._popOverEl.querySelectorAll("input.qdOxv-K0-wGMbrd");
                      if (inputs.length === 2) {
                        return inputs[0];
                      }
                    }
                    addSection() {
                      let containerEl = this._popOverEl.querySelector(".inboxsdk__linkPopOver_section_container");
                      if (!containerEl) {
                        containerEl = document.createElement("div");
                        containerEl.className = "inboxsdk__linkPopOver_section_container";
                        this._popOverEl.appendChild(containerEl);
                      }
                      return new LinkPopOverSection(this, containerEl);
                    }
                  }
                  class LinkPopOverSection {
                    _el = document.createElement("div");
                    constructor(linkPopOver, containerEl) {
                      this._el.className = "inboxsdk__linkPopOver_section";
                      containerEl.appendChild(this._el);
                      linkPopOver.on("close", () => {
                        this.remove();
                      });
                    }
                    getElement() {
                      return this._el;
                    }
                    remove() {
                      this._el.remove();
                    }
                  }
                  function getSelectedLink(gmailComposeView) {
                    const focusNode = document.getSelection()?.focusNode;
                    if (!focusNode) {
                      return null;
                    }
                    if (focusNode instanceof Text) {
                      if (focusNode.previousSibling instanceof HTMLAnchorElement && document.getSelection()?.anchorOffset === 0) {
                        return focusNode.previousSibling;
                      } else if (focusNode.nextSibling instanceof HTMLAnchorElement) {
                        return focusNode.nextSibling;
                      }
                    }
                    return findLinkParent(focusNode, gmailComposeView.getBodyElement());
                  }
                  function findLinkParent(node, composeBody) {
                    if (node instanceof HTMLAnchorElement) {
                      return node;
                    } else if (!node || node === composeBody) {
                      return null;
                    } else {
                      return findLinkParent(node.parentElement, composeBody);
                    }
                  }
                  function setupLinkPopOvers(gmailComposeView) {
                    return (0, toItemWithLifetimeStream.A)(gmailComposeView.getGmailDriver().getTagTree().getAllByTag("composeLinkPopOverContainer")).flatMap((_ref) => {
                      let {
                        el,
                        removalStream
                      } = _ref;
                      const popOverEl = el.getValue();
                      gmailComposeView.getGmailDriver().getLogger().eventSite("link_popOver", popOverEl);
                      let existingLinkPopOver = null;
                      removalStream.onValue(() => {
                        if (existingLinkPopOver) {
                          existingLinkPopOver.emit("close");
                          existingLinkPopOver = null;
                        }
                      });
                      return (0, make_mutation_observer_chunked_stream.A)(popOverEl, {
                        attributes: true,
                        attributeFilter: ["style"]
                      }).toProperty(() => null).takeUntilBy(removalStream).flatMap(() => {
                        if (existingLinkPopOver) {
                          existingLinkPopOver.emit("close");
                          existingLinkPopOver = null;
                        }
                        if (popOverEl.style.visibility === "visible") {
                          const linkEl = getSelectedLink(gmailComposeView);
                          if (linkEl && gmailComposeView.getElement().contains(linkEl)) {
                            const linkPopOver = new LinkPopOver(linkEl, popOverEl);
                            existingLinkPopOver = linkPopOver;
                            return kefir_esm.constant({
                              eventName: "linkPopOver",
                              data: linkPopOver
                            });
                          }
                        }
                        return kefir_esm.never();
                      });
                    });
                  }
                  ;
                  const leftMap = /* @__PURE__ */ new WeakMap();
                  function getFormattingAreaOffsetLeft(gmailComposeView, forceGet) {
                    if (!forceGet) {
                      const existingValue = leftMap.get(gmailComposeView);
                      if (existingValue != null) {
                        return existingValue;
                      }
                    }
                    const formattingArea = gmailComposeView.getFormattingArea();
                    if (!formattingArea) {
                      return 0;
                    }
                    const left2 = formattingArea.getBoundingClientRect().left;
                    leftMap.set(gmailComposeView, left2);
                    browser_asap_default()(() => leftMap.delete(gmailComposeView));
                    return left2;
                  }
                  ;
                  let hasLoggedError = false;
                  function overrideEditSubject(gmailDriver, gmailComposeView) {
                    if (!gmailComposeView.isReply()) return;
                    const menuItem = gmailComposeView.getElement().querySelector("div.J-M.jQjAxd.HX[role=menu] > div.SK.AX > [role=menuitem]:nth-last-child(2)");
                    if (!menuItem) {
                      if (!hasLoggedError) {
                        gmailDriver.getLogger().error(new Error("could not find edit subject item"), {
                          composeElement: (0, censorHTMLtree.A)(gmailComposeView.getElement())
                        });
                        hasLoggedError = true;
                      }
                      return;
                    }
                    menuItem.addEventListener("click", (e) => {
                      e.stopPropagation();
                    }, true);
                    menuItem.addEventListener("mouseup", (e) => {
                      e.stopPropagation();
                      _cloneContentToNewCompose(gmailDriver, gmailComposeView);
                    }, true);
                  }
                  function _cloneContentToNewCompose(gmailDriver, gmailComposeView) {
                    const toRecipients = gmailComposeView.getToRecipients();
                    const ccRecipients = gmailComposeView.getCcRecipients();
                    const bccRecipients = gmailComposeView.getBccRecipients();
                    const fromAddress = gmailComposeView.getFromContact();
                    const subject = gmailComposeView.getSubject();
                    _ensureExtraContentIsVisible(gmailComposeView);
                    const body = gmailComposeView.getHTMLContent();
                    gmailComposeView.discard();
                    gmailDriver.openNewComposeViewDriver().then((newComposeView) => {
                      if (toRecipients.length > 0) newComposeView.setToRecipients(toRecipients.map((c) => c.emailAddress));
                      if (ccRecipients.length > 0) newComposeView.setCcRecipients(ccRecipients.map((c) => c.emailAddress));
                      if (bccRecipients.length > 0) newComposeView.setBccRecipients(bccRecipients.map((c) => c.emailAddress));
                      newComposeView.setFromEmail(fromAddress.emailAddress);
                      newComposeView.setSubject(subject);
                      newComposeView.setBodyHTML(body);
                      setTimeout(function() {
                        newComposeView.getSubjectInput().select();
                      }, 1);
                    });
                  }
                  function _ensureExtraContentIsVisible(gmailComposeView) {
                    if (gmailComposeView.getBodyElement().querySelector(".gmail_extra")) return;
                    const quoteDotsElement = gmailComposeView.getElement().querySelector(".ajR");
                    if (quoteDotsElement) (0, simulate_mouse_event.jp)(quoteDotsElement);
                  }
                  ;
                  const detectClassicRecipientsArea = once_default()(function detectClassicRecipientsArea2() {
                    const styleSheetWithComposeRules = [...document.styleSheets].find((s) => {
                      try {
                        if (s.cssRules) {
                          return [...s.cssRules].find((rule) => rule instanceof CSSStyleRule && rule.selectorText === ".aoI" && rule.style.fontSize && rule.style.color);
                        }
                      } catch (e) {
                      }
                      return false;
                    });
                    if (styleSheetWithComposeRules) {
                      const hasOverflowYVisibleRule = [...styleSheetWithComposeRules.cssRules].some((rule) => rule instanceof CSSStyleRule && rule.selectorText === ".aoI" && rule.style.overflowY === "visible");
                      if (hasOverflowYVisibleRule) {
                        return;
                      }
                      const hasOverflowYAutoRule = [...styleSheetWithComposeRules.cssRules].some((rule) => rule instanceof CSSStyleRule && rule.selectorText === ".aaZ > .M9 > .aoI" && rule.style.overflowY === "auto");
                      if (hasOverflowYAutoRule) {
                        return;
                      }
                      document.body.classList.add("inboxsdk__classic_gmail_recipients_area");
                    }
                  });
                  ;
                  function getFromContact(driver, gmailComposeView) {
                    const nameInput = gmailComposeView.getElement().querySelector('input[name="from"]');
                    const emailAddress = nameInput ? nameInput.value : null;
                    if (!emailAddress) {
                      return driver.getUserContact();
                    }
                    const fromContactChoices = getFromContactChoices(driver, gmailComposeView);
                    const matchingContact = find_default()(fromContactChoices, (contact) => contact.emailAddress === emailAddress);
                    let name;
                    if (!matchingContact) {
                      name = emailAddress;
                      driver.getLogger().error(new Error("getFromContact failed to find name"), {
                        fromContactChoicesLength: fromContactChoices.length
                      });
                    } else {
                      name = matchingContact.name;
                    }
                    return {
                      emailAddress,
                      name
                    };
                  }
                  function getFromContactChoices(driver, gmailComposeView) {
                    const choiceEls = gmailComposeView.getElement().querySelectorAll("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX > div[value][role=menuitem]");
                    if (choiceEls.length == 0) {
                      return [driver.getUserContact()];
                    }
                    return Array.from(choiceEls).map((item) => ({
                      emailAddress: item.getAttribute("value") || "",
                      name: item.textContent.replace(/<.*/, "").trim()
                    }));
                  }
                  function setFromEmail(driver, gmailComposeView, email) {
                    const currentFromAddress = gmailComposeView.getFromContact().emailAddress;
                    if (currentFromAddress === email) {
                      return;
                    }
                    const choiceParent = gmailComposeView.getElement().querySelector("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX");
                    if (!choiceParent) {
                      if (driver.getUserContact().emailAddress != email) {
                        throw new Error("Chosen email from choice was not found");
                      }
                      return;
                    }
                    const chosenChoice = find_default()(choiceParent.children, (item) => item.getAttribute("value") == email);
                    if (!chosenChoice) {
                      throw new Error("Chosen email from choice was not found");
                    }
                    (0, simulate_mouse_event.jp)(chosenChoice);
                  }
                  ;
                  let hasReportedMissingBody = false;
                  class GmailComposeView {
                    #element;
                    #seenBodyElement;
                    #isInlineReplyForm;
                    #isFullscreen;
                    #isStandalone;
                    #driver;
                    #managedViewControllers;
                    #eventStream;
                    #isTriggeringADraftSavePending;
                    #buttonViewControllerTooltipMap;
                    #composeID;
                    #messageIDElement;
                    #messageId;
                    #initialMessageId;
                    #targetMessageID;
                    #draftIDpromise;
                    #threadID;
                    #stopper;
                    #lastSelectionRange;
                    #requestModifiers;
                    #isListeningToAjaxInterceptStream;
                    #formattingArea;
                    #closedProgrammatically = false;
                    #destroyed = false;
                    #removedFromDOMStopper;
                    #hasSetupLinkPopOvers = false;
                    #page;
                    constructor(element, xhrInterceptorStream, driver, options) {
                      this.#element = element;
                      this.#element.classList.add("inboxsdk__compose");
                      if (options.isInlineReplyForm) {
                        this.#element.classList.add("inboxsdk__compose_inlineReply");
                      }
                      this.#isInlineReplyForm = options.isInlineReplyForm;
                      this.#isStandalone = options.isStandalone;
                      this.#isFullscreen = false;
                      this.#messageId = null;
                      this.#draftIDpromise = null;
                      this.#driver = driver;
                      this.#stopper = kefir_stopper_js_default()();
                      this.#managedViewControllers = [];
                      this.#requestModifiers = {};
                      this.#isListeningToAjaxInterceptStream = false;
                      this.#eventStream = kefir_bus_default()();
                      this.#removedFromDOMStopper = kefir_stopper_js_default()();
                      this.#isTriggeringADraftSavePending = false;
                      this.#page = makePageParser(element, driver.getLogger());
                      this.tagTree = this.#page.tree;
                      const saveAndSendStream = xhrInterceptorStream.filter((event) => event.draftID === this.#getDraftIDfromForm()).map((event) => {
                        switch (event.type) {
                          case "emailSending": {
                            return {
                              eventName: "sending"
                            };
                          }
                          case "emailSent": {
                            const syncThreadID = event.threadID;
                            const syncMessageID = event.messageID;
                            if (event.oldMessageID) this.#messageId = event.oldMessageID;
                            if (event.oldThreadID) this.#threadID = event.oldThreadID;
                            driver.removeCachedGmailMessageIdForSyncMessageId(syncMessageID);
                            driver.removeCachedOldGmailThreadIdFromSyncThreadId(syncThreadID);
                            return {
                              eventName: "sent",
                              data: {
                                getThreadID: once_default()(async () => {
                                  if (event.oldThreadID) {
                                    return event.oldThreadID;
                                  }
                                  return await driver.getOldGmailThreadIdFromSyncThreadId(syncThreadID);
                                }),
                                getMessageID: once_default()(async () => {
                                  if (event.oldMessageID) {
                                    return event.oldMessageID;
                                  }
                                  return await driver.getGmailMessageIdForSyncMessageId(syncMessageID);
                                })
                              }
                            };
                          }
                          case "emailSendFailed": {
                            return {
                              eventName: "sendCanceled"
                            };
                          }
                          case "emailDraftReceived": {
                            this.#messageId = event.oldMessageID;
                            this.#threadID = event.oldThreadID;
                            return {
                              eventName: "draftSaved",
                              data: {
                                getThreadID() {
                                  return Promise.resolve(event.oldThreadID);
                                },
                                getMessageID() {
                                  return Promise.resolve(event.oldMessageID);
                                }
                              }
                            };
                          }
                          default: {
                            return null;
                          }
                        }
                      }).filter(isNotNil.A);
                      this.#eventStream.plug(kefir_esm.merge([saveAndSendStream, kefir_esm.fromEvents(this.#element, "buttonAdded").map(() => {
                        return {
                          eventName: "buttonAdded"
                        };
                      }), kefir_esm.fromEvents(this.#element, "resize").map(() => ({
                        eventName: "resize"
                      })), kefir_esm.fromEvents(this.#element, "composeFullscreenStateChanged").map(() => {
                        this.#updateComposeFullscreenState();
                        return {
                          eventName: "fullscreenChanged",
                          data: {
                            fullscreen: this.#isFullscreen
                          }
                        };
                      })]));
                      kefir_esm.fromEvents(this.#element, "closedProgrammatically").takeUntilBy(this.#stopper).onValue(() => {
                        this.#closedProgrammatically = true;
                      });
                      this.#buttonViewControllerTooltipMap = /* @__PURE__ */ new WeakMap();
                      const initialBodyElement = this.getMaybeBodyElement();
                      this.ready = constant_default()((initialBodyElement ? kefir_esm.constant(initialBodyElement) : (0, stream_wait_for.A)(
                        () => this.getMaybeBodyElement(),
                        3 * 60 * 1e3
                        //timeout
                      )).takeUntilBy(this.#stopper).map((bodyElement) => {
                        this.#seenBodyElement = bodyElement;
                        this.#composeID = this.#element.querySelector('input[name="composeid"]').value;
                        this.#messageIDElement = this.#element.querySelector('input[name="draft"]');
                        if (!this.#messageIDElement) {
                          driver.getLogger().error(new Error("Could not find compose message id field"));
                          this.#messageIDElement = document.createElement("input");
                        }
                        this.#setupIDs();
                        this.#setupStreams();
                        this.#setupConsistencyCheckers();
                        this.#updateComposeFullscreenState();
                        {
                          this.getEventStream().filter((_ref) => {
                            let {
                              eventName
                            } = _ref;
                            return eventName === "presending";
                          }).takeUntilBy(this.#stopper).onValue(() => {
                            (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node.getAttribute && node.getAttribute("role") === "alertdialog").takeUntilBy(kefir_esm.merge([this.getEventStream().filter((_ref2) => {
                              let {
                                eventName
                              } = _ref2;
                              return eventName === "sendCanceled" || eventName === "sending";
                            }), kefir_esm.later(15, void 0)])).onValue(() => {
                              this.#eventStream.emit({
                                eventName: "sendCanceled"
                              });
                            });
                          });
                        }
                        return this;
                      }).toProperty());
                      this.ready().onError((errorObject) => {
                        driver.getLogger().error(errorObject, {
                          hasForm: !!this.getElement().querySelector("form"),
                          class: this.getElement().getAttribute("class")
                        });
                      });
                      kefir_esm.merge([
                        // if we get a presending then we let the other stream wait for
                        // sent. But if we get a sendCanceled, then a regular destroy can
                        // pass through
                        this.#removedFromDOMStopper.filterBy(this.#eventStream.filter((_ref3) => {
                          let {
                            eventName
                          } = _ref3;
                          return eventName === "presending" || eventName === "sendCanceled";
                        }).map((_ref4) => {
                          let {
                            eventName
                          } = _ref4;
                          return eventName === "sendCanceled";
                        }).toProperty(() => true)),
                        kefir_esm.combine([this.#removedFromDOMStopper, this.#eventStream.filter((_ref5) => {
                          let {
                            eventName
                          } = _ref5;
                          return eventName === "sent";
                        })])
                      ]).take(1).flatMap(() => (0, delay_asap.A)(null)).onValue(() => this.#destroy());
                      detectClassicRecipientsArea();
                    }
                    destroy() {
                      this.#removedFromDOMStopper.destroy();
                      this.#page.dump();
                    }
                    #destroy() {
                      this.#eventStream.emit({
                        eventName: "destroy",
                        data: {
                          messageID: this.getMessageID(),
                          closedByInboxSDK: this.#closedProgrammatically
                        }
                      });
                      this.#eventStream.end();
                      this.#managedViewControllers.forEach((vc) => {
                        vc.destroy();
                      });
                      this.#requestModifiers = {};
                      this.#managedViewControllers.length = 0;
                      this.#stopper.destroy();
                      this.#destroyed = true;
                    }
                    getStopper() {
                      return this.#stopper;
                    }
                    getEventStream() {
                      return this.#eventStream;
                    }
                    getGmailDriver() {
                      return this.#driver;
                    }
                    isDestroyed() {
                      return this.#destroyed;
                    }
                    #getSubjectChangesStream() {
                      const subjectElement = this.getSubjectInput();
                      return kefir_esm.fromEvents(subjectElement, "input").map(() => {
                        return {
                          eventName: "subjectChanged"
                        };
                      });
                    }
                    #setupStreams() {
                      this.#eventStream.plug(getAddressChangesStream(this));
                      this.#eventStream.plug(this.#getSubjectChangesStream());
                      this.#eventStream.plug(get_body_changes_stream(this));
                      this.#eventStream.plug(get_response_type_changes_stream(this));
                      this.#eventStream.plug(getPresendingStream({
                        element: this.getElement(),
                        sendButton: this.getSendButton(),
                        sendAndArchive: this.getSendAndArchiveButton()
                      }));
                      this.#eventStream.plug(getPrescheduledSendingStream({
                        element: this.getElement(),
                        scheduleSendButton: this.getScheduleSendButton(),
                        moreSendOptionsButton: this.getMoreSendOptionsButton()
                      }));
                      let discardButton;
                      try {
                        discardButton = this.getDiscardButton();
                      } catch (err) {
                        this.#driver.getLogger().errorSite(new Error("Failed to find discard button"), {
                          html: (0, censorHTMLstring.A)(this.#element.outerHTML)
                        });
                      }
                      if (discardButton) {
                        this.#eventStream.plug(getDiscardStream({
                          element: this.getElement(),
                          discardButton
                        }));
                      }
                      this.#eventStream.plug(kefir_esm.fromEvents(this.getElement(), "inboxSDKsendCanceled").map(() => ({
                        eventName: "sendCanceled"
                      })));
                      this.#eventStream.plug(kefir_esm.fromEvents(this.getElement(), "inboxSDKscheduleSendMenuOpenCanceled").map(() => ({
                        eventName: "scheduleSendMenuOpenCanceled"
                      })));
                      this.#eventStream.plug(kefir_esm.fromEvents(this.getElement(), "inboxSDKdiscardCanceled").map(() => ({
                        eventName: "discardCanceled"
                      })));
                      this.#eventStream.plug(kefir_esm.later(10, void 0).flatMap(() => (0, get_minimized_stream.A)(this)).changes().map((minimized) => ({
                        eventName: minimized ? "minimized" : "restored"
                      })));
                    }
                    #setupConsistencyCheckers() {
                      try {
                        (0, handle_compose_link_chips.A)(this);
                        monitor_selection_range(this);
                        (0, manage_button_grouping.A)(this);
                        sizeFixer(this.#driver, this);
                      } catch (err) {
                        this.#driver.getLogger().error(err);
                      }
                    }
                    #setupIDs() {
                      const syncTargetMessageID = this.#getTargetMessageID();
                      if (syncTargetMessageID) {
                        this.#driver.getGmailMessageIdForSyncMessageId(syncTargetMessageID).then((gmailMessageId) => this.#targetMessageID = gmailMessageId);
                      }
                      const syncMessageId = this.#getMessageIDfromForm();
                      if (syncMessageId) {
                        this.#driver.getGmailMessageIdForSyncDraftId(syncMessageId).then((gmailMessageId) => {
                          this.#initialMessageId = gmailMessageId;
                          this.#messageId = gmailMessageId;
                        }).catch(() => {
                        });
                        this.#driver.reportRecentSyncDraftId(syncMessageId);
                        this.#stopper.onValue(() => {
                          this.#driver.reportDraftClosed(syncMessageId);
                        });
                      } else {
                        this.#driver.getLogger().error(new Error("Draft is missing sync draft id"));
                      }
                      const legacyThreadIdElement = this.#element.querySelector('input[name="lts"]');
                      if (legacyThreadIdElement && typeof legacyThreadIdElement.value === "string") this.#threadID = legacyThreadIdElement.value;
                    }
                    #updateComposeFullscreenState() {
                      if (this.#isInlineReplyForm) {
                        this.#isFullscreen = false;
                      } else {
                        if (this.#isStandalone) {
                          this.#isFullscreen = true;
                        } else {
                          const fullScreenContainer = gmail_element_getter.A.getFullscreenComposeWindowContainer();
                          if (!fullScreenContainer) {
                            this.#isFullscreen = false;
                          } else {
                            this.#isFullscreen = fullScreenContainer.contains(this.#element);
                          }
                        }
                      }
                    }
                    focus() {
                      gmail_compose_view_focus(this);
                    }
                    insertBodyTextAtCursor(text) {
                      return this.insertBodyHTMLAtCursor(escape_default()(text).replace(/\n/g, "<br>"));
                    }
                    insertBodyHTMLAtCursor(html) {
                      var retVal = (0, insert_html_at_cursor.A)(this.getBodyElement(), html, this.getLastSelectionRange());
                      this.#triggerDraftSave();
                      simulateKey(this.getBodyElement(), 13, 13);
                      return retVal;
                    }
                    insertLinkIntoBody(text, href) {
                      var retVal = insertLinkIntoBody(this, text, href);
                      this.#triggerDraftSave();
                      return retVal;
                    }
                    insertLinkChipIntoBody(options) {
                      var retVal = (0, insert_link_chip_into_body.A)(this, options);
                      this.#triggerDraftSave();
                      return retVal;
                    }
                    setSubject(text) {
                      this.#element.querySelector("input[name=subjectbox]").value = text;
                      this.#triggerDraftSave();
                    }
                    setBodyHTML(html) {
                      this.getBodyElement().innerHTML = html;
                      this.#triggerDraftSave();
                    }
                    setBodyText(text) {
                      this.getBodyElement().textContent = text;
                      this.#triggerDraftSave();
                    }
                    setToRecipients(emails) {
                      setRecipients(this, "to", emails);
                      this.#triggerDraftSave();
                    }
                    setCcRecipients(emails) {
                      setRecipients(this, "cc", emails);
                      this.#triggerDraftSave();
                    }
                    setBccRecipients(emails) {
                      setRecipients(this, "bcc", emails);
                      this.#triggerDraftSave();
                    }
                    addRecipientRow(options) {
                      return addRecipientRow(this, options);
                    }
                    forceRecipientRowsOpen() {
                      this.#element.classList.add("inboxsdk__compose_forceRecipientsOpen");
                      return () => {
                        this.#element.classList.remove("inboxsdk__compose_forceRecipientsOpen");
                      };
                    }
                    hideNativeRecipientRows() {
                      const nativeRecipientRows = getRecipientRowElements(this.#element);
                      nativeRecipientRows.forEach((row) => {
                        row.classList.add("inboxsdk__compose_forceRecipientRowHidden");
                      });
                      return () => {
                        nativeRecipientRows.forEach((row) => {
                          row.classList.remove("inboxsdk__compose_forceRecipientRowHidden");
                        });
                      };
                    }
                    hideRecipientArea() {
                      this.#element.classList.add("inboxsdk__compose_hideRecipientArea");
                      return () => {
                        this.#element.classList.remove("inboxsdk__compose_hideRecipientArea");
                      };
                    }
                    getFromContact() {
                      return getFromContact(this.#driver, this);
                    }
                    getFromContactChoices() {
                      return getFromContactChoices(this.#driver, this);
                    }
                    setFromEmail(email) {
                      setFromEmail(this.#driver, this, email);
                    }
                    addButton(buttonDescriptor, groupOrderHint, extraOnClickOptions, bus) {
                      addButton(this, buttonDescriptor, groupOrderHint, extraOnClickOptions, bus);
                    }
                    addTooltipToButton(buttonViewController, buttonDescriptor, tooltipDescriptor) {
                      var tooltip = addTooltipToButton(this, buttonViewController, buttonDescriptor, tooltipDescriptor);
                      this.#buttonViewControllerTooltipMap.set(buttonViewController, tooltip);
                    }
                    closeButtonTooltip(buttonViewController) {
                      if (!this.#buttonViewControllerTooltipMap) {
                        return;
                      }
                      var tooltip = this.#buttonViewControllerTooltipMap.get(buttonViewController);
                      if (tooltip) {
                        tooltip.destroy();
                        this.#buttonViewControllerTooltipMap.delete(buttonViewController);
                      }
                    }
                    addComposeNotice() {
                      let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      const composeNotice = addComposeNotice(this, options);
                      this.#element.dispatchEvent(new CustomEvent("resize", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      kefir_esm.fromEvents(composeNotice, "destroy").flatMap(delay_asap.A).takeUntilBy(this.#stopper).onValue(() => {
                        this.#element.dispatchEvent(new CustomEvent("resize", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      });
                      return composeNotice;
                    }
                    addStatusBar() {
                      let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      const statusBar = (0, add_status_bar.A)(this, options);
                      this.#element.dispatchEvent(new CustomEvent("resize", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      kefir_esm.fromEvents(statusBar, "destroy").flatMap(delay_asap.A).takeUntilBy(this.#stopper).onValue(() => {
                        this.#element.dispatchEvent(new CustomEvent("resize", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      });
                      return statusBar;
                    }
                    hideNativeStatusBar() {
                      const statusArea = this.getStatusArea();
                      const nativeStatusBar = (0, querySelectorOrFail.A)(statusArea, "table");
                      const formattingToolbar = this.getFormattingToolbar();
                      const isFormattingToolbarOpen = formattingToolbar && formattingToolbar.style.display !== "none";
                      nativeStatusBar.style.display = "none";
                      if (formattingToolbar && isFormattingToolbarOpen) {
                        formattingToolbar.style.display = "none";
                      }
                      return () => {
                        nativeStatusBar.style.display = "";
                        if (formattingToolbar && isFormattingToolbarOpen) {
                          formattingToolbar.style.display = "";
                        }
                      };
                    }
                    replaceSendButton(el) {
                      const sendButton = this.getSendButtonGroup();
                      const sendAndArchive = this.getSendAndArchiveButton();
                      sendButton.style.display = "none";
                      const sendAndArchiveParent = sendAndArchive && sendAndArchive.parentElement;
                      if (sendAndArchiveParent instanceof HTMLElement) {
                        sendAndArchiveParent.style.display = "none";
                      }
                      const container = document.createElement("div");
                      container.classList.add("inboxsdk__compose_customSendContainer");
                      container.appendChild(el);
                      sendButton.insertAdjacentElement("afterend", container);
                      this.#element.setAttribute("data-inboxsdk-send-replaced", "");
                      const removalStopper = kefir_stopper_js_default()();
                      kefir_esm.fromEvents(this.getBodyElement(), "keydown").takeUntilBy(this.#stopper).takeUntilBy(removalStopper).filter((domEvent) => (domEvent.which === 9 || domEvent.keyCode === 9) && !domEvent.shiftKey).onValue((domEvent) => {
                        const statusArea = this.getStatusArea();
                        const focusableEls = statusArea.querySelectorAll("[tabindex]");
                        if (focusableEls.length === 0) return;
                        const firstVisibleEl = Array.from(focusableEls).find((el2) => el2.offsetParent !== null);
                        if (!firstVisibleEl) return;
                        domEvent.preventDefault();
                        domEvent.stopPropagation();
                        domEvent.stopImmediatePropagation();
                        firstVisibleEl.focus();
                      });
                      return () => {
                        removalStopper.destroy();
                        container.remove();
                        this.#element.removeAttribute("data-inboxsdk-send-replaced");
                        sendButton.style.display = "";
                        if (sendAndArchiveParent instanceof HTMLElement) {
                          sendAndArchiveParent.style.display = "";
                        }
                      };
                    }
                    hideDiscardButton() {
                      const discardBtn = this.getDiscardButton();
                      discardBtn.style.display = "none";
                      return () => {
                        discardBtn.style.display = "";
                      };
                    }
                    ensureFormattingToolbarIsHidden() {
                      const formattingToggleButton = this.getFormattingToolbarToggleButton();
                      const formattingToolbar = this.getFormattingToolbar();
                      if (formattingToggleButton && formattingToolbar && formattingToolbar.style.display === "") {
                        (0, simulate_mouse_event.jp)(formattingToggleButton);
                      }
                    }
                    close() {
                      if (this.isInlineReplyForm()) {
                        console.warn("Trying to close an inline reply which doesn't work.");
                        return;
                      }
                      this.#element.dispatchEvent(new CustomEvent("closedProgrammatically", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      if (this.#isFullscreen) {
                        this.#eventStream.filter((_ref6) => {
                          let {
                            eventName
                          } = _ref6;
                          return eventName === "fullscreenChanged";
                        }).onValue(() => (0, simulate_mouse_event.jp)(this.getCloseButton()));
                        (0, simulate_mouse_event.jp)(this.getMoleSwitchButton());
                      } else {
                        (0, simulate_mouse_event.jp)(this.getCloseButton());
                      }
                    }
                    send(_ref7) {
                      let {
                        sendAndArchive
                      } = _ref7;
                      browser_asap_default()(() => {
                        const sendAndArchiveButton = this.getSendAndArchiveButton();
                        if (sendAndArchive && sendAndArchiveButton) {
                          (0, simulate_mouse_event.jp)(sendAndArchiveButton);
                        } else {
                          (0, simulate_mouse_event.jp)(this.getSendButton());
                        }
                      });
                    }
                    openScheduleSendMenu() {
                      browser_asap_default()(() => {
                        (0, simulate_mouse_event.jp)(this.getScheduleSendButton());
                      });
                    }
                    discard() {
                      (0, simulate_mouse_event.jp)(this.getDiscardButton());
                    }
                    popOut() {
                      if (!this.isInlineReplyForm()) {
                        throw new Error("Can only pop out inline reply compose views");
                      }
                      const popOutBtn = (0, querySelectorOrFail.A)(this.#element, ".M9 > [role=menu]:first-child > .SK > [role=menuitem]:last-child");
                      (0, simulate_mouse_event.jp)(popOutBtn);
                    }
                    overrideEditSubject() {
                      overrideEditSubject(this.#driver, this);
                    }
                    #hideDropzones() {
                      setCss("compose dropzone hider", "body > .aC7 .aC9 {visibility: hidden;}");
                    }
                    #reenableDropzones() {
                      setCss("compose dropzone hider", null);
                    }
                    #dropzonesVisible() {
                      return find_default()(document.querySelectorAll("body > .aC7:not(.aWP)"), isElementVisible.A) != null;
                    }
                    #findDropzoneForThisCompose(inline) {
                      const rect = this.#element.getBoundingClientRect();
                      const dropzoneSelector = inline ? "body > .aC7:not(.aWP)" : "body > .aC7.aWP";
                      const el = [...document.querySelectorAll(dropzoneSelector)].find((dropzone) => {
                        if (!(0, isElementVisible.A)(dropzone)) {
                          return false;
                        }
                        const top = parseInt(dropzone.style.top, 10);
                        const bottom = top + parseInt(dropzone.style.height, 10);
                        const left2 = parseInt(dropzone.style.left, 10);
                        const right2 = left2 + parseInt(dropzone.style.width, 10);
                        return top >= rect.top && left2 >= rect.left && right2 <= rect.right && (this.isFullscreen() || bottom <= rect.bottom);
                      });
                      if (!el) {
                        throw new Error("Failed to find dropzone");
                      }
                      return el;
                    }
                    async #attachFiles(files, inline) {
                      this.#hideDropzones();
                      const endDrag = once_default()(() => simulateDragEnd(this.#element, files));
                      try {
                        let firstLoop = true;
                        for (const partitionedFiles of transducers_default().partition(files, 3)) {
                          if (firstLoop) {
                            firstLoop = false;
                          } else {
                            await (0, pdelay_js.A)(500);
                          }
                          simulateDragOver(this.#element, partitionedFiles);
                          await (0, wait_for.A)(() => this.#dropzonesVisible(), 20 * 1e3);
                          const dropzone = this.#findDropzoneForThisCompose(inline);
                          simulateDrop(dropzone, partitionedFiles);
                          endDrag();
                          await (0, wait_for.A)(() => !this.#dropzonesVisible(), 20 * 1e3);
                        }
                      } catch (err) {
                        this.#driver.getLogger().error(err);
                      } finally {
                        endDrag();
                        this.#reenableDropzones();
                      }
                    }
                    attachFiles(files) {
                      return this.#attachFiles(files, false);
                    }
                    attachInlineFiles(files) {
                      return this.#attachFiles(files, true);
                    }
                    isForward() {
                      return Boolean(this.#element.querySelector(".Un.J-JN-M-I .mI"));
                    }
                    isReply() {
                      return this.#isInlineReplyForm || !!this.#element.querySelector(".HQ");
                    }
                    isInlineReplyForm() {
                      return this.#isInlineReplyForm;
                    }
                    getBodyElement() {
                      const el = this.getMaybeBodyElement();
                      if (!el) throw new Error("Could not find body element");
                      return el;
                    }
                    getMaybeBodyElement() {
                      return this.#element.querySelector(".Ap [g_editable=true]");
                    }
                    getTopFormElement() {
                      return (0, querySelectorOrFail.A)(this.#element, "td > form");
                    }
                    getHTMLContent() {
                      return this.getBodyElement().innerHTML;
                    }
                    getTextContent() {
                      return this.getBodyElement().textContent;
                    }
                    getSelectedBodyHTML() {
                      return getSelectedHTMLInElement(this.getBodyElement(), this.getLastSelectionRange());
                    }
                    getSelectedBodyText() {
                      return getSelectedTextInElement(this.getBodyElement(), this.getLastSelectionRange());
                    }
                    getSubject() {
                      return this.getSubjectInput().value;
                    }
                    getSubjectInput() {
                      return this.#element.querySelector("input[name=subjectbox]");
                    }
                    getMetadataFormElement() {
                      const container = this.getBodyElement().closest(".aoP");
                      if (!container) {
                        throw new Error("Could not find compose container");
                      }
                      return (0, querySelectorOrFail.A)(container, "form.bAs");
                    }
                    getToRecipients() {
                      return getRecipients(this, "to");
                    }
                    getCcRecipients() {
                      return getRecipients(this, "cc");
                    }
                    getBccRecipients() {
                      return getRecipients(this, "bcc");
                    }
                    getAdditionalActionToolbar() {
                      return __webpack_require__3(9e3).A(this);
                    }
                    updateInsertMoreAreaLeft(oldFormattingAreaOffsetLeft) {
                      updateInsertMoreAreaLeft(this, oldFormattingAreaOffsetLeft);
                    }
                    /** @internal non-public method used outside this class */
                    _getFormattingAreaOffsetLeft() {
                      return getFormattingAreaOffsetLeft(this);
                    }
                    getFormattingArea() {
                      let formattingArea = this.#formattingArea;
                      if (!formattingArea) {
                        formattingArea = this.#formattingArea = this.#element.querySelector(".oc");
                      }
                      return formattingArea;
                    }
                    getFormattingToolbar() {
                      return this.#element.querySelector(".aX");
                    }
                    getFormattingToolbarArrow() {
                      const el = this.getFormattingToolbar();
                      if (!el) throw new Error("Failed to find formatting toolbar");
                      return (0, querySelectorOrFail.A)(el, ".aA4");
                    }
                    getFormattingToolbarToggleButton() {
                      const innerElement = (0, querySelectorOrFail.A)(this.#element, "[role=button] .dv");
                      const btn = innerElement.closest("[role=button]");
                      if (!btn) throw new Error("failed to find button");
                      return btn;
                    }
                    getStatusBarPrependContainer() {
                      return this.#element.querySelector(".inboxsdk__compose_statusBarPrependContainer");
                    }
                    getScrollBody() {
                      var scrollBody = this.#element.querySelector("table .GP");
                      if (!scrollBody) {
                        throw new Error("Failed to find scroll body");
                      }
                      return scrollBody;
                    }
                    getStatusArea() {
                      const statusArea = this.#element.querySelector(".aDg .aDj > .aDh");
                      if (!statusArea) throw new Error("Failed to find status area");
                      return statusArea;
                    }
                    getInsertMoreArea() {
                      return (0, querySelectorOrFail.A)(this.#element, ".eq");
                    }
                    getInsertLinkButton() {
                      return (0, querySelectorOrFail.A)(this.#element, ".e5.aaA.aMZ");
                    }
                    getSendButton() {
                      return (0, querySelectorOrFail.A)(this.#element, ".IZ .Up div > div[role=button]:not(.Uo):not([aria-haspopup=true]):not([class^=inboxsdk_])");
                    }
                    getScheduleSendButton() {
                      return (0, querySelectorOrFail.A)(this.#element, '[selector="scheduledSend"]');
                    }
                    getMoreSendOptionsButton() {
                      return (0, querySelectorOrFail.A)(this.#element, ".hG");
                    }
                    // When schedule send is available, this returns the element that contains both buttons.
                    getSendButtonGroup() {
                      const scheduleSend = this.#element.querySelector(".IZ .Up div > [role=button][aria-haspopup=true]:not([class^=inboxsdk_])");
                      if (scheduleSend) {
                        return scheduleSend.parentElement;
                      }
                      return this.getSendButton();
                    }
                    getSendAndArchiveButton() {
                      if (!this.isReply()) {
                        return null;
                      }
                      const sendAndArchiveButton = this.#element.querySelector(".IZ .Up div > div[role=button].Uo:not([aria-haspopup=true]):not([class^=inboxsdk_])");
                      if (sendAndArchiveButton) {
                        return sendAndArchiveButton;
                      }
                      const sendButton = this.getSendButton();
                      const parent = sendButton.parentElement;
                      if (!(parent instanceof HTMLElement)) throw new Error("should not happen");
                      if (parent.childElementCount <= 1) {
                        this.#driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find, childElementCount <= 1");
                        return null;
                      }
                      const firstNotSendElement = parent.children[0] !== sendButton ? parent.children[0] : parent.children[1];
                      const result = !firstNotSendElement ? null : firstNotSendElement.querySelector("[role=button]");
                      if (result) {
                        this.#driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - found");
                      } else {
                        this.#driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find");
                      }
                      return result;
                    }
                    getCloseButton() {
                      return this.#element.querySelectorAll(".Hm > img")[2];
                    }
                    getMoleSwitchButton() {
                      return this.#element.querySelectorAll(".Hm > img")[1];
                    }
                    getBottomBarTable() {
                      return (0, querySelectorOrFail.A)(this.#element, ".aoP .aDh > table");
                    }
                    getBottomToolbarContainer() {
                      return (0, querySelectorOrFail.A)(this.#element, ".aoP .aDj");
                    }
                    getDiscardButton() {
                      return (0, querySelectorOrFail.A)(this.#element, ".gU .oh");
                    }
                    getComposeID() {
                      return this.#composeID;
                    }
                    getInitialMessageID() {
                      return this.#initialMessageId;
                    }
                    /**
                     * gets the draft ID
                     * from the input that used to hold the hex message ID. Still does not
                     * populate until first save.
                     */
                    #getDraftIDfromForm() {
                      const value = this.#messageIDElement && this.#messageIDElement.value || null;
                      if (typeof value === "string" && value !== "undefined" && value !== "null") {
                        return value.replace("#", "").replace("msg-a:", "");
                      }
                      return null;
                    }
                    #getMessageIDfromForm() {
                      const value = this.#messageIDElement && this.#messageIDElement.value || null;
                      if (typeof value === "string" && value !== "undefined" && value !== "null") {
                        return value.replace("#", "");
                      }
                      return null;
                    }
                    getMessageID() {
                      return this.#messageId;
                    }
                    getTargetMessageID() {
                      return this.#targetMessageID;
                    }
                    getThreadID() {
                      return this.#threadID;
                    }
                    async getCurrentDraftID() {
                      const draftID = this.#getDraftIDfromForm();
                      if (this.#messageId) {
                        return draftID;
                      } else {
                        const syncMessageId = this.#getMessageIDfromForm();
                        if (syncMessageId) {
                          try {
                            await this.#driver.getGmailMessageIdForSyncDraftId(syncMessageId);
                          } catch (e) {
                            return null;
                          }
                          return draftID;
                        }
                      }
                    }
                    getDraftID() {
                      let draftIDpromise = this.#draftIDpromise;
                      if (!draftIDpromise) {
                        draftIDpromise = this.#draftIDpromise = this.#getDraftIDimplementation();
                      }
                      return draftIDpromise;
                    }
                    async #getDraftIDimplementation() {
                      const draftID = this.#getDraftIDfromForm();
                      if (this.#messageId) {
                        return draftID;
                      } else {
                        const syncMessageId = this.#getMessageIDfromForm();
                        if (syncMessageId) {
                          try {
                            const gmailMessageId = await this.#driver.getGmailMessageIdForSyncDraftId(syncMessageId);
                          } catch (e) {
                            await this.#eventStream.filter((_ref8) => {
                              let {
                                eventName
                              } = _ref8;
                              return eventName === "draftSaved";
                            }).beforeEnd(() => null).map(() => this.#getDraftIDfromForm()).take(1).toPromise();
                          }
                          return draftID;
                        }
                      }
                    }
                    addManagedViewController(viewController) {
                      this.#managedViewControllers.push(viewController);
                    }
                    ensureGroupingIsOpen(type) {
                      ensureGroupingIsOpen(this.#element, type);
                    }
                    ensureAppButtonToolbarsAreClosed() {
                      ensureAppButtonToolbarsAreClosed(this.#element);
                    }
                    isMinimized() {
                      const element = this.getElement();
                      const bodyElement = this.getMaybeBodyElement();
                      const bodyContainer = find_default()(element.children, (child) => child.contains(bodyElement));
                      if (!bodyContainer) {
                        if (!hasReportedMissingBody) {
                          hasReportedMissingBody = true;
                          this.#driver.getLogger().error(new Error("isMinimized failed to find bodyContainer"), {
                            bodyElement: !!bodyElement,
                            hasMessageIDElement: !!this.#messageIDElement,
                            ended: this.#eventStream.ended,
                            bodyElStillInCompose: this.#element.contains(this.#seenBodyElement),
                            seenBodyElHtml: (0, censorHTMLstring.A)(this.#seenBodyElement.outerHTML),
                            composeHtml: (0, censorHTMLstring.A)(element.outerHTML)
                          });
                        }
                        return false;
                      }
                      return bodyContainer.style.display !== "";
                    }
                    setMinimized(minimized) {
                      if (minimized !== this.isMinimized()) {
                        if (this.#isInlineReplyForm) throw new Error("Not implemented for inline compose views");
                        const minimizeButton = (0, querySelectorOrFail.A)(this.#element, ".Hm > img");
                        (0, simulate_mouse_event.jp)(minimizeButton);
                      }
                    }
                    setFullscreen(fullscreen2) {
                      if (fullscreen2 !== this.isFullscreen()) {
                        if (this.#isInlineReplyForm) throw new Error("Not implemented for inline compose views");
                        const fullscreenButton = (0, querySelectorOrFail.A)(this.#element, ".Hm > img:nth-of-type(2)");
                        (0, simulate_mouse_event.jp)(fullscreenButton);
                      }
                    }
                    setTitleBarColor(color) {
                      const buttonParent = (0, querySelectorOrFail.A)(this.#element, ".nH.Hy.aXJ table.cf.Ht td.Hm");
                      const elementsToModify = [(0, querySelectorOrFail.A)(this.#element, ".nH.Hy.aXJ .pi > .l.o"), (0, querySelectorOrFail.A)(this.#element, ".nH.Hy.aXJ .l.m"), (0, querySelectorOrFail.A)(this.#element, ".nH.Hy.aXJ .l.m > .l.n")];
                      buttonParent.classList.add("inboxsdk__compose_customTitleBarColor");
                      elementsToModify.forEach((el) => {
                        el.style.backgroundColor = color;
                      });
                      return () => {
                        buttonParent.classList.remove("inboxsdk__compose_customTitleBarColor");
                        elementsToModify.forEach((el) => {
                          el.style.backgroundColor = "";
                        });
                      };
                    }
                    setTitleBarText(text) {
                      if (this.isInlineReplyForm()) {
                        throw new Error("setTitleBarText() is not supported on inline compose views");
                      }
                      const titleBarTable = (0, querySelectorOrFail.A)(this.#element, ".nH.Hy.aXJ table.cf.Ht");
                      if (titleBarTable.classList.contains("inboxsdk__compose_hasCustomTitleBarText")) {
                        throw new Error("Custom title bar text is already registered for this compose view");
                      }
                      const titleTextParent = (0, querySelectorOrFail.A)(titleBarTable, "div.Hp").parentElement;
                      if (!(titleTextParent instanceof HTMLElement)) {
                        throw new Error("Could not locate title bar text parent");
                      }
                      titleBarTable.classList.add("inboxsdk__compose_hasCustomTitleBarText");
                      titleTextParent.classList.add("inboxsdk__compose_nativeTitleBarText");
                      const customTitleText = document.createElement("td");
                      customTitleText.classList.add("inboxsdk__compose_customTitleBarText");
                      customTitleText.innerHTML = js_default()`
      <div class="Hp">
        <h2 class="a3E">
          <div class="aYF">${text}</div>
        </h2>
      </div>
    `;
                      titleTextParent.insertAdjacentElement("afterend", customTitleText);
                      return () => {
                        customTitleText.remove();
                        titleBarTable.classList.remove("inboxsdk__compose_hasCustomTitleBarText");
                        titleTextParent.classList.remove("inboxsdk__compose_nativeTitleBarText");
                      };
                    }
                    #triggerDraftSave() {
                      if (this.#isTriggeringADraftSavePending) {
                        return;
                      } else {
                        this.#isTriggeringADraftSavePending = true;
                        kefir_esm.later(0, void 0).takeUntilBy(this.#stopper).onValue(() => {
                          this.#isTriggeringADraftSavePending = false;
                          const body = this.getMaybeBodyElement();
                          if (body) {
                            const unsilence = this.#driver.getPageCommunicator().silenceGmailErrorsForAMoment();
                            try {
                              simulateKey(body, 190, 0);
                            } finally {
                              unsilence();
                            }
                          }
                        });
                      }
                    }
                    // If this compose is a reply, then this gets the message ID of the message
                    // we're replying to.
                    #getTargetMessageID() {
                      const input = this.#element.querySelector('input[name="rm"]');
                      return input && typeof input.value === "string" && input.value != "undefined" ? input.value.replace("#", "") : null;
                    }
                    getElement() {
                      return this.#element;
                    }
                    isFullscreen() {
                      return this.#isFullscreen;
                    }
                    getLastSelectionRange() {
                      const range = this.#lastSelectionRange;
                      if (range && !this.getBodyElement().contains(range.commonAncestorContainer)) {
                        this.#lastSelectionRange = void 0;
                      }
                      return this.#lastSelectionRange;
                    }
                    setLastSelectionRange(lastSelectionRange) {
                      this.#lastSelectionRange = lastSelectionRange;
                    }
                    registerRequestModifier(modifier) {
                      const keyId = this.#getDraftIDfromForm();
                      if (!keyId) throw new Error("keyId should be set here");
                      const modifierId = this.#driver.getPageCommunicator().registerComposeRequestModifier(keyId, this.#driver.getAppId());
                      this.#requestModifiers[modifierId] = modifier;
                      this.#startListeningForModificationRequests();
                      this.#stopper.onValue(() => {
                        this.#driver.getPageCommunicator().unregisterComposeRequestModifier(keyId, modifierId);
                      });
                    }
                    #startListeningForModificationRequests() {
                      if (this.#isListeningToAjaxInterceptStream) {
                        return;
                      }
                      const keyId = this.#getDraftIDfromForm();
                      if (!keyId) throw new Error("keyId should be set here");
                      this.#driver.getPageCommunicator().ajaxInterceptStream.filter((_ref9) => {
                        let {
                          type,
                          composeid,
                          draftID,
                          modifierId
                        } = _ref9;
                        return type === "inboxSDKmodifyComposeRequest" && (composeid === keyId || keyId === draftID) && Boolean(this.#requestModifiers[modifierId]);
                      }).takeUntilBy(this.#stopper).onValue((_ref10) => {
                        let {
                          modifierId,
                          composeParams
                        } = _ref10;
                        if (this.#driver.getLogger().shouldTrackEverything()) {
                          this.#driver.getLogger().eventSite("inboxSDKmodifyComposeRequest");
                        }
                        const modifier = this.#requestModifiers[modifierId];
                        const result = new Promise((resolve) => resolve(modifier(composeParams)));
                        result.then((newComposeParams) => this.#driver.getPageCommunicator().modifyComposeRequest(keyId, modifierId, newComposeParams || composeParams)).then((x2) => {
                          if (this.#driver.getLogger().shouldTrackEverything()) {
                            this.#driver.getLogger().eventSite("composeRequestModified");
                          }
                          return x2;
                        }).catch((err) => {
                          this.#driver.getPageCommunicator().modifyComposeRequest(keyId, modifierId, composeParams);
                          this.#driver.getLogger().error(err);
                        });
                      });
                      this.#isListeningToAjaxInterceptStream = true;
                    }
                    setupLinkPopOvers() {
                      if (!this.#hasSetupLinkPopOvers) {
                        this.#hasSetupLinkPopOvers = true;
                        this.#eventStream.plug(setupLinkPopOvers(this));
                      }
                    }
                  }
                  const gmail_compose_view = GmailComposeView;
                })
              ),
              /***/
              9121: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__3(7332);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__3(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_7___default = /* @__PURE__ */ __webpack_require__3.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_7__);
                  var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(5755);
                  var classnames__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(classnames__WEBPACK_IMPORTED_MODULE_1__);
                  var _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(5389);
                  var _lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__3(2617);
                  var _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__3(9860);
                  var _views_SimpleElementView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__3(3741);
                  module3 = __webpack_require__3.hmd(module3);
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_6__.defn)(module3, addStatusBar);
                  function addStatusBar(gmailComposeView, options) {
                    const {
                      height,
                      orderHint,
                      addAboveNativeStatusBar
                    } = {
                      height: 40,
                      orderHint: 0,
                      addAboveNativeStatusBar: false,
                      ...options
                    };
                    const statusbar = new StatusBar(gmailComposeView, height, orderHint, addAboveNativeStatusBar);
                    gmailComposeView.getStopper().takeUntilBy(kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(statusbar, "destroy")).onValue(() => statusbar.destroy());
                    return statusbar;
                  }
                  function createElement(orderHint, addAboveNativeStatusBar) {
                    const el = document.createElement("div");
                    el.className = classnames__WEBPACK_IMPORTED_MODULE_1___default()("aDh", "inboxsdk__compose_statusbar", {
                      inboxsdk__addAboveNative: addAboveNativeStatusBar
                    });
                    el.style.fontFamily = "Roboto,RobotoDraft,Helvetica,Arial,sans-serif";
                    el.style.fontSize = "15.6px";
                    el.setAttribute("data-order-hint", String(orderHint));
                    return el;
                  }
                  class StatusBar extends _views_SimpleElementView__WEBPACK_IMPORTED_MODULE_5__.A {
                    _prependContainer = null;
                    _stopper = kefir_stopper__WEBPACK_IMPORTED_MODULE_7___default()();
                    constructor(gmailComposeView, height, orderHint, addAboveNativeStatusBar) {
                      super(createElement(orderHint, addAboveNativeStatusBar));
                      this._addAboveNativeStatusBar = addAboveNativeStatusBar;
                      this._gmailComposeView = gmailComposeView;
                      this._nativeStatusContainer = (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_4__.A)(gmailComposeView.getElement(), ".iN > tbody .aDj");
                      this._setStatusBar();
                      this.setHeight(height);
                    }
                    destroy() {
                      if (this.destroyed) {
                        return;
                      }
                      super.destroy();
                      this._stopper.destroy();
                      if (this._prependContainer && this._prependContainer.children.length === 0) {
                        this._prependContainer.remove();
                      }
                      this._updateTotalHeight();
                    }
                    setHeight(newHeight) {
                      this.el.style.height = newHeight + "px";
                      this._updateTotalHeight();
                    }
                    _updateTotalHeight() {
                      const totalAddedStatusBarHeight = Array.from(this._gmailComposeView.getElement().querySelectorAll(".inboxsdk__compose_statusbar")).map((el) => el.getBoundingClientRect().height).reduce((a, b) => a + b, 0);
                      this._gmailComposeView.getElement().style.setProperty("--inboxsdk-total-added-statusbar-height", totalAddedStatusBarHeight + "px");
                    }
                    _setStatusBar() {
                      try {
                        const statusArea = this._gmailComposeView.getStatusArea();
                        this._gmailComposeView.getElement().classList.add("inboxsdk__compose_statusbarActive");
                        if (this._addAboveNativeStatusBar) {
                          const prependContainer = this._prependContainer = statusArea.querySelector(".inboxsdk__compose_statusBarPrependContainer") || document.createElement("div");
                          prependContainer.classList.add("inboxsdk__compose_statusBarPrependContainer");
                          statusArea.insertAdjacentElement("afterbegin", prependContainer);
                          (0, _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_2__.A)(prependContainer, this.el);
                        } else {
                          if (this._gmailComposeView.isInlineReplyForm()) {
                            const nativeStatusBar = (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_4__.A)(this._gmailComposeView.getElement(), ".iN > tbody .aDj .aDh .IZ");
                            (0, _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_2__.A)(nativeStatusBar, this.el);
                          } else {
                            (0, _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_2__.A)(statusArea, this.el);
                          }
                        }
                      } catch (err) {
                        _lib_logger__WEBPACK_IMPORTED_MODULE_3__.A.error(err);
                      }
                    }
                  }
                })
              ),
              /***/
              9e3: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      getAdditionalActionToolbar
                    )
                    /* harmony export */
                  });
                  const composeViewActionToolbars = /* @__PURE__ */ new WeakMap();
                  function getAdditionalActionToolbar(gmailComposeView) {
                    var groupedActionToolbar = gmailComposeView.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar > div");
                    if (groupedActionToolbar) {
                      return groupedActionToolbar;
                    }
                    let actionToolbar = gmailComposeView.getElement().querySelector(".inboxsdk__compose_actionToolbar > div");
                    if (actionToolbar) {
                      return actionToolbar;
                    }
                    actionToolbar = composeViewActionToolbars.get(gmailComposeView);
                    if (!actionToolbar) {
                      const _actionToolbar = actionToolbar = _addActionToolbar(gmailComposeView);
                      gmailComposeView.getStopper().onValue(() => {
                        _actionToolbar.remove();
                      });
                      composeViewActionToolbars.set(gmailComposeView, actionToolbar);
                    }
                    return actionToolbar;
                  }
                  function _addActionToolbar(gmailComposeView) {
                    const td = document.createElement("td");
                    td.setAttribute("class", "inboxsdk__compose_actionToolbar gU");
                    const formattingArea = gmailComposeView.getFormattingArea();
                    if (!formattingArea) throw new Error("formatting area missing");
                    formattingArea.insertAdjacentElement("beforebegin", td);
                    let parent = td.parentElement;
                    while (parent) {
                      if (parent.tagName === "TABLE") break;
                      parent = parent.parentElement;
                    }
                    if (parent) {
                      const col = parent.querySelector("colgroup col");
                      if (col) {
                        const newCol1 = document.createElement("col");
                        newCol1.setAttribute("class", "inboxsdk__compose_actionToolbarColumn");
                        const newCol2 = document.createElement("col");
                        newCol2.setAttribute("class", "inboxsdk__compose_separatorColumn");
                        col.insertAdjacentElement("afterend", newCol2);
                        col.insertAdjacentElement("afterend", newCol1);
                      }
                    }
                    var toolbarDiv = document.createElement("div");
                    td.appendChild(toolbarDiv);
                    return toolbarDiv;
                  }
                })
              ),
              /***/
              5845: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      getMinimizedStream
                    )
                    /* harmony export */
                  });
                  var lodash_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(4455);
                  var lodash_find__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(lodash_find__WEBPACK_IMPORTED_MODULE_0__);
                  var ud_kefir__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(616);
                  var ud_kefir__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__3.n(ud_kefir__WEBPACK_IMPORTED_MODULE_2__);
                  var _lib_dom_make_mutation_observer_stream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(5938);
                  module3 = __webpack_require__3.hmd(module3);
                  const fnStream = ud_kefir__WEBPACK_IMPORTED_MODULE_2___default()(module3, getMinimizedStream_);
                  function getMinimizedStream(gmailComposeView) {
                    return fnStream.flatMapLatest((fn) => fn(gmailComposeView));
                  }
                  function getMinimizedStream_(gmailComposeView) {
                    const element = gmailComposeView.getElement();
                    const bodyElement = gmailComposeView.getBodyElement();
                    const bodyContainer = lodash_find__WEBPACK_IMPORTED_MODULE_0___default()(element.children, (child) => child.contains(bodyElement));
                    return (0, _lib_dom_make_mutation_observer_stream__WEBPACK_IMPORTED_MODULE_1__.A)(bodyContainer, {
                      attributes: true,
                      attributeFilter: ["style"]
                    }).map(() => gmailComposeView.isMinimized());
                  }
                })
              ),
              /***/
              5865: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      GmailComposeButtonView
                    )
                    /* harmony export */
                  });
                  var lodash_includes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(5193);
                  var lodash_includes__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(lodash_includes__WEBPACK_IMPORTED_MODULE_0__);
                  var kefir__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(7249);
                  var kefir_bus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__3(8631);
                  var kefir_bus__WEBPACK_IMPORTED_MODULE_4___default = /* @__PURE__ */ __webpack_require__3.n(kefir_bus__WEBPACK_IMPORTED_MODULE_4__);
                  var _lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(2617);
                  var _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__3(4603);
                  var _lib_dom_keyboard_shortcut_stream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__3(5235);
                  class GmailComposeButtonView {
                    _element = document.createElement("div");
                    _iconElement = document.createElement("div");
                    constructor(options) {
                      this._isEnabled = options.enabled !== false;
                      this._iconClass = options.iconClass;
                      this._iconUrl = options.iconUrl;
                      this._tooltip = options.tooltip || options.title || options.text;
                      this._hasDropdown = !!options.hasDropdown;
                      this._keyboardShortcutHandle = options.keyboardShortcutHandle;
                      this._createElement(options);
                      this._eventStream = kefir_bus__WEBPACK_IMPORTED_MODULE_4___default()();
                      this._setupEventStream();
                      this._setupAestheticEvents();
                      if (options.enabled !== false) {
                        this._setupKeyboardShortcutEvent();
                      }
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    activate() {
                      this.addClass("inboxsdk__composeButton_active");
                    }
                    deactivate() {
                      this.removeClass("inboxsdk__composeButton_active");
                    }
                    addClass(className) {
                      this._element.classList.add(className);
                    }
                    removeClass(className) {
                      this._element.classList.remove(className);
                    }
                    simulateHover() {
                      (0, _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_5__.zU)(this._element);
                    }
                    setEnabled(value) {
                      this._setEnabled(value);
                    }
                    isEnabled() {
                      return this._isEnabled;
                    }
                    update(options) {
                      if (!options) {
                        this._element.style.display = "none";
                        return;
                      } else if (this._element.style.display === "none") {
                        this._element.style.display = "";
                      }
                      const newTooltip = options.tooltip || options.title || options.text;
                      if (newTooltip != this._tooltip) {
                        this._updateTooltip(newTooltip);
                      }
                      if (options.iconUrl != this._iconUrl) {
                        this._updateIconUrl(options.iconUrl);
                      }
                      if (options.iconClass != this._iconClass) {
                        this._updateIconClass(options.iconClass);
                      }
                      if (options.enabled === false || options.enabled === true) {
                        this._setEnabled(options.enabled);
                      }
                    }
                    _createElement(options) {
                      this._createMainElement(options);
                      this._createIconElement();
                    }
                    _createMainElement(options) {
                      this._element.setAttribute("class", "inboxsdk__composeButton");
                      if (options.tooltip) {
                        this._element.setAttribute("aria-label", options.tooltip);
                      }
                      this._element.setAttribute("role", "button");
                      this._element.setAttribute("tabindex", "0");
                      const newTooltip = options.tooltip || options.title || options.text;
                      if (newTooltip) {
                        this._element.setAttribute("data-tooltip", newTooltip);
                      }
                      if (options.enabled === false) {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                      if (options.noOverflow) {
                        this._element.setAttribute("data-no-overflow", "");
                      }
                    }
                    _createIconElement() {
                      const iconElement = this._iconElement;
                      if (this._iconClass) {
                        iconElement.innerHTML = "&nbsp;";
                        iconElement.setAttribute("class", this._iconClass);
                      }
                      iconElement.classList.add("inboxsdk__button_icon");
                      this._element.appendChild(iconElement);
                      if (this._iconUrl) {
                        this._createIconImgElement();
                      }
                    }
                    _createIconImgElement() {
                      this._iconElement.innerHTML = "";
                      const iconImgElement = this._iconImgElement = document.createElement("img");
                      iconImgElement.classList.add("inboxsdk__button_iconImg");
                      if (this._iconUrl) {
                        iconImgElement.src = this._iconUrl;
                      } else {
                        _lib_logger__WEBPACK_IMPORTED_MODULE_2__.A.error(new Error("_createIconImgElement should not be called with null _iconUrl"));
                      }
                      this._iconElement.appendChild(iconImgElement);
                    }
                    _updateTooltip(newTooltip) {
                      this._tooltip = newTooltip;
                      if (newTooltip) {
                        this._element.setAttribute("data-tooltip", newTooltip);
                      } else {
                        this._element.removeAttribute("data-tooltip");
                      }
                    }
                    _updateIconUrl(newIconUrl) {
                      this._iconUrl = newIconUrl;
                      if (!newIconUrl && this._iconImgElement) {
                        this._iconImgElement.remove();
                        this._iconImgElement = null;
                      } else if (newIconUrl && !this._iconImgElement) {
                        this._createIconImgElement();
                      } else if (newIconUrl && this._iconImgElement) {
                        this._iconImgElement.src = newIconUrl;
                      }
                    }
                    _updateIconClass(newIconClass) {
                      this._iconClass = newIconClass;
                      this._iconElement.setAttribute("class", "inboxsdk__button_icon " + (newIconClass || ""));
                    }
                    _setEnabled(value) {
                      if (this._isEnabled === value) {
                        return;
                      }
                      this._isEnabled = value;
                      if (this._isEnabled) {
                        this._element.classList.remove("inboxsdk__button_disabled");
                      } else {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                      this._eventStream.emit({
                        eventName: "enabledChanged",
                        isEnabled: this._isEnabled
                      });
                      if (this._isEnabled) {
                        this._setupKeyboardShortcutEvent();
                      }
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir__WEBPACK_IMPORTED_MODULE_1__.fromEvents(this._element, "click");
                      clickEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.filter(() => this.isEnabled()).map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      const isEnterOrSpace = (event) => lodash_includes__WEBPACK_IMPORTED_MODULE_0___default()([
                        32,
                        13
                        /* enter */
                      ], event.which);
                      const keydownEventStream = kefir__WEBPACK_IMPORTED_MODULE_1__.fromEvents(this._element, "keydown").filter(() => this.isEnabled());
                      const enterEventStream = keydownEventStream.filter(isEnterOrSpace);
                      this._eventStream.plug(enterEventStream.map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      enterEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                    }
                    _setupKeyboardShortcutEvent() {
                      const keyboardShortcutHandle = this._keyboardShortcutHandle;
                      if (keyboardShortcutHandle) {
                        this._eventStream.plug((0, _lib_dom_keyboard_shortcut_stream__WEBPACK_IMPORTED_MODULE_3__.A)(keyboardShortcutHandle.chord).takeUntilBy(this._eventStream.filter(function(event) {
                          return event.eventName === "enabledChanged" && event.isEnabled === false;
                        })).map(function(domEvent) {
                          return {
                            eventName: "click",
                            domEvent
                          };
                        }));
                      }
                    }
                    _setupAestheticEvents() {
                      kefir__WEBPACK_IMPORTED_MODULE_1__.fromEvents(this._element, "mouseenter").filter(() => this.isEnabled()).onValue(() => {
                        this._element.classList.add("inboxsdk__button_hover");
                      });
                      kefir__WEBPACK_IMPORTED_MODULE_1__.fromEvents(this._element, "mouseleave").onValue(() => {
                        this._element.classList.remove("inboxsdk__button_hover");
                      });
                    }
                  }
                })
              ),
              /***/
              7389: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      manage_button_grouping
                    )
                  });
                  var js = __webpack_require__3(7332);
                  var gmail_compose_button_view = __webpack_require__3(5865);
                  var basic_button_view_controller = __webpack_require__3(9755);
                  var insert_element_in_order = __webpack_require__3(5389);
                  var simulate_mouse_event = __webpack_require__3(4603);
                  var wait_for = __webpack_require__3(5156);
                  var logger = __webpack_require__3(2617);
                  var querySelectorOrFail = __webpack_require__3(9860);
                  var censorHTMLtree = __webpack_require__3(1443);
                  ;
                  function positionFormattingToolbar(gmailComposeView) {
                    const formattingToolbar = gmailComposeView.getFormattingToolbar();
                    if (formattingToolbar && formattingToolbar.style.display === "") {
                      const arrowElement = gmailComposeView.getFormattingToolbarArrow();
                      const buttonElement = gmailComposeView.getFormattingToolbarToggleButton();
                      const left2 = buttonElement.offsetLeft + buttonElement.clientWidth / 2 - arrowElement.offsetWidth / 2;
                      arrowElement.style.left = left2 + "px";
                      const statusBarPrependContainer = gmailComposeView.getStatusBarPrependContainer();
                      if (statusBarPrependContainer) {
                        formattingToolbar.style.bottom = -1 * statusBarPrependContainer.offsetHeight + "px";
                      } else {
                        formattingToolbar.style.bottom = "";
                      }
                    }
                  }
                  var get_or_fail = __webpack_require__3(4531);
                  ;
                  module3 = __webpack_require__3.hmd(module3);
                  const memberMap = (0, js.defonce)(module3, () => /* @__PURE__ */ new Map());
                  const manage_button_grouping = (0, js.defn)(module3, function manageButtonGrouping(gmailComposeView) {
                    if (gmailComposeView.getElement().getAttribute("data-button-grouping-managed") === "true") {
                      return;
                    }
                    var members = {};
                    memberMap.set(gmailComposeView, members);
                    gmailComposeView.getElement().setAttribute("data-button-grouping-managed", "true");
                    gmailComposeView.getEventStream().filter((event) => event.eventName === "fullscreenChanged").debounce(10).onValue(() => {
                      _handleComposeFullscreenStateChanged(gmailComposeView);
                    });
                    gmailComposeView.getEventStream().filter(function(event) {
                      return event.eventName === "buttonAdded";
                    }).onValue(() => {
                      groupButtonsAndAdjustToolbarPosition(gmailComposeView);
                    });
                    gmailComposeView.getEventStream().filter((event) => event.eventName === "resize" || event.eventName === "restored").onValue(() => {
                      groupButtonsAndAdjustToolbarPosition(gmailComposeView);
                    });
                    var el = gmailComposeView.getElement();
                    gmailComposeView.getStopper().onValue(function() {
                      memberMap.delete(gmailComposeView);
                      el.setAttribute("data-button-grouping-managed", "false");
                    });
                  });
                  function _handleComposeFullscreenStateChanged(gmailComposeView) {
                    if (gmailComposeView.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")) {
                      _ungroupButtons(gmailComposeView);
                    }
                    groupButtonsAndAdjustToolbarPosition(gmailComposeView);
                  }
                  function _ungroupButtons(gmailComposeView) {
                    const members = (0, get_or_fail.A)(memberMap, gmailComposeView);
                    if (members.groupedToolbarButtonViewController) members.groupedToolbarButtonViewController.destroy();
                    if (members.formattingToolbarMutationObserver) members.formattingToolbarMutationObserver.disconnect();
                    const buttonToolbar = members.groupedActionToolbarContainer.firstElementChild;
                    if (buttonToolbar) {
                      _moveNoOverflowButtonsToContainer(gmailComposeView, buttonToolbar);
                      buttonToolbar.remove();
                      const composeActionToolbar = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".inboxsdk__compose_actionToolbar");
                      composeActionToolbar.innerHTML = "";
                      composeActionToolbar.appendChild(buttonToolbar);
                    }
                  }
                  function groupButtonsAndAdjustToolbarPosition(gmailComposeView) {
                    _groupButtonsIfNeeded(gmailComposeView);
                    _fixToolbarPosition(gmailComposeView);
                  }
                  const groupButtonsIfNeededMap = /* @__PURE__ */ new WeakSet();
                  function _groupButtonsIfNeeded(gmailComposeView) {
                    if (groupButtonsIfNeededMap.has(gmailComposeView)) return;
                    groupButtonsIfNeededMap.add(gmailComposeView);
                    window.requestAnimationFrame(() => {
                      groupButtonsIfNeededMap.delete(gmailComposeView);
                      if (gmailComposeView.isDestroyed()) return;
                      if (_doButtonsNeedToGroup(gmailComposeView)) {
                        var groupedActionToolbarContainer = _createGroupedActionToolbarContainer(gmailComposeView);
                        var groupToggleButtonViewController = _createGroupToggleButtonViewController(gmailComposeView);
                        _swapToActionToolbar(gmailComposeView, groupToggleButtonViewController);
                        _checkAndSetInitialState(gmailComposeView, groupToggleButtonViewController);
                        _startMonitoringFormattingToolbar(gmailComposeView, groupToggleButtonViewController);
                        gmailComposeView.getStopper().onValue(function() {
                          groupedActionToolbarContainer.remove();
                          groupToggleButtonViewController.destroy();
                        });
                      }
                    });
                  }
                  function _doButtonsNeedToGroup(gmailComposeView) {
                    const composeEl = gmailComposeView.getElement();
                    if (composeEl.querySelector(".inboxsdk__compose_groupedActionToolbar")) return false;
                    if (composeEl.querySelectorAll(".inboxsdk__composeButton:not([data-no-overflow])").length < 2) return false;
                    if (areNativeToolbarButtonsGrouped(composeEl)) {
                      return true;
                    }
                    return false;
                  }
                  const toolbarButtonStyles = /* @__PURE__ */ new WeakMap();
                  function areNativeToolbarButtonsGrouped(composeEl) {
                    const nativeButtonsContainer = composeEl.querySelector(".bAK");
                    const containerWidth = nativeButtonsContainer?.offsetWidth ?? 0;
                    const nativeButtons = Array.from(nativeButtonsContainer?.querySelectorAll(".wG") ?? []);
                    let buttonsWidth = 0;
                    for (const button of nativeButtons) {
                      const style = toolbarButtonStyles.get(button) ?? getComputedStyle(button);
                      if (!toolbarButtonStyles.has(button)) {
                        toolbarButtonStyles.set(button, style);
                      }
                      const margin = parseFloat(style.marginLeft) + parseFloat(style.marginRight);
                      buttonsWidth += button.offsetWidth;
                      buttonsWidth += margin;
                      if (buttonsWidth > containerWidth) {
                        return true;
                      }
                    }
                    return false;
                  }
                  function _createGroupedActionToolbarContainer(gmailComposeView) {
                    var groupedActionToolbarContainer = document.createElement("div");
                    groupedActionToolbarContainer.classList.add("inboxsdk__compose_groupedActionToolbar");
                    groupedActionToolbarContainer.innerHTML = '<div class="inboxsdk__compose_groupedActionToolbar_arrow"> </div>';
                    (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer = groupedActionToolbarContainer;
                    groupedActionToolbarContainer.style.display = "none";
                    return groupedActionToolbarContainer;
                  }
                  function _createGroupToggleButtonViewController(gmailComposeView) {
                    var members = (0, get_or_fail.A)(memberMap, gmailComposeView);
                    var buttonView = _createGroupToggleButtonView();
                    var buttonViewController = new basic_button_view_controller.A({
                      buttonView,
                      activateFunction: function() {
                        _toggleGroupButtonToolbar(gmailComposeView, buttonViewController);
                        if (_isToggleExpanded()) {
                          (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer.querySelectorAll(".inboxsdk__composeButton")[0].focus();
                        }
                      }
                    });
                    members.groupedActionToolbarContainer.addEventListener("keydown", function(event) {
                      if (event.which === 27) {
                        buttonViewController.activate();
                        buttonView.getElement().focus();
                        event.preventDefault();
                        event.stopPropagation();
                      }
                    });
                    (0, get_or_fail.A)(memberMap, gmailComposeView).groupedToolbarButtonViewController = buttonViewController;
                    return buttonViewController;
                  }
                  function _createGroupToggleButtonView() {
                    var buttonView = new gmail_compose_button_view.A({
                      tooltip: "More Tools",
                      iconUrl: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAADxJREFUOBFjYKASYISa8x/NPJLFmdAMIJs7+Awi2ys000hy7EBdghHLgy+wqeYimgU+2QaPxhrZQUe6RgBYwgkWqJftAwAAAABJRU5ErkJggg=="
                    });
                    buttonView.addClass("inboxsdk__compose_groupedActionButton");
                    buttonView.getElement().setAttribute("tabindex", "1");
                    return buttonView;
                  }
                  function _swapToActionToolbar(gmailComposeView, buttonViewController) {
                    const actionToolbar = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".inboxsdk__compose_actionToolbar > div");
                    const actionToolbarContainer = actionToolbar.parentElement;
                    const newActionToolbar = document.createElement("div");
                    newActionToolbar.appendChild(buttonViewController.getView().getElement());
                    actionToolbarContainer.appendChild(newActionToolbar);
                    const groupedActionToolbarContainer = (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer;
                    groupedActionToolbarContainer.insertBefore(actionToolbar, groupedActionToolbarContainer.firstElementChild);
                    actionToolbarContainer.appendChild(groupedActionToolbarContainer);
                    _moveNoOverflowButtonsToActionToolbar(gmailComposeView);
                  }
                  function _moveNoOverflowButtonsToActionToolbar(gmailComposeView) {
                    const actionToolbar = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".inboxsdk__compose_actionToolbar > div");
                    _moveNoOverflowButtonsToContainer(gmailComposeView, actionToolbar);
                  }
                  function _moveNoOverflowButtonsToContainer(gmailComposeView, container) {
                    const noOverflowButtons = gmailComposeView.getElement().querySelectorAll(".inboxsdk__composeButton[data-no-overflow]");
                    Array.from(noOverflowButtons).forEach((buttonElement) => (0, insert_element_in_order.A)(container, buttonElement, void 0, true));
                  }
                  function _checkAndSetInitialState(gmailComposeView, groupToggleButtonViewController) {
                    if (_isToggleExpanded()) {
                      _expandGroupButtonToolbar(gmailComposeView, groupToggleButtonViewController);
                    }
                  }
                  function _collapseGroupButtonToolbar(gmailComposeView, buttonViewController) {
                    (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer.style.display = "none";
                    gmailComposeView.getElement().classList.remove("inboxsdk__compose_groupedActionToolbar_visible");
                    buttonViewController.getView().deactivate();
                    localStorage["inboxsdk__compose_groupedActionButton_state"] = "collapsed";
                    const bottomToolbarTable = gmailComposeView.getBottomBarTable();
                    bottomToolbarTable.style.position = "";
                    const bodyScrollContainer = gmailComposeView.getElement().querySelector(".qz");
                    if (bodyScrollContainer) {
                      bodyScrollContainer.scrollTop = bodyScrollContainer.scrollTop - 1;
                    }
                  }
                  function _expandGroupButtonToolbar(gmailComposeView, buttonViewController) {
                    (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer.style.display = "";
                    gmailComposeView.getElement().classList.add("inboxsdk__compose_groupedActionToolbar_visible");
                    buttonViewController.getView().activate();
                    localStorage["inboxsdk__compose_groupedActionButton_state"] = "expanded";
                    _positionGroupToolbar(gmailComposeView);
                    const formattingToolbar = gmailComposeView.getFormattingToolbar();
                    if (formattingToolbar && formattingToolbar.style.display === "") {
                      (0, simulate_mouse_event.jp)(gmailComposeView.getFormattingToolbarToggleButton());
                    }
                    const bodyScrollContainer = gmailComposeView.getElement().querySelector(".qz");
                    if (bodyScrollContainer) {
                      bodyScrollContainer.scrollTop = bodyScrollContainer.scrollTop + 1;
                    }
                  }
                  function _toggleGroupButtonToolbar(gmailComposeView, buttonViewController) {
                    if (_isToggleExpanded()) {
                      _collapseGroupButtonToolbar(gmailComposeView, buttonViewController);
                    } else {
                      _expandGroupButtonToolbar(gmailComposeView, buttonViewController);
                    }
                  }
                  function _isToggleExpanded() {
                    return localStorage["inboxsdk__compose_groupedActionButton_state"] === "expanded";
                  }
                  const fixToolbarPositionMap = /* @__PURE__ */ new WeakSet();
                  function _fixToolbarPosition(gmailComposeView) {
                    if (fixToolbarPositionMap.has(gmailComposeView)) return;
                    fixToolbarPositionMap.add(gmailComposeView);
                    window.requestAnimationFrame(() => {
                      fixToolbarPositionMap.delete(gmailComposeView);
                      if (gmailComposeView.isDestroyed()) return;
                      positionFormattingToolbar(gmailComposeView);
                      var groupedActionToolbarContainer = gmailComposeView.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");
                      if (!groupedActionToolbarContainer) {
                        return;
                      }
                      if (groupedActionToolbarContainer.style.display === "none") {
                        return;
                      }
                      _positionGroupToolbar(gmailComposeView);
                    });
                  }
                  function _positionGroupToolbar(gmailComposeView) {
                    if (gmailComposeView.isMinimized()) {
                      return;
                    }
                    var groupedActionToolbarContainer = gmailComposeView.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");
                    if (!groupedActionToolbarContainer) {
                      return;
                    }
                    const groupedToolbarButton = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".inboxsdk__compose_groupedActionButton");
                    const groupedActionToolbarArrow = (0, querySelectorOrFail.A)(groupedActionToolbarContainer, ".inboxsdk__compose_groupedActionToolbar_arrow");
                    groupedActionToolbarContainer.style.display = "";
                    if (groupedToolbarButton.offsetLeft + groupedToolbarButton.clientWidth > groupedActionToolbarContainer.offsetWidth) {
                      var marginLeft = groupedToolbarButton.clientWidth / 2 - groupedActionToolbarContainer.offsetWidth / 2 - 3;
                      groupedActionToolbarContainer.style.left = groupedToolbarButton.offsetLeft + marginLeft + "px";
                      groupedActionToolbarArrow.style.left = -(marginLeft + 1) + "px";
                    } else {
                      groupedActionToolbarContainer.style.left = "";
                      groupedActionToolbarArrow.style.left = groupedToolbarButton.offsetLeft - 1 + "px";
                    }
                    const bottomToolbarTable = gmailComposeView.getBottomBarTable();
                    bottomToolbarTable.style.position = "relative";
                    const bottomToolbarHeight = gmailComposeView.getBottomBarTable().clientHeight;
                    groupedActionToolbarContainer.style.bottom = `${bottomToolbarHeight + 1}px`;
                    if (bottomToolbarHeight < 1) {
                      const heElements = gmailComposeView.getElement().querySelectorAll("td.HE");
                      logger.A.error(new Error("bottom toolbar had bad height"), {
                        bottomToolbarHeight,
                        heElementHeights: Array.from(heElements).map((el) => el.clientHeight),
                        heElementsHTML: Array.from(heElements).map(censorHTMLtree.A)
                      });
                    }
                  }
                  function _startMonitoringFormattingToolbar(gmailComposeView, groupToggleButtonViewController) {
                    (0, wait_for.A)(function() {
                      if (gmailComposeView.isDestroyed()) throw "skip";
                      return gmailComposeView.getFormattingToolbar();
                    }).then((formattingToolbar) => {
                      const mutationObserver = new MutationObserver(function(mutations) {
                        const target = mutations[0].target;
                        if (target instanceof HTMLElement && target.style.display === "" && localStorage["inboxsdk__compose_groupedActionButton_state"] === "expanded") {
                          groupToggleButtonViewController.activate();
                        }
                      });
                      mutationObserver.observe(formattingToolbar, {
                        attributes: true,
                        attributeFilter: ["style"]
                      });
                      (0, get_or_fail.A)(memberMap, gmailComposeView).formattingToolbarMutationObserver = mutationObserver;
                      gmailComposeView.getStopper().onValue(() => mutationObserver.disconnect());
                    }).catch((err) => {
                      if (err !== "skip") {
                        logger.A.error(err);
                        throw err;
                      }
                    });
                  }
                })
              ),
              /***/
              6134: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      gmail_thread_row_view
                    ),
                    v: () => (
                      /* binding */
                      removeAllThreadRowUnclaimedModifications
                    )
                  });
                  var once = __webpack_require__3(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__3.n(once);
                  var flatten2 = __webpack_require__3(4176);
                  var flatten_default = /* @__PURE__ */ __webpack_require__3.n(flatten2);
                  var includes = __webpack_require__3(5193);
                  var includes_default = /* @__PURE__ */ __webpack_require__3.n(includes);
                  var intersection = __webpack_require__3(4225);
                  var intersection_default = /* @__PURE__ */ __webpack_require__3.n(intersection);
                  var uniqBy = __webpack_require__3(8496);
                  var uniqBy_default = /* @__PURE__ */ __webpack_require__3.n(uniqBy);
                  var flatMap = __webpack_require__3(6501);
                  var flatMap_default = /* @__PURE__ */ __webpack_require__3.n(flatMap);
                  var js = __webpack_require__3(7332);
                  var kefir_esm = __webpack_require__3(7249);
                  var browser_asap = __webpack_require__3(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__3.n(browser_asap);
                  var querySelectorOrFail = __webpack_require__3(9860);
                  var make_mutation_observer_chunked_stream = __webpack_require__3(3197);
                  var insert_element_in_order = __webpack_require__3(5389);
                  var kefir_cast = __webpack_require__3(5164);
                  var kefir_cast_default = /* @__PURE__ */ __webpack_require__3.n(kefir_cast);
                  var delay_asap = __webpack_require__3(1136);
                  var kefir_stopper_js = __webpack_require__3(4924);
                  var js_default = /* @__PURE__ */ __webpack_require__3.n(kefir_stopper_js);
                  var gmail_dropdown_view = __webpack_require__3(3612);
                  var dropdown_view = __webpack_require__3(3046);
                  var isEqual = __webpack_require__3(1470);
                  var isEqual_default = /* @__PURE__ */ __webpack_require__3.n(isEqual);
                  var update_icon = __webpack_require__3(2621);
                  ;
                  class GmailLabelView {
                    constructor() {
                      let opts = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      this._element = document.createElement("div");
                      this._element.className = "inboxsdk__gmail_label ar as " + (opts.classes || []).join(" ");
                      this._element.innerHTML = `
			<div class="at">
				<div class="au">
					<div class="av"></div>
				</div>
			</div>`;
                      this._labelDescriptor = {};
                      this._iconSettings = {};
                    }
                    getElement() {
                      return this._element;
                    }
                    updateLabelDescriptor(labelDescriptor) {
                      this._handleNewLabelDescriptor(labelDescriptor);
                    }
                    _handleNewLabelDescriptor(labelDescriptor) {
                      if (!labelDescriptor) {
                        this._labelDescriptor = {};
                        return;
                      }
                      labelDescriptor = Object.assign({
                        foregroundColor: "rgb(102, 102, 102)",
                        //dark grey
                        backgroundColor: "rgb(221, 221, 221)",
                        //light grey
                        maxWidth: "90px"
                      }, labelDescriptor);
                      if (isEqual_default()(this._labelDescriptor, labelDescriptor)) {
                        return;
                      }
                      (0, update_icon.A)(this._iconSettings, (0, querySelectorOrFail.A)(this._element, ".at"), false, labelDescriptor.iconClass, labelDescriptor.iconUrl, void 0, labelDescriptor.iconHtml);
                      if (labelDescriptor.iconClass || labelDescriptor.iconUrl || labelDescriptor.iconHtml) {
                        this._element.classList.add("inboxsdk__label_has_icon");
                      } else {
                        this._element.classList.remove("inboxsdk__label_has_icon");
                      }
                      this._updateBackgroundColor(labelDescriptor.backgroundColor);
                      this._updateForegroundColor(labelDescriptor.foregroundColor);
                      this._updateIconBackgroundColor(labelDescriptor.iconBackgroundColor);
                      this._updateTitle(labelDescriptor.title, labelDescriptor.titleHtml);
                      this._updateTextMaxWidth(labelDescriptor.maxWidth);
                      this._labelDescriptor = labelDescriptor;
                    }
                    _updateTextMaxWidth(maxWidth) {
                      if (this._labelDescriptor.maxWidth === maxWidth) {
                        return;
                      }
                      const childEl = this._element.querySelector(".av");
                      if (childEl) {
                        childEl.style.maxWidth = maxWidth;
                      }
                    }
                    _updateBackgroundColor(backgroundColor) {
                      if (this._labelDescriptor.backgroundColor === backgroundColor) {
                        return;
                      }
                      const elToChange = (0, querySelectorOrFail.A)(this._element, ".at");
                      elToChange.style.backgroundColor = backgroundColor;
                      elToChange.style.borderColor = backgroundColor;
                      (0, querySelectorOrFail.A)(this._element, ".au").style.borderColor = backgroundColor;
                    }
                    _updateForegroundColor(foregroundColor) {
                      if (this._labelDescriptor.foregroundColor === foregroundColor) {
                        return;
                      }
                      (0, querySelectorOrFail.A)(this._element, ".at").style.color = foregroundColor;
                    }
                    _updateIconBackgroundColor(iconBackgroundColor) {
                      const icon = this.getElement().querySelector(".inboxsdk__button_icon");
                      if (icon) {
                        icon.style.backgroundColor = iconBackgroundColor || "";
                      }
                    }
                    _updateTitle(title, titleHtml) {
                      if (this._labelDescriptor.title === title && this._labelDescriptor.titleHtml === titleHtml) {
                        return;
                      }
                      if (titleHtml) {
                        (0, querySelectorOrFail.A)(this._element, ".au").innerHTML = titleHtml || "";
                        return;
                      }
                      let contentEl;
                      try {
                        contentEl = (0, querySelectorOrFail.A)(this._element, ".av");
                      } catch (e) {
                        const outerEl = (0, querySelectorOrFail.A)(this._element, ".au");
                        outerEl.innerHTML = "";
                        contentEl = document.createElement("div");
                        contentEl.setAttribute("class", "av");
                        outerEl.appendChild(contentEl);
                      }
                      contentEl.textContent = title;
                      this._element.children[0].setAttribute("data-tooltip", title);
                    }
                  }
                  const gmail_label_view = GmailLabelView;
                  ;
                  class GmailActionButtonView {
                    constructor() {
                      this._element = document.createElement("div");
                      this._element.tabIndex = 0;
                      this._element.setAttribute("role", "button");
                      this._element.className = "inboxsdk__gmail_action ";
                      this._element.innerHTML = `
			<div>
			</div>`;
                      this._actionDescriptor = null;
                    }
                    getElement() {
                      return this._element;
                    }
                    updateDescriptor(actionButtonDescriptor) {
                      if (!actionButtonDescriptor) {
                        this._actionDescriptor = actionButtonDescriptor;
                        return;
                      }
                      if (isEqual_default()(this._actionDescriptor, actionButtonDescriptor)) {
                        return;
                      }
                      this._updateTitle(actionButtonDescriptor.title);
                      this._element.className = "inboxsdk__gmail_action " + (actionButtonDescriptor.className || "");
                      this._actionDescriptor = actionButtonDescriptor;
                    }
                    setOnClick(callback) {
                      this._element.onclick = callback;
                    }
                    _updateTitle(title) {
                      if (this._actionDescriptor && this._actionDescriptor.title === title) {
                        return;
                      }
                      (0, querySelectorOrFail.A)(this._element, "div").textContent = title;
                    }
                  }
                  const gmail_action_button_view = GmailActionButtonView;
                  var assert2 = __webpack_require__3(1602);
                  ;
                  module3 = __webpack_require__3.hmd(module3);
                  const cachedModificationsByRow = (0, js.defonce)(module3, () => /* @__PURE__ */ new WeakMap());
                  const BUTTON_CLASS = "inboxsdk__thread_row_button";
                  function focusAndNoPropagation(event) {
                    this.focus();
                    event.stopImmediatePropagation();
                  }
                  function onClickStarGroup(event) {
                    const isOnSdkButton = !!event.target?.closest(`.${BUTTON_CLASS}`);
                    if (isOnSdkButton) {
                      event.stopImmediatePropagation();
                    }
                  }
                  class GmailThreadRowView {
                    _stopper = js_default()();
                    #counts = null;
                    _isDestroyed = false;
                    constructor(element, rowListViewDriver, gmailDriver) {
                      (0, assert2.v)(element.hasAttribute("id"), "check element is main thread row");
                      this._isVertical = intersection_default()(Array.from(element.classList), ["zA", "apv"]).length === 2;
                      if (this._isVertical) {
                        const threadRow2 = element.nextElementSibling;
                        if (!threadRow2) throw new Error("threadRow2 not found");
                        const threadRow3 = threadRow2.nextElementSibling;
                        const has3Rows = threadRow3 && threadRow3.classList.contains("apw");
                        this._elements = has3Rows ? [element, element.nextElementSibling, element.nextElementSibling.nextElementSibling] : [element, element.nextElementSibling];
                      } else {
                        this._elements = [element];
                      }
                      const modifications = cachedModificationsByRow.get(this._elements[0]);
                      if (!modifications) {
                        this._alreadyHadModifications = false;
                        this._modifications = {
                          label: {
                            unclaimed: [],
                            claimed: []
                          },
                          action: {
                            unclaimed: [],
                            claimed: []
                          },
                          button: {
                            unclaimed: [],
                            claimed: []
                          },
                          image: {
                            unclaimed: [],
                            claimed: []
                          },
                          replacedDate: {
                            unclaimed: [],
                            claimed: []
                          },
                          replacedDraftLabel: {
                            unclaimed: [],
                            claimed: []
                          }
                        };
                        cachedModificationsByRow.set(this._elements[0], this._modifications);
                      } else {
                        this._modifications = modifications;
                        this._alreadyHadModifications = true;
                      }
                      this._rowListViewDriver = rowListViewDriver;
                      this._driver = gmailDriver;
                      this._userView = null;
                      this._cachedThreadID = null;
                      this._refresher = null;
                      this._subjectRefresher = null;
                      this._imageRefresher = null;
                      this._elements[0].setAttribute("data-inboxsdk-thread-row", "true");
                    }
                    destroy() {
                      if (!this._elements.length) {
                        return;
                      }
                      this._isDestroyed = true;
                      this._modifications.label.unclaimed = this._modifications.label.claimed.concat(this._modifications.label.unclaimed);
                      this._modifications.label.claimed.length = 0;
                      this._modifications.action.unclaimed = this._modifications.action.claimed.concat(this._modifications.action.unclaimed);
                      this._modifications.action.claimed.length = 0;
                      this._modifications.button.unclaimed = this._modifications.button.claimed.concat(this._modifications.button.unclaimed);
                      this._modifications.button.claimed.length = 0;
                      this._modifications.image.unclaimed = this._modifications.image.claimed.concat(this._modifications.image.unclaimed);
                      this._modifications.image.claimed.length = 0;
                      this._modifications.replacedDate.unclaimed = this._modifications.replacedDate.claimed.concat(this._modifications.replacedDate.unclaimed);
                      this._modifications.replacedDate.claimed.length = 0;
                      this._modifications.replacedDraftLabel.unclaimed = this._modifications.replacedDraftLabel.claimed.concat(this._modifications.replacedDraftLabel.unclaimed);
                      this._modifications.replacedDraftLabel.claimed.length = 0;
                      flatMap_default()(this._elements, (el) => Array.from(el.getElementsByClassName("inboxsdk__thread_row_addition"))).forEach((el) => {
                        el.remove();
                      });
                      this._stopper.destroy();
                      this._elements.length = 0;
                    }
                    getElement() {
                      return this._elements[0];
                    }
                    /**
                     *  Provides the button toolbar element.
                     *  Will be null when the element is not present - this happens when the "Hover actions" setting is disabled.
                     */
                    #getButtonToolbar() {
                      return this._elements[0]?.querySelector("ul[role=toolbar]") || null;
                    }
                    _removeUnclaimedModifications() {
                      _removeThreadRowUnclaimedModifications(this._modifications);
                    }
                    getAlreadyHadModifications() {
                      return this._alreadyHadModifications;
                    }
                    /**
                     * @returns a Kefir stream that emits this object once this object is ready for the user.
                     *
                     * It should almost always synchronously ready immediately, but there's
                     * a few cases such as with multiple inbox or the drafts page that it needs a moment.
                     * make sure you take until by on the @see GmailThreadRowView#getStopper because waitForReady
                     * must not be called after the GmailThreadRowView is destroyed
                     */
                    waitForReady() {
                      const time = [0, 10, 100, 1e3, 15e3];
                      const step = () => {
                        if (this._threadIdReady()) {
                          browser_asap_default()(() => {
                            if (this._elements.length) this._removeUnclaimedModifications();
                          });
                          return kefir_esm.constant(this);
                        } else {
                          const stepTime = time.shift();
                          if (stepTime == void 0) {
                            console.log("Should not happen: ThreadRowViewDriver never became ready", this);
                            return kefir_esm.never();
                          } else {
                            return kefir_esm.later(stepTime, void 0).flatMap(step);
                          }
                        }
                      };
                      return step();
                    }
                    setUserView(userView) {
                      this._userView = userView;
                    }
                    #getCounts() {
                      if (this.#counts) {
                        return this.#counts;
                      }
                      let recipientsElement;
                      try {
                        recipientsElement = (0, querySelectorOrFail.A)(this._elements[0], "td div.yW");
                      } catch (e) {
                        if (e instanceof querySelectorOrFail.a) {
                          this._driver.logger.errorSite(e);
                        } else {
                          throw e;
                        }
                      }
                      if (!recipientsElement) {
                        return this.#counts = {
                          messageCount: 0,
                          draftCount: 0
                        };
                      }
                      const draftCount = recipientsElement.querySelectorAll(".boq").length;
                      const messageCountMatch = recipientsElement.querySelector(".bx0");
                      const messageCount = messageCountMatch?.innerHTML ? +messageCountMatch.innerHTML : draftCount ? 0 : 1;
                      this.#counts = {
                        messageCount,
                        draftCount
                      };
                      return this.#counts;
                    }
                    _expandColumn(colSelector, width) {
                      this._rowListViewDriver.expandColumn(colSelector, width);
                    }
                    addLabel(label) {
                      if (!this._elements.length) {
                        console.warn("addLabel called on destroyed thread row");
                        return;
                      }
                      const prop = kefir_cast_default()(kefir_esm, label).takeUntilBy(this._stopper).toProperty();
                      let labelMod = null;
                      prop.combine(this._getRefresher(), (value, _ignored) => value).takeUntilBy(this._stopper).onValue((labelDescriptor) => {
                        if (!labelDescriptor) {
                          if (labelMod) {
                            labelMod.remove();
                            this._modifications.label.claimed.splice(this._modifications.label.claimed.indexOf(labelMod), 1);
                            labelMod = null;
                          }
                        } else {
                          if (!labelMod) {
                            labelMod = this._modifications.label.unclaimed.shift();
                            if (!labelMod) {
                              const gmailLabelView = new gmail_label_view({
                                classes: ["inboxsdk__thread_row_label"]
                              });
                              const el = gmailLabelView.getElement();
                              labelMod = {
                                gmailLabelView,
                                remove: el.remove.bind(el)
                              };
                            }
                            this._modifications.label.claimed.push(labelMod);
                          }
                          labelMod.gmailLabelView.updateLabelDescriptor(labelDescriptor);
                          const labelParentDiv = this._getLabelParent();
                          if (labelParentDiv !== labelMod.gmailLabelView.getElement().parentElement) {
                            labelParentDiv.insertAdjacentElement("afterbegin", labelMod.gmailLabelView.getElement());
                          }
                        }
                      });
                    }
                    addImage(inIconDescriptor) {
                      if (!this._elements.length) {
                        console.warn("addImage called on destroyed thread row");
                        return;
                      }
                      const prop = kefir_cast_default()(kefir_esm, inIconDescriptor).toProperty().combine(kefir_esm.merge([this._getRefresher(), this._getSubjectRefresher(), this._getImageContainerRefresher()]), function(value) {
                        return value;
                      }).takeUntilBy(this._stopper);
                      let imageMod = null;
                      prop.onValue((iconDescriptor) => {
                        if (!iconDescriptor) {
                          if (imageMod) {
                            imageMod.remove();
                            this._modifications.image.claimed.splice(this._modifications.image.claimed.indexOf(imageMod), 1);
                            imageMod = null;
                          }
                        } else {
                          if (!imageMod) {
                            imageMod = this._modifications.image.unclaimed.shift();
                            if (!imageMod) {
                              imageMod = {
                                iconSettings: {},
                                iconWrapper: document.createElement("div"),
                                remove() {
                                  this.iconWrapper.dispatchEvent(new MouseEvent("mouseleave"));
                                  this.iconWrapper.remove();
                                }
                              };
                              imageMod.iconWrapper.className = "inboxsdk__thread_row_icon_wrapper";
                            }
                            this._modifications.image.claimed.push(imageMod);
                          }
                          const {
                            iconSettings,
                            iconWrapper
                          } = imageMod;
                          (0, update_icon.A)(iconSettings, iconWrapper, false, iconDescriptor.imageClass, iconDescriptor.imageUrl);
                          const containerRow = this._elements.length === 3 ? this._elements[2] : this._elements[0];
                          containerRow.classList.add("inboxsdk__thread_row_image_added");
                          if (iconDescriptor.tooltip) {
                            iconWrapper.setAttribute("data-tooltip", iconDescriptor.tooltip);
                          } else {
                            iconWrapper.removeAttribute("data-tooltip");
                          }
                          if (iconDescriptor.onHover) {
                            const {
                              onHover
                            } = iconDescriptor;
                            iconWrapper.onmouseenter = () => {
                              const hoverEnd = new Promise((resolve) => {
                                iconWrapper.addEventListener("mouseleave", () => {
                                  resolve();
                                }, {
                                  once: true
                                });
                              });
                              onHover({
                                hoverEnd
                              });
                            };
                          }
                          const labelParent = this._getLabelParent();
                          if (!labelParent.contains(iconWrapper)) {
                            (0, querySelectorOrFail.A)(labelParent, ".y6").insertAdjacentElement("beforebegin", iconWrapper);
                          }
                        }
                      });
                    }
                    addButton(buttonDescriptor) {
                      if (!this._elements.length) {
                        console.warn("addButton called on destroyed thread row");
                        return;
                      }
                      if (this._elements.length != 1) return;
                      let activeDropdown = null;
                      let buttonMod = null;
                      const prop = kefir_cast_default()(kefir_esm, buttonDescriptor).toProperty().takeUntilBy(this._stopper);
                      prop.merge(this._stopper).onValue((buttonDescriptor2) => {
                        if (!buttonDescriptor2) {
                          if (activeDropdown) {
                            activeDropdown.close();
                            activeDropdown = null;
                          }
                        }
                      });
                      this._stopper.onValue(() => {
                        if (buttonMod && buttonMod.buttonEl) {
                          buttonMod.buttonEl.onclick = null;
                        }
                      });
                      prop.combine(this._getRefresher(), (value, _ignored) => value).onValue((_buttonDescriptor) => {
                        const buttonDescriptor2 = _buttonDescriptor;
                        if (!buttonDescriptor2) {
                          if (buttonMod) {
                            buttonMod.remove();
                            this._modifications.button.claimed.splice(this._modifications.button.claimed.indexOf(buttonMod), 1);
                            buttonMod = null;
                          }
                        } else {
                          if (buttonDescriptor2.className) {
                            buttonDescriptor2.iconClass = buttonDescriptor2.className;
                            delete buttonDescriptor2.className;
                          }
                          const buttonToolbar = this.#getButtonToolbar();
                          let buttonEl, iconSettings;
                          if (!buttonMod) {
                            buttonMod = this._modifications.button.unclaimed.shift();
                            if (!buttonMod) {
                              if (buttonToolbar) {
                                buttonEl = document.createElement("li");
                                buttonEl.classList.add("bqX");
                              } else {
                                buttonEl = document.createElement("span");
                                buttonEl.classList.add("T-KT");
                              }
                              buttonEl.classList.add(BUTTON_CLASS);
                              buttonEl.setAttribute("tabindex", "-1");
                              buttonEl.setAttribute("data-order-hint", String(buttonDescriptor2.orderHint || 0));
                              buttonEl.addEventListener("onmousedown", focusAndNoPropagation);
                              iconSettings = {};
                              buttonMod = {
                                buttonEl,
                                iconSettings,
                                remove: buttonEl.remove.bind(buttonEl)
                              };
                            }
                            this._modifications.button.claimed.push(buttonMod);
                          }
                          const starGroup = buttonToolbar ? null : (0, querySelectorOrFail.A)(this._elements[0], "td.apU.xY, td.aqM.xY");
                          buttonEl = buttonMod.buttonEl;
                          iconSettings = buttonMod.iconSettings;
                          if (buttonDescriptor2.title) {
                            buttonEl.setAttribute("aria-label", buttonDescriptor2.title);
                            buttonEl.setAttribute("data-tooltip", buttonDescriptor2.title);
                          } else {
                            buttonEl.removeAttribute("aria-label");
                            buttonEl.removeAttribute("data-tooltip");
                          }
                          if (buttonDescriptor2.onClick) {
                            buttonEl.onclick = (event) => {
                              const appEvent = {
                                dropdown: null,
                                threadRowView: this._userView
                              };
                              if (buttonDescriptor2.hasDropdown) {
                                if (activeDropdown) {
                                  this._elements[0].classList.remove("inboxsdk__dropdown_active");
                                  this._elements[0].classList.remove("buL");
                                  activeDropdown.close();
                                  activeDropdown = null;
                                  return;
                                } else {
                                  this._elements[0].classList.add("inboxsdk__dropdown_active");
                                  this._elements[0].classList.add("buL");
                                  appEvent.dropdown = activeDropdown = new dropdown_view.A(new gmail_dropdown_view.A(), buttonEl, null);
                                  activeDropdown.setPlacementOptions({
                                    position: "bottom",
                                    hAlign: "left",
                                    vAlign: "top"
                                  });
                                  const firstEl = this._elements[0];
                                  activeDropdown.on("destroy", () => {
                                    setTimeout(() => {
                                      firstEl.classList.remove("inboxsdk__dropdown_active");
                                      firstEl.classList.remove("buL");
                                      activeDropdown = null;
                                    }, 1);
                                  });
                                }
                              }
                              buttonDescriptor2.onClick.call(null, appEvent);
                            };
                          }
                          (0, update_icon.A)(iconSettings, buttonEl, false, buttonDescriptor2.iconClass, buttonDescriptor2.iconUrl);
                          if (buttonToolbar && buttonEl.parentElement !== buttonToolbar) {
                            (0, insert_element_in_order.A)(buttonToolbar, buttonEl, void 0, true);
                          } else if (starGroup && buttonEl.parentElement !== starGroup) {
                            (0, insert_element_in_order.A)(starGroup, buttonEl);
                            this._expandColumn("col.y5", 26 * starGroup.children.length);
                            starGroup.onclick = onClickStarGroup;
                          }
                        }
                      });
                    }
                    addActionButton(actionButtonDescriptor) {
                      if (this._elements.length !== 1) {
                        return;
                      }
                      const prop = kefir_cast_default()(kefir_esm, actionButtonDescriptor).takeUntilBy(this._stopper).toProperty();
                      let actionMod = null;
                      this._stopper.onEnd(() => {
                        if (actionMod) {
                          actionMod.gmailActionButtonView.setOnClick(null);
                        }
                      });
                      prop.takeUntilBy(this._stopper).onValue((actionButtonDescriptor2) => {
                        if (actionButtonDescriptor2 && actionButtonDescriptor2.type !== "LINK") {
                          console.error("Only type=LINK is currently supported");
                          return;
                        }
                        if (!actionButtonDescriptor2) {
                          if (actionMod) {
                            actionMod.remove();
                            this._modifications.action.claimed.splice(this._modifications.action.claimed.indexOf(actionMod), 1);
                            actionMod = null;
                          }
                        } else {
                          if (!actionMod) {
                            actionMod = this._modifications.action.unclaimed.shift();
                            if (!actionMod) {
                              const gmailActionButtonView = new gmail_action_button_view();
                              const el = gmailActionButtonView.getElement();
                              actionMod = {
                                gmailActionButtonView,
                                remove: el.remove.bind(el)
                              };
                            }
                            this._modifications.action.claimed.push(actionMod);
                          }
                          actionMod.gmailActionButtonView.updateDescriptor(actionButtonDescriptor2);
                          const {
                            url,
                            onClick
                          } = actionButtonDescriptor2;
                          actionMod.gmailActionButtonView.setOnClick((event) => {
                            event.stopPropagation();
                            window.open(url, "_blank");
                            if (onClick) {
                              onClick.call(null, {});
                            }
                          });
                          const actionParentDiv = this._elements[0].querySelector("td.a4W .a4X .aKS") || this._elements[0].querySelector("td.a4W div.xS");
                          if (!actionParentDiv) throw new Error("Failed to find actionParentDiv");
                          if (!includes_default()(actionParentDiv.children, actionMod.gmailActionButtonView.getElement())) {
                            actionParentDiv.insertBefore(actionMod.gmailActionButtonView.getElement(), actionParentDiv.firstChild);
                          }
                        }
                      });
                    }
                    addAttachmentIcon(opts) {
                      if (!this._elements.length) {
                        console.warn("addAttachmentIcon called on destroyed thread row");
                        return;
                      }
                      const getImgElement = once_default()(() => {
                        const img = document.createElement("img");
                        img.src = "images/cleardot.gif";
                        return img;
                      });
                      const getCustomIconWrapper = once_default()(() => {
                        const div = document.createElement("div");
                        return div;
                      });
                      var added = false;
                      var currentIconUrl;
                      var prop = kefir_cast_default()(kefir_esm, opts).toProperty();
                      prop.combine(this._getRefresher(), (value, _ignored) => value).takeUntilBy(this._stopper).onValue((opts2) => {
                        const attachmentDiv = (0, querySelectorOrFail.A)(this._elements[0], "td.yf.xY");
                        if (!opts2) {
                          if (added) {
                            getCustomIconWrapper().remove();
                            getImgElement().remove();
                            added = false;
                            if (!attachmentDiv.querySelector(".inboxsdk__thread_row_attachment_icon")) {
                              attachmentDiv.classList.remove("inboxsdk__thread_row_attachment_icons_present");
                            }
                          }
                        } else {
                          const img = opts2.iconHtml != null ? getCustomIconWrapper() : getImgElement();
                          if (opts2.tooltip) {
                            img.setAttribute("data-tooltip", opts2.tooltip);
                          } else {
                            img.removeAttribute("data-tooltip");
                          }
                          img.className = opts2.iconHtml != null ? "inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_iconWrapper " + (opts2.iconClass || "") : "inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_icon " + (opts2.iconClass || "");
                          if (opts2.iconHtml != null) {
                            if (attachmentDiv.contains(getImgElement())) {
                              getImgElement().remove();
                            }
                            img.innerHTML = opts2.iconHtml;
                          } else if (currentIconUrl != opts2.iconUrl) {
                            if (attachmentDiv.contains(getCustomIconWrapper())) {
                              getCustomIconWrapper().remove();
                            }
                            img.style.background = opts2.iconUrl ? "url(" + opts2.iconUrl + ") no-repeat 0 0" : "";
                            currentIconUrl = opts2.iconUrl;
                          }
                          if (!attachmentDiv.contains(img)) {
                            attachmentDiv.appendChild(img);
                            added = true;
                            this._expandColumn("col.yg", attachmentDiv.children.length * 16);
                            if (this._elements.length > 1) {
                              this._fixDateColumnWidth();
                            }
                          }
                          attachmentDiv.classList.add("inboxsdk__thread_row_attachment_icons_present");
                        }
                      });
                    }
                    _fixDateColumnWidth() {
                      browser_asap_default()(() => {
                        if (!this._elements.length) return;
                        const dateContainer = this._elements[0].querySelector("td.xW, td.yf > div.apm");
                        if (!dateContainer) return;
                        const visibleDateSpan = dateContainer.querySelector(".inboxsdk__thread_row_custom_date") || dateContainer.firstElementChild;
                        if (!visibleDateSpan || !(visibleDateSpan instanceof HTMLElement)) return;
                        const dateColumnAttachmentIconCount = this._elements[0].querySelectorAll("td.yf > img").length;
                        this._expandColumn("col.xX", visibleDateSpan.offsetWidth + 8 + 2 + 20 + dateColumnAttachmentIconCount * 16);
                      });
                    }
                    replaceDraftLabel(opts) {
                      if (!this._elements.length) {
                        console.warn("replaceDraftLabel called on destroyed thread row");
                        return;
                      }
                      let labelMod;
                      let draftElement, countElement;
                      const prop = kefir_cast_default()(kefir_esm, opts).toProperty();
                      prop.combine(this._getRefresher(), (value, _ignored) => value).takeUntilBy(this._stopper).onValue((opts2) => {
                        const originalLabel = (0, querySelectorOrFail.A)(this._elements[0], "td > div.yW");
                        const recipientsContainer = originalLabel.parentElement;
                        if (!recipientsContainer) throw new Error("Should not happen");
                        if (!opts2) {
                          if (labelMod) {
                            labelMod.remove();
                            this._modifications.replacedDraftLabel.claimed.splice(this._modifications.replacedDraftLabel.claimed.indexOf(labelMod), 1);
                            labelMod = null;
                          }
                        } else {
                          opts2 = Object.assign({
                            count: 1
                          }, opts2);
                          if (!labelMod) {
                            labelMod = this._modifications.replacedDraftLabel.unclaimed.shift();
                            if (!labelMod) {
                              labelMod = {
                                el: Object.assign(document.createElement("span"), {
                                  className: "inboxsdk__thread_row_custom_draft_label"
                                }),
                                remove() {
                                  this.el.remove();
                                }
                              };
                            }
                            this._modifications.replacedDraftLabel.claimed.push(labelMod);
                          }
                          const needToAdd = !includes_default()(recipientsContainer.children, labelMod.el);
                          if (needToAdd || !draftElement) {
                            labelMod.el.innerHTML = originalLabel.innerHTML;
                            const materiaUIlDraftElements = Array.from(labelMod.el.querySelectorAll(".boq"));
                            if (materiaUIlDraftElements.length > 0) {
                              materiaUIlDraftElements.forEach((el) => el.remove());
                              draftElement = Object.assign(document.createElement("span"), {
                                className: "boq"
                              });
                              labelMod.el.appendChild(draftElement);
                            } else {
                              draftElement = labelMod.el.querySelector("font");
                              if (!draftElement) {
                                return;
                              }
                              const nextSibling = draftElement.nextElementSibling;
                              if (nextSibling) {
                                nextSibling.remove();
                              }
                            }
                            draftElement.classList.add("inboxsdk__thread_row_custom_draft_part");
                            countElement = Object.assign(document.createElement("span"), {
                              className: "inboxsdk__thread_row_custom_draft_count"
                            });
                            labelMod.el.appendChild(countElement);
                          }
                          draftElement.textContent = opts2.text;
                          countElement.textContent = opts2.count !== 1 ? ` (${opts2.count})` : "";
                          if (needToAdd) {
                            recipientsContainer.insertBefore(labelMod.el, originalLabel);
                          }
                        }
                      });
                    }
                    replaceDate(opts) {
                      if (!this._elements.length) {
                        console.warn("replaceDate called on destroyed thread row");
                        return;
                      }
                      let dateMod;
                      const prop = kefir_cast_default()(kefir_esm, opts).toProperty();
                      prop.combine(this._getRefresher(), (value, _ignored) => value).takeUntilBy(this._stopper).onValue((opts2) => {
                        const dateContainer = (0, querySelectorOrFail.A)(this._elements[0], "td.xW, td.yf > div.apm");
                        const originalDateSpan = dateContainer.firstElementChild;
                        if (!opts2) {
                          if (dateMod) {
                            dateMod.remove();
                            this._modifications.replacedDate.claimed.splice(this._modifications.replacedDate.claimed.indexOf(dateMod), 1);
                            dateMod = null;
                          }
                        } else {
                          if (!dateMod) {
                            dateMod = this._modifications.replacedDate.unclaimed.shift();
                            if (!dateMod) {
                              dateMod = {
                                el: Object.assign(document.createElement("span"), {
                                  className: "inboxsdk__thread_row_custom_date"
                                }),
                                remove() {
                                  this.el.remove();
                                  dateContainer.classList.remove("inboxsdk__thread_row_custom_date_container");
                                }
                              };
                            }
                            this._modifications.replacedDate.claimed.push(dateMod);
                          }
                          dateMod.el.textContent = opts2.text;
                          if (opts2.tooltip) {
                            dateMod.el.setAttribute("data-tooltip", opts2.tooltip);
                            dateMod.el.setAttribute("aria-label", opts2.tooltip);
                          } else {
                            dateMod.el.removeAttribute("data-tooltip");
                            dateMod.el.removeAttribute("aria-label");
                          }
                          dateMod.el.style.color = opts2.textColor || "";
                          if (!includes_default()(dateContainer.children, dateMod.el)) {
                            dateContainer.insertBefore(dateMod.el, dateContainer.firstChild);
                            dateContainer.classList.add("inboxsdk__thread_row_custom_date_container");
                          }
                          this._fixDateColumnWidth();
                        }
                      });
                    }
                    getEventStream() {
                      return this._stopper;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getSubject() {
                      return this._getSubjectSelector().textContent;
                    }
                    _getSubjectSelector() {
                      return this._elements.length > 1 ? (0, querySelectorOrFail.A)(this._elements[1], "div.xS div.xT div.y6 > span[id]") : (0, querySelectorOrFail.A)(this._elements[0], "td.a4W div.xS div.xT div.y6 > span[id]");
                    }
                    replaceSubject(newSubjectStr) {
                      const subjectEleSelector = this._getSubjectSelector();
                      if (subjectEleSelector) {
                        subjectEleSelector.textContent = newSubjectStr;
                      }
                    }
                    getDateString() {
                      return (0, querySelectorOrFail.A)(this._elements[0], "td.xW > span[title]:not(.inboxsdk__thread_row_custom_date), td.yf.apt > div.apm > span[title]:not(.inboxsdk__thread_row_custom_date)").title;
                    }
                    _threadIdReady() {
                      return !!this._getThreadID();
                    }
                    _getThreadID() {
                      if (this._cachedThreadID) {
                        return this._cachedThreadID;
                      }
                      const elementWithId = flatten_default()(this._elements.map((el) => Array.from(el.querySelectorAll("[data-thread-id][data-legacy-thread-id]")))).filter(Boolean)[0];
                      if (elementWithId) {
                        this._cachedSyncThreadID = elementWithId.getAttribute("data-thread-id").replace("#", "");
                        this._cachedThreadID = elementWithId.getAttribute("data-legacy-thread-id").replace("#", "");
                        return this._cachedThreadID;
                      } else {
                        const threadID = this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this, this._elements);
                        this._cachedSyncThreadID = threadID;
                        if (threadID) {
                          this._driver.getOldGmailThreadIdFromSyncThreadId(threadID).then((oldGmailThreadID) => {
                            this._cachedThreadID = oldGmailThreadID;
                          });
                        }
                      }
                      return this._cachedThreadID;
                    }
                    getThreadID() {
                      const threadID = this._getThreadID();
                      if (!threadID) {
                        throw new Error("Should not happen: thread id was null");
                      }
                      return threadID;
                    }
                    /**
                     * This method is never called in the view proper.
                     * GmailThreadRowView#getThreadIDAsync is called though.
                     */
                    getSyncThreadID() {
                      return Promise.resolve(this._cachedSyncThreadID);
                    }
                    async getThreadIDAsync() {
                      return this.getThreadID();
                    }
                    getDraftID() {
                      if (this._cachedSyncDraftIDPromise) return this._cachedSyncDraftIDPromise;
                      const elementWithId = flatten_default()(this._elements.map((el) => Array.from(el.querySelectorAll("[data-standalone-draft-id]")))).filter(Boolean)[0];
                      this._cachedSyncDraftIDPromise = Promise.resolve(elementWithId ? elementWithId.getAttribute("data-standalone-draft-id").replace("#msg-a:", "") : null);
                      return this._cachedSyncDraftIDPromise;
                    }
                    getVisibleDraftCount() {
                      return this.#getCounts().draftCount;
                    }
                    getVisibleMessageCount() {
                      return this.#getCounts().messageCount;
                    }
                    getContacts() {
                      const senderSpans = this._elements[0].querySelectorAll("[email]");
                      const contacts = Array.from(senderSpans).map((span) => ({
                        emailAddress: span.getAttribute("email"),
                        name: span.getAttribute("name")
                      }));
                      return uniqBy_default()(contacts, (contact) => contact.emailAddress);
                    }
                    isSelected() {
                      return !!this._elements[0].querySelector("div[role=checkbox][aria-checked=true]");
                    }
                    _getLabelParent() {
                      return this._elements.length > 1 ? (0, querySelectorOrFail.A)(this._elements[this._elements.length === 2 ? 0 : 2], "div.apu") : (0, querySelectorOrFail.A)(this._elements[0], "td.a4W div.xS div.xT");
                    }
                    _getWatchElement() {
                      return this._elements.length === 1 ? this._elements[0] : this._elements[0].children[2];
                    }
                    _getRefresher() {
                      let refresher = this._refresher;
                      if (!refresher) {
                        refresher = this._refresher = (0, make_mutation_observer_chunked_stream.A)(this._getWatchElement(), {
                          childList: true
                        }).map(() => null).takeUntilBy(this._stopper).toProperty(() => null);
                      }
                      return refresher;
                    }
                    _getSubjectRefresher() {
                      let subjectRefresher = this._subjectRefresher;
                      if (!subjectRefresher) {
                        if (this._isVertical) {
                          subjectRefresher = this._subjectRefresher = kefir_esm.constant(null);
                        } else {
                          const watchElement = this._getWatchElement();
                          const subjectElement = (0, querySelectorOrFail.A)(watchElement, ".y6");
                          subjectRefresher = this._subjectRefresher = (0, make_mutation_observer_chunked_stream.A)(subjectElement, {
                            childList: true
                          }).map(() => null).takeUntilBy(this._stopper).toProperty(() => null);
                        }
                      }
                      return subjectRefresher;
                    }
                    _getImageContainerRefresher() {
                      let imageRefresher = this._imageRefresher;
                      if (!imageRefresher) {
                        if (this._isVertical) {
                          const containerRow = this._elements.length === 3 ? this._elements[2] : this._elements[0];
                          const classChangeStream = (0, make_mutation_observer_chunked_stream.A)(containerRow, {
                            attributes: true,
                            attributeFilter: ["class"]
                          });
                          imageRefresher = this._imageRefresher = classChangeStream.bufferBy(classChangeStream.flatMapLatest(() => (0, delay_asap.A)())).filter(() => containerRow.querySelectorAll(".inboxsdk__thread_row_icon_wrapper").length > 0 && !containerRow.classList.contains("inboxsdk__thread_row_image_added")).map(() => null).takeUntilBy(this._stopper).toProperty(() => null);
                        } else {
                          imageRefresher = this._imageRefresher = kefir_esm.constant(null);
                        }
                      }
                      return imageRefresher;
                    }
                  }
                  const gmail_thread_row_view = GmailThreadRowView;
                  function removeAllThreadRowUnclaimedModifications() {
                    setTimeout(() => {
                      const modifiedRows = document.querySelectorAll("tr[data-inboxsdk-thread-row]");
                      Array.prototype.forEach.call(modifiedRows, (row) => {
                        const modifications = cachedModificationsByRow.get(row);
                        if (modifications) {
                          _removeThreadRowUnclaimedModifications(modifications);
                        }
                      });
                    }, 15);
                  }
                  function _removeThreadRowUnclaimedModifications(modifications) {
                    for (let ii = 0; ii < modifications.label.unclaimed.length; ii++) {
                      const mod = modifications.label.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.label.unclaimed.length = 0;
                    for (let ii = 0; ii < modifications.button.unclaimed.length; ii++) {
                      const mod = modifications.button.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.button.unclaimed.length = 0;
                    for (let ii = 0; ii < modifications.image.unclaimed.length; ii++) {
                      const mod = modifications.image.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.image.unclaimed.length = 0;
                    for (let ii = 0; ii < modifications.replacedDate.unclaimed.length; ii++) {
                      const mod = modifications.replacedDate.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.replacedDate.unclaimed.length = 0;
                    for (let ii = 0; ii < modifications.replacedDraftLabel.unclaimed.length; ii++) {
                      const mod = modifications.replacedDraftLabel.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.replacedDraftLabel.unclaimed.length = 0;
                  }
                })
              ),
              /***/
              9341: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      ButtonView
                    )
                  });
                  var includes = __webpack_require__3(5193);
                  var includes_default = /* @__PURE__ */ __webpack_require__3.n(includes);
                  var kefir_esm = __webpack_require__3(7249);
                  var kefir_bus = __webpack_require__3(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__3.n(kefir_bus);
                  var logger = __webpack_require__3(2617);
                  var simulate_mouse_event = __webpack_require__3(4603);
                  var keyboard_shortcut_stream = __webpack_require__3(5235);
                  ;
                  const ButtonColorClasses = {
                    default: {
                      INACTIVE_CLASS: "T-I-ax7",
                      HOVER_CLASS: "T-I-JW",
                      ACTIVE_CLASS: "T-I-Kq"
                    },
                    flatIcon: {
                      INACTIVE_CLASS: "J-Z-I",
                      HOVER_CLASS: "J-Z-I-JW",
                      ACTIVE_CLASS: "J-Z-I-KO"
                    },
                    pureIcon: {
                      INACTIVE_CLASS: "inboxsdk__button_pureIcon_inactive",
                      HOVER_CLASS: "inboxsdk__button_pureIcon_hover",
                      ACTIVE_CLASS: "inboxsdk__button_pureIcon_active"
                    },
                    blue: {
                      INACTIVE_CLASS: "T-I-atl",
                      HOVER_CLASS: "T-I-JW",
                      ACTIVE_CLASS: "T-I-JO"
                    },
                    red: {
                      INACTIVE_CLASS: "T-I-KE",
                      HOVER_CLASS: "T-I-JW",
                      ACTIVE_CLASS: "T-I-JO"
                    },
                    green: {
                      INACTIVE_CLASS: "inboxsdk__button_green_inactive",
                      HOVER_CLASS: "inboxsdk__button_green_hover",
                      ACTIVE_CLASS: "inboxsdk__button_green_active"
                    },
                    outline: {
                      INACTIVE_CLASS: "ams",
                      HOVER_CLASS: "ams",
                      ACTIVE_CLASS: "ams"
                    }
                  };
                  const button_color_classes = ButtonColorClasses;
                  ;
                  class ButtonView {
                    _element = document.createElement("div");
                    _innerElement = document.createElement("div");
                    #iconLiga;
                    constructor(options) {
                      const {
                        iconLiga,
                        iconClass,
                        iconUrl
                      } = options;
                      this._hasDropdown = false;
                      this._isEnabled = options.enabled !== false;
                      this._iconClass = iconClass;
                      this._iconUrl = iconUrl;
                      this.#iconLiga = iconLiga;
                      this._title = options.text || options.title;
                      this._tooltip = options.tooltip || options.title;
                      this._hasDropdown = !!options.hasDropdown;
                      this._buttonColor = options.buttonColor || "default";
                      this._keyboardShortcutHandle = options.keyboardShortcutHandle;
                      this._createElement(options);
                      this._eventStream = kefir_bus_default()();
                      this._setupEventStream();
                      this._setupAestheticEvents();
                      if (options.enabled !== false) {
                        this._setupKeyboardShortcutEvent();
                      }
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    activate() {
                      this.addClass(button_color_classes[this._buttonColor].ACTIVE_CLASS);
                      this.addClass(button_color_classes[this._buttonColor].HOVER_CLASS);
                    }
                    deactivate() {
                      this.removeClass(button_color_classes[this._buttonColor].ACTIVE_CLASS);
                      this.removeClass(button_color_classes[this._buttonColor].HOVER_CLASS);
                    }
                    addClass(className) {
                      this._element.classList.add(className);
                    }
                    removeClass(className) {
                      this._element.classList.remove(className);
                    }
                    simulateHover() {
                      (0, simulate_mouse_event.zU)(this._element);
                    }
                    setEnabled(value) {
                      this._setEnabled(value);
                    }
                    isEnabled() {
                      return this._isEnabled;
                    }
                    update(options) {
                      if (!options) {
                        this._element.style.display = "none";
                        return;
                      } else if (this._element.style.display === "none") {
                        this._element.style.display = "";
                      }
                      if (options.buttonColor != this._buttonColor && this._buttonColor) {
                        this._updateButtonColor(options.buttonColor);
                      }
                      if (options.title != this._title) {
                        this._updateTitle(options.title);
                      }
                      if (options.tooltip != this._tooltip) {
                        this._updateTooltip(options.tooltip);
                      }
                      if (options.iconUrl != this._iconUrl) {
                        this._updateIconUrl(options.iconUrl);
                      }
                      if (options.iconClass != this._iconClass) {
                        this._updateIconClass(options.iconClass);
                      }
                      if (options.enabled === false || options.enabled === true) {
                        this._setEnabled(options.enabled);
                      }
                    }
                    _createElement(options) {
                      this._setupMainElement(options);
                      this._setupInnerElement(options);
                      this._createTextElement();
                      this._createIconElement();
                    }
                    _setupMainElement(options) {
                      this._element.setAttribute("class", "T-I J-J5-Ji ar7 inboxsdk__button " + button_color_classes[this._buttonColor].INACTIVE_CLASS);
                      if (options.tooltip) {
                        this._element.setAttribute("aria-label", options.tooltip);
                      }
                      this._element.setAttribute("role", "button");
                      this._element.setAttribute("tabindex", "0");
                      if (options.hasButtonToRight) {
                        this._element.classList.add("T-I-Js-IF");
                      }
                      if (options.hasButtonToLeft) {
                        this._element.classList.add("T-I-Js-Gs");
                      }
                      if (options.tooltip || options.title) {
                        this._element.setAttribute("data-tooltip", String(options.tooltip || options.title));
                      }
                      if (options.enabled === false) {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                    }
                    _setupInnerElement(options) {
                      this._innerElement.classList.add("asa");
                      if (this._hasDropdown && !options.noArrow) {
                        this._innerElement.innerHTML = '<div class="G-asx T-I-J3 - J-J5-Ji">&nbsp;</div>';
                      }
                      this._element.appendChild(this._innerElement);
                    }
                    _createTextElement() {
                      if (!this._title) {
                        return;
                      }
                      this._textElement = document.createElement("span");
                      this._textElement.setAttribute("class", "inboxsdk__button_text");
                      this._textElement.textContent = this._title;
                      if (this._iconElement) {
                        const parent = this._iconElement.parentElement;
                        if (!parent) throw new Error("Could not find parent");
                        parent.insertBefore(this._textElement, this._iconElement.nextSibling);
                      } else {
                        this._innerElement.insertBefore(this._textElement, this._innerElement.firstElementChild);
                      }
                    }
                    _createIconElement() {
                      if (!this._iconClass && !this._iconUrl) {
                        return;
                      }
                      const iconElement = this._iconElement = document.createElement("div");
                      iconElement.classList.add("inboxsdk__button_icon");
                      if (this._iconClass) {
                        if (this.#iconLiga != null) {
                          iconElement.innerText = this.#iconLiga;
                        } else {
                          iconElement.innerHTML = "&nbsp;";
                        }
                        iconElement.setAttribute("class", "inboxsdk__button_icon " + this._iconClass);
                      }
                      if (this._iconUrl) {
                        this._createIconImgElement();
                      }
                      this._innerElement.insertBefore(iconElement, this._innerElement.firstElementChild);
                    }
                    _createIconImgElement() {
                      if (!this._iconElement) {
                        this._createIconElement();
                      }
                      const iconElement = this._iconElement;
                      if (!iconElement) throw new Error("Should not happen");
                      if (iconElement.innerHTML !== "") {
                        iconElement.innerHTML = "";
                      }
                      const iconImgElement = this._iconImgElement = document.createElement("img");
                      iconImgElement.classList.add("inboxsdk__button_iconImg");
                      if (this._iconUrl) {
                        iconImgElement.src = this._iconUrl;
                      } else {
                        logger.A.error(new Error("_createIconImgElement should not be called with null _iconUrl"));
                      }
                      iconElement.appendChild(iconImgElement);
                    }
                    _updateButtonColor(newButtonColor) {
                      this._element.classList.remove(button_color_classes[this._buttonColor].INACTIVE_CLASS);
                      this._buttonColor = newButtonColor;
                      this._element.classList.add(button_color_classes[this._buttonColor].INACTIVE_CLASS);
                    }
                    _updateTitle(newTitle) {
                      if (!this._title && newTitle) {
                        this._title = newTitle;
                        this._createTextElement();
                      } else if (this._title && !newTitle && this._textElement) {
                        this._textElement.remove();
                        this._textElement = void 0;
                        this._title = newTitle;
                      } else if (this._textElement) {
                        this._textElement.textContent = newTitle;
                        this._title = newTitle;
                      }
                    }
                    _updateTooltip(newTooltip) {
                      this._tooltip = newTooltip;
                      if (newTooltip) {
                        this._element.setAttribute("data-tooltip", newTooltip);
                      } else {
                        this._element.removeAttribute("data-tooltip");
                      }
                    }
                    _updateIconUrl(newIconUrl) {
                      this._iconUrl = newIconUrl;
                      if (this._iconImgElement && !newIconUrl) {
                        this._iconImgElement.remove();
                        this._iconImgElement = void 0;
                      } else if (!this._iconImgElement && newIconUrl) {
                        this._createIconImgElement();
                      }
                      if (this._iconImgElement && newIconUrl) {
                        this._iconImgElement.src = newIconUrl;
                      }
                    }
                    _updateIconClass(newIconClass) {
                      if (this._iconElement && !newIconClass && !this._iconUrl) {
                        this._iconElement.remove();
                        this._iconElement = void 0;
                      } else if (!this._iconElement && newIconClass) {
                        this._createIconElement();
                      }
                      this._iconClass = newIconClass;
                      if (this._iconElement) {
                        this._iconElement.setAttribute("class", "inboxsdk__button_icon " + (newIconClass || ""));
                      }
                    }
                    _setEnabled(value) {
                      if (this._isEnabled === value) {
                        return;
                      }
                      this._isEnabled = value;
                      if (this._isEnabled) {
                        this._element.classList.remove("inboxsdk__button_disabled");
                      } else {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                      this._eventStream.emit({
                        eventName: "enabledChanged",
                        isEnabled: this._isEnabled
                      });
                      if (this._isEnabled) {
                        this._setupKeyboardShortcutEvent();
                      }
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.filter(() => this.isEnabled()).map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      const isEnterOrSpace = (event) => includes_default()([
                        32,
                        13
                        /* enter */
                      ], event.which);
                      const keydownEventStream = kefir_esm.fromEvents(this._element, "keydown").filter(() => this.isEnabled());
                      const enterEventStream = keydownEventStream.filter(isEnterOrSpace);
                      this._eventStream.plug(enterEventStream.map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      enterEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                    }
                    _setupKeyboardShortcutEvent() {
                      const keyboardShortcutHandle = this._keyboardShortcutHandle;
                      if (keyboardShortcutHandle) {
                        this._eventStream.plug((0, keyboard_shortcut_stream.A)(keyboardShortcutHandle.chord).takeUntilBy(this._eventStream.filter(function(event) {
                          return event.eventName === "enabledChanged" && event.isEnabled === false;
                        })).map(function(domEvent) {
                          return {
                            eventName: "click",
                            domEvent
                          };
                        }));
                      }
                    }
                    _setupAestheticEvents() {
                      kefir_esm.fromEvents(this._element, "mouseenter").filter(() => this.isEnabled()).onValue(() => {
                        this._element.classList.add(button_color_classes[this._buttonColor].HOVER_CLASS);
                        this._element.classList.add("inboxsdk__button_hover");
                      });
                      kefir_esm.fromEvents(this._element, "mouseleave").onValue(() => {
                        this._element.classList.remove(button_color_classes[this._buttonColor].HOVER_CLASS);
                        this._element.classList.remove("inboxsdk__button_hover");
                        this._element.classList.add(button_color_classes[this._buttonColor].INACTIVE_CLASS);
                      });
                      kefir_esm.fromEvents(this._element, "focus").onValue(() => {
                        if (!this._buttonColor.match(/outline/)) {
                          this._element.classList.add("T-I-JO");
                        }
                      });
                      if (!this._hasDropdown && !this._buttonColor.match(/outline/)) {
                        kefir_esm.fromEvents(this._element, "mouseup").onValue(() => {
                          this._element.classList.remove("T-I-JO");
                        });
                      }
                      kefir_esm.fromEvents(this._element, "blur").onValue(() => {
                        this._element.classList.remove("T-I-JO");
                      });
                    }
                  }
                })
              ),
              /***/
              3612: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      GmailDropdownView
                    )
                    /* harmony export */
                  });
                  var _lib_dom_block_and_reemit_keyboard_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(8416);
                  class GmailDropdownView {
                    constructor() {
                      this._containerElement = document.createElement("div");
                      this._containerElement.setAttribute("class", "inboxsdk__menu");
                      this._contentElement = document.createElement("div");
                      this._contentElement.setAttribute("class", "inboxsdk__menuContent");
                      this._containerElement.appendChild(this._contentElement);
                      (0, _lib_dom_block_and_reemit_keyboard_events__WEBPACK_IMPORTED_MODULE_0__.A)(this._containerElement);
                    }
                    destroy() {
                      this._containerElement.remove();
                    }
                    getContainerElement() {
                      return this._containerElement;
                    }
                    getContentElement() {
                      return this._contentElement;
                    }
                  }
                })
              ),
              /***/
              4806: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      GmailTooltipView
                    )
                    /* harmony export */
                  });
                  var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(3281);
                  var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__);
                  var lodash_escape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(3131);
                  var lodash_escape__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(lodash_escape__WEBPACK_IMPORTED_MODULE_1__);
                  var asap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(4622);
                  var asap__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__3.n(asap__WEBPACK_IMPORTED_MODULE_2__);
                  var kefir_bus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__3(8631);
                  var kefir_bus__WEBPACK_IMPORTED_MODULE_5___default = /* @__PURE__ */ __webpack_require__3.n(kefir_bus__WEBPACK_IMPORTED_MODULE_5__);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__3(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_6___default = /* @__PURE__ */ __webpack_require__3.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_6__);
                  var _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__3(9860);
                  var _buttons_button_view__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__3(9341);
                  var _widgets_buttons_basic_button_view_controller__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__3(9755);
                  const ARROW_HORIZONTAL_HEIGHT = 9;
                  const ARROW_HORIZONTAL_WIDTH = 18;
                  const ARROW_VERTICAL_HEIGHT = 18;
                  const ARROW_VERTICAL_WIDTH = 9;
                  class GmailTooltipView {
                    _eventStream = kefir_bus__WEBPACK_IMPORTED_MODULE_5___default()();
                    _stopper = kefir_stopper__WEBPACK_IMPORTED_MODULE_6___default()();
                    constructor() {
                      let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      this._setupElement(options);
                    }
                    destroy() {
                      this._eventStream.end();
                      this._stopper.destroy();
                      this._element.remove();
                    }
                    getElement() {
                      return this._element;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    anchor(anchorElement, placementOptions) {
                      if (!anchorElement) {
                        return;
                      }
                      if (!this._element) {
                        return;
                      }
                      var targetBoundingBox = anchorElement.getBoundingClientRect();
                      var tipBoundingBox = this._element.getBoundingClientRect();
                      var theBoundingBoxWrapperToUse;
                      if (placementOptions && placementOptions.position) {
                        switch (placementOptions.position) {
                          case "top":
                            theBoundingBoxWrapperToUse = {
                              type: "top",
                              value: this._getTopPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                            };
                            break;
                          case "bottom":
                            theBoundingBoxWrapperToUse = {
                              type: "bottom",
                              value: this._getBottomPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                            };
                            break;
                        }
                      }
                      if (!theBoundingBoxWrapperToUse) theBoundingBoxWrapperToUse = this._getAutomaticPlacementBoundingBox(targetBoundingBox, tipBoundingBox);
                      var containedBoundingBox = this._containBoundingBox(theBoundingBoxWrapperToUse.value, placementOptions && placementOptions.offset);
                      this._setPositionAtBoundingBox(containedBoundingBox);
                      this._setArrowPosition(theBoundingBoxWrapperToUse.type, containedBoundingBox, targetBoundingBox);
                    }
                    getContainerElement() {
                      return this._element;
                    }
                    getContentElement() {
                      return (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".aRM");
                    }
                    close() {
                      this.destroy();
                    }
                    _setupElement(options) {
                      this._element = document.createElement("div");
                      this._element.setAttribute("class", "inboxsdk__tooltip");
                      if (options.el) {
                        const html = `<div class="T-P aRL">
						<div class="T-P-Jz-UR">
							<div class="aRM" tabindex="0">
							</div>
						</div>

						<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">
							<div class="T-P-atD"></div>
							<div class="T-P-atC"></div>
						</div>
					</div>`;
                        this._element.innerHTML = html;
                        this._element.classList.add("inboxdk__tooltip_content");
                        (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".aRM").appendChild(options.el);
                      } else {
                        const html = [
                          '<div class="T-P aRL">',
                          '<div class="T-P-Jz-UR">',
                          '<div class="aRM" tabindex="0">',
                          '<div class="aVn inboxsdk__tooltip_image">',
                          //image goes here
                          "</div>",
                          '<div class="aRR">',
                          lodash_escape__WEBPACK_IMPORTED_MODULE_1___default()(options.title || ""),
                          "</div>",
                          '<div class="aRQ">',
                          lodash_escape__WEBPACK_IMPORTED_MODULE_1___default()(options.subtitle || ""),
                          "</div>",
                          '<div class="inboxsdk__tooltip_button">',
                          //button goes here
                          "</div>",
                          "</div>",
                          "</div>",
                          '<div class="T-P-aut-UR T-P-aut inboxsdk__tooltip_close" aria-label="Close" role="button"></div>',
                          '<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">',
                          '<div class="T-P-atD"></div>',
                          '<div class="T-P-atC"></div>',
                          "</div>",
                          "</div>"
                        ].join("");
                        this._element.innerHTML = html;
                        const closeElement = this._element.querySelector(".inboxsdk__tooltip_close");
                        if (closeElement) {
                          closeElement.addEventListener("click", () => {
                            this.destroy();
                          });
                        }
                        if (options.imageUrl) {
                          const image = document.createElement("img");
                          image.src = options.imageUrl;
                          (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".inboxsdk__tooltip_image").appendChild(image);
                          image.addEventListener("load", () => {
                            asap__WEBPACK_IMPORTED_MODULE_2___default()(() => {
                              this._eventStream.emit({
                                eventName: "imageLoaded"
                              });
                            });
                          });
                        }
                        if (options.button) {
                          const buttonOptions = Object.assign({}, options.button);
                          buttonOptions.buttonColor = "blue";
                          const oldOnClick = buttonOptions.onClick;
                          buttonOptions.onClick = () => {
                            this.destroy();
                            if (oldOnClick) {
                              oldOnClick();
                            }
                          };
                          buttonOptions.buttonView = new _buttons_button_view__WEBPACK_IMPORTED_MODULE_4__.A(buttonOptions);
                          new _widgets_buttons_basic_button_view_controller__WEBPACK_IMPORTED_MODULE_7__.A(buttonOptions);
                          (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".inboxsdk__tooltip_button").appendChild(buttonOptions.buttonView.getElement());
                        }
                      }
                    }
                    _getAutomaticPlacementBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var boundingBoxWrappers = [{
                        type: "top",
                        value: this._getTopPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                      }, {
                        type: "left",
                        value: this._getLeftPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                      }, {
                        type: "right",
                        value: this._getRightPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                      }, {
                        type: "bottom",
                        value: this._getBottomPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                      }];
                      var bestBoundingBoxWrapper = this._figureOutBestBoundingBox(boundingBoxWrappers);
                      return bestBoundingBoxWrapper;
                    }
                    _getTopPositionBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var top = targetBoundingBox.top - tipBoundingBox.height - ARROW_HORIZONTAL_HEIGHT;
                      var left2 = targetBoundingBox.left + targetBoundingBox.width / 2 - tipBoundingBox.width / 2;
                      return [{
                        x: left2,
                        y: top
                      }, {
                        x: left2 + tipBoundingBox.width,
                        y: top + tipBoundingBox.height
                      }];
                    }
                    _getRightPositionBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var left2 = targetBoundingBox.right + ARROW_VERTICAL_WIDTH;
                      var top = targetBoundingBox.top + targetBoundingBox.height / 2 - tipBoundingBox.height / 2;
                      return [{
                        x: left2,
                        y: top
                      }, {
                        x: left2 + tipBoundingBox.width,
                        y: top + tipBoundingBox.height
                      }];
                    }
                    _getBottomPositionBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var top = targetBoundingBox.bottom + ARROW_HORIZONTAL_HEIGHT;
                      var left2 = targetBoundingBox.left + targetBoundingBox.width / 2 - tipBoundingBox.width / 2;
                      return [{
                        x: left2,
                        y: top
                      }, {
                        x: left2 + tipBoundingBox.width,
                        y: top + tipBoundingBox.height
                      }];
                    }
                    _getLeftPositionBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var left2 = targetBoundingBox.left - ARROW_VERTICAL_WIDTH - tipBoundingBox.width;
                      var top = targetBoundingBox.top + targetBoundingBox.height / 2 - tipBoundingBox.height / 2;
                      return [{
                        x: left2,
                        y: top
                      }, {
                        x: left2 + tipBoundingBox.width,
                        y: top + tipBoundingBox.height
                      }];
                    }
                    _figureOutBestBoundingBox(boundingBoxWrappers) {
                      for (var ii = 0; ii < boundingBoxWrappers.length; ii++) {
                        boundingBoxWrappers[ii].smallestDistance = this._getSmallestDistance(boundingBoxWrappers[ii]);
                      }
                      return lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()(boundingBoxWrappers, function(boundingBoxWrapper) {
                        return boundingBoxWrapper.smallestDistance;
                      }).reverse()[0];
                    }
                    _getSmallestDistance(boundingBoxWrapper) {
                      var distances = [
                        boundingBoxWrapper.value[0].y,
                        //top
                        boundingBoxWrapper.value[0].x,
                        //left
                        document.body.clientWidth - boundingBoxWrapper.value[1].x,
                        //right
                        document.body.clientHeight - boundingBoxWrapper.value[1].y
                        //bottom
                      ];
                      return lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()(distances, function(distance) {
                        return distance;
                      })[0];
                    }
                    _containBoundingBox(boundingBox, offset) {
                      var boundingBoxHeight = boundingBox[1].y - boundingBox[0].y;
                      var boundingBoxWidth = boundingBox[1].x - boundingBox[0].x;
                      if (boundingBox[0].y < -1) {
                        boundingBox[0].y = 0;
                        boundingBox[1].y = boundingBox[0].y + boundingBoxHeight;
                      } else if (boundingBox[1].y > document.body.clientHeight) {
                        boundingBox[0].y = document.body.clientHeight - boundingBoxHeight;
                        boundingBox[1].y = boundingBox[0].y + boundingBoxHeight;
                      }
                      if (boundingBox[0].x < -1) {
                        boundingBox[0].x = 0;
                        boundingBox[1].x = boundingBox[0].x + boundingBoxWidth;
                      } else if (boundingBox[1].x > document.body.clientWidth) {
                        boundingBox[0].x = document.body.clientWidth - boundingBoxWidth - 20;
                        boundingBox[1].x = boundingBox[0].x + boundingBoxWidth;
                      }
                      if (offset) {
                        if (offset.left) {
                          boundingBox[0].x += offset.left;
                          boundingBox[1].x += offset.left;
                        }
                        if (offset.top) {
                          boundingBox[0].y += offset.top;
                          boundingBox[1].y += offset.top;
                        }
                      }
                      return boundingBox;
                    }
                    _setPositionAtBoundingBox(boundingBox) {
                      this._element.style.left = boundingBox[0].x + "px";
                      this._element.style.top = boundingBox[0].y + "px";
                    }
                    _setArrowPosition(type, containedBoundingBox, targetBoundingBox) {
                      var position = {};
                      switch (type) {
                        case "top":
                          position.top = containedBoundingBox[1].y;
                          position.left = targetBoundingBox.left + targetBoundingBox.width / 2;
                          break;
                        case "left":
                          position.top = (containedBoundingBox[0].y + containedBoundingBox[1].y) / 2 - ARROW_VERTICAL_HEIGHT / 2;
                          position.left = containedBoundingBox[1].x;
                          break;
                        case "right":
                          position.top = (containedBoundingBox[0].y + containedBoundingBox[1].y) / 2 - ARROW_VERTICAL_HEIGHT / 2;
                          position.left = containedBoundingBox[0].x - ARROW_HORIZONTAL_WIDTH / 2 + 1;
                          break;
                        case "bottom":
                          position.top = containedBoundingBox[0].y - ARROW_HORIZONTAL_HEIGHT + 1;
                          position.left = (containedBoundingBox[0].x + containedBoundingBox[1].x) / 2;
                          break;
                      }
                      const arrow = (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".inboxsdk__tooltip_arrow");
                      arrow.style.left = position.left + "px";
                      arrow.style.top = position.top + "px";
                    }
                  }
                })
              ),
              /***/
              8105: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      getAccountUrlPart
                    )
                    /* harmony export */
                  });
                  function getAccountUrlPart() {
                    const delegatedAccountMatch = document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/);
                    if (delegatedAccountMatch) {
                      const delegatedAccountId = delegatedAccountMatch[1];
                      const delegatedAccountNumber = delegatedAccountMatch[2];
                      return `/u/${delegatedAccountNumber}/d/${delegatedAccountId}`;
                    } else {
                      const accountParamMatch = document.location.pathname.match(/(\/u\/\d+)\//i);
                      const accountParam = accountParamMatch ? accountParamMatch[1] : "/u/0";
                      return accountParam;
                    }
                  }
                })
              ),
              /***/
              1158: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(7332);
                  var _getOriginalMessagePage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(2903);
                  module3 = __webpack_require__3.hmd(module3);
                  async function getGmailMessageIdForSyncMessageId(driver, syncMessageID) {
                    const text = await (0, _getOriginalMessagePage__WEBPACK_IMPORTED_MODULE_0__.A)(driver, {
                      syncMessageID
                    });
                    const messageIdMatch = text.match(/<a\b[^<>]+\bhref="\/mail[^"]*(?:\?|&(?:amp;)?)view=att&(?:amp;)?th=([a-f0-9]+)&/i);
                    if (!messageIdMatch) {
                      throw new Error("Failed to find gmail message id for inbox message id");
                    }
                    return messageIdMatch[1];
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module3, getGmailMessageIdForSyncMessageId);
                })
              ),
              /***/
              5187: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(7332);
                  var _getSyncThreadsForSearch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(6743);
                  module3 = __webpack_require__3.hmd(module3);
                  async function getGmailThreadIdForRfcMessageId(driver, rfcMessageId) {
                    const {
                      threads: threadDescriptors
                    } = await (0, _getSyncThreadsForSearch__WEBPACK_IMPORTED_MODULE_0__.A)(driver, "rfc822msgid:" + rfcMessageId);
                    return threadDescriptors[0].oldGmailThreadID;
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module3, getGmailThreadIdForRfcMessageId);
                })
              ),
              /***/
              2903: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(7332);
                  var _gmailAjax__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(5609);
                  module3 = __webpack_require__3.hmd(module3);
                  async function getOriginalMessagePage(driver, options) {
                    const data = {
                      ik: driver.getPageCommunicator().getIkValue(),
                      view: "om"
                    };
                    if (options.oldGmailMessageID) {
                      data.th = options.oldGmailMessageID;
                    } else if (options.syncMessageID) {
                      data.permmsgid = options.syncMessageID;
                    }
                    let url;
                    const delegatedAccountMatch = document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/);
                    if (delegatedAccountMatch) {
                      url = document.location.origin + document.location.pathname;
                    } else {
                      const accountParamMatch = document.location.pathname.match(/(\/u\/\d+)\//i);
                      const accountParam = accountParamMatch ? accountParamMatch[1] : "/u/0";
                      url = `https://mail.google.com/mail${accountParam}`;
                    }
                    const {
                      text
                    } = await (0, _gmailAjax__WEBPACK_IMPORTED_MODULE_0__.A)({
                      url,
                      method: "GET",
                      canRetry: true,
                      data
                    });
                    return text;
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module3, getOriginalMessagePage);
                })
              ),
              /***/
              6743: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__3(7332);
                  var _dom_driver_gmail_gmail_sync_response_processor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(6811);
                  var _gmailAjax__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(5609);
                  var _getAccountUrlPart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(8105);
                  module3 = __webpack_require__3.hmd(module3);
                  async function getSyncThreadsForSearch(driver, searchTerm) {
                    let responseText = null;
                    try {
                      const {
                        text
                      } = await (0, _gmailAjax__WEBPACK_IMPORTED_MODULE_1__.A)({
                        method: "POST",
                        url: `https://mail.google.com/sync${(0, _getAccountUrlPart__WEBPACK_IMPORTED_MODULE_2__.A)()}/i/bv`,
                        headers: {
                          "Content-Type": "application/json",
                          "X-Framework-Xsrf-Token": await driver.getPageCommunicator().getXsrfToken(),
                          "X-Gmail-BTAI": await driver.getPageCommunicator().getBtaiHeader(),
                          "X-Google-BTD": "1"
                        },
                        data: JSON.stringify({
                          "1": {
                            "2": 1,
                            "4": searchTerm
                          }
                        })
                      });
                      responseText = text;
                    } catch (err) {
                      const {
                        text
                      } = await (0, _gmailAjax__WEBPACK_IMPORTED_MODULE_1__.A)({
                        method: "POST",
                        url: `https://mail.google.com/sync${(0, _getAccountUrlPart__WEBPACK_IMPORTED_MODULE_2__.A)()}/i/bv?rt=r&pt=ji`,
                        headers: {
                          "Content-Type": "application/json",
                          "X-Framework-Xsrf-Token": await driver.getPageCommunicator().getXsrfToken(),
                          "X-Gmail-BTAI": await driver.getPageCommunicator().getBtaiHeader(),
                          "X-Google-BTD": "1"
                        },
                        data: JSON.stringify([[null, 51, null, searchTerm]])
                      });
                      responseText = text;
                    }
                    return {
                      threads: (0, _dom_driver_gmail_gmail_sync_response_processor__WEBPACK_IMPORTED_MODULE_0__.Uf)(responseText),
                      _text: responseText
                    };
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_3__.defn)(module3, getSyncThreadsForSearch);
                })
              ),
              /***/
              5609: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      driver_common_gmailAjax
                    )
                  });
                  var js = __webpack_require__3(7332);
                  var kefir_esm = __webpack_require__3(7249);
                  ;
                  function imageRequest(url) {
                    return new Promise((resolve, reject) => {
                      const img = new Image();
                      img.addEventListener("load", () => resolve(img));
                      img.addEventListener("error", reject);
                      img.src = url;
                    });
                  }
                  ;
                  function rateLimitQueuer(fn, period, count) {
                    let callTimestamps = [];
                    const queue = [];
                    let runningQueue = false;
                    function runJob() {
                      const job = queue.shift();
                      job();
                      if (queue.length) {
                        runQueue();
                      } else {
                        runningQueue = false;
                      }
                    }
                    function runQueue() {
                      runningQueue = true;
                      const timeToWait = getTimeToUnqueueItem();
                      if (timeToWait > 0) {
                        setTimeout(runJob, timeToWait);
                      } else {
                        runJob();
                      }
                    }
                    function getTimeToUnqueueItem() {
                      const now = Date.now();
                      const periodAgo = now - period;
                      callTimestamps = callTimestamps.filter((time) => time > periodAgo);
                      if (callTimestamps.length >= count) {
                        return callTimestamps[0] - periodAgo;
                      }
                      return -1;
                    }
                    return function attempt() {
                      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                        args[_key] = arguments[_key];
                      }
                      let job;
                      const promise = new Promise((resolve, reject) => {
                        job = () => {
                          callTimestamps.push(Date.now());
                          try {
                            resolve(fn.apply(this, args));
                          } catch (err) {
                            reject(err);
                          }
                        };
                      });
                      if (!job) throw new Error("Should not happen");
                      queue.push(job);
                      if (!runningQueue) {
                        runQueue();
                      }
                      return promise;
                    };
                  }
                  var ajax = __webpack_require__3(8587);
                  ;
                  module3 = __webpack_require__3.hmd(module3);
                  const IMAGE_REQUEST_TIMEOUT = 1e3 * 60;
                  const limitedAjax = rateLimitQueuer(rateLimitQueuer(ajax.A, 1e3, 7), 10 * 1e3, 50);
                  async function gmailAjax(opts) {
                    if (!/^https:\/\/mail\.google\.com(?:$|\/)/.test(opts.url)) {
                      throw new Error("Should not happen: gmailAjax called with non-gmail url");
                    }
                    if (document.location.origin === "https://mail.google.com") {
                      return await limitedAjax(opts);
                    }
                    try {
                      return await limitedAjax({
                        ...opts,
                        canRetry: false
                      });
                    } catch (e) {
                      if (e && e.status === 0) {
                        try {
                          await kefir_esm["default"].fromPromise(imageRequest("https://mail.google.com/mail/u/0/")).merge(kefir_esm["default"].later(IMAGE_REQUEST_TIMEOUT, void 0)).take(1).takeErrors(1).toPromise();
                        } catch (e2) {
                        }
                        return await limitedAjax(opts);
                      } else if (e && typeof e.status === "number" && e.status >= 500) {
                        return await limitedAjax(opts);
                      } else {
                        throw e;
                      }
                    }
                  }
                  const driver_common_gmailAjax = (0, js.defn)(module3, gmailAjax);
                })
              ),
              /***/
              2621: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      updateIcon
                    )
                    /* harmony export */
                  });
                  function createIconElement(containerElement, append, insertBeforeEl) {
                    const iconElement = document.createElement("div");
                    iconElement.classList.add("inboxsdk__button_icon");
                    iconElement.innerHTML = "&nbsp;";
                    if (append) {
                      containerElement.appendChild(iconElement);
                    } else {
                      containerElement.insertBefore(iconElement, insertBeforeEl || containerElement.firstElementChild);
                    }
                    return iconElement;
                  }
                  function createIconImgElement(iconUrl, containerElement, append, insertBeforeEl) {
                    const iconElement = createIconElement(containerElement, append, insertBeforeEl);
                    iconElement.innerHTML = "";
                    const iconImgElement = document.createElement("img");
                    iconImgElement.classList.add("inboxsdk__button_iconImg");
                    iconImgElement.src = iconUrl;
                    iconElement.appendChild(iconImgElement);
                    return iconElement;
                  }
                  function updateIcon(iconSettings, containerElement, append, newIconClass, newIconUrl, insertBeforeEl, newIconHtml, iconLiga) {
                    if (append && insertBeforeEl) throw new Error("append and insertBeforeEl should not be used together");
                    if (newIconHtml && (newIconClass || newIconUrl)) {
                      throw new Error("iconHtml can not be used together with iconClass or iconUrl");
                    }
                    if (newIconHtml) {
                      if (!iconSettings.iconHtmlElement) {
                        iconSettings.iconHtmlElement = createIconElement(containerElement, append, insertBeforeEl);
                      }
                      iconSettings.iconHtmlElement.innerHTML = newIconHtml;
                      if (iconSettings.iconImgElement) {
                        iconSettings.iconImgElement.remove();
                        iconSettings.iconImgElement = null;
                      }
                      if (iconSettings.iconElement) {
                        iconSettings.iconElement.remove();
                        iconSettings.iconElement = null;
                      }
                    } else if (newIconUrl) {
                      if (!iconSettings.iconImgElement) {
                        iconSettings.iconImgElement = createIconImgElement(newIconUrl, containerElement, append, insertBeforeEl);
                      } else {
                        iconSettings.iconImgElement.firstElementChild.src = newIconUrl;
                      }
                      iconSettings.iconImgElement.setAttribute("class", `inboxsdk__button_icon ${newIconClass || ""}`);
                      if (iconSettings.iconHtmlElement) {
                        iconSettings.iconHtmlElement.remove();
                        iconSettings.iconHtmlElement = null;
                      }
                      if (iconSettings.iconElement) {
                        iconSettings.iconElement.remove();
                        iconSettings.iconElement = null;
                      }
                    } else if (newIconClass) {
                      if (!iconSettings.iconElement) {
                        iconSettings.iconElement = createIconElement(containerElement, append, insertBeforeEl);
                      }
                      if (iconLiga) {
                        iconSettings.iconElement.innerText = iconLiga;
                      }
                      iconSettings.iconElement.setAttribute("class", "inboxsdk__button_icon " + newIconClass);
                      if (iconSettings.iconHtmlElement) {
                        iconSettings.iconHtmlElement.remove();
                        iconSettings.iconHtmlElement = null;
                      }
                      if (iconSettings.iconImgElement) {
                        iconSettings.iconImgElement.remove();
                        iconSettings.iconImgElement = null;
                      }
                    } else {
                      if (iconSettings.iconElement) {
                        iconSettings.iconElement.remove();
                        iconSettings.iconElement = null;
                      }
                      if (iconSettings.iconHtmlElement) {
                        iconSettings.iconHtmlElement.remove();
                        iconSettings.iconHtmlElement = null;
                      }
                      if (iconSettings.iconImgElement) {
                        iconSettings.iconImgElement.remove();
                        iconSettings.iconImgElement = null;
                      }
                    }
                  }
                })
              ),
              /***/
              1136: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      delayAsap
                    )
                    /* harmony export */
                  });
                  var asap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(4622);
                  var asap__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(asap__WEBPACK_IMPORTED_MODULE_0__);
                  var kefir__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(7249);
                  function delayAsap(value) {
                    return kefir__WEBPACK_IMPORTED_MODULE_1__.stream((emitter) => {
                      asap__WEBPACK_IMPORTED_MODULE_0___default()(() => {
                        emitter.emit(value);
                        emitter.end();
                      });
                    });
                  }
                })
              ),
              /***/
              8416: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      blockAndReemiteKeyboardEvents
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  function blockAndReemiteKeyboardEvents(element) {
                    kefir__WEBPACK_IMPORTED_MODULE_0__["default"].merge([kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "keypress"), kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "keydown"), kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "keyup")]).onValue((event) => {
                      event.stopPropagation();
                      const fakeEvent = new KeyboardEvent(event.type, {
                        bubbles: true
                      });
                      Object.defineProperties(fakeEvent, {
                        cancelable: {
                          value: event.cancelable
                        },
                        bubbles: {
                          value: event.bubbles
                        },
                        target: {
                          value: event.target
                        },
                        detail: {
                          value: event.detail
                        },
                        key: {
                          value: event.key
                        },
                        code: {
                          value: event.code
                        },
                        location: {
                          value: event.location
                        },
                        ctrlKey: {
                          value: event.ctrlKey
                        },
                        shiftKey: {
                          value: event.shiftKey
                        },
                        altKey: {
                          value: event.altKey
                        },
                        metaKey: {
                          value: event.metaKey
                        },
                        repeat: {
                          value: event.repeat
                        },
                        isComposing: {
                          value: event.isComposing
                        },
                        charCode: {
                          value: event.charCode
                        },
                        keyCode: {
                          value: event.keyCode
                        },
                        which: {
                          value: event.which
                        }
                      });
                      document.dispatchEvent(fakeEvent);
                    });
                  }
                })
              ),
              /***/
              5389: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      insertElementInOrder
                    )
                    /* harmony export */
                  });
                  var transducers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(6046);
                  var transducers_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(transducers_js__WEBPACK_IMPORTED_MODULE_0__);
                  const DEFAULT_ORDER_ATTRS = ["data-group-order-hint", "data-order-hint", "data-insertion-order-hint"];
                  function insertElementInOrder(container, el) {
                    let orderAttrs = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : DEFAULT_ORDER_ATTRS;
                    let insertBeforeNonSdk = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false;
                    const insertBeforeElement = transducers_js__WEBPACK_IMPORTED_MODULE_0___default().toArray(Array.prototype.slice.call(container.children), transducers_js__WEBPACK_IMPORTED_MODULE_0___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_0___default().filter((cel) => {
                      let hadAnyOrderAttrs = false;
                      for (const name of orderAttrs) {
                        const attr = el.getAttribute(name);
                        const cattr = cel.getAttribute(name);
                        if (attr == null || cattr == null) continue;
                        hadAnyOrderAttrs = true;
                        let comparison;
                        if (!isNaN(parseFloat(attr)) && !isNaN(parseFloat(cattr))) {
                          comparison = parseFloat(cattr) - parseFloat(attr);
                        } else {
                          comparison = cattr.localeCompare(attr);
                        }
                        if (comparison > 0) return true;
                        if (comparison < 0) return false;
                      }
                      if (insertBeforeNonSdk) {
                        return !hadAnyOrderAttrs;
                      } else {
                        return false;
                      }
                    }), transducers_js__WEBPACK_IMPORTED_MODULE_0___default().take(1)))[0];
                    container.insertBefore(el, insertBeforeElement);
                  }
                })
              ),
              /***/
              3166: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(7332);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  module3 = __webpack_require__3.hmd(module3);
                  var insertHTMLatCursor = ud__WEBPACK_IMPORTED_MODULE_1__.defn(module3, function insertHTMLatCursor2(element, html, oldRange) {
                    element.focus();
                    if (element instanceof HTMLTextAreaElement) {
                      var oldStart = element.selectionStart;
                      if (element.selectionStart < element.selectionEnd) {
                        element.value = element.value.substring(0, element.selectionStart) + element.value.substring(element.selectionEnd);
                      }
                      element.value = element.value.substring(0, oldStart) + html + element.value.substring(oldStart);
                      element.selectionStart = oldStart + html.length;
                      element.selectionEnd = oldStart + html.length;
                    } else {
                      var editable = null;
                      if (element.getSelection) {
                        editable = element;
                      } else if (element.ownerDocument && element.ownerDocument.getSelection) {
                        editable = element.ownerDocument;
                      }
                      if (editable) {
                        var sel = editable.getSelection();
                        if (sel.getRangeAt && sel.rangeCount) {
                          var range = oldRange || sel.getRangeAt(0);
                          range.deleteContents();
                          var frag;
                          if (html instanceof DocumentFragment) {
                            frag = html;
                          } else {
                            frag = document.createDocumentFragment();
                            if (html instanceof HTMLElement) {
                              frag.appendChild(html);
                            } else {
                              var el = document.createElement("div");
                              el.innerHTML = html;
                              var node;
                              while (node = el.firstChild) {
                                frag.appendChild(node);
                              }
                            }
                          }
                          var firstChild = frag.firstElementChild;
                          range.insertNode(frag);
                          var event = document.createEvent("MouseEvents");
                          event.initMouseEvent("mousedown", false, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
                          event.preventDefault();
                          element.dispatchEvent(event);
                          range.collapse(false);
                          sel.removeAllRanges();
                          sel.addRange(range);
                          var nextUserCursorMove = kefir__WEBPACK_IMPORTED_MODULE_0__["default"].merge([kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "mousedown"), kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "keypress")]);
                          kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "focus").takeUntilBy(nextUserCursorMove).onValue(function() {
                            sel.removeAllRanges();
                            sel.addRange(range);
                          });
                          return firstChild;
                        }
                      }
                    }
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = insertHTMLatCursor;
                })
              ),
              /***/
              5235: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      keyboardShortcutStream
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  var combokeys_capture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(4400);
                  var combokeys_capture__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(combokeys_capture__WEBPACK_IMPORTED_MODULE_1__);
                  const combokeys = typeof document !== "undefined" && new (combokeys_capture__WEBPACK_IMPORTED_MODULE_1___default())(document.body, true);
                  function keyboardShortcutStream(chord) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.stream((emitter) => {
                      return combokeys && combokeys.bind(chord, function(domEvent) {
                        emitter.emit(domEvent);
                        return false;
                      }, "keydown");
                    });
                  }
                })
              ),
              /***/
              2843: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      makeElementChildStream
                    )
                    /* harmony export */
                  });
                  var asap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(4622);
                  var asap__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(asap__WEBPACK_IMPORTED_MODULE_0__);
                  var kefir__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(7249);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__3.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_2__);
                  function makeElementChildStream(element) {
                    if (!element || !element.nodeType) {
                      throw new Error("Expected element, got " + String(element));
                    }
                    return kefir__WEBPACK_IMPORTED_MODULE_1__.stream((emitter) => {
                      const removalStreams = /* @__PURE__ */ new Map();
                      let ended = false;
                      function newEl(el) {
                        if (el.nodeType !== 1) return;
                        if (removalStreams.has(el)) {
                          throwLater(new Error("Already had removalStream for element with class " + el.className));
                        }
                        const removalStream = kefir_stopper__WEBPACK_IMPORTED_MODULE_2___default()();
                        removalStreams.set(el, removalStream);
                        try {
                          emitter.emit({
                            el,
                            removalStream
                          });
                        } catch (err) {
                          throwLater(err);
                        }
                      }
                      function removedEl(el) {
                        if (el.nodeType !== 1) return;
                        const removalStream = removalStreams.get(el);
                        removalStreams.delete(el);
                        if (removalStream) {
                          try {
                            removalStream.destroy();
                          } catch (err) {
                            throwLater(err);
                          }
                        } else {
                          throwLater(new Error("Could not find removalStream for element with class " + el.className));
                        }
                      }
                      const observer = new MutationObserver(function(mutations) {
                        mutations.forEach((mutation) => {
                          Array.prototype.forEach.call(mutation.addedNodes, newEl);
                          Array.prototype.forEach.call(mutation.removedNodes, removedEl);
                        });
                      });
                      asap__WEBPACK_IMPORTED_MODULE_0___default()(() => {
                        if (!ended) {
                          observer.observe(element, {
                            childList: true
                          });
                          Array.prototype.slice.call(element.children).forEach(newEl);
                        }
                      });
                      return function() {
                        ended = true;
                        observer.disconnect();
                        asap__WEBPACK_IMPORTED_MODULE_0___default()(() => {
                          removalStreams.forEach((removalStream) => {
                            removalStream.destroy();
                          });
                        });
                      };
                    });
                  }
                  function throwLater(err) {
                    setTimeout(() => {
                      throw err;
                    }, 1);
                  }
                })
              ),
              /***/
              3197: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      makeMutationObserverChunkedStream
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  function makeMutationObserverChunkedStream(element, options) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.stream((emitter) => {
                      const observer = new MutationObserver((mutations) => {
                        emitter.emit(mutations instanceof Array ? mutations : Array.from(mutations));
                      });
                      observer.observe(element, options);
                      return () => {
                        observer.disconnect();
                      };
                    });
                  }
                })
              ),
              /***/
              5938: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      makeMutationObserverStream
                    )
                    /* harmony export */
                  });
                  var _make_mutation_observer_chunked_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(3197);
                  function makeMutationObserverStream(element, options) {
                    return (0, _make_mutation_observer_chunked_stream__WEBPACK_IMPORTED_MODULE_0__.A)(element, options).flatten();
                  }
                })
              ),
              /***/
              8734: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var _from_event_target_capture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(3985);
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(7332);
                  module3 = __webpack_require__3.hmd(module3);
                  const pageMouseUps = (0, _from_event_target_capture__WEBPACK_IMPORTED_MODULE_0__.A)(document.body, "mouseup");
                  const onMouseDownAndUp = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module3, function onMouseDownAndUp2(el) {
                    const elMouseDowns = (0, _from_event_target_capture__WEBPACK_IMPORTED_MODULE_0__.A)(el, "mousedown");
                    return elMouseDowns.flatMapLatest(() => pageMouseUps.take(1).filter((event) => el.contains(event.target)));
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = onMouseDownAndUp;
                })
              ),
              /***/
              9860: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      querySelector
                    ),
                    /* harmony export */
                    a: () => (
                      /* binding */
                      SelectorError
                    )
                    /* harmony export */
                  });
                  class SelectorError extends Error {
                    name = "SelectorError";
                    constructor(selector, options) {
                      super(`Failed to find element with selector: ${selector}`, options);
                    }
                  }
                  function querySelector(el, selector) {
                    const r = el.querySelector(selector);
                    if (!r) throw new SelectorError(selector);
                    return r;
                  }
                })
              ),
              /***/
              4603: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    jp: () => (
                      /* binding */
                      simulateClick
                    ),
                    /* harmony export */
                    zU: () => (
                      /* binding */
                      simulateHover
                    )
                    /* harmony export */
                  });
                  function simulateMouseEvent(element, mouseEventName) {
                    const event = document.createEvent("MouseEvents");
                    event.initMouseEvent(mouseEventName, true, true, window, 0, element.offsetLeft, element.offsetTop, 0, 0, false, false, false, false, 0, null);
                    element.dispatchEvent(event);
                  }
                  function simulateHover(element) {
                    simulateMouseEvent(element, "mouseover");
                  }
                  function simulateClick(element) {
                    simulateMouseEvent(element, "mousedown");
                    simulateMouseEvent(element, "mouseup");
                    simulateMouseEvent(element, "click");
                    simulateMouseEvent(element, "mouseleave");
                    simulateMouseEvent(element, "mouseout");
                    element.blur();
                  }
                })
              ),
              /***/
              3324: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      extractContactFromEmailContactString
                    )
                  });
                  ;
                  const re = /^([^<>()[\]\\,;:\s"]+|".+")@[^\s<>]+$/;
                  function isValidEmail(candidate) {
                    if (candidate == null) {
                      return false;
                    }
                    return re.test(candidate);
                  }
                  ;
                  function extractContactFromEmailContactString(contactInfoString) {
                    let name = null;
                    let emailAddress = null;
                    const contactInfoParts = contactInfoString.split("<");
                    const firstPartTrimmed = contactInfoParts[0].replace(/\u202c/g, "").trim();
                    if (contactInfoParts.length > 1) {
                      name = firstPartTrimmed;
                      emailAddress = contactInfoParts[1].split(">")[0].replace(/\u202c/g, "").trim();
                    } else {
                      if (isValidEmail(firstPartTrimmed)) {
                        emailAddress = firstPartTrimmed;
                      } else {
                        throw Object.assign(new Error("Invalid email address"), {
                          firstPartTrimmed
                        });
                      }
                    }
                    return {
                      name,
                      emailAddress
                    };
                  }
                })
              ),
              /***/
              652: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      fakeWindowResize
                    )
                    /* harmony export */
                  });
                  function fakeWindowResize() {
                    const event = document.createEvent("HTMLEvents");
                    event.initEvent("resize", true, false);
                    window.dispatchEvent(event);
                  }
                })
              ),
              /***/
              3985: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      fromEventTargetCapture
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  function fromEventTargetCapture(target, eventName) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.stream((emitter) => {
                      function sink(event) {
                        emitter.value(event);
                      }
                      target.addEventListener(eventName, sink, true);
                      return () => {
                        target.removeEventListener(eventName, sink, true);
                      };
                    });
                  }
                })
              ),
              /***/
              6907: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  var ud__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__3(7332);
                  var _dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(9860);
                  var _dom_make_mutation_observer_chunked_stream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(3197);
                  module3 = __webpack_require__3.hmd(module3);
                  const extId = "" + Math.random();
                  const X_URL = "https://ssl.gstatic.com/ui/v1/icons/common/x_8px.png";
                  const handleComposeLinkChips = (0, ud__WEBPACK_IMPORTED_MODULE_3__.defn)(module3, function(composeView) {
                    try {
                      composeView.getBodyElement();
                    } catch (err) {
                      return;
                    }
                    const mainElement = composeView.getElement();
                    _waitToClaim(mainElement).takeUntilBy(composeView.getStopper()).onValue(() => {
                      mainElement.classList.add("inboxsdk__ensure_link_active");
                      composeView.getStopper().onValue(() => {
                        mainElement.classList.remove("inboxsdk__ensure_link_active");
                      });
                      composeView.getEventStream().filter((event) => event.eventName === "bodyChanged").toProperty(() => null).debounce(100, {
                        immediate: true
                      }).takeUntilBy(composeView.getStopper()).onValue(() => {
                        doFixing(composeView);
                      });
                      composeView.getEventStream().filter((event) => event.eventName === "presending").onValue(() => {
                        doPresendFixing(composeView);
                      });
                    });
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = handleComposeLinkChips;
                  const doFixing = (0, ud__WEBPACK_IMPORTED_MODULE_3__.defn)(module3, function(composeView) {
                    const bodyElement = composeView.getBodyElement();
                    const chips = _getChipElements(bodyElement);
                    chips.filter(_isNotEnhanced).forEach(_addEnhancements);
                  }, "doFixing");
                  const doPresendFixing = (0, ud__WEBPACK_IMPORTED_MODULE_3__.defn)(module3, function(composeView) {
                    const bodyElement = composeView.getBodyElement();
                    const chips = _getChipElements(bodyElement);
                    chips.filter(_isOurEnhanced).forEach((chip) => {
                      const xBtn = chip.querySelector(`img[src="${X_URL}"]`);
                      if (xBtn) {
                        xBtn.remove();
                      }
                      const title = chip.querySelector("a > span");
                      if (title) {
                        title.style.textDecoration = "none";
                      }
                    });
                  }, "doPresendFixing");
                  function _getChipElements(bodyElement) {
                    const chipInnerEls = bodyElement.querySelectorAll("[hspace=inboxsdk__chip]");
                    return [...Array.from(chipInnerEls).map((x2) => x2.parentElement), ...Array.from(bodyElement.querySelectorAll("[hspace=inboxsdk__chip_main]"))];
                  }
                  function _waitToClaim(el) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.later(0, void 0).merge((0, _dom_make_mutation_observer_chunked_stream__WEBPACK_IMPORTED_MODULE_2__.A)(el, {
                      attributes: true,
                      attributeFilter: ["class"]
                    })).map(() => !el.classList.contains("inboxsdk__ensure_link_active")).filter(Boolean).take(1);
                  }
                  function _isNotEnhanced(chipElement) {
                    var claim = chipElement.getAttribute("data-sdk-linkchip-claimed");
                    if (extId === claim) {
                      return !chipElement._linkChipEnhancedByThisExtension;
                    }
                    return claim == null;
                  }
                  function _isOurEnhanced(chipElement) {
                    return !!chipElement._linkChipEnhancedByThisExtension;
                  }
                  function _addEnhancements(chipElement) {
                    const anchor = chipElement.querySelector("a");
                    if (anchor) {
                      anchor.addEventListener("mousedown", function(e) {
                        e.stopImmediatePropagation();
                      }, true);
                      anchor.addEventListener("click", function(e) {
                        e.stopImmediatePropagation();
                      }, true);
                    }
                    const xElement = document.createElement("img");
                    xElement.src = X_URL;
                    xElement.setAttribute("style", "opacity: 0.55; cursor: pointer; float: right; position: relative; top: -1px;");
                    xElement.addEventListener("mousedown", function() {
                      chipElement.remove();
                    }, true);
                    xElement.addEventListener("click", function(e) {
                      e.stopImmediatePropagation();
                      e.preventDefault();
                    }, true);
                    chipElement.addEventListener("mouseenter", function() {
                      chipElement.appendChild(xElement);
                      (0, _dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_1__.A)(chipElement, "a > span").style.textDecoration = "underline";
                    });
                    chipElement.addEventListener("mouseleave", function() {
                      xElement.remove();
                      (0, _dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_1__.A)(chipElement, "a > span").style.textDecoration = "none";
                    });
                    chipElement.addEventListener("mousedown", function(e) {
                      e.preventDefault();
                    });
                    chipElement.contentEditable = "false";
                    chipElement.setAttribute("data-sdk-linkchip-claimed", extId);
                    chipElement._linkChipEnhancedByThisExtension = true;
                  }
                })
              ),
              /***/
              3247: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      HandlerRegistry
                    )
                    /* harmony export */
                  });
                  var lodash_remove__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(2036);
                  var lodash_remove__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(lodash_remove__WEBPACK_IMPORTED_MODULE_0__);
                  var asap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(4622);
                  var asap__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(asap__WEBPACK_IMPORTED_MODULE_1__);
                  var _logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(2617);
                  class HandlerRegistry {
                    _targets = [];
                    _pendingHandlers = [];
                    _handlers = [];
                    registerHandler(handler) {
                      if (this._pendingHandlers.indexOf(handler) === -1) {
                        this._pendingHandlers.push(handler);
                        asap__WEBPACK_IMPORTED_MODULE_1___default()(() => {
                          const pendingHandlers = this._pendingHandlers.slice();
                          for (let ii = pendingHandlers.length - 1; ii >= 0; ii--) {
                            const handler2 = pendingHandlers[ii];
                            if (this._handlers.indexOf(handler2) === -1) {
                              this._handlers.push(handler2);
                              this._informHandlerOfTargets(handler2);
                            }
                          }
                          this._pendingHandlers = [];
                        });
                      }
                      return () => {
                        lodash_remove__WEBPACK_IMPORTED_MODULE_0___default()(this._pendingHandlers, (h) => h === handler);
                        lodash_remove__WEBPACK_IMPORTED_MODULE_0___default()(this._handlers, (h) => h === handler);
                      };
                    }
                    addTarget(target) {
                      this._targets.push(target);
                      if (target && typeof target === "object" && typeof target.on === "function") {
                        target.on("destroy", () => {
                          this.removeTarget(target);
                        });
                      }
                      this._informHandlersOfTarget(target);
                    }
                    removeTarget(target) {
                      lodash_remove__WEBPACK_IMPORTED_MODULE_0___default()(this._targets, (t2) => t2 === target);
                    }
                    dumpHandlers() {
                      this._pendingHandlers = [];
                      this._handlers = [];
                    }
                    _informHandlerOfTargets(handler) {
                      const targets = this._targets.slice();
                      for (let ii = 0; ii < targets.length; ii++) {
                        _tryCatch(handler, targets[ii]);
                      }
                    }
                    _informHandlersOfTarget(target) {
                      const handlers = this._handlers.slice();
                      for (let ii = 0; ii < handlers.length; ii++) {
                        _tryCatch(handlers[ii], target);
                      }
                    }
                  }
                  function _tryCatch(fn, arg) {
                    try {
                      fn(arg);
                    } catch (err) {
                      _logger__WEBPACK_IMPORTED_MODULE_2__.A.error(err);
                    }
                  }
                })
              ),
              /***/
              5183: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      idMap
                    ),
                    r: () => (
                      /* binding */
                      legacyIdMap
                    )
                  });
                  var gmail_namespaceObject = {};
                  __webpack_require__3.r(gmail_namespaceObject);
                  __webpack_require__3.d(gmail_namespaceObject, {
                    app_sidebar: () => gmail.nc,
                    app_sidebar_container: () => gmail.zC,
                    app_sidebar_content_area: () => gmail.th,
                    app_sidebar_content_panel: () => gmail.E3,
                    app_sidebar_content_panel_content: () => gmail.i1,
                    app_sidebar_content_panel_grip: () => gmail.PD,
                    app_sidebar_content_panel_title: () => gmail.Pl,
                    app_sidebar_content_panel_title_icon: () => gmail.lt,
                    app_sidebar_content_panel_title_icon_container: () => gmail.x1,
                    app_sidebar_content_panel_title_text: () => gmail.bh,
                    app_sidebar_content_panel_toggle: () => gmail.V,
                    app_sidebar_content_panel_toggle_button: () => gmail.Y8,
                    app_sidebar_content_panel_top_line: () => gmail.T6,
                    app_sidebar_in_use: () => gmail.JR,
                    app_sidebar_main: () => gmail.dG,
                    app_sidebar_waiting_platform: () => gmail.$8,
                    companion_container_app_sidebar_in_use: () => gmail.OW,
                    container_app_sidebar_no_icons: () => gmail.qX,
                    "default": () => style_gmail,
                    dragged: () => gmail.rz,
                    expanded: () => gmail.sz,
                    hideTitleBar: () => gmail.uj,
                    showControls: () => gmail.mz,
                    sidebar_button_container: () => gmail.Go,
                    sidebar_iconArea: () => gmail.Yf,
                    thread_noticeBar: () => gmail.vQ
                  });
                  var injectStylesIntoStyleTag = __webpack_require__3(6186);
                  var injectStylesIntoStyleTag_default = /* @__PURE__ */ __webpack_require__3.n(injectStylesIntoStyleTag);
                  var styleDomAPI = __webpack_require__3(2155);
                  var styleDomAPI_default = /* @__PURE__ */ __webpack_require__3.n(styleDomAPI);
                  var setAttributesWithoutAttributes = __webpack_require__3(8626);
                  var setAttributesWithoutAttributes_default = /* @__PURE__ */ __webpack_require__3.n(setAttributesWithoutAttributes);
                  var insertStyleElement = __webpack_require__3(8990);
                  var insertStyleElement_default = /* @__PURE__ */ __webpack_require__3.n(insertStyleElement);
                  var styleTagTransform = __webpack_require__3(9827);
                  var styleTagTransform_default = /* @__PURE__ */ __webpack_require__3.n(styleTagTransform);
                  var gmail = __webpack_require__3(7510);
                  ;
                  var options = {};
                  options.styleTagTransform = styleTagTransform_default();
                  options.setAttributes = setAttributesWithoutAttributes_default();
                  options.insert = (htmlElement) => {
                    htmlElement.setAttribute(
                      "data-inboxsdk-version",
                      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- this is injected by webpack
                      ///@ts-ignore
                      "2.2.7-1753737313283-f941d482eba8eb97"
                    );
                    document.head.append(htmlElement);
                  };
                  options.domAPI = styleDomAPI_default();
                  options.insertStyleElement = insertStyleElement_default();
                  var update = injectStylesIntoStyleTag_default()(gmail.Ay, options);
                  const style_gmail = gmail.Ay && gmail.Ay.locals ? gmail.Ay.locals : void 0;
                  var sha256 = __webpack_require__3(6049);
                  var sha256_default = /* @__PURE__ */ __webpack_require__3.n(sha256);
                  ;
                  const cache = /* @__PURE__ */ new Map();
                  let seed = null;
                  function legacyIdMap(name) {
                    const id = cache.get(name);
                    if (id != null) return id;
                    if (seed == null) {
                      seed = document.documentElement.getAttribute("data-map-id");
                      if (seed == null) {
                        const hasher2 = new (sha256_default())();
                        hasher2.update("PWVe" + Math.floor(Date.now() / (1e3 * 60 * 60)) + "PYiE0");
                        seed = hasher2.digest("hex").slice(0, 16) + (false ? 0 : "");
                        document.documentElement.setAttribute("data-map-id", seed);
                      }
                    }
                    const hasher = new (sha256_default())();
                    hasher.update("4iYi29W" + name + ":" + seed + "jn2mPvTG");
                    const newId = hasher.digest("hex").slice(0, 16).replace(/[0-9]/g, (match) => String.fromCharCode("A".charCodeAt(0) + Number(match)));
                    cache.set(name, newId);
                    return newId;
                  }
                  function idMap(id) {
                    return gmail_namespaceObject[id];
                  }
                })
              ),
              /***/
              3174: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7332);
                  var auto_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(1812);
                  var auto_html__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(auto_html__WEBPACK_IMPORTED_MODULE_1__);
                  module3 = __webpack_require__3.hmd(module3);
                  var insertLinkChipIntoBody = ud__WEBPACK_IMPORTED_MODULE_0__.defn(module3, function(composeViewDriver, options) {
                    composeViewDriver.focus();
                    var chipElement = _getChipElement(options);
                    var frag = document.createDocumentFragment();
                    frag.appendChild(document.createTextNode("\u200B"));
                    frag.appendChild(chipElement);
                    frag.appendChild(document.createTextNode("\u200B"));
                    composeViewDriver.insertBodyHTMLAtCursor(frag);
                    if (!composeViewDriver.isFullscreen() && !composeViewDriver.isInlineReplyForm() && document.activeElement !== composeViewDriver.getBodyElement()) {
                      composeViewDriver.setMinimized(true);
                      composeViewDriver.setMinimized(false);
                    }
                    composeViewDriver.focus();
                    return chipElement;
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = insertLinkChipIntoBody;
                  function _getChipElement(options) {
                    var chipElement = document.createElement("div");
                    var iconHtml = options.iconUrl ? auto_html__WEBPACK_IMPORTED_MODULE_1___default()`
<img style="height:16px; width:16px; vertical-align: bottom; border: none;" height="16px" width="16px" src="${options.iconUrl}">&nbsp;
` : "";
                    var chipHTML = auto_html__WEBPACK_IMPORTED_MODULE_1___default()`
<div contenteditable="false" class="inboxsdk__compose_linkChip"
style="width: 396px; height: 18px; max-height: 18px; padding: 5px; color: rgb(34, 34, 34); font-family: arial; font-style: normal; font-weight: bold; font-size: 13px; cursor: default; border: 1px solid rgb(221, 221, 221); line-height: 1; background-color: rgb(245, 245, 245);" hspace="inboxsdk__chip_main">
  <a href="${options.url}" target="_blank" style=" display:inline-block; max-width: 366px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-height: 1.2em; text-decoration: none; cursor: pointer; padding: 1px 0; border: none; ">
    ${{
                      __html: iconHtml
                    }}
    <span dir="ltr" style="color: rgb(17, 85, 204); text-decoration: none; vertical-align: bottom;">${options.text}</span>
  </a>
</div>
`;
                    chipElement.innerHTML = chipHTML;
                    return chipElement.children[0];
                  }
                })
              ),
              /***/
              8579: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      isStreakAppId
                    )
                    /* harmony export */
                  });
                  var sha_js_sha256__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(6049);
                  var sha_js_sha256__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(sha_js_sha256__WEBPACK_IMPORTED_MODULE_0__);
                  function hash(x2) {
                    const hasher = new (sha_js_sha256__WEBPACK_IMPORTED_MODULE_0___default())();
                    hasher.update("bdnanNrDjv" + x2);
                    return hasher.digest("hex").slice(0, 32);
                  }
                  function isStreakAppId(appId) {
                    return hash(appId) === "f471fe7b7343b47a202437c3962cc335";
                  }
                })
              ),
              /***/
              2617: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      Logger
                    )
                  });
                  var sha256 = __webpack_require__3(6049);
                  var sha256_default = /* @__PURE__ */ __webpack_require__3.n(sha256);
                  var ajax = __webpack_require__3(8587);
                  var once = __webpack_require__3(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__3.n(once);
                  ;
                  const getExtensionId = once_default()(() => {
                    try {
                      const chrome2 = globalThis.chrome;
                      if (chrome2?.runtime?.getURL) {
                        return chrome2.runtime.getURL("");
                      }
                      if (chrome2?.extension?.getURL) {
                        return chrome2.extension.getURL("");
                      }
                    } catch (e) {
                      console.error("Failed to read extension ID:", e);
                    }
                    return null;
                  });
                  getExtensionId();
                  const get_extension_id = getExtensionId;
                  ;
                  function getSessionId() {
                    const attrValue = typeof document !== "undefined" && document.documentElement.getAttribute("data-inboxsdk-session-id");
                    if (typeof attrValue === "string") {
                      return attrValue;
                    } else {
                      const sessionId2 = Date.now() + "-" + Math.random();
                      if (typeof document !== "undefined") {
                        document.documentElement.setAttribute("data-inboxsdk-session-id", sessionId2);
                      }
                      return sessionId2;
                    }
                  }
                  ;
                  function rateLimit(fn, period, count) {
                    let calls = [];
                    return function() {
                      const now = Date.now();
                      calls = calls.filter((time) => time > now - period);
                      if (calls.length >= count) {
                        throw new Error("Function rate limit exceeded");
                      }
                      calls.push(now);
                      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                        args[_key] = arguments[_key];
                      }
                      return fn.apply(this, args);
                    };
                  }
                  ;
                  function getStackTrace() {
                    const err = new Error("Stack saver");
                    return ("" + err.stack).replace(/^([^\n]*\n){2}/, "");
                  }
                  var version2 = __webpack_require__3(4782);
                  var isObject = __webpack_require__3(5603);
                  var isObject_default = /* @__PURE__ */ __webpack_require__3.n(isObject);
                  ;
                  const sessionId = getSessionId();
                  function logError(err, details, context) {
                    if (typeof document === "undefined") {
                      throw err;
                    }
                    try {
                      if (haveWeSeenThisErrorAlready(err)) {
                        return;
                      } else {
                        markErrorAsSeen(err);
                      }
                      if (!(err instanceof Error)) {
                        console.warn("First parameter to Logger.error was not an error object:", err);
                        err = new Error("Logger.error called with non-error: " + err);
                        markErrorAsSeen(err);
                      }
                      const {
                        appIds,
                        implVersion,
                        userEmailHash
                      } = context;
                      const loaderVersion = context.loaderVersion || version2.Q;
                      const sentByApp = !!context.sentByApp;
                      const errorProperties = {};
                      for (const name in err) {
                        if (Object.prototype.hasOwnProperty.call(err, name)) {
                          try {
                            const value = err[name];
                            JSON.stringify(value);
                            errorProperties[name] = value;
                          } catch (err2) {
                          }
                        }
                      }
                      if (Object.keys(errorProperties).length > 0) {
                        details = {
                          errorProperties,
                          details
                        };
                      }
                      const nowStack = getStackTrace();
                      const stuffToLog = ["Error logged:", err];
                      if (details) {
                        stuffToLog.push("\n\nError details:", details);
                      }
                      stuffToLog.push(`

Extension App Ids: ${JSON.stringify(appIds, null, 2)}
Sent by App: ${sentByApp}
Session Id: ${sessionId}
Extension Id: ${get_extension_id()}
InboxSDK Loader Version: ${loaderVersion}
InboxSDK Implementation Version: ${implVersion}`);
                      console.error(...stuffToLog);
                      const report = {
                        message: err && err.message || err,
                        stack: err && err.stack,
                        loggedFrom: nowStack,
                        details,
                        appIds,
                        sentByApp,
                        sessionId,
                        emailHash: userEmailHash,
                        extensionId: get_extension_id(),
                        loaderVersion,
                        implementationVersion: implVersion,
                        origin: document.location.origin,
                        timestamp: Date.now() * 1e3
                      };
                      sendError(report);
                      if (document.documentElement.getAttribute("inboxsdk-emit-error-event") === "true") {
                        document.documentElement.dispatchEvent(new CustomEvent("inboxSDKerror", {
                          bubbles: false,
                          cancelable: false,
                          detail: {
                            message: err && err.message || err,
                            stack: err && err.stack,
                            loggedFrom: nowStack,
                            details,
                            sentByApp
                          }
                        }));
                      }
                    } catch (err2) {
                      tooManyErrors(err2, [err, details, context]);
                    }
                  }
                  const _extensionSeenErrors = (() => {
                    if (!__webpack_require__3.g.__inboxsdk_extensionSeenErrors && __webpack_require__3.g.WeakMap) {
                      Object.defineProperty(__webpack_require__3.g, "__inboxsdk_extensionSeenErrors", {
                        value: new __webpack_require__3.g.WeakMap()
                      });
                    }
                    return {
                      has(e) {
                        if (__webpack_require__3.g.__inboxsdk_extensionSeenErrors) {
                          return __webpack_require__3.g.__inboxsdk_extensionSeenErrors.has(e);
                        } else {
                          try {
                            return !!e.__inboxsdk_extensionHasSeenError;
                          } catch (err) {
                            console.error(err);
                            return false;
                          }
                        }
                      },
                      add(e) {
                        if (__webpack_require__3.g.__inboxsdk_extensionSeenErrors && __webpack_require__3.g.__inboxsdk_extensionSeenErrors.set) {
                          __webpack_require__3.g.__inboxsdk_extensionSeenErrors.set(e, true);
                        } else if (__webpack_require__3.g.__inboxsdk_extensionSeenErrors && __webpack_require__3.g.__inboxsdk_extensionSeenErrors.add) {
                          __webpack_require__3.g.__inboxsdk_extensionSeenErrors.add(e);
                        } else {
                          try {
                            Object.defineProperty(e, "__inboxsdk_extensionHasSeenError", {
                              value: true
                            });
                          } catch (err) {
                            console.error(err);
                          }
                        }
                      }
                    };
                  })();
                  function haveWeSeenThisErrorAlready(error) {
                    if (isObject_default()(error)) {
                      return _extensionSeenErrors.has(error);
                    }
                    return false;
                  }
                  function markErrorAsSeen(error) {
                    if (isObject_default()(error)) {
                      _extensionSeenErrors.add(error);
                    }
                  }
                  const sendError = rateLimit(function(report) {
                    try {
                      (0, ajax.A)({
                        url: "https://api.inboxsdk.com/api/v2/errors",
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json"
                        },
                        data: JSON.stringify(report)
                      }).catch((err2) => {
                        tooManyErrors(err2, [report]);
                      });
                    } catch (err2) {
                      tooManyErrors(err2, [report]);
                    }
                  }, 60 * 1e3, 10);
                  function tooManyErrors(err2, originalArgs) {
                    console.error("ERROR REPORTING ERROR", err2);
                    console.error("ORIGINAL ERROR", originalArgs);
                  }
                  ;
                  class PersistentQueue {
                    _fallbackQueue = [];
                    constructor(id) {
                      this._sid = "inboxsdk__persistentqueue_" + id;
                    }
                    _getSavedQueue() {
                      let queue = JSON.parse(localStorage.getItem(this._sid));
                      if (queue == null) {
                        queue = [];
                      }
                      return queue;
                    }
                    _putSavedQueue(queue) {
                      localStorage.setItem(this._sid, JSON.stringify(queue));
                    }
                    _clearSavedQueue() {
                      localStorage.removeItem(this._sid);
                    }
                    add(val) {
                      let success = false;
                      if (typeof localStorage !== "undefined") {
                        try {
                          const queue = this._getSavedQueue();
                          queue.push(val);
                          this._putSavedQueue(queue);
                          success = true;
                        } catch (e) {
                        }
                      }
                      if (!success) {
                        this._fallbackQueue.push(val);
                      }
                    }
                    remove() {
                      let ret2;
                      if (typeof localStorage !== "undefined") {
                        try {
                          const queue = this._getSavedQueue();
                          const tmpRet = queue.shift();
                          this._putSavedQueue(queue);
                          ret2 = tmpRet;
                        } catch (e) {
                        }
                      }
                      if (ret2 === void 0) {
                        ret2 = this._fallbackQueue.shift();
                      }
                      return ret2;
                    }
                    removeAll() {
                      let ret2 = void 0;
                      if (typeof localStorage !== "undefined") {
                        try {
                          const queue = this._getSavedQueue();
                          this._clearSavedQueue();
                          ret2 = queue;
                        } catch (e) {
                        }
                      }
                      if (ret2 === void 0) {
                        ret2 = [];
                      }
                      ret2 = ret2.concat(this._fallbackQueue);
                      this._fallbackQueue = [];
                      return ret2;
                    }
                    peekAll() {
                      let ret2 = void 0;
                      if (typeof localStorage !== "undefined") {
                        try {
                          ret2 = this._getSavedQueue();
                        } catch (e) {
                        }
                      }
                      if (ret2 === void 0) {
                        ret2 = [];
                      }
                      ret2 = ret2.concat(this._fallbackQueue);
                      return ret2;
                    }
                    clear() {
                      if (typeof localStorage !== "undefined") {
                        try {
                          this._clearSavedQueue();
                        } catch (e) {
                        }
                      }
                      this._fallbackQueue.length = 0;
                    }
                  }
                  var make_mutation_observer_stream = __webpack_require__3(5938);
                  var src2 = __webpack_require__3(9482);
                  var isStreakAppId = __webpack_require__3(8579);
                  ;
                  var Buffer2 = __webpack_require__3(2313)["Buffer"];
                  const _extensionAppIds = [];
                  let _extensionLoaderVersion;
                  let _extensionImplVersion;
                  let _extensionUserEmailHash;
                  let _extensionUseEventTracking = false;
                  const _sessionId = getSessionId();
                  const _loggedDeprecatedMessages = /* @__PURE__ */ new Set();
                  const _extensionIsLoggerMaster = (function() {
                    if (typeof document === "undefined") {
                      return true;
                    }
                    if (document.documentElement.hasAttribute("data-inboxsdk-master-claimed")) {
                      return false;
                    } else {
                      document.documentElement.setAttribute("data-inboxsdk-master-claimed", "true");
                      return true;
                    }
                  })();
                  function getAllAppIds() {
                    const str = typeof document !== "undefined" && document.documentElement.getAttribute("data-inboxsdk-active-app-ids") || "[]";
                    return JSON.parse(str);
                  }
                  const _trackedEventsQueue = new PersistentQueue("events");
                  const FIRST_LOADED_TIME = Date.now();
                  class Logger {
                    #appId;
                    #isMaster;
                    constructor(appId, opts, loaderVersion, implVersion) {
                      _extensionLoggerSetup(appId, opts, loaderVersion, implVersion);
                      this.#appId = appId;
                      this.#isMaster = (() => {
                        if (!_extensionUseEventTracking || typeof document !== "undefined" && document.documentElement.hasAttribute("data-inboxsdk-app-logger-master-chosen")) {
                          return false;
                        } else {
                          document.documentElement.setAttribute("data-inboxsdk-app-logger-master-chosen", "true");
                          return true;
                        }
                      })();
                      if (this.#isMaster && typeof document !== "undefined") {
                        document.addEventListener("inboxSDKinjectedError", (event) => {
                          if (!(event instanceof CustomEvent && event?.detail)) {
                            this.error(new Error("Invalid inboxSDKinjectedError event"), event);
                            return;
                          }
                          const detail = event.detail;
                          this.error(Object.assign(new Error(detail.message), {
                            stack: detail.stack
                          }), detail.details);
                        });
                        document.addEventListener("inboxSDKinjectedEventSdkPassive", (event) => {
                          const detail = event.detail;
                          this.eventSdkPassive(detail.name, detail.details, detail.sensitive);
                        });
                      }
                    }
                    setUserEmailAddress(email) {
                      _extensionUserEmailHash = hashEmail(email);
                    }
                    shouldTrackEverything() {
                      return _extensionUserEmailHash === "ca05afe92819df590a4196c31814fdb24050e8f49d8a41613f3d6cfb5729c785";
                    }
                    static run(cb, details) {
                      try {
                        return cb();
                      } catch (err) {
                        Logger.error(err, details);
                        throw err;
                      }
                    }
                    run(cb, details) {
                      try {
                        return cb();
                      } catch (err) {
                        this.error(err, details);
                        throw err;
                      }
                    }
                    static error(err, details) {
                      _logError(err, details, void 0, false);
                    }
                    error(err, details) {
                      _logError(err, details, this.#appId, false);
                    }
                    errorApp(err, details) {
                      _logError(err, details, this.#appId, true);
                    }
                    /** Only the first logger instance reports Site errors. */
                    errorSite(err, details) {
                      if (!this.#isMaster) {
                        return;
                      }
                      this.error(err, details);
                    }
                    /** Should only be used by the InboxSDK users for their own app events. */
                    eventApp(name, details) {
                      _trackEvent(this.#appId, "app", name, details);
                    }
                    /**
                     * For tracking app events that are possibly triggered by the user. Extensions
                     * can opt out of this with a flag passed to InboxSDK.load().
                     */
                    eventSdkActive(name, details) {
                      if (!_extensionUseEventTracking) {
                        return;
                      }
                      _trackEvent(this.#appId, "sdkActive", name, details);
                    }
                    // Track events unrelated to user activity about how the app uses the SDK.
                    // Examples include the app being initialized, and calls to any of the
                    // register___ViewHandler functions.
                    eventSdkPassive(name, details, sensitive) {
                      if (sensitive && !(0, isStreakAppId.A)(this.#appId)) {
                        return;
                      }
                      _trackEvent(this.#appId, "sdkPassive", name, details);
                    }
                    // Track Site events.
                    eventSite(name, details) {
                      if (!this.#isMaster) {
                        return;
                      }
                      _trackEvent(this.#appId, "gmail", name, details);
                    }
                    deprecationWarning(name, suggestion) {
                      console.warn(`InboxSDK: ${name} is deprecated.` + (suggestion ? ` Please use ${suggestion} instead.` : ""));
                      const key = name + (suggestion ? ":" + suggestion : "");
                      if (!_loggedDeprecatedMessages.has(key)) {
                        this.eventSdkPassive(`deprecated.${name}`);
                        _loggedDeprecatedMessages.add(key);
                      }
                    }
                    getAppLogger() {
                      return {
                        error: (err, details) => this.errorApp(err, details),
                        event: (name, details) => this.eventApp(name, details)
                      };
                    }
                    trackFunctionPerformance(fn, sampleRate, details) {
                      if (Math.random() < sampleRate && document.visibilityState === "visible" && this.#isMaster) {
                        const start = Date.now();
                        fn();
                        setTimeout(() => {
                          const now = Date.now();
                          this.eventSdkPassive("function performance result", {
                            value: now - start,
                            timeSinceFirstLoad: now - FIRST_LOADED_TIME,
                            ...details
                          });
                        }, 10);
                      } else {
                        fn();
                      }
                    }
                  }
                  function _extensionLoggerSetup(appId, opts, loaderVersion, implVersion) {
                    _extensionAppIds.push(Object.freeze({
                      appId,
                      version: opts.appVersion || void 0
                    }));
                    document.documentElement.setAttribute("data-inboxsdk-active-app-ids", JSON.stringify(getAllAppIds().concat([{
                      appId,
                      version: opts.appVersion || void 0
                    }])));
                    if (_extensionLoaderVersion) {
                      return;
                    }
                    _extensionLoaderVersion = loaderVersion;
                    _extensionImplVersion = implVersion;
                    _extensionUseEventTracking = opts.eventTracking;
                    if (opts.globalErrorLogging) {
                      if (Error.stackTraceLimit < 40) {
                        Error.stackTraceLimit = 40;
                      }
                      window.addEventListener("error", function(event) {
                        if (event.error) {
                          Logger.error(event.error, "Uncaught exception");
                        }
                      });
                      replaceFunction(window, "setTimeout", function(original) {
                        return function wrappedSetTimeout() {
                          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                            args[_key] = arguments[_key];
                          }
                          if (typeof args[0] == "function") {
                            args[0] = makeLoggedFunction(args[0], "setTimeout callback");
                          }
                          return original.apply(this, args);
                        };
                      });
                      replaceFunction(window, "setInterval", function(original) {
                        return function wrappedSetInterval() {
                          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                            args[_key2] = arguments[_key2];
                          }
                          if (typeof args[0] == "function") {
                            args[0] = makeLoggedFunction(args[0], "setInterval callback");
                          }
                          return original.apply(this, args);
                        };
                      });
                      const ETp = window.EventTarget && window.EventTarget.prototype || window.Node.prototype;
                      replaceFunction(ETp, "addEventListener", function(original) {
                        return function wrappedAddEventListener() {
                          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
                            args[_key3] = arguments[_key3];
                          }
                          if (typeof args[1] == "function") {
                            try {
                              let loggedFn = args[1].__inboxsdk_logged;
                              if (!loggedFn) {
                                loggedFn = makeLoggedFunction(args[1], "event listener");
                                args[1].__inboxsdk_logged = loggedFn;
                              }
                              args[1] = loggedFn;
                            } catch (e) {
                              console.error("Failed to error wrap function", e);
                            }
                          }
                          return original.apply(this, args);
                        };
                      });
                      replaceFunction(ETp, "removeEventListener", function(original) {
                        return function wrappedRemoveEventListener() {
                          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
                            args[_key4] = arguments[_key4];
                          }
                          if (typeof args[1] == "function" && args[1].__inboxsdk_logged) {
                            args[1] = args[1].__inboxsdk_logged;
                          }
                          return original.apply(this, args);
                        };
                      });
                      replaceFunction(window, "MutationObserver", function(Original) {
                        Original = Original || window.WebKitMutationObserver;
                        function WrappedMutationObserver() {
                          for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
                            args[_key5] = arguments[_key5];
                          }
                          if (typeof args[0] == "function") {
                            args[0] = makeLoggedFunction(args[0], "MutationObserver callback");
                          }
                          if (Original.bind && Original.bind.apply) {
                            return new (Original.bind.apply(Original, [null].concat(args)))();
                          } else {
                            return new Original(args[0]);
                          }
                        }
                        WrappedMutationObserver.prototype = Original.prototype;
                        return WrappedMutationObserver;
                      });
                    }
                  }
                  function getAppIdsProperty(causedByAppId) {
                    let onlyExtensionApps = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
                    const appIds = onlyExtensionApps ? _extensionAppIds : getAllAppIds();
                    if (!causedByAppId) {
                      return appIds;
                    } else {
                      const appIdsWithCause = appIds.slice();
                      let hasSetCause = false;
                      appIdsWithCause.forEach((entry, i2) => {
                        if (!hasSetCause && entry.appId === causedByAppId) {
                          hasSetCause = true;
                          appIdsWithCause[i2] = {
                            ...entry,
                            causedBy: true
                          };
                        }
                        Object.freeze(appIdsWithCause[i2]);
                      });
                      return Object.freeze(appIdsWithCause);
                    }
                  }
                  function _logError(err, details, appId, sentByApp) {
                    logError(err, details, {
                      appId,
                      sentByApp,
                      appIds: getAppIdsProperty(appId),
                      loaderVersion: _extensionLoaderVersion,
                      implVersion: _extensionImplVersion,
                      userEmailHash: _extensionUserEmailHash
                    });
                  }
                  function makeLoggedFunction(func, name) {
                    const msg = name ? "Uncaught error in " + name : "Uncaught error";
                    return function() {
                      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
                        args[_key6] = arguments[_key6];
                      }
                      return Logger.run(() => func.apply(this, args), msg);
                    };
                  }
                  function replaceFunction(parent, name, newFnMaker) {
                    const newFn = newFnMaker(parent[name]);
                    newFn.__original = parent[name];
                    parent[name] = newFn;
                  }
                  function hashEmail(str) {
                    const hasher = new (sha256_default())();
                    hasher.update("inboxsdk:" + str);
                    return hasher.digest("hex");
                  }
                  function _trackEvent(appId, type, eventName, properties) {
                    if (properties && typeof properties != "object") {
                      throw new Error("properties must be object or null: " + properties);
                    }
                    const event = {
                      type,
                      event: eventName,
                      timestamp: Date.now() * 1e3,
                      origin: document.location.origin,
                      sessionId: _sessionId,
                      emailHash: _extensionUserEmailHash,
                      loaderVersion: _extensionLoaderVersion,
                      implementationVersion: _extensionImplVersion,
                      properties
                    };
                    if (type != "gmail") {
                      Object.assign(event, {
                        extensionId: get_extension_id(),
                        appIds: getAppIdsProperty(appId)
                      });
                    } else {
                      Object.assign(event, {
                        appIds: getAppIdsProperty(null, false)
                      });
                    }
                    if (typeof document === "undefined") {
                      return;
                    }
                    _trackedEventsQueue.add(event);
                    document.documentElement.setAttribute("data-inboxsdk-last-event", "" + Date.now());
                  }
                  let currentAccessToken = null;
                  function isTimestampExpired(n) {
                    return Date.now() + 10 * 60 * 1e3 > n;
                  }
                  async function retrieveNewEventsAccessToken() {
                    const {
                      text
                    } = await (0, ajax.A)({
                      url: "https://api.inboxsdk.com/api/v2/events/oauth",
                      // Work around CORB for extensions that have permissions to inboxsdk.com
                      XMLHttpRequest: (0, src2.np)()
                    });
                    const accessToken = JSON.parse(text);
                    if (isTimestampExpired(accessToken.expirationDate)) {
                      console.warn("Got an apparently already expired token. Assuming our clock is busted...");
                      accessToken.expirationDate = Date.now() + 30 * 60 * 1e3;
                    }
                    return accessToken;
                  }
                  async function getEventsAccessToken() {
                    const t2 = currentAccessToken;
                    if (t2 && !isTimestampExpired(t2.expirationDate)) {
                      return t2;
                    } else {
                      currentAccessToken = await retrieveNewEventsAccessToken();
                      return currentAccessToken;
                    }
                  }
                  if (_extensionIsLoggerMaster && typeof document !== "undefined" && typeof MutationObserver !== "undefined") {
                    (0, make_mutation_observer_stream.A)(document.documentElement, {
                      attributes: true,
                      attributeFilter: ["data-inboxsdk-last-event"]
                    }).map(() => null).throttle(120 * 1e3).onValue(function() {
                      const events = _trackedEventsQueue.removeAll();
                      if (events.length === 0) {
                        return;
                      }
                      (async function() {
                        const {
                          oauthToken
                        } = await getEventsAccessToken();
                        const apiKey = "AIzaSyAwlvUR2x3OnCeas8hW8NDzVMswL5hZGg8";
                        await (0, ajax.A)({
                          url: `https://pubsub.googleapis.com/v1/projects/mailfoogae/topics/events:publish?key=${encodeURIComponent(apiKey)}`,
                          method: "POST",
                          headers: {
                            Authorization: `Bearer ${oauthToken}`,
                            "Content-Type": "application/json"
                          },
                          data: JSON.stringify({
                            messages: [{
                              data: Buffer2.from(JSON.stringify({
                                data: events,
                                timestamp: Date.now() * 1e3
                              })).toString("base64")
                            }]
                          })
                        });
                      })().catch((err) => {
                        Logger.error(err, {
                          type: "Failed to log events"
                        });
                      });
                    });
                  }
                })
              ),
              /***/
              2788: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      SafeEventEmitter
                    )
                    /* harmony export */
                  });
                  var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(4785);
                  var events__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(events__WEBPACK_IMPORTED_MODULE_0__);
                  var _logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(2617);
                  class SafeEventEmitter extends events__WEBPACK_IMPORTED_MODULE_0___default() {
                    emit(_event) {
                      for (var _len = arguments.length, _args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                        _args[_key - 1] = arguments[_key];
                      }
                      try {
                        return super.emit.apply(this, arguments);
                      } catch (e) {
                        _logger__WEBPACK_IMPORTED_MODULE_1__.A.error(e);
                        return true;
                      }
                    }
                  }
                })
              ),
              /***/
              1539: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      streamWaitFor
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  function streamWaitFor(condition) {
                    let timeout = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 60 * 1e3;
                    let steptime = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 250;
                    const timeoutError = new Error("waitFor timeout");
                    const timeoutStream = kefir__WEBPACK_IMPORTED_MODULE_0__.later(timeout, null).flatMap(() => {
                      const result = condition();
                      if (result) {
                        return kefir__WEBPACK_IMPORTED_MODULE_0__.constant(result);
                      }
                      setTimeout(() => {
                        throw timeoutError;
                      }, 0);
                      return kefir__WEBPACK_IMPORTED_MODULE_0__.constantError(timeoutError);
                    });
                    const isTruthy = Boolean;
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.later(0, null).merge(kefir__WEBPACK_IMPORTED_MODULE_0__.interval(steptime, null)).map(() => condition()).filter(isTruthy).merge(timeoutStream).take(1).takeErrors(1);
                  }
                })
              ),
              /***/
              370: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      toItemWithLifetimeStream
                    )
                    /* harmony export */
                  });
                  var live_set_toValueObservable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(3507);
                  var live_set_toValueObservable__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(live_set_toValueObservable__WEBPACK_IMPORTED_MODULE_1__);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  function toItemWithLifetimeStream(liveSet) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.fromESObservable(live_set_toValueObservable__WEBPACK_IMPORTED_MODULE_1___default()(liveSet).map((event) => {
                      const removal = event.removal;
                      const removalStream = kefir__WEBPACK_IMPORTED_MODULE_0__.fromPromise(removal);
                      return {
                        el: event.value,
                        removalStream
                      };
                    }));
                  }
                })
              ),
              /***/
              5156: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      waitFor
                    ),
                    /* harmony export */
                    D: () => (
                      /* binding */
                      WaitForError
                    )
                    /* harmony export */
                  });
                  class WaitForError extends Error {
                    name = "WaitForError";
                    constructor() {
                      super("waitFor timeout");
                    }
                  }
                  function waitFor(condition) {
                    let timeout = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 120 * 1e3;
                    let steptime = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 250;
                    const timeoutError = new WaitForError();
                    return new Promise(function(resolve, reject) {
                      let waited = 0;
                      function step() {
                        try {
                          const result = condition();
                          if (result) {
                            resolve(result);
                          } else {
                            if (waited >= timeout) {
                              reject(timeoutError);
                            } else {
                              waited += steptime;
                              setTimeout(step, steptime);
                            }
                          }
                        } catch (e) {
                          reject(e);
                        }
                      }
                      setTimeout(step, 1);
                    });
                  }
                })
              ),
              /***/
              130: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.r(__webpack_exports__3);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  if (!globalThis.__InboxSDKImpLoader) {
                    var piMainStarted = Date.now();
                    var wasAccountSwitcherReadyAtStart = !!document.querySelector('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."], [role=banner]+div div[aria-label] div div a[href^="https://myaccount.google."]');
                    var onready = new Promise((resolve) => {
                      if (document.readyState === "complete" || document.readyState === "interactive") {
                        resolve(null);
                      } else {
                        resolve(kefir__WEBPACK_IMPORTED_MODULE_0__["default"].merge([kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(document, "DOMContentLoaded"), kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(window, "load")]).take(1).map(() => null).toPromise());
                      }
                    });
                    globalThis.__InboxSDKImpLoader = {
                      async load(version2, appId, opts) {
                        if (version2 !== "0.1") {
                          throw new Error("Unsupported InboxSDK version");
                        }
                        if (appId === "dropbox") {
                          throw new Error("No longer supported");
                        }
                        if (location.hostname === "mail.google.com" && location.pathname.endsWith("/popout")) {
                          throw new URIError(`@inboxsdk/core doesn't currently support Gmail pop out windows. See
              https://github.com/InboxSDK/InboxSDK/issues/1062#issuecomment-1821327292 for context on why we'd be open to supporting them.`);
                        }
                        var piLoadStarted = Date.now();
                        await onready;
                        const {
                          makePlatformImplementation
                        } = await Promise.resolve(
                          /* import() eager */
                        ).then(__webpack_require__3.bind(__webpack_require__3, 932));
                        return makePlatformImplementation(appId, opts, {
                          piMainStarted,
                          piLoadStarted,
                          wasAccountSwitcherReadyAtStart
                        });
                      }
                    };
                  }
                })
              ),
              /***/
              1140: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      Compose
                    )
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(7332);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(7249);
                  var _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__3(4531);
                  var _lib_handler_registry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(3247);
                  module3 = __webpack_require__3.hmd(module3);
                  const memberMap = ud__WEBPACK_IMPORTED_MODULE_2__.defonce(module3, () => /* @__PURE__ */ new WeakMap());
                  const SAMPLE_RATE = 0.01;
                  class Compose {
                    constructor(driver, membrane) {
                      const members = {
                        driver,
                        membrane,
                        handlerRegistry: new _lib_handler_registry__WEBPACK_IMPORTED_MODULE_1__.A(),
                        composeViewStream: driver.getComposeViewDriverStream().map((viewDriver) => membrane.get(viewDriver))
                      };
                      memberMap.set(this, members);
                      driver.getStopper().onValue(() => {
                        members.handlerRegistry.dumpHandlers();
                      });
                      members.composeViewStream.onValue((view) => {
                        driver.getLogger().trackFunctionPerformance(() => {
                          members.handlerRegistry.addTarget(view);
                        }, SAMPLE_RATE, {
                          type: "composeViewHandler",
                          isInlineReplyForm: view.isInlineReplyForm()
                        });
                      });
                    }
                    registerComposeViewHandler(handler) {
                      return (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__.A)(memberMap, this).handlerRegistry.registerHandler(handler);
                    }
                    async openNewComposeView() {
                      const members = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__.A)(memberMap, this);
                      const composeViewDriver = await members.driver.openNewComposeViewDriver();
                      return members.membrane.get(composeViewDriver);
                    }
                    async openDraftByMessageID(messageID) {
                      const members = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__.A)(memberMap, this);
                      const newComposePromise = members.composeViewStream.take(1).toPromise();
                      await members.driver.openDraftByMessageID(messageID);
                      return kefir__WEBPACK_IMPORTED_MODULE_0__.fromPromise(newComposePromise).merge(kefir__WEBPACK_IMPORTED_MODULE_0__.later(15 * 1e3, null).flatMap(() => kefir__WEBPACK_IMPORTED_MODULE_0__.constantError(new Error("draft did not open in time")))).take(1).takeErrors(1).toPromise();
                    }
                    /** @deprecated Use {@link openNewComposeView} instead */
                    getComposeView() {
                      const {
                        driver
                      } = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__.A)(memberMap, this);
                      driver.getLogger().deprecationWarning("Compose.getComposeView", "Compose.openNewComposeView");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.openNewComposeView();
                    }
                  }
                })
              ),
              /***/
              1351: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      keyboard
                    )
                  });
                  var js = __webpack_require__3(7332);
                  var get_or_fail = __webpack_require__3(4531);
                  var safe_event_emitter = __webpack_require__3(2788);
                  ;
                  class KeyboardShortcutHandle extends safe_event_emitter.A {
                    constructor(chord, description) {
                      super();
                      this.chord = chord;
                      this.description = description;
                    }
                    remove() {
                      this.emit("destroy");
                    }
                  }
                  ;
                  module3 = __webpack_require__3.hmd(module3);
                  const memberMap = js.defonce(module3, () => /* @__PURE__ */ new WeakMap());
                  class Keyboard {
                    constructor(appId, appName, appIconUrl, driver) {
                      const members = {
                        appId,
                        appName,
                        appIconUrl,
                        driver
                      };
                      memberMap.set(this, members);
                    }
                    createShortcutHandle(shortcutDescriptor) {
                      const members = (0, get_or_fail.A)(memberMap, this);
                      let {
                        chord,
                        description
                      } = shortcutDescriptor;
                      if (!chord) throw new Error("Keyboard.createShortcutHandle chord missing");
                      if (description == null) {
                        console.error("Keyboard.createShortcutHandle chord missing");
                        description = "";
                      }
                      const keyboardShortcutHandle = new KeyboardShortcutHandle(chord, description);
                      members.driver.activateShortcut(keyboardShortcutHandle, members.appName, members.appIconUrl);
                      return keyboardShortcutHandle;
                    }
                  }
                  const keyboard = Keyboard;
                })
              ),
              /***/
              932: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    makePlatformImplementation: () => (
                      /* binding */
                      makePlatformImplementation
                    )
                  });
                  var safe_event_emitter = __webpack_require__3(2788);
                  var version2 = __webpack_require__3(4782);
                  ;
                  class Membrane {
                    _map = /* @__PURE__ */ new WeakMap();
                    constructor(mappers) {
                      this._mappers = new Map(mappers);
                    }
                    get(wet) {
                      let dry = this._map.get(wet);
                      if (!dry) {
                        const mapperFn = this._mappers.get(wet.constructor);
                        if (!mapperFn) {
                          throw new Error(`Unknown class ${wet.constructor.name}`);
                        }
                        dry = mapperFn(wet);
                        this._map.set(wet, dry);
                      }
                      return dry;
                    }
                  }
                  ;
                  class AttachmentCardView extends safe_event_emitter.A {
                    #attachmentCardImplementation;
                    #driver;
                    #membrane;
                    destroyed = false;
                    constructor(attachmentCardImplementation, driver, membrane) {
                      super();
                      this.#driver = driver;
                      this.#membrane = membrane;
                      this.#attachmentCardImplementation = attachmentCardImplementation;
                      this.#attachmentCardImplementation.getStopper().onValue(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                      });
                    }
                    getAttachmentType() {
                      return this.#attachmentCardImplementation.getAttachmentType();
                    }
                    addButton(buttonOptions) {
                      this.#attachmentCardImplementation.addButton(buttonOptions);
                    }
                    getTitle() {
                      return this.#attachmentCardImplementation.getTitle();
                    }
                    /**
                     * Get the URL for the attachment card's download link as a promise for a string.
                     * For FILE attachment cards, the URL will be a short-lived URL that can be
                     * accessed without cookies. For CUSTOM attachment cards, the URL will be the
                     * downloadUrl property of the card's download button if it has one, otherwise
                     * null. Other attachment card types may not have a download URL, and the promise
                     * may resolve to null.
                     */
                    getDownloadURL() {
                      return this.#attachmentCardImplementation.getDownloadURL();
                    }
                    getMessageView() {
                      const messageViewDriver = this.#attachmentCardImplementation.getMessageViewDriver();
                      return messageViewDriver ? this.#membrane.get(messageViewDriver) : null;
                    }
                    get _attachmentCardImplementation() {
                      this.#driver.getLogger().deprecationWarning("AttachmentCardView._attachmentCardImplementation._element", "AttachmentCardView.getElement");
                      return {
                        _element: this.getElement()
                      };
                    }
                    getElement() {
                      return this.#attachmentCardImplementation.getElement();
                    }
                  }
                  var find = __webpack_require__3(4455);
                  var find_default = /* @__PURE__ */ __webpack_require__3.n(find);
                  var kefir_esm = __webpack_require__3(7249);
                  var js = __webpack_require__3(4924);
                  var js_default = /* @__PURE__ */ __webpack_require__3.n(js);
                  var auto_html_js = __webpack_require__3(1812);
                  var auto_html_js_default = /* @__PURE__ */ __webpack_require__3.n(auto_html_js);
                  var from_event_target_capture = __webpack_require__3(3985);
                  var querySelectorOrFail = __webpack_require__3(9860);
                  var button_view = __webpack_require__3(9341);
                  var basic_button_view_controller = __webpack_require__3(9755);
                  var simulate_mouse_event = __webpack_require__3(4603);
                  var wait_for = __webpack_require__3(5156);
                  ;
                  class GmailAttachmentCardView {
                    _stopper = js_default()();
                    _previewClicks = kefir_esm.pool();
                    constructor(options2, driver, messageViewDriver) {
                      this._driver = driver;
                      this._messageViewDriver = messageViewDriver;
                      if (options2.element) {
                        this._element = options2.element;
                      } else {
                        this._createNewElement(options2);
                      }
                    }
                    destroy() {
                      this._stopper.destroy();
                    }
                    getElement() {
                      return this._element;
                    }
                    getMessageViewDriver() {
                      return this._messageViewDriver;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getPreviewClicks() {
                      return this._previewClicks.takeUntilBy(this._stopper);
                    }
                    _isStandardAttachment() {
                      return this.getAttachmentType() === "FILE";
                    }
                    getAttachmentType() {
                      if (this._cachedType) {
                        return this._cachedType;
                      }
                      const type = this._readAttachmentType();
                      if (type !== "UNLOADED") {
                        this._cachedType = type;
                      }
                      return type;
                    }
                    _readAttachmentType() {
                      if (this._element.classList.contains("inboxsdk__attachmentCard")) {
                        return "CUSTOM";
                      }
                      if (this._element.children.length === 1 && this._element.children[0].children.length === 0) {
                        return "UNLOADED";
                      }
                      const link = this._getDownloadLink();
                      if (!link || link.match(/^https?:\/\/mail\.google\.com\//)) {
                        return "FILE";
                      }
                      if (link.match(/^https?:\/\/([^/]*\.)?google(usercontent)?\.com\//)) {
                        return "DRIVE";
                      }
                      return "UNKNOWN";
                    }
                    addButton(options2) {
                      var buttonView = new button_view.A({
                        iconUrl: options2.iconUrl,
                        tooltip: options2.tooltip
                      });
                      new basic_button_view_controller.A({
                        activateFunction: () => {
                          if (options2.onClick) {
                            options2.onClick({
                              getDownloadURL: () => this.getDownloadURL()
                            });
                          }
                        },
                        buttonView
                      });
                      this._addButton(buttonView);
                    }
                    getTitle() {
                      const title = this._element.querySelector("span .aV3");
                      return title ? title.textContent : "";
                    }
                    _getDownloadLink() {
                      const firstChild = this._element.firstElementChild;
                      if (!firstChild) throw new Error("Failed to find link");
                      if (firstChild.tagName !== "A" || !firstChild.href) {
                        const download_url = this._element.getAttribute("download_url");
                        if (download_url) {
                          const m = /:(https:\/\/.+)/.exec(download_url);
                          return m ? m[1] : null;
                        }
                      } else {
                        const firstChildHref = firstChild.href;
                        if (firstChildHref) {
                          return firstChildHref.replace(/([?&])disp=inline(?=&|$)/, "$1disp=safe");
                        }
                        return firstChildHref;
                      }
                    }
                    // Resolves the short-lived cookie-less download URL
                    async getDownloadURL() {
                      try {
                        if (this._isStandardAttachment()) {
                          const downloadUrl = await (0, wait_for.A)(() => this._getDownloadLink());
                          if (!downloadUrl) return null;
                          const finalUrl = await this._driver.resolveUrlRedirects(downloadUrl);
                          if (!/^https:\/\/mail-attachment\.googleusercontent\.com\/attachment\//.test(finalUrl)) {
                            console.error("getDownloadURL returned unexpected url", finalUrl);
                            const err = new Error("getDownloadURL returned unexpected url");
                            this._driver.getLogger().error(err, {
                              finalUrlCensored: finalUrl.replace(/\?[^/]+$/, "?[...]")
                            });
                            if (/^https:\/\/mail\.google\.com\//.test(finalUrl)) {
                              throw err;
                            }
                          }
                          return finalUrl;
                        } else {
                          const downloadButton = this._element.querySelector("[data-inboxsdk-download-url]");
                          return downloadButton ? downloadButton.getAttribute("data-inboxsdk-download-url") : null;
                        }
                      } catch (err) {
                        this._driver.getLogger().error(err);
                        throw err;
                      }
                    }
                    _extractFileNameFromElement() {
                      return (0, querySelectorOrFail.A)(this._element, ".aQA > span").textContent;
                    }
                    _createNewElement(options2) {
                      this._element = document.createElement("span");
                      this._element.classList.add("aZo");
                      this._element.classList.add("inboxsdk__attachmentCard");
                      var htmlArray = [auto_html_js_default()`
			<a target="_blank" role="link" class="aQy e" href="">
				<div aria-hidden="true">
					<div class="aSG"></div>
					<div class="aVY aZn">
						<div class="aZm"></div>
					</div>
					<div class="aSH">`];
                      if (options2.iconThumbnailUrl) {
                        htmlArray = htmlArray.concat([auto_html_js_default()`
				<div class="aYv">
					<img class="aZG aYw" src="${options2.iconThumbnailUrl}">
				</div>`]);
                      } else {
                        htmlArray = htmlArray.concat([auto_html_js_default()`
				<img class="aQG aYB inboxsdk__attachmentCard_previewThumbnailUrl"
					src="${options2.previewThumbnailUrl}">`]);
                      }
                      htmlArray = htmlArray.concat([auto_html_js_default()`
			<div class="aYy">
				<div class="aYA">
					<img class="aSM" src="${options2.fileIconImageUrl}">
				</div>
				<div class="aYz">
					<div class="a12">
						<div class="aQA">
							<span class="aV3 a6U"></span>
						</div>
						<div class="aYp">
							<span class="SaH2Ve"></span>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="aSI">
			<div class="aSJ"></div>
		</div>
	</div>
</a>
<div class="aQw"></div>`]);
                      this._element.innerHTML = htmlArray.join("");
                      this._element.children[0].href = options2.previewUrl;
                      if (options2.mimeType && options2.mimeType.split("/")[0] === "image") {
                        this._element.children[0].classList.add("aZI");
                      }
                      (0, querySelectorOrFail.A)(this._element, "span .aV3").textContent = options2.title;
                      (0, querySelectorOrFail.A)(this._element, "div.aYp > span").textContent = options2.description || "";
                      (0, querySelectorOrFail.A)(this._element, "div.aSJ").style.borderColor = options2.foldColor;
                      this._addHoverEvents();
                      if (options2.buttons) {
                        const downloadButton = find_default()(options2.buttons, function(button) {
                          return button.downloadUrl;
                        });
                        if (downloadButton) {
                          this._addDownloadButton(downloadButton);
                        }
                        this._addMoreButtons(options2.buttons);
                      }
                      var self2 = this;
                      this._previewClicks.plug(kefir_esm.fromEvents(this._element, "click").map((event) => ({
                        preventDefault: () => event.preventDefault()
                      })));
                      if (options2.previewThumbnailUrl && options2.failoverPreviewIconUrl) {
                        const previewThumbnailUrlImage = (0, querySelectorOrFail.A)(this._element, ".inboxsdk__attachmentCard_previewThumbnailUrl");
                        previewThumbnailUrlImage.onerror = (e) => {
                          var iconDiv = document.createElement("div");
                          iconDiv.classList.add("aYv");
                          iconDiv.innerHTML = '<img class="aZG aYw" src="' + options2.failoverPreviewIconUrl + '">';
                          const parent = previewThumbnailUrlImage.parentElement;
                          if (!parent) throw new Error("Could not find parent element");
                          parent.insertBefore(iconDiv, previewThumbnailUrlImage.nextElementSibling);
                          previewThumbnailUrlImage.remove();
                        };
                      }
                    }
                    _addHoverEvents() {
                      kefir_esm.merge([kefir_esm.fromEvents(this._element, "mouseenter"), (0, from_event_target_capture.A)(this._element, "focus")]).onValue(() => {
                        this._element.classList.add("aZp");
                      });
                      kefir_esm.merge([kefir_esm.fromEvents(this._element, "mouseleave"), (0, from_event_target_capture.A)(this._element, "blur")]).onValue(() => {
                        this._element.classList.remove("aZp");
                      });
                      const anchor = (0, querySelectorOrFail.A)(this._element, "a");
                      kefir_esm.fromEvents(anchor, "focus").onValue(() => {
                        anchor.classList.add("a1U");
                      });
                      kefir_esm.fromEvents(anchor, "blur").onValue(() => {
                        anchor.classList.remove("a1U");
                      });
                    }
                    _addDownloadButton(options2) {
                      const buttonView = new button_view.A({
                        tooltip: "Download",
                        iconClass: "aSK J-J5-Ji aYr"
                      });
                      buttonView.getElement().setAttribute("data-inboxsdk-download-url", options2.downloadUrl);
                      const basicButtonViewController = new basic_button_view_controller.A({
                        activateFunction: function() {
                          let prevented = false;
                          if (options2.onClick) {
                            options2.onClick({
                              preventDefault: function() {
                                prevented = true;
                              }
                            });
                          }
                          if (prevented) {
                            return;
                          }
                          const downloadLink = document.createElement("a");
                          downloadLink.href = options2.downloadUrl;
                          if (options2.downloadFilename) {
                            downloadLink.download = options2.downloadFilename;
                          }
                          downloadLink.addEventListener("click", function(e) {
                            e.stopPropagation();
                          }, true);
                          if (options2.openInNewTab) {
                            downloadLink.setAttribute("target", "_blank");
                          }
                          document.body.appendChild(downloadLink);
                          (0, simulate_mouse_event.jp)(downloadLink);
                          downloadLink.remove();
                        },
                        buttonView
                      });
                      this._addButton(buttonView);
                    }
                    _addMoreButtons(buttonDescriptors) {
                      (buttonDescriptors || []).filter(function(buttonDescriptor) {
                        return !buttonDescriptor.downloadUrl;
                      }).forEach((desc) => {
                        this.addButton(desc);
                      });
                    }
                    _addButton(buttonView) {
                      buttonView.addClass("aQv");
                      this._getButtonContainerElement().appendChild(buttonView.getElement());
                    }
                    _getPreviewImageUrl() {
                      var previewImage = this._getPreviewImage();
                      if (!previewImage) {
                        return null;
                      }
                      return previewImage.src;
                    }
                    _getPreviewImage() {
                      return this._element.querySelector("img.aQG");
                    }
                    _getButtonContainerElement() {
                      return (0, querySelectorOrFail.A)(this._element, ".aQw");
                    }
                  }
                  const gmail_attachment_card_view = GmailAttachmentCardView;
                  var browser_asap = __webpack_require__3(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__3.n(browser_asap);
                  var get_or_fail = __webpack_require__3(4531);
                  var kefir_cast = __webpack_require__3(5164);
                  var kefir_cast_default = /* @__PURE__ */ __webpack_require__3.n(kefir_cast);
                  ;
                  const membersMap = /* @__PURE__ */ new WeakMap();
                  class ContentPanelView extends safe_event_emitter.A {
                    destroyed = false;
                    constructor(contentPanelViewImplementation) {
                      super();
                      const members = {
                        contentPanelViewImplementation
                      };
                      membersMap.set(this, members);
                      this.#bindToStreamEvents();
                    }
                    remove() {
                      (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.remove();
                    }
                    close() {
                      (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.close();
                    }
                    open() {
                      (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.open();
                    }
                    isActive() {
                      return (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.isActive();
                    }
                    #bindToStreamEvents() {
                      const stream = (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.getEventStream();
                      stream.onValue((_ref) => {
                        let {
                          eventName
                        } = _ref;
                        this.emit(eventName);
                      });
                      stream.onEnd(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                      });
                    }
                  }
                  ;
                  class ThreadView extends safe_event_emitter.A {
                    #threadViewImplementation;
                    #appId;
                    #driver;
                    #membrane;
                    destroyed = false;
                    constructor(threadViewImplementation, appId, driver, membrane) {
                      super();
                      this.#threadViewImplementation = threadViewImplementation;
                      this.#appId = appId;
                      this.#driver = driver;
                      this.#membrane = membrane;
                      this.#bindToStreamEvents();
                    }
                    addSidebarContentPanel(descriptor) {
                      const descriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], descriptor).toProperty();
                      this.#driver.getLogger().eventSdkPassive("threadView.addSidebarContentPanel");
                      const contentPanelImplementation = this.#threadViewImplementation.addSidebarContentPanel(descriptorPropertyStream);
                      if (contentPanelImplementation) {
                        return new ContentPanelView(contentPanelImplementation);
                      }
                      return null;
                    }
                    addNoticeBar() {
                      return this.#threadViewImplementation.addNoticeBar();
                    }
                    /**
                     * @alpha
                     * @internal
                     */
                    registerHiddenCustomMessageNoticeProvider(provider) {
                      return this.#threadViewImplementation.registerHiddenCustomMessageNoticeProvider(provider);
                    }
                    /**
                     * @alpha
                     * @internal
                     */
                    addCustomMessage(descriptor) {
                      const descriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], descriptor).toProperty();
                      this.#driver.getLogger().eventSdkPassive("threadView.addCustomMessage");
                      return this.#threadViewImplementation.addCustomMessage(descriptorPropertyStream);
                    }
                    /**
                     * @returns {MessageView[]} of all the loaded MessageView objects currently in the thread. @see MessageView for more information on what "loaded" means. Note that more messages may load into the thread later! If it's important to get future messages, use {@link Conversations#registerMessageViewHandler} instead.
                     */
                    getMessageViews() {
                      const threadViewImplementation = this.#threadViewImplementation;
                      const membrane = this.#membrane;
                      return threadViewImplementation.getMessageViewDrivers().filter((messageViewDriver) => messageViewDriver.isLoaded()).map((messageViewDriver) => membrane.get(messageViewDriver));
                    }
                    getMessageViewsAll() {
                      const threadViewImplementation = this.#threadViewImplementation;
                      const membrane = this.#membrane;
                      return threadViewImplementation.getMessageViewDrivers().map((messageViewDriver) => membrane.get(messageViewDriver));
                    }
                    getSubject() {
                      return this.#threadViewImplementation.getSubject();
                    }
                    /**
                     * @deprecated
                     */
                    getThreadID() {
                      this.#driver.getLogger().deprecationWarning("threadView.getThreadID", "threadView.getThreadIDAsync");
                      return this.#threadViewImplementation.getThreadID();
                    }
                    getThreadIDAsync() {
                      return this.#threadViewImplementation.getThreadIDAsync();
                    }
                    addLabel() {
                      return this.#threadViewImplementation.addLabel();
                    }
                    #bindToStreamEvents() {
                      this.#threadViewImplementation.getEventStream().onEnd(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                        this.removeAllListeners();
                      });
                      this.#threadViewImplementation.getEventStream().filter(function(event) {
                        return event.type !== "internal" && event.eventName === "contactHover";
                      }).onValue((event) => {
                        const membrane = this.#membrane;
                        this.emit(event.eventName, {
                          contactType: event.contactType,
                          messageView: membrane.get(event.messageViewDriver),
                          contact: event.contact,
                          threadView: this
                        });
                      });
                    }
                    /**
                     * @internal
                     */
                    addSubjectButton(buttonDescriptor) {
                      return this.#threadViewImplementation.addSubjectButton(buttonDescriptor);
                    }
                    /**
                     * @internal
                     */
                    addFooterButton(buttonDescriptor) {
                      return this.#threadViewImplementation.addFooterButton(buttonDescriptor);
                    }
                  }
                  const thread_view = ThreadView;
                  var handler_registry = __webpack_require__3(3247);
                  ;
                  const memberMap = /* @__PURE__ */ new WeakMap();
                  const MessageViewViewStates = Object.freeze({
                    /**
                     * One case where a {@link MessageView} is 'HIDDEN' is when there are too many messages in a thread,
                     * and the message doesn't show at all.
                     */
                    HIDDEN: "HIDDEN",
                    /**
                     * {@link MessageView}s are collapsed when they are partially shown. The {@link MessageView}'s subject line and timestamp is visible, but the body of the message may be truncated.
                     */
                    COLLAPSED: "COLLAPSED",
                    EXPANDED: "EXPANDED"
                  });
                  const MessageViewToolbarSectionNames = Object.freeze({
                    MORE: "MORE"
                  });
                  class Conversations {
                    MessageViewViewStates = MessageViewViewStates;
                    MessageViewToolbarSectionNames = MessageViewToolbarSectionNames;
                    constructor(appId, driver, membrane) {
                      const members = {
                        appId,
                        driver,
                        threadViewHandlerRegistry: new handler_registry.A(),
                        messageViewHandlerRegistries: {
                          all: new handler_registry.A(),
                          loaded: new handler_registry.A()
                        },
                        attachmentCardViewHandlerRegistry: new handler_registry.A()
                      };
                      memberMap.set(this, members);
                      driver.getStopper().onValue(() => {
                        members.threadViewHandlerRegistry.dumpHandlers();
                        members.messageViewHandlerRegistries.all.dumpHandlers();
                        members.messageViewHandlerRegistries.loaded.dumpHandlers();
                      });
                      driver.getAttachmentCardViewDriverStream().filter((cardDriver) => cardDriver.getAttachmentType() === "FILE").onValue((attachmentCardViewDriver) => {
                        const attachmentCardView = membrane.get(attachmentCardViewDriver);
                        members.attachmentCardViewHandlerRegistry.addTarget(attachmentCardView);
                      });
                      _setupViewDriverWatcher(appId, driver.getThreadViewDriverStream().filter((t2) => !t2.isLoadingStub()), thread_view, members.threadViewHandlerRegistry, this, membrane);
                      _setupViewDriverWatcher(appId, driver.getMessageViewDriverStream(), MessageView, members.messageViewHandlerRegistries.all, this, membrane);
                      _setupViewDriverWatcher(appId, driver.getMessageViewDriverStream().flatMap((messageViewDriver) => messageViewDriver.isLoaded() ? kefir_esm.constant(messageViewDriver) : messageViewDriver.getEventStream().filter((event) => event.eventName === "messageLoad").map(() => messageViewDriver).take(1)), MessageView, members.messageViewHandlerRegistries.loaded, this, membrane);
                    }
                    registerThreadViewHandler(handler) {
                      return (0, get_or_fail.A)(memberMap, this).threadViewHandlerRegistry.registerHandler(handler);
                    }
                    registerMessageViewHandler(handler) {
                      return (0, get_or_fail.A)(memberMap, this).messageViewHandlerRegistries.loaded.registerHandler(handler);
                    }
                    registerMessageViewHandlerAll(handler) {
                      return (0, get_or_fail.A)(memberMap, this).messageViewHandlerRegistries.all.registerHandler(handler);
                    }
                    registerFileAttachmentCardViewHandler(handler) {
                      return (0, get_or_fail.A)(memberMap, this).attachmentCardViewHandlerRegistry.registerHandler(handler);
                    }
                  }
                  function _setupViewDriverWatcher(appId, stream, ViewClass, handlerRegistry, ConversationsInstance, membrane) {
                    var combinedStream = stream.map(function(viewDriver) {
                      const view = membrane.get(viewDriver);
                      return {
                        viewDriver,
                        view
                      };
                    });
                    combinedStream.flatMap((event) => event.viewDriver.getReadyStream().map(() => event).takeUntilBy(kefir_esm.fromEvents(event.view, "destroy"))).onValue(function(event) {
                      handlerRegistry.addTarget(event.view);
                    });
                  }
                  const conversations = Conversations;
                  ;
                  class MessageView extends safe_event_emitter.A {
                    destroyed = false;
                    #driver;
                    #linksInBody;
                    #membrane;
                    #messageViewImplementation;
                    constructor(messageViewImplementation, membrane, driver) {
                      super();
                      this.#driver = driver;
                      this.#linksInBody = null;
                      this.#membrane = membrane;
                      this.#messageViewImplementation = messageViewImplementation;
                      this.#bindToEventStream(messageViewImplementation.getEventStream());
                    }
                    addAttachmentCardView(cardOptions) {
                      const attachmentCardViewDriver = this.#messageViewImplementation.addAttachmentCard(cardOptions);
                      const attachmentCardView = this.#membrane.get(attachmentCardViewDriver);
                      attachmentCardViewDriver.getPreviewClicks().onValue((e) => {
                        if (cardOptions.previewOnClick) {
                          cardOptions.previewOnClick({
                            attachmentCardView,
                            preventDefault: () => e.preventDefault()
                          });
                        }
                      });
                      return attachmentCardView;
                    }
                    // TODO why is this a separate method?
                    addAttachmentCardViewNoPreview(cardOptions) {
                      return this.addAttachmentCardView(cardOptions);
                    }
                    addAttachmentsToolbarButton(buttonOptions) {
                      this.#messageViewImplementation.addButtonToDownloadAllArea({
                        tooltip: buttonOptions.tooltip,
                        iconUrl: buttonOptions.iconUrl,
                        onClick: () => {
                          const attachmentCardViews = this.#messageViewImplementation.getAttachmentCardViewDrivers().map((cardDriver) => this.#membrane.get(cardDriver));
                          buttonOptions.onClick({
                            attachmentCardViews
                          });
                        }
                      });
                    }
                    addToolbarButton(buttonOptions) {
                      if (typeof buttonOptions.onClick !== "function" || typeof buttonOptions.title !== "string" || !Object.prototype.hasOwnProperty.call(MessageViewToolbarSectionNames, buttonOptions.section)) {
                        throw new Error("Missing required properties on MessageViewToolbarButtonDescriptor object");
                      }
                      this.#messageViewImplementation.addMoreMenuItem(buttonOptions);
                    }
                    getElement() {
                      return this.#messageViewImplementation.getElement();
                    }
                    getBodyElement() {
                      return this.#messageViewImplementation.getContentsElement();
                    }
                    getMessageID() {
                      this.#driver.getLogger().deprecationWarning("messageView.getMessageID", "messageView.getMessageIDAsync");
                      return this.#messageViewImplementation.getMessageID();
                    }
                    getMessageIDAsync() {
                      return this.#messageViewImplementation.getMessageIDAsync();
                    }
                    // TODO non-file-attachment card views are asynchronously loaded. Add some sort of
                    // registerAttachmentCardViewHandler function to listen for other types of
                    // attachment cards if we want to continue support for them.
                    getFileAttachmentCardViews() {
                      return this.#messageViewImplementation.getAttachmentCardViewDrivers().filter((cardDriver) => cardDriver.getAttachmentType() === "FILE").map((attachmentCardViewDriver) => this.#membrane.get(attachmentCardViewDriver));
                    }
                    // Deprecated name
                    getAttachmentCardViews() {
                      this.#driver.getLogger().deprecationWarning("MessageView.getAttachmentCardViews", "MessageView.getFileAttachmentCardViews");
                      if (this.#driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.getFileAttachmentCardViews();
                    }
                    isElementInQuotedArea(element) {
                      return this.#messageViewImplementation.isElementInQuotedArea(element);
                    }
                    /**
                     * Returns whether this message has been loaded yet. If the message has not been loaded, some of the data related methods on this object may return empty results. The message may be loaded once the user clicks on the message stub.
                     */
                    isLoaded() {
                      return this.#messageViewImplementation.isLoaded();
                    }
                    getLinksInBody() {
                      if (!this.#linksInBody) {
                        const anchors = this.getBodyElement().querySelectorAll("a");
                        this.#linksInBody = Array.from(anchors).map((anchor) => ({
                          text: anchor.textContent,
                          html: anchor.innerHTML,
                          href: anchor.href,
                          element: anchor,
                          isInQuotedArea: this.isElementInQuotedArea(anchor)
                        }));
                      }
                      return this.#linksInBody;
                    }
                    /**
                     * Get the contact of the sender of this message.
                       * @returns {Contact} The contact of the sender of this message.
                      * @throws {Error} If the message has not been loaded yet.
                      *
                      * @note If you're using this method on an array of {MessageView}s returned by {@link ThreadRowView#getMessageViewsAll}, make sure to check {@link MessageView#isLoaded} before calling this method.
                     */
                    getSender() {
                      return this.#messageViewImplementation.getSender();
                    }
                    getRecipients() {
                      this.#driver.getLogger().deprecationWarning("MessageView.getRecipients", "MessageView.getRecipientEmailAddresses() or MessageView.getRecipientsFull()");
                      return this.getRecipientEmailAddresses().map((emailAddress) => ({
                        emailAddress,
                        name: null
                      }));
                    }
                    getRecipientEmailAddresses() {
                      return this.#messageViewImplementation.getRecipientEmailAddresses();
                    }
                    getRecipientsFull() {
                      return this.#messageViewImplementation.getRecipientsFull();
                    }
                    getThreadView() {
                      return this.#membrane.get(this.#messageViewImplementation.getThreadViewDriver());
                    }
                    getDateString() {
                      return this.#messageViewImplementation.getDateString();
                    }
                    addAttachmentIcon(iconDescriptor) {
                      return this.#messageViewImplementation.addAttachmentIcon(iconDescriptor);
                    }
                    getViewState() {
                      return MessageViewViewStates[this.#messageViewImplementation.getViewState()];
                    }
                    hasOpenReply() {
                      this.#driver.getLogger().deprecationWarning("MessageView.hasOpenReply");
                      if (this.#driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.#messageViewImplementation.hasOpenReply();
                    }
                    #bindToEventStream(stream) {
                      stream.onEnd(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                        this.removeAllListeners();
                      });
                      stream.filter((event) => event.type !== "internal" && event.eventName === "contactHover").onValue((event) => {
                        this.emit(event.eventName, {
                          contactType: event.contactType,
                          contact: event.contact,
                          messageView: this,
                          threadView: this.getThreadView()
                        });
                      });
                      if (this.isLoaded()) {
                        browser_asap_default()(() => {
                          this.emit("load", {
                            messageView: this
                          });
                        });
                      } else {
                        stream.filter((event) => event.eventName === "messageLoad").onValue(() => {
                          this.emit("load", {
                            messageView: this
                          });
                        });
                      }
                      stream.filter((event) => event.eventName === "viewStateChange").onValue((event) => {
                        this.emit("viewStateChange", {
                          oldViewState: MessageViewViewStates[event.oldValue],
                          newViewState: MessageViewViewStates[event.newValue],
                          messageView: this
                        });
                      });
                    }
                  }
                  var sortBy = __webpack_require__3(3281);
                  var sortBy_default = /* @__PURE__ */ __webpack_require__3.n(sortBy);
                  var once = __webpack_require__3(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__3.n(once);
                  var kefir_bus = __webpack_require__3(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__3.n(kefir_bus);
                  ;
                  class GmailAttachmentAreaView {
                    constructor(element, driver, messageViewDriver) {
                      this._driver = driver;
                      this._messageViewDriver = messageViewDriver;
                      this._elsToCardViews = /* @__PURE__ */ new WeakMap();
                      if (element) {
                        this._element = element;
                      } else {
                        this._setupElement();
                      }
                    }
                    destroy() {
                      this.getAttachmentCardViews().forEach((view) => {
                        view.destroy();
                      });
                    }
                    getElement() {
                      return this._element;
                    }
                    getAttachmentCardViews() {
                      const attachments = this._element.querySelectorAll(".aQH > span");
                      return Array.from(attachments).map((attachment) => {
                        let cardView = this._elsToCardViews.get(attachment);
                        if (!cardView) {
                          cardView = new gmail_attachment_card_view({
                            element: attachment
                          }, this._driver, this._messageViewDriver);
                          this._elsToCardViews.set(attachment, cardView);
                        }
                        return cardView;
                      });
                    }
                    _setupElement() {
                      this._element = document.createElement("div");
                      this._element.setAttribute("class", "hq gt a10");
                      this._element.innerHTML = ['<div class="hp"></div>', '<div class="a3I">Attachments area</div>', "<div></div>", '<div class="aQH">', '<div class="aZK"></div>', "</div>"].join("");
                    }
                    _createAreaToolbarIfNeeded() {
                      const preexistingToolbar = this._element.querySelector(".ho");
                      if (preexistingToolbar) {
                        return preexistingToolbar;
                      }
                      const toolbar2 = document.createElement("div");
                      toolbar2.className = "ho";
                      toolbar2.innerHTML = `<span class="aVW"><span>${this.getAttachmentCardViews().length}</span> Attachments</span><div class="aZi J-J5-Ji"></div>`;
                      this._element.insertBefore(toolbar2, this._element.lastElementChild);
                      this._element.classList.remove("a10");
                      return toolbar2;
                    }
                    _updateToolbarCardCount() {
                      const cardCount = this.getAttachmentCardViews().length;
                      if (cardCount > 1) {
                        const toolbar2 = this._createAreaToolbarIfNeeded();
                        const counter = (0, querySelectorOrFail.A)(toolbar2, ".aVW > span");
                        counter.textContent = String(cardCount);
                      }
                    }
                    addGmailAttachmentCardView(gmailAttachmentCardView) {
                      const zone = this._element.querySelector(".aXK, .aQH");
                      if (!zone) {
                        this._driver.getLogger().error(new Error("Could not find attachment zone"));
                        return;
                      }
                      zone.insertBefore(gmailAttachmentCardView.getElement(), zone.lastElementChild);
                      this._updateToolbarCardCount();
                    }
                    addButtonToDownloadAllArea(options2) {
                      var buttonView = new button_view.A({
                        iconClass: "T-I-J3",
                        iconUrl: options2.iconUrl,
                        tooltip: options2.tooltip,
                        hasButtonToLeft: true
                      });
                      buttonView.addClass("aZj");
                      buttonView.getElement().children[0].className = "asa";
                      new basic_button_view_controller.A({
                        activateFunction: () => {
                          if (options2.onClick) {
                            options2.onClick();
                          }
                        },
                        buttonView
                      });
                      const toolbar2 = this._createAreaToolbarIfNeeded();
                      (0, querySelectorOrFail.A)(toolbar2, ".aZi").appendChild(buttonView.getElement());
                    }
                  }
                  const gmail_attachment_area_view = GmailAttachmentAreaView;
                  var lib_logger = __webpack_require__3(2617);
                  var extract_contact_from_email_contact_string = __webpack_require__3(3324);
                  ;
                  const cache = {};
                  function getUpdatedContact(headerContact, element) {
                    let cacheEntry = cache[headerContact.emailAddress];
                    if (cacheEntry) {
                      if (cacheEntry.headerContact.name !== headerContact.name) {
                        delete cache[headerContact.emailAddress];
                      } else {
                        return cacheEntry.modalContact;
                      }
                    }
                    const menuElement = element.querySelector(".ajA.SK");
                    const isMenuElementHidden = menuElement && menuElement.style.visibility === "hidden";
                    const menuButtonElement = element.querySelector(".ajy[aria-haspopup=true]");
                    if (menuButtonElement && isMenuElementHidden) {
                      const block = (event) => {
                        event.stopPropagation();
                      };
                      const modifyFocusEvent = (event) => {
                        event.shouldIgnore = true;
                      };
                      element.addEventListener("click", block);
                      document.addEventListener("focus", modifyFocusEvent, true);
                      (0, simulate_mouse_event.jp)(menuButtonElement);
                      try {
                        updateContactCacheFromModal(headerContact);
                      } catch (err) {
                        lib_logger.A.error(err);
                      } finally {
                        (0, simulate_mouse_event.jp)(menuButtonElement);
                        element.removeEventListener("click", block);
                        document.removeEventListener("focus", modifyFocusEvent, true);
                      }
                      cacheEntry = cache[headerContact.emailAddress];
                      if (cacheEntry) {
                        return cacheEntry.modalContact;
                      }
                    }
                    return headerContact;
                  }
                  function updateContactCacheFromModal(headerContact) {
                    const spans = document.querySelectorAll(".ajC [email]");
                    for (let ii = 0; ii < spans.length; ii++) {
                      const span = spans[ii];
                      const emailAddress = span.getAttribute("email");
                      if (!emailAddress) continue;
                      if (cache[emailAddress]) continue;
                      let modalContact = {
                        emailAddress,
                        name: null
                      };
                      const name = span.getAttribute("name");
                      if (name) {
                        modalContact.name = name;
                      } else {
                        const stringContact = (0, extract_contact_from_email_contact_string.A)(span.textContent);
                        if (emailAddress === stringContact.emailAddress) {
                          modalContact = stringContact;
                        }
                      }
                      cache[emailAddress] = {
                        headerContact,
                        modalContact
                      };
                    }
                  }
                  ;
                  class AttachmentIcon extends safe_event_emitter.A {
                  }
                  const attachment_icon = AttachmentIcon;
                  var make_mutation_observer_stream = __webpack_require__3(5938);
                  var make_mutation_observer_chunked_stream = __webpack_require__3(3197);
                  var censorHTMLtree = __webpack_require__3(1443);
                  ;
                  function findParent(el, cb) {
                    let candidate = el.parentElement;
                    while (candidate) {
                      if (cb(candidate)) {
                        return candidate;
                      }
                      candidate = candidate.parentElement;
                    }
                    return null;
                  }
                  ;
                  function reemitClickEvent(event) {
                    const fakeEvent = new MouseEvent("click");
                    Object.defineProperties(fakeEvent, {
                      target: {
                        value: event.target
                      },
                      detail: {
                        value: event.detail
                      },
                      screenX: {
                        value: event.screenX
                      },
                      screenY: {
                        value: event.screenY
                      },
                      clientX: {
                        value: event.clientX
                      },
                      clientY: {
                        value: event.clientY
                      },
                      button: {
                        value: event.button
                      },
                      buttons: {
                        value: event.buttons
                      },
                      ctrlKey: {
                        value: event.ctrlKey
                      },
                      shiftKey: {
                        value: event.shiftKey
                      },
                      altKey: {
                        value: event.altKey
                      },
                      metaKey: {
                        value: event.metaKey
                      }
                    });
                    document.dispatchEvent(fakeEvent);
                  }
                  ;
                  let hasSeenOldElement = false;
                  class GmailMessageView {
                    #element;
                    #driver;
                    #eventStream = kefir_bus_default()();
                    #stopper = js_default()();
                    #threadViewDriver;
                    #moreMenuItemDescriptors;
                    #moreMenuAddedElements;
                    #replyElementStream;
                    #readyStream;
                    #replyElement;
                    #gmailAttachmentAreaView;
                    #messageLoaded = false;
                    #openMoreMenu;
                    #sender = null;
                    #recipients = null;
                    #recipientEmailAddresses = null;
                    #recipientsFull = null;
                    constructor(element, gmailThreadView, driver) {
                      this.#element = element;
                      this.#threadViewDriver = gmailThreadView;
                      this.#driver = driver;
                      this.#moreMenuItemDescriptors = [];
                      this.#moreMenuAddedElements = [];
                      this.#replyElement = null;
                      this.#replyElementStream = this.#eventStream.filter(function(event) {
                        return event.eventName === "replyElement";
                      }).map((event) => event.change);
                      this.#setupMessageStateStream();
                      this.#monitorEmailAddressHovering();
                      this.#setupMoreMenuWatching();
                      let partialReadyStream;
                      const messageIdElement = this.#element.querySelector("[data-message-id]");
                      if (messageIdElement) {
                        const syncMessageId = messageIdElement.getAttribute("data-message-id");
                        if (!syncMessageId) throw new Error("data-message-id attribute has no value");
                        if (messageIdElement.hasAttribute("data-legacy-message-id") && !this.#driver.isRecentSyncDraftId(syncMessageId.replace("#", ""))) {
                          partialReadyStream = kefir_esm.constant(null);
                        } else {
                          partialReadyStream = kefir_esm.fromPromise((async () => {
                            for (let ii = 0; ii < 10; ii++) {
                              try {
                                const gmailMessageId = await this.#driver.getGmailMessageIdForSyncMessageId(syncMessageId.replace("#", ""));
                                messageIdElement.setAttribute("data-legacy-message-id", gmailMessageId);
                                return null;
                              } catch (e) {
                                await new Promise((resolve) => setTimeout(resolve, ii * 200));
                              }
                            }
                            throw new Error("gmail message id never became available");
                          })());
                        }
                      } else {
                        partialReadyStream = kefir_esm.constant(null);
                      }
                      this.#readyStream = partialReadyStream.takeUntilBy(this.#stopper).onValue(() => this.#processInitialState());
                    }
                    destroy() {
                      this.#stopper.destroy();
                      this.#eventStream.end();
                      if (this.#gmailAttachmentAreaView) this.#gmailAttachmentAreaView.destroy();
                      this.#moreMenuAddedElements.forEach((el) => {
                        el.remove();
                      });
                    }
                    getEventStream() {
                      return this.#eventStream;
                    }
                    getReplyElementStream() {
                      return this.#replyElementStream;
                    }
                    getElement() {
                      return this.#element;
                    }
                    getThreadViewDriver() {
                      return this.#threadViewDriver;
                    }
                    isLoaded() {
                      return this.#messageLoaded;
                    }
                    getContentsElement() {
                      if (!this.#messageLoaded) {
                        throw new Error("tried to get message contents before message is loaded");
                      }
                      try {
                        return (0, querySelectorOrFail.A)(this.#element, "div.ii.gt");
                      } catch (err) {
                        this.#driver.getLogger().error(err);
                        return (0, querySelectorOrFail.A)(this.#element, ".adP");
                      }
                    }
                    isElementInQuotedArea(element) {
                      return findParent(element, (el) => el.nodeName === "BLOCKQUOTE") != null;
                    }
                    getSender() {
                      let sender = this.#sender;
                      if (sender) return sender;
                      const senderSpan = (0, querySelectorOrFail.A)(this.#element, "td.gF span[email]");
                      const emailAddress = senderSpan.getAttribute("email");
                      if (!emailAddress) throw new Error("Could not find email address");
                      sender = this.#sender = {
                        name: senderSpan.getAttribute("name"),
                        emailAddress
                      };
                      return sender;
                    }
                    getRecipients() {
                      let recipients = this.#recipients;
                      if (recipients) return recipients;
                      const receipientSpans = Array.from(this.#element.querySelectorAll(".hb span[email]"));
                      recipients = this.#recipients = receipientSpans.map((span) => {
                        return this.#getUpdatedContact({
                          name: span.getAttribute("name"),
                          emailAddress: span.getAttribute("email") || ""
                        });
                      });
                      return recipients;
                    }
                    getRecipientEmailAddresses() {
                      let recipients = this.#recipientEmailAddresses;
                      if (recipients) return recipients;
                      const receipientSpans = Array.from(this.#element.querySelectorAll(".hb span[email]"));
                      recipients = this.#recipientEmailAddresses = receipientSpans.map((span) => span.getAttribute("email") || "");
                      return recipients;
                    }
                    async getRecipientsFull() {
                      let recipients = this.#recipientsFull;
                      if (recipients) return recipients;
                      const threadID = this.#threadViewDriver.getInternalID();
                      recipients = this.#recipientsFull = await this.#driver.getPageCommunicator().getMessageRecipients(threadID, this.#element);
                      if (!recipients) {
                        this.#driver.getLogger().error(new Error("Failed to find message recipients from response"), {
                          threadID
                        });
                        recipients = this.#recipientsFull = this.getRecipients();
                      }
                      return recipients;
                    }
                    getDateString() {
                      return (0, querySelectorOrFail.A)(this.#element, ".ads .gK .g3").title;
                    }
                    async getDate() {
                      const threadID = this.#threadViewDriver.getInternalID();
                      return await this.#driver.getPageCommunicator().getMessageDate(threadID, this.#element);
                    }
                    getAttachmentCardViewDrivers() {
                      if (!this.#gmailAttachmentAreaView) {
                        return [];
                      }
                      return this.#gmailAttachmentAreaView.getAttachmentCardViews();
                    }
                    addButtonToDownloadAllArea(options2) {
                      var gmailAttachmentAreaView = this.#getAttachmentArea();
                      if (!gmailAttachmentAreaView) {
                        return;
                      }
                      gmailAttachmentAreaView.addButtonToDownloadAllArea(options2);
                    }
                    addMoreMenuItem(options2) {
                      this.#moreMenuItemDescriptors = sortBy_default()(this.#moreMenuItemDescriptors.concat([options2]), (o) => o.orderHint);
                      this.#updateMoreMenu();
                    }
                    #setupMoreMenuWatching() {
                      this.#openMoreMenu = null;
                      this.#eventStream.filter((e) => e.eventName === "viewStateChange").toProperty(() => null).flatMapLatest(() => {
                        const moreButton = this.#getMoreButton();
                        if (!moreButton) {
                          return kefir_esm.constant(null);
                        }
                        return (0, make_mutation_observer_chunked_stream.A)(moreButton, {
                          attributes: true,
                          attributeFilter: ["aria-expanded"]
                        }).map(() => moreButton.getAttribute("aria-expanded") === "true" ? this.#getOpenMoreMenu() : null);
                      }).takeUntilBy(this.#stopper).onValue((openMoreMenu) => {
                        this.#openMoreMenu = openMoreMenu;
                        this.#updateMoreMenu();
                      });
                    }
                    #getMoreButton() {
                      if (this.getViewState() !== "EXPANDED") {
                        return null;
                      }
                      return this.#element.querySelector("tr.acZ div.T-I.J-J5-Ji.aap.L3[role=button][aria-haspopup]");
                    }
                    #getOpenMoreMenu() {
                      const selector_2022_11_23 = "td > div.nH.a98.iY > div.nH .aHU .b7.J-M[aria-haspopup=true]";
                      const selector_2023_11_16 = "div.nH.a98.iY > div.nH .aHU .b7.J-M[aria-haspopup=true]";
                      const maybeMoreMenu = document.body.querySelector(selector_2023_11_16) || document.body.querySelector(selector_2022_11_23);
                      return maybeMoreMenu || document.body.querySelector("td > div.nH.if > div.nH.aHU div.b7.J-M[aria-haspopup=true]");
                    }
                    #closeActiveEmailMenu() {
                      const moreButton = this.#getMoreButton();
                      if (moreButton) {
                        (0, simulate_mouse_event.jp)(moreButton);
                      }
                    }
                    #updateMoreMenu() {
                      this.#moreMenuAddedElements.forEach((el) => {
                        el.remove();
                      });
                      this.#moreMenuAddedElements.length = 0;
                      const openMoreMenu = this.#openMoreMenu;
                      if (openMoreMenu && this.#moreMenuItemDescriptors.length) {
                        const originalHeight = openMoreMenu.offsetHeight;
                        const originalWidth = openMoreMenu.offsetWidth;
                        const dividerEl = document.createElement("div");
                        dividerEl.className = "J-Kh";
                        this.#moreMenuAddedElements.push(dividerEl);
                        openMoreMenu.appendChild(dividerEl);
                        this.#moreMenuItemDescriptors.forEach((options2) => {
                          const itemEl = document.createElement("div");
                          itemEl.className = "J-N";
                          itemEl.setAttribute("role", "menuitem");
                          itemEl.innerHTML = auto_html_js_default()`<div class="J-N-Jz">${options2.title}</div>`;
                          itemEl.addEventListener("mouseenter", () => itemEl.classList.add("J-N-JT"));
                          itemEl.addEventListener("mouseleave", () => itemEl.classList.remove("J-N-JT"));
                          itemEl.addEventListener("click", () => {
                            this.#closeActiveEmailMenu();
                            options2.onClick();
                          });
                          if (options2.iconUrl || options2.iconClass) {
                            const iconEl = document.createElement("img");
                            iconEl.className = `f4 J-N-JX inboxsdk__message_more_icon ${options2.iconClass || ""}`;
                            iconEl.src = options2.iconUrl || "images/cleardot.gif";
                            const insertionPoint = itemEl.firstElementChild;
                            if (insertionPoint) insertionPoint.appendChild(iconEl);
                          }
                          this.#moreMenuAddedElements.push(itemEl);
                          openMoreMenu.appendChild(itemEl);
                        });
                        const menuRect = openMoreMenu.getBoundingClientRect();
                        const addedWidth = menuRect.width - originalWidth;
                        if (addedWidth > 0) {
                          openMoreMenu.style.left = Math.max(0, parseInt(openMoreMenu.style.left) - addedWidth) + "px";
                        }
                        const moreButton = this.#getMoreButton();
                        if (moreButton) {
                          const moreButtonRect = moreButton.getBoundingClientRect();
                          if (menuRect.top < moreButtonRect.top) {
                            const addedHeight = menuRect.height - originalHeight;
                            openMoreMenu.style.top = Math.max(0, parseInt(openMoreMenu.style.top) - addedHeight) + "px";
                          }
                        }
                      }
                    }
                    getMessageID() {
                      let ignoreLoadStatus = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
                      if (!ignoreLoadStatus && !this.#messageLoaded) {
                        throw new Error("tried to get message id before message is loaded");
                      }
                      const messageIdElement = this.#element.querySelector("[data-legacy-message-id]");
                      if (messageIdElement) {
                        const messageId = messageIdElement.getAttribute("data-legacy-message-id");
                        if (!messageId) throw new Error("message id attribute with no value, wtf?");
                        return messageId;
                      }
                      const messageEl = this.#element.querySelector("div.ii.gt");
                      if (!messageEl) {
                        const err = new Error("Could not find message id element");
                        this.#driver.getLogger().error(err, {
                          elementHtml: (0, censorHTMLtree.A)(this.#element)
                        });
                        throw err;
                      }
                      const m = messageEl.className.match(/\bm([0-9a-f]+)\b/);
                      if (m) {
                        if (!hasSeenOldElement) {
                          hasSeenOldElement = true;
                          this.#driver.getLogger().eventSite("old messageid location");
                        }
                        return m[1];
                      } else {
                        const messageElChild = messageEl.firstElementChild;
                        if (!messageElChild) {
                          const err = new Error("Could not find message id value");
                          this.#driver.getLogger().error(err, {
                            reason: "Could not find element",
                            messageHtml: (0, censorHTMLtree.A)(messageEl)
                          });
                          throw err;
                        }
                        const m2 = messageElChild.className.match(/\bm([0-9a-f]+)\b/);
                        if (!m2) {
                          const err = new Error("Could not find message id value");
                          this.#driver.getLogger().error(err, {
                            reason: "Element was missing message className",
                            messageHtml: (0, censorHTMLtree.A)(messageEl)
                          });
                          throw err;
                        }
                        return m2[1];
                      }
                    }
                    async getMessageIDAsync() {
                      return this.getMessageID();
                    }
                    addAttachmentIcon(iconDescriptor) {
                      const attachmentIcon = new attachment_icon();
                      if (!this.#element) {
                        console.warn("addDateIcon called on destroyed message");
                        return attachmentIcon;
                      }
                      this.#element.setAttribute("inboxsdk__message_added_attachment_icon", "true");
                      const getImgElement = once_default()(() => {
                        const img = document.createElement("img");
                        img.src = "images/cleardot.gif";
                        return img;
                      });
                      const getCustomIconWrapper = once_default()(() => {
                        const div = document.createElement("div");
                        return div;
                      });
                      const getTooltipNodeWrapper = once_default()(() => {
                        const div = document.createElement("div");
                        return div;
                      });
                      let added = false;
                      let currentIconUrl = null;
                      this.#stopper.onValue(() => {
                        if (added) {
                          getCustomIconWrapper().remove();
                          getTooltipNodeWrapper().remove();
                          getImgElement().remove();
                          added = false;
                        }
                      });
                      kefir_cast_default()(kefir_esm, iconDescriptor).combine(this.#eventStream.filter((event) => event.eventName === "viewStateChange").toProperty(() => null), (opts) => opts).takeUntilBy(this.#stopper).onValue((opts) => {
                        if (!opts) {
                          if (added) {
                            getCustomIconWrapper().remove();
                            getImgElement().remove();
                            getTooltipNodeWrapper().remove();
                            added = false;
                          }
                        } else {
                          let attachmentDiv;
                          if (this.getViewState() === "COLLAPSED") {
                            attachmentDiv = (0, querySelectorOrFail.A)(this.#element, ".adf.ads td.gH span");
                          } else {
                            attachmentDiv = (0, querySelectorOrFail.A)(this.#element, "td.gH div.gK span");
                          }
                          const img = opts.iconHtml != null ? getCustomIconWrapper() : getImgElement();
                          const onClick = opts.onClick;
                          if (onClick) {
                            img.onclick = function(event) {
                              event.preventDefault();
                              event.stopPropagation();
                              onClick();
                            };
                            img.style.cursor = "pointer";
                          } else {
                            img.onclick = null;
                            img.style.cursor = "";
                          }
                          if (opts.tooltip && typeof opts.tooltip == "object" && opts.tooltip instanceof HTMLElement) {
                            const tooltipWrapper = getTooltipNodeWrapper();
                            tooltipWrapper.className = "inboxsdk__message_attachment_tooltipWrapper";
                            tooltipWrapper.onclick = function(event) {
                              event.stopPropagation();
                              reemitClickEvent(event);
                            };
                            tooltipWrapper.appendChild(opts.tooltip);
                            img.onmouseenter = function(event) {
                              event.preventDefault();
                              event.stopPropagation();
                              img.appendChild(tooltipWrapper);
                              attachmentIcon.emit("tooltipShown");
                            };
                            img.onmouseleave = function(event) {
                              event.preventDefault();
                              event.stopPropagation();
                              img.removeChild(tooltipWrapper);
                              attachmentIcon.emit("tooltipHidden");
                            };
                            img.removeAttribute("data-tooltip");
                          } else if (opts.tooltip && typeof opts.tooltip == "string") {
                            img.setAttribute("data-tooltip", opts.tooltip);
                          } else {
                            img.removeAttribute("data-tooltip");
                          }
                          img.className = opts.iconHtml != null ? `inboxsdk__message_attachment_iconWrapper ${opts.iconClass || ""}` : "inboxsdk__message_attachment_icon " + (opts.iconClass || "");
                          if (opts.iconHtml != null) {
                            if (attachmentDiv.contains(getImgElement())) {
                              getImgElement().remove();
                            }
                            img.innerHTML = opts.iconHtml;
                          } else if (currentIconUrl != opts.iconUrl) {
                            if (attachmentDiv.contains(getCustomIconWrapper())) {
                              getCustomIconWrapper().remove();
                            }
                            img.style.background = opts.iconUrl ? "url(" + opts.iconUrl + ") no-repeat 0 0" : "";
                            currentIconUrl = opts.iconUrl;
                          }
                          if (!attachmentDiv.contains(img)) {
                            attachmentDiv.appendChild(img);
                            added = true;
                          }
                        }
                      });
                      return attachmentIcon;
                    }
                    getViewState() {
                      if (this.#element.classList.contains("kQ") || this.#element.classList.contains("kx")) {
                        return "HIDDEN";
                      } else if (this.#element.classList.contains("kv")) {
                        return "COLLAPSED";
                      } else {
                        return "EXPANDED";
                      }
                    }
                    hasOpenReply() {
                      return Boolean(this.#replyElement);
                    }
                    addAttachmentCard(options2) {
                      var gmailAttachmentCardView = new gmail_attachment_card_view(options2, this.#driver, this);
                      if (!this.#gmailAttachmentAreaView) {
                        this.#gmailAttachmentAreaView = this.#getAttachmentArea();
                      }
                      if (!this.#gmailAttachmentAreaView) {
                        this.#gmailAttachmentAreaView = this.#createAttachmentArea();
                      }
                      this.#gmailAttachmentAreaView.addGmailAttachmentCardView(gmailAttachmentCardView);
                      return gmailAttachmentCardView;
                    }
                    #setupMessageStateStream() {
                      var self2 = this;
                      this.#eventStream.plug((0, make_mutation_observer_stream.A)(this.#element, {
                        attributes: true,
                        attributeFilter: ["class"],
                        attributeOldValue: true
                      }).takeUntilBy(this.#stopper).map((mutation) => {
                        const currentClassList = mutation.target.classList;
                        const mutationOldValue = mutation.oldValue;
                        let oldValue;
                        let newValue;
                        if (mutationOldValue.indexOf("kQ") > -1 || mutationOldValue.indexOf("kx") > -1) {
                          oldValue = "HIDDEN";
                        } else if (mutationOldValue.indexOf("kv") > -1 || mutationOldValue.indexOf("ky") > -1) {
                          oldValue = "COLLAPSED";
                        } else if (mutationOldValue.indexOf("h7") > -1) {
                          oldValue = "EXPANDED";
                        }
                        if (currentClassList.contains("kQ") || currentClassList.contains("kx")) {
                          newValue = "HIDDEN";
                        } else if (currentClassList.contains("kv") || currentClassList.contains("ky")) {
                          newValue = "COLLAPSED";
                        } else if (currentClassList.contains("h7")) {
                          newValue = "EXPANDED";
                        }
                        return {
                          oldValue,
                          newValue,
                          currentClassList
                        };
                      }).map((event) => {
                        if (event.newValue === "EXPANDED" && event.oldValue !== "EXPANDED") {
                          self2.#checkMessageOpenState(event.currentClassList);
                        }
                        return event;
                      }).filter((event) => {
                        return event.newValue !== event.oldValue && !!event.oldValue && !!event.newValue;
                      }).map((event) => {
                        return {
                          eventName: "viewStateChange",
                          oldValue: event.oldValue,
                          newValue: event.newValue
                        };
                      }));
                    }
                    #processInitialState() {
                      this.#checkMessageOpenState(this.#element.classList);
                    }
                    #checkMessageOpenState(classList) {
                      if (!classList.contains("h7")) {
                        return;
                      }
                      if (this.#messageLoaded) {
                        return;
                      }
                      let messageId;
                      try {
                        messageId = this.getMessageID(true);
                      } catch (err) {
                        this.#driver.getLogger().error(err);
                        return;
                      }
                      this.#messageLoaded = true;
                      try {
                        this.#driver.associateThreadAndMessageIDs(this.#threadViewDriver.getThreadID(), messageId);
                      } catch (err) {
                        this.#driver.getLogger().error(err);
                      }
                      this.#gmailAttachmentAreaView = this.#getAttachmentArea();
                      this.#eventStream.emit({
                        type: "internal",
                        eventName: "messageLoad"
                      });
                      this.#setupReplyStream();
                    }
                    #setupReplyStream() {
                      const replyContainer = this.#element.querySelector(".ip");
                      if (!replyContainer) {
                        return;
                      }
                      var self2 = this;
                      var currentReplyElementRemovalStream = null;
                      kefir_esm.combine([(0, make_mutation_observer_chunked_stream.A)(replyContainer, {
                        attributes: true,
                        attributeFilter: ["class"]
                      }), kefir_esm.later(1, null)]).merge(kefir_esm.later(1, void 0)).takeUntilBy(this.#stopper).beforeEnd(() => "END").onValue((mutation) => {
                        if (mutation !== "END" && replyContainer.classList.contains("adB")) {
                          if (!currentReplyElementRemovalStream) {
                            const replyElement = replyContainer.firstElementChild;
                            self2.#replyElement = replyElement;
                            if (replyElement) {
                              currentReplyElementRemovalStream = kefir_bus_default()();
                              self2.#eventStream.emit({
                                type: "internal",
                                eventName: "replyElement",
                                change: {
                                  el: replyElement,
                                  removalStream: currentReplyElementRemovalStream
                                }
                              });
                            }
                          }
                        } else {
                          if (currentReplyElementRemovalStream) {
                            var temp = currentReplyElementRemovalStream;
                            currentReplyElementRemovalStream = null;
                            temp.emit(null);
                            temp.end();
                            self2.#replyElement = null;
                          }
                        }
                      });
                    }
                    #monitorEmailAddressHovering() {
                      var self2 = this;
                      this.#eventStream.plug(kefir_esm.fromEvents(this.#element, "mouseover").map((e) => e.target).filter(function(element) {
                        return element && element.getAttribute("email");
                      }).map(function(element) {
                        let contactType = null;
                        if (!self2.#element.classList.contains("h7")) {
                          contactType = "sender";
                        } else {
                          if (self2.#element.querySelector("h3.iw").contains(element)) {
                            contactType = "sender";
                          } else {
                            contactType = "recipient";
                          }
                        }
                        return {
                          get contact() {
                            return self2.#getUpdatedContact(_extractContactInformation(element));
                          },
                          contactType,
                          eventName: "contactHover",
                          messageViewDriver: self2
                        };
                      }));
                    }
                    #getAttachmentArea() {
                      if (this.#element.querySelector(".hq")) {
                        return new gmail_attachment_area_view(this.#element.querySelector(".hq"), this.#driver, this);
                      }
                      return null;
                    }
                    #createAttachmentArea() {
                      const gmailAttachmentAreaView = new gmail_attachment_area_view(null, this.#driver, this);
                      const beforeElement = (0, querySelectorOrFail.A)(this.#element, ".hi");
                      const parentNode = beforeElement.parentNode;
                      if (!parentNode) throw new Error("parentNode not found");
                      parentNode.insertBefore(gmailAttachmentAreaView.getElement(), beforeElement);
                      return gmailAttachmentAreaView;
                    }
                    #getUpdatedContact(inContact) {
                      return getUpdatedContact(inContact, this.#element);
                    }
                    // Is this used?
                    getReadyStream() {
                      return this.#readyStream;
                    }
                  }
                  function _extractContactInformation(span) {
                    return {
                      name: span.getAttribute("name"),
                      emailAddress: span.getAttribute("email")
                    };
                  }
                  const gmail_message_view = GmailMessageView;
                  var pdelay_js = __webpack_require__3(8498);
                  var idMap = __webpack_require__3(5183);
                  var SimpleElementView = __webpack_require__3(3741);
                  ;
                  class CustomMessageView extends safe_event_emitter.A {
                    #el;
                    #iconEl;
                    #contentEl;
                    #contentHeaderEl;
                    #contentBodyEl;
                    destroyed = false;
                    #stopper = js_default()();
                    #isCollapsed = true;
                    #lastDescriptor;
                    constructor(descriptorStream, onReady) {
                      super();
                      this.#el = document.createElement("div");
                      this.#el.classList.add("inboxsdk__custom_message_view");
                      this.#el.classList.add("inboxsdk__custom_message_view_collapsed");
                      this.#iconEl = document.createElement("div");
                      this.#iconEl.classList.add("inboxsdk__custom_message_view_icon");
                      this.#contentEl = document.createElement("div");
                      this.#contentEl.classList.add("inboxsdk__custom_message_view_content");
                      this.#contentHeaderEl = document.createElement("div");
                      this.#contentHeaderEl.classList.add("inboxsdk__custom_message_view_header");
                      this.#contentBodyEl = document.createElement("div");
                      this.#contentBodyEl.classList.add("inboxsdk__custom_message_view_body");
                      this.#el.appendChild(this.#iconEl);
                      this.#el.appendChild(this.#contentEl);
                      this.#el.addEventListener("click", (e) => {
                        if (this.#isCollapsed) {
                          this.expand();
                          e.preventDefault();
                          e.stopPropagation();
                        }
                      });
                      this.#contentHeaderEl.addEventListener("click", (e) => {
                        this.collapse();
                        e.preventDefault();
                        e.stopPropagation();
                      });
                      descriptorStream.takeUntilBy(this.#stopper).onValue((descriptor) => {
                        this.#el.setAttribute("data-inboxsdk-sortdate", String(descriptor.sortDate.getTime()));
                        const previousDescriptor = this.#lastDescriptor;
                        this.#lastDescriptor = descriptor;
                        if (!previousDescriptor || previousDescriptor.iconUrl !== descriptor.iconUrl) {
                          const img = document.createElement("img");
                          img.src = descriptor.iconUrl;
                          this.#iconEl.innerHTML = "";
                          this.#iconEl.appendChild(img);
                        }
                        if ((!previousDescriptor || previousDescriptor.collapsedEl !== descriptor.collapsedEl) && this.#isCollapsed) {
                          if (previousDescriptor) previousDescriptor.collapsedEl.remove();
                          this.#contentEl.appendChild(descriptor.collapsedEl);
                        }
                        if (!previousDescriptor || previousDescriptor.headerEl !== descriptor.headerEl) {
                          if (previousDescriptor) previousDescriptor.headerEl.remove();
                          this.#contentHeaderEl.appendChild(descriptor.headerEl);
                        }
                        if (!previousDescriptor || previousDescriptor.bodyEl !== descriptor.bodyEl) {
                          if (previousDescriptor) previousDescriptor.bodyEl.remove();
                          this.#contentBodyEl.appendChild(descriptor.bodyEl);
                        }
                      }).take(1).onValue(onReady);
                    }
                    destroy() {
                      if (this.destroyed) return;
                      this.destroyed = true;
                      this.#stopper.destroy();
                      this.emit("destroy");
                      this.#el.remove();
                    }
                    expand() {
                      this.#isCollapsed = false;
                      const descriptor = this.#lastDescriptor;
                      if (descriptor) descriptor.collapsedEl.remove();
                      this.#contentEl.appendChild(this.#contentHeaderEl);
                      this.#contentEl.appendChild(this.#contentBodyEl);
                      this.#el.classList.remove("inboxsdk__custom_message_view_collapsed");
                      this.emit("expanded");
                    }
                    collapse() {
                      this.#isCollapsed = true;
                      this.#contentHeaderEl.remove();
                      this.#contentBodyEl.remove();
                      const descriptor = this.#lastDescriptor;
                      if (descriptor) {
                        this.#contentEl.appendChild(descriptor.collapsedEl);
                      }
                      this.#el.classList.add("inboxsdk__custom_message_view_collapsed");
                      this.emit("collapsed");
                    }
                    getElement() {
                      return this.#el;
                    }
                    getSortDate() {
                      if (this.#lastDescriptor) return this.#lastDescriptor.sortDate;
                      else return null;
                    }
                  }
                  var gmail_element_getter = __webpack_require__3(4003);
                  var lodash_escape = __webpack_require__3(3131);
                  var escape_default = /* @__PURE__ */ __webpack_require__3.n(lodash_escape);
                  var stream_wait_for = __webpack_require__3(1539);
                  var insert_element_in_order = __webpack_require__3(5389);
                  var isElementVisible = __webpack_require__3(8130);
                  var gmail_dropdown_view = __webpack_require__3(3612);
                  var dropdown_button_view_controller = __webpack_require__3(9374);
                  var zip = __webpack_require__3(7981);
                  var zip_default = /* @__PURE__ */ __webpack_require__3.n(zip);
                  var delay_asap = __webpack_require__3(1136);
                  var gmail_thread_row_view = __webpack_require__3(6134);
                  var make_element_child_stream = __webpack_require__3(2843);
                  var assert2 = __webpack_require__3(1602);
                  ;
                  const THREAD_ROW_SELECTED_CLASSNAME = "x7";
                  const THREAD_ROW_SELECTED_CLASSNAME_REGEX = /\bx7\b/;
                  class GmailRowListView {
                    _threadRowViewDrivers = /* @__PURE__ */ new Set();
                    _elementsToViews = /* @__PURE__ */ new Map();
                    _selectedThreadRowViews = /* @__PURE__ */ new Set();
                    constructor(rootElement, routeViewDriver, gmailDriver) {
                      this._eventStreamBus = kefir_bus_default()();
                      this._stopper = this._eventStreamBus.ignoreValues().beforeEnd(() => null);
                      this._gmailDriver = gmailDriver;
                      this._element = rootElement;
                      this._routeViewDriver = routeViewDriver;
                      this._selectionMutationObserver = new MutationObserver((mutations) => {
                        let changed = false;
                        for (let i2 = 0, len = mutations.length; i2 < len; i2++) {
                          const mutation = mutations[i2];
                          const target = mutation.target;
                          const wasSelected = THREAD_ROW_SELECTED_CLASSNAME_REGEX.test(mutation.oldValue);
                          const isSelected = THREAD_ROW_SELECTED_CLASSNAME_REGEX.test(target.className);
                          if (wasSelected !== isSelected) {
                            const view = this._elementsToViews.get(target);
                            if (view) {
                              changed = true;
                              if (isSelected) {
                                this._selectedThreadRowViews.add(view);
                              } else {
                                this._selectedThreadRowViews.delete(view);
                              }
                            }
                          }
                        }
                        if (changed) {
                          this._gmailDriver.signalThreadRowViewSelectionChange();
                        }
                      });
                      this._pendingExpansions = /* @__PURE__ */ new Map();
                      this._pendingExpansionsSignal = kefir_bus_default()();
                      this._pendingExpansionsSignal.bufferBy(this._pendingExpansionsSignal.flatMap(delay_asap.A)).filter((x2) => x2.length > 0).takeUntilBy(this._stopper).onValue(this._expandColumnJob.bind(this));
                      this._setupToolbarView();
                      this._startWatchingForRowViews();
                    }
                    destroy() {
                      this._selectionMutationObserver.disconnect();
                      this._threadRowViewDrivers.forEach((threadRow) => threadRow.destroy());
                      this._eventStreamBus.end();
                      if (this._toolbarView) {
                        this._toolbarView.destroy();
                      }
                      if (this._selectedThreadRowViews.size) {
                        this._selectedThreadRowViews.clear();
                        this._gmailDriver.signalThreadRowViewSelectionChange();
                      }
                    }
                    getElement() {
                      return this._element;
                    }
                    getRouteViewDriver() {
                      return this._routeViewDriver;
                    }
                    getToolbarView() {
                      return this._toolbarView;
                    }
                    getSelectedThreadRowViewDrivers() {
                      return this._selectedThreadRowViews;
                    }
                    getThreadRowViewDrivers() {
                      return this._threadRowViewDrivers;
                    }
                    getRowViewDriverStream() {
                      return this._rowViewDriverStream;
                    }
                    getEventStream() {
                      return this._eventStreamBus;
                    }
                    _setupToolbarView() {
                      var toolbarElement = this._findToolbarElement();
                      if (toolbarElement) {
                        this._toolbarView = new gmail_toolbar_view(toolbarElement, this._gmailDriver, this._routeViewDriver, this);
                      } else {
                        this._toolbarView = null;
                      }
                    }
                    _findToolbarElement() {
                      const firstTry = this._element.querySelector("[gh=mtb]");
                      if (firstTry) {
                        return firstTry;
                      }
                      const el = find_default()(document.querySelectorAll("[gh=tm]"), (toolbarContainerElement) => toolbarContainerElement.parentElement.parentElement === this._element.parentElement.parentElement.parentElement.parentElement.parentElement || toolbarContainerElement.parentElement.parentElement === this._element.parentElement);
                      return el ? el.querySelector("[gh=mtb]") : null;
                    }
                    // When a new table is added to a row list, if an existing table has had its
                    // column widths modified (by GmailThreadRowView), then the new table needs to
                    // match.
                    _fixColumnWidths(newTableParent) {
                      if (!newTableParent || !newTableParent.parentElement) {
                        return;
                      }
                      const firstTableParent = newTableParent.parentElement.firstElementChild;
                      if (firstTableParent !== newTableParent && firstTableParent) {
                        const firstCols = firstTableParent.querySelectorAll("table.cf > colgroup > col");
                        const newCols = newTableParent.querySelectorAll("table.cf > colgroup > col");
                        (0, assert2.v)(Object.is(firstCols.length, newCols.length));
                        zip_default()(firstCols, newCols).forEach((_ref) => {
                          let [firstCol, newCol] = _ref;
                          newCol.style.width = firstCol.style.width;
                        });
                      }
                    }
                    expandColumn(colSelector, width) {
                      const pendingWidth = this._pendingExpansions.get(colSelector);
                      if (!pendingWidth || width > pendingWidth) {
                        this._pendingExpansions.set(colSelector, width);
                        this._pendingExpansionsSignal.emit(void 0);
                      }
                    }
                    _expandColumnJob() {
                      this._pendingExpansions.forEach((width, colSelector) => {
                        Array.prototype.forEach.call(this._element.querySelectorAll("table.cf > colgroup > " + colSelector), (col) => {
                          const currentWidth = parseInt(col.style.width, 10);
                          if (isNaN(currentWidth) || currentWidth < width) {
                            col.style.width = width + "px";
                          }
                        });
                      });
                      this._pendingExpansions.clear();
                    }
                    _batchedSignalThreadRowViewSelectionChangeScheduled = false;
                    _batchedSignalThreadRowViewSelectionChange() {
                      if (this._batchedSignalThreadRowViewSelectionChangeScheduled) {
                        return;
                      }
                      this._batchedSignalThreadRowViewSelectionChangeScheduled = true;
                      (0, delay_asap.A)(null).takeUntilBy(this._stopper).onValue(() => {
                        this._batchedSignalThreadRowViewSelectionChangeScheduled = false;
                        this._gmailDriver.signalThreadRowViewSelectionChange();
                      });
                    }
                    _startWatchingForRowViews() {
                      const tableDivParents = Array.from(this._element.querySelectorAll("div.Cp"));
                      const elementStream = kefir_esm.merge(tableDivParents.map(make_element_child_stream.A)).flatMap((event) => {
                        this._fixColumnWidths(event.el);
                        const tbody = (0, querySelectorOrFail.A)(event.el, "table > tbody");
                        return (0, make_element_child_stream.A)(tbody).takeUntilBy(event.removalStream);
                      }).filter((rowEvent) => Boolean(rowEvent.el.id) && // let other extensions opt their rows out of our processing
                      !rowEvent.el.classList.contains("inboxsdk__ignore_row") && !rowEvent.el.classList.contains("bundle"));
                      const laterStream = kefir_esm.later(2, void 0);
                      this._rowViewDriverStream = elementStream.map((event) => {
                        const element = event.el;
                        this._selectionMutationObserver.observe(element, {
                          attributes: true,
                          attributeFilter: ["class"],
                          attributeOldValue: true
                        });
                        const view = new gmail_thread_row_view.A(element, this, this._gmailDriver);
                        this._elementsToViews.set(element, view);
                        if (element.classList.contains(THREAD_ROW_SELECTED_CLASSNAME)) {
                          this._selectedThreadRowViews.add(view);
                          this._batchedSignalThreadRowViewSelectionChange();
                        }
                        event.removalStream.take(1).onValue(() => {
                          if (this._selectedThreadRowViews.has(view)) {
                            this._selectedThreadRowViews.delete(view);
                            this._batchedSignalThreadRowViewSelectionChange();
                          }
                          this._elementsToViews.delete(element);
                          view.destroy();
                        });
                        return view;
                      }).flatMap((threadRowView) => {
                        if (threadRowView.getAlreadyHadModifications()) {
                          return laterStream.flatMap(() => threadRowView.waitForReady()).takeUntilBy(threadRowView.getStopper());
                        } else {
                          return threadRowView.waitForReady().takeUntilBy(threadRowView.getStopper());
                        }
                      }).takeUntilBy(this._stopper);
                      this._rowViewDriverStream.onValue((x2) => this._addThreadRowView(x2));
                    }
                    _addThreadRowView(gmailThreadRowView) {
                      this._threadRowViewDrivers.add(gmailThreadRowView);
                      gmailThreadRowView.getStopper().takeUntilBy(this._stopper).onValue(() => {
                        this._threadRowViewDrivers.delete(gmailThreadRowView);
                      });
                    }
                  }
                  const gmail_row_list_view = GmailRowListView;
                  ;
                  const SECTION_NAMES = Object.freeze({
                    INBOX_STATE: "INBOX_STATE",
                    METADATA_STATE: "METADATA_STATE",
                    OTHER: "OTHER"
                  });
                  ;
                  class GmailToolbarView {
                    _buttonViewControllers = /* @__PURE__ */ new Set();
                    _moreMenuItems = [];
                    _isUpdateButtonClassesScheduled = false;
                    _moreMenuItemsContainer = null;
                    constructor(element, driver, routeViewDriver, parent) {
                      this._element = element;
                      this._driver = driver;
                      this._stopper = js_default()();
                      this._routeViewDriver = routeViewDriver;
                      if (this._getMoveSectionElement()) {
                        this._ready = kefir_esm.constant(this);
                      } else {
                        this._ready = (0, stream_wait_for.A)(() => !!this._getMoveSectionElement()).takeUntilBy(this._stopper).map(() => this).toProperty();
                      }
                      this._ready.onValue(() => {
                        this._startMonitoringMoreMenu();
                        this._determineToolbarState();
                        this._determineToolbarIconMode();
                        this._setupToolbarStateMonitoring();
                      });
                      if (parent instanceof gmail_thread_view) {
                        this._threadViewDriver = parent;
                        this._ready.onValue(() => {
                          this._element.setAttribute("data-thread-toolbar", "true");
                        });
                      } else if (parent instanceof gmail_row_list_view) {
                        this._rowListViewDriver = parent;
                        this._ready.onValue(() => {
                          this._element.setAttribute("data-rowlist-toolbar", "true");
                        });
                      } else {
                        throw new Error("Invalid parent");
                      }
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getElement() {
                      return this._element;
                    }
                    getRouteViewDriver() {
                      return this._routeViewDriver;
                    }
                    getThreadViewDriver() {
                      return this._threadViewDriver;
                    }
                    isForRowList() {
                      return this._rowListViewDriver != null;
                    }
                    isForThread() {
                      return this._threadViewDriver != null;
                    }
                    getThreadRowViewDrivers() {
                      if (!this._rowListViewDriver) {
                        console.error("missing this._rowListViewDriver");
                        return /* @__PURE__ */ new Set();
                      }
                      return this._rowListViewDriver.getThreadRowViewDrivers();
                    }
                    addButton(buttonDescriptor, id) {
                      const buttonStopper = js_default()();
                      this._stopper.takeUntilBy(buttonStopper).onValue(() => {
                        buttonStopper.destroy();
                      });
                      const toolbarSections = SECTION_NAMES;
                      this._ready.takeUntilBy(buttonStopper).onValue(() => {
                        if (buttonDescriptor.section === toolbarSections.OTHER) {
                          const entry = {
                            buttonDescriptor
                          };
                          this._moreMenuItems.push(entry);
                          this._addToOpenMoreMenu(buttonDescriptor);
                          buttonStopper.onValue(() => {
                            this._moreMenuItems = this._moreMenuItems.filter((_entry) => _entry !== entry);
                            this._addMoreItems();
                          });
                        } else {
                          const sectionElement = this._getSectionElement(buttonDescriptor.section, toolbarSections);
                          if (sectionElement) {
                            const buttonViewController = this._createButtonViewController(buttonDescriptor);
                            this._buttonViewControllers.add(buttonViewController);
                            buttonStopper.onValue(() => {
                              this._buttonViewControllers.delete(buttonViewController);
                              buttonViewController.destroy();
                            });
                            buttonViewController.getView().getElement().__addButton_ownedByExtension = true;
                            buttonViewController.getView().getElement().setAttribute("data-add-button-debug", JSON.stringify({
                              id,
                              title: buttonDescriptor.title,
                              hasThreadViewDriver: this.isForThread(),
                              hasRowListViewDriver: this.isForRowList()
                            }));
                            buttonViewController.getView().getElement().setAttribute("data-order-hint", String(buttonDescriptor.orderHint || 0));
                            (0, insert_element_in_order.A)(sectionElement, buttonViewController.getView().getElement());
                            kefir_esm.merge([kefir_esm.constant(-1), kefir_esm.later(1e3, 1e3)]).map((delay) => {
                              const duplicates = Array.from(sectionElement.children).filter((el) => buttonViewController.getView().getElement().getAttribute("data-rowlist-toolbar") === el.getAttribute("data-rowlist-toolbar") && buttonViewController.getView().getElement().getAttribute("data-toolbar-expanded") === el.getAttribute("data-toolbar-expanded")).filter((el) => el.hasAttribute("data-add-button-debug")).map((el) => Object.assign({
                                ownedByExtension: !!el.__addButton_ownedByExtension
                              }, JSON.parse(el.getAttribute("data-add-button-debug") || "null"))).filter((_ref) => {
                                let {
                                  title
                                } = _ref;
                                return title === buttonDescriptor.title;
                              });
                              return {
                                delay,
                                duplicates
                              };
                            }).filter((_ref2) => {
                              let {
                                duplicates
                              } = _ref2;
                              return duplicates.length > 1;
                            }).take(1).takeUntilBy(this._stopper).onValue((_ref3) => {
                              let {
                                delay,
                                duplicates
                              } = _ref3;
                              lib_logger.A.error(new Error("Duplicate toolbar button"), {
                                delay,
                                duplicates,
                                dataThreadToolbar: this._element.getAttribute("data-thread-toolbar"),
                                dataRowlistToolbar: this._element.getAttribute("data-rowlist-toolbar")
                              });
                            });
                            this._updateButtonClasses(this._element);
                            buttonViewController.getView().setEnabled(this._toolbarState === "EXPANDED");
                          }
                        }
                      });
                      return {
                        getStopper: () => buttonStopper,
                        destroy: () => {
                          buttonStopper.destroy();
                        }
                      };
                    }
                    waitForReady() {
                      return this._ready;
                    }
                    _createButtonViewController(buttonDescriptor) {
                      const buttonView = this._getButtonView(buttonDescriptor);
                      buttonDescriptor.buttonView = buttonView;
                      let buttonViewController = null;
                      if (buttonDescriptor.hasDropdown) {
                        buttonViewController = new dropdown_button_view_controller.A({
                          buttonView,
                          dropdownViewDriverClass: gmail_dropdown_view.A,
                          dropdownShowFunction: buttonDescriptor.onClick,
                          dropdownPositionOptions: {
                            position: "bottom",
                            hAlign: "left"
                          }
                        });
                      } else {
                        buttonViewController = new basic_button_view_controller.A(buttonDescriptor);
                      }
                      return buttonViewController;
                    }
                    _getButtonView(buttonDescriptor) {
                      const buttonView = new button_view.A({
                        ...buttonDescriptor,
                        noArrow: true
                      });
                      if (this._rowListViewDriver) {
                        buttonView.getElement().setAttribute("data-rowlist-toolbar", "true");
                        buttonView.getElement().setAttribute("data-toolbar-expanded", "true");
                      } else if (this._threadViewDriver) {
                        buttonView.getElement().setAttribute("data-thread-toolbar", "true");
                      }
                      buttonView.getElement().setAttribute("role", "button");
                      return buttonView;
                    }
                    _startMonitoringMoreMenu() {
                      const moreButtonElement = this._element.querySelector(".nf[role=button]");
                      if (!moreButtonElement) {
                        return;
                      }
                      (0, make_mutation_observer_stream.A)(moreButtonElement, {
                        attributes: true,
                        attributeFilter: ["aria-expanded"]
                      }).toProperty(() => null).takeUntilBy(this._stopper).map(() => moreButtonElement.getAttribute("aria-expanded")).onValue((ariaExpanded) => {
                        if (ariaExpanded !== "true") {
                          this._clearMoreItems();
                        } else {
                          this._addMoreItems();
                        }
                      });
                    }
                    _determineToolbarState() {
                      const moveSectionElement = this._getMoveSectionElement();
                      if (!moveSectionElement) throw new Error("No move section element");
                      if (moveSectionElement.style.display === "none") {
                        this._toolbarState = "COLLAPSED";
                      } else {
                        this._toolbarState = "EXPANDED";
                      }
                    }
                    _determineToolbarIconMode() {
                      const moveSectionElement = this._getMoveSectionElement();
                      if (!moveSectionElement) throw new Error("No move section element");
                      const isIconMode = Array.from(moveSectionElement.querySelectorAll("[role=button]:not(.inboxsdk__button)")).some((buttonElement) => buttonElement.hasAttribute("title") || buttonElement.hasAttribute("data-tooltip"));
                      this._element.setAttribute("data-toolbar-icononly", isIconMode ? "true" : "false");
                    }
                    _setupToolbarStateMonitoring() {
                      const moveSectionElement = this._getMoveSectionElement();
                      if (!moveSectionElement) throw new Error("No move section element");
                      (0, make_mutation_observer_stream.A)(moveSectionElement, {
                        attributes: true,
                        attributeFilter: ["style"]
                      }).takeUntilBy(this._stopper).onValue((mutation) => {
                        if (mutation.target instanceof HTMLElement && mutation.target.style.display === "none") {
                          this._toolbarState = "COLLAPSED";
                        } else {
                          this._toolbarState = "EXPANDED";
                        }
                        this._updateButtonClasses(this._element);
                        this._updateButtonEnabledState();
                      });
                    }
                    _getSectionElement(sectionName, toolbarSections) {
                      switch (sectionName) {
                        case toolbarSections.INBOX_STATE:
                          return this._getArchiveSectionElement();
                        case toolbarSections.METADATA_STATE:
                          return this._getMoveSectionElement();
                        default:
                          return null;
                      }
                    }
                    _getArchiveSectionElement() {
                      return this._getSectionElementForButtonSelector(".ar9, .aFh, .aFj, .lR, .nN, .nX, .aFk");
                    }
                    _getCheckboxSectionElement() {
                      return this._getSectionElementForButtonSelector(".T-Jo-auh");
                    }
                    _getMoveSectionElement() {
                      return this._getSectionElementForButtonSelector(".asb, .ase, .ns, .mw, .bq5");
                    }
                    _getSectionElementForButtonSelector(buttonSelector) {
                      const sectionElements = this._element.querySelectorAll(".G-Ni");
                      for (let ii = 0; ii < sectionElements.length; ii++) {
                        if (sectionElements[ii].querySelector(buttonSelector)) {
                          return sectionElements[ii];
                        }
                      }
                      return null;
                    }
                    _updateButtonClasses(element) {
                      if (this._isUpdateButtonClassesScheduled) return;
                      this._isUpdateButtonClassesScheduled = true;
                      browser_asap_default()(() => {
                        if (this._toolbarState === "EXPANDED") {
                          element.setAttribute("data-toolbar-expanded", "true");
                        } else if (this._toolbarState === "COLLAPSED") {
                          element.setAttribute("data-toolbar-expanded", "false");
                        }
                        const buttons = element.querySelectorAll(".G-Ni > [role=button]");
                        Array.prototype.forEach.call(buttons, (button) => {
                          let current = button;
                          for (let ii = 0; ii < 1e5; ii++) {
                            if (current.previousElementSibling) {
                              if (current.previousElementSibling.classList.contains("inboxsdk__button")) {
                                if ((0, isElementVisible.A)(current.previousElementSibling)) {
                                  button.classList.add("T-I-Js-Gs");
                                  break;
                                } else {
                                  current = current.previousElementSibling;
                                }
                              } else {
                                button.classList.add("T-I-Js-Gs");
                                break;
                              }
                            } else {
                              button.classList.remove("T-I-Js-Gs");
                              break;
                            }
                          }
                          current = button;
                          for (let ii = 0; ii < 1e5; ii++) {
                            if (current.nextElementSibling) {
                              if (current.nextElementSibling.classList.contains("inboxsdk__button")) {
                                if ((0, isElementVisible.A)(current.nextElementSibling)) {
                                  button.classList.add("T-I-Js-IF");
                                  break;
                                } else {
                                  current = current.nextElementSibling;
                                }
                              } else {
                                button.classList.add("T-I-Js-IF");
                                break;
                              }
                            } else {
                              button.classList.remove("T-I-Js-IF");
                              break;
                            }
                          }
                        });
                        this._isUpdateButtonClassesScheduled = false;
                      });
                    }
                    _updateButtonEnabledState() {
                      const enabled = this._toolbarState === "EXPANDED";
                      this._buttonViewControllers.forEach((buttonViewController) => {
                        buttonViewController.getView().setEnabled(enabled);
                      });
                    }
                    _addMoreItems() {
                      this._clearMoreItems();
                      if (this._toolbarState !== "EXPANDED") {
                        return;
                      }
                      this._moreMenuItems.forEach((item) => {
                        this._addToOpenMoreMenu(item.buttonDescriptor);
                      });
                    }
                    _clearMoreItems() {
                      if (this._moreMenuItemsContainer) {
                        this._moreMenuItemsContainer.remove();
                        this._moreMenuItemsContainer = null;
                      }
                    }
                    _addToOpenMoreMenu(buttonDescriptor) {
                      const moreMenu = gmail_element_getter.A.getActiveMoreMenu();
                      if (!moreMenu) {
                        return;
                      }
                      const appDiv = this._getMoreMenuItemsContainer(moreMenu);
                      const menuItemElement = this._getMoreMenuItemElement(buttonDescriptor);
                      (0, insert_element_in_order.A)(appDiv, menuItemElement);
                    }
                    _getMoreMenuItemsContainer(moreMenu) {
                      if (this._moreMenuItemsContainer) {
                        return this._moreMenuItemsContainer;
                      }
                      const container = this._moreMenuItemsContainer = document.createElement("div");
                      container.setAttribute("data-group-order-hint", this._driver.getAppId());
                      container.innerHTML = '<div class="J-Kh"></div>';
                      (0, insert_element_in_order.A)(moreMenu, container);
                      return container;
                    }
                    _getMoreMenuItemElement(buttonDescriptor) {
                      const itemElement = document.createElement("div");
                      itemElement.setAttribute("class", "J-N inboxsdk__menuItem");
                      itemElement.setAttribute("role", "menuitem");
                      itemElement.setAttribute("data-order-hint", String(buttonDescriptor.orderHint || 0));
                      itemElement.innerHTML = ['<div class="J-N-Jz" style="-webkit-user-select: none;">', buttonDescriptor.iconUrl ? '<img class="J-N-JX" src="' + escape_default()(buttonDescriptor.iconUrl) + '" />' : "", buttonDescriptor.iconClass ? '<span class="inboxsdk__icon J-N-JX ' + escape_default()(buttonDescriptor.iconClass) + '"></span>' : "", escape_default()(buttonDescriptor.title), "</div>"].join("");
                      itemElement.addEventListener("mouseenter", () => itemElement.classList.add("J-N-JT"));
                      itemElement.addEventListener("mouseleave", () => itemElement.classList.remove("J-N-JT"));
                      itemElement.addEventListener("click", () => {
                        if (buttonDescriptor.onClick) {
                          buttonDescriptor.onClick({});
                        }
                      });
                      return itemElement;
                    }
                    destroy() {
                      const element = this._element;
                      if (this._threadViewDriver) {
                        this._element.removeAttribute("data-thread-toolbar");
                      } else if (this._rowListViewDriver) {
                        this._element.removeAttribute("data-rowlist-toolbar");
                      }
                      this._clearMoreItems();
                      this._stopper.destroy();
                      this._updateButtonClasses(element);
                    }
                  }
                  const gmail_toolbar_view = GmailToolbarView;
                  var isStreakAppId = __webpack_require__3(8579);
                  var censorHTMLstring = __webpack_require__3(4158);
                  ;
                  let hasLoggedAddonInfo = false;
                  class GmailThreadView {
                    #element;
                    #routeViewDriver;
                    #driver;
                    #isPreviewedThread;
                    #eventStream;
                    #stopper = js_default()();
                    #toolbarView;
                    #messageViewDrivers;
                    #newMessageMutationObserver;
                    #readyStream;
                    #threadID;
                    #syncThreadID;
                    #customMessageViews = /* @__PURE__ */ new Set();
                    #hiddenCustomMessageViews = /* @__PURE__ */ new Set();
                    #hiddenCustomMessageNoticeProvider;
                    #hiddenCustomMessageNoticeElement;
                    #resolveUnmountHiddenNoticePromise;
                    constructor(element, routeViewDriver, driver) {
                      let isPreviewedThread = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false;
                      this.#element = element;
                      this.#routeViewDriver = routeViewDriver;
                      this.#driver = driver;
                      this.#isPreviewedThread = isPreviewedThread;
                      this.#eventStream = kefir_bus_default()();
                      this.#messageViewDrivers = [];
                      this.#logAddonElementInfo().catch((err) => this.#driver.getLogger().error(err));
                      const waitForSidebarReady = this.#driver.waitForGlobalSidebarReady().merge(this.#driver.delayToTimeAfterReady(15 * 1e3).flatMap(() => kefir_esm.constantError(new Error("15 second timeout while waiting for sidebar fired")))).take(1).takeErrors(1).flatMapErrors((err) => {
                        this.#driver.getLogger().error(err);
                        return kefir_esm.constant(null);
                      }).toProperty();
                      let combinedReadyStream;
                      if (driver.getOpts().REQUESTED_API_VERSION === 1) {
                        combinedReadyStream = kefir_esm.combine([waitForSidebarReady, kefir_esm.fromPromise(this.getThreadIDAsync())]);
                      } else {
                        combinedReadyStream = waitForSidebarReady;
                      }
                      this.#readyStream = combinedReadyStream.map(() => {
                        this.#setupToolbarView();
                        this.#setupMessageViewStream();
                        return null;
                      }).takeUntilBy(this.#stopper).toProperty();
                      this.#listenToExpandCollapseAll();
                      this.#stopper.take(1).onValue(() => {
                        if (this.#resolveUnmountHiddenNoticePromise) {
                          this.#resolveUnmountHiddenNoticePromise();
                        }
                      });
                    }
                    // TODO use livesets eventually
                    getMessageViewDriverStream() {
                      return kefir_esm.constant(this.#messageViewDrivers).flatten().merge(this.#eventStream.filter((event) => event.type === "internal" && event.eventName === "messageCreated").map((event) => event.view));
                    }
                    isLoadingStub() {
                      return false;
                    }
                    getStopper() {
                      return this.#stopper;
                    }
                    getEventStream() {
                      return this.#eventStream;
                    }
                    getElement() {
                      return this.#element;
                    }
                    getRouteViewDriver() {
                      return this.#routeViewDriver;
                    }
                    getIsPreviewedThread() {
                      return this.#isPreviewedThread;
                    }
                    getToolbarView() {
                      return this.#toolbarView;
                    }
                    getMessageViewDrivers() {
                      return this.#messageViewDrivers;
                    }
                    destroy() {
                      this.#eventStream.end();
                      this.#stopper.destroy();
                      if (this.#toolbarView) this.#toolbarView.destroy();
                      this.#messageViewDrivers.forEach((messageView) => {
                        messageView.destroy();
                      });
                      this.#messageViewDrivers.length = 0;
                      if (this.#newMessageMutationObserver) {
                        this.#newMessageMutationObserver.disconnect();
                      }
                      for (const customMessageView of this.#customMessageViews) {
                        customMessageView.destroy();
                      }
                    }
                    addSidebarContentPanel(descriptor) {
                      const sidebar = this.#driver.getGlobalSidebar();
                      return sidebar.addThreadSidebarContentPanel(descriptor, this);
                    }
                    #subjectContainerSelectors = {
                      "2022_10_21": ".a98.iY > .nH",
                      "2022_10_12": ".PeIF1d > .nH",
                      [2018]: ".if > .nH"
                    };
                    #subjectContainerSelectorsAfterNov162023 = {
                      "2023_11_16": "* > .nH"
                    };
                    #subjectAISuggestionsContainerSelectors = {
                      "2024_04_26": ".nH > .einvLd"
                    };
                    addNoticeBar() {
                      const el = document.createElement("div");
                      el.className = (0, idMap.A)("thread_noticeBar");
                      let version3;
                      let subjectContainer;
                      let selectorsToTry = this.#subjectContainerSelectors;
                      if (this.#element.matches(".a98.iY")) {
                        selectorsToTry = this.#subjectContainerSelectorsAfterNov162023;
                      }
                      for (const [currentVersion, selector] of Object.entries(selectorsToTry)) {
                        const el2 = this.#element.querySelector(selector);
                        if (!el2) {
                          continue;
                        }
                        version3 = currentVersion;
                        subjectContainer = el2;
                        break;
                      }
                      if (!subjectContainer) throw new Error("Failed to find subject container");
                      this.#driver.getLogger().eventSdkPassive("addNoticeBar subjectContainer", {
                        version: version3
                      });
                      for (const [currentVersion, selector] of Object.entries(this.#subjectAISuggestionsContainerSelectors)) {
                        const hasAIButtonsSubjectContainer = !!this.#element.querySelector(selector);
                        if (!hasAIButtonsSubjectContainer) {
                          continue;
                        }
                        this.#driver.getLogger().eventSdkPassive("addNoticeBar AIButtonsSubjectContainer", {
                          version: currentVersion
                        });
                        el.style.marginBottom = "8px";
                        break;
                      }
                      subjectContainer.insertAdjacentElement("afterend", el);
                      const view = new SimpleElementView.A(el);
                      this.#stopper.takeUntilBy(kefir_esm.fromEvents(view, "destroy")).onValue(() => view.destroy());
                      return view;
                    }
                    registerHiddenCustomMessageNoticeProvider(provider) {
                      this.#hiddenCustomMessageNoticeProvider = provider;
                    }
                    addCustomMessage(descriptorStream) {
                      const parentElement = this.#element.parentElement;
                      if (!parentElement) throw new Error("missing parent element");
                      const customMessageView = new CustomMessageView(descriptorStream, () => {
                        this.#readyStream.onValue(async () => {
                          const messageContainer = this.#element.querySelector("[role=list]");
                          if (!messageContainer) return;
                          let mostRecentDate = Number.MIN_SAFE_INTEGER;
                          let insertBeforeMessage;
                          let isInHidden = false;
                          const messages = [...await Promise.all(this.#messageViewDrivers.map(async (messageView) => ({
                            sortDatetime: await messageView.getDate() || 0,
                            isHidden: messageView.getViewState() === "HIDDEN",
                            element: messageView.getElement()
                          }))), ...Array.from(this.#customMessageViews).filter(
                            (cmv) => cmv !== customMessageView && cmv.getElement().parentElement
                            /* it has been inserted into dom */
                          ).map((cmv) => {
                            const date = cmv.getSortDate();
                            const datetime = date ? date.getTime() : null;
                            return {
                              sortDatetime: datetime || 0,
                              isHidden: cmv.getElement().classList.contains("inboxsdk__custom_message_view_hidden"),
                              element: cmv.getElement()
                            };
                          })].sort((a, b) => a.sortDatetime - b.sortDatetime);
                          const messageDate = customMessageView.getSortDate();
                          if (!messageDate) return;
                          for (const message of messages) {
                            isInHidden = message.isHidden;
                            if (messageDate.getTime() >= mostRecentDate && messageDate.getTime() <= message.sortDatetime) {
                              insertBeforeMessage = message.element;
                              break;
                            }
                            mostRecentDate = message.sortDatetime;
                          }
                          if (insertBeforeMessage) insertBeforeMessage.insertAdjacentElement("beforebegin", customMessageView.getElement());
                          else messageContainer.insertAdjacentElement("beforeend", customMessageView.getElement());
                          if (isInHidden) {
                            this.#setupHiddenCustomMessage(customMessageView);
                          }
                          parentElement.classList.add("inboxsdk__thread_view_with_custom_view");
                        });
                      });
                      this.#customMessageViews.add(customMessageView);
                      customMessageView.on("destroy", () => {
                        this.#customMessageViews.delete(customMessageView);
                        if (this.#customMessageViews.size > 0) parentElement.classList.add("inboxsdk__thread_view_with_custom_view");
                        else parentElement.classList.remove("inboxsdk__thread_view_with_custom_view");
                      });
                      return customMessageView;
                    }
                    #setupHiddenCustomMessage(customMessageView) {
                      this.#hiddenCustomMessageViews.add(customMessageView);
                      customMessageView.getElement().classList.add("inboxsdk__custom_message_view_hidden");
                      let hiddenNoticeMessageElement = this.#element.querySelector(".adv");
                      let nativeHiddenNoticePresent = true;
                      if (!hiddenNoticeMessageElement) {
                        nativeHiddenNoticePresent = false;
                        const superCollapsedMessageElements = Array.from(this.#element.querySelectorAll(".kQ"));
                        if (superCollapsedMessageElements.length < 2) return;
                        hiddenNoticeMessageElement = superCollapsedMessageElements[1];
                      }
                      (0, make_mutation_observer_chunked_stream.A)(hiddenNoticeMessageElement, {
                        attributes: true,
                        attributeFilter: ["class"]
                      }).takeUntilBy(kefir_esm.merge([this.#stopper, kefir_esm.fromEvents(customMessageView, "destroy")])).filter(() => hiddenNoticeMessageElement && !hiddenNoticeMessageElement.classList.contains("kQ")).onValue(() => {
                        customMessageView.getElement().classList.remove("inboxsdk__custom_message_view_hidden");
                        if (this.#hiddenCustomMessageNoticeElement) this.#hiddenCustomMessageNoticeElement.remove();
                        this.#hiddenCustomMessageNoticeElement = null;
                      });
                      this.#updateHiddenNotice(hiddenNoticeMessageElement, nativeHiddenNoticePresent);
                      kefir_esm.fromEvents(customMessageView, "destroy").takeUntilBy(this.#stopper).take(1).onValue(() => {
                        this.#hiddenCustomMessageViews.delete(customMessageView);
                        if (hiddenNoticeMessageElement) this.#updateHiddenNotice(hiddenNoticeMessageElement, nativeHiddenNoticePresent);
                      });
                    }
                    #updateHiddenNotice(hiddenNoticeMessageElement, nativeHiddenNoticePresent) {
                      const existingAppNoticeElement = this.#hiddenCustomMessageNoticeElement;
                      if (existingAppNoticeElement) {
                        existingAppNoticeElement.remove();
                        this.#hiddenCustomMessageNoticeElement = null;
                        if (this.#resolveUnmountHiddenNoticePromise) this.#resolveUnmountHiddenNoticePromise();
                      }
                      const noticeProvider = this.#hiddenCustomMessageNoticeProvider;
                      if (!noticeProvider) return;
                      const appNoticeContainerElement = this.#hiddenCustomMessageNoticeElement = document.createElement("span");
                      appNoticeContainerElement.classList.add("inboxsdk__custom_message_view_app_notice_content");
                      const numberCustomHiddenMessages = this.#hiddenCustomMessageViews.size;
                      let numberNativeHiddenMessages = null;
                      if (nativeHiddenNoticePresent) {
                        const nativeHiddenNoticeCountSpan = (0, querySelectorOrFail.A)(hiddenNoticeMessageElement, ".adx span");
                        numberNativeHiddenMessages = Number(nativeHiddenNoticeCountSpan.innerHTML);
                        if (isNaN(numberNativeHiddenMessages)) {
                          throw new Error("Couldn't find number of native hidden messages in dom structure");
                        }
                      }
                      const appNoticeElement = noticeProvider(numberCustomHiddenMessages, numberNativeHiddenMessages, new Promise((resolve) => {
                        this.#resolveUnmountHiddenNoticePromise = resolve;
                      }));
                      if (!appNoticeElement) {
                        return;
                      }
                      appNoticeContainerElement.appendChild(appNoticeElement);
                      if (!nativeHiddenNoticePresent) {
                        const fakeAppNoticeElement = document.createElement("span");
                        fakeAppNoticeElement.classList.add("adx");
                        const insertionPoint = (0, querySelectorOrFail.A)(hiddenNoticeMessageElement, ".G3");
                        insertionPoint.appendChild(fakeAppNoticeElement);
                      }
                      const hiddenNoticeElement = (0, querySelectorOrFail.A)(hiddenNoticeMessageElement, ".adx");
                      hiddenNoticeElement.classList.add("inboxsdk__custom_message_view_app_notice_container");
                      hiddenNoticeElement.appendChild(appNoticeContainerElement);
                    }
                    getSubject() {
                      var subjectElement = this.#element.querySelector(".ha h2");
                      if (!subjectElement) {
                        return "";
                      }
                      if (subjectElement.querySelector("img[data-emoji]")) {
                        return Array.from(subjectElement.childNodes).map((c) => {
                          if (c instanceof HTMLElement && c.nodeName === "IMG") {
                            const maybeEmoji = c.getAttribute("data-emoji");
                            return maybeEmoji;
                          }
                          if (c.nodeName === "#text") {
                            return c.wholeText;
                          }
                        }).filter((x2) => x2 != null).join("");
                      }
                      return subjectElement.textContent;
                    }
                    getInternalID() {
                      return this.#syncThreadID || this.getThreadID();
                    }
                    // Follows a similar structure to getThreadIDAsync, but gives up if async work is needed
                    getThreadID() {
                      if (this.#threadID) return this.#threadID;
                      let threadID;
                      const idElement = this.#element.querySelector("[data-thread-perm-id]");
                      if (!idElement) throw new Error("threadID element not found");
                      const syncThreadID = this.#syncThreadID = idElement.getAttribute("data-thread-perm-id");
                      if (!syncThreadID) throw new Error("syncThreadID attribute with no value");
                      threadID = idElement.getAttribute("data-legacy-thread-id");
                      if (!threadID) {
                        const err = new Error("Failed to get id for thread: data-legacy-thread-id attribute missing");
                        this.#driver.getLogger().error(err);
                      }
                      if (!threadID) {
                        if (this.#isPreviewedThread) {
                          threadID = this.#driver.getPageCommunicator().getCurrentThreadID(this.#element, true);
                        } else {
                          const params = this.#routeViewDriver ? this.#routeViewDriver.getParams() : null;
                          if (params && params.threadID) {
                            threadID = params.threadID;
                          } else {
                            const err = new Error("Failed to get id for thread");
                            this.#driver.getLogger().error(err);
                            throw err;
                          }
                        }
                      }
                      this.#threadID = threadID;
                      return threadID;
                    }
                    async getThreadIDAsync() {
                      let threadID;
                      const idElement = this.#element.querySelector("[data-thread-perm-id]");
                      if (!idElement) throw new Error("threadID element not found");
                      const syncThreadID = this.#syncThreadID = idElement.getAttribute("data-thread-perm-id");
                      if (!syncThreadID) throw new Error("syncThreadID attribute with no value");
                      this.#threadID = threadID = idElement.getAttribute("data-legacy-thread-id");
                      if (!threadID) {
                        this.#threadID = threadID = await this.#driver.getOldGmailThreadIdFromSyncThreadId(syncThreadID);
                      }
                      if (this.#threadID) return this.#threadID;
                      else throw new Error("Failed to get id for thread");
                    }
                    addLabel() {
                      const labelContainer = this.#element.querySelector(".ha .J-J5-Ji");
                      if (!labelContainer) {
                        throw new Error("Thread view label container not found");
                      }
                      const el = document.createElement("span");
                      labelContainer.appendChild(el);
                      const view = new SimpleElementView.A(el);
                      const observer = new MutationObserver((mutationsList) => {
                        if (mutationsList.some((mutation) => mutation.type === "childList" && mutation.removedNodes && mutation.removedNodes.length && mutation.removedNodes.length > 0)) {
                          if (!labelContainer.contains(el)) {
                            labelContainer.appendChild(el);
                          }
                        }
                      });
                      observer.observe(labelContainer, {
                        childList: true
                      });
                      this.#stopper.takeUntilBy(kefir_esm.fromEvents(view, "destroy")).onValue(() => view.destroy());
                      kefir_esm.fromEvents(view, "destroy").take(1).onValue(() => {
                        observer.disconnect();
                      });
                      return view;
                    }
                    addSubjectButton(button) {
                      const subjectParent = this.#element.querySelector(".V8djrc.byY");
                      if (!subjectParent) {
                        throw new querySelectorOrFail.a(".V8djrc.byY", {
                          cause: "Subject wrapper element not found"
                        });
                      }
                      const buttonOptions = {
                        buttonView: new button_view.A(button),
                        activateFunction: button.activateFunction,
                        onClick: button.onClick
                      };
                      const buttonElement = buttonOptions.buttonView.getElement();
                      const subjectToolbarElement = this.#findSubjectToolbarElement();
                      if (subjectToolbarElement) {
                        subjectToolbarElement.prepend(buttonElement);
                      }
                      const observer = new MutationObserver((mutationsList) => {
                        if (mutationsList.some((mutation) => mutation.type === "childList")) {
                          const subjectToolbarElement2 = this.#findSubjectToolbarElement();
                          if (subjectToolbarElement2 && !subjectToolbarElement2.contains(buttonElement)) {
                            subjectToolbarElement2.prepend(buttonElement);
                          }
                        }
                      });
                      observer.observe(subjectParent, {
                        childList: true,
                        subtree: true
                      });
                      this.#stopper.takeUntilBy(kefir_esm.fromEvents(buttonElement, "destroy")).onValue(() => buttonOptions.buttonView.destroy());
                      kefir_esm.fromEvents(buttonElement, "destroy").take(1).onValue(() => {
                        observer.disconnect();
                      });
                      return new basic_button_view_controller.A(buttonOptions);
                    }
                    addFooterButton(button) {
                      const messagesSelector = "div.nH .aHU";
                      const messagesContainer = this.#element.querySelector(messagesSelector);
                      if (!messagesContainer) {
                        this.#driver.getLogger().eventSdkPassive("Footer button selector fail", {
                          html: (0, censorHTMLtree.A)(this.#element)
                        });
                        throw new querySelectorOrFail.a(messagesSelector, {
                          cause: "Last message footer element not found"
                        });
                      }
                      const buttonOptions = {
                        buttonView: new button_view.A(button),
                        activateFunction: button.activateFunction,
                        onClick: button.onClick
                      };
                      const buttonElement = buttonOptions.buttonView.getElement();
                      const spacer = document.createElement("span");
                      const spacerID = "inboxsdk__thread_view_footer_button_spacer";
                      spacer.style.width = "8px";
                      spacer.id = spacerID;
                      const subjectToolbarElement = this.#findBottomReplyToolbarElement();
                      if (subjectToolbarElement) {
                        const reactionButton = this.#element.querySelector(".amn .wrsVRe");
                        if (reactionButton && !this.#element.querySelector(`#${spacerID}`)) {
                          subjectToolbarElement.appendChild(spacer);
                        }
                        subjectToolbarElement.appendChild(buttonElement);
                      }
                      const observer = new MutationObserver((mutationsList) => {
                        if (mutationsList.some((mutation) => mutation.type === "childList")) {
                          const subjectToolbarElement2 = this.#findBottomReplyToolbarElement();
                          if (subjectToolbarElement2 && !subjectToolbarElement2.contains(buttonElement)) {
                            const reactionButton = this.#element.querySelector(".amn .wrsVRe");
                            if (reactionButton && !this.#element.querySelector(`#${spacerID}`)) {
                              subjectToolbarElement2.appendChild(spacer);
                            }
                            subjectToolbarElement2.appendChild(buttonElement);
                          }
                        }
                      });
                      observer.observe(messagesContainer, {
                        childList: true,
                        subtree: true
                      });
                      this.#stopper.takeUntilBy(kefir_esm.fromEvents(buttonElement, "destroy")).onValue(() => buttonOptions.buttonView.destroy());
                      kefir_esm.fromEvents(buttonElement, "destroy").take(1).onValue(() => {
                        observer.disconnect();
                      });
                      return new basic_button_view_controller.A(buttonOptions);
                    }
                    #setupToolbarView() {
                      const toolbarElement = this.#findToolbarElement();
                      if (!toolbarElement) {
                        if ((0, isStreakAppId.A)(this.#driver.getAppId())) {
                          const threadViewEl = document.querySelector(".nH.bkK");
                          if (threadViewEl instanceof HTMLElement) {
                            this.#driver.getLogger().error(new Error("Thread view toolbar cannot be found"), {
                              threadViewHtml: (0, censorHTMLstring.A)(threadViewEl.innerHTML)
                            });
                          } else {
                            const pageHtml = document.querySelector(".nH");
                            if (pageHtml instanceof HTMLElement) {
                              this.#driver.getLogger().error(new Error("Thread view toolbar cannot be found"), {
                                threadViewHtml: ".nH.bkK cannot be found",
                                pageHtml: (0, censorHTMLstring.A)(pageHtml.innerHTML)
                              });
                            } else {
                              this.#driver.getLogger().error(new Error("Thread view toolbar cannot be found"), {
                                threadViewHtml: ".nH.bkK cannot be found",
                                pageHtml: ".nH cannot be found"
                              });
                            }
                          }
                        }
                        throw new Error("No toolbar element found");
                      }
                      const toolbarParent = toolbarElement.parentElement;
                      if (toolbarParent) toolbarParent.classList.add("inboxsdk__thread_toolbar_parent");
                      this.#toolbarView = new gmail_toolbar_view(toolbarElement, this.#driver, this.#routeViewDriver, this);
                    }
                    #findToolbarElement() {
                      var toolbarContainerElements = document.querySelectorAll("[gh=tm]");
                      for (var ii = 0; ii < toolbarContainerElements.length; ii++) {
                        if (this.#isToolbarContainerRelevant(toolbarContainerElements[ii])) {
                          return toolbarContainerElements[ii].querySelector("[gh=mtb]");
                        }
                      }
                      return null;
                    }
                    #findSubjectToolbarElement() {
                      var toolbarContainerElement = this.#element.querySelector(".bHJ");
                      return toolbarContainerElement;
                    }
                    #findBottomReplyToolbarElement() {
                      var toolbarContainerElements = this.#element.querySelectorAll("table .amn");
                      return toolbarContainerElements[0];
                    }
                    #isToolbarContainerRelevant(toolbarContainerElement) {
                      if (toolbarContainerElement.parentElement.parentElement === this.#element.parentElement.parentElement) {
                        return true;
                      }
                      if (toolbarContainerElement.parentElement.getAttribute("role") !== "main" && this.#element.parentElement.getAttribute("role") !== "main") {
                        return true;
                      }
                      if (toolbarContainerElement.parentElement.getAttribute("role") === "main" && toolbarContainerElement.parentElement.querySelector(".if, .PeIF1d, .a98.iY") && (toolbarContainerElement.parentElement.querySelector(".if, .PeIF1d, .a98.iY").parentElement === this.#element || toolbarContainerElement.parentElement.querySelector(".a98.iY") === this.#element)) {
                        let version3 = "2018";
                        if (this.#element.matches(".a98.iY")) {
                          version3 = "2023-11-16";
                        } else if (toolbarContainerElement.parentElement.querySelector(".a98.iY")) {
                          version3 = "2022-10-20";
                        } else if (toolbarContainerElement.parentElement.querySelector(".PeIF1d")) {
                          version3 = "2022-10-12";
                        }
                        this.#driver.getLogger().eventSdkPassive("gmailThreadView_isToolbarContainerRelevant", {
                          version: version3
                        });
                        return true;
                      }
                      return false;
                    }
                    #setupMessageViewStream() {
                      var openMessage = this.#element.querySelector(".h7");
                      if (!openMessage) {
                        var self2 = this;
                        setTimeout(function() {
                          if (self2.#element) {
                            self2.#setupMessageViewStream();
                          }
                        }, 500);
                        return;
                      }
                      var messageContainer = openMessage.parentElement;
                      this.#initializeExistingMessages(messageContainer);
                      this.#observeNewMessages(messageContainer);
                    }
                    #initializeExistingMessages(messageContainer) {
                      var self2 = this;
                      var children = messageContainer.children;
                      Array.prototype.forEach.call(children, function(childElement) {
                        self2.#createMessageView(childElement);
                      });
                    }
                    #observeNewMessages(messageContainer) {
                      this.#newMessageMutationObserver = new MutationObserver(this.#handleNewMessageMutations.bind(this));
                      this.#newMessageMutationObserver.observe(messageContainer, {
                        childList: true
                      });
                    }
                    #handleNewMessageMutations(mutations) {
                      var self2 = this;
                      mutations.forEach(function(mutation) {
                        Array.prototype.forEach.call(mutation.addedNodes, function(addedNode) {
                          if (!addedNode.classList.contains("inboxsdk__custom_message_view")) self2.#createMessageView(addedNode);
                        });
                      });
                    }
                    #createMessageView(messageElement) {
                      var messageView = new gmail_message_view(messageElement, this, this.#driver);
                      this.#eventStream.plug(messageView.getEventStream());
                      this.#messageViewDrivers.push(messageView);
                      this.#eventStream.emit({
                        type: "internal",
                        eventName: "messageCreated",
                        view: messageView
                      });
                    }
                    getReadyStream() {
                      return this.#readyStream;
                    }
                    async #logAddonElementInfo() {
                      if (hasLoggedAddonInfo) return;
                      function readInfo() {
                        const container = gmail_element_getter.A.getAddonSidebarContainerElement();
                        if (!container) return null;
                        const isDisplayNone = {
                          parent: container.parentElement ? container.parentElement.style.display === "none" : null,
                          self: container.style.display === "none",
                          children: Array.from(container.children).map((el) => el.style ? el.style.display === "none" : null)
                        };
                        const rect = container.getBoundingClientRect();
                        const size = {
                          width: rect.width,
                          height: rect.height
                        };
                        return {
                          isDisplayNone,
                          size
                        };
                      }
                      const eventData = {
                        time: {}
                      };
                      eventData.time[0] = readInfo();
                      await Promise.all([30, 5e3].map(async (time) => {
                        await (0, pdelay_js.A)(time);
                        if (this.#stopper.stopped) return;
                        eventData.time[time] = readInfo();
                      }));
                      if (this.#stopper.stopped) return;
                      this.#driver.getLogger().eventSdkPassive("gmailSidebarElementInfo", eventData);
                      hasLoggedAddonInfo = true;
                    }
                    #listenToExpandCollapseAll() {
                      const expandAllElementImg = this.#element.querySelector("img.gx");
                      if (expandAllElementImg) {
                        const expandAllElement = findParent(expandAllElementImg, (el) => el.getAttribute("role") === "button");
                        if (expandAllElement) {
                          kefir_esm.merge([kefir_esm.fromEvents(expandAllElement, "click"), kefir_esm.fromEvents(expandAllElement, "keydown").filter(
                            (e) => e.which === 13
                            /* enter */
                          )]).takeUntilBy(this.#stopper).onValue(() => {
                            for (const customMessageView of this.#customMessageViews) {
                              customMessageView.expand();
                            }
                          });
                        }
                      }
                      const collapseAllElementImg = this.#element.querySelector("img.gq");
                      if (collapseAllElementImg) {
                        const collapseAllElement = findParent(collapseAllElementImg, (el) => el.getAttribute("role") === "button");
                        if (collapseAllElement) {
                          kefir_esm.merge([kefir_esm.fromEvents(collapseAllElement, "click"), kefir_esm.fromEvents(collapseAllElement, "keydown").filter(
                            (e) => e.which === 13
                            /* enter */
                          )]).takeUntilBy(this.#stopper).onValue(() => {
                            for (const customMessageView of this.#customMessageViews) {
                              customMessageView.collapse();
                            }
                          });
                        }
                      }
                    }
                  }
                  const gmail_thread_view = GmailThreadView;
                  ;
                  const thread_row_view_membersMap = /* @__PURE__ */ new WeakMap();
                  class ThreadRowView extends safe_event_emitter.A {
                    /**
                     * This property is set to true once the view is destroyed
                     */
                    constructor(threadRowViewDriver) {
                      super();
                      const members = {
                        threadRowViewDriver
                      };
                      thread_row_view_membersMap.set(this, members);
                      this.destroyed = false;
                      threadRowViewDriver.getEventStream().onEnd(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                      });
                      threadRowViewDriver.setUserView(this);
                    }
                    addLabel(labelDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addLabel(labelDescriptor);
                    }
                    addImage(imageDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addImage(imageDescriptor);
                    }
                    addButton(buttonDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addButton(buttonDescriptor);
                    }
                    addActionButton(actionButtonDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addActionButton(actionButtonDescriptor);
                    }
                    addAttachmentIcon(threadRowAttachmentIconDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addAttachmentIcon(threadRowAttachmentIconDescriptor);
                    }
                    replaceDate(threadRowDateDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.replaceDate(threadRowDateDescriptor);
                    }
                    replaceDraftLabel(draftLabelDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.replaceDraftLabel(draftLabelDescriptor);
                    }
                    getElement() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getElement();
                    }
                    getSubject() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getSubject();
                    }
                    replaceSubject(newSubjectStr) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.replaceSubject(newSubjectStr);
                    }
                    getDateString() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getDateString();
                    }
                    /** @deprecated */
                    getThreadID() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getThreadID();
                    }
                    getThreadIDAsync() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getThreadIDAsync();
                    }
                    /** @deprecated */
                    getThreadIDIfStable() {
                      if (this.getVisibleMessageCount() > 0) {
                        return this.getThreadID();
                      } else {
                        return null;
                      }
                    }
                    getThreadIDIfStableAsync() {
                      if (this.getVisibleMessageCount() > 0) {
                        return this.getThreadIDAsync();
                      } else {
                        return Promise.resolve(null);
                      }
                    }
                    getDraftID() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getDraftID();
                    }
                    /**
                     * @returns the {number} of visible draft messages in the row. This is purely an estimate based on what is visible in the row.
                     */
                    getVisibleDraftCount() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getVisibleDraftCount();
                    }
                    getVisibleMessageCount() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getVisibleMessageCount();
                    }
                    getContacts() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getContacts();
                    }
                  }
                  var compose_view = __webpack_require__3(7600);
                  var gmail_compose_view = __webpack_require__3(3737);
                  ;
                  class DummyRouteViewDriver {
                    #eventStream = kefir_bus_default()();
                    #stopper = js_default()();
                    getRouteType() {
                      return "UNKNOWN";
                    }
                    getRouteID() {
                      return "UNKNOWN";
                    }
                    getParams() {
                      return {};
                    }
                    getEventStream() {
                      return this.#eventStream;
                    }
                    getStopper() {
                      return this.#stopper;
                    }
                    destroy() {
                      this.#eventStream.end();
                      this.#stopper.destroy();
                    }
                  }
                  const dummy_route_view_driver = DummyRouteViewDriver;
                  var route_view = __webpack_require__3(321);
                  var includes = __webpack_require__3(5193);
                  var includes_default = /* @__PURE__ */ __webpack_require__3.n(includes);
                  var last2 = __webpack_require__3(6456);
                  var last_default = /* @__PURE__ */ __webpack_require__3.n(last2);
                  var querystring_es3 = __webpack_require__3(6448);
                  ;
                  function makeElementViewStream(viewFn) {
                    return (event) => {
                      const view = viewFn(event.el);
                      if (view) {
                        event.removalStream.take(1).onValue(() => {
                          view.destroy();
                        });
                        return kefir_esm.constant(view);
                      } else {
                        return kefir_esm.never();
                      }
                    };
                  }
                  ;
                  function getInsertBeforeElement(checkElement, childElements, dataAttributes) {
                    const checkValues = {};
                    dataAttributes.forEach(function(attribute) {
                      const stringValue = checkElement.getAttribute(attribute);
                      checkValues[attribute] = stringValue == null ? null : parseIfNumber(stringValue) ?? stringValue;
                    });
                    for (let ii = 0; ii < childElements.length; ii++) {
                      const child = childElements[ii];
                      if (_isChildAfter(checkValues, child, dataAttributes)) {
                        return child;
                      }
                    }
                    return null;
                  }
                  function _isChildAfter(checkValues, child, dataAttributes) {
                    for (let ii = 0; ii < dataAttributes.length; ii++) {
                      const attribute = dataAttributes[ii];
                      const stringValue = child.getAttribute(attribute);
                      const value = stringValue == null ? null : parseIfNumber(stringValue) ?? stringValue;
                      if (value > checkValues[attribute]) {
                        return true;
                      } else if (value < checkValues[attribute]) {
                        return false;
                      }
                    }
                    return false;
                  }
                  function parseIfNumber(value) {
                    const n = parseFloat(value);
                    if (!isNaN(n) && isFinite(n)) {
                      return n;
                    } else {
                      return null;
                    }
                  }
                  ;
                  function defer() {
                    let resolve = void 0;
                    let reject = void 0;
                    const promise = new Promise((_resolve, _reject) => {
                      resolve = _resolve;
                      reject = _reject;
                    });
                    return {
                      resolve,
                      reject,
                      promise
                    };
                  }
                  ;
                  class GenericButtonView {
                    _eventStream = kefir_bus_default()();
                    constructor(element) {
                      this._element = element;
                      this._setupEventStream();
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    activate() {
                    }
                    deactivate() {
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue((event) => {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.map((event) => {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                    }
                  }
                  ;
                  class InboxDropdownButtonView extends GenericButtonView {
                    constructor() {
                      const element = document.createElement("div");
                      element.setAttribute("class", "aAE qi J-J5-Ji J-JN-M-I");
                      element.innerHTML = '<div class="J-J5-Ji J-JN-M-I-JG">&nbsp;</div>';
                      element.addEventListener("mouseenter", function() {
                        element.classList.add("J-JN-M-I-JW");
                      });
                      element.addEventListener("mouseleave", function() {
                        element.classList.remove("J-JN-M-I-JW");
                      });
                      super(element);
                    }
                    activate() {
                      this.getElement().classList.add("J-JN-M-I-JO");
                      this.getElement().classList.add("J-JN-M-I-Kq");
                    }
                    deactivate() {
                      this.getElement().classList.remove("J-JN-M-I-JO");
                      this.getElement().classList.remove("J-JN-M-I-Kq");
                    }
                  }
                  var injectStylesIntoStyleTag = __webpack_require__3(6186);
                  var injectStylesIntoStyleTag_default = /* @__PURE__ */ __webpack_require__3.n(injectStylesIntoStyleTag);
                  var styleDomAPI = __webpack_require__3(2155);
                  var styleDomAPI_default = /* @__PURE__ */ __webpack_require__3.n(styleDomAPI);
                  var setAttributesWithoutAttributes = __webpack_require__3(8626);
                  var setAttributesWithoutAttributes_default = /* @__PURE__ */ __webpack_require__3.n(setAttributesWithoutAttributes);
                  var insertStyleElement = __webpack_require__3(8990);
                  var insertStyleElement_default = /* @__PURE__ */ __webpack_require__3.n(insertStyleElement);
                  var styleTagTransform = __webpack_require__3(9827);
                  var styleTagTransform_default = /* @__PURE__ */ __webpack_require__3.n(styleTagTransform);
                  var gmail_collapsible_section_view_module = __webpack_require__3(9245);
                  ;
                  var options = {};
                  options.styleTagTransform = styleTagTransform_default();
                  options.setAttributes = setAttributesWithoutAttributes_default();
                  options.insert = (htmlElement) => {
                    htmlElement.setAttribute(
                      "data-inboxsdk-version",
                      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- this is injected by webpack
                      ///@ts-ignore
                      "2.2.7-1753737313283-f941d482eba8eb97"
                    );
                    document.head.append(htmlElement);
                  };
                  options.domAPI = styleDomAPI_default();
                  options.insertStyleElement = insertStyleElement_default();
                  var update = injectStylesIntoStyleTag_default()(gmail_collapsible_section_view_module.Ay, options);
                  const views_gmail_collapsible_section_view_module = gmail_collapsible_section_view_module.Ay && gmail_collapsible_section_view_module.Ay.locals ? gmail_collapsible_section_view_module.Ay.locals : void 0;
                  ;
                  class GmailCollapsibleSectionView {
                    #groupOrderHint;
                    #isReadyDeferred;
                    #isCollapsible;
                    #collapsibleSectionDescriptor = {};
                    #isSearch;
                    #element = null;
                    #headerElement = null;
                    #titleElement = null;
                    #bodyElement = null;
                    #contentElement = null;
                    #tableBodyElement = null;
                    #collapsedContainer = null;
                    #messageElement = null;
                    #footerElement = null;
                    #eventStream;
                    #isCollapsed = false;
                    #inboxDropdownButtonView = null;
                    #dropdownViewController = null;
                    #tableRowsUnmountResolution = null;
                    #driver;
                    constructor(driver, groupOrderHint, isSearch, isCollapsible) {
                      this.#driver = driver;
                      this.#isSearch = isSearch;
                      this.#groupOrderHint = groupOrderHint;
                      this.#isCollapsible = isCollapsible;
                      this.#eventStream = kefir_bus_default()();
                      this.#isReadyDeferred = defer();
                    }
                    destroy() {
                      this.#unmountRows();
                      this.#element?.remove();
                      if (this.#eventStream) this.#eventStream.end();
                      this.#headerElement?.remove();
                      this.#titleElement?.remove();
                      this.#bodyElement?.remove();
                      this.#contentElement?.remove();
                      this.#tableBodyElement?.remove();
                      this.#collapsedContainer?.remove();
                      this.#messageElement?.remove();
                      this.#inboxDropdownButtonView?.destroy();
                      this.#dropdownViewController?.destroy();
                    }
                    #unmountRows() {
                      this.#tableRowsUnmountResolution?.();
                      this.#tableRowsUnmountResolution = null;
                    }
                    getElement() {
                      const element = this.#element;
                      if (!element) throw new Error("tried to access element that does not exist");
                      return element;
                    }
                    get eventStream() {
                      return this.#eventStream;
                    }
                    setCollapsibleSectionDescriptorProperty(collapsibleSectionDescriptorProperty) {
                      const stoppedProperty = collapsibleSectionDescriptorProperty.takeUntilBy(this.#eventStream.filter(() => false).beforeEnd(() => null));
                      stoppedProperty.onValue((x2) => this.#updateValues(x2));
                      stoppedProperty.take(1).onValue(() => this.#isReadyDeferred.resolve(this));
                      this.#driver.gmailThemeStream.onValue(() => {
                        if (Object.keys(this.#collapsibleSectionDescriptor).length) {
                          this.#updateValues(this.#collapsibleSectionDescriptor);
                        }
                      });
                    }
                    setCollapsed(value) {
                      if (!this.#isCollapsible) {
                        return;
                      }
                      this.#isReadyDeferred.promise.then(() => {
                        if (value) this.#collapse();
                        else this.#expand();
                      });
                    }
                    #updateValues(collapsibleSectionDescriptor) {
                      const element = this.#element;
                      if (!collapsibleSectionDescriptor) {
                        if (element) {
                          element.style.display = "none";
                        }
                        return;
                      } else if (element) {
                        element.style.display = "";
                      }
                      if (!element) {
                        this.#setupElement(collapsibleSectionDescriptor);
                        this.#showLoadingMessage();
                      } else {
                        this.#updateElement(collapsibleSectionDescriptor);
                      }
                      this.#updateHeader(collapsibleSectionDescriptor);
                      this.#updateTitle(collapsibleSectionDescriptor);
                      this.#updateSubtitle(collapsibleSectionDescriptor);
                      this.#updateSummaryText(collapsibleSectionDescriptor);
                      this.#updateDropdown(collapsibleSectionDescriptor);
                      this.#updateContentElement(collapsibleSectionDescriptor);
                      this.#updateTableRows(collapsibleSectionDescriptor);
                      this.#updateMessageElement(collapsibleSectionDescriptor);
                      this.#updateFooter(collapsibleSectionDescriptor);
                      this.#collapsibleSectionDescriptor = collapsibleSectionDescriptor;
                    }
                    #setupElement(collapsibleSectionDescriptor) {
                      const element = this.#element = document.createElement("div");
                      element.setAttribute("class", "inboxsdk__resultsSection");
                      element.setAttribute("data-group-order-hint", String(this.#groupOrderHint));
                      element.setAttribute("data-order-hint", String(typeof collapsibleSectionDescriptor.orderHint === "number" ? collapsibleSectionDescriptor.orderHint : 0));
                      if (!this.#isCollapsible) element.classList.add("inboxsdk__resultsSection_nonCollapsible");
                      this.#setupHeader(collapsibleSectionDescriptor);
                      const bodyElement = this.#bodyElement = document.createElement("div");
                      const bodyContentsElement = document.createElement("div");
                      bodyContentsElement.classList.add("zE");
                      bodyElement.appendChild(bodyContentsElement);
                      element.appendChild(bodyElement);
                      const contentElement = this.#contentElement = document.createElement("div");
                      bodyContentsElement.appendChild(contentElement);
                      const messageElement = this.#messageElement = document.createElement("div");
                      bodyContentsElement.appendChild(messageElement);
                      const tableBodyElement = this.#tableBodyElement = document.createElement("div");
                      bodyContentsElement.appendChild(tableBodyElement);
                      this.#setupFooter();
                      if (this.#isCollapsible && this.#titleElement) {
                        kefir_esm.fromEvents(this.#titleElement, "click").onValue(() => this.#toggleCollapseState());
                      }
                      kefir_esm.fromEvents(element, "removeCollapsedContainer").onValue(() => this.#destroyCollapsedContainer());
                      kefir_esm.fromEvents(element, "readdToCollapsedContainer").onValue(() => this.#addToCollapsedContainer());
                      this.#eventStream.emit({
                        type: "update",
                        property: "orderHint",
                        sectionDescriptor: collapsibleSectionDescriptor
                      });
                    }
                    #setupHeader(collapsibleSectionDescriptor) {
                      const headerElement = this.#headerElement = document.createElement("div");
                      headerElement.classList.add("inboxsdk__resultsSection_header", "Wg");
                      this.#setupGmailv2Header(headerElement, collapsibleSectionDescriptor);
                      if (this.#element) this.#element.appendChild(headerElement);
                    }
                    #setupGmailv2Header(headerElement, collapsibleSectionDescriptor) {
                      const titleElement = this.#titleElement = document.createElement("div");
                      titleElement.setAttribute("class", "inboxsdk__resultsSection_title");
                      titleElement.innerHTML = ['<h3 class="Wr iR">', '<img alt="" src="//ssl.gstatic.com/ui/v1/icons/mail/images/cleardot.gif" class="qi Wp Wq">', `<div class="Wn ${gmail_collapsible_section_view_module.DD}">`, escape_default()(collapsibleSectionDescriptor.title), "</div>", "</h3>"].join("");
                      const headerRightElement = document.createElement("div");
                      headerRightElement.classList.add("chp5lb");
                      headerElement.appendChild(titleElement);
                      headerElement.appendChild(headerRightElement);
                    }
                    #setupFooter() {
                      const footerElement = this.#footerElement = document.createElement("div");
                      footerElement.classList.add("inboxsdk__resultsSection_footer");
                      if (this.#bodyElement) this.#bodyElement.appendChild(footerElement);
                    }
                    #updateElement(collapsibleSectionDescriptor) {
                      if (this.#collapsibleSectionDescriptor.orderHint !== collapsibleSectionDescriptor.orderHint) {
                        const element = this.#element;
                        if (element) element.setAttribute("data-order-hint", "" + (typeof collapsibleSectionDescriptor.orderHint === "number" ? collapsibleSectionDescriptor.orderHint : 0));
                        this.#eventStream.emit({
                          type: "update",
                          property: "orderHint"
                        });
                      }
                    }
                    #updateHeader(collapsibleSectionDescriptor) {
                      if (this.#isCollapsible || collapsibleSectionDescriptor.title || collapsibleSectionDescriptor.subtitle || collapsibleSectionDescriptor.titleLinkText || collapsibleSectionDescriptor.hasDropdown) {
                        if (this.#headerElement) this.#headerElement.style.display = "";
                      } else {
                        if (this.#headerElement) this.#headerElement.style.display = "none";
                      }
                    }
                    #updateTitle(collapsibleSectionDescriptor) {
                      if (this.#collapsibleSectionDescriptor.title !== collapsibleSectionDescriptor.title) {
                        if (this.#titleElement) {
                          (0, querySelectorOrFail.A)(this.#titleElement, "h3 > .Wn").textContent = collapsibleSectionDescriptor.title;
                        }
                      }
                    }
                    #updateSubtitle(collapsibleSectionDescriptor) {
                      const titleElement = this.#titleElement;
                      if (!titleElement) return;
                      let subtitleElement = titleElement.getElementsByClassName(gmail_collapsible_section_view_module.VA)[0];
                      if (!collapsibleSectionDescriptor.subtitle) {
                        if (subtitleElement) {
                          subtitleElement.remove();
                        }
                      } else if (this.#collapsibleSectionDescriptor.subtitle !== collapsibleSectionDescriptor.subtitle) {
                        if (!subtitleElement) {
                          subtitleElement = document.createElement("span");
                          if (subtitleElement && titleElement) {
                            subtitleElement.classList.add(gmail_collapsible_section_view_module.VA);
                            const insertionPoint = titleElement.querySelector(".Wn");
                            if (insertionPoint) {
                              insertionPoint.prepend(subtitleElement);
                            }
                          }
                        }
                        subtitleElement.textContent = collapsibleSectionDescriptor.subtitle;
                      }
                    }
                    #updateSummaryText(collapsibleSectionDescriptor) {
                      const headerElement = this.#headerElement;
                      if (!headerElement) return;
                      let summaryTextElement = headerElement.querySelector(".inboxsdk__resultsSection_header_summaryText");
                      if (!collapsibleSectionDescriptor.titleLinkText) {
                        if (summaryTextElement) {
                          summaryTextElement.remove();
                        }
                      } else if (collapsibleSectionDescriptor.titleLinkText !== this.#collapsibleSectionDescriptor.titleLinkText) {
                        if (!summaryTextElement) {
                          summaryTextElement = document.createElement("div");
                          summaryTextElement.setAttribute("class", "inboxsdk__resultsSection_header_summaryText Wm");
                          summaryTextElement.innerHTML = ['<span class="Di">&nbsp;', '<div class="J-J5-Ji amH">', '<span class="Dj">', "<span></span>", "</span>", "&nbsp;", "</div>", "</span>"].join("");
                          this.#eventStream.plug(kefir_esm.fromEvents(summaryTextElement, "click").map(() => ({
                            eventName: "titleLinkClicked",
                            sectionDescriptor: this.#collapsibleSectionDescriptor
                          })));
                          const _summaryTextElement = summaryTextElement;
                          summaryTextElement.addEventListener("mouseenter", function() {
                            _summaryTextElement.classList.add("aqi");
                          });
                          summaryTextElement.addEventListener("mouseleave", function() {
                            _summaryTextElement.classList.remove("aqi");
                          });
                          const insertionPoint = headerElement.querySelector(`.${"chp5lb"}`);
                          if (insertionPoint) insertionPoint.insertAdjacentElement("afterbegin", summaryTextElement);
                        }
                        (0, querySelectorOrFail.A)(summaryTextElement, ".Dj > *").textContent = collapsibleSectionDescriptor.titleLinkText;
                      }
                    }
                    #updateDropdown(collapsibleSectionDescriptor) {
                      if (!collapsibleSectionDescriptor.hasDropdown || !collapsibleSectionDescriptor.onDropdownClick) {
                        if (this.#inboxDropdownButtonView) this.#inboxDropdownButtonView.destroy();
                        if (this.#dropdownViewController) this.#dropdownViewController.destroy();
                      } else if (collapsibleSectionDescriptor.hasDropdown && collapsibleSectionDescriptor.onDropdownClick) {
                        if (!this.#inboxDropdownButtonView || !this.#dropdownViewController) {
                          const inboxDropdownButtonView = this.#inboxDropdownButtonView = new InboxDropdownButtonView();
                          this.#dropdownViewController = new dropdown_button_view_controller.A({
                            buttonView: inboxDropdownButtonView,
                            dropdownViewDriverClass: gmail_dropdown_view.A,
                            dropdownShowFunction: collapsibleSectionDescriptor.onDropdownClick
                          });
                          const headerElement = this.#headerElement;
                          if (headerElement) {
                            const childElement = headerElement.querySelector(`.${"chp5lb"}`);
                            if (childElement) childElement.appendChild(inboxDropdownButtonView.getElement());
                          }
                        } else if (collapsibleSectionDescriptor.onDropdownClick !== this.#collapsibleSectionDescriptor.onDropdownClick) {
                          if (this.#dropdownViewController) this.#dropdownViewController.setDropdownShowFunction(collapsibleSectionDescriptor.onDropdownClick);
                        }
                      }
                    }
                    #updateContentElement(collapsibleSectionDescriptor) {
                      const contentElement = this.#contentElement;
                      if (!contentElement) return;
                      contentElement.innerHTML = "";
                      if (collapsibleSectionDescriptor.contentElement) {
                        contentElement.style.display = "";
                        contentElement.appendChild(collapsibleSectionDescriptor.contentElement);
                      } else {
                        contentElement.style.display = "none";
                      }
                    }
                    #updateTableRows(collapsibleSectionDescriptor) {
                      const {
                        tableRows
                      } = collapsibleSectionDescriptor;
                      const tableBodyElement = this.#tableBodyElement;
                      if (!tableBodyElement) return;
                      tableBodyElement.innerHTML = "";
                      if (!tableRows || tableRows.length === 0) {
                        tableBodyElement.style.display = "none";
                      } else {
                        tableBodyElement.style.display = "";
                        this.#renderTable(tableRows);
                      }
                    }
                    #renderTable(tableRows) {
                      const tableElement = document.createElement("table");
                      tableElement.setAttribute("class", "F cf zt");
                      tableElement.innerHTML = _getTableHTML();
                      if (this.#tableBodyElement) this.#tableBodyElement.appendChild(tableElement);
                      const tbody = tableElement.querySelector("tbody");
                      const eventStream = this.#eventStream;
                      this.#unmountRows();
                      const promise = new Promise((res2) => this.#tableRowsUnmountResolution = res2);
                      for (const result of tableRows) {
                        const rowElement = document.createElement("tr");
                        const {
                          iconHtml,
                          isRead = {
                            background: false
                          },
                          title: recipients,
                          shortDetailText,
                          attachmentIcon
                        } = result;
                        const useReadBackground = typeof isRead === "object" && isRead.background || isRead === true;
                        const arbitraryHTMLAndClassName = [[iconHtml, gmail_collapsible_section_view_module.Lm], [recipients, gmail_collapsible_section_view_module.Lf], ..."snippet" in result ? [[result.snippet, gmail_collapsible_section_view_module.UA]] : [], [attachmentIcon, gmail_collapsible_section_view_module.$r], [shortDetailText, gmail_collapsible_section_view_module.Ad]];
                        rowElement.setAttribute("class", "inboxsdk__resultsSection_tableRow zA " + (useReadBackground ? "yO" : "zE"));
                        rowElement.innerHTML = _getRowHTML(result);
                        for (const [maybeRenderer, className] of arbitraryHTMLAndClassName) {
                          if (!maybeRenderer || typeof maybeRenderer === "string") {
                            continue;
                          }
                          const el = (0, querySelectorOrFail.A)(rowElement, `.${className}`);
                          maybeRenderer({
                            el,
                            unmountPromise: promise
                          });
                        }
                        if (!tbody) throw new Error("should not happen");
                        tbody.appendChild(rowElement);
                        eventStream.plug(kefir_esm.fromEvents(rowElement, "click").map(() => ({
                          eventName: "rowClicked",
                          rowDescriptor: result
                        })));
                      }
                    }
                    #updateMessageElement(collapsibleSectionDescriptor) {
                      const messageElement = this.#messageElement;
                      if (collapsibleSectionDescriptor.tableRows && collapsibleSectionDescriptor.tableRows.length > 0 || collapsibleSectionDescriptor.contentElement) {
                        if (messageElement) {
                          messageElement.innerHTML = "";
                          messageElement.style.display = "none";
                        }
                      } else if (collapsibleSectionDescriptor.tableRows && collapsibleSectionDescriptor.tableRows.length === 0 && !collapsibleSectionDescriptor.contentElement) {
                        this.#showEmptyMessage();
                      }
                    }
                    #showLoadingMessage() {
                      const messageElement = this.#messageElement;
                      if (messageElement) {
                        messageElement.setAttribute("class", "TB TC inboxsdk__resultsSection_loading");
                        messageElement.innerHTML = "loading...";
                        messageElement.style.display = "";
                      }
                    }
                    #showEmptyMessage() {
                      const messageElement = this.#messageElement;
                      if (messageElement) {
                        messageElement.setAttribute("class", "TB TC");
                        messageElement.innerHTML = "No results found";
                        messageElement.style.display = "";
                      }
                    }
                    #updateFooter(collapsibleSectionDescriptor) {
                      const footerElement = this.#footerElement;
                      if (!footerElement) return;
                      footerElement.innerHTML = "";
                      if (!collapsibleSectionDescriptor.footerLinkText && !collapsibleSectionDescriptor.footerLinkIconUrl && !collapsibleSectionDescriptor.footerLinkIconClass) {
                        footerElement.style.display = "none";
                      } else {
                        footerElement.style.display = "";
                        const footerLinkElement = document.createElement("span");
                        footerLinkElement.setAttribute("class", "e Wb");
                        footerLinkElement.textContent = collapsibleSectionDescriptor.footerLinkText;
                        this.#eventStream.plug(kefir_esm.fromEvents(footerLinkElement, "click").map(() => {
                          return {
                            eventName: "footerClicked",
                            sectionDescriptor: this.#collapsibleSectionDescriptor
                          };
                        }));
                        footerElement.appendChild(footerLinkElement);
                        footerElement.insertAdjacentHTML("beforeend", '<br style="clear:both;">');
                      }
                    }
                    #toggleCollapseState() {
                      if (this.#isCollapsed) {
                        this.#expand();
                      } else {
                        this.#collapse();
                      }
                    }
                    #collapse() {
                      const element = this.#element;
                      if (!element) {
                        return;
                      }
                      element.classList.add("inboxsdk__resultsSection_collapsed");
                      if (!this.#isSearch) {
                        this.#addToCollapsedContainer();
                      }
                      const selector = "h3 > img.Wp";
                      if (this.#titleElement) {
                        const arrowSpan = (0, querySelectorOrFail.A)(this.#titleElement, selector);
                        if (arrowSpan) {
                          arrowSpan.classList.remove("Wq");
                          arrowSpan.classList.add("Wo");
                        }
                      }
                      if (this.#bodyElement) this.#bodyElement.style.display = "none";
                      this.#isCollapsed = true;
                      this.#eventStream.emit({
                        eventName: "collapsed"
                      });
                    }
                    #expand() {
                      const element = this.#element;
                      if (!element) {
                        return;
                      }
                      element.classList.remove("inboxsdk__resultsSection_collapsed");
                      if (!this.#isSearch) {
                        this.#removeFromCollapsedContainer();
                      }
                      const selector = "h3 > img.Wp";
                      if (this.#titleElement) {
                        const arrowSpan = (0, querySelectorOrFail.A)(this.#titleElement, selector);
                        if (arrowSpan) {
                          arrowSpan.classList.remove("Wo");
                          arrowSpan.classList.add("Wq");
                        }
                      }
                      if (this.#bodyElement) this.#bodyElement.style.display = "";
                      this.#isCollapsed = false;
                      this.#eventStream.emit({
                        eventName: "expanded"
                      });
                    }
                    #addToCollapsedContainer() {
                      const element = this.#element;
                      if (!element) return;
                      if (this.#isCollapsedContainer(element.previousElementSibling) && this.#isCollapsedContainer(element.nextElementSibling)) {
                        const otherCollapseContainer = element.nextElementSibling;
                        const previousSibling = element.previousElementSibling;
                        if (!previousSibling) throw new Error("previousSibling does not exist");
                        if (!otherCollapseContainer) throw new Error("otherCollapseContainer does not exist");
                        previousSibling.children[0].appendChild(element);
                        const elementsToRecollapse = Array.from(otherCollapseContainer.children[0].children).concat(Array.from(otherCollapseContainer.children[1].children));
                        if (otherCollapseContainer) this.#pulloutSectionsFromCollapsedContainer(otherCollapseContainer);
                        this.#recollapse(elementsToRecollapse);
                      } else {
                        this.#readdToCollapsedContainer();
                      }
                    }
                    #removeFromCollapsedContainer() {
                      const element = this.#element;
                      if (!element) return;
                      const parentElement = element.parentElement;
                      if (!parentElement) return;
                      const container = parentElement.parentElement;
                      if (!container || !container.classList.contains("inboxsdk__results_collapsedContainer")) {
                        return;
                      }
                      const elementsToRecollapse = Array.from(container.children[0].children).concat(Array.from(container.children[1].children));
                      this.#pulloutSectionsFromCollapsedContainer(container);
                      this.#destroyCollapsedContainer();
                      this.#recollapse(elementsToRecollapse.filter((child) => child !== element));
                    }
                    #pulloutSectionsFromCollapsedContainer(container) {
                      const prependedChildren = Array.from(container.children[0].children);
                      prependedChildren.forEach((child) => container.insertAdjacentElement("beforebegin", child));
                      const appendedChildren = Array.from(container.children[1].children).reverse();
                      appendedChildren.forEach((child) => container.insertAdjacentElement("afterend", child));
                    }
                    #readdToCollapsedContainer() {
                      const element = this.#element;
                      if (!element) return;
                      if (this.#collapsedContainer) {
                        this.#collapsedContainer.children[0].insertBefore(element, this.#collapsedContainer.children[1].firstElementChild);
                        return;
                      }
                      let collapsedContainer;
                      let isPrepend;
                      if (this.#isCollapsedContainer(element.previousElementSibling)) {
                        isPrepend = false;
                        collapsedContainer = element.previousElementSibling;
                      } else if (this.#isCollapsedContainer(element.nextElementSibling)) {
                        isPrepend = true;
                        collapsedContainer = element.nextElementSibling;
                      } else {
                        isPrepend = true;
                        this.#createCollapsedContainer();
                        collapsedContainer = this.#collapsedContainer;
                      }
                      if (isPrepend && collapsedContainer) {
                        collapsedContainer.children[0].insertBefore(element, collapsedContainer.children[0].firstElementChild);
                      } else if (collapsedContainer) {
                        collapsedContainer.children[0].appendChild(element);
                      }
                    }
                    #isCollapsedContainer(element) {
                      return element && element.classList.contains("inboxsdk__results_collapsedContainer");
                    }
                    #recollapse(children) {
                      children.forEach((child) => {
                        const removeEvent = document.createEvent("CustomEvent");
                        removeEvent.initCustomEvent("removeCollapsedContainer", false, false, null);
                        child.dispatchEvent(removeEvent);
                        const readdEvent = document.createEvent("CustomEvent");
                        readdEvent.initCustomEvent("readdToCollapsedContainer", false, false, null);
                        child.dispatchEvent(readdEvent);
                      });
                    }
                    #createCollapsedContainer() {
                      const collapsedContainer = this.#collapsedContainer = document.createElement("div");
                      collapsedContainer.setAttribute("class", "inboxsdk__results_collapsedContainer Wg");
                      collapsedContainer.innerHTML = '<div class="inboxsdk__results_collapsedContainer_prepend"></div><div class="inboxsdk__results_collapsedContainer_append"></div>';
                      const element = this.#element;
                      if (element) element.insertAdjacentElement("afterend", collapsedContainer);
                    }
                    #destroyCollapsedContainer() {
                      if (this.#collapsedContainer) {
                        this.#collapsedContainer.remove();
                        this.#collapsedContainer = null;
                      }
                    }
                  }
                  function _getTableHTML() {
                    return ["<colgroup>", '<col class="k0vOLb">', '<col class="Ci">', '<col class="y5">', '<col class="WA">', '<col class="yY">', "<col>", '<col class="xX">', "</colgroup>", "<tbody>", "</tbody>"].join("");
                  }
                  function _getRowHTML(result) {
                    let iconHtml = "";
                    if (result.iconHtml != null && typeof result.iconHtml === "string") {
                      iconHtml = auto_html_js_default()`<div class="inboxsdk__resultsSection_result_icon inboxsdk__resultsSection_result_iconHtml">
        ${{
                        __html: result.iconHtml
                      }}
      </div>`;
                    } else if (result.iconUrl) {
                      iconHtml = auto_html_js_default()`<img class="inboxsdk__resultsSection_result_icon ${result.iconClass || ""}" src="${result.iconUrl}">`;
                    } else if (result.iconClass) iconHtml = auto_html_js_default()`<div class="${result.iconClass}"></div>`;
                    const labelsHtml = Array.isArray(result.labels) ? result.labels.map(_getLabelHTML).join("") : "";
                    const {
                      isRead = {
                        text: true
                      },
                      title,
                      shortDetailText
                    } = result;
                    const useReadText = typeof isRead === "object" && isRead.text || result.isRead === true;
                    const rowArr = [
                      '<td class="xY PF"></td>',
                      `<td class="xY oZ-x3 ${gmail_collapsible_section_view_module.Lm}">`,
                      iconHtml,
                      "</td>",
                      // Native Gmail thread rows include this '<td class="xY WA"></td>',
                      // and this '<td class="xY WA"></td>',
                      `<td class="xY yX ${gmail_collapsible_section_view_module.kk}">`,
                      '<div class="yW">',
                      `<span class="${gmail_collapsible_section_view_module.Lf}${useReadText ? "" : " zF"}">`,
                      ...typeof title === "string" ? [escape_default()(title)] : [],
                      "</span>",
                      "</div>",
                      "</td>",
                      '<td class="xY a4W">',
                      '<div class="xS">',
                      '<div class="xT">',
                      '<div class="yi">',
                      labelsHtml,
                      "</div>",
                      `<div class="y6 ${gmail_collapsible_section_view_module.UA}">`,
                      `<span class="bog${useReadText ? "" : " " + gmail_collapsible_section_view_module.gy}">`,
                      useReadText ? "" : "<b>",
                      escape_default()("body" in result && result.body || ""),
                      useReadText ? "" : "</b>",
                      "</span>",
                      "</div>",
                      `<div class="${gmail_collapsible_section_view_module.$r}"></div>`,
                      "</div>",
                      "</div>",
                      "</td>",
                      '<td class="xY xW">',
                      `<span class="${gmail_collapsible_section_view_module.Ad} ${useReadText ? gmail_collapsible_section_view_module.gy : "bq3"}">`,
                      ...typeof shortDetailText === "string" ? [escape_default()(shortDetailText)] : [],
                      "</span>",
                      "</td>"
                    ];
                    return rowArr.join("");
                  }
                  function _getLabelHTML(label) {
                    const backgroundColor = label.backgroundColor || "rgb(194, 194, 194)";
                    const foregroundColor = label.foregroundColor || "rgb(255, 255, 255)";
                    const maxWidth = label.maxWidth || "90px";
                    const retArray = [auto_html_js_default()`<div class="ar as" data-tooltip="${label.title}">
      <div class="at" style="background-color: ${backgroundColor}; border-color: ${backgroundColor};">
        <div class="au" style="border-color: ${backgroundColor};">`];
                    const styleHtml = label.iconBackgroundColor ? auto_html_js_default()`style="background-color: ${label.iconBackgroundColor}"` : "";
                    if (label.iconHtml != null) {
                      retArray.push(auto_html_js_default()`<div class="inboxsdk__resultsSection_label_icon inboxsdk__resultsSection_label_iconHtml"
        ${{
                        __html: styleHtml
                      }}
      >
        ${{
                        __html: label.iconHtml
                      }}
      </div>`);
                    } else if (label.iconClass) {
                      retArray.push(auto_html_js_default()`<div
        class="inboxsdk__resultsSection_label_icon ${label.iconClass || ""}"
        ${{
                        __html: styleHtml
                      }}
        >
      </div>`);
                    } else if (label.iconUrl) {
                      retArray.push(auto_html_js_default()`<img
        class="inboxsdk__resultsSection_label_icon"
        ${{
                        __html: styleHtml
                      }}
        src="${label.iconUrl}" />`);
                    }
                    retArray.push(auto_html_js_default()`
          <div class="av" style="color: ${foregroundColor}; max-width: ${maxWidth}">
            ${label.title}
          </div>
        </div>
      </div>
    </div>
    `);
                    return retArray.join("");
                  }
                  const gmail_collapsible_section_view = GmailCollapsibleSectionView;
                  var page_parser_tree_js = __webpack_require__3(855);
                  var page_parser_tree_js_default = /* @__PURE__ */ __webpack_require__3.n(page_parser_tree_js);
                  var isNotNil = __webpack_require__3(960);
                  ;
                  function makePageParser(element, logger) {
                    return new (page_parser_tree_js_default())(element, {
                      logError(err, el) {
                        const details = {
                          el,
                          html: el ? (0, censorHTMLtree.A)(el) : null
                        };
                        logger.errorSite(err, details);
                      },
                      tags: {},
                      watchers: [{
                        sources: [null],
                        tag: "rowListElementContainer",
                        selectors: [{
                          $map: () => document.querySelector(".bGI.nH")?.parentElement
                        }]
                      }, {
                        sources: ["rowListElementContainer"],
                        tag: "rowListElement",
                        selectors: [{
                          $or: [[], [".bGI.nH", ".bf5", ".bv9", ".bGC"]]
                        }, ".bGI[role=main]", "[gh=tl]"]
                      }],
                      finders: {
                        rowListElementContainer: {
                          fn: (root) => [root.querySelector(".bGI.nH")?.parentElement].filter(isNotNil.A)
                        },
                        rowListElement: {
                          fn: (root) => root.querySelectorAll("[gh=tl]")
                        }
                      }
                    });
                  }
                  var toItemWithLifetimeStream = __webpack_require__3(370);
                  ;
                  function extractDocumentHtmlAndCss() {
                    let options2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {
                      censor: true
                    };
                    try {
                      const css = Array.from(document.styleSheets).flatMap((sheet) => {
                        try {
                          const name = `
/* Stylesheet : ${sheet.href || "[inline styles]"} */`;
                          const rules = Array.from(sheet.cssRules).map((cssRule) => cssRule.cssText);
                          rules.splice(0, 0, name);
                          return rules;
                        } catch (e) {
                          return [];
                        }
                      }).join("\n").replaceAll(`url("//`, `url("https://`);
                      const links = Array.from(document.querySelectorAll("link")).filter((link) => link.href?.includes("fonts") || link.as === "image").map((link) => link.outerHTML).join("\n");
                      let body = document.body.innerHTML;
                      body = body.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, "");
                      if (options2.censor) {
                        body = (0, censorHTMLstring.A)(body);
                      }
                      return `
      <!DOCTYPE html>
      <html>
          <head>
            ${links}
            <style>
              ${css}
            </style>
          </head>
          <body>
            ${body}
          </body>
      </html>
      `;
                    } catch (err) {
                      return `couldn't extract document html and css: ${err}`;
                    }
                  }
                  ;
                  class GmailRouteView {
                    _stopper = js_default()();
                    #driver;
                    #page;
                    #destroyed = false;
                    constructor(_ref, gmailRouteProcessor, driver) {
                      let {
                        urlObject,
                        type,
                        routeID,
                        cachedRouteData
                      } = _ref;
                      this._type = type;
                      this._hash = urlObject.hash;
                      this._name = urlObject.name;
                      this._paramsArray = urlObject.params;
                      this._customRouteID = routeID;
                      this._cachedRouteData = cachedRouteData;
                      this._stopper = js_default()();
                      this._rowListViews = [];
                      this._gmailRouteProcessor = gmailRouteProcessor;
                      this.#driver = driver;
                      this._eventStream = kefir_bus_default()();
                      this._hasAddedCollapsibleSection = false;
                      this.#page = makePageParser(document.body, driver.getLogger());
                      if (this._type === "CUSTOM") {
                        this._setupCustomViewElement();
                        driver.getStopper().takeUntilBy(this._stopper.delay(0)).onValue(() => {
                          driver.showNativeRouteView();
                          window.location.hash = "#inbox";
                        });
                      } else if (includes_default()(["NATIVE", "CUSTOM_LIST"], this._type)) {
                        this._setupSubViews();
                      }
                      if (this._type === "CUSTOM_LIST") {
                        kefir_esm.later(500, void 0).takeUntilBy(this._stopper).onValue(async () => {
                          await this.#waitForMainElementSafe();
                          if (this._stopper.stopped) return;
                          var last3 = driver.getLastCustomThreadListActivity();
                          if (!last3 || last3.customRouteID !== this._customRouteID || Date.now() - last3.timestamp > 5e3) {
                            this.refresh();
                          }
                        });
                      }
                    }
                    destroy() {
                      this.#destroyed = true;
                      this._stopper.destroy();
                      this._eventStream.end();
                      this.#page.dump();
                      if (this._customViewElement) {
                        this._customViewElement.remove();
                      }
                      var rowListViews = this._rowListViews;
                      this._rowListViews = [];
                      rowListViews.forEach((view) => {
                        view.destroy();
                      });
                      if (this._threadView) {
                        this._threadView.destroy();
                        this._threadView = null;
                      }
                    }
                    getHash() {
                      return this._hash;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getCustomViewElement() {
                      return this._customViewElement;
                    }
                    getRowListViews() {
                      return this._rowListViews;
                    }
                    getThreadView() {
                      return this._threadView;
                    }
                    getType() {
                      if (this._type === "OTHER_APP_CUSTOM") {
                        return "CUSTOM";
                      } else {
                        return this._type;
                      }
                    }
                    isCustomRouteBelongingToApp() {
                      return this._type === "CUSTOM";
                    }
                    getParams = once_default()(() => {
                      let params;
                      if (this._customRouteID) {
                        params = this._getCustomParams();
                      } else {
                        params = this._getNativeParams();
                        const routeID = this.getRouteID();
                        if (routeID) {
                          const routeIDParams = this._extractParamKeysFromRouteID(routeID);
                          const routeParams = {};
                          routeIDParams.forEach(function(param) {
                            if (params[param]) {
                              routeParams[param] = params[param];
                            }
                          });
                          params = routeParams;
                        }
                      }
                      return Object.freeze(params);
                    });
                    addCollapsibleSection(sectionDescriptorProperty, groupOrderHint) {
                      return this.#addCollapsibleSection(sectionDescriptorProperty, groupOrderHint, true);
                    }
                    addSection(sectionDescriptorProperty, groupOrderHint) {
                      return this.#addCollapsibleSection(sectionDescriptorProperty, groupOrderHint, false);
                    }
                    #addCollapsibleSection(collapsibleSectionDescriptorProperty, groupOrderHint, isCollapsible) {
                      this._hasAddedCollapsibleSection = true;
                      var gmailResultsSectionView = new gmail_collapsible_section_view(this.#driver, groupOrderHint, this.getRouteID() === this._gmailRouteProcessor.NativeRouteIDs.SEARCH, isCollapsible);
                      kefir_esm.combine([this.#getSectionsContainer(), gmailResultsSectionView.eventStream.filter((event) => {
                        return "type" in event && event.type === "update" && event.property === "orderHint";
                      })]).onValue((_ref2) => {
                        let [sectionsContainer] = _ref2;
                        const children = sectionsContainer.children;
                        const insertBeforeElement = getInsertBeforeElement(gmailResultsSectionView.getElement(), children, ["data-group-order-hint", "data-order-hint"]);
                        if (insertBeforeElement) {
                          sectionsContainer.insertBefore(gmailResultsSectionView.getElement(), insertBeforeElement);
                        } else {
                          sectionsContainer.appendChild(gmailResultsSectionView.getElement());
                        }
                      });
                      gmailResultsSectionView.setCollapsibleSectionDescriptorProperty(collapsibleSectionDescriptorProperty);
                      return gmailResultsSectionView;
                    }
                    hideSearchPageFilterToolbar() {
                      (0, toItemWithLifetimeStream.A)(this.#page.tree.getAllByTag("rowListElementContainer")).takeUntilBy(this._stopper).onValue((_ref3) => {
                        let {
                          el,
                          removalStream
                        } = _ref3;
                        el.getValue().classList.add("inboxsdk__hide_filter_toolbar");
                        removalStream.onValue(() => {
                          el.getValue().classList.remove("inboxsdk__hide_filter_toolbar");
                        });
                      });
                    }
                    _setupCustomViewElement() {
                      this._customViewElement = document.createElement("div");
                      this._customViewElement.classList.add("inboxsdk__custom_view_element");
                      this._monitorLeftNavHeight();
                      this._setCustomViewElementHeight();
                    }
                    _monitorLeftNavHeight() {
                      var leftNav = gmail_element_getter.A.getLeftNavHeightElement();
                      if (!leftNav) {
                        return;
                      }
                      (0, make_mutation_observer_chunked_stream.A)(leftNav, {
                        attributes: true,
                        attributeFilter: ["style"]
                      }).takeUntilBy(this._stopper).onValue(() => {
                        this._setCustomViewElementHeight();
                      });
                    }
                    _setCustomViewElementHeight() {
                      const leftNav = gmail_element_getter.A.getLeftNavHeightElement();
                      const gtalkButtons = gmail_element_getter.A.getGtalkButtons();
                      const customViewEl = this._customViewElement;
                      if (!leftNav || !customViewEl) throw new Error("Should not happen");
                      const contentSectionElement = gmail_element_getter.A.getContentSectionElement();
                      const contentSectionElementBottomMargin = contentSectionElement ? parseInt(getComputedStyle(contentSectionElement).marginBottom, 10) : 0;
                      customViewEl.style.height = `${parseInt(leftNav.style.height, 10) + (gtalkButtons ? gtalkButtons.offsetHeight : 0) - contentSectionElementBottomMargin}px`;
                    }
                    _setupSubViews() {
                      browser_asap_default()(async () => {
                        if (!this._eventStream) return;
                        await this.#waitForMainElementSafe();
                        this.#monitorRowListElements();
                        this.#setupContentAndSidebarView();
                        this._setupScrollStream();
                      });
                    }
                    async #waitForMainElementSafe() {
                      try {
                        await (0, wait_for.A)(() => document.querySelector("[role=main]"), 15e3);
                      } catch {
                        this.#driver.getLogger().error(new querySelectorOrFail.a("[role=main]"), {
                          html: extractDocumentHtmlAndCss()
                        });
                      }
                    }
                    #monitorRowListElements() {
                      (0, toItemWithLifetimeStream.A)(this.#page.tree.getAllByTag("rowListElement")).takeUntilBy(this._stopper).onValue((_ref4) => {
                        let {
                          el
                        } = _ref4;
                        this._processRowListElement(el.getValue());
                      });
                    }
                    _processRowListElement(rowListElement) {
                      var rootElement = rowListElement.parentElement;
                      if (!rootElement) throw new Error("no rootElement");
                      var gmailRowListView = new gmail_row_list_view(rootElement, this, this.#driver);
                      this._rowListViews.push(gmailRowListView);
                      this._eventStream.emit({
                        eventName: "newGmailRowListView",
                        view: gmailRowListView
                      });
                    }
                    async #setupContentAndSidebarView() {
                      const parseResult = await this.#waitForThreadContainerSafe();
                      if (this.#destroyed) {
                        return;
                      }
                      if (parseResult?.threadContainerElement) {
                        var gmailThreadView = new gmail_thread_view(parseResult.threadContainerElement, this, this.#driver);
                        this._threadView = gmailThreadView;
                        this._eventStream.emit({
                          eventName: "newGmailThreadView",
                          view: gmailThreadView
                        });
                      } else if (parseResult?.previewPaneContainerElement) {
                        this.#startMonitoringPreviewPaneForThread(parseResult.previewPaneContainerElement);
                      } else {
                      }
                    }
                    async #waitForThreadContainerSafe() {
                      let parseResult = null;
                      try {
                        parseResult = await (0, wait_for.A)(() => {
                          if (this.#destroyed) {
                            return {};
                          }
                          const threadContainerElement = this._getThreadContainerElement();
                          if (threadContainerElement) {
                            return {
                              threadContainerElement
                            };
                          }
                          const previewPaneContainerElement = gmail_element_getter.A.getPreviewPaneContainerElement();
                          if (previewPaneContainerElement) {
                            return {
                              previewPaneContainerElement
                            };
                          }
                          return null;
                        }, 15e3);
                      } catch {
                      }
                      if (parseResult === null) {
                        const viewWithRows = this.#page.tree.getAllByTag("rowListElement").values().size > 0;
                        const readingPaneDisabled = !document.querySelector(".bGI[role=main] .Nu.S3.aZ6");
                        if (viewWithRows && readingPaneDisabled) {
                        } else {
                          const error = new Error("Thread container element wasn't found");
                          if ((0, isStreakAppId.A)(this.#driver.getAppId())) {
                            this.#driver.getLogger().error(error, {
                              html: extractDocumentHtmlAndCss()
                            });
                          }
                        }
                      }
                      return parseResult;
                    }
                    _setupScrollStream() {
                      const SCROLL_DEBOUNCE_MS = 100;
                      const scrollContainer = gmail_element_getter.A.getScrollContainer();
                      const {
                        scrollTop: cachedScrollTop
                      } = this._cachedRouteData;
                      if (scrollContainer && this._hasAddedCollapsibleSection) {
                        if (cachedScrollTop) {
                          scrollContainer.scrollTop = cachedScrollTop;
                        }
                        kefir_esm.fromEvents(scrollContainer, "scroll").throttle(SCROLL_DEBOUNCE_MS).map((e) => e.target.scrollTop).takeUntilBy(this._stopper).onValue((scrollTop) => {
                          this._cachedRouteData.scrollTop = scrollTop;
                        });
                      }
                    }
                    async #startMonitoringPreviewPaneForThread(previewPaneContainer) {
                      let threadContainerElement;
                      const selector = "table.Bs > tr";
                      const selector_2023_11_30 = ".ao9:has(.a98.iY, .apa)";
                      try {
                        threadContainerElement = await (0, wait_for.A)(() => {
                          if (this.#destroyed) {
                            return "destroyed";
                          }
                          const threadContainerElement2 = previewPaneContainer.querySelector(selector);
                          if (threadContainerElement2) {
                            return threadContainerElement2;
                          }
                          return previewPaneContainer.querySelector(selector_2023_11_30);
                        }, 15e3);
                      } catch {
                        const selectorError = new querySelectorOrFail.a(`${selector}, ${selector_2023_11_30}`, {
                          cause: new Error("Thread container for preview pane wasn't found")
                        });
                        if ((0, isStreakAppId.A)(this.#driver.getAppId())) {
                          this.#driver.getLogger().error(selectorError, {
                            html: extractDocumentHtmlAndCss()
                          });
                        }
                        throw selectorError;
                      }
                      if (threadContainerElement === "destroyed") {
                        return;
                      }
                      const elementStream = (0, make_element_child_stream.A)(threadContainerElement).filter((event) => event.el.matches(".a98.iY"));
                      this._eventStream.plug(elementStream.flatMap(makeElementViewStream((element) => new gmail_thread_view(element, this, this.#driver, true))).map((view) => {
                        this._threadView = view;
                        return {
                          eventName: "newGmailThreadView",
                          view
                        };
                      }));
                    }
                    #getSectionsContainer() {
                      return (0, toItemWithLifetimeStream.A)(this.#page.tree.getAllByTag("rowListElementContainer")).takeUntilBy(this._stopper).take(1).map((_ref5) => {
                        let {
                          el
                        } = _ref5;
                        const main = el.getValue();
                        let sectionsContainer = main.querySelector(".inboxsdk__custom_sections");
                        if (!sectionsContainer) {
                          sectionsContainer = document.createElement("div");
                          sectionsContainer.classList.add("inboxsdk__custom_sections");
                          main.insertBefore(sectionsContainer, main.firstChild);
                        } else if (sectionsContainer.classList.contains("Wc") && !this._isSearchRoute()) {
                          sectionsContainer.classList.remove("Wc");
                        }
                        return sectionsContainer;
                      }).toProperty();
                    }
                    _getCustomParams() {
                      var params = /* @__PURE__ */ Object.create(null);
                      if (!this._customRouteID) throw new Error("Should not happen, can't get custom params for non-custom view");
                      this._customRouteID.split("/").slice(1).forEach((part, index) => {
                        if (part[0] !== ":") {
                          return;
                        }
                        part = part.substring(1);
                        if (this._paramsArray[index]) {
                          params[part] = this._paramsArray[index];
                        }
                      });
                      return params;
                    }
                    _getNativeParams() {
                      if (this._isSearchRoute()) {
                        return this._getSearchRouteParams();
                      } else if (this._isListRoute()) {
                        return this._getListRouteParams();
                      } else if (this._isThreadRoute()) {
                        return this._getThreadRouteParams();
                      } else if (this._isSettingsRoute()) {
                        return this._getSettingsRouteParams();
                      }
                      return {};
                    }
                    _isSearchRoute() {
                      return this.getRouteID() === this._gmailRouteProcessor.NativeRouteIDs.SEARCH;
                    }
                    /* FEB 2023 */
                    _isChatWelcomeRoute() {
                      return this._hash === this._gmailRouteProcessor.NativeRouteIDs.CHAT_WELCOME;
                    }
                    _isChatDmRoute() {
                      return this._name === "chat" && this._paramsArray?.[0] === "dm" && !!this._paramsArray?.[1];
                    }
                    _isSpacesWelcomeRoute() {
                      return this._hash === this._gmailRouteProcessor.NativeRouteIDs.SPACES_WELCOME;
                    }
                    _isSpaceRoute() {
                      return this._name === "chat" && this._paramsArray?.[0] === "space" && !!this._paramsArray?.[1];
                    }
                    _isMeetRoute() {
                      return this._hash === this._gmailRouteProcessor.NativeRouteIDs.MEET;
                    }
                    /* end FEB 2023 */
                    getRouteType() {
                      if (includes_default()(["CUSTOM", "OTHER_APP_CUSTOM"], this._type)) {
                        return this._gmailRouteProcessor.RouteTypes.CUSTOM;
                      } else if (this._isListRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.LIST;
                      } else if (this._isThreadRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.THREAD;
                      } else if (this._isSettingsRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.SETTINGS;
                      } else if (this._isChatWelcomeRoute() || this._isChatDmRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.CHAT;
                      } else if (this._isSpacesWelcomeRoute() || this._isSpaceRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.SPACE;
                      } else if (this._isMeetRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.MEET;
                      }
                      return this._gmailRouteProcessor.RouteTypes.UNKNOWN;
                    }
                    _isThreadRoute() {
                      return !!this._getThreadContainerElement();
                    }
                    _isListRoute() {
                      return (this._type === "CUSTOM_LIST" || this._gmailRouteProcessor.isListRouteName(this._name)) && // this case is for when you're on a THREAD route, but the thread renders a list like our thread breaker does
                      !this._isThreadRoute();
                    }
                    _isSettingsRoute() {
                      return this._gmailRouteProcessor.isSettingsRouteName(this._name);
                    }
                    _getSearchRouteParams() {
                      return {
                        query: this._paramsArray[0],
                        includesDriveResults: this._name === "apps",
                        page: this._getPageParam()
                      };
                    }
                    _getListRouteParams() {
                      var params = {
                        page: this._getPageParam()
                      };
                      if (this.getRouteID() === this._gmailRouteProcessor.NativeRouteIDs.LABEL && this._paramsArray[0]) {
                        params.labelName = this._paramsArray[0];
                      }
                      return params;
                    }
                    _getThreadRouteParams() {
                      if (this._paramsArray && this._paramsArray.length > 0) {
                        const threadID2 = last_default()(this._paramsArray);
                        if (threadID2 && (threadID2.length === 16 || //for old hex style
                        threadID2[0] === "#")) {
                          return {
                            threadID: threadID2.replace("#", "")
                          };
                        }
                      }
                      const threadContainerElement = this._getThreadContainerElement();
                      let threadID;
                      if (threadContainerElement) {
                        try {
                          threadID = this.#driver.getPageCommunicator().getCurrentThreadID(threadContainerElement);
                        } catch (err) {
                        }
                      }
                      if (!threadID) {
                        threadID = (0, querystring_es3.parse)(document.location.search, null, null).th || "";
                      }
                      return {
                        threadID
                      };
                    }
                    _getSettingsRouteParams() {
                      return {
                        tabName: this._paramsArray[0]
                      };
                    }
                    _getPageParam() {
                      for (var ii = 1; ii < this._paramsArray.length; ii++) {
                        if (this._paramsArray[ii].match(/p\d+/)) {
                          return parseInt(this._paramsArray[ii].replace(/[a-zA-Z]/, ""), 10);
                        }
                      }
                      return 1;
                    }
                    getRouteID() {
                      if (this._customRouteID) {
                        return this._customRouteID;
                      } else if (this._isThreadRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.THREAD;
                      } else if (this._isChatWelcomeRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.CHAT_WELCOME;
                      } else if (this._isChatDmRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.CHAT_DM;
                      } else if (this._isSpacesWelcomeRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.SPACES_WELCOME;
                      } else if (this._isSpaceRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.SPACE;
                      } else {
                        return this._gmailRouteProcessor.getRouteID(this._name);
                      }
                    }
                    // Used to click gmail refresh button in thread lists
                    refresh() {
                      var el = gmail_element_getter.A.getToolbarElement().querySelector("div.T-I.nu");
                      if (el) {
                        var prevActive = document.activeElement;
                        var prevClassName = el.className;
                        (0, simulate_mouse_event.jp)(el);
                        el.className = prevClassName;
                        if (prevActive) {
                          prevActive.focus();
                        } else {
                          el.blur();
                        }
                      }
                    }
                    /** @deprecated */
                    setFullWidth() {
                    }
                    _extractParamKeysFromRouteID(routeID) {
                      return routeID.split("/").filter((part) => part[0] === ":").map((part) => part.substring(1));
                    }
                    _getThreadContainerElement() {
                      return gmail_element_getter.A.getThreadContainerElement();
                    }
                  }
                  const gmail_route_view = GmailRouteView;
                  var defaults = __webpack_require__3(8278);
                  var defaults_default = /* @__PURE__ */ __webpack_require__3.n(defaults);
                  ;
                  const ancientComplainTime = 2 * 60 * 1e3;
                  const dummyPacket = Object.freeze({
                    destroy: Object.freeze(function() {
                    })
                  });
                  const butter_bar_memberMap = /* @__PURE__ */ new WeakMap();
                  class ButterBar {
                    constructor(appId, driver) {
                      const members = {
                        driver,
                        messagesByKey: /* @__PURE__ */ new Map(),
                        queuedPackets: []
                      };
                      butter_bar_memberMap.set(this, members);
                    }
                    showMessage(options2) {
                      defaults_default()(options2, {
                        priority: 0,
                        time: 15 * 1e3,
                        hideOnViewChanged: true,
                        persistent: false
                      });
                      this.hideMessage(options2.messageKey);
                      const members = (0, get_or_fail.A)(butter_bar_memberMap, this);
                      const butterBarDriver = members.driver.getButterBarDriver();
                      const messageId = Date.now() + "-" + Math.random();
                      {
                        let queue = butterBarDriver.getSharedMessageQueue();
                        queue.unshift({
                          messageId,
                          priority: options2.priority,
                          persistent: options2.persistent
                        });
                        queue = sortBy_default()(queue, (item) => -item.priority);
                        queue = queue.filter((item, i2) => i2 === 0 || item.persistent);
                        butterBarDriver.setSharedMessageQueue(queue);
                        if (!find_default()(queue, (item) => item.messageId === messageId)) {
                          return dummyPacket;
                        }
                      }
                      const stopper = kefir_bus_default()();
                      if (options2.hideOnViewChanged) {
                        stopper.plug(kefir_esm["default"].later(0, null).flatMap(() => members.driver.getRouteViewDriverStream().changes()).map(() => null));
                      }
                      if (isFinite(options2.time)) {
                        stopper.plug(kefir_esm["default"].later(options2.time, null));
                      }
                      const timeoutErr = new Error("Butter bar message timed out");
                      stopper.plug(kefir_esm["default"].later(ancientComplainTime, null).map((x2) => {
                        members.driver.getLogger().errorApp(timeoutErr);
                        return x2;
                      }));
                      stopper.take(1).onValue(() => {
                        if (options2.messageKey) {
                          members.messagesByKey.delete(options2.messageKey);
                        }
                        const queue = butterBarDriver.getSharedMessageQueue();
                        butterBarDriver.setSharedMessageQueue(queue.filter((item) => item.messageId !== messageId));
                      });
                      butterBarDriver.getNoticeAvailableStream().toProperty(() => null).takeUntilBy(stopper).filter(() => {
                        const queue = butterBarDriver.getSharedMessageQueue();
                        if (!queue[0]) stopper.value(void 0);
                        return queue[0] && queue[0].messageId === messageId;
                      }).onValue(() => {
                        const rawHandle = butterBarDriver.showMessage(options2);
                        stopper.take(1).onValue(() => {
                          rawHandle.destroy();
                        });
                      });
                      const message = {
                        destroy() {
                          stopper.value(void 0);
                        }
                      };
                      if (options2.messageKey) {
                        members.messagesByKey.set(options2.messageKey, message);
                      }
                      return message;
                    }
                    showLoading() {
                      let options2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      defaults_default()(options2, {
                        text: "Loading...",
                        priority: -3,
                        time: Infinity,
                        persistent: true,
                        hideOnViewChanged: true
                      });
                      options2.time = Infinity;
                      return this.showMessage(options2);
                    }
                    showError(options2) {
                      defaults_default()(options2, {
                        priority: 100,
                        className: "inboxsdk__butterbar_error"
                      });
                      return this.showMessage(options2);
                    }
                    showSaving() {
                      let options2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      defaults_default()(options2, {
                        text: "Saving...",
                        confirmationText: "Saved",
                        confirmationTime: 1 * 1e3,
                        priority: -2,
                        time: Infinity,
                        persistent: true,
                        hideOnViewChanged: false,
                        showConfirmation: true
                      });
                      const savingMessage = this.showMessage(options2);
                      const deferred = defer();
                      deferred.promise.then(() => {
                        savingMessage.destroy();
                        if (options2.showConfirmation) {
                          this.showMessage({
                            text: options2.confirmationText,
                            messageKey: options2.messageKey,
                            time: options2.confirmationTime,
                            priority: 200
                          });
                        }
                      }, () => {
                        savingMessage.destroy();
                      });
                      return deferred;
                    }
                    hideMessage(messageKey) {
                      if (messageKey) {
                        const members = (0, get_or_fail.A)(butter_bar_memberMap, this);
                        const message = members.messagesByKey.get(messageKey);
                        if (message) {
                          message.destroy();
                        }
                      }
                    }
                    hideGmailMessage() {
                      const members = (0, get_or_fail.A)(butter_bar_memberMap, this);
                      const butterBarDriver = members.driver.getButterBarDriver();
                      butterBarDriver.hideGmailMessage();
                    }
                  }
                  var compose = __webpack_require__3(1140);
                  var keyboard = __webpack_require__3(1351);
                  ;
                  class ModalView extends safe_event_emitter.A {
                    destroyed = false;
                    constructor(options2) {
                      super();
                      this._driver = options2.driver;
                      this._modalViewDriver = options2.modalViewDriver;
                      options2.modalViewDriver.getEventStream().filter((event) => event.eventName === "closeClick").onValue(() => {
                        this.close();
                      });
                      options2.modalViewDriver.getEventStream().onEnd(() => {
                        this._modalViewDriver = null;
                        this.destroyed = true;
                        _handleModalStackOnModalDestroy(this);
                        this.emit("destroy");
                      });
                    }
                    show() {
                      const modalViewDriver = this._modalViewDriver;
                      if (!modalViewDriver) {
                        throw new Error("Modal can not be shown after being hidden");
                      }
                      const hideAndDestroyStream = kefir_esm["default"].merge([kefir_esm["default"].fromEvents(this, "destroy"), hideStream.filter((modalView) => modalView === this)]);
                      document.body.appendChild(modalViewDriver.getModalContainerElement());
                      modalViewDriver.getModalContainerElement().focus();
                      kefir_esm["default"].fromEvents(document.body, "keydown").filter((domEvent) => domEvent.keyCode === 27).takeUntilBy(hideAndDestroyStream).onValue((domEvent) => {
                        domEvent.stopImmediatePropagation();
                        domEvent.stopPropagation();
                        domEvent.preventDefault();
                        this.close();
                      });
                      _replaceCurrentlyShowingModal(this, modalViewDriver);
                    }
                    setTitle(title) {
                      if (!this._modalViewDriver) {
                        throw new Error("Modal can not be shown after being hidden");
                      }
                      this._modalViewDriver.setTitle(title);
                    }
                    close() {
                      if (this._modalViewDriver) {
                        this._modalViewDriver.destroy();
                      }
                    }
                    addButton() {
                      throw new Error("not implemented");
                    }
                  }
                  let activeBackdrop = null;
                  let currentlyShowingModal = null;
                  const hideStream = kefir_bus_default()();
                  const hiddenModalStack = [];
                  function _handleModalStackOnModalDestroy(modalView) {
                    if (currentlyShowingModal && currentlyShowingModal.modalView === modalView) {
                      currentlyShowingModal = null;
                      if (hiddenModalStack.length > 0) {
                        hiddenModalStack.pop().show();
                      } else {
                        if (activeBackdrop) {
                          activeBackdrop.destroy();
                        }
                      }
                    } else if (hiddenModalStack.indexOf(modalView) > -1) {
                      hiddenModalStack.splice(hiddenModalStack.indexOf(modalView), 1);
                    }
                  }
                  function _replaceCurrentlyShowingModal(modalView, modalViewDriver) {
                    if (currentlyShowingModal) {
                      hideStream.emit(currentlyShowingModal.modalView);
                      hiddenModalStack.push(currentlyShowingModal.modalView);
                      currentlyShowingModal.modalViewDriver.getModalContainerElement().remove();
                    } else {
                      if (!activeBackdrop) {
                        activeBackdrop = modalView._driver.createBackdrop(502);
                        activeBackdrop.getStopper().onValue(() => {
                          activeBackdrop = null;
                          hiddenModalStack.slice().forEach((modalView2) => {
                            modalView2.close();
                          });
                          if (currentlyShowingModal) {
                            currentlyShowingModal.modalView.close();
                          }
                        });
                      }
                    }
                    currentlyShowingModal = {
                      modalView,
                      modalViewDriver
                    };
                  }
                  const modal_view = ModalView;
                  ;
                  const mole_view_memberMap = /* @__PURE__ */ new WeakMap();
                  class MoleView extends safe_event_emitter.A {
                    destroyed = false;
                    constructor(options2) {
                      super();
                      const members = {
                        driver: options2.moleViewDriver
                      };
                      mole_view_memberMap.set(this, members);
                      members.driver.getEventStream().onValue((e) => {
                        this.emit(e.eventName);
                      });
                      members.driver.getEventStream().onEnd(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                      });
                    }
                    close() {
                      const members = (0, get_or_fail.A)(mole_view_memberMap, this);
                      members.driver.destroy();
                    }
                    setTitle(text) {
                      const members = (0, get_or_fail.A)(mole_view_memberMap, this);
                      members.driver.setTitle(text);
                    }
                    setMinimized(minimized) {
                      const members = (0, get_or_fail.A)(mole_view_memberMap, this);
                      members.driver.setMinimized(minimized);
                    }
                    getMinimized() {
                      const members = (0, get_or_fail.A)(mole_view_memberMap, this);
                      return members.driver.getMinimized();
                    }
                  }
                  ;
                  class DrawerView extends safe_event_emitter.A {
                    destroyed = false;
                    constructor(drawerViewDriver) {
                      super();
                      this._driver = drawerViewDriver;
                      this._driver.getSlideAnimationDone().onValue(() => {
                        this.emit("slideAnimationDone");
                      });
                      this._driver.getClosingStream().onValue(() => {
                        this.emit("closing");
                      });
                      this._driver.getClosedStream().onValue(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                      });
                      this._driver.getPreAutoCloseStream().onValue((event) => {
                        this.emit("preautoclose", event);
                      });
                      document.dispatchEvent(new CustomEvent("inboxSDKcloseDrawers", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      kefir_esm["default"].fromEvents(document, "inboxSDKcloseDrawers").takeUntilBy(kefir_esm["default"].fromEvents(this, "closing")).onValue(() => {
                        this.close();
                      });
                    }
                    close() {
                      this._driver.close();
                    }
                    associateComposeView(composeView, closeWithCompose) {
                      if (!(composeView instanceof compose_view.A)) throw new Error("argument was not a ComposeView");
                      this._driver.associateComposeView(composeView, closeWithCompose);
                    }
                    disassociateComposeView() {
                      this._driver.disassociateComposeView();
                    }
                  }
                  const drawer_view = DrawerView;
                  ;
                  const top_message_bar_view_memberMap = /* @__PURE__ */ new WeakMap();
                  class TopMessageBarView extends safe_event_emitter.A {
                    constructor(options2) {
                      super();
                      const members = {
                        driver: options2.topMessageBarViewDriver
                      };
                      top_message_bar_view_memberMap.set(this, members);
                    }
                    remove() {
                      (0, get_or_fail.A)(top_message_bar_view_memberMap, this).driver.remove();
                    }
                  }
                  ;
                  function isGmailRuleForTitlebarWideIcons() {
                    return !![...document.styleSheets].find((s) => {
                      try {
                        if (s.cssRules) {
                          return [...s.cssRules].find((rule) => rule instanceof CSSStyleRule && rule.selectorText === ".Hl" && rule.style.width === "24px");
                        }
                      } catch (e) {
                      }
                      return false;
                    });
                  }
                  const isComposeTitleBarLightColor = once_default()(() => {
                    return !isGmailRuleForTitlebarWideIcons();
                  });
                  const is_compose_titlebar_light_color = isComposeTitleBarLightColor;
                  ;
                  class Widgets {
                    constructor(appId, driver) {
                      const members = {
                        driver
                      };
                      widgets_memberMap.set(this, members);
                    }
                    showModalView(options2) {
                      if (options2.buttons) {
                        options2.buttons = options2.buttons.map((button) => {
                          if (button.onClick) {
                            const appOnClick = button.onClick;
                            return {
                              ...button,
                              onClick() {
                                appOnClick({
                                  modalView
                                });
                              }
                            };
                          }
                          return button;
                        });
                      }
                      const {
                        driver
                      } = (0, get_or_fail.A)(widgets_memberMap, this);
                      const modalViewDriver = driver.createModalViewDriver(options2);
                      const modalView = new modal_view({
                        driver,
                        modalViewDriver
                      });
                      modalView.show();
                      return modalView;
                    }
                    showMoleView(options2) {
                      const moleViewDriver = (0, get_or_fail.A)(widgets_memberMap, this).driver.createMoleViewDriver(options2);
                      const moleView = new MoleView({
                        moleViewDriver
                      });
                      moleViewDriver.show();
                      return moleView;
                    }
                    showTopMessageBarView(options2) {
                      const topMessageBarViewDriver = (0, get_or_fail.A)(widgets_memberMap, this).driver.createTopMessageBarDriver(kefir_cast_default()(kefir_esm["default"], options2));
                      return new TopMessageBarView({
                        topMessageBarViewDriver
                      });
                    }
                    showDrawerView(options2) {
                      (0, get_or_fail.A)(widgets_memberMap, this).driver.getLogger().eventSdkActive("Widgets.showDrawerView used", {
                        keys: Object.keys(options2)
                      });
                      if (options2.composeView && !(options2.composeView instanceof compose_view.A)) throw new Error("composeView option was not a ComposeView");
                      const drawerViewDriver = (0, get_or_fail.A)(widgets_memberMap, this).driver.createDrawerViewDriver(options2);
                      return new drawer_view(drawerViewDriver);
                    }
                    isMoleViewTitleBarLightColor() {
                      return is_compose_titlebar_light_color();
                    }
                  }
                  const widgets_memberMap = /* @__PURE__ */ new Map();
                  const widgets = Widgets;
                  ;
                  class Modal {
                    #driver;
                    #piOpts;
                    constructor(appId, driver, piOpts) {
                      this.#driver = driver;
                      this.#piOpts = piOpts;
                    }
                    /**
                     * @deprecated use Widgets.showModalView
                     */
                    show(options2) {
                      const driver = this.#driver;
                      if (this.#piOpts.REQUESTED_API_VERSION < 2) {
                        driver.getLogger().deprecationWarning("Modal.show", "Widgets.showModalView");
                      }
                      const modalViewDriver = driver.createModalViewDriver(options2);
                      const modalView = new modal_view({
                        driver,
                        modalViewDriver
                      });
                      modalView.show();
                      return modalView;
                    }
                    // Deprecated, does not have an exact replacement. Use Widgets.showModalView.
                    createModalView(options2) {
                      const driver = this.#driver;
                      driver.getLogger().deprecationWarning("Modal.createModalView", "Widgets.showModalView");
                      const modalViewDriver = driver.createModalViewDriver(options2);
                      return new modal_view({
                        driver,
                        modalViewDriver
                      });
                    }
                  }
                  const modal = Modal;
                  ;
                  const lists_memberMap = /* @__PURE__ */ new WeakMap();
                  class Lists {
                    ActionButtonTypes = ActionButtonTypes;
                    constructor(appId, driver, membrane) {
                      const members = {
                        appId,
                        driver,
                        membrane,
                        threadRowViewRegistry: new handler_registry.A()
                      };
                      lists_memberMap.set(this, members);
                      driver.getStopper().onValue(() => {
                        members.threadRowViewRegistry.dumpHandlers();
                      });
                      members.driver.getThreadRowViewDriverStream().onValue((viewDriver) => {
                        const view = membrane.get(viewDriver);
                        members.threadRowViewRegistry.addTarget(view);
                      });
                    }
                    registerThreadRowViewHandler(handler) {
                      return (0, get_or_fail.A)(lists_memberMap, this).threadRowViewRegistry.registerHandler(handler);
                    }
                    getSelectedThreadRowViews() {
                      const members = (0, get_or_fail.A)(lists_memberMap, this);
                      const threadRowViewDrivers = members.driver.getSelectedThreadRowViewDrivers();
                      const threadRowViews = threadRowViewDrivers.map((d) => members.membrane.get(d));
                      return threadRowViews;
                    }
                    registerThreadRowViewSelectionHandler(handler) {
                      const members = (0, get_or_fail.A)(lists_memberMap, this);
                      return members.driver.registerThreadRowViewSelectionHandler(handler);
                    }
                  }
                  const ActionButtonTypes = Object.freeze({
                    LINK: "LINK",
                    DROPDOWN: "DROPDOWN",
                    ACTION: "ACTION"
                  });
                  var isEqual = __webpack_require__3(1470);
                  var isEqual_default = /* @__PURE__ */ __webpack_require__3.n(isEqual);
                  ;
                  const navItemTypes = Object.freeze({
                    /**
                     * standard nav item for navigating
                     */
                    NAVIGATION: "NAVIGATION",
                    /**
                     * nav item that looks like a link
                     */
                    LINK: "LINK",
                    /**
                     * nav item for logical grouping. In Gmailv2, the entire nav item can be clicked to expand/collapse its children
                     * and it ignores all NavItemDescriptor options other than `name` and `subtitle`.
                     * Behaves identically to NAVIGATION when in Gmailv1.
                     */
                    GROUPER: "GROUPER",
                    /** Old alias for LINK */
                    MANAGE: "MANAGE",
                    SECTION: "SECTION"
                  });
                  const nav_item_types = navItemTypes;
                  ;
                  class NavItemView extends safe_event_emitter.A {
                    #appId;
                    #driver;
                    #navItemDescriptorPropertyStream;
                    #navItemViews = [];
                    #navItemViewDriver = null;
                    #navItemViewDriverPromise;
                    destroyed = false;
                    constructor(appId, driver, navItemDescriptorPropertyStream, navItemViewDriverPromise) {
                      super();
                      this.#appId = appId;
                      this.#driver = driver;
                      this.#navItemDescriptorPropertyStream = navItemDescriptorPropertyStream;
                      this.#navItemViewDriverPromise = navItemViewDriverPromise;
                      driver.getStopper().onValue(this.remove.bind(this));
                      navItemViewDriverPromise.then((navItemViewDriver) => {
                        if (this.destroyed || !navItemViewDriver) {
                          return;
                        }
                        const driver2 = this.#driver;
                        this.#navItemViewDriver = navItemViewDriver;
                        this.#navItemDescriptorPropertyStream.sampledBy(navItemViewDriver.getEventStream(), (a, b) => [a, b]).onValue((navItemDescriptor) => this.#handleViewDriverStreamEvent(navItemViewDriver, navItemDescriptor));
                        kefir_esm["default"].combine([this.#navItemDescriptorPropertyStream, driver2.getRouteViewDriverStream()]).takeUntilBy(navItemViewDriver.getEventStream().filter(() => false).beforeEnd(() => null)).onValue((x2) => {
                          _handleRouteViewChange(navItemViewDriver, x2);
                        });
                        this.emit("inserted");
                      });
                    }
                    addNavItem(navItemDescriptor) {
                      if (this.destroyed) throw new Error("this nav item view does not exist");
                      const driver = this.#driver;
                      const appId = this.#appId;
                      const navItemViews = this.#navItemViews;
                      const navItemDescriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], navItemDescriptor).toProperty();
                      const childNavItemView = new NavItemView(appId, driver, navItemDescriptorPropertyStream, this.#navItemViewDriverPromise.then((navItemViewDriver) => {
                        const childNavItemViewDriver = navItemViewDriver.addNavItem(this.#appId, navItemDescriptorPropertyStream);
                        return childNavItemViewDriver;
                      }));
                      navItemViews.push(childNavItemView);
                      return childNavItemView;
                    }
                    remove() {
                      if (this.destroyed) {
                        return;
                      }
                      const navItemViews = this.#navItemViews;
                      this.destroyed = true;
                      this.emit("destroy");
                      navItemViews.forEach(function(navItemView) {
                        navItemView.remove();
                      });
                      this.#navItemViewDriverPromise.then((navItemViewDriver) => {
                        navItemViewDriver.destroy();
                      });
                    }
                    isCollapsed() {
                      const navItemViewDriver = this.#navItemViewDriver;
                      if (navItemViewDriver) {
                        return navItemViewDriver.isCollapsed();
                      } else {
                        return false;
                      }
                    }
                    setCollapsed(collapseValue) {
                      this.#navItemViewDriverPromise.then((navItemViewDriver) => {
                        navItemViewDriver.setCollapsed(collapseValue);
                      });
                    }
                    getElement() {
                      return this.#navItemViewDriverPromise.then((navItemViewDriver) => navItemViewDriver.getElement());
                    }
                    #handleViewDriverStreamEvent(navItemViewDriver, _ref) {
                      let [navItemDescriptor, event] = _ref;
                      switch (event.eventName) {
                        case "click":
                          if (navItemDescriptor.type === nav_item_types.GROUPER) return;
                          if (typeof navItemDescriptor.onClick === "function") {
                            let defaultPrevented = false;
                            const syntheticEvent = {
                              preventDefault() {
                                defaultPrevented = true;
                              }
                            };
                            navItemDescriptor.onClick(syntheticEvent);
                            if (defaultPrevented) {
                              break;
                            }
                          }
                          if (navItemDescriptor.routeID) {
                            this.#driver.goto(navItemDescriptor.routeID, navItemDescriptor.routeParams);
                          } else {
                            navItemViewDriver.toggleCollapse();
                          }
                          break;
                        case "expanded":
                        case "collapsed":
                          this.emit(event.eventName);
                          break;
                      }
                    }
                  }
                  function _handleRouteViewChange(navItemViewDriver, _ref2) {
                    let [navItemDescriptor, routeViewDriver] = _ref2;
                    let isActive = false;
                    if (navItemDescriptor) {
                      const routesToCheck = [{
                        routeID: navItemDescriptor.routeID,
                        routeParams: navItemDescriptor.routeParams
                      }, ...navItemDescriptor.secondaryRoutes || []];
                      isActive = routesToCheck.some((route) => routeViewDriver.getRouteID() === route.routeID && isEqual_default()(routeViewDriver.getParams(), route.routeParams || {}));
                    }
                    navItemViewDriver.setActive(isActive);
                  }
                  ;
                  const native_nav_item_view_memberMap = /* @__PURE__ */ new WeakMap();
                  class NativeNavItemView extends safe_event_emitter.A {
                    constructor(appId, driver, labelName, navItemViewDriverPromise) {
                      super();
                      const members = {
                        appId,
                        driver,
                        labelName,
                        navItemViews: [],
                        navItemViewDriver: null,
                        navItemViewDriverPromise
                      };
                      native_nav_item_view_memberMap.set(this, members);
                      navItemViewDriverPromise.then((navItemViewDriver) => {
                        if (!navItemViewDriver) {
                          return;
                        }
                        members.navItemViewDriver = navItemViewDriver;
                        navItemViewDriver.getEventStream().onValue((event) => _handleStreamEvent(this, event));
                        this.emit("inserted");
                      });
                    }
                    addNavItem(navItemDescriptor) {
                      const members = (0, get_or_fail.A)(native_nav_item_view_memberMap, this);
                      const navItemDescriptorPropertyStream = kefir_cast_default()(kefir_esm, navItemDescriptor).toProperty();
                      const childNavItemView = new NavItemView(members.appId, members.driver, navItemDescriptorPropertyStream, members.navItemViewDriverPromise.then((navItemViewDriver) => {
                        const childNavItemViewDriver = navItemViewDriver.addNavItem(members.appId, navItemDescriptorPropertyStream);
                        return childNavItemViewDriver;
                      }));
                      members.navItemViews.push(childNavItemView);
                      return childNavItemView;
                    }
                    isCollapsed() {
                      return localStorage.getItem("inboxsdk__nativeNavItem__state_" + (0, get_or_fail.A)(native_nav_item_view_memberMap, this).labelName) === "collapsed";
                    }
                    setCollapsed(collapseValue) {
                      const members = (0, get_or_fail.A)(native_nav_item_view_memberMap, this);
                      if (members.navItemViewDriver) {
                        members.navItemViewDriver.setCollapsed(collapseValue);
                      } else {
                        localStorage.setItem("inboxsdk__nativeNavItem__state_" + members.labelName, collapseValue ? "collapsed" : "expanded");
                      }
                    }
                  }
                  function _handleStreamEvent(emitter, event) {
                    switch (event.eventName) {
                      case "expanded":
                      case "collapsed":
                        emitter.emit(event.eventName);
                        break;
                    }
                  }
                  ;
                  const nav_menu_memberMap = /* @__PURE__ */ new WeakMap();
                  class NavMenu {
                    NavItemTypes = nav_item_types;
                    constructor(appId, driver) {
                      const members = {
                        appId,
                        driver,
                        navItemViews: []
                      };
                      nav_menu_memberMap.set(this, members);
                      this.SENT_MAIL = _setupSentMail(appId, driver);
                    }
                    addNavItem(navItemDescriptor) {
                      const members = (0, get_or_fail.A)(nav_menu_memberMap, this);
                      const navItemDescriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], navItemDescriptor).toProperty();
                      const navItemView = new NavItemView(members.appId, members.driver, navItemDescriptorPropertyStream, members.driver.addNavItem(members.appId, navItemDescriptorPropertyStream));
                      members.navItemViews.push(navItemView);
                      return navItemView;
                    }
                    // TODO: this doesn't seem to be used.
                    static SENT_MAIL = null;
                  }
                  function _setupSentMail(appId, driver) {
                    const nativeNavItemView = new NativeNavItemView(appId, driver, "sent", driver.getSentMailNativeNavItem());
                    return nativeNavItemView;
                  }
                  var classnames = __webpack_require__3(5755);
                  var classnames_default = /* @__PURE__ */ __webpack_require__3.n(classnames);
                  var events = __webpack_require__3(4785);
                  ;
                  const RGB_REGEX = /^rgba?\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*(,\s*(0\.)?\d+)?\)/;
                  function getDensity() {
                    const navItemElement = document.querySelector(".aim");
                    if (!navItemElement) {
                      lib_logger.A.error(new Error("Failed to find a nav item element"));
                      return "default";
                    }
                    const rect = navItemElement.getBoundingClientRect();
                    return rect?.height === 24 ? "compact" : "default";
                  }
                  const navItemSelector = ".aio";
                  function getNavItem() {
                    return document.querySelector(navItemSelector);
                  }
                  async function checkForDarkThemeSafe() {
                    try {
                      await (0, wait_for.A)(() => getNavItem());
                    } catch (e) {
                      if (e instanceof wait_for.D) {
                        return null;
                      }
                      throw e;
                    }
                    return isFrameDarkTheme();
                  }
                  function extractRgbColor(colorString) {
                    const match = RGB_REGEX.exec(colorString);
                    if (!match) {
                      lib_logger.A.error(new Error("Failed to read color string"), {
                        colorString
                      });
                      return;
                    }
                    return {
                      r: +match[1],
                      g: +match[2],
                      b: +match[3]
                    };
                  }
                  function isFrameDarkTheme() {
                    const navItem = getNavItem();
                    if (!navItem) {
                      lib_logger.A.error(new Error("Failed to find nav item"));
                      return false;
                    }
                    const colorString = getComputedStyle(navItem).getPropertyValue("color");
                    const {
                      r
                    } = extractRgbColor(colorString) ?? {};
                    if (r === void 0) {
                      return false;
                    }
                    return r > 128;
                  }
                  function isBodyDarkTheme() {
                    const bodyEl = document.querySelector(".bkK > .nH");
                    if (!bodyEl) {
                      return false;
                    }
                    const bgColor = getComputedStyle(bodyEl).backgroundColor;
                    const {
                      r
                    } = extractRgbColor(bgColor) ?? {};
                    if (r != null) {
                      return r < 128;
                    }
                    return false;
                  }
                  const stylesStream = kefir_bus_default()();
                  async function trackGmailStyles() {
                    if (document.head.hasAttribute("data-inboxsdk-gmail-style-tracker") || gmail_element_getter.A.isStandalone()) {
                      return;
                    }
                    document.head.setAttribute("data-inboxsdk-gmail-style-tracker", "true");
                    let currentDensity = null;
                    let currentDarkTheme = null;
                    function checkStyles() {
                      const newDensity = getDensity();
                      if (currentDensity !== newDensity) {
                        if (currentDensity) {
                          document.body.classList.remove("inboxsdk__gmail_density_" + currentDensity);
                        }
                        currentDensity = newDensity;
                        document.body.classList.add("inboxsdk__gmail_density_" + currentDensity);
                      }
                      const newDarkTheme = isFrameDarkTheme();
                      if (currentDarkTheme !== newDarkTheme) {
                        currentDarkTheme = newDarkTheme;
                        if (currentDarkTheme) {
                          document.body.classList.add("inboxsdk__gmail_dark_theme");
                        } else {
                          document.body.classList.remove("inboxsdk__gmail_dark_theme");
                        }
                      }
                      const newBodyDarkTheme = isBodyDarkTheme();
                      if (newBodyDarkTheme) {
                        document.body.classList.add("inboxsdk__gmail_dark_body_theme");
                      } else {
                        document.body.classList.remove("inboxsdk__gmail_dark_body_theme");
                      }
                      stylesStream.emit({
                        type: "theme",
                        isDarkMode: {
                          frame: currentDarkTheme,
                          body: newBodyDarkTheme
                        }
                      });
                    }
                    try {
                      await (0, wait_for.A)(() => document.querySelector(".TO .TN") && document.querySelector(navItemSelector));
                    } catch (err) {
                      lib_logger.A.error(err);
                      return;
                    }
                    const observer = new MutationObserver(checkStyles);
                    const options2 = {
                      characterData: true,
                      childList: true
                    };
                    for (const sheet of document.styleSheets) {
                      if (!(sheet.ownerNode instanceof Element)) {
                        continue;
                      }
                      if (sheet.ownerNode.tagName == "STYLE") {
                        observer.observe(sheet.ownerNode, options2);
                      }
                    }
                    checkStyles();
                  }
                  var fast_deep_equal = __webpack_require__3(5215);
                  var fast_deep_equal_default = /* @__PURE__ */ __webpack_require__3.n(fast_deep_equal);
                  ;
                  const NATIVE_CLASS = "Xa";
                  const INBOXSDK_CLASS = "inboxsdk__appMenuItem";
                  const ELEMENT_CLASS = `${NATIVE_CLASS} ${INBOXSDK_CLASS}`;
                  const ICON_ELEMENT_CLASS = "V6 CL";
                  const HEADING_ELEMENT_CLASS = "apW";
                  const ICON_ELEMENT_SELECTOR = ".V6.CL";
                  const HEADING_ELEMENT_SELECTOR = ".apW";
                  class GmailAppMenuItemView extends events.EventEmitter {
                    static elementCss = {
                      HOVER: "aIk",
                      ACTIVE: "apV",
                      SDK_ACTIVE: "inboxsdk__appMenuItem_active"
                    };
                    #menuItemDescriptor;
                    #element;
                    #destroyed = false;
                    #driver;
                    get element() {
                      return this.#element;
                    }
                    set menuItemDescriptor(newMenuItemDescriptor) {
                      this.#menuItemDescriptor = newMenuItemDescriptor;
                      this.#update();
                    }
                    get menuItemDescriptor() {
                      return this.#menuItemDescriptor;
                    }
                    constructor(driver, menuItemDescriptor) {
                      super();
                      this.#element = this.#setupElement();
                      this.#driver = driver;
                      this.#menuItemDescriptor = menuItemDescriptor;
                      this.#update();
                      stylesStream.skipDuplicates((a, b) => fast_deep_equal_default()(a, b)).onValue((_ref) => {
                        let {
                          type
                        } = _ref;
                        if (type === "theme") {
                          this.#update();
                        }
                      });
                      driver.getStopper().onValue(() => this.remove());
                      this.#element.addEventListener("click", (e) => this.#onClick(e));
                      this.#element.addEventListener("mouseleave", this.#onBlur);
                      (0, querySelectorOrFail.A)(this.#element, ICON_ELEMENT_SELECTOR).addEventListener("mouseenter", this.#onHover);
                    }
                    remove() {
                      if (this.#destroyed) return;
                      this.#destroyed = true;
                      this.element?.remove();
                      this.emit("destroy");
                    }
                    #setupElement() {
                      const element = document.createElement("div");
                      element.className = ELEMENT_CLASS;
                      element.innerHTML = `
      <div class="${ICON_ELEMENT_CLASS}" aria-label="" role="link" tabindex="-1"></div>
      <div class="${HEADING_ELEMENT_CLASS}" role="heading" aria-level="2"></div>
    `.trim();
                      return element;
                    }
                    #update() {
                      const element = this.element;
                      if (!element) return;
                      const existingClassNames = Object.values(GmailAppMenuItemView.elementCss).filter((className) => element.classList.contains(className));
                      element.className = classnames_default()(ELEMENT_CLASS, this.#menuItemDescriptor?.className, ...existingClassNames);
                      this.#updateName(element);
                      this.#updateIcon(element);
                      this.#updateARIA(element);
                    }
                    #updateName(element) {
                      const headingElement = (0, querySelectorOrFail.A)(element, HEADING_ELEMENT_SELECTOR);
                      headingElement.textContent = this.#menuItemDescriptor?.name ?? "";
                    }
                    static #preloadedIcons = /* @__PURE__ */ new Set();
                    #updateIcon(element) {
                      const iconContainerEl = (0, querySelectorOrFail.A)(element, ICON_ELEMENT_SELECTOR);
                      const {
                        iconUrl,
                        iconClassName
                      } = this.#menuItemDescriptor ?? {};
                      if (iconUrl) {
                        const rawTheme = gmail_element_getter.A.isDarkTheme() ? iconUrl.darkTheme : iconUrl.lightTheme;
                        if (!rawTheme) return;
                        const theme = typeof rawTheme === "string" ? rawTheme : rawTheme.default;
                        const activeImg = typeof rawTheme === "string" ? rawTheme : rawTheme.active;
                        for (const url of [theme, activeImg]) {
                          if (GmailAppMenuItemView.#preloadedIcons.has(url)) continue;
                          GmailAppMenuItemView.#preloadedIcons.add(url);
                          var link = document.createElement("link");
                          link.rel = "preload";
                          link.as = "image";
                          link.href = url;
                          document.head.appendChild(link);
                        }
                        iconContainerEl.style.setProperty("--background-image", `url(${theme})`);
                        iconContainerEl.style.setProperty("--background-image--active", `url(${activeImg})`);
                      }
                      iconContainerEl.className = classnames_default()(ICON_ELEMENT_CLASS, iconClassName);
                    }
                    #updateARIA(element) {
                      const iconContainerEl = (0, querySelectorOrFail.A)(element, ICON_ELEMENT_SELECTOR);
                      iconContainerEl.setAttribute("aria-label", this.#menuItemDescriptor?.name ?? "");
                    }
                    #onClick(e) {
                      this.emit("click", e);
                      this.#menuItemDescriptor?.onClick?.(e);
                      if (this.#menuItemDescriptor?.routeID) {
                        this.#driver.goto(this.#menuItemDescriptor.routeID, this.#menuItemDescriptor.routeParams);
                      }
                    }
                    #onBlur = (e) => {
                      this.emit("blur", e);
                    };
                    #onHover = (e) => {
                      this.emit("hover", e);
                      this.#menuItemDescriptor?.onHover?.(e);
                    };
                  }
                  ;
                  const collapsible_panel_view_NATIVE_CLASS = "aqn";
                  const collapsible_panel_view_INBOXSDK_CLASS = "inboxsdk__collapsiblePanel";
                  const collapsible_panel_view_ELEMENT_CLASS = `${collapsible_panel_view_NATIVE_CLASS} ${collapsible_panel_view_INBOXSDK_CLASS} oy8Mbf`;
                  const PANEL_NAV_ITEMS_CONTAINER_CLASS = "inboxsdk__collapsiblePanel_navItems";
                  const PRIMARY_BUTTON_ELEMENT_CLASS = "T-I T-I-KE L3";
                  const PRIMARY_BUTTON_ELEMENT_SELECTOR = ".T-I.T-I-KE.L3";
                  const scrollablePanelClass = "at9";
                  const scrollablePanelSelector = `.${scrollablePanelClass}`;
                  const loadingElementClass = "inboxsdk__collapsiblePanel_loading_container";
                  const panelLoadingClass = `${loadingElementClass}--active`;
                  const loadingElementSelector = `.${loadingElementClass}`;
                  const panelNavItemsContainerSelector = `.${PANEL_NAV_ITEMS_CONTAINER_CLASS}`;
                  class CollapsiblePanelView extends safe_event_emitter.A {
                    static elementSelectors = {
                      /** Custom elements match this selector as well. */
                      NATIVE: ".aqn.oy8Mbf",
                      CUSTOM: ".inboxsdk__collapsiblePanel"
                    };
                    static elementCss = {
                      ACTIVE: "apV",
                      COLLAPSED: "aBA",
                      /** A hover popover has both ACTIVE _and_ HOVER */
                      HOVER: "aJu",
                      COLLAPSED_HOVER: "bym",
                      PANEL_LESS: "a3W",
                      TOGGLE_OPEN_STATE: "aak",
                      SDK_ACTIVE: "inboxsdk__collapsiblePanel_active"
                    };
                    #panelDescriptor;
                    #element;
                    #destroyed = false;
                    #id = Math.random().toFixed(3);
                    #driver;
                    #loading;
                    #orderGroup = `collapsible-panel-${this.#id}-nav-item`;
                    get loading() {
                      return this.#loading;
                    }
                    /**
                     * Updates the loading property of the CollapsiblePanelView.
                     */
                    setLoading(loading) {
                      const changed = this.#loading !== loading;
                      this.#loading = loading;
                      if (changed) {
                        this.#update();
                      }
                    }
                    get panelDescriptor() {
                      return this.#panelDescriptor;
                    }
                    set panelDescriptor(panelDescriptor) {
                      this.#panelDescriptor = panelDescriptor;
                      this.#update();
                    }
                    get element() {
                      return this.#element;
                    }
                    get scrollablePaneElement() {
                      return this.element.querySelector(scrollablePanelSelector);
                    }
                    constructor(driver, panelDescriptor) {
                      super();
                      this.#driver = driver;
                      this.#panelDescriptor = panelDescriptor;
                      this.#loading = panelDescriptor.loadingIcon != null;
                      this.#element = this.#setupElement();
                      this.#element.addEventListener("mouseleave", (e) => {
                        this.emit("blur", e);
                      });
                      stylesStream.skipDuplicates((a, b) => fast_deep_equal_default()(a, b)).onValue((_ref) => {
                        let {
                          type
                        } = _ref;
                        if (type === "theme") {
                          this.#update();
                        }
                      });
                    }
                    /**
                     * Remove this CollapsiblePanelView from its parent
                     */
                    remove() {
                      if (this.#destroyed) return;
                      this.#destroyed = true;
                      this.element.remove();
                      this.emit("destroy");
                    }
                    /**
                     * @param navItemDescriptor Add a single or Kefir.Observable nav menu item to the CollapsiblePanel.
                     */
                    addNavItem(navItemDescriptor) {
                      this.setLoading(false);
                      const {
                        element
                      } = this;
                      const orderGroup = this.#orderGroup;
                      const navItemDescriptorPropertyStream = kefir_cast_default()(kefir_esm, navItemDescriptor).toProperty();
                      const gmailNavItemView = this.#driver.addNavItemToPanel(orderGroup, navItemDescriptorPropertyStream, element);
                      const navItemView = new NavItemView(orderGroup, this.#driver, navItemDescriptorPropertyStream, gmailNavItemView);
                      return navItemView;
                    }
                    #extractPrimaryButtonTheme() {
                      const {
                        iconUrl
                      } = this.panelDescriptor.primaryButton ?? {};
                      if (!iconUrl) {
                        return;
                      }
                      const theme = gmail_element_getter.A.isDarkTheme() ? iconUrl.darkTheme : iconUrl.lightTheme;
                      if (!theme) {
                        return;
                      }
                      if (typeof theme === "string") {
                        return {
                          panelHovered: theme,
                          panelDefault: theme
                        };
                      } else {
                        return {
                          panelDefault: theme.panelDefault,
                          panelHovered: theme.panelHovered
                        };
                      }
                    }
                    #setupElement() {
                      const {
                        panelDescriptor
                      } = this;
                      const {
                        loadingIcon
                      } = panelDescriptor;
                      const {
                        className,
                        name = ""
                      } = panelDescriptor?.primaryButton ?? {};
                      const element = document.createElement("div");
                      element.className = classnames_default()(collapsible_panel_view_ELEMENT_CLASS, this.panelDescriptor.className);
                      const primaryButtonClass = classnames_default()(PRIMARY_BUTTON_ELEMENT_CLASS, className);
                      const loadingElClass = classnames_default()(loadingElementClass, {
                        [panelLoadingClass]: this.#loading
                      });
                      const {
                        panelDefault: defaultIconUrl,
                        panelHovered: hoverPanelIconUrl
                      } = this.#extractPrimaryButtonTheme() ?? {};
                      element.innerHTML = auto_html_js_default()`
      <div class="aBO">
        <div class="aic">
          <div class="z0">
            <div class="${primaryButtonClass}" style="user-select: none" role="button" tabindex="0">
              ${name}
            </div>
          </div>
        </div>
        <div class="${scrollablePanelClass}">
          <div class="${loadingElClass}">${loadingIcon ? {
                        __html: loadingIcon
                      } : ""}</div>
          <div class="Ls77Lb aZ6">
            <div class="pp" style="user-select: none;">
              <div>
                <div class="${`nM ${PANEL_NAV_ITEMS_CONTAINER_CLASS}`}">
                  <div class="aic"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="aTV"></div>
    `.trim();
                      const primaryBtnEl = (0, querySelectorOrFail.A)(element, PRIMARY_BUTTON_ELEMENT_SELECTOR);
                      primaryBtnEl.style.setProperty("--background-image", defaultIconUrl ? `url(${defaultIconUrl})` : "unset");
                      primaryBtnEl.style.setProperty("--background-image--hover", hoverPanelIconUrl ? `url(${hoverPanelIconUrl})` : "unset");
                      primaryBtnEl.addEventListener("click", this.#onPrimaryButtonClick);
                      return element;
                    }
                    #onPrimaryButtonClick = (e) => {
                      this.panelDescriptor.primaryButton?.onClick?.(e);
                    };
                    #update() {
                      const element = this.element;
                      if (!element) return;
                      const existingClassNames = Object.values(CollapsiblePanelView.elementCss).filter((className) => element.classList.contains(className));
                      element.className = classnames_default()(collapsible_panel_view_ELEMENT_CLASS, this.panelDescriptor.className, ...existingClassNames);
                      this.#updateName(element);
                      this.#updateIcon(element);
                      this.#updateScrollablePanelLoading(element);
                    }
                    static #preloadedIcons = /* @__PURE__ */ new Set();
                    #updateIcon(element) {
                      const iconContainerEl = (0, querySelectorOrFail.A)(element, PRIMARY_BUTTON_ELEMENT_SELECTOR);
                      const {
                        panelDefault,
                        panelHovered
                      } = this.#extractPrimaryButtonTheme() ?? {};
                      for (const url of [panelHovered, panelDefault]) {
                        if (!url || CollapsiblePanelView.#preloadedIcons.has(url)) {
                          continue;
                        }
                        CollapsiblePanelView.#preloadedIcons.add(url);
                        var link = document.createElement("link");
                        link.rel = "preload";
                        link.as = "image";
                        link.href = url;
                        document.head.appendChild(link);
                      }
                      for (const [key, value] of Object.entries({
                        "--background-image--hover": panelHovered,
                        "--background-image": panelDefault
                      })) {
                        if (value) {
                          iconContainerEl.style.setProperty(key, `url(${value})`);
                        } else {
                          iconContainerEl.style.removeProperty(key);
                        }
                      }
                      const {
                        className
                      } = this.panelDescriptor.primaryButton ?? {};
                      iconContainerEl.className = classnames_default()(PRIMARY_BUTTON_ELEMENT_CLASS, className);
                    }
                    #updateName(element) {
                      const buttonTextEl = element.querySelector(PRIMARY_BUTTON_ELEMENT_SELECTOR);
                      if (!buttonTextEl) {
                        return;
                      }
                      buttonTextEl.textContent = this.panelDescriptor.primaryButton?.name ?? "";
                    }
                    #updateScrollablePanelLoading(element) {
                      const scrollablePanelLoadingEl = element.querySelector(loadingElementSelector);
                      if (!scrollablePanelLoadingEl) {
                        return;
                      }
                      if (this.loading) {
                        scrollablePanelLoadingEl.classList.add(panelLoadingClass);
                      } else {
                        scrollablePanelLoadingEl.classList.remove(panelLoadingClass);
                      }
                    }
                  }
                  ;
                  async function addCollapsiblePanel(driver, panelDescriptor, insertIndex) {
                    const injectionContainer = await waitForAppMenuParentReady();
                    const collapsiblePanelView = new CollapsiblePanelView(driver, panelDescriptor);
                    if (!injectionContainer || !collapsiblePanelView.element) return;
                    const appMenu = await gmail_element_getter.A.getAppMenuAsync();
                    if (!appMenu) return;
                    const panelNodes = injectionContainer.querySelectorAll(CollapsiblePanelView.elementSelectors.NATIVE) ?? [];
                    const siblingElement = Number.isInteger(insertIndex) ? panelNodes[insertIndex] ?? null : null;
                    if (siblingElement) {
                      siblingElement.insertAdjacentElement("beforebegin", collapsiblePanelView.element);
                    } else {
                      [...panelNodes].at(-1)?.insertAdjacentElement("afterend", collapsiblePanelView.element);
                    }
                    return collapsiblePanelView;
                  }
                  const waitForAppMenuParentReady = once_default()(async () => {
                    if (!gmail_element_getter.A.isStandalone()) {
                      try {
                        const menuParentElement = await (0, wait_for.A)(() => gmail_element_getter.A.getAppMenuContainer());
                        return menuParentElement;
                      } catch (e) {
                        lib_logger.A.error(e);
                      }
                    }
                  });
                  ;
                  var NativeAppMenuClassName = /* @__PURE__ */ (function(NativeAppMenuClassName2) {
                    NativeAppMenuClassName2["MAIL"] = "XJ";
                    NativeAppMenuClassName2["CHAT"] = "ao4";
                    NativeAppMenuClassName2["SPACES"] = "aIt";
                    NativeAppMenuClassName2["MEET"] = "adZ";
                    return NativeAppMenuClassName2;
                  })(NativeAppMenuClassName || {});
                  const nativeButtonToPanelMap = /* @__PURE__ */ new Map([
                    [NativeAppMenuClassName.MAIL, "aIH"],
                    // Mail
                    [NativeAppMenuClassName.CHAT, "arL"],
                    // Chat
                    [NativeAppMenuClassName.SPACES, "arM"],
                    // Spaces
                    [NativeAppMenuClassName.MEET, void 0]
                    // Meet
                  ]);
                  const MAIL_ROUTES = ["inbox/:page"];
                  const CHAT_ROUTES = ["chat/welcome", "chat/dm/:chatID"];
                  const SPACES_ROUTES = ["rooms/welcome", "chat/space/:spaceID"];
                  const MEET_ROUTES = ["calls"];
                  const routeIDtoMenuItemClass = Object.fromEntries([...MAIL_ROUTES.map((route) => [route, NativeAppMenuClassName.MAIL]), ...CHAT_ROUTES.map((route) => [route, NativeAppMenuClassName.CHAT]), ...SPACES_ROUTES.map((route) => [route, NativeAppMenuClassName.SPACES]), ...MEET_ROUTES.map((route) => [route, NativeAppMenuClassName.MEET])]);
                  class AppMenuItemView extends safe_event_emitter.A {
                    static #menuItemChangeStream = kefir_esm["default"].pool();
                    static #menuItemChangeBus = kefir_bus_default()();
                    static #menuItemAddedDeferred = defer();
                    static #routeViewDriverStream;
                    static #menuItemToPanelMap = /* @__PURE__ */ new Map();
                    static #appMenuItemViews = /* @__PURE__ */ new Set();
                    static getAllPanels() {
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      const nativePanels = appMenuElement?.querySelectorAll(`.${collapsible_panel_view_NATIVE_CLASS}`);
                      return Array.from(nativePanels ?? []);
                    }
                    static getActivePanel() {
                      let useSdkActiveSelector = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      const {
                        ACTIVE,
                        SDK_ACTIVE
                      } = CollapsiblePanelView.elementCss;
                      const nativePanel = appMenuElement?.querySelector(useSdkActiveSelector ? `.${collapsible_panel_view_NATIVE_CLASS}.${ACTIVE}.${SDK_ACTIVE}` : `.${collapsible_panel_view_NATIVE_CLASS}.${ACTIVE}`);
                      return nativePanel;
                    }
                    static deactivatePanel(panel) {
                      const {
                        ACTIVE,
                        HOVER,
                        SDK_ACTIVE
                      } = CollapsiblePanelView.elementCss;
                      panel.style.removeProperty("height");
                      if (panel.classList.contains(HOVER)) {
                        panel.classList.remove(HOVER);
                      }
                      if (panel.classList.contains(ACTIVE)) {
                        panel.classList.remove(ACTIVE);
                      }
                      if (panel.classList.contains(SDK_ACTIVE)) {
                        panel.classList.remove(SDK_ACTIVE);
                      }
                    }
                    static isMenuItem(element) {
                      return element.classList.contains(NATIVE_CLASS);
                    }
                    static getAllMenuItems() {
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      return Array.from(appMenuElement?.querySelectorAll(`.${NATIVE_CLASS}`) ?? []);
                    }
                    static getActiveMenuItem() {
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      const {
                        ACTIVE,
                        SDK_ACTIVE
                      } = GmailAppMenuItemView.elementCss;
                      const button = appMenuElement?.querySelector(`.${NATIVE_CLASS}.${ACTIVE}.${SDK_ACTIVE}`);
                      return button;
                    }
                    static deactivateMenuItem(menuItem) {
                      const {
                        ACTIVE,
                        HOVER,
                        SDK_ACTIVE
                      } = GmailAppMenuItemView.elementCss;
                      if (menuItem.classList.contains(HOVER)) {
                        menuItem.classList.remove(HOVER);
                      }
                      if (menuItem.classList.contains(ACTIVE)) {
                        menuItem.classList.remove(ACTIVE);
                      }
                      if (menuItem.classList.contains(SDK_ACTIVE)) {
                        menuItem.classList.remove(SDK_ACTIVE);
                      }
                    }
                    static #isPanelLess() {
                      const activePanel = AppMenuItemView.getActivePanel(false);
                      return !activePanel;
                    }
                    static #adjustTooltipNub() {
                      const appMenuElement = gmail_element_getter.A.getAppMenu();
                      for (const menuItem of appMenuElement?.querySelectorAll(`.${NATIVE_CLASS}`) ?? []) {
                        const panel = AppMenuItemView.#menuItemToPanelMap.get(menuItem);
                        if (!panel) continue;
                        const nubElement = panel?.querySelector("* > .aTV");
                        const iconElement = menuItem?.querySelector(".V6");
                        const iconElementBox = iconElement?.getBoundingClientRect();
                        const offsetTop = (iconElement?.offsetTop ?? 0) + (iconElementBox?.height ?? 0) * 0.5;
                        const nubSide = 17;
                        const nubDiagonal = nubSide * Math.sqrt(2);
                        const offsetNub = nubDiagonal / 4;
                        const offset = offsetTop - offsetNub;
                        if (nubElement && offset) {
                          nubElement.style.top = `${offset}px`;
                        }
                      }
                    }
                    static #isPanelDropdownShown() {
                      const sdkDropdown = document.querySelector(".inboxsdk__menu");
                      if (sdkDropdown) {
                        return true;
                      }
                      const mailDropdown = document.querySelector(".JM");
                      if (mailDropdown && mailDropdown.style.display !== "none") {
                        return true;
                      }
                      const chatAndSpacesDropdown = document.querySelector(".tP");
                      if (chatAndSpacesDropdown && chatAndSpacesDropdown.style.display !== "none") {
                        return true;
                      }
                      return false;
                    }
                    static #setUpRouteViewDriverStream(driver) {
                      if (AppMenuItemView.#routeViewDriverStream) return;
                      AppMenuItemView.#routeViewDriverStream = driver.getRouteViewDriverStream();
                      AppMenuItemView.#routeViewDriverStream.onValue(async (routeView) => {
                        const routeViewID = routeView.getRouteID();
                        const routeType = routeView.getRouteType();
                        const descriptors = Array.from(AppMenuItemView.#appMenuItemViews, async (appMenuItemView) => {
                          const gmailView2 = await appMenuItemView.#gmailViewPromise;
                          return [gmailView2.menuItemDescriptor, gmailView2];
                        });
                        const results = await Promise.all(descriptors);
                        const [, gmailView] = results.find((_ref) => {
                          let [descriptor] = _ref;
                          return descriptor?.isRouteActive(routeView);
                        }) ?? [];
                        if (gmailView?.element) {
                          AppMenuItemView.#menuItemChangeBus.emit(["route-activated", gmailView.element]);
                          return;
                        }
                        let menuItemClass = "";
                        if (routeViewID) {
                          menuItemClass = routeIDtoMenuItemClass[routeViewID];
                        }
                        if ((!routeViewID || !menuItemClass) && routeType !== "CUSTOM") {
                          menuItemClass = NativeAppMenuClassName.MAIL;
                        }
                        const menuItemElement = menuItemClass && document.querySelector(`.${menuItemClass}`);
                        if (menuItemElement) {
                          AppMenuItemView.#menuItemChangeBus.emit(["route-activated", menuItemElement]);
                        }
                      });
                    }
                    static #_ = (async function init() {
                      const gmailAppMenu = await gmail_element_getter.A.getAppMenuAsync();
                      if (!gmailAppMenu) {
                        return;
                      }
                      AppMenuItemView.#menuItemChangeStream.plug(AppMenuItemView.#menuItemChangeBus);
                      for (const [menuItemClass, panelClass] of nativeButtonToPanelMap) {
                        const menuItemElement = document.querySelector(`.${NATIVE_CLASS}.${menuItemClass}`);
                        const panelElement = panelClass ? document.querySelector(`.${collapsible_panel_view_NATIVE_CLASS}.${panelClass}`) : null;
                        if (menuItemElement) {
                          AppMenuItemView.#menuItemToPanelMap.set(menuItemElement, panelElement ?? void 0);
                        }
                      }
                    })();
                    static #_2 = AppMenuItemView.#menuItemAddedDeferred.promise.then(() => {
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      for (const nativeMenuItem of appMenuElement?.querySelectorAll(`.${NATIVE_CLASS}:not(.${INBOXSDK_CLASS})`) ?? []) {
                        const buttonElement = nativeMenuItem.querySelector(".V6.CL");
                        buttonElement?.addEventListener("mouseenter", (e) => {
                          e.stopImmediatePropagation();
                          AppMenuItemView.#menuItemChangeBus.emit(["mouseenter", nativeMenuItem, e]);
                        }, true);
                        nativeMenuItem.addEventListener("mouseleave", (e) => {
                          e.stopImmediatePropagation();
                          AppMenuItemView.#menuItemChangeBus.emit(["mouseleave", nativeMenuItem, e]);
                        }, true);
                        nativeMenuItem.addEventListener("click", () => {
                          AppMenuItemView.#menuItemChangeBus.emit(["click", nativeMenuItem]);
                        });
                        const panel = AppMenuItemView.#menuItemToPanelMap.get(nativeMenuItem);
                        panel?.addEventListener("mouseleave", (e) => {
                          e.stopImmediatePropagation();
                          AppMenuItemView.#menuItemChangeBus.emit(["mouseleave", nativeMenuItem, e]);
                        });
                      }
                    });
                    static #_3 = AppMenuItemView.#menuItemChangeStream.onValue(async (v) => {
                      const [type, menuItem, mouseEvent] = v;
                      const {
                        HOVER
                      } = GmailAppMenuItemView.elementCss;
                      function handleActivate() {
                        const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                        for (const menuItem_ of appMenuElement?.querySelectorAll(`.${NATIVE_CLASS}`) ?? []) {
                          AppMenuItemView.deactivateMenuItem(menuItem_);
                          const iconElement = menuItem_.querySelector(ICON_ELEMENT_SELECTOR);
                          if (iconElement) {
                            iconElement.tabIndex = menuItem_ === menuItem ? 0 : -1;
                          }
                        }
                        activateMenuItem(menuItem);
                        const panel = AppMenuItemView.#menuItemToPanelMap.get(menuItem);
                        if (panel) {
                          const otherPanels = AppMenuItemView.getAllPanels().filter((p) => p !== panel);
                          for (const otherPanel of otherPanels) {
                            AppMenuItemView.deactivatePanel(otherPanel);
                          }
                          activatePanel(panel);
                        }
                      }
                      switch (type) {
                        case "mouseenter": {
                          const panel = AppMenuItemView.#menuItemToPanelMap.get(menuItem);
                          const activeMenuItem = AppMenuItemView.getActiveMenuItem();
                          const activePanel = AppMenuItemView.getActivePanel();
                          const burgerMenuOpen = gmail_element_getter.A.isAppBurgerMenuOpen();
                          if (activeMenuItem === menuItem && activePanel === panel && burgerMenuOpen) return;
                          if (activePanel) {
                            AppMenuItemView.deactivatePanel(activePanel);
                          }
                          if (panel) {
                            const height = window.innerHeight - panel.getBoundingClientRect().top;
                            panel.style.cssText = `height: ${height}px;`;
                            activatePanel(panel, {
                              hover: true
                            });
                            if (!menuItem.classList.contains(HOVER)) {
                              menuItem.classList.add(HOVER);
                            }
                            if (!burgerMenuOpen) {
                              for (const panel2 of document.querySelectorAll(CollapsiblePanelView.elementSelectors.NATIVE) ?? []) {
                                panel2.classList.add(CollapsiblePanelView.elementCss.COLLAPSED_HOVER);
                              }
                            }
                          } else {
                            const panel2 = activeMenuItem && AppMenuItemView.#menuItemToPanelMap.get(activeMenuItem);
                            if (panel2) {
                              activatePanel(panel2);
                            }
                          }
                          break;
                        }
                        case "mouseleave": {
                          const isPanelDropdownShown = AppMenuItemView.#isPanelDropdownShown();
                          if (isPanelDropdownShown) return;
                          const activeMenuItem = AppMenuItemView.getActiveMenuItem();
                          const activePanel = AppMenuItemView.getActivePanel();
                          const activeMenuItemPanel = activeMenuItem && AppMenuItemView.#menuItemToPanelMap.get(activeMenuItem);
                          if (mouseEvent.relatedTarget instanceof Node && (menuItem.contains(mouseEvent.relatedTarget) || activePanel?.contains(mouseEvent.relatedTarget))) return;
                          const burgerMenuOpen = gmail_element_getter.A.isAppBurgerMenuOpen();
                          if (activePanel === activeMenuItemPanel && burgerMenuOpen) return;
                          if (menuItem.classList.contains(HOVER)) {
                            menuItem.classList.remove(HOVER);
                          }
                          for (const panel of document.querySelectorAll(CollapsiblePanelView.elementSelectors.NATIVE) ?? []) {
                            panel.classList.remove(CollapsiblePanelView.elementCss.COLLAPSED_HOVER);
                          }
                          if (activePanel) {
                            AppMenuItemView.deactivatePanel(activePanel);
                          }
                          if (activeMenuItemPanel) {
                            activatePanel(activeMenuItemPanel);
                          }
                          break;
                        }
                        case "click": {
                          handleActivate();
                          const isPanelLess = AppMenuItemView.#isPanelLess();
                          for (const panel of document.querySelectorAll(CollapsiblePanelView.elementSelectors.NATIVE) ?? []) {
                            panel.classList.toggle(CollapsiblePanelView.elementCss.PANEL_LESS, isPanelLess);
                          }
                          gmail_element_getter.A.getAppMenu()?.classList.toggle("aTO", isPanelLess);
                          gmail_element_getter.A.getAppHeader()?.classList.toggle("aTO", isPanelLess);
                          break;
                        }
                        case "route-activated": {
                          handleActivate();
                          break;
                        }
                      }
                    });
                    get menuItemDescriptor() {
                      return this.#menuItemDescriptor;
                    }
                    #driver;
                    #destroyed = false;
                    #gmailViewPromise;
                    #collapsiblePanel;
                    #menuItemDescriptor;
                    constructor(driver, menuItemDescriptor) {
                      super();
                      this.#driver = driver;
                      this.#menuItemDescriptor = menuItemDescriptor;
                      const gmailAppMenuItemView = this.#driver.addAppMenuItem(menuItemDescriptor);
                      this.#gmailViewPromise = gmailAppMenuItemView;
                      gmailAppMenuItemView.then((gmailView) => {
                        if (this.#destroyed || !gmailView) {
                          return;
                        }
                        const gmailElement = gmailView.element;
                        if (gmailElement) {
                          AppMenuItemView.#menuItemToPanelMap.set(gmailElement, void 0);
                          AppMenuItemView.#adjustTooltipNub();
                        }
                        gmailView.on("destroy", () => {
                          this.remove();
                        });
                        gmailView.on("click", () => {
                          AppMenuItemView.#menuItemChangeBus.emit(["click", gmailElement]);
                          this.emit("click");
                        });
                        gmailView.on("hover", (e) => {
                          AppMenuItemView.#menuItemChangeBus.emit(["mouseenter", gmailElement, e]);
                          this.emit("hover");
                        });
                        gmailView.on("blur", (e) => {
                          AppMenuItemView.#menuItemChangeBus.emit(["mouseleave", gmailElement, e]);
                          this.emit("blur");
                        });
                      });
                      AppMenuItemView.#setUpRouteViewDriverStream(driver);
                      AppMenuItemView.#menuItemAddedDeferred.resolve(void 0);
                      AppMenuItemView.#appMenuItemViews.add(this);
                    }
                    /**
                     * Add a panel to an AppMenuItemView.
                     *
                     * @param panelDescriptor A single descriptor for the app menu item panel.
                     *
                     * @returns A promise that resolves to the CollapsiblePanelView instance. The result is undefined if the SDK doesn't detect the AppMenu being shown.
                     */
                    async addCollapsiblePanel(panelDescriptor) {
                      const descriptor = {
                        ...panelDescriptor,
                        className: classnames_default()(panelDescriptor.className, {
                          [CollapsiblePanelView.elementCss.COLLAPSED]: !gmail_element_getter.A.isAppBurgerMenuOpen(),
                          [CollapsiblePanelView.elementCss.PANEL_LESS]: AppMenuItemView.#isPanelLess()
                        })
                      };
                      const collapsiblePanel = await addCollapsiblePanel(this.#driver, descriptor, this.menuItemDescriptor.insertIndex);
                      if (collapsiblePanel) {
                        this.#gmailViewPromise.then((gmailView) => {
                          const gmailElement = gmailView.element;
                          if (gmailElement) {
                            collapsiblePanel.on("blur", (e) => {
                              AppMenuItemView.#menuItemChangeBus.value(["mouseleave", gmailElement, e]);
                            });
                            AppMenuItemView.#menuItemToPanelMap.set(gmailElement, collapsiblePanel.element);
                            AppMenuItemView.#adjustTooltipNub();
                          }
                        });
                      }
                      this.#collapsiblePanel = collapsiblePanel;
                      return collapsiblePanel;
                    }
                    /**
                     * Updates the AppMenuItem's AppMenuItemDescriptor
                     *
                     * @param menuItemDescriptor The new descriptor for the app menu item panel.
                     */
                    async update(menuItemDescriptor) {
                      const gmailView = await this.#gmailViewPromise;
                      gmailView.menuItemDescriptor = menuItemDescriptor;
                      this.#menuItemDescriptor = menuItemDescriptor;
                    }
                    /**
                     * Remove this AppMenuItemView from its parent
                     */
                    remove() {
                      if (this.#destroyed) return;
                      this.#destroyed = true;
                      this.emit("destroy");
                      this.#collapsiblePanel?.remove();
                      this.#gmailViewPromise.then((gmailView) => {
                        gmailView.element && AppMenuItemView.#menuItemToPanelMap.delete(gmailView.element);
                        gmailView.remove();
                        AppMenuItemView.#adjustTooltipNub();
                      });
                      AppMenuItemView.#appMenuItemViews.delete(this);
                    }
                  }
                  function activatePanel(panel, options2) {
                    const {
                      ACTIVE,
                      HOVER,
                      SDK_ACTIVE
                    } = CollapsiblePanelView.elementCss;
                    if (!panel.classList.contains(ACTIVE)) {
                      panel.classList.add(ACTIVE);
                    }
                    if (!panel.classList.contains(SDK_ACTIVE)) {
                      panel.classList.add(SDK_ACTIVE);
                    }
                    if (options2?.hover) {
                      if (!panel.classList.contains(HOVER)) {
                        panel.classList.add(HOVER);
                      }
                    } else {
                      if (panel.classList.contains(HOVER)) {
                        panel.classList.remove(HOVER);
                      }
                    }
                  }
                  function activateMenuItem(menuItem) {
                    const {
                      ACTIVE,
                      SDK_ACTIVE
                    } = GmailAppMenuItemView.elementCss;
                    if (!menuItem.classList.contains(ACTIVE)) {
                      menuItem.classList.add(ACTIVE);
                    }
                    if (!menuItem.classList.contains(SDK_ACTIVE)) {
                      menuItem.classList.add(SDK_ACTIVE);
                    }
                  }
                  ;
                  class AppMenu {
                    #driver;
                    #events = (0, kefir_esm.stream)((emitter) => {
                      const f = async () => {
                        const isShown = await this.isShown();
                        if (!isShown) {
                          return;
                        }
                        const appMenu = await gmail_element_getter.A.getAppMenuAsync();
                        if (!appMenu) {
                          return;
                        }
                        const onTransition = async (e) => {
                          const {
                            TOGGLE_OPEN_STATE
                          } = CollapsiblePanelView.elementCss;
                          const {
                            target,
                            type
                          } = e;
                          if (target instanceof HTMLElement && target.matches(CollapsiblePanelView.elementSelectors.NATIVE) && (type === "transitionstart" && target.classList.contains(TOGGLE_OPEN_STATE) || // TOGGLE_OPEN_STATE is removed on transitioncancel TransitionEvents
                          type === "transitioncancel" || type === "transitionend")) {
                            emitter.emit({
                              name: "collapseToggled",
                              event: e
                            });
                          }
                        };
                        kefir_esm["default"].merge(["transitionstart", "transitioncancel", "transitionend"].map((x2) => kefir_esm["default"].fromEvents(appMenu.parentElement, x2))).onValue(onTransition);
                      };
                      f();
                    });
                    constructor(driver) {
                      this.#driver = driver;
                      AppMenu.#monitorAppMenuState();
                    }
                    /**
                     * A stream of events related to the AppMenu.
                     *
                     * @note If the AppMenu is not shown, this stream will not emit any events.
                     */
                    get events() {
                      return this.#events;
                    }
                    /**
                     * @returns whether or not the AppMenu Burger is uncollapsed or not.
                     */
                    isMenuOpen() {
                      return gmail_element_getter.A.isAppBurgerMenuOpen();
                    }
                    /**
                     * Adds an app menu item to the app menu. Because the AppMenu may not be shown, this method expects `AppMenu.isShown` to be called first.
                     *
                     * If @see AppMenu#isShown returns `false` and this method is called, the SDK waits a bit for the AppMenu selector and then logs a warning.
                     *
                     * If the `insertOrder` option is provided, the app menu item will be added at that index. If it is not, the SDK adds the app menu item after Gmail's default app menu icons.
                     */
                    addMenuItem(menuItemDescriptor) {
                      const navItemView = new AppMenuItemView(this.#driver, menuItemDescriptor);
                      return navItemView;
                    }
                    /**
                     * @returns true if the app menu is visible. At time of writing, this typically means they have chose to enable Chat, Meet, or both.
                     */
                    async isShown() {
                      const result = await gmail_element_getter.A.getAppMenuAsync();
                      return !!result;
                    }
                    static #monitorInitialized = false;
                    static async #monitorAppMenuState() {
                      if (this.#monitorInitialized) {
                        return;
                      }
                      this.#monitorInitialized = true;
                      kefir_esm["default"].fromPromise(gmail_element_getter.A.getAppMenuAsync()).filter(isNotNil.A).flatMap((appMenu) => (0, make_mutation_observer_chunked_stream.A)(appMenu, {
                        childList: true,
                        subtree: true,
                        attributes: true,
                        attributeFilter: ["class"]
                      }).delay(0)).filter((mutations) => mutations.some((m) => m.target instanceof HTMLElement && AppMenuItemView.isMenuItem(m.target))).throttle(10, {
                        leading: true,
                        trailing: true
                      }).map(() => {
                        const activeMenuItem = AppMenuItemView.getActiveMenuItem();
                        if (activeMenuItem) {
                          const otherMenuItems = AppMenuItemView.getAllMenuItems().filter((menuItem) => menuItem !== activeMenuItem);
                          otherMenuItems.map((menuItem) => AppMenuItemView.deactivateMenuItem(menuItem));
                        }
                        const activePanel = AppMenuItemView.getActivePanel();
                        if (activePanel) {
                          const otherPanels = AppMenuItemView.getAllPanels().filter((panel) => panel !== activePanel);
                          otherPanels.map((panel) => AppMenuItemView.deactivatePanel(panel));
                        }
                      }).onValue(() => {
                      });
                    }
                  }
                  var intersection = __webpack_require__3(4225);
                  var intersection_default = /* @__PURE__ */ __webpack_require__3.n(intersection);
                  ;
                  class CollapsibleSectionView extends safe_event_emitter.A {
                    /** This property is set to true once the view is destroyed. */
                    #collapsibleSectionViewDriver;
                    constructor(collapsibleSectionViewDriver, driver) {
                      super();
                      this.#collapsibleSectionViewDriver = collapsibleSectionViewDriver;
                      this.destroyed = false;
                      _bindToEventStream(this, collapsibleSectionViewDriver, driver);
                    }
                    setCollapsed(value) {
                      this.#collapsibleSectionViewDriver.setCollapsed(value);
                    }
                    /** Removes this section from the current Route */
                    remove() {
                      this.destroy();
                    }
                    destroy() {
                      this.#collapsibleSectionViewDriver.destroy();
                      this.removeAllListeners();
                    }
                  }
                  function _bindToEventStream(collapsibleSectionView, collapsibleSectionViewDriver, driver) {
                    collapsibleSectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event)) {
                        return;
                      }
                      const {
                        eventName
                      } = event;
                      collapsibleSectionView.emit(eventName);
                    });
                    collapsibleSectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "rowClicked") {
                        return;
                      }
                      const {
                        rowDescriptor
                      } = event;
                      if (rowDescriptor.routeID) {
                        driver.goto(rowDescriptor.routeID, rowDescriptor.routeParams);
                      }
                      if (typeof rowDescriptor.onClick === "function") {
                        rowDescriptor.onClick();
                      }
                    });
                    collapsibleSectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "titleLinkClicked") {
                        return;
                      }
                      const {
                        sectionDescriptor
                      } = event;
                      if (sectionDescriptor.onTitleLinkClick) {
                        sectionDescriptor.onTitleLinkClick(collapsibleSectionView);
                      }
                    });
                    collapsibleSectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "footerClicked") {
                        return;
                      }
                      const {
                        sectionDescriptor
                      } = event;
                      if (sectionDescriptor.onFooterLinkClick) {
                        sectionDescriptor.onFooterLinkClick(collapsibleSectionView);
                      }
                    });
                    collapsibleSectionViewDriver.eventStream.onEnd(() => {
                      collapsibleSectionView.destroyed = true;
                      collapsibleSectionView.emit("destroy");
                    });
                  }
                  const collapsible_section_view = CollapsibleSectionView;
                  ;
                  class SectionView extends safe_event_emitter.A {
                    #sectionViewDriver;
                    constructor(sectionViewDriver, driver) {
                      super();
                      this.#sectionViewDriver = sectionViewDriver;
                      this.destroyed = false;
                      section_view_bindToEventStream(this, sectionViewDriver, driver);
                    }
                    /**
                     * Removes this section from the current Route.
                     */
                    remove() {
                      this.destroy();
                    }
                    destroy() {
                      this.#sectionViewDriver.destroy();
                      this.removeAllListeners();
                    }
                  }
                  function section_view_bindToEventStream(sectionView, sectionViewDriver, driver) {
                    sectionViewDriver.eventStream.onValue((e) => {
                      if (e != null && "eventName" in e) {
                        sectionView.emit(e.eventName);
                      }
                    });
                    sectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "rowClicked") {
                        return;
                      }
                      const {
                        rowDescriptor
                      } = event;
                      if (rowDescriptor.routeID) {
                        driver.goto(rowDescriptor.routeID, rowDescriptor.routeParams);
                      }
                      if (typeof rowDescriptor.onClick === "function") {
                        rowDescriptor.onClick();
                      }
                    });
                    sectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "titleLinkClicked") {
                        return;
                      }
                      const {
                        sectionDescriptor
                      } = event;
                      if (sectionDescriptor.onTitleLinkClick) {
                        sectionDescriptor.onTitleLinkClick(sectionView);
                      }
                    });
                    sectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "footerClicked") {
                        return;
                      }
                      const {
                        sectionDescriptor
                      } = event;
                      if (sectionDescriptor?.onFooterLinkClick) {
                        sectionDescriptor.onFooterLinkClick(sectionView);
                      }
                    });
                    sectionViewDriver.eventStream.onEnd(() => {
                      sectionView.destroyed = true;
                      sectionView.emit("destroy");
                    });
                  }
                  const section_view = SectionView;
                  ;
                  class ListRouteView extends route_view.A {
                    #routeViewDriver;
                    #driver;
                    #appId;
                    #sectionViews = [];
                    constructor(routeViewDriver, driver, appId) {
                      super(routeViewDriver);
                      this.#routeViewDriver = routeViewDriver;
                      this.#driver = driver;
                      this.#appId = appId;
                      this.#bindToEventStream();
                    }
                    /**
                     * Adds a collapsible section to the top of the page.
                     */
                    addCollapsibleSection(collapsibleSectionDescriptor) {
                      const collapsibleSectionViewDriver = this.#routeViewDriver.addCollapsibleSection(kefir_cast_default()(kefir_esm["default"], collapsibleSectionDescriptor).toProperty(), this.#appId);
                      const collapsibleSectionView = new collapsible_section_view(collapsibleSectionViewDriver, this.#driver);
                      this.#sectionViews.push(collapsibleSectionView);
                      return collapsibleSectionView;
                    }
                    /** Adds a non-collapsible section to the top of the page. */
                    addSection(sectionDescriptor) {
                      const sectionViewDriver = this.#routeViewDriver.addSection(kefir_cast_default()(kefir_esm["default"], sectionDescriptor).toProperty(), this.#appId);
                      const sectionView = new section_view(sectionViewDriver, this.#driver);
                      this.#sectionViews.push(sectionView);
                      return sectionView;
                    }
                    /**
                     * Hides the search filter toolbar that appears on search pages.
                     *
                     * This method may not support other pages such as the Sent page, even though
                     * it has a very similar filter toolbar.
                     */
                    hideSearchPageFilterToolbar() {
                      this.#routeViewDriver.hideSearchPageFilterToolbar();
                    }
                    /** Simulates a click on the Gmail thread list refresh button. */
                    refresh() {
                      this.#routeViewDriver.refresh();
                    }
                    #bindToEventStream() {
                      this.#routeViewDriver.getEventStream().onEnd(() => {
                        this.#sectionViews.forEach((sectionView) => {
                          sectionView.destroy();
                        });
                      });
                    }
                  }
                  const list_route_view = ListRouteView;
                  var custom_route_view = __webpack_require__3(6341);
                  var router = __webpack_require__3(6280);
                  ;
                  const SAMPLE_RATE = 0.01;
                  class Router {
                    NativeRouteIDs = router.Vi;
                    NativeListRouteIDs = router.Kc;
                    RouteTypes = router.Cs;
                    #appId;
                    #driver;
                    #currentRouteViewDriver;
                    #allRoutesHandlerRegistry;
                    #customRoutes = [];
                    #membrane;
                    #listRouteHandlerRegistries = {};
                    constructor(appId, driver, membrane) {
                      this.#appId = appId;
                      this.#driver = driver;
                      this.#currentRouteViewDriver = new dummy_route_view_driver();
                      this.#allRoutesHandlerRegistry = new handler_registry.A();
                      this.#membrane = membrane;
                      Object.values(router.Kc).forEach((value) => {
                        this.#listRouteHandlerRegistries[value] = new handler_registry.A();
                      });
                      driver.getRouteViewDriverStream().onValue((routeViewDriver) => {
                        driver.getLogger().trackFunctionPerformance(() => this.#handleRouteViewChange(routeViewDriver), SAMPLE_RATE, {
                          type: "handleRouteViewChange",
                          routeID: routeViewDriver.getRouteID()
                        });
                      });
                      driver.getStopper().onValue(() => {
                        this.#allRoutesHandlerRegistry.dumpHandlers();
                        Object.values(this.#listRouteHandlerRegistries).forEach((reg) => {
                          reg.dumpHandlers();
                        });
                      });
                    }
                    /**
                     * Get a URL that can be used to navigate to a view. You'll typically want to use this to set the href of an element or similar. Returns the encoded URL string.
                     *
                     * @param routeID A route specifying where the link should navigate the user to. This should either be a routeID registered with {@link Router#handleCustomRoute} or {@link Router#handleCustomListRoute}, or a value from {@link Router#NativeRouteIDs}.
                     * @param params an object containing the parameters that will be encoded in the link and decoded when the user subsequently visits the route. Handlers for the specified routeID will receive a copy of this object. This object must contain only simple key value pairs with no nested arrays/objects.
                     */
                    createLink(routeID, params) {
                      return this.#driver.createLink(routeID, params);
                    }
                    /**
                     * Change the route to be the one with the given ID and have the given parameters.
                     * @param routeID A route specifying where the link should navigate the user to. This should either be a routeID registered with {@link Router#handleCustomRoute} or {@link Router#handleCustomListRoute} a value from {@link Router#NativeRouteIDs}, or a value previously returned by {@link Router#createLink}. If it's a value previously returned by {@link Router#createLink} then the params argument must be omitted.
                     * @param params an object containing the parameters that will be encoded in the link and decoded when the user subsequently visits the route. Handlers for the specified routeID will receive a copy of this object. This object must contain only simple key value pairs with no nested arrays/objects.
                     */
                    goto(routeID, params) {
                      if (typeof routeID !== "string") {
                        throw new Error("routeID must be a string");
                      }
                      const driver = this.#driver;
                      if (typeof params === "string") {
                        driver.getLogger().deprecationWarning("Router.goto param string", "param object (e.g. {param: value})");
                      }
                      return driver.goto(routeID, params);
                    }
                    /**
                     * Registers a handler (callback) to be called when the user navigates to a custom route which matches the routeID you provide. Use this to create your own routes (pages) with your own custom content. Your callback will be passed an instance of a {@link CustomRouteView} whose contents you may modify.
                     * @param routeID which route this handler is registering for
                     * @param handler The callback to call when the route changes to a custom route matching the provided routeID
                     * @returns a function which removes the handler registration.
                     */
                    handleCustomRoute(routeID, handler) {
                      const customRouteDescriptor = {
                        routeID,
                        onActivate: handler
                      };
                      const removeCustomRouteFromDriver = this.#driver.addCustomRouteID(routeID);
                      const customRoutes = this.#customRoutes;
                      const driver = this.#driver;
                      customRoutes.push(customRouteDescriptor);
                      driver.getLogger().eventSdkPassive("Router.handleCustomRoute");
                      return function() {
                        removeCustomRouteFromDriver();
                        const index = customRoutes.indexOf(customRouteDescriptor);
                        if (index > -1) {
                          customRoutes.splice(index, 1);
                        }
                      };
                    }
                    /**
                     * Registers a handler (callback) to be called when the user navigates to any route (both customs and built in routes). Because this can apply to any route, your callback will be given only a generic RouteView. This is typically used when you want to monitor for page changes but don't necessarily need to modify the page.
                     * @param handler The callback to call when the route changes
                     * @returns a function which removes the handler registration.
                     */
                    handleAllRoutes(handler) {
                      return this.#allRoutesHandlerRegistry.registerHandler(handler);
                    }
                    /**
                     * Registers a handler (callback) to be called when the user navigates to a list route which matches the routeID you provide. Gmail have several built in routes which are "Lists". These include routes like Inbox, All Mail, Sent, Drafts, etc. You'll typically use this to modify Gmail's built in List routes.
                     * @param routeID which list route this handler is registering for.
                     * @param handler The callback to call when the route changes to a list route matching the routeId.
                     * @returns a function which removes the handler registration.
                     *
                     * @example
                     *
                     * ```javascript
                     * sdk.Router.handleListRoute(sdk.Router.NativeRouteIDs.INBOX, (listRouteView) => {
                     * ```
                    });
                     */
                    handleListRoute(routeID, handler) {
                      const listRouteHandlerRegistries = this.#listRouteHandlerRegistries;
                      if (!listRouteHandlerRegistries[routeID]) {
                        throw new Error("Invalid routeID specified");
                      }
                      return listRouteHandlerRegistries[routeID].registerHandler(handler);
                    }
                    /**
                     * Used to create a custom view that shows a list of threads. When the user navigates to the given routeID, the handler function will be called. The handler function will be passed the starting offset (if the user sees 50 threads per page and is on page 2, then the offset will be 50), and a maximum number of threads to return. It must return a CustomListDescriptor, or a promise which resolves to one.
                     * @param routeID  Which route this handler is registering for.
                     * @param handler Passed a page offset and a maximum number of threads to return. Must return a CustomListDescriptor, or a promise which resolves to one.
                     * @returns a function which removes the handler registration.
                     */
                    handleCustomListRoute(routeID, handler) {
                      return this.#driver.addCustomListRouteID(routeID, handler);
                    }
                    /**
                     * @returns a RouteView of the current route view
                     */
                    getCurrentRouteView() {
                      return this.#membrane.get(this.#currentRouteViewDriver);
                    }
                    #handleRouteViewChange(routeViewDriver) {
                      if (this.#currentRouteViewDriver instanceof dummy_route_view_driver) {
                        this.#currentRouteViewDriver.destroy();
                      }
                      this.#currentRouteViewDriver = routeViewDriver;
                      const routeView = this.#membrane.get(routeViewDriver);
                      this.#updateNavMenu(routeViewDriver);
                      if (routeView.getRouteType() === router.Cs.CUSTOM) {
                        this.#informRelevantCustomRoutes(routeViewDriver, routeView);
                      }
                      this.#allRoutesHandlerRegistry.addTarget(routeView);
                      if (routeView.getRouteType() === router.Cs.LIST) {
                        const listRouteView = new list_route_view(routeViewDriver, this.#driver, this.#appId);
                        const listRouteHandlerRegistry = this.#listRouteHandlerRegistries[routeView.getRouteID()];
                        if (listRouteHandlerRegistry) {
                          listRouteHandlerRegistry.addTarget(listRouteView);
                        }
                        this.#listRouteHandlerRegistries[router.Vi.ANY_LIST].addTarget(listRouteView);
                      }
                    }
                    #informRelevantCustomRoutes(routeViewDriver, routeView) {
                      const routeID = routeView.getRouteID();
                      const routeIDArray = Array.isArray(routeID) ? routeID : [routeID];
                      const relevantCustomRoute = this.#customRoutes.find((customRoute) => intersection_default()(Array.isArray(customRoute.routeID) ? customRoute.routeID : [customRoute.routeID], routeIDArray).length);
                      if (relevantCustomRoute) {
                        const customRouteView = new custom_route_view.A(routeViewDriver);
                        const customViewElement = routeViewDriver.getCustomViewElement();
                        if (!customViewElement) throw new Error("should not happen");
                        this.#driver.showCustomRouteView(customViewElement);
                        try {
                          relevantCustomRoute.onActivate(customRouteView);
                        } catch (err) {
                          this.#driver.getLogger().error(err);
                        }
                      }
                    }
                    #updateNavMenu(newRouteViewDriver) {
                      this.#driver.setShowNativeNavMarker(newRouteViewDriver.getType() !== router.Cs.CUSTOM);
                      this.#driver.setShowNativeAddonSidebar(newRouteViewDriver.getType() !== router.Cs.CUSTOM);
                    }
                  }
                  const namespaces_router = Router;
                  ;
                  class Search {
                    #driver;
                    constructor(appId, driver) {
                      this.#driver = driver;
                    }
                    registerSearchSuggestionsProvider(handler) {
                      if (typeof handler != "function") {
                        throw new Error("Incorrect arguments");
                      }
                      this.#driver.registerSearchSuggestionsProvider(handler);
                    }
                    registerSearchQueryRewriter(rewriter) {
                      if (typeof rewriter.termReplacer != "function" || typeof rewriter.term != "string") {
                        throw new Error("Incorrect arguments");
                      }
                      if (!rewriter.term.match(/^(app|has):/)) {
                        throw new Error("Custom search term must begin with 'app:'");
                      }
                      this.#driver.registerSearchQueryRewriter(rewriter);
                    }
                  }
                  ;
                  const app_toolbar_button_view_memberMap = /* @__PURE__ */ new WeakMap();
                  class AppToolbarButtonView extends safe_event_emitter.A {
                    constructor(driver, appToolbarButtonViewDriverPromise) {
                      super();
                      const members = {
                        appToolbarButtonViewDriverPromise,
                        appToolbarButtonViewDriver: null
                      };
                      app_toolbar_button_view_memberMap.set(this, members);
                      this.destroyed = false;
                      members.appToolbarButtonViewDriverPromise.then((appToolbarButtonViewDriver) => {
                        members.appToolbarButtonViewDriver = appToolbarButtonViewDriver;
                        appToolbarButtonViewDriver.getStopper().onValue(() => {
                          this.destroyed = true;
                          this.emit("destroy");
                        });
                      });
                      driver.getStopper().onValue(() => {
                        this.remove();
                      });
                    }
                    open() {
                      const members = (0, get_or_fail.A)(app_toolbar_button_view_memberMap, this);
                      members.appToolbarButtonViewDriverPromise.then(function(appToolbarButtonViewDriver) {
                        appToolbarButtonViewDriver.open();
                      });
                    }
                    close() {
                      const members = (0, get_or_fail.A)(app_toolbar_button_view_memberMap, this);
                      members.appToolbarButtonViewDriverPromise.then(function(appToolbarButtonViewDriver) {
                        appToolbarButtonViewDriver.close();
                      });
                    }
                    remove() {
                      const members = (0, get_or_fail.A)(app_toolbar_button_view_memberMap, this);
                      members.appToolbarButtonViewDriverPromise.then(function(appToolbarButtonViewDriver) {
                        appToolbarButtonViewDriver.destroy();
                      });
                    }
                  }
                  ;
                  class Toolbars extends safe_event_emitter.A {
                    #driver;
                    #membrane;
                    #piOpts;
                    SectionNames = SECTION_NAMES;
                    constructor(appId, driver, membrane, piOpts) {
                      super();
                      this.#driver = driver;
                      this.#membrane = membrane;
                      this.#piOpts = piOpts;
                    }
                    /**
                     * Registers a toolbar button to appear on thread rows, above the thread list when some rows are checked, and above threads.
                     *
                     * @returns a function which removes the button registration.
                     */
                    registerThreadButton(buttonDescriptor) {
                      if ((buttonDescriptor.listSection === "OTHER" || buttonDescriptor.threadSection === "OTHER") && buttonDescriptor.hasDropdown) {
                        this.#driver.getLogger().errorApp(new Error("registerThreadButton does not support listSection=OTHER or threadSection=OTHER and hasDropdown=true together"));
                        buttonDescriptor = {
                          ...buttonDescriptor,
                          hasDropdown: false
                        };
                      }
                      const {
                        hideFor,
                        ..._buttonDescriptor
                      } = buttonDescriptor;
                      const registerThreadButton = () => {
                        return this.#driver.registerThreadButton({
                          ..._buttonDescriptor,
                          onClick: (event) => {
                            if (!_buttonDescriptor.onClick) return;
                            _buttonDescriptor.onClick({
                              position: event.position,
                              dropdown: event.dropdown,
                              selectedThreadViews: event.selectedThreadViewDrivers.map((x2) => this.#membrane.get(x2)),
                              selectedThreadRowViews: event.selectedThreadRowViewDrivers.map((x2) => this.#membrane.get(x2))
                            });
                          }
                        });
                      };
                      if (!hideFor) {
                        return registerThreadButton();
                      } else {
                        const stopper = js_default()();
                        let currentRemover = null;
                        this.#driver.getRouteViewDriverStream().takeUntilBy(stopper).onValue((routeViewDriver) => {
                          const routeView = this.#membrane.get(routeViewDriver);
                          if (hideFor(routeView)) {
                            if (currentRemover) {
                              currentRemover();
                              currentRemover = null;
                            }
                          } else {
                            if (!currentRemover) {
                              currentRemover = registerThreadButton();
                            }
                          }
                        });
                        return () => {
                          stopper.destroy();
                          if (currentRemover) {
                            currentRemover();
                            currentRemover = null;
                          }
                        };
                      }
                    }
                    /**
                     * @deprecated This method is deprecated in favor of {@link Toolbars.registerThreadButton}.
                     *
                     * Registers a toolbar button to appear above any list page such as the Inbox or Sent Mail.
                     */
                    registerToolbarButtonForList(buttonDescriptor) {
                      return this.registerThreadButton({
                        positions: ["LIST"],
                        listSection: buttonDescriptor.section,
                        title: buttonDescriptor.title,
                        iconUrl: buttonDescriptor.iconUrl,
                        iconClass: buttonDescriptor.iconClass,
                        onClick: (event) => {
                          if (!buttonDescriptor.onClick) return;
                          const driver = this.#driver;
                          buttonDescriptor.onClick({
                            dropdown: event.dropdown,
                            selectedThreadRowViews: event.selectedThreadRowViews,
                            get threadRowViews() {
                              driver.getLogger().deprecationWarning("Toolbars.registerToolbarButtonForList onClick event.threadRowViews", "Toolbars.registerToolbarButtonForList onClick event.selectedThreadRowViews");
                              return event.selectedThreadRowViews;
                            }
                          });
                        },
                        hasDropdown: buttonDescriptor.hasDropdown,
                        orderHint: buttonDescriptor.orderHint,
                        hideFor: buttonDescriptor.hideFor,
                        keyboardShortcutHandle: buttonDescriptor.keyboardShortcutHandle
                      });
                    }
                    /**
                     * @deprecated This function is deprecated in favor of {@link Toolbars#registerThreadButton}.
                     *
                     * Registers a toolbar button to appear when viewing a thread.
                     */
                    registerToolbarButtonForThreadView(buttonDescriptor) {
                      return this.registerThreadButton({
                        positions: ["THREAD"],
                        threadSection: buttonDescriptor.section,
                        title: buttonDescriptor.title,
                        iconUrl: buttonDescriptor.iconUrl,
                        iconClass: buttonDescriptor.iconClass,
                        onClick: (event) => {
                          if (event.selectedThreadViews.length !== 1) throw new Error("should not happen");
                          if (!buttonDescriptor.onClick) return;
                          buttonDescriptor.onClick({
                            dropdown: event.dropdown,
                            threadView: event.selectedThreadViews[0]
                          });
                        },
                        hasDropdown: buttonDescriptor.hasDropdown,
                        orderHint: buttonDescriptor.orderHint,
                        hideFor: buttonDescriptor.hideFor,
                        keyboardShortcutHandle: buttonDescriptor.keyboardShortcutHandle
                      });
                    }
                    /** @deprecated */
                    setAppToolbarButton(appToolbarButtonDescriptor) {
                      this.#driver.getLogger().deprecationWarning("Toolbars.setAppToolbarButton", "Toolbars.addToolbarButtonForApp");
                      if (this.#piOpts.REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.addToolbarButtonForApp(appToolbarButtonDescriptor);
                    }
                    /**
                     * Adds a button and dropdown to the "Global Toolbar". This is typically used to show a dropdown with general information about your application. In Gmail, this refers to the navigation area at the top right of the window.
                     */
                    addToolbarButtonForApp(buttonDescriptor) {
                      const buttonDescriptorStream = kefir_cast_default()(kefir_esm["default"], buttonDescriptor);
                      const appToolbarButtonViewDriverPromise = this.#driver.addToolbarButtonForApp(buttonDescriptorStream);
                      const appToolbarButtonView = new AppToolbarButtonView(this.#driver, appToolbarButtonViewDriverPromise);
                      return appToolbarButtonView;
                    }
                  }
                  ;
                  class User {
                    #driver;
                    #piOpts;
                    constructor(driver, piOpts) {
                      this.#driver = driver;
                      this.#piOpts = piOpts;
                    }
                    getEmailAddress() {
                      return this.#driver.getUserEmailAddress();
                    }
                    isConversationViewDisabled() {
                      return this.#driver.isConversationViewDisabled();
                    }
                    /** @deprecated */
                    isUsingGmailMaterialUI() {
                      this.#driver.getLogger().deprecationWarning("User.isUsingGmailMaterialUI");
                      return true;
                    }
                    getLanguage() {
                      return this.#driver.getUserLanguage();
                    }
                    /** @deprecated use {@link User.getEmailAddress} instead */
                    getUserContact() {
                      this.#driver.getLogger().deprecationWarning("User.getUserContact", "User.getEmailAddress");
                      if (this.#piOpts.REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.#driver.getUserContact();
                    }
                    /** @deprecated use {@link User.getEmailAddress} instead */
                    getAccountSwitcherContactList() {
                      this.#driver.getLogger().deprecationWarning("User.getAccountSwitcherContactList", "User.getEmailAddress");
                      let list = this.#driver.getAccountSwitcherContactList();
                      const userEmail = this.getEmailAddress();
                      const listHasUser = !!find_default()(list, (item) => item.emailAddress === userEmail);
                      if (!listHasUser) {
                        list = list.concat([{
                          name: userEmail,
                          emailAddress: userEmail
                        }]);
                      }
                      return list;
                    }
                    getPersonDetails(emailAddress) {
                      return this.#driver.getPersonDetails(emailAddress);
                    }
                  }
                  ;
                  class Global {
                    #driver;
                    constructor(appId, driver) {
                      this.#driver = driver;
                    }
                    get gmailTheme() {
                      return this.#driver.gmailTheme;
                    }
                    async addSidebarContentPanel(descriptor) {
                      const descriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], descriptor).toProperty();
                      this.#driver.getLogger().eventSdkPassive("global.addSidebarContentPanel");
                      const contentPanelImplementation = await this.#driver.addGlobalSidebarContentPanel(descriptorPropertyStream);
                      if (contentPanelImplementation) {
                        return new ContentPanelView(contentPanelImplementation);
                      }
                      return null;
                    }
                    addSupportItem(supportItemDescriptor) {
                      this.#driver.getLogger().eventSdkPassive("global.addSupportItem");
                      return this.#driver.addSupportItem(supportItemDescriptor);
                    }
                  }
                  var toValueObservable = __webpack_require__3(3507);
                  var toValueObservable_default = /* @__PURE__ */ __webpack_require__3.n(toValueObservable);
                  var transducers = __webpack_require__3(6046);
                  var transducers_default = /* @__PURE__ */ __webpack_require__3.n(transducers);
                  ;
                  function showAppIdWarning(driver) {
                    const topDiv = document.createElement("div");
                    topDiv.className = "inboxsdk__appid_warning";
                    topDiv.innerHTML = `
<div class="inboxsdk__appid_warning_main">
  <div class="topline">InboxSDK Developer Warning: Invalid AppId</div>
  <div>You've loaded the InboxSDK with an unregistered appId. Registration is free but necessary to load the SDK.</div>
</div>
<a class="inboxsdk__appid_register" target="_blank" href="https://register.inboxsdk.com/">Register Your App</a>
<input type="button" value="" title="Close" class="inboxsdk__x_close_button" />
`;
                    const topMessageBarDriver = driver.createTopMessageBarDriver(kefir_cast_default()(kefir_esm["default"], {
                      el: topDiv
                    }));
                    const closeBtn = topDiv.querySelector(".inboxsdk__x_close_button");
                    if (!closeBtn) throw new Error("Should not happen");
                    closeBtn.addEventListener("click", function(_e) {
                      topMessageBarDriver.remove();
                    });
                  }
                  var makePageParserTree = __webpack_require__3(745);
                  ;
                  var CustomDomEvent = {
                    tellMeThisThreadIdByDatabase: "inboxSDKtellMeThisThreadIdByDatabase",
                    tellMeThisThreadIdByClick: "inboxSDKtellMeThisThreadIdByClick"
                  };
                  ;
                  class GmailPageCommunicator {
                    constructor() {
                      this.ajaxInterceptStream = kefir_esm["default"].fromEvents(document, "inboxSDKajaxIntercept").map((x2) => x2.detail);
                    }
                    getUserEmailAddress() {
                      const s = document.head.getAttribute("data-inboxsdk-user-email-address");
                      if (typeof s !== "string") throw new Error("should not happen");
                      return s;
                    }
                    getUserLanguage() {
                      const s = document.head.getAttribute("data-inboxsdk-user-language");
                      if (typeof s !== "string") throw new Error("should not happen");
                      return s;
                    }
                    getIkValue() {
                      const ownIk = document.head.getAttribute("data-inboxsdk-ik-value");
                      if (ownIk) {
                        return ownIk;
                      }
                      if (window.opener) {
                        const openerIk = window.opener.document.head.getAttribute("data-inboxsdk-ik-value");
                        if (openerIk) {
                          return openerIk;
                        } else {
                          throw new Error("Failed to look up parent window 'ik' value");
                        }
                      }
                      throw new Error("Failed to look up 'ik' value");
                    }
                    async getXsrfToken() {
                      const existingHeader = document.head.getAttribute("data-inboxsdk-xsrf-token");
                      if (existingHeader) {
                        return existingHeader;
                      } else {
                        await this.ajaxInterceptStream.filter((_ref) => {
                          let {
                            type
                          } = _ref;
                          return type === "xsrfTokenHeaderReceived";
                        }).take(1).toPromise();
                        const newHeader = document.head.getAttribute("data-inboxsdk-xsrf-token");
                        if (!newHeader) throw new Error("Failed to look up XSRF token");
                        return newHeader;
                      }
                    }
                    async getBtaiHeader() {
                      const existingHeader = document.head.getAttribute("data-inboxsdk-btai-header");
                      if (existingHeader) {
                        return existingHeader;
                      } else {
                        await this.ajaxInterceptStream.filter((_ref2) => {
                          let {
                            type
                          } = _ref2;
                          return type === "btaiHeaderReceived";
                        }).take(1).toPromise();
                        const newHeader = document.head.getAttribute("data-inboxsdk-btai-header");
                        if (!newHeader) throw new Error("Failed to look up BTAI header");
                        return newHeader;
                      }
                    }
                    resolveUrlRedirects(url) {
                      return this.pageAjax({
                        url,
                        method: "HEAD"
                      }).then((result) => result.responseURL);
                    }
                    pageAjax(opts) {
                      const id = `${Date.now()}-${Math.random()}`;
                      const promise = kefir_esm["default"].fromEvents(document, "inboxSDKpageAjaxDone").filter((event) => event.detail && event.detail.id === id).take(1).flatMap((event) => {
                        if (event.detail.error) {
                          const err = Object.assign(new Error(event.detail.message || "Connection error"), {
                            status: event.detail.status
                          });
                          if (event.detail.stack) {
                            err.stack = event.detail.stack;
                          }
                          return kefir_esm["default"].constantError(err);
                        } else {
                          return kefir_esm["default"].constant({
                            text: event.detail.text,
                            responseURL: event.detail.responseURL
                          });
                        }
                      }).toPromise();
                      document.dispatchEvent(new CustomEvent("inboxSDKpageAjax", {
                        bubbles: false,
                        cancelable: false,
                        detail: Object.assign({}, opts, {
                          id
                        })
                      }));
                      return promise;
                    }
                    silenceGmailErrorsForAMoment() {
                      document.dispatchEvent(new CustomEvent("inboxSDKsilencePageErrors", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      const error = new Error("Forgot to unsilence page errors");
                      let unsilenced = false;
                      const unsilence = once_default()(() => {
                        unsilenced = true;
                        document.dispatchEvent(new CustomEvent("inboxSDKunsilencePageErrors", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      });
                      browser_asap_default()(() => {
                        if (!unsilenced) {
                          lib_logger.A.error(error);
                          unsilence();
                        }
                      });
                      return unsilence;
                    }
                    registerAllowedHashLinkStartTerm(term) {
                      document.dispatchEvent(new CustomEvent("inboxSDKregisterAllowedHashLinkStartTerm", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          term
                        }
                      }));
                    }
                    async getMessageDate(threadId, message) {
                      return this._getMessageData(threadId, message, "data-inboxsdk-sortdate", "inboxSDKtellMeThisMessageDate");
                    }
                    async getMessageRecipients(threadId, message) {
                      return this._getMessageData(threadId, message, "data-inboxsdk-recipients", "inboxSDKtellMeThisMessageRecipients");
                    }
                    async _getMessageData(threadId, message, attribute, eventName) {
                      let data = message.getAttribute(attribute);
                      if (!data) {
                        const [btaiHeader, xsrfToken] = await Promise.all([this.getBtaiHeader(), this.getXsrfToken()]);
                        message.dispatchEvent(new CustomEvent(eventName, {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            threadId,
                            ikValue: this.getIkValue(),
                            btaiHeader,
                            xsrfToken
                          }
                        }));
                        data = message.getAttribute(attribute);
                        if (!data) {
                          await (0, make_mutation_observer_chunked_stream.A)(message, {
                            attributes: true,
                            attributeFilter: [attribute]
                          }).take(1).toPromise();
                          data = message.getAttribute(attribute);
                        }
                      }
                      if (data && data !== "error") return JSON.parse(data);
                      else return null;
                    }
                    getThreadIdForThreadRowByDatabase(threadRow) {
                      let threadid = threadRow.getAttribute("data-inboxsdk-threadid");
                      if (!threadid) {
                        threadRow.dispatchEvent(new CustomEvent(CustomDomEvent.tellMeThisThreadIdByDatabase, {
                          bubbles: true,
                          cancelable: false,
                          detail: null
                        }));
                        threadid = threadRow.getAttribute("data-inboxsdk-threadid");
                      }
                      return threadid;
                    }
                    getThreadIdForThreadRowByClick(threadRow) {
                      let threadid = threadRow.getAttribute("data-inboxsdk-threadid");
                      if (!threadid) {
                        threadRow.dispatchEvent(new CustomEvent(CustomDomEvent.tellMeThisThreadIdByClick, {
                          bubbles: true,
                          cancelable: false,
                          detail: null
                        }));
                        threadid = threadRow.getAttribute("data-inboxsdk-threadid");
                      }
                      return threadid;
                    }
                    getCurrentThreadID(threadContainerElement) {
                      let isPreviewedThread = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
                      threadContainerElement.dispatchEvent(new CustomEvent("inboxSDKtellMeCurrentThreadId", {
                        bubbles: true,
                        cancelable: false,
                        detail: {
                          isPreviewedThread
                        }
                      }));
                      const s = threadContainerElement.getAttribute("data-inboxsdk-currentthreadid");
                      if (s == null) throw new Error("Failed to read value");
                      return s;
                    }
                    getUserOriginalPreviewPaneMode() {
                      return document.head.getAttribute("data-inboxsdk-user-preview-pane-mode");
                    }
                    getActionTokenValue() {
                      const s = document.head.getAttribute("data-inboxsdk-action-token-value");
                      if (s == null) throw new Error("Failed to read value");
                      return s;
                    }
                    isConversationViewDisabled() {
                      return new Promise((resolve) => {
                        kefir_esm["default"].fromEvents(document, "inboxSDKgmonkeyResponse").take(1).onValue((event) => {
                          resolve(event.detail);
                        });
                        document.dispatchEvent(new CustomEvent("inboxSDKtellMeIsConversationViewDisabled", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      });
                    }
                    getGoogleRequestHeaders() {
                      document.dispatchEvent(new CustomEvent("inboxSDKgetGoogleRequestHeaders", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      const json = document.head.getAttribute("data-inboxsdk-google-headers");
                      document.head.removeAttribute("data-inboxsdk-google-headers");
                      if (!json) {
                        throw new Error("Failed to get Google request auth headers");
                      }
                      return JSON.parse(json);
                    }
                    registerSuggestionsModifier(providerID) {
                      document.dispatchEvent(new CustomEvent("inboxSDKregisterSuggestionsModifier", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          providerID
                        }
                      }));
                    }
                    provideAutocompleteSuggestions(providerID, query, suggestions) {
                      document.dispatchEvent(new CustomEvent("inboxSDKprovideSuggestions", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          providerID,
                          query,
                          // Filter out non-JSONifiable things
                          suggestions: JSON.parse(JSON.stringify(suggestions))
                        }
                      }));
                    }
                    setupCustomListResultsQuery(query) {
                      document.dispatchEvent(new CustomEvent("inboxSDKcustomListRegisterQuery", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          query
                        }
                      }));
                    }
                    setCustomListNewQuery(detail) {
                      document.dispatchEvent(new CustomEvent("inboxSDKcustomListNewQuery", {
                        bubbles: false,
                        cancelable: false,
                        detail
                      }));
                    }
                    setCustomListResults(query, newResults) {
                      document.dispatchEvent(new CustomEvent("inboxSDKcustomListResults", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          query,
                          newResults
                        }
                      }));
                    }
                    createCustomSearchTerm(term) {
                      document.dispatchEvent(new CustomEvent("inboxSDKcreateCustomSearchTerm", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          term
                        }
                      }));
                    }
                    setSearchQueryReplacement(query, newQuery) {
                      document.dispatchEvent(new CustomEvent("inboxSDKsearchReplacementReady", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          query,
                          newQuery
                        }
                      }));
                    }
                    registerComposeRequestModifier(keyId, appId) {
                      const modifierId = (/* @__PURE__ */ new Date()).getTime() + "_" + appId + "_" + Math.random();
                      const detail = {
                        modifierId
                      };
                      detail.draftID = keyId;
                      document.dispatchEvent(new CustomEvent("inboxSDKregisterComposeRequestModifier", {
                        detail,
                        bubbles: false,
                        cancelable: false
                      }));
                      return modifierId;
                    }
                    unregisterComposeRequestModifier(keyId, modifierId) {
                      document.dispatchEvent(new CustomEvent("inboxSDKunregisterComposeRequestModifier", {
                        detail: {
                          keyId,
                          modifierId
                        },
                        bubbles: false,
                        cancelable: false
                      }));
                    }
                    modifyComposeRequest(keyId, modifierId, composeParams) {
                      const detail = {
                        modifierId,
                        composeParams,
                        draftID: keyId
                      };
                      document.dispatchEvent(new CustomEvent("inboxSDKcomposeRequestModified", {
                        detail,
                        bubbles: false,
                        cancelable: false
                      }));
                    }
                  }
                  ;
                  let injectScriptImplementation = () => {
                    window.chrome.runtime.sendMessage({
                      type: "inboxsdk__injectPageWorld"
                    }, (didExecute) => {
                      if (!didExecute) {
                        if (false) {
                        } else {
                          throw new Error("Couldn't inject pageWorld.js. Check that the extension is using MV3 and has the correct permissions and host_permissions in its manifest.");
                        }
                      }
                    });
                  };
                  const injectScript = once_default()(() => {
                    if (!document.head.hasAttribute("data-inboxsdk-script-injected")) {
                      document.head.setAttribute("data-inboxsdk-script-injected", "true");
                      injectScriptImplementation();
                    }
                    return kefir_esm["default"].later(0, null).merge((0, make_mutation_observer_chunked_stream.A)(document.head, {
                      attributes: true
                    })).filter(() => document.head.hasAttribute("data-inboxsdk-user-email-address")).take(1).map(() => null).toPromise();
                  });
                  function setInjectScriptImplementation(fn) {
                    injectScriptImplementation = fn;
                  }
                  ;
                  function makeXhrInterceptor() {
                    var pageCommunicator = new GmailPageCommunicator();
                    var rawInterceptStream = pageCommunicator.ajaxInterceptStream;
                    var pageCommunicatorPromise = injectScript().then(() => pageCommunicator);
                    var interceptStream = kefir_esm.merge([rawInterceptStream.filter(function(detail) {
                      return detail.type === "emailSending";
                    }).map(function(detail) {
                      if (detail.draftID) {
                        return detail;
                      } else {
                        var body = (0, querystring_es3.parse)(detail.body);
                        return {
                          type: "emailSending",
                          composeId: body.composeid,
                          draft: body.draft
                        };
                      }
                    }), rawInterceptStream.filter(function(detail) {
                      return detail.type === "emailSent";
                    }).map(function(detail) {
                      if (detail.draftID) {
                        return detail;
                      } else {
                        var body = (0, querystring_es3.parse)(detail.originalSendBody);
                        var response = detail.responseText;
                        return {
                          type: "emailSent",
                          composeId: body.composeid,
                          draft: body.draft,
                          response
                        };
                      }
                    }), rawInterceptStream.filter(function(detail) {
                      return detail.type === "emailDraftSaveSending";
                    }).map(function(detail) {
                      if (detail.draftID) {
                        return detail;
                      } else {
                        var body = (0, querystring_es3.parse)(detail.body);
                        return {
                          type: "emailDraftSaveSending",
                          composeId: body.composeid,
                          draft: body.draft
                        };
                      }
                    }), rawInterceptStream.filter(function(detail) {
                      return detail.type === "emailDraftReceived";
                    }).map(function(detail) {
                      if (detail.draftID) {
                        return detail;
                      } else {
                        var body = (0, querystring_es3.parse)(detail.originalSendBody);
                        var response = detail.responseText;
                        return {
                          type: "emailDraftReceived",
                          composeId: body.composeid,
                          draft: body.draft,
                          response,
                          connectionDetails: detail.connectionDetails
                        };
                      }
                    })]);
                    return {
                      xhrInterceptStream: interceptStream,
                      pageCommunicatorPromise
                    };
                  }
                  ;
                  class GmailBackdrop {
                    _stopper = js_default()();
                    constructor() {
                      let zIndex2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 500;
                      let target = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : document.body;
                      const el = document.createElement("div");
                      el.className = "Kj-JD-Jh inboxsdk__modal_overlay";
                      el.style.zIndex = String(zIndex2);
                      if (!target) throw new Error("no target");
                      target.appendChild(el);
                      this._stopper.onValue(() => {
                        el.remove();
                      });
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    destroy() {
                      this._stopper.destroy();
                    }
                  }
                  const gmail_backdrop = GmailBackdrop;
                  var fake_window_resize = __webpack_require__3(652);
                  ;
                  class GmailTopMessageBarDriver {
                    constructor(optionStream) {
                      this._eventStream = kefir_bus_default()();
                      const ResizeObserver = __webpack_require__3.g.ResizeObserver;
                      if (ResizeObserver) {
                        this._resizeObserver = new ResizeObserver(() => {
                          this.setTopMessageBarHeight();
                        });
                      }
                      optionStream.takeUntilBy(this._eventStream.filter(() => false).beforeEnd(() => null)).onValue((option) => {
                        if (!option) {
                          if (this._element) {
                            this._element.remove();
                            this._element = null;
                          }
                        } else if (option) {
                          var element = this._element;
                          if (!element) {
                            element = this._element = document.createElement("div");
                            element.classList.add("inboxsdk__topMessageBar");
                            document.body.insertBefore(element, document.body.firstChild);
                            document.body.classList.add("inboxsdk__hasTopMessageBar");
                            (0, fake_window_resize.A)();
                          }
                          if (option.el !== element.children[0]) {
                            element.innerHTML = "";
                            if (option.el) {
                              element.appendChild(option.el);
                              if (this._resizeObserver) {
                                this._resizeObserver.observe(element);
                              }
                              this.setTopMessageBarHeight();
                            }
                          }
                        }
                      });
                    }
                    destroy() {
                      if (this._element) {
                        this._element.remove();
                        this._element = null;
                      }
                      this._eventStream.end();
                      if (this._resizeObserver) {
                        this._resizeObserver.disconnect();
                      }
                      if (document.querySelectorAll(".inboxsdk__topMessageBar").length === 0) {
                        document.body.classList.remove("inboxsdk__hasTopMessageBar");
                      } else {
                        this.setTopMessageBarHeight();
                      }
                      (0, fake_window_resize.A)();
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    remove() {
                      this.destroy();
                    }
                    setTopMessageBarHeight() {
                      const topMessageBars = [...document.querySelectorAll(".inboxsdk__topMessageBar")];
                      const height = topMessageBars.reduce((acc, currValue) => acc + currValue.offsetHeight, 0);
                      document.body.style.setProperty("--inboxsdk__topMessageBar-height", `${height}px`);
                    }
                  }
                  ;
                  class ModalButtonView {
                    _element = document.createElement("button");
                    _eventStream = kefir_bus_default()();
                    constructor(options2) {
                      this._isEnabled = options2.enabled !== false;
                      this._title = options2.text || options2.title;
                      this._tooltip = options2.tooltip || options2.title;
                      this._buttonColor = options2.buttonColor || "default";
                      this._createElement(options2);
                      this._eventStream = kefir_bus_default()();
                      this._setupEventStream();
                    }
                    addClass(_className) {
                    }
                    removeClass(_className) {
                    }
                    activate() {
                    }
                    deactivate() {
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    setEnabled(value) {
                      this._setEnabled(value);
                    }
                    update() {
                      throw new Error("not implemented");
                    }
                    isEnabled() {
                      return this._isEnabled;
                    }
                    _createElement(options2) {
                      if (options2.isPrimary) this._element.classList.add("J-at1-auR");
                      this._element.innerText = options2.text || options2.title || "";
                      if (options2.tooltip) {
                        this._element.setAttribute("aria-label", options2.tooltip);
                      }
                      this._element.setAttribute("role", "button");
                      this._element.setAttribute("tabindex", "0");
                      if (options2.tooltip || options2.title) {
                        this._element.setAttribute("data-tooltip", String(options2.tooltip || options2.title));
                      }
                    }
                    _setEnabled(value) {
                      if (this._isEnabled === value) {
                        return;
                      }
                      this._isEnabled = value;
                      if (this._isEnabled) {
                        this._element.classList.remove("inboxsdk__button_disabled");
                      } else {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                      this._eventStream.emit({
                        eventName: "enabledChanged",
                        isEnabled: this._isEnabled
                      });
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.filter(() => this.isEnabled()).map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      const isEnterOrSpace = (event) => includes_default()([
                        32,
                        13
                        /* enter */
                      ], event.which);
                      const keydownEventStream = kefir_esm.fromEvents(this._element, "keydown").filter(() => this.isEnabled());
                      const enterEventStream = keydownEventStream.filter(isEnterOrSpace);
                      this._eventStream.plug(enterEventStream.map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      enterEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                    }
                  }
                  ;
                  class GmailModalViewDriver {
                    constructor(options2) {
                      this._setupModalContainerElement(options2);
                      this._processOptions(options2);
                      this._eventStream = kefir_bus_default()();
                      this._setupEventStream();
                    }
                    destroy() {
                      this._modalContainerElement.remove();
                      this._eventStream.end();
                    }
                    getModalContainerElement() {
                      return this._modalContainerElement;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    _processOptions(options2) {
                      this.setTitle(options2.title);
                      this.setContentElement(options2.el);
                      this.setButtons(options2.buttons || []);
                      this.setChromeClass(options2.chrome, options2.showCloseButton, (options2.buttons || []).length > 0);
                    }
                    setTitle(title) {
                      const heading = (0, querySelectorOrFail.A)(this._modalContainerElement, "[role=heading]");
                      if (!title) {
                        heading.style.display = "none";
                      } else {
                        heading.style.display = "";
                        heading.textContent = title;
                      }
                    }
                    setContentElement(element) {
                      const content = (0, querySelectorOrFail.A)(this._modalContainerElement, ".inboxsdk__modal_content");
                      content.innerHTML = "";
                      if (typeof element === "string") {
                        content.innerHTML = element;
                      } else if (element instanceof Element) {
                        content.appendChild(element);
                      }
                    }
                    setButtons(buttons) {
                      const buttonsEl = (0, querySelectorOrFail.A)(this._modalContainerElement, ".inboxsdk__modal_buttons");
                      buttonsEl.innerHTML = "";
                      if (buttons.length === 0) {
                        buttonsEl.style.display = "none";
                        this._modalContainerElement.classList.add("inboxsdk__modal_content_no_buttons");
                      } else {
                        buttonsEl.style.display = "";
                        this._modalContainerElement.classList.remove("inboxsdk__modal_content_no_buttons");
                      }
                      sortBy_default()(buttons, (button) => button.orderHint || 0).forEach(this._addButton.bind(this, buttonsEl));
                    }
                    setChromeClass(chrome2, showCloseButton, hasButtons) {
                      this._modalContainerElement.classList.remove("inboxsdk__modal_hideSides");
                      this._modalContainerElement.classList.remove("inboxsdk__modal_hideTop");
                      this._modalContainerElement.classList.remove("inboxsdk__modal_hideBottom");
                      if (chrome2 === false) {
                        this._modalContainerElement.classList.add("inboxsdk__modal_hideSides");
                        if (!showCloseButton) {
                          this._modalContainerElement.classList.add("inboxsdk__modal_hideTop");
                        }
                        if (!hasButtons) {
                          this._modalContainerElement.classList.add("inboxsdk__modal_hideBottom");
                        }
                      }
                    }
                    _setupModalContainerElement(options2) {
                      const constrainTitleWidthTopRowClass = options2.constrainTitleWidth ? "inboxsdk__modal_toprow--constrain-title-width" : "";
                      this._modalContainerElement = document.createElement("div");
                      this._modalContainerElement.className = "inboxsdk__modal_fullscreen";
                      var htmlString = `
    <div class="Kj-JD inboxsdk__modal_container" tabindex="0" role="alertdialog">
      <div class="Kj-JD-K7 Kj-JD-K7-GIHV4 inboxsdk__modal_toprow ${constrainTitleWidthTopRowClass}">
        <span class="Kj-JD-K7-K0" role="heading"></span>
        <span class="Kj-JD-K7-Jq inboxsdk__modal_close" tabindex="0" role="button"></span>
      </div>
      <div class="Kj-JD-Jz inboxsdk__modal_content">
      </div>
      <div class="Kj-JD-Jl inboxsdk__modal_buttons"></div>
    </div>
    `;
                      this._modalContainerElement.innerHTML = htmlString;
                    }
                    _addButton(buttonContainer, buttonDescriptor) {
                      const buttonOptions = {
                        ...buttonDescriptor
                      };
                      ["blue", "red", "green"].includes(buttonDescriptor.color) && buttonDescriptor.color;
                      buttonOptions.isPrimary = buttonDescriptor.type === "PRIMARY_ACTION";
                      const buttonView = new ModalButtonView(buttonOptions);
                      buttonOptions.buttonView = buttonView;
                      new basic_button_view_controller.A(buttonOptions);
                      if (buttonDescriptor.type === "PRIMARY_ACTION") {
                        buttonContainer.insertBefore(buttonView.getElement(), buttonContainer.firstElementChild);
                      } else {
                        buttonContainer.appendChild(buttonView.getElement());
                      }
                    }
                    _setupEventStream() {
                      const closeElement = (0, querySelectorOrFail.A)(this._modalContainerElement, ".inboxsdk__modal_close");
                      closeElement.addEventListener("click", (event) => {
                        this._eventStream.emit({
                          eventName: "closeClick",
                          domEvent: event
                        });
                      });
                    }
                  }
                  const gmail_modal_view_driver = GmailModalViewDriver;
                  var mole_view_module = __webpack_require__3(8558);
                  ;
                  var mole_view_module_options = {};
                  mole_view_module_options.styleTagTransform = styleTagTransform_default();
                  mole_view_module_options.setAttributes = setAttributesWithoutAttributes_default();
                  mole_view_module_options.insert = (htmlElement) => {
                    htmlElement.setAttribute(
                      "data-inboxsdk-version",
                      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- this is injected by webpack
                      ///@ts-ignore
                      "2.2.7-1753737313283-f941d482eba8eb97"
                    );
                    document.head.append(htmlElement);
                  };
                  mole_view_module_options.domAPI = styleDomAPI_default();
                  mole_view_module_options.insertStyleElement = insertStyleElement_default();
                  var mole_view_module_update = injectStylesIntoStyleTag_default()(mole_view_module.Ay, mole_view_module_options);
                  const widgets_mole_view_module = mole_view_module.Ay && mole_view_module.Ay.locals ? mole_view_module.Ay.locals : void 0;
                  ;
                  const gmail_mole_view_driver_INBOXSDK_CLASS = "inboxsdk__mole_view";
                  class GmailMoleViewDriver {
                    static #page;
                    static #moleParentReadyEvent = kefir_bus_default()();
                    static #moleParent;
                    static #_ = (() => {
                      this.#page = new (page_parser_tree_js_default())(document, {
                        logError(err, el) {
                          const details = {
                            el,
                            html: el ? (0, censorHTMLtree.A)(el) : null
                          };
                          if (err.message.includes("found element missed by watcher") || err.message.includes("watcher found element already found by finder")) {
                            return;
                          }
                          console.log(err, details);
                        },
                        tags: {
                          mole: {
                            ownedBy: ["moleParent"]
                          }
                        },
                        watchers: [{
                          tag: "mole",
                          selectors: [`${".dw .nH > .nH > .no"} > *:not([style*="order: 0;"], [style*="order: 2147483647;"], .aJl)`],
                          sources: ["moleParent"]
                        }, {
                          tag: "moleParent",
                          selectors: [".dw .nH > .nH > .no"],
                          sources: [null]
                        }],
                        finders: {
                          ["moleParent"]: {
                            fn: (root) => [root.querySelector(".dw .nH > .nH > .no")].filter(isNotNil.A),
                            interval(elementCount, timeRunning) {
                              return timeRunning <= 15e3 && elementCount === 0 ? 100 : 5e3;
                            }
                          },
                          ["mole"]: {
                            fn: (root) => root.querySelectorAll(`${".dw .nH > .nH > .no"} > *:not([style*="order: 0;"], [style*="order: 2147483647;"], .aJl)`),
                            interval(elementCount, timeRunning) {
                              return timeRunning <= 5e3 && elementCount === 0 ? 100 : 5e3;
                            }
                          }
                        }
                      });
                      const moleParent = this.#page.tree.getAllByTag("moleParent");
                      const moleParentLiveSet = moleParent.subscribe((changes) => {
                        for (const change of changes) {
                          switch (change.type) {
                            case "add": {
                              const el = change.value.getValue();
                              this.#moleParent = el;
                              this.#moleParentReadyEvent.emit(el);
                              moleParentLiveSet.unsubscribe();
                            }
                          }
                        }
                      });
                      const moles = this.#page.tree.getAllByTag("mole");
                      moles.subscribe((changes) => {
                        for (const change of changes) {
                          switch (change.type) {
                            case "add": {
                              const el = change.value.getValue();
                              if (el.matches(`${`${".dw .nH > .nH > .no"} > *:not([style*="order: 0;"], [style*="order: 2147483647;"], .aJl)`}.nn.nH`)) {
                                this.#maybeMoveMole(el);
                              }
                              break;
                            }
                          }
                        }
                      });
                    })();
                    /**
                     * This method, among other things, DOES NOT
                     * - preseve initial load order with moles.
                     * - preserve mole order after a mole has been maximized.
                     */
                    static #maybeMoveMole(mole) {
                      const rightSpacer = mole.parentElement?.lastElementChild;
                      if (!(rightSpacer instanceof HTMLElement)) {
                        return;
                      }
                      rightSpacer.insertAdjacentElement("beforebegin", mole);
                    }
                    #driver;
                    #eventStream = kefir_bus_default()();
                    #stopper = js_default()();
                    #element;
                    constructor(driver, options2) {
                      this.#driver = driver;
                      this.#element = Object.assign(document.createElement("div"), {
                        className: classnames_default()(gmail_mole_view_driver_INBOXSDK_CLASS, mole_view_module.iW, options2.className),
                        innerHTML: getHTMLString(options2)
                      });
                      if (options2.chrome === false) {
                        this.#element.classList.add("inboxsdk__mole_view_chromeless");
                      } else {
                        (0, querySelectorOrFail.A)(this.#element, ".inboxsdk__mole_view_titlebar").addEventListener("click", (e) => {
                          this.setMinimized(!this.getMinimized());
                          e.preventDefault();
                          e.stopPropagation();
                        });
                        const minimizeBtn = (0, querySelectorOrFail.A)(this.#element, ".Hl");
                        minimizeBtn.addEventListener("click", (e) => {
                          this.setMinimized(true);
                          e.preventDefault();
                          e.stopPropagation();
                        });
                        const maximizeBtn = (0, querySelectorOrFail.A)(this.#element, ".Hk");
                        maximizeBtn.addEventListener("click", (e) => {
                          this.setMinimized(false);
                          e.preventDefault();
                          e.stopPropagation();
                        });
                        const closeBtn = (0, querySelectorOrFail.A)(this.#element, ".Ha");
                        closeBtn.addEventListener("click", (e) => {
                          this.destroy();
                          e.preventDefault();
                          e.stopPropagation();
                        });
                        if (options2.titleEl) {
                          this.#setTitleEl(options2.titleEl);
                        } else {
                          this.setTitle(options2.title || "");
                        }
                        if (options2.minimizedTitleEl) {
                          this.#setMinimizedTitleEl(options2.minimizedTitleEl);
                        }
                        const titleButtons = options2.titleButtons;
                        if (titleButtons) {
                          const titleButtonContainer = (0, querySelectorOrFail.A)(this.#element, ".inboxsdk__mole_title_buttons");
                          const lastChild = titleButtonContainer.lastElementChild;
                          titleButtons.forEach((titleButton) => {
                            const img = document.createElement("img");
                            if (titleButton.iconClass) {
                              img.className = titleButton.iconClass;
                            }
                            img.setAttribute("data-tooltip", titleButton.title);
                            img.addEventListener("click", (event) => {
                              event.preventDefault();
                              event.stopPropagation();
                              titleButton.onClick.call(null);
                            });
                            if (titleButton.iconUrl) {
                              img.src = titleButton.iconUrl;
                            }
                            titleButtonContainer.insertBefore(img, lastChild);
                          });
                        }
                      }
                      (0, querySelectorOrFail.A)(this.#element, ".inboxsdk__mole_view_content").appendChild(options2.el);
                    }
                    #doShow = (moleParent) => {
                      const insertBefore = moleParent.lastElementChild;
                      if (insertBefore instanceof HTMLElement) {
                        moleParent.insertBefore(this.#element, insertBefore);
                      } else if (!insertBefore) {
                        moleParent.appendChild(this.#element);
                      } else {
                        this.#driver.logger.error(new Error("Mole show invariant violated. `lastMole` is not an HTMLElement"));
                        return;
                      }
                      const dw = moleParent.closest("div.dw");
                      if (dw) {
                        dw.classList.add("inboxsdk__moles_in_use", mole_view_module.jq);
                      }
                    };
                    show() {
                      const moleParent = GmailMoleViewDriver.#moleParent;
                      if (moleParent) {
                        this.#doShow(moleParent);
                        return;
                      }
                      const moleParentReadyEvent = GmailMoleViewDriver.#moleParentReadyEvent.takeUntilBy(this.#stopper).onValue(this.#doShow);
                      kefir_esm.fromPromise(gmail_element_getter.A.waitForGmailModeToSettle()).flatMap(() => {
                        return this.#driver.delayToTimeAfterReady(5e3);
                      }).takeUntilBy(moleParentReadyEvent).takeUntilBy(this.#stopper).onValue(async () => {
                        this.#driver.getLogger().eventSdkActive("mole parent force load");
                        try {
                          document.body.classList.add(mole_view_module.iy);
                          const gmailComposeView = await this.#driver.openNewComposeViewDriver();
                          gmailComposeView.discard();
                        } finally {
                          document.body.classList.remove(mole_view_module.iy);
                        }
                      });
                    }
                    /**
                     * If the mole is off the left edge of the screen, then move it to the
                     * right.
                     */
                    #moveToRightmostPosition() {
                      if (this.#element.getBoundingClientRect().left >= 0) {
                        return;
                      }
                      const rightSpacer = this.#element.parentElement?.lastElementChild;
                      if (!(rightSpacer instanceof HTMLElement)) {
                        return;
                      }
                      rightSpacer.insertAdjacentElement("beforebegin", this.#element);
                    }
                    setMinimized(minimized) {
                      if (minimized) {
                        this.#element.classList.add("inboxsdk__minimized");
                        this.#eventStream.emit({
                          eventName: "minimize"
                        });
                      } else {
                        this.#element.classList.remove("inboxsdk__minimized");
                        this.#moveToRightmostPosition();
                        this.#eventStream.emit({
                          eventName: "restore"
                        });
                      }
                    }
                    getMinimized() {
                      return this.#element.classList.contains("inboxsdk__minimized");
                    }
                    setTitle(text) {
                      const titleElement = this.#element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");
                      if (titleElement) {
                        titleElement.textContent = text;
                      }
                    }
                    #setTitleEl(el) {
                      const container = this.#element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");
                      if (container) {
                        container.textContent = "";
                        container.appendChild(el);
                      }
                    }
                    #setMinimizedTitleEl(el) {
                      const container = this.#element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_minimized");
                      if (container) {
                        this.#element.classList.add("inboxsdk__mole_use_minimize_title");
                        container.textContent = "";
                        container.appendChild(el);
                      }
                    }
                    getEventStream() {
                      return this.#eventStream;
                    }
                    destroy() {
                      this.#element.remove();
                      this.#eventStream.end();
                      this.#stopper.destroy();
                    }
                  }
                  const gmail_mole_view_driver = GmailMoleViewDriver;
                  function getHTMLString(options2) {
                    const originalView = !is_compose_titlebar_light_color();
                    return `
    <div class="inboxsdk__mole_view_inner ${originalView ? "inboxsdk__original_view" : ""}">
      ${getTitleHTMLString(options2)}
      <div class="inboxsdk__mole_view_content ${originalView ? "inboxsdk__original_view" : ""}"></div>
    </div>
  `;
                  }
                  function getTitleHTMLString(options2) {
                    if (options2.chrome === false) {
                      return "";
                    } else {
                      const originalView = !is_compose_titlebar_light_color();
                      return `
      <div class="inboxsdk__mole_view_titlebar${originalView ? " inboxsdk__original_view" : ""}">
        <div class="inboxsdk__mole_title_buttons${originalView ? " inboxsdk__original_view" : ""}">
          <img class="Hl" src="images/cleardot.gif" alt="Minimize" aria-label="Minimize" data-tooltip-delay="800" data-tooltip="Minimize"><img class="Hk" id=":rp" src="images/cleardot.gif" alt="Minimize" aria-label="Maximize" data-tooltip-delay="800" data-tooltip="Maximize"><!--<img class="Hq aUG" src="images/cleardot.gif" alt="Pop-out" aria-label="Full-screen (Shift for Pop-out)" data-tooltip-delay="800" data-tooltip="Full-screen (Shift for Pop-out)">--><img class="Ha" src="images/cleardot.gif" alt="Close" aria-label="Close" data-tooltip-delay="800" data-tooltip="Close">
        </div>
        <h2 class="inboxsdk__mole_default"></h2>
        <h2 class="inboxsdk__mole_minimized"></h2>
      </div>`;
                    }
                  }
                  ;
                  class InboxBackdrop {
                    _preAutoCloseStream = kefir_bus_default()();
                    _stopper = js_default()();
                    constructor() {
                      let zIndex2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 500;
                      let target = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : document.body;
                      const el = this._el = document.createElement("div");
                      el.className = "inboxsdk__inbox_backdrop";
                      el.style.zIndex = String(zIndex2);
                      kefir_esm.fromEvents(el, "click").filter((event) => {
                        let isCanceled = false;
                        const appEvent = {
                          type: "outsideInteraction",
                          cause: event,
                          cancel: () => {
                            isCanceled = true;
                          }
                        };
                        this._preAutoCloseStream.emit(appEvent);
                        return !isCanceled;
                      }).onValue(() => {
                        this.destroy();
                      });
                      if (!target) throw new Error("no target");
                      target.appendChild(el);
                      this._stopper.onValue(() => {
                        el.classList.remove("inboxsdk__active");
                        kefir_esm.fromEvents(el, "transitionend").merge(kefir_esm.later(200, void 0)).take(1).onValue(() => {
                          el.remove();
                        });
                      });
                      el.offsetHeight;
                      el.classList.add("inboxsdk__active");
                    }
                    getElement() {
                      return this._el;
                    }
                    getPreAutoCloseStream() {
                      return this._preAutoCloseStream;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    destroy() {
                      this._preAutoCloseStream.end();
                      this._stopper.destroy();
                    }
                  }
                  const inbox_backdrop = InboxBackdrop;
                  ;
                  const TAKE_OVER_EVENT = "inboxSDKdrawerViewTakingOver";
                  const zIndex = 500;
                  class InboxDrawerView {
                    _backdrop = null;
                    _closing = js_default()();
                    _closed = js_default()();
                    _composeChanges = kefir_bus_default()();
                    _preAutoCloseStream = kefir_bus_default()();
                    constructor(options2) {
                      this._chrome = typeof options2.chrome === "boolean" ? options2.chrome : true;
                      let insertionTarget = document.body;
                      let composeRect = null;
                      const {
                        composeView,
                        closeWithCompose
                      } = options2;
                      if (composeView) {
                        const ret2 = this._setupComposeInsertionTarget(composeView, closeWithCompose);
                        insertionTarget = ret2.insertionTarget;
                        composeRect = ret2.composeRect;
                      }
                      this._setupElement(options2, insertionTarget);
                      let composeNeedToMoveLeft = 0;
                      if (composeView) {
                        if (!composeRect) throw new Error("should not happen");
                        composeNeedToMoveLeft = this._setupComposeAnimation(composeView, composeRect, true);
                      }
                      this._el.offsetHeight;
                      this._el.classList.add("inboxsdk__active");
                      this._slideAnimationDone = kefir_esm.fromEvents(this._el, "transitionend").take(1).takeUntilBy(this._closing).map(() => null);
                      if (composeView) {
                        this._positionCompose(composeView, composeNeedToMoveLeft);
                      }
                      (0, from_event_target_capture.A)(document, "keydown").filter((e) => e.key ? e.key === "Escape" : e.which === 27).takeUntilBy(this._closing).onValue((e) => {
                        const origPreventDefault = e.preventDefault;
                        e.preventDefault = function() {
                          this._defaultPreventedInContext = true;
                          return origPreventDefault.call(this);
                        };
                      });
                      kefir_esm.fromEvents(document, "keydown").filter((e) => e.key ? e.key === "Escape" : e.which === 27).filter((e) => !e._defaultPreventedInContext).filter((event) => {
                        let isCanceled = false;
                        const appEvent = {
                          type: "escape",
                          cause: event,
                          cancel: () => {
                            isCanceled = true;
                          }
                        };
                        this._preAutoCloseStream.emit(appEvent);
                        return !isCanceled;
                      }).takeUntilBy(this._closing).onValue(() => {
                        this.close();
                      });
                    }
                    _setupComposeInsertionTarget(composeView, closeWithCompose) {
                      if (composeView.isMinimized()) {
                        throw new Error("Can't attach DrawerView to minimized ComposeView");
                      }
                      if (composeView.isInlineReplyForm()) {
                        throw new Error("Can't attach DrawerView to inline ComposeView");
                      }
                      if (composeView.isFullscreen()) {
                        composeView.setFullscreen(false);
                      }
                      const closeEvents = [kefir_esm.fromEvents(composeView, "restored"), kefir_esm.later(10, void 0).flatMap(() => kefir_esm.fromEvents(composeView, "fullscreenChanged"))];
                      if (closeWithCompose) {
                        closeEvents.push(kefir_esm.fromEvents(composeView, "destroy"), kefir_esm.fromEvents(composeView, "minimized"));
                      }
                      kefir_esm.merge(closeEvents).takeUntilBy(this._closing.merge(this._composeChanges)).onValue(() => this.close());
                      const composeEl = composeView.getElement();
                      const composeRect = composeEl.getBoundingClientRect();
                      const composeOffsetParent = composeEl.offsetParent;
                      if (!(composeOffsetParent instanceof HTMLElement)) throw new Error("should not happen");
                      const insertionTarget = findParent(composeOffsetParent, (el) => window.getComputedStyle(el).getPropertyValue("z-index") !== "auto" && el.getBoundingClientRect().left === 0) || document.body;
                      composeEl.dispatchEvent(new CustomEvent(TAKE_OVER_EVENT, {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      composeOffsetParent.dispatchEvent(new CustomEvent(TAKE_OVER_EVENT, {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      insertionTarget.dispatchEvent(new CustomEvent(TAKE_OVER_EVENT, {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      insertionTarget.classList.add("inboxsdk__drawers_in_use");
                      insertionTarget.style.zIndex = String(zIndex);
                      if (!composeOffsetParent.hasAttribute("data-drawer-old-zindex")) {
                        composeOffsetParent.setAttribute("data-drawer-old-zindex", composeOffsetParent.style.zIndex);
                      }
                      composeOffsetParent.style.zIndex = String(zIndex + 2);
                      this._closed.takeUntilBy(kefir_esm.fromEvents(insertionTarget, TAKE_OVER_EVENT)).onValue(() => {
                        insertionTarget.style.zIndex = "";
                      });
                      this._closed.merge(this._composeChanges).takeUntilBy(kefir_esm.fromEvents(composeOffsetParent, TAKE_OVER_EVENT)).onValue(() => {
                        composeOffsetParent.style.zIndex = composeOffsetParent.getAttribute("data-drawer-old-zindex") || "";
                        composeOffsetParent.removeAttribute("data-drawer-old-zindex");
                      });
                      return {
                        composeRect,
                        insertionTarget
                      };
                    }
                    _setupElement(options2, insertionTarget) {
                      const backdrop = this._backdrop = new inbox_backdrop(zIndex, insertionTarget);
                      this._preAutoCloseStream.plug(backdrop.getPreAutoCloseStream());
                      backdrop.getStopper().takeUntilBy(this._closing).onValue(() => {
                        this.close();
                      });
                      this._containerEl = document.createElement("div");
                      this._containerEl.className = "inboxsdk__drawer_view_container";
                      this._containerEl.style.zIndex = String(zIndex + 1);
                      this._el = document.createElement("div");
                      this._el.setAttribute("role", "dialog");
                      this._el.tabIndex = 0;
                      this._el.className = "inboxsdk__drawer_view";
                      if (options2.matchSidebarContentPanelWidth) {
                        this._el.classList.add("inboxsdk__match_sidebar_content_panel_width");
                      }
                      this._containerEl.appendChild(this._el);
                      if (this._chrome) {
                        const titleBar = document.createElement("div");
                        titleBar.className = "inboxsdk__drawer_title_bar";
                        const closeButton = document.createElement("button");
                        closeButton.type = "button";
                        closeButton.title = "Close";
                        closeButton.className = "inboxsdk__close_button";
                        closeButton.addEventListener("click", () => {
                          this.close();
                        });
                        titleBar.appendChild(closeButton);
                        const title = document.createElement("div");
                        title.className = "inboxsdk__drawer_title";
                        title.setAttribute("role", "heading");
                        title.textContent = options2.title || "";
                        titleBar.appendChild(title);
                        this._el.appendChild(titleBar);
                      }
                      this._el.appendChild(options2.el);
                      insertionTarget.appendChild(this._containerEl);
                      this._closing.onValue(() => {
                        if (this._backdrop) this._backdrop.destroy();
                        this._el.classList.remove("inboxsdk__active");
                        kefir_esm.fromEvents(this._el, "transitionend").merge(kefir_esm.later(200, void 0)).take(1).onValue(() => {
                          this._closed.destroy();
                          this._containerEl.remove();
                        });
                      });
                    }
                    _setupComposeAnimation(composeView, composeRect, forceLayout) {
                      const composeEl = composeView.getElement();
                      const parentEl = composeEl.parentElement;
                      const drawerRect = this._el.getBoundingClientRect();
                      const margin = 24;
                      const preexistingLeftAdjustment = parseInt(parentEl.style.left) || 0;
                      const composeNeedToMoveLeft = composeRect.right - preexistingLeftAdjustment - (window.innerWidth - drawerRect.width - margin);
                      if (composeNeedToMoveLeft > 0) {
                        parentEl.style.position = "relative";
                        parentEl.style.transition = "left 150ms cubic-bezier(.4,0,.2,1)";
                        parentEl.style.left = "0";
                        if (forceLayout) {
                          parentEl.offsetHeight;
                        }
                      }
                      return composeNeedToMoveLeft;
                    }
                    _positionCompose(composeView, composeNeedToMoveLeft) {
                      if (composeNeedToMoveLeft > 0) {
                        const composeEl = composeView.getElement();
                        const parentEl = composeEl.parentElement;
                        parentEl.style.left = `${-composeNeedToMoveLeft}px`;
                        this._closing.takeUntilBy(this._composeChanges).takeUntilBy(kefir_esm.fromEvents(composeEl, TAKE_OVER_EVENT)).onValue(() => {
                          parentEl.style.left = "0";
                        }).flatMap(
                          () => kefir_esm.fromEvents(parentEl, "transitionend").merge(kefir_esm.later(200, void 0))
                          // transition might not finish if element is hidden
                        ).merge(this._composeChanges).take(1).takeUntilBy(kefir_esm.fromEvents(composeEl, TAKE_OVER_EVENT)).onValue(() => {
                          parentEl.style.position = "";
                          parentEl.style.left = "";
                          parentEl.style.transition = "";
                        });
                      }
                    }
                    associateComposeView(composeView, closeWithCompose) {
                      this._composeChanges.emit(null);
                      const {
                        insertionTarget,
                        composeRect
                      } = this._setupComposeInsertionTarget(composeView, closeWithCompose);
                      if (this._backdrop) insertionTarget.appendChild(this._backdrop.getElement());
                      if (this._containerEl.parentElement !== insertionTarget) insertionTarget.appendChild(this._containerEl);
                      const composeNeedToMoveLeft = this._setupComposeAnimation(composeView, composeRect, false);
                      this._positionCompose(composeView, composeNeedToMoveLeft);
                    }
                    disassociateComposeView() {
                      this._composeChanges.emit(null);
                    }
                    getSlideAnimationDone() {
                      return this._slideAnimationDone;
                    }
                    getClosingStream() {
                      return this._closing;
                    }
                    getClosedStream() {
                      return this._closed;
                    }
                    getPreAutoCloseStream() {
                      return this._preAutoCloseStream;
                    }
                    close() {
                      this._closing.destroy();
                    }
                  }
                  const inbox_drawer_view = InboxDrawerView;
                  ;
                  class GmailRouteProcessor {
                    _routeNameToRouteIDMap = null;
                    _routeNameToRouteIDMaps = null;
                    _compatibleRouteIDMap = null;
                    constructor() {
                      this._setupRouteNameToRouteIDMap();
                      this._setupCompatibleRouteIDMap();
                    }
                    NativeRouteIDs = router.Vi;
                    NativeListRouteIDs = router.Kc;
                    RouteTypes = router.Cs;
                    isListRouteName(routeName) {
                      var routeID = this.getRouteID(routeName);
                      if (!routeID) {
                        return false;
                      }
                      return includes_default()(Object.values(router.Kc), routeID);
                    }
                    isSettingsRouteName(routeName) {
                      return this._routeNameToRouteIDMap[routeName] === this.NativeRouteIDs.SETTINGS;
                    }
                    isContactRouteName(routeName) {
                      return this._routeNameToRouteIDMap[routeName] === this.NativeRouteIDs.CONTACTS || this._routeNameToRouteIDMap[routeName] === this.NativeRouteIDs.CONTACT;
                    }
                    getRouteID(routeName) {
                      var routeID = this._routeNameToRouteIDMap[routeName];
                      return routeID ? routeID : null;
                    }
                    getRouteName(routeID) {
                      for (var key in this._routeNameToRouteIDMaps) {
                        if (this._routeNameToRouteIDMap[key] === routeID) {
                          return key;
                        }
                      }
                      return null;
                    }
                    isNativeRoute(routeName) {
                      return !!this._routeNameToRouteIDMap[routeName];
                    }
                    getCompatibleRouteID(routeID) {
                      return this._compatibleRouteIDMap[routeID] || routeID;
                    }
                    _setupRouteNameToRouteIDMap() {
                      this._routeNameToRouteIDMap = {
                        inbox: this.NativeRouteIDs.INBOX,
                        section_query: this.NativeRouteIDs.SEARCH,
                        all: this.NativeRouteIDs.ALL_MAIL,
                        imp: this.NativeRouteIDs.IMPORTANT,
                        contacts: this.NativeRouteIDs.CONTACTS,
                        contact: this.NativeRouteIDs.CONTACT,
                        sent: this.NativeRouteIDs.SENT,
                        starred: this.NativeRouteIDs.STARRED,
                        snoozed: this.NativeRouteIDs.SNOOZED,
                        drafts: this.NativeRouteIDs.DRAFTS,
                        label: this.NativeRouteIDs.LABEL,
                        category: this.NativeRouteIDs.LABEL,
                        search: this.NativeRouteIDs.SEARCH,
                        "advanced-search": this.NativeRouteIDs.SEARCH,
                        trash: this.NativeRouteIDs.TRASH,
                        spam: this.NativeRouteIDs.SPAM,
                        apps: this.NativeRouteIDs.SEARCH,
                        circle: this.NativeRouteIDs.LABEL,
                        settings: this.NativeRouteIDs.SETTINGS,
                        chats: this.NativeRouteIDs.CHATS,
                        // new Gmail stuff
                        scheduled: this.NativeRouteIDs.SCHEDULED,
                        // these are added as part of new gmail redesign -- FEB 2023
                        chat: this.NativeRouteIDs.CHAT_WELCOME,
                        rooms: this.NativeRouteIDs.SPACES_WELCOME,
                        calls: this.NativeRouteIDs.MEET
                      };
                    }
                    _setupCompatibleRouteIDMap() {
                      this._compatibleRouteIDMap = {};
                      this._compatibleRouteIDMap[this.NativeRouteIDs.INBOX] = "inbox/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.ALL_MAIL] = "all/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.SENT] = "sent/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.STARRED] = "starred/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.DRAFTS] = "drafts/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.LABEL] = "label/:labelName/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.TRASH] = "trash/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.SPAM] = "spam/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.IMPORTANT] = "imp/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.SEARCH] = "search/:query/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.THREAD] = this.NativeRouteIDs.THREAD;
                      this._compatibleRouteIDMap[this.NativeRouteIDs.CHATS] = "chats/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.CHAT] = this.NativeRouteIDs.CHAT;
                      this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACTS] = "contacts/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACT] = this.NativeRouteIDs.CONTACT;
                      this._compatibleRouteIDMap[this.NativeRouteIDs.SETTINGS] = this.NativeRouteIDs.SETTINGS;
                    }
                  }
                  ;
                  class KeyboardShortcutHelpModifier {
                    constructor() {
                      this._appId = null;
                      this._appName = null;
                      this._appIconUrl = null;
                      this._stopper = js_default()();
                      this._shortcuts = /* @__PURE__ */ new Set();
                      this._monitorKeyboardHelp();
                    }
                    destroy() {
                      this._stopper.destroy();
                      this._shortcuts.clear();
                    }
                    set(keyboardShortcutHandle, appId, appName, appIconUrl) {
                      this._initializeAppValues(appId, appName, appIconUrl);
                      this._shortcuts.add(keyboardShortcutHandle);
                    }
                    delete(keyboardShortcutHandle) {
                      this._shortcuts.delete(keyboardShortcutHandle);
                    }
                    _initializeAppValues(appId, appName, appIconUrl) {
                      if (!this._appId) {
                        this._appId = appId;
                      }
                      if (!this._appName) {
                        this._appName = appName;
                      }
                      if (!this._appIconUrl) {
                        this._appIconUrl = appIconUrl;
                      }
                    }
                    _monitorKeyboardHelp() {
                      (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node && node.classList && node.classList.contains("wa")).flatMap((node) => (0, make_mutation_observer_chunked_stream.A)(node, {
                        attributes: true,
                        attributeFilter: ["class"]
                      }).filter(() => !node.classList.contains("aou")).toProperty(() => null).map(() => node)).takeUntilBy(this._stopper).onValue((node) => this._renderHelp(node));
                    }
                    _renderHelp(node) {
                      if (this._shortcuts.size === 0) {
                        return;
                      }
                      this._shortcuts.keys();
                      var header = this._renderHeader();
                      var table = this._renderTable();
                      var bodies = table.querySelectorAll("tbody tbody");
                      var index = 0;
                      this._shortcuts.forEach((keyboardShortcutHandle) => {
                        this._renderShortcut(bodies[index % 2], keyboardShortcutHandle);
                        index++;
                      });
                      const firstHeader = (0, querySelectorOrFail.A)(node, ".aov");
                      const parent = firstHeader.parentElement;
                      if (!parent) throw new Error("Could not find parent");
                      parent.insertBefore(header, firstHeader);
                      parent.insertBefore(table, firstHeader);
                    }
                    _renderHeader() {
                      const header = document.createElement("div");
                      header.setAttribute("class", "aov  aox");
                      header.innerHTML = ['<div class="aow">', '<span class="inboxsdk__shortcutHelp_title">', escape_default()(this._appName || this._appId) + " keyboard shortcuts", "</span>", "</div>"].join("");
                      if (this._appIconUrl) {
                        const img = document.createElement("img");
                        if (this._appIconUrl) {
                          img.src = this._appIconUrl;
                        }
                        img.setAttribute("class", "inboxsdk__icon");
                        const title = (0, querySelectorOrFail.A)(header, ".inboxsdk__shortcutHelp_title");
                        title.insertBefore(img, title.firstChild);
                      }
                      return header;
                    }
                    _renderTable() {
                      var table = document.createElement("table");
                      table.setAttribute("cellpadding", "0");
                      table.setAttribute("class", "cf wd inboxsdk__shortcutHelp_table");
                      table.innerHTML = ["<tbody>", "<tr>", '<td class="Dn">', '<table cellpadding="0" class="cf">', "<tbody>", "<tr><th>&nbsp;</th><th>&nbsp;</th></tr>", "</tbody>", "</table>", "</td>", '<td class="Dn">', '<table cellpadding="0" class="cf">', "<tbody>", "<tr><th>&nbsp;</th><th>&nbsp;</th></tr>", "</tbody>", "</table>", "</td>", "</tr", "</tbody>"].join("");
                      return table;
                    }
                    _renderShortcut(tableBody, keyboardShortcutHandle) {
                      var shortcutRow = document.createElement("tr");
                      shortcutRow.innerHTML = ['<td class="wg Dn"> ', _getShortcutHTML(keyboardShortcutHandle.chord), "</td>", '<td class="we Dn"> ', escape_default()(keyboardShortcutHandle.description || ""), "</td>"].join("");
                      tableBody.appendChild(shortcutRow);
                    }
                  }
                  function _getShortcutHTML(chord) {
                    const retArray = [];
                    const parts = chord.split(/[\s+]/g);
                    const separators = chord.match(/[\s+]/g);
                    for (var ii = 0; ii < parts.length; ii++) {
                      retArray.push('<span class="wh">' + escape_default()(_getAngledBracket(parts[ii])) + "</span>");
                      if (separators && separators[ii]) {
                        retArray.push(_getSeparatorHTML(separators[ii]));
                      }
                    }
                    retArray.push(" :");
                    return retArray.join("");
                  }
                  function _getAngledBracket(chordChar) {
                    switch (chordChar.toLowerCase()) {
                      case "shift":
                        return "<Shift>";
                      case "ctrl":
                        return "<Ctrl>";
                      case "alt":
                        return "<Alt>";
                      case "meta":
                      case "command":
                        return "<\u2318>";
                      case "mod":
                        return /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "<\u2318>" : "<Ctrl>";
                      default:
                        return chordChar;
                    }
                  }
                  function _getSeparatorHTML(separator) {
                    switch (separator) {
                      case " ":
                        return '<span class="wb">then</span> ';
                      case "+":
                        return ' <span class="wb">+</span> ';
                      default:
                        return "";
                    }
                  }
                  var getSyncThreadsForSearch = __webpack_require__3(6743);
                  var dist = __webpack_require__3(6408);
                  ;
                  var Buffer2 = __webpack_require__3(2313)["Buffer"];
                  const B64_ALPHABET = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
                  const GMAIL_ALPHABET = "BCDFGHJKLMNPQRSTVWXZbcdfghjklmnpqrstvwxz";
                  function encodeDraftUrlId(syncThreadId, syncMessageId) {
                    const raw = `${syncThreadId.replace(/^thread-/, "")}+${syncMessageId}`;
                    const b64 = Buffer2.from(raw).toString("base64").replace(/=/g, "");
                    return (0, dist.convertBase)(b64, B64_ALPHABET, GMAIL_ALPHABET);
                  }
                  var getOriginalMessagePage = __webpack_require__3(2903);
                  var html_to_text = __webpack_require__3(6305);
                  ;
                  async function getRfcMessageIdForGmailMessageId(driver, gmailMessageId) {
                    const text = await (0, getOriginalMessagePage.A)(driver, {
                      oldGmailMessageID: gmailMessageId
                    });
                    const match = text.match(/^Message-ID:\s+(\S+)\s*$/im);
                    if (!match) {
                      throw new Error("Failed to find rfc id for gmail thread id. Message may not exist in user's account.");
                    }
                    return (0, html_to_text.A)(match[1]);
                  }
                  ;
                  async function openDraftByMessageID(driver, messageID) {
                    const rfcMessageID = await getRfcMessageIdForGmailMessageId(driver, messageID);
                    const {
                      threads
                    } = await (0, getSyncThreadsForSearch.A)(driver, "rfc822msgid:" + rfcMessageID);
                    if (threads.length === 0) {
                      throw new Error("Failed to get sync message id");
                    }
                    const thread = threads[0];
                    const syncMessageData = thread.extraMetaData.syncMessageData.find((m) => m.oldMessageID === messageID);
                    if (!syncMessageData) {
                      throw new Error("Failed to find syncMessageData");
                    }
                    const {
                      syncMessageID
                    } = syncMessageData;
                    const newHash = makeNewSyncHash(window.location.hash, thread.syncThreadID, syncMessageID);
                    window.location.hash = newHash;
                  }
                  function makeNewHash(oldHash, messageID) {
                    oldHash = "#" + oldHash.replace(/^#/, "");
                    const [pre, query] = oldHash.split("?");
                    const params = qs.parse(query);
                    if (params.compose) {
                      params.compose += "," + messageID;
                    } else {
                      params.compose = messageID;
                    }
                    return pre + "?" + qs.stringify(params);
                  }
                  function makeNewSyncHash(oldHash, syncThreadID, syncMessageID) {
                    oldHash = "#" + oldHash.replace(/^#/, "");
                    const [pre, query] = oldHash.split("?");
                    const params = querystring_es3.parse(query);
                    params.compose = encodeDraftUrlId(syncThreadID, syncMessageID);
                    return pre + "?" + querystring_es3.stringify(params);
                  }
                  var uniqBy = __webpack_require__3(8496);
                  var uniqBy_default = /* @__PURE__ */ __webpack_require__3.n(uniqBy);
                  ;
                  class UserInfo {
                    #userEmail;
                    constructor(driver) {
                      this.#userEmail = driver.getUserEmailAddress();
                    }
                    /** @deprecated */
                    getUserName() {
                      const nameEl = document.querySelector("div.gb_w div.gb_B .gb_D");
                      if (nameEl) {
                        return nameEl.textContent;
                      }
                      const contact = find_default()(this.getAccountSwitcherContactList(), (contact2) => contact2.emailAddress === this.#userEmail);
                      if (contact && contact.name != null) {
                        return contact.name;
                      }
                      return this.#userEmail;
                    }
                    /** @deprecated */
                    getAccountSwitcherContactList() {
                      const main = Array.from(document.querySelectorAll('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."]')).slice(0, 1).map((btn) => {
                        const btnParent = btn.parentElement;
                        const nameEl = btnParent.children[0];
                        const emailAddressEl = btnParent.children[1];
                        if (!nameEl || !emailAddressEl) return null;
                        return {
                          name: nameEl.textContent,
                          emailAddress: emailAddressEl.textContent
                        };
                      }).filter(isNotNil.A);
                      const extras = Array.from(document.querySelectorAll('[role=banner] div[aria-label] div > a[target="_blank"] > img + div')).map((el) => {
                        const match = el.children[1].textContent.match(/\S+/);
                        if (!match) {
                          throw new Error("Failed to match");
                        }
                        return {
                          name: el.children[0].textContent,
                          emailAddress: match[0]
                        };
                      });
                      return uniqBy_default()(main.concat(extras), (x2) => x2.emailAddress.toLowerCase());
                    }
                  }
                  ;
                  const gmail_butter_bar_driver_elements = (0, stream_wait_for.A)(() => document.body.querySelector('div.b8[role="alert"]')).map((noticeContainer) => {
                    const googleNotice = (0, querySelectorOrFail.A)(noticeContainer, ".vh:not(.inboxsdk__butterbar)");
                    let sdkNotice = noticeContainer.querySelector(".vh.inboxsdk__butterbar");
                    if (!sdkNotice) {
                      sdkNotice = document.createElement("div");
                      sdkNotice.classList.add("vh", "inboxsdk__butterbar");
                      sdkNotice.style.display = "none";
                      const textAndButtonsContainer = document.createElement("span");
                      textAndButtonsContainer.classList.add("aT");
                      const textContainer = document.createElement("span");
                      textContainer.classList.add("inboxsdk__butterbar-text", "bAq");
                      const buttonsContainer = document.createElement("span");
                      buttonsContainer.classList.add("inboxsdk__butterbar-buttons", "bAo");
                      buttonsContainer.innerHTML = "&nbsp;&nbsp;";
                      const noticeCloseButton = document.createElement("div");
                      noticeCloseButton.classList.add("inboxsdk__butterbar-close", "bBe");
                      noticeCloseButton.innerHTML = '<div class="bBf"></div>';
                      noticeCloseButton.setAttribute("role", "button");
                      noticeCloseButton.tabIndex = 0;
                      textAndButtonsContainer.appendChild(textContainer);
                      textAndButtonsContainer.appendChild(buttonsContainer);
                      sdkNotice.appendChild(textAndButtonsContainer);
                      sdkNotice.appendChild(noticeCloseButton);
                      const parentNode = googleNotice.parentNode;
                      if (!parentNode) {
                        throw new Error("parentNode not found");
                      }
                      parentNode.insertBefore(sdkNotice, googleNotice.nextSibling);
                    }
                    return {
                      noticeContainer,
                      googleNotice,
                      sdkNotice
                    };
                  }).toProperty();
                  const googleNoticeMutationChunks = gmail_butter_bar_driver_elements.flatMapLatest((_ref) => {
                    let {
                      googleNotice
                    } = _ref;
                    return (0, make_mutation_observer_chunked_stream.A)(googleNotice, {
                      childList: true
                    });
                  });
                  const googleAddedNotice = googleNoticeMutationChunks.filter((mutations) => mutations.some((m) => m.addedNodes.length > 0));
                  const googleRemovedNotice = googleNoticeMutationChunks.filter((mutations) => !mutations.some((m) => m.addedNodes.length > 0));
                  const sdkRemovedNotice = gmail_butter_bar_driver_elements.flatMapLatest((_ref2) => {
                    let {
                      sdkNotice
                    } = _ref2;
                    return (0, make_mutation_observer_chunked_stream.A)(sdkNotice, {
                      attributes: true,
                      attributeFilter: ["data-inboxsdk-id"]
                    }).map(() => sdkNotice.getAttribute("data-inboxsdk-id"));
                  }).filter((id) => id == null);
                  const noticeAvailableStream = kefir_esm.merge([googleRemovedNotice, sdkRemovedNotice]);
                  function hideMessage(noticeContainer, googleNotice, sdkNotice) {
                    googleNotice.style.display = "";
                    noticeContainer.style.top = "-10000px";
                    noticeContainer.style.position = "relative";
                    noticeContainer.classList.remove("bAp");
                    sdkNotice.style.display = "none";
                    sdkNotice.removeAttribute("data-inboxsdk-id");
                  }
                  class GmailButterBarDriver {
                    constructor() {
                      kefir_esm.combine([gmail_butter_bar_driver_elements, googleAddedNotice]).onValue((_ref3) => {
                        let [{
                          googleNotice,
                          sdkNotice
                        }] = _ref3;
                        googleNotice.style.display = "";
                        sdkNotice.style.display = "none";
                        sdkNotice.setAttribute("data-inboxsdk-id", "gmail");
                      });
                      noticeAvailableStream.onValue(() => {
                      });
                    }
                    getNoticeAvailableStream() {
                      return noticeAvailableStream;
                    }
                    getSharedMessageQueue() {
                      const attr = document.head.getAttribute("data-inboxsdk-butterbar-queue");
                      return attr ? JSON.parse(attr) : [];
                    }
                    setSharedMessageQueue(queue) {
                      const attr = JSON.stringify(queue);
                      document.head.setAttribute("data-inboxsdk-butterbar-queue", attr);
                    }
                    // Immediately displays the message, overriding anything else on the screen.
                    // Priority and queuing logic is handled by butter-bar.js above this.
                    showMessage(rawOptions) {
                      const instanceId = Date.now() + "-" + Math.random();
                      const destroy = () => {
                        gmail_butter_bar_driver_elements.take(1).onValue((_ref4) => {
                          let {
                            noticeContainer,
                            googleNotice,
                            sdkNotice
                          } = _ref4;
                          if (sdkNotice.getAttribute("data-inboxsdk-id") === instanceId) {
                            if (rawOptions.className) {
                              sdkNotice.classList.remove(rawOptions.className);
                            }
                            hideMessage(noticeContainer, googleNotice, sdkNotice);
                          }
                        });
                      };
                      gmail_butter_bar_driver_elements.take(1).onValue((_ref5) => {
                        let {
                          noticeContainer,
                          googleNotice,
                          sdkNotice
                        } = _ref5;
                        noticeContainer.style.visibility = "visible";
                        noticeContainer.style.top = "";
                        noticeContainer.classList.add("bAp");
                        googleNotice.style.display = "none";
                        sdkNotice.className = googleNotice.className;
                        sdkNotice.classList.add("inboxsdk__butterbar");
                        const textContainer = (0, querySelectorOrFail.A)(sdkNotice, ".inboxsdk__butterbar-text");
                        while (textContainer.firstChild) {
                          textContainer.removeChild(textContainer.firstChild);
                        }
                        const buttonsContainer = (0, querySelectorOrFail.A)(sdkNotice, ".inboxsdk__butterbar-buttons");
                        while (buttonsContainer.firstChild) {
                          buttonsContainer.removeChild(buttonsContainer.firstChild);
                        }
                        if (rawOptions.html) {
                          textContainer.innerHTML = rawOptions.html;
                        } else if (rawOptions.el) {
                          textContainer.appendChild(rawOptions.el);
                        } else {
                          textContainer.textContent = rawOptions.text;
                        }
                        if (rawOptions.buttons) {
                          rawOptions.buttons.forEach((buttonDescriptor) => {
                            const button = document.createElement("span");
                            button.classList.add("ag", "a8k");
                            button.onclick = (e) => buttonDescriptor.onClick(e);
                            button.setAttribute("role", "button");
                            button.tabIndex = 0;
                            button.textContent = buttonDescriptor.title;
                            buttonsContainer.appendChild(button);
                          });
                        }
                        const closeButton = (0, querySelectorOrFail.A)(sdkNotice, ".inboxsdk__butterbar-close");
                        if (closeButton) {
                          kefir_esm.fromEvents(closeButton, "click").take(1).onValue(destroy);
                        }
                        if (rawOptions.className) {
                          sdkNotice.classList.add(rawOptions.className);
                        }
                        sdkNotice.style.display = "";
                        sdkNotice.setAttribute("data-inboxsdk-id", instanceId);
                      });
                      return {
                        destroy
                      };
                    }
                    hideGmailMessage() {
                      gmail_butter_bar_driver_elements.take(1).onValue((_ref6) => {
                        let {
                          noticeContainer,
                          googleNotice,
                          sdkNotice
                        } = _ref6;
                        if (sdkNotice.getAttribute("data-inboxsdk-id") === "gmail") {
                          hideMessage(noticeContainer, googleNotice, sdkNotice);
                        }
                      });
                    }
                  }
                  ;
                  let isTrackingValidity = false;
                  function temporaryTrackDownloadUrlValidity(driver) {
                    if (driver.getAppId() !== "sdk_streak_21e9788951" || !__webpack_require__3.g.fetch || isTrackingValidity) {
                      return;
                    }
                    isTrackingValidity = true;
                    driver.getAttachmentCardViewDriverStream().filter((cardView) => cardView.getAttachmentType() === "FILE").filter(() => Math.random() < 0.01).onValue(async (cardView) => {
                      const downloadLinkBefore = cardView._getDownloadLink();
                      let downloadUrl;
                      try {
                        downloadUrl = await cardView.getDownloadURL();
                      } catch (err) {
                        driver.getLogger().error(err, {
                          reason: "problem getting download url",
                          downloadLinkBefore,
                          downloadLinkAfter: cardView._getDownloadLink()
                        });
                        return;
                      }
                      if (!downloadUrl) {
                        driver.getLogger().error(new Error("no download url found"), {
                          downloadLinkBefore,
                          downloadLinkAfter: cardView._getDownloadLink()
                        });
                        return;
                      }
                      driver.getLogger().eventSdkPassive("testing.getDownloadURL success");
                    });
                  }
                  var getGmailThreadIdForRfcMessageId = __webpack_require__3(5187);
                  var gmailAjax = __webpack_require__3(5609);
                  var gmail_response_processor = __webpack_require__3(1433);
                  ;
                  async function getRfcMessageIdForGmailThreadId(driver, gmailThreadId) {
                    const messageIdQuery = {
                      ui: 2,
                      ik: driver.getPageCommunicator().getIkValue(),
                      view: "cv",
                      th: gmailThreadId,
                      nsc: 1,
                      mb: 0,
                      rt: "j",
                      search: "all"
                    };
                    const gmailMessageIdResponse = await (0, gmailAjax.A)({
                      method: "POST",
                      url: document.location.origin + document.location.pathname + "?" + querystring_es3.stringify(messageIdQuery),
                      canRetry: true
                    });
                    const extractedIds = gmail_response_processor.Yl(gmailMessageIdResponse.text);
                    if (Object.keys(extractedIds).length !== 1) {
                      throw new Error(`Expected to find 1 thread/message ID pair, but got ${Object.keys(extractedIds).length}`);
                    }
                    const gmailMessageId = extractedIds[gmailThreadId];
                    if (!gmailMessageId) {
                      throw new Error("Could not find a message ID for given thread ID");
                    }
                    return getRfcMessageIdForGmailMessageId(driver, gmailMessageId);
                  }
                  var getGmailMessageIdForSyncMessageId = __webpack_require__3(1158);
                  var bimapcache_js = __webpack_require__3(9844);
                  var bimapcache_js_default = /* @__PURE__ */ __webpack_require__3.n(bimapcache_js);
                  var get_draft_id_for_message_id = __webpack_require__3(876);
                  ;
                  class MoreDropdownButtonView extends GenericButtonView {
                    _isActive = false;
                    constructor() {
                      super(document.createElement("div"));
                      const element = this._element;
                      element.setAttribute("class", "nL aig");
                      const child = document.createElement("div");
                      child.setAttribute("class", "pM aj0");
                      element.appendChild(child);
                      element.addEventListener("click", () => {
                        this._isActive = true;
                      });
                      element.addEventListener("mouseenter", () => {
                        child.classList.add("aj1");
                      });
                      element.addEventListener("mouseleave", () => {
                        if (!this._isActive) {
                          child.classList.remove("aj1");
                        }
                      });
                    }
                    activate() {
                      this.getElement().children[0].classList.add("aj1");
                    }
                    deactivate() {
                      this.getElement().children[0].classList.remove("aj1");
                      this._isActive = false;
                    }
                  }
                  ;
                  class CreateParentAccessoryButtonView {
                    _element = document.createElement("div");
                    _eventStream = kefir_bus_default()();
                    _stopper = js_default()();
                    constructor() {
                      this._setupElement();
                      this._setupEventStream();
                    }
                    addClass(_className) {
                    }
                    removeClass(_className) {
                    }
                    activate() {
                      const innerButtonElement = this._element.firstElementChild;
                      if (innerButtonElement) {
                        innerButtonElement.classList.add("aj1");
                      }
                    }
                    deactivate() {
                      const innerButtonElement = this._element.firstElementChild;
                      if (innerButtonElement) {
                        innerButtonElement.classList.remove("aj1");
                      }
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                      this._stopper.destroy();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    setEnabled() {
                      throw new Error("not implemented");
                    }
                    update() {
                    }
                    _setupElement() {
                      this._element.setAttribute("class", "Yh inboxsdk__navItem_parent_accessory_button");
                      this._element.setAttribute("role", "button");
                      this._element.setAttribute("tabindex", "0");
                      this._element.setAttribute("type", "button");
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue((event) => {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.map((event) => ({
                        eventName: "click",
                        domEvent: event
                      })));
                    }
                  }
                  ;
                  class MoreParentAccessoryButtonView extends CreateParentAccessoryButtonView {
                    constructor() {
                      super();
                      this.getElement().style.backgroundImage = "url(https://www.gstatic.com/images/icons/material/system_gm/2x/more_vert_black_20dp.png)";
                    }
                  }
                  ;
                  class CreateAccessoryButtonView {
                    _element = document.createElement("div");
                    _eventStream = kefir_bus_default()();
                    _stopper = js_default()();
                    constructor() {
                      this._setupElement();
                      this._setupEventStream();
                    }
                    addClass(_className) {
                    }
                    removeClass(_className) {
                    }
                    update() {
                    }
                    setEnabled() {
                      throw new Error("not implemented");
                    }
                    destroy() {
                      this._eventStream.end();
                      this._stopper.destroy();
                      this._element.remove();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    activate() {
                      const innerButtonElement = this._element.firstElementChild;
                      if (innerButtonElement) innerButtonElement.classList.add("aj1");
                    }
                    deactivate() {
                      const innerButtonElement = this._element.firstElementChild;
                      if (innerButtonElement) innerButtonElement.classList.remove("aj1");
                    }
                    _setupElement() {
                      this._element.setAttribute("class", "nL aig");
                      this._element.setAttribute("style", "left: 7px");
                      this._element.innerHTML = ['<div class="pM aRw" style="display: inline-flex; margin-left: 16px;" role="button">', '<div class="p6">', '<div class="p8">\u25BC</div>', "</div>", "</div>"].join("");
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue((event) => {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.map((event) => ({
                        eventName: "click",
                        domEvent: event
                      })));
                    }
                  }
                  var update_icon = __webpack_require__3(2621);
                  ;
                  function renderCustomIcon(containerElement, customIconElement, append, insertBeforeEl) {
                    let iconElementWrapper = containerElement.querySelector(".inboxsdk__button_icon");
                    if (!iconElementWrapper) {
                      iconElementWrapper = document.createElement("div");
                      iconElementWrapper.classList.add("inboxsdk__button_icon");
                      iconElementWrapper.appendChild(customIconElement);
                    }
                    if (append) {
                      containerElement.appendChild(iconElementWrapper);
                    } else {
                      containerElement.insertBefore(containerElement, insertBeforeEl || containerElement.firstElementChild);
                    }
                  }
                  ;
                  const NAV_ITEM_SECTION_CLASS_NAME = "inboxsdk__navItem_section";
                  const SECTION_LIST_CLASS_NAME = "inboxsdk__navItem_section_list";
                  const getSectionListSelector = (sectionKey) => `.${SECTION_LIST_CLASS_NAME}[data-section-key="${sectionKey}"]`;
                  const SECTION_ITEMS_CLASS_NAME = "inboxsdk__navItem_section_list_items";
                  const getSectionItemsSelector = (sectionKey) => `.${SECTION_ITEMS_CLASS_NAME}[data-section-key="${sectionKey}"]`;
                  function createSectionNavItemsContainer() {
                    let sectionKey = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "default";
                    let orderGroup = arguments.length > 1 ? arguments[1] : void 0;
                    let orderHint = arguments.length > 2 ? arguments[2] : void 0;
                    let insertionOrderHint = arguments.length > 3 ? arguments[3] : void 0;
                    const element = document.createElement("div");
                    element.classList.add("yJ", SECTION_LIST_CLASS_NAME);
                    element.dataset.sectionKey = sectionKey;
                    if (orderGroup) {
                      element.setAttribute("data-group-order-hint", orderGroup);
                    }
                    if (orderHint) {
                      element.setAttribute("data-order-hint", orderHint.toString());
                    }
                    if (insertionOrderHint) {
                      element.setAttribute("data-insertion-order-hint", insertionOrderHint.toString());
                    }
                    const ARIA_LABELLED_BY_ID = Math.random().toFixed(3);
                    element.innerHTML = auto_html_js_default()`
    <div class="ajl aib aZ6" aria-labelledby="${ARIA_LABELLED_BY_ID}">
      <h2 class="aWk" id="${ARIA_LABELLED_BY_ID}">Labels</h2>
      <div class="wT">
        <div class="n3">
          <div class="byl">
            <div class="TK ${SECTION_ITEMS_CLASS_NAME}" data-section-key="${sectionKey}"></div>
          </div>
        </div>
      </div>
    </div>
  `;
                    return element;
                  }
                  function getPanelSectionNavItemContainerElement(panelElement) {
                    return (0, querySelectorOrFail.A)(panelElement, panelNavItemsContainerSelector);
                  }
                  function getPanelNavItemContainerElement(panelElement) {
                    let sectionKey = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "default";
                    let orderGroup = arguments.length > 2 ? arguments[2] : void 0;
                    let orderHint = arguments.length > 3 ? arguments[3] : void 0;
                    let insertionOrderHint = arguments.length > 4 ? arguments[4] : void 0;
                    const sectionNavItemsContainer = panelElement.querySelector(getSectionListSelector(sectionKey));
                    if (!sectionNavItemsContainer) {
                      const container = createSectionNavItemsContainer(sectionKey, orderGroup, orderHint, insertionOrderHint);
                      const panelNavItemsContainer = panelElement.querySelector(panelNavItemsContainerSelector);
                      if (!panelNavItemsContainer) {
                        return panelElement;
                      }
                      (0, insert_element_in_order.A)(panelNavItemsContainer, container);
                    }
                    return (0, querySelectorOrFail.A)(panelElement, getSectionItemsSelector(sectionKey));
                  }
                  function getSectionNavItemsContainerElement(sectionElement) {
                    let sectionKey = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "default";
                    let orderGroup = arguments.length > 2 ? arguments[2] : void 0;
                    let orderHint = arguments.length > 3 ? arguments[3] : void 0;
                    let insertionOrderHint = arguments.length > 4 ? arguments[4] : void 0;
                    const parent = sectionElement.parentElement;
                    const sectionNavItemsContainer = parent.querySelector(getSectionListSelector(sectionKey));
                    if (!sectionNavItemsContainer) {
                      const container = createSectionNavItemsContainer(sectionKey, orderGroup, orderHint, insertionOrderHint);
                      (0, insert_element_in_order.A)(parent, container);
                    }
                    return (0, querySelectorOrFail.A)(parent, getSectionItemsSelector(sectionKey));
                  }
                  ;
                  let NUMBER_OF_GMAIL_NAV_ITEM_VIEWS_CREATED = 0;
                  const GMAIL_V2_LEFT_INDENTATION_PADDING = 12;
                  class GmailNavItemView {
                    _accessory = null;
                    _accessoryViewController = null;
                    #eventStream;
                    _expandoElement = null;
                    _iconSettings = {};
                    _isActive = false;
                    _isCollapsed = false;
                    _itemContainerElement = null;
                    _name = "";
                    _type = null;
                    _collapseKey = null;
                    #sectionKey;
                    // delete after new left nav is fully launched, use this._level === 1 instead
                    get sectionKey() {
                      return this.#sectionKey;
                    }
                    constructor(driver, orderGroup, level) {
                      this._driver = driver;
                      this.#eventStream = kefir_bus_default()();
                      this._level = level || 0;
                      this._navItemNumber = ++NUMBER_OF_GMAIL_NAV_ITEM_VIEWS_CREATED;
                      this._orderGroup = orderGroup;
                      this._isNewLeftNavParent = !gmail_element_getter.A.shouldAddNavItemsInline() && this._level === 1;
                      this._element = this.#setupElement();
                    }
                    #setupElement(navItemDescriptor) {
                      if (this._isNewLeftNavParent && navItemDescriptor?.type !== nav_item_types.SECTION) {
                        return this._setupParentElement();
                      } else if (navItemDescriptor?.type === nav_item_types.SECTION) {
                        return this.#setupSectionElement();
                      } else {
                        return this._setupChildElement();
                      }
                    }
                    addNavItem(orderGroup, navItemDescriptor) {
                      const nestedNavItemLevel = this._type === nav_item_types.GROUPER || this.isSection() ? this._level : this._level + 1;
                      const gmailNavItemView = new GmailNavItemView(this._driver, orderGroup, nestedNavItemLevel);
                      gmailNavItemView.getEventStream().filter((event) => event.eventName === "orderChanged").onValue(() => this._addNavItemElement(gmailNavItemView));
                      gmailNavItemView.setNavItemDescriptor(navItemDescriptor);
                      if (this._isNewLeftNavParent && !gmailNavItemView.isSection()) {
                        this._createExpandoParent();
                      }
                      return gmailNavItemView;
                    }
                    #cleanupDOMElements() {
                      if (this._accessoryViewController) this._accessoryViewController.destroy();
                      if (this._expandoElement) this._expandoElement.remove();
                      if (this._itemContainerElement) this._itemContainerElement.remove();
                    }
                    destroy() {
                      this._element.remove();
                      if (this.#eventStream) this.#eventStream.end();
                      this.#cleanupDOMElements();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this.#eventStream;
                    }
                    getNavItemDescriptor() {
                      return this._navItemDescriptor;
                    }
                    getOrderGroup() {
                      return this._orderGroup;
                    }
                    getOrderHint() {
                      return this._orderHint;
                    }
                    getName() {
                      return this._name;
                    }
                    isCollapsed() {
                      return this._isCollapsed;
                    }
                    isSection() {
                      return this._type === nav_item_types.SECTION;
                    }
                    remove() {
                      this.destroy();
                    }
                    setActive(value) {
                      if (!this._element || this._type === nav_item_types.LINK || this._type === nav_item_types.MANAGE || this._isActive === value || this._isNewLeftNavParent || this.isSection()) {
                        return;
                      }
                      const toElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                      if (value) {
                        this._element.classList.add("ain");
                        toElement.classList.add("nZ");
                        toElement.classList.add("aiq");
                      } else {
                        this._element.classList.remove("ain");
                        toElement.classList.remove("nZ");
                        toElement.classList.remove("aiq");
                      }
                      this._setHeights();
                      this._isActive = value;
                    }
                    setCollapsed(value) {
                      this._isCollapsed = value;
                      if (this._isCollapsible()) {
                        if (value) {
                          this._collapse();
                        } else {
                          this._expand();
                        }
                      }
                      try {
                        const storageKey = "inboxsdk__navitem_collapsed__" + this._collapseKey;
                        if (this._isCollapsed) {
                          localStorage.setItem(storageKey, "true");
                        } else {
                          localStorage.removeItem(storageKey);
                        }
                      } catch (e) {
                        console.error("Caught error", e);
                      }
                    }
                    setNavItemDescriptor(navItemDescriptorPropertyStream) {
                      navItemDescriptorPropertyStream.takeUntilBy(this.#eventStream.filter(() => false).beforeEnd(() => null)).onValue((x2) => this.#updateValues(x2));
                    }
                    toggleCollapse() {
                      this.setCollapsed(!this._isCollapsed);
                    }
                    // TODO this method is only called on orderChanged? is that right?
                    _addNavItemElement(gmailNavItemView) {
                      const itemContainerElement = this._getItemContainerElement();
                      const insertBeforeElement = getInsertBeforeElement(gmailNavItemView.getElement(), itemContainerElement.children, ["data-group-order-hint", "data-order-hint", "data-insertion-order-hint"]);
                      itemContainerElement.insertBefore(gmailNavItemView.getElement(), insertBeforeElement);
                      if (gmailNavItemView.isSection() || this.isSection()) {
                        return;
                      }
                      const indentationFactor = this._type === nav_item_types.GROUPER || this._isNewLeftNavParent ? this._level - 1 : this._level;
                      const element = gmailNavItemView.getElement();
                      if (!gmail_element_getter.A.shouldAddNavItemsInline()) {
                        (0, querySelectorOrFail.A)(element, ".TN").style.marginLeft = 6 * indentationFactor + "px";
                      } else {
                        (0, querySelectorOrFail.A)(element, ".TN").style.marginLeft = getLeftIndentationPaddingValue() * indentationFactor + "px";
                      }
                      this._setHeights();
                    }
                    _collapse() {
                      this._isCollapsed = true;
                      if (this._isNewLeftNavParent) {
                        this._element.classList.remove("Xr");
                      } else {
                        const expandoElement = this._expandoElement;
                        if (expandoElement) {
                          expandoElement.classList.remove("aih");
                          expandoElement.classList.add("aii");
                        } else if (this._type === nav_item_types.GROUPER) {
                          const navItemElement = this._element.firstElementChild;
                          if (navItemElement) navItemElement.classList.remove("air");
                        }
                        if (this._itemContainerElement) this._itemContainerElement.style.display = "none";
                        this._setHeights();
                      }
                      this.#eventStream.emit({
                        eventName: "collapsed"
                      });
                    }
                    _createAccessory(accessoryDescriptor) {
                      switch (accessoryDescriptor.type) {
                        case "CREATE":
                          this._createCreateAccessory(accessoryDescriptor);
                          break;
                        case "ICON_BUTTON":
                          this._createIconButtonAccessory(accessoryDescriptor);
                          break;
                        case "DROPDOWN_BUTTON":
                          this._createDropdownButtonAccessory(accessoryDescriptor);
                          break;
                        case "SETTINGS_BUTTON":
                          this._driver.getLogger().deprecationWarning("SettingsButtonAccessoryDescriptor", "DropdownButtonAccessoryDescriptor");
                          this._createDropdownButtonAccessory({
                            ...accessoryDescriptor,
                            type: "DROPDOWN_BUTTON"
                          });
                          break;
                      }
                    }
                    _createCreateAccessory(accessoryDescriptor) {
                      this._createPlusButtonAccessory(accessoryDescriptor);
                    }
                    _createDropdownButtonAccessory(accessoryDescriptor) {
                      if (this._isNewLeftNavParent) {
                        const buttonOptions2 = {
                          ...accessoryDescriptor
                        };
                        buttonOptions2.buttonView = new MoreParentAccessoryButtonView();
                        buttonOptions2.dropdownViewDriverClass = gmail_dropdown_view.A;
                        buttonOptions2.dropdownPositionOptions = {
                          position: "right",
                          hAlign: "left",
                          vAlign: "top"
                        };
                        buttonOptions2.dropdownShowFunction = (_ref) => {
                          let {
                            dropdown
                          } = _ref;
                          dropdown.el.style.marginLeft = "24px";
                          buttonOptions2.onClick({
                            dropdown
                          });
                        };
                        const accessoryViewController2 = new dropdown_button_view_controller.A(buttonOptions2);
                        this._accessoryViewController = accessoryViewController2;
                        const accessoryEl = (0, querySelectorOrFail.A)(this._element, ".Yh:not(.inboxsdk__navItem_parent_accessory_button)");
                        buttonOptions2.buttonView.getElement().classList.add(...accessoryEl.classList);
                        accessoryEl.style.display = "none";
                        accessoryEl.parentNode.appendChild(buttonOptions2.buttonView.getElement());
                        this._iconSettings.iconElement = null;
                        return;
                      }
                      const buttonOptions = {
                        ...accessoryDescriptor
                      };
                      buttonOptions.buttonView = new MoreDropdownButtonView();
                      buttonOptions.dropdownViewDriverClass = gmail_dropdown_view.A;
                      buttonOptions.dropdownPositionOptions = {
                        position: "bottom",
                        hAlign: "left",
                        vAlign: "top"
                      };
                      const container = gmail_element_getter.A.getLeftNavContainerElement();
                      if (!container) throw new Error("leftNavContainer not found");
                      buttonOptions.dropdownShowFunction = (event) => {
                        if (container.classList.contains("bhZ")) {
                          const stopper = kefir_esm.fromEvents(event.dropdown, "destroy");
                          (0, make_mutation_observer_chunked_stream.A)(container, {
                            attributes: true,
                            attributeFilter: ["class"]
                          }).takeUntilBy(stopper).toProperty(() => null).onValue(() => {
                            if (!container.classList.contains("bym")) container.classList.add("bym");
                          });
                          stopper.onValue(() => {
                            container.classList.remove("bym");
                          });
                        }
                        buttonOptions.onClick(event);
                        event.dropdown.on("destroy", () => {
                          buttonOptions.buttonView.deactivate();
                        });
                      };
                      const accessoryViewController = new dropdown_button_view_controller.A(buttonOptions);
                      this._accessoryViewController = accessoryViewController;
                      const innerElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                      innerElement.addEventListener("mouseenter", () => innerElement.classList.add("inboxsdk__navItem_hover"));
                      innerElement.addEventListener("mouseleave", () => innerElement.classList.remove("inboxsdk__navItem_hover"));
                      const insertionPoint = (0, querySelectorOrFail.A)(this._element, ".TN");
                      insertionPoint.appendChild(buttonOptions.buttonView.getElement());
                      this._setupContextClickHandler(accessoryViewController);
                    }
                    _createExpando() {
                      if (this._type === nav_item_types.GROUPER) {
                        return;
                      }
                      const expandoElement = this._expandoElement = document.createElement("div");
                      expandoElement.setAttribute("class", "TH aih J-J5-Ji inboxsdk__expando");
                      expandoElement.setAttribute("role", "link");
                      expandoElement.title = `Expand ${this._name || ""}`;
                      expandoElement.addEventListener("click", (e) => {
                        this.toggleCollapse();
                        e.stopPropagation();
                      });
                      const insertionPoint = this._element.querySelector(".TN.aik");
                      if (insertionPoint) insertionPoint.insertAdjacentElement("afterbegin", expandoElement);
                      if (this._isCollapsed) {
                        this._collapse();
                      } else {
                        this._expand();
                      }
                    }
                    _createExpandoParent() {
                      const parentExpandoElement = (0, querySelectorOrFail.A)(this._element, ".XR");
                      parentExpandoElement.style.visibility = "visible";
                      this._expandoElement = parentExpandoElement;
                      if (this._isCollapsed) {
                        this._collapse();
                      } else {
                        this._expand();
                      }
                    }
                    _createIconButtonAccessory(accessoryDescriptor) {
                      this._driver.getLogger().deprecationWarning("IconButtonAccessoryDescriptor accessory for a parent level NavItemView", "CreateAccessoryDescriptor or DropdownButtonAccessoryDescriptor");
                      if (this._isNewLeftNavParent) {
                        return;
                      }
                      const buttonOptions = {
                        ...accessoryDescriptor,
                        buttonColor: "pureIcon"
                      };
                      buttonOptions.buttonView = new button_view.A(buttonOptions);
                      this._accessoryViewController = new basic_button_view_controller.A(buttonOptions);
                      const insertionPoint = (0, querySelectorOrFail.A)(this._element, ".TN");
                      insertionPoint.appendChild(buttonOptions.buttonView.getElement());
                    }
                    _createItemContainerElement() {
                      const itemContainerElement = this._itemContainerElement = document.createElement("div");
                      itemContainerElement.classList.add("inboxsdk__navItem_container");
                      this._element.appendChild(itemContainerElement);
                      if (this._isCollapsible()) {
                        if (this._isCollapsed) this._collapse();
                        else this._expand();
                      }
                      return itemContainerElement;
                    }
                    _createLinkButtonAccessory(accessoryDescriptor) {
                      const linkDiv = document.createElement("div");
                      const linkDivClassName = "inboxsdk__navItem_link";
                      linkDiv.setAttribute("class", linkDivClassName);
                      const anchor = document.createElement("a");
                      anchor.classList.add("CK");
                      anchor.textContent = accessoryDescriptor.name;
                      linkDiv.appendChild(anchor);
                      anchor.href = "#";
                      anchor.addEventListener("click", (e) => {
                        e.stopPropagation();
                        e.preventDefault();
                        accessoryDescriptor.onClick();
                      });
                      (0, querySelectorOrFail.A)(this._element, ".aio").appendChild(linkDiv);
                    }
                    _createPlusButtonAccessory(accessoryDescriptor) {
                      if (this._isNewLeftNavParent) {
                        const buttonOptions2 = {
                          ...accessoryDescriptor
                        };
                        buttonOptions2.buttonView = new CreateParentAccessoryButtonView();
                        this._accessoryViewController = new basic_button_view_controller.A(buttonOptions2);
                        const accessoryEl = (0, querySelectorOrFail.A)(this._element, ".Yh:not(.inboxsdk__navItem_parent_accessory_button)");
                        buttonOptions2.buttonView.getElement().classList.add(...accessoryEl.classList);
                        accessoryEl.style.display = "none";
                        accessoryEl.parentNode.appendChild(buttonOptions2.buttonView.getElement());
                        this._iconSettings.iconElement = null;
                        return;
                      }
                      const buttonOptions = {
                        ...accessoryDescriptor
                      };
                      buttonOptions.buttonView = new CreateAccessoryButtonView();
                      this._accessoryViewController = new basic_button_view_controller.A(buttonOptions);
                      const insertionPoint = (0, querySelectorOrFail.A)(this._element, ".TN");
                      insertionPoint.appendChild(buttonOptions.buttonView.getElement());
                    }
                    _expand() {
                      if (this._isNewLeftNavParent) {
                        this._element.classList.add("Xr");
                      } else {
                        const expandoElement = this._expandoElement;
                        if (expandoElement) {
                          expandoElement.classList.add("aih");
                          expandoElement.classList.remove("aii");
                        } else if (this._type === nav_item_types.GROUPER) {
                          const navItemElement = this._element.firstElementChild;
                          if (navItemElement) {
                            navItemElement.classList.add("air");
                          }
                        }
                        if (this._itemContainerElement) {
                          this._itemContainerElement.style.display = "";
                        }
                        this._setHeights();
                      }
                      this._isCollapsed = false;
                      this.#eventStream.emit({
                        eventName: "expanded"
                      });
                    }
                    _getItemContainerElement() {
                      if (this.isSection()) {
                        return getSectionNavItemsContainerElement(this._element, this.#sectionKey, this._orderGroup.toString(), this._orderHint.toString(), this._navItemNumber.toString());
                      } else if (this._isNewLeftNavParent) {
                        return (0, querySelectorOrFail.A)(this._element, ".TK");
                      } else {
                        let itemContainerElement = this._itemContainerElement;
                        if (!itemContainerElement) {
                          itemContainerElement = this._createItemContainerElement();
                          this._createExpando();
                        }
                        return itemContainerElement;
                      }
                    }
                    _isCollapsible() {
                      return Boolean(this._expandoElement) || this._type === nav_item_types.GROUPER;
                    }
                    _makeEventMapper(eventName) {
                      return function(domEvent) {
                        domEvent.stopPropagation();
                        domEvent.preventDefault();
                        return {
                          eventName,
                          domEvent
                        };
                      };
                    }
                    _setHeights() {
                      if (this._level == 1) {
                        return;
                      }
                      const toElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                      if (this._element.classList.contains("ain") && this._itemContainerElement) {
                        this._element.style.height = "";
                        const totalHeight = this._element.clientHeight;
                        const itemHeight = toElement.clientHeight;
                        this._element.style.height = itemHeight + "px";
                        this._element.style.overflow = "visible";
                        this._element.style.marginBottom = totalHeight - itemHeight + "px";
                      } else {
                        this._element.style.height = "";
                        this._element.style.overflow = "";
                        this._element.style.marginBottom = "";
                      }
                    }
                    _setHighlight(value) {
                      if (!this._element || this._type === nav_item_types.LINK || this._type === nav_item_types.MANAGE) {
                        return;
                      }
                      if (value) {
                        (0, querySelectorOrFail.A)(this._element, ".TO").classList.add("NQ");
                      } else {
                        (0, querySelectorOrFail.A)(this._element, ".TO").classList.remove("NQ");
                      }
                    }
                    _setupContextClickHandler(accessoryViewController) {
                      kefir_esm.fromEvents(this._element, "contextmenu").takeWhile(() => this._accessoryViewController === accessoryViewController).onValue((domEvent) => {
                        domEvent.stopPropagation();
                        domEvent.preventDefault();
                        accessoryViewController.showDropdown();
                      });
                    }
                    #setupSectionElement() {
                      const element = document.createElement("div");
                      element.classList.add("aAw", "FgKVne", NAV_ITEM_SECTION_CLASS_NAME);
                      element.dataset.sectionKey = this.#sectionKey;
                      element.innerHTML = ['<span class="aAv inboxsdk__navItem_name" role="heading">', "Labels", "</span>", '<div class="aAu arN" aria-label="" data-tooltip="" role="button" tabindex="0" type="button">', "</div>"].join("");
                      const innerElement = (0, querySelectorOrFail.A)(element, ".aAu");
                      this.#eventStream.plug(kefir_esm.fromEvents(innerElement, "click").map(this._makeEventMapper("click")));
                      return element;
                    }
                    _setupChildElement() {
                      const element = document.createElement("div");
                      element.setAttribute("class", "aim inboxsdk__navItem");
                      element.innerHTML = [
                        '<div class="TO">',
                        '<div class="TN aik">',
                        // This element needs a style attribute defined on it as there is a Gmail css rule of
                        // selecting for "gj[style]" the sets the opacity to 1 rather than 0.6.
                        '<div class="qj" style="">',
                        "</div>",
                        '<div class="aio aip">',
                        '<span class="nU" role="link">',
                        "</span>",
                        // This bsU element is the container "subtitle" text.
                        '<span class="bsU">',
                        "</span>",
                        "</div>",
                        "</div>",
                        "</div>"
                      ].join("");
                      const innerElement = (0, querySelectorOrFail.A)(element, ".TO");
                      kefir_esm.merge([kefir_esm.fromEvents(innerElement, "mouseenter").map(this._makeEventMapper("mouseenter")), kefir_esm.fromEvents(innerElement, "mouseleave").map(this._makeEventMapper("mouseleave"))]).onValue((event) => {
                        this._updateHighlight(event);
                      });
                      this.#eventStream.plug(kefir_esm.fromEvents(innerElement, "click").map(this._makeEventMapper("click")));
                      return element;
                    }
                    _setupParentElement() {
                      const element = document.createElement("div");
                      element.className = "Xa wT W8 XJ inboxsdk__navItem";
                      element.innerHTML = ['<div class="V6 CL Y2">', '<div class="XR" role="button" tabindex="0" type="button" style="visibility: hidden">', "</div>", '<span class="XS">', '<span class="WW inboxsdk__navItem_name" role="heading" aria-level="2">', "</span>", '<span class="XU" aria-hidden="true" style="display: none">', "</span>", "</span>", '<div class="Yh">', "</div>", "</div>", '<div class="V3 ada">', '<div class="wT">', '<div class="TK">', "</div>", "</div>", "</div>"].join("");
                      const scrollContainer = (0, querySelectorOrFail.A)(element, ".V3");
                      kefir_esm.fromEvents(scrollContainer, "scroll").debounce(10).onValue(() => {
                        if (scrollContainer.scrollTop > 0) {
                          scrollContainer.classList.add("adh");
                        } else {
                          scrollContainer.classList.remove("adh");
                        }
                      });
                      const expandoElement = (0, querySelectorOrFail.A)(element, ".XR");
                      kefir_esm.fromEvents(expandoElement, "click").map(this._makeEventMapper("click")).onValue(() => {
                        this.toggleCollapse();
                      });
                      const innerElement = (0, querySelectorOrFail.A)(element, ".V6.CL");
                      this.#eventStream.plug(kefir_esm.fromEvents(innerElement, "click").map(this._makeEventMapper("click")));
                      return element;
                    }
                    _setupGrouper() {
                      const navItemElement = this._element.firstElementChild;
                      if (navItemElement) {
                        navItemElement.classList.add("n4");
                        navItemElement.addEventListener("click", (e) => {
                          e.stopPropagation();
                          this.toggleCollapse();
                        });
                        if (this._isCollapsed) {
                          this._collapse();
                        } else {
                          this._expand();
                        }
                      }
                      const iconContainerElement = (0, querySelectorOrFail.A)(this._element, ".qj");
                      iconContainerElement.innerHTML = '<div class="G-asx T-I-J3 J-J5-Ji">&nbsp;</div>';
                    }
                    _updateAccessory(accessory) {
                      if (this._accessory === accessory) {
                        return;
                      }
                      if (this._accessoryViewController) {
                        this._accessoryViewController.destroy();
                        this._accessoryViewController = null;
                      }
                      if (accessory) {
                        this._createAccessory(accessory);
                      }
                      this._accessory = accessory;
                    }
                    _updateClickability(navItemDescriptor) {
                      if (navItemDescriptor.type === nav_item_types.LINK || navItemDescriptor.type === nav_item_types.MANAGE) {
                        this._element.classList.add("inboxsdk__navItem_nonClickable");
                      } else {
                        this._element.classList.remove("inboxsdk__navItem_nonClickable");
                      }
                    }
                    _updateHighlight(_ref2) {
                      let {
                        eventName
                      } = _ref2;
                      switch (eventName) {
                        case "mouseenter":
                          this._setHighlight(true);
                          break;
                        case "mouseleave":
                          this._setHighlight(false);
                          break;
                      }
                    }
                    _updateIcon(navItemDescriptor) {
                      if (this.isSection()) {
                        return;
                      }
                      const iconContainerElement = this._isNewLeftNavParent ? (0, querySelectorOrFail.A)(this._element, ".Yh") : (0, querySelectorOrFail.A)(this._element, ".qj");
                      if (navItemDescriptor.iconElement) {
                        renderCustomIcon(iconContainerElement, navItemDescriptor.iconElement, navItemDescriptor.iconPosition !== "BEFORE_NAME");
                        return;
                      }
                      (0, update_icon.A)(this._iconSettings, iconContainerElement, navItemDescriptor.iconPosition !== "BEFORE_NAME", navItemDescriptor.iconClass, navItemDescriptor.iconUrl, void 0, void 0, navItemDescriptor.iconLiga);
                      if (navItemDescriptor.backgroundColor) {
                        const circleColor = navItemDescriptor.backgroundColor;
                        iconContainerElement.style.borderColor = circleColor;
                      }
                    }
                    _updateName(name) {
                      if (this._name === name) {
                        return;
                      }
                      const navItemNameElement = (0, querySelectorOrFail.A)(this._element, ".inboxsdk__navItem_name");
                      navItemNameElement.textContent = name;
                      navItemNameElement.setAttribute("title", name);
                      this._name = name;
                      if (this.isSection()) return;
                      if (this._expandoElement) {
                        this._expandoElement.title = `Expand ${name}`;
                      }
                      if (this._navItemDescriptor?.tooltipAlignment) {
                        const align = this._navItemDescriptor?.tooltipAlignment[0];
                        this._element.firstElementChild?.setAttribute("data-tooltip", name);
                        this._element.firstElementChild?.setAttribute("data-tooltip-align", align);
                      }
                    }
                    _updateOrder(navItemDescriptor) {
                      this._element.setAttribute("data-group-order-hint", "" + this._orderGroup);
                      this._element.setAttribute("data-insertion-order-hint", "" + this._navItemNumber);
                      navItemDescriptor.orderHint = navItemDescriptor.orderHint || navItemDescriptor.orderHint === 0 ? navItemDescriptor.orderHint : Number.MAX_SAFE_INTEGER;
                      if (navItemDescriptor.orderHint !== this._orderHint) {
                        this._element.setAttribute("data-order-hint", "" + navItemDescriptor.orderHint);
                        this.#eventStream.emit({
                          eventName: "orderChanged"
                        });
                      }
                      this._orderHint = navItemDescriptor.orderHint;
                    }
                    _updateRole(routeID) {
                      if (this.isSection()) {
                        return;
                      }
                      const roleElement = (0, querySelectorOrFail.A)(this._element, ".V6.CL");
                      if (routeID) {
                        roleElement.setAttribute("role", "link");
                      } else {
                        roleElement.setAttribute("role", "group");
                        roleElement.classList.add("X9");
                      }
                    }
                    _updateSubtitle(navItemDescriptor) {
                      if (this._isNewLeftNavParent || this.isSection()) {
                        return;
                      }
                      if (navItemDescriptor.accessory && !["SETTINGS_BUTTON", "DROPDOWN_BUTTON"].includes(navItemDescriptor.accessory.type) && navItemDescriptor.type !== nav_item_types.GROUPER) {
                        return;
                      }
                      (0, querySelectorOrFail.A)(this._element, ".bsU").innerHTML = auto_html_js_default()`${navItemDescriptor.subtitle || ""}`;
                    }
                    _updateType() {
                      let type = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : nav_item_types.NAVIGATION;
                      if (!this._element) {
                        return;
                      }
                      type = type || nav_item_types.NAVIGATION;
                      if (this._type === type) {
                        return;
                      }
                      let nameElement = this._element.querySelector(".inboxsdk__navItem_name");
                      if (nameElement && nameElement.closest(".inboxsdk__navItem") !== this._element) {
                        nameElement = null;
                      }
                      switch (type) {
                        case nav_item_types.GROUPER:
                        case nav_item_types.NAVIGATION:
                          if (!nameElement || nameElement.tagName !== "SPAN") {
                            (0, querySelectorOrFail.A)(this._element, ".nU").innerHTML += auto_html_js_default()`<span class="inboxsdk__navItem_name">${this._name}</span>`;
                          }
                          break;
                        case nav_item_types.LINK:
                        case nav_item_types.MANAGE:
                          if (!nameElement || nameElement.tagName !== "A") {
                            (0, querySelectorOrFail.A)(this._element, ".nU").innerHTML += auto_html_js_default()`<a href="#" class="CK inboxsdk__navItem_name">${this._name}</a>`;
                          }
                          break;
                      }
                      this._type = type;
                    }
                    #updateSpacing(navItemDescriptor) {
                      if (this._isNewLeftNavParent) {
                        return;
                      }
                      this._element.classList.toggle("yJ", !!navItemDescriptor.spacingAfter);
                    }
                    #updateSectionTooltip(navItemDescriptor) {
                      if (!this.isSection()) return;
                      const tooltip = navItemDescriptor.sectionTooltip;
                      if (tooltip) {
                        this._element.querySelector(".aAu")?.setAttribute("data-tooltip", tooltip);
                        this._element.querySelector(".aAu")?.setAttribute("aria-label", tooltip);
                      }
                    }
                    #updateValues(navItemDescriptor) {
                      if (navItemDescriptor.type === nav_item_types.SECTION && !this.#sectionKey) {
                        this.#sectionKey = (Math.random() * 1e4).toFixed(0);
                      }
                      if (this._navItemDescriptor?.type !== navItemDescriptor.type) {
                        this._element.remove();
                        this.#cleanupDOMElements();
                        this._element = this.#setupElement(navItemDescriptor);
                      }
                      this._navItemDescriptor = navItemDescriptor;
                      if (this._collapseKey == null) {
                        this._collapseKey = navItemDescriptor.key || `${navItemDescriptor.name}`;
                        this._isCollapsed = localStorage.getItem("inboxsdk__navitem_collapsed__" + this._collapseKey) === "true";
                      }
                      this._updateType(navItemDescriptor.type);
                      this._updateName(navItemDescriptor.name);
                      this._updateSubtitle(navItemDescriptor);
                      this._updateOrder(navItemDescriptor);
                      this.#updateSpacing(navItemDescriptor);
                      if (this._isNewLeftNavParent) {
                        this._updateRole(navItemDescriptor.routeID);
                      }
                      if (this._type === nav_item_types.GROUPER) {
                        this._setupGrouper();
                        return;
                      }
                      this._updateAccessory(navItemDescriptor.accessory);
                      this._updateIcon(navItemDescriptor);
                      this._updateClickability(navItemDescriptor);
                      this.#updateSectionTooltip(navItemDescriptor);
                    }
                  }
                  function getLeftIndentationPaddingValue() {
                    return GMAIL_V2_LEFT_INDENTATION_PADDING;
                  }
                  ;
                  function attachGmailNavItemView(gmailNavItemView, injectionContainer) {
                    try {
                      const attacher = _attachNavItemView(gmailNavItemView, injectionContainer);
                      attacher();
                      gmailNavItemView.getEventStream().filter((event) => event.eventName === "orderChanged").onValue(attacher);
                    } catch (err) {
                      lib_logger.A.error(err);
                    }
                  }
                  async function addNavItem(driver, orderGroup, navItemDescriptor, navMenuInjectionContainer) {
                    await waitForMenuReady();
                    const gmailNavItemView = new GmailNavItemView(driver, orderGroup, 1);
                    gmailNavItemView.setNavItemDescriptor(navItemDescriptor);
                    if (!gmail_element_getter.A.isStandalone()) {
                      attachGmailNavItemView(gmailNavItemView, navMenuInjectionContainer);
                    }
                    return gmailNavItemView;
                  }
                  async function addNavItemToPanel(driver, orderGroup, navItemDescriptor, panelElement) {
                    await waitForMenuReady();
                    const gmailNavItemView = new GmailNavItemView(driver, orderGroup, 1);
                    gmailNavItemView.setNavItemDescriptor(navItemDescriptor);
                    if (!gmail_element_getter.A.isStandalone()) {
                      if (gmailNavItemView.isSection()) {
                        const container = getPanelSectionNavItemContainerElement(panelElement);
                        attachGmailNavItemView(gmailNavItemView, container);
                      } else {
                        const container = getPanelNavItemContainerElement(panelElement, gmailNavItemView.sectionKey);
                        attachGmailNavItemView(gmailNavItemView, container);
                      }
                    }
                    return gmailNavItemView;
                  }
                  const waitForMenuReady = once_default()(async () => {
                    const appMenu = await gmail_element_getter.A.getAppMenuAsync();
                    if (!appMenu) {
                      await waitForNavMenuReady();
                    }
                  });
                  const waitForNavMenuReady = once_default()(async () => {
                    if (!gmail_element_getter.A.isStandalone()) {
                      await gmail_element_getter.A.waitForGmailModeToSettle();
                      await (0, wait_for.A)(() => document.querySelector(".aeN[role=navigation], .aeN [role=navigation]"));
                      await (0, wait_for.A)(() => document.querySelector(".Ls77Lb.aZ6 > .pp"));
                    }
                  });
                  function _attachNavItemView(gmailNavItemView, navMenuInjectionContainer) {
                    if (navMenuInjectionContainer) {
                      return () => {
                        (0, insert_element_in_order.A)(navMenuInjectionContainer, gmailNavItemView.getElement());
                      };
                    }
                    if (!gmail_element_getter.A.shouldAddNavItemsInline()) {
                      return function() {
                        const navMenuInjectionContainer2 = gmail_element_getter.A.getSeparateSectionNavItemMenuInjectionContainer();
                        if (!navMenuInjectionContainer2) {
                          throw new Error("should not happen");
                        }
                        const nonMailLeftNavSections = Array.from(document.querySelectorAll(".Xa.wT:not([data-group-order-hint])")).slice(1);
                        nonMailLeftNavSections.forEach((div) => {
                          div.dataset.groupOrderHint = "zz_gmail";
                        });
                        (0, insert_element_in_order.A)(navMenuInjectionContainer2, gmailNavItemView.getElement());
                      };
                    } else {
                      return function() {
                        (0, insert_element_in_order.A)(_getNavItemsHolder(), gmailNavItemView.getElement());
                      };
                    }
                  }
                  function _getNavItemsHolder() {
                    const holder = document.querySelector(".inboxsdk__navMenu");
                    if (!holder) {
                      return _createNavItemsHolder();
                    } else {
                      return (0, querySelectorOrFail.A)(holder, ".TK");
                    }
                  }
                  function _createNavItemsHolder() {
                    const holder = document.createElement("div");
                    holder.setAttribute("class", "LrBjie inboxsdk__navMenu");
                    holder.innerHTML = '<div class="TK"></div>';
                    const navMenuInjectionContainer = gmail_element_getter.A.getSameSectionNavItemMenuInjectionContainer();
                    if (!navMenuInjectionContainer) throw new Error("should not happen");
                    navMenuInjectionContainer.insertBefore(holder, navMenuInjectionContainer.children[2]);
                    (0, make_mutation_observer_stream.A)(holder, {
                      attributes: true,
                      attributeFilter: ["class"]
                    }).onValue(function() {
                      if (holder.classList.contains("TA")) {
                        holder.classList.remove("TA");
                      }
                    });
                    return (0, querySelectorOrFail.A)(holder, ".TK");
                  }
                  ;
                  async function addAppMenuItem(driver, menuItemDescriptor) {
                    const appMenuInjectionContainer = await gmail_element_getter.A.getAppMenuAsync();
                    const gmailAppMenuItemView = new GmailAppMenuItemView(driver, menuItemDescriptor);
                    try {
                      if (!appMenuInjectionContainer) return void 0;
                      const siblingElement = Number.isInteger(menuItemDescriptor.insertIndex) ? appMenuInjectionContainer.childNodes[menuItemDescriptor.insertIndex] ?? null : null;
                      appMenuInjectionContainer.insertBefore(gmailAppMenuItemView.element, siblingElement);
                    } catch (err) {
                      lib_logger.A.error(err);
                    }
                    return gmailAppMenuItemView;
                  }
                  ;
                  class GmailSupportItemView {
                    _stopper = js_default()();
                    _insertElementContainer = null;
                    constructor(driver, supportItemDescriptor) {
                      this._driver = driver;
                      this._setup(supportItemDescriptor);
                    }
                    destroy() {
                      this._stopper.destroy();
                      if (this._insertElementContainer) {
                        this._insertElementContainer.remove();
                        this._insertElementContainer = null;
                      }
                    }
                    _setup(supportItemDescriptor) {
                      const supportMenuNodes = this._driver.getTagTree().getAllByTag("supportMenu");
                      const subscription = supportMenuNodes.subscribe((changes) => {
                        changes.forEach((change) => {
                          if (change.type === "add") {
                            this._addSupportElement(change.value.getValue(), supportItemDescriptor);
                          } else if (change.type === "remove") {
                            if (this._insertElementContainer) {
                              this._insertElementContainer.remove();
                              this._insertElementContainer = null;
                            }
                          }
                        });
                      });
                      this._stopper.onValue(() => subscription.unsubscribe());
                    }
                    _addSupportElement(supportElement, supportItemDescriptor) {
                      const insertElementContainer = document.createElement("div");
                      const menuItemAttributes = supportElement.children.item(0).attributes;
                      for (const attribute of menuItemAttributes) {
                        if (attribute.name === "aria-label") {
                          continue;
                        }
                        if (attribute.name === "class") {
                          const classes = `${attribute.value} inboxsdk__support_menuItem`;
                          insertElementContainer.setAttribute(attribute.name, classes);
                          continue;
                        }
                        insertElementContainer.setAttribute(attribute.name, attribute.value);
                      }
                      insertElementContainer.append(supportItemDescriptor.element);
                      let lastSeparatorItem = null;
                      for (const item of supportElement.children) {
                        if (item.getAttribute("role") === "separator") {
                          lastSeparatorItem = item;
                        }
                      }
                      if (lastSeparatorItem) {
                        lastSeparatorItem.insertAdjacentElement("beforebegin", insertElementContainer);
                      } else {
                        supportElement.append(insertElementContainer);
                      }
                      insertElementContainer.onclick = (event) => {
                        event.preventDefault();
                        event.stopPropagation();
                        supportItemDescriptor.onClick();
                        this._closeSupportMenu(supportElement);
                      };
                      insertElementContainer.onkeypress = (event) => {
                        if (event.key === "Enter") {
                          supportItemDescriptor.onClick();
                          this._closeSupportMenu(supportElement);
                        }
                      };
                    }
                    _closeSupportMenu(supportElement) {
                      if (supportElement.getAttribute("aria-hidden") != "true") {
                        const button = supportElement.previousElementSibling;
                        button && button.click();
                      }
                    }
                  }
                  ;
                  function addSupportItem(driver, supportItemDescriptor) {
                    return new GmailSupportItemView(driver, supportItemDescriptor);
                  }
                  var goto_view = __webpack_require__3(7101);
                  var gmail_sync_response_processor = __webpack_require__3(6811);
                  var immutability_helper = __webpack_require__3(2996);
                  var immutability_helper_default = /* @__PURE__ */ __webpack_require__3.n(immutability_helper);
                  ;
                  const threadListHandlersToSearchStrings = /* @__PURE__ */ new Map();
                  const MAX_THREADS_PER_PAGE = 50;
                  function copyAndOmitExcessThreads(ids, logger) {
                    if (ids.length > MAX_THREADS_PER_PAGE) {
                      logger.error(new Error("Received more than the maximum number of threads specified by handler, ignoring additional threads (https://www.inboxsdk.com/docs/#Router)."));
                    }
                    return ids.slice(0, MAX_THREADS_PER_PAGE);
                  }
                  function _findIdFailure(id, err) {
                    console.log("Failed to find id for thread", id, err);
                    return null;
                  }
                  function parseOnActivateResult(logger, start, result) {
                    if (Array.isArray(result)) {
                      logger.deprecationWarning("Returning an array from a handleCustomListRoute handler", "a CustomListDescriptor object");
                      const threads = copyAndOmitExcessThreads(result, logger);
                      return {
                        // default to one page since arrays can't be paginated
                        total: threads.length,
                        threads
                      };
                    } else if (typeof result === "object") {
                      const {
                        total,
                        hasMore,
                        threads
                      } = result;
                      if (!Array.isArray(threads)) {
                        throw new Error('handleCustomListRoute result must contain a "threads" array (https://www.inboxsdk.com/docs/#Router).');
                      }
                      if (total != null && hasMore != null) {
                        throw new Error('handleCustomListRoute result must only contain either a "total" or a "hasMore" property, but not both. (https://www.inboxsdk.com/docs/#Router).');
                      }
                      if (typeof total === "number") {
                        return {
                          total,
                          threads: copyAndOmitExcessThreads(threads, logger)
                        };
                      } else if (typeof hasMore === "boolean") {
                        const threadsWithoutExcess = copyAndOmitExcessThreads(threads, logger);
                        return {
                          total: hasMore ? "MANY" : start + threads.length,
                          threads: threadsWithoutExcess
                        };
                      } else {
                        throw new Error('handleCustomListRoute result must contain either a "total" number or a "hasMore" boolean (https://www.inboxsdk.com/docs/#Router).');
                      }
                    } else {
                      throw new Error("handleCustomListRoute result must be an array or an object (https://www.inboxsdk.com/docs/#Router).");
                    }
                  }
                  function threadDescriptorToInitialIDPair(id) {
                    if (typeof id === "string") {
                      if (id[0] == "<") {
                        return {
                          rfcId: id
                        };
                      } else {
                        return {
                          gtid: id
                        };
                      }
                    } else if (id) {
                      const obj2 = {
                        gtid: typeof id.gmailThreadId === "string" && id.gmailThreadId,
                        rfcId: typeof id.rfcMessageId === "string" && id.rfcMessageId
                      };
                      if (obj2.gtid || obj2.rfcId) {
                        return obj2;
                      }
                    }
                  }
                  function initialIDPairToIDPairWithRFC(driver, pair, findIdFailure) {
                    if (typeof pair.rfcId === "string") {
                      return Promise.resolve(pair);
                    } else if (typeof pair.gtid === "string") {
                      const gtid = pair.gtid;
                      return driver.getRfcMessageIdForGmailThreadId(gtid).then((rfcId) => ({
                        gtid,
                        rfcId
                      }), (err) => findIdFailure(gtid, err));
                    }
                    throw new Error("Should not happen");
                  }
                  function idPairWithRFCToCompletedIDPair(driver, pair, findIdFailure) {
                    return typeof pair.gtid === "string" ? Promise.resolve(pair) : driver.getGmailThreadIdForRfcMessageId(pair.rfcId).then((gtid) => ({
                      gtid,
                      rfcId: pair.rfcId
                    }), (err) => findIdFailure(pair.rfcId, err));
                  }
                  const setupSearchReplacing = (driver, customRouteID, onActivate, findIdFailure) => {
                    const preexistingQuery = threadListHandlersToSearchStrings.get(onActivate);
                    if (preexistingQuery) {
                      return preexistingQuery;
                    }
                    const newQuery = Date.now() + "-" + Math.random();
                    driver.getPageCommunicator().setupCustomListResultsQuery(newQuery);
                    driver.getPageCommunicator().ajaxInterceptStream.filter((e) => e.type === "searchForReplacement" && e.query === newQuery).onValue((_ref) => {
                      let {
                        start
                      } = _ref;
                      (async () => {
                        driver.signalCustomThreadListActivity(customRouteID);
                        let total;
                        let threadDescriptors;
                        try {
                          const onActivateResult = await Promise.resolve(onActivate(start, MAX_THREADS_PER_PAGE));
                          const parsed = parseOnActivateResult(driver.getLogger(), start, onActivateResult);
                          total = parsed.total;
                          threadDescriptors = parsed.threads;
                        } catch (e) {
                          driver.getLogger().error(e);
                          total = 0;
                          threadDescriptors = [];
                        }
                        const initialIDPairs = threadDescriptors.map(threadDescriptorToInitialIDPair).filter(isNotNil.A);
                        const idPairsWithRFC = (await Promise.all(initialIDPairs.map((pair) => initialIDPairToIDPairWithRFC(driver, pair, findIdFailure)))).filter(isNotNil.A);
                        const messageIDQuery = idPairsWithRFC.length > 0 ? idPairsWithRFC.map((_ref2) => {
                          let {
                            rfcId
                          } = _ref2;
                          return "rfc822msgid:" + rfcId;
                        }).join(" OR ") : "" + Math.random() + Date.now();
                        driver.getPageCommunicator().setCustomListNewQuery({
                          newQuery: messageIDQuery,
                          newStart: 0,
                          query: newQuery,
                          start
                        });
                        const searchResultsResponse_promise = driver.getPageCommunicator().ajaxInterceptStream.filter((e) => e.type === "searchResultsResponse" && e.query === newQuery && e.start === start).map((x2) => x2.response).take(1).toPromise();
                        const completedIDPairs = uniqBy_default()((await Promise.all(idPairsWithRFC.map((pair) => idPairWithRFCToCompletedIDPair(driver, pair, findIdFailure)))).filter(isNotNil.A), (p) => p.gtid);
                        const response = await searchResultsResponse_promise;
                        driver.signalCustomThreadListActivity(customRouteID);
                        let newResponse;
                        try {
                          const extractedThreads = gmail_sync_response_processor.Uf(response);
                          const extractedThreadsInCompletedIDPairsOrder = completedIDPairs.map((_ref3) => {
                            let {
                              gtid
                            } = _ref3;
                            return find_default()(extractedThreads, (t2) => t2.oldGmailThreadID === gtid);
                          }).filter(isNotNil.A);
                          const doesNeedReorder = extractedThreads.length !== extractedThreadsInCompletedIDPairsOrder.length || extractedThreads.some((extractedThread, index) => extractedThread !== extractedThreadsInCompletedIDPairsOrder[index]);
                          let reorderedThreads;
                          if (doesNeedReorder) {
                            const now = Date.now();
                            reorderedThreads = extractedThreadsInCompletedIDPairsOrder.map((extractedThread, index) => {
                              const newFormat = Array.isArray(extractedThread.rawResponse);
                              const newTime = String(now - index);
                              let newThread = immutability_helper_default()(extractedThread, {
                                rawResponse: newFormat ? {
                                  "0": {
                                    "2": {
                                      $set: newTime
                                    },
                                    "7": {
                                      $set: newTime
                                    }
                                  }
                                } : {
                                  "1": {
                                    "3": {
                                      $set: newTime
                                    },
                                    "8": {
                                      $set: newTime
                                    }
                                  }
                                }
                              });
                              if (newFormat ? extractedThread.rawResponse[0][4] : extractedThread.rawResponse[1][5]) {
                                newThread = immutability_helper_default()(newThread, {
                                  rawResponse: newFormat ? {
                                    "0": {
                                      "4": (oldVal) => oldVal.map((md) => immutability_helper_default()(md, {
                                        "6": {
                                          $set: newTime
                                        },
                                        "17": {
                                          $set: newTime
                                        },
                                        "30": {
                                          $set: newTime
                                        }
                                      }))
                                    }
                                  } : {
                                    "1": {
                                      "5": (oldVal) => oldVal.map((md) => immutability_helper_default()(md, {
                                        "7": {
                                          $set: newTime
                                        },
                                        "18": {
                                          $set: newTime
                                        },
                                        "31": {
                                          $set: newTime
                                        }
                                      }))
                                    }
                                  }
                                });
                              }
                              return newThread;
                            });
                          } else {
                            reorderedThreads = extractedThreads;
                          }
                          newResponse = gmail_sync_response_processor.q6(response, reorderedThreads, {
                            start,
                            total
                          });
                          driver.getPageCommunicator().setCustomListResults(newQuery, newResponse);
                        } catch (e) {
                          driver.getLogger().error(e, {
                            responseReplacementFailure: true,
                            //response: isStreakAppId(driver.getAppId()) ? response : null,
                            idPairsLength: completedIDPairs.length
                          });
                          const butterBar = driver.getButterBar();
                          if (butterBar) {
                            butterBar.showError({
                              text: "Failed to load custom thread list"
                            });
                          }
                          try {
                            driver.getPageCommunicator().setCustomListResults(newQuery, gmail_sync_response_processor.q6(response, [], {
                              start,
                              total
                            }));
                          } catch (e2) {
                            driver.getLogger().error(e2);
                            driver.getPageCommunicator().setCustomListResults(newQuery, null);
                          }
                          return;
                        }
                        setTimeout(() => {
                          const errorBar = document.querySelector(".vY .vX.UC");
                          if (errorBar && errorBar.style.display !== "none" && /#\d+/.test(errorBar.textContent)) {
                            const isStreak = (0, isStreakAppId.A)(driver.getAppId());
                            driver.getLogger().error(new Error("Gmail error with custom thread list"), {
                              message: errorBar.textContent,
                              completedIDPairsLength: completedIDPairs.length,
                              response: isStreak ? response : null,
                              newResponse: isStreak ? newResponse : null
                            });
                          }
                        }, 1e3);
                      })().catch((err) => driver.getLogger().error(err));
                    });
                    driver.getCustomListSearchStringsToRouteIds().set(newQuery, customRouteID);
                    threadListHandlersToSearchStrings.set(onActivate, newQuery);
                    return newQuery;
                  };
                  function showCustomThreadList(driver, customRouteID, onActivate, params) {
                    let findIdFailure = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : _findIdFailure;
                    const uniqueSearch = setupSearchReplacing(driver, customRouteID, onActivate, findIdFailure);
                    const customHash = document.location.hash;
                    const searchInput = gmail_element_getter.A.getSearchInput();
                    if (!searchInput) throw new Error("could not find search input");
                    const inputStream = gmail_element_getter.A.getMainContentElementChangedStream().changes().take(1).map(() => searchInput).flatMapLatest((input) => (0, make_mutation_observer_chunked_stream.A)(input, {
                      attributes: true,
                      attributeOldValue: true
                    }).filter((mutationRecords) => {
                      return mutationRecords.some((mutationRecord) => mutationRecord.attributeName === "role" && mutationRecord.oldValue === "combobox");
                    }).merge(kefir_esm["default"].later(15e3, null)).take(1));
                    inputStream.onValue(() => {
                      searchInput.value = "";
                      searchInput.style.visibility = "visible";
                    });
                    searchInput.style.visibility = "hidden";
                    const searchHash = "#search/" + [uniqueSearch, ...params].map(encodeURIComponent).join("/");
                    window.history.replaceState(null, null, searchHash);
                    const hce = new window.HashChangeEvent("hashchange", {
                      oldURL: document.location.href.replace(/#.*$/, "") + customHash,
                      newURL: document.location.href.replace(/#.*$/, "") + searchHash
                    });
                    window.dispatchEvent(hce);
                  }
                  var show_custom_route_view = __webpack_require__3(3759);
                  ;
                  function showNativeRouteView(_gmailDriver) {
                    const contentSectionElement = gmail_element_getter.A.getContentSectionElement();
                    if (!contentSectionElement) {
                      return;
                    }
                    Array.prototype.forEach.call(contentSectionElement.children, (child) => {
                      child.style.display = "";
                    });
                    if (document.body.classList.contains("inboxsdk__custom_view_active")) {
                      document.body.classList.remove("inboxsdk__custom_view_active");
                      (0, fake_window_resize.A)();
                    }
                  }
                  ;
                  function copyAndValidateAutocompleteResults(driver, results) {
                    if (!Array.isArray(results)) {
                      throw new Error("suggestions must be an array");
                    }
                    return results.map((result) => {
                      const resultCopy = {
                        ...result
                      };
                      if (typeof resultCopy.name !== "string" && typeof resultCopy.nameHTML !== "string") {
                        throw new Error("suggestion must have name or nameHTML property");
                      }
                      if (typeof resultCopy.routeName !== "string" && typeof resultCopy.externalURL !== "string" && typeof resultCopy.searchTerm !== "string" && typeof resultCopy.onClick !== "function") {
                        throw new Error("suggestion must have routeName, externalURL, searchTerm, or onClick property");
                      }
                      if (typeof resultCopy.iconURL === "string") {
                        const iconURL = resultCopy.iconURL;
                        driver.getLogger().deprecationWarning('AutocompleteSearchResult "iconURL" property', "AutocompleteSearchResult.iconUrl");
                        if (!resultCopy.iconUrl) {
                          if (driver.getOpts().REQUESTED_API_VERSION === 1) {
                            resultCopy.iconUrl = iconURL;
                          } else {
                            console.error("Support for iconURL property was dropped after API version 1");
                          }
                        }
                        delete resultCopy.iconURL;
                      }
                      return resultCopy;
                    });
                  }
                  ;
                  function registerSearchSuggestionsProvider(driver, handler) {
                    const providerId = "inboxsdk__suggestions_" + ("" + Date.now() + Math.random()).replace(/\D+/g, "");
                    const pageCommunicator = driver.getPageCommunicator();
                    pageCommunicator.registerSuggestionsModifier(providerId);
                    const suggestionsStream = pageCommunicator.ajaxInterceptStream.filter((event) => event.type === "suggestionsRequest").flatMapLatest((_ref) => {
                      let {
                        query
                      } = _ref;
                      return kefir_esm.fromPromise(Promise.resolve(handler(query))).flatMap((results) => {
                        try {
                          const validatedResults = copyAndValidateAutocompleteResults(driver, results);
                          const validatedResultsWithIds = validatedResults.map((result) => ({
                            ...result,
                            providerId,
                            id: `${Date.now()}-${Math.random()}`
                          }));
                          return kefir_esm.constant(validatedResultsWithIds);
                        } catch (e) {
                          return kefir_esm.constantError(e);
                        }
                      }).mapErrors((err) => {
                        driver.getLogger().error(err);
                        return [];
                      }).map((suggestions) => {
                        return {
                          query,
                          suggestions
                        };
                      });
                    }).onValue((event) => {
                      pageCommunicator.provideAutocompleteSuggestions(providerId, event.query, event.suggestions);
                    }).map((event) => event.suggestions);
                    const searchBoxStream = driver.getRouteViewDriverStream().toProperty(() => null).map(() => gmail_element_getter.A.getSearchInput()).filter(isNotNil.A).take(1);
                    const suggestionsBoxTbodyStream = searchBoxStream.flatMapLatest((searchBox) => kefir_esm.fromEvents(searchBox, "focus")).map(() => gmail_element_getter.A.getSearchSuggestionsBoxParent()).filter(isNotNil.A).flatMapLatest(make_element_child_stream.A).map((x2) => x2.el.firstElementChild).take(1).toProperty();
                    const suggestionsBoxGmailChanges = suggestionsBoxTbodyStream.flatMap((suggestionsBoxTbody) => (0, make_mutation_observer_chunked_stream.A)(suggestionsBoxTbody, {
                      childList: true
                    }).toProperty(() => null)).map(() => null);
                    const suggestionsBoxEnterPresses = searchBoxStream.flatMap((searchBox) => (0, from_event_target_capture.A)(document, "keydown").filter((event) => event.keyCode == 13 && event.target === searchBox));
                    const providedRows = suggestionsBoxTbodyStream.sampledBy(suggestionsBoxGmailChanges).map((suggestionsBoxTbody) => Array.from(suggestionsBoxTbody.children).filter((row) => row.getElementsByClassName(providerId).length > 0));
                    providedRows.onValue((rows) => {
                      if (rows[0] && rows[0].previousElementSibling) {
                        const prevFirstChild = rows[0].previousElementSibling.firstElementChild;
                        if (prevFirstChild) {
                          prevFirstChild.classList.add("inboxsdk__suggestions_separator_before");
                        }
                        const firstChild = rows[0].firstElementChild;
                        if (firstChild) {
                          firstChild.classList.add("inboxsdk__suggestions_separator_after");
                        }
                      }
                    });
                    const rowSelectionEvents = providedRows.flatMapLatest((rows) => kefir_esm.merge(rows.map((row) => kefir_esm.merge([(0, from_event_target_capture.A)(row, "click"), suggestionsBoxEnterPresses.filter(() => row.classList.contains("gssb_i"))]).map((event) => ({
                      event,
                      row
                    })))));
                    const activeSuggestionsStream = kefir_esm.merge([suggestionsStream, searchBoxStream.flatMapLatest((searchBox) => kefir_esm.fromEvents(searchBox, "blur")).map(() => [])]).toProperty();
                    kefir_esm.combine([rowSelectionEvents, searchBoxStream], [activeSuggestionsStream]).onValue((tuple) => {
                      const [{
                        event,
                        row
                      }, searchBox, suggestions] = tuple;
                      const itemDataSpan = row.querySelector("span[data-inboxsdk-suggestion]");
                      const itemData = itemDataSpan ? JSON.parse(itemDataSpan.getAttribute("data-inboxsdk-suggestion") || "null") : null;
                      const clearSearch = once_default()(() => {
                        event.stopImmediatePropagation();
                        event.preventDefault();
                        searchBox.blur();
                        searchBox.value = "";
                      });
                      if (itemData) {
                        const {
                          id
                        } = itemData;
                        const suggestion = find_default()(suggestions, (s) => s.id === id);
                        if (!suggestion) {
                          driver.getLogger().error(new Error("Failed to find suggestion by id"));
                        }
                        if (suggestion && suggestion.onClick) {
                          clearSearch();
                          suggestion.onClick.call(null);
                        }
                      }
                      if (itemData && itemData.routeName) {
                        clearSearch();
                        driver.goto(itemData.routeName, itemData.routeParams);
                      } else if (itemData && itemData.externalURL) {
                        clearSearch();
                        window.open(itemData.externalURL);
                      }
                    });
                  }
                  var setup_compose_view_driver_stream = __webpack_require__3(7032);
                  ;
                  function trackEvents(gmailDriver) {
                    _setupComposeMonitoring(gmailDriver);
                    _setupAttachmentModalMonitoring(gmailDriver);
                    _setupDragDropMonitoring(gmailDriver);
                  }
                  function _setupComposeMonitoring(gmailDriver) {
                    gmailDriver.getComposeViewDriverStream().onValue((composeViewDriver) => {
                      var logFunction = _getLogFunction(gmailDriver, composeViewDriver);
                      logFunction("compose open");
                      _monitorComposeSpecificEvents(composeViewDriver, logFunction);
                    });
                  }
                  function _getLogFunction(gmailDriver, composeViewDriver) {
                    var logger = gmailDriver.getLogger();
                    var composeStats = {
                      isInlineReply: composeViewDriver.isInlineReplyForm(),
                      isReply: composeViewDriver.isReply()
                    };
                    return function(eventName, extraOptions) {
                      logger.eventSite(eventName, {
                        ...composeStats,
                        ...extraOptions
                      });
                    };
                  }
                  function _monitorComposeSpecificEvents(composeViewDriver, logFunction) {
                    _monitorAttachmentButton(composeViewDriver, logFunction);
                    _monitorDriveButton(composeViewDriver, logFunction);
                  }
                  function _monitorAttachmentButton(composeViewDriver, logFunction) {
                    var attachmentButton = composeViewDriver.getElement().querySelector(".a1");
                    if (attachmentButton) {
                      kefir_esm["default"].fromEvents(attachmentButton, "mousedown").takeUntilBy(composeViewDriver.getStopper()).onValue(() => {
                        logFunction("attachment button clicked");
                        _monitorAttachmentAdded(composeViewDriver, logFunction);
                      });
                    }
                  }
                  function _monitorAttachmentAdded(composeViewDriver, logFunction) {
                    (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node && node.type === "file").take(1).flatMap((node) => {
                      return kefir_esm["default"].fromEvents(node, "change").map(() => true).merge(kefir_esm["default"].fromEvents(composeViewDriver.getBodyElement(), "focus").map(() => false).delay(1e3));
                    }).take(1).filter(Boolean).takeUntilBy(composeViewDriver.getStopper()).onValue(() => logFunction("attachment uploaded"));
                  }
                  function _monitorDriveButton(composeViewDriver, logFunction) {
                    var driveButton = composeViewDriver.getElement().querySelector(".aA7");
                    if (driveButton) {
                      kefir_esm["default"].fromEvents(driveButton, "mousedown").takeUntilBy(composeViewDriver.getStopper()).onValue(() => {
                        logFunction("drive button clicked");
                        _monitorDriveFileAdded(composeViewDriver, logFunction);
                      });
                    }
                  }
                  function _monitorDriveFileAdded(composeViewDriver, logFunction) {
                    var numberCurrentDriveChips = composeViewDriver.getBodyElement().querySelectorAll(".gmail_drive_chip").length;
                    (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node && node.classList.contains("picker-dialog")).take(1).flatMap((_node) => {
                      return kefir_esm["default"].fromEvents(composeViewDriver.getBodyElement(), "focus").delay(1e3).map(() => {
                        if (composeViewDriver.getBodyElement()) {
                          return composeViewDriver.getBodyElement().querySelectorAll(".gmail_drive_chip").length;
                        }
                        return 0;
                      }).map((newNumber) => numberCurrentDriveChips < newNumber).take(1);
                    }).take(1).filter(Boolean).takeUntilBy(composeViewDriver.getStopper()).onValue(() => logFunction("drive file added"));
                  }
                  function _setupAttachmentModalMonitoring(gmailDriver) {
                    (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node.getAttribute && node.getAttribute("role") === "alertdialog").takeUntilBy(gmailDriver.getStopper()).onValue((node) => {
                      var heading = node.querySelector("[role=heading]");
                      if (heading) {
                        if (heading.textContent.indexOf("exceeds the 25MB") > -1) {
                          gmailDriver.getLogger().eventSite("large attachment suggest drive");
                          return;
                        }
                      }
                      var body = node.querySelector(".Kj-JD-Jz");
                      if (body) {
                        if (body.textContent.indexOf("exceeds the maximum") > -1) {
                          gmailDriver.getLogger().eventSite("large attachment from drag and drop");
                          return;
                        }
                      }
                    });
                  }
                  function _setupDragDropMonitoring(gmailDriver) {
                    gmailDriver.getComposeViewDriverStream().flatMapLatest(() => {
                      return kefir_esm["default"].fromEvents(document.body, "dragenter").filter((event) => event.toElement).filter((event) => event.toElement.classList.contains("aC7") || event.toElement.classList.contains("aC9")).take(1);
                    }).takeUntilBy(gmailDriver.getStopper()).onValue(() => gmailDriver.getLogger().eventSite("compose drag file"));
                    gmailDriver.getComposeViewDriverStream().flatMapLatest(() => {
                      return kefir_esm["default"].fromEvents(document.body, "drop").filter((event) => event.toElement).filter((event) => event.toElement.classList.contains("aC7") || event.toElement.classList.contains("aC9")).take(1);
                    }).takeUntilBy(gmailDriver.getStopper()).onValue(() => gmailDriver.getLogger().eventSite("compose drop file"));
                  }
                  var isIntegratedViewGmail = __webpack_require__3(6908);
                  ;
                  async function isSidePanelCollapsed() {
                    const sidePanelSelector = ".brC-aT5-aOt-Jw[role=complementary]";
                    try {
                      await (0, wait_for.A)(() => document.querySelector(sidePanelSelector), 1e4);
                      await (0, wait_for.A)(() => document.querySelector(".aT5-aOt-I[role=button]"));
                    } catch (e) {
                      if (e instanceof wait_for.D) {
                        return null;
                      }
                      throw e;
                    }
                    const maybeCollapsedSidePanel = document.querySelector(`${sidePanelSelector}[style*="display: none;"]`);
                    return maybeCollapsedSidePanel != null;
                  }
                  async function gmailLoadEvent(driver) {
                    const pageCommunicator = driver.getPageCommunicator();
                    const isConversationViewDisabled = await pageCommunicator.isConversationViewDisabled();
                    await waitForMenuReady();
                    const isUsingDarkTheme = await checkForDarkThemeSafe();
                    const sidePanelCollapsed = await isSidePanelCollapsed();
                    const timing = performance?.timing;
                    driver.logger.eventSite("gmailSettings", {
                      /**
                       * Whether or not Google Chat, Google Meet, or both enabled. If they are, the SDK's
                       * AppMenu is available for the left nav.
                       */
                      isGmailIntegratedView: (0, isIntegratedViewGmail.Ay)(),
                      /**
                       * This is the panel on the left side of the screen. If the top left burger of Gmail is collapsed, then this is true.
                       */
                      isCollapsiblePanelHidden: (0, isIntegratedViewGmail.HW)(),
                      isGoogleChatEnabled: (0, isIntegratedViewGmail.Zu)(),
                      /**
                       * This is the sidePanel on the right side of the screen. The collapse button is at the bottom right corner of the screen.
                       */
                      isSidePanelCollapsed: sidePanelCollapsed,
                      isDarkTheme: isUsingDarkTheme,
                      screenWidth: window.screen?.width,
                      screenHeight: window.screen?.height,
                      windowWidth: window.innerWidth,
                      windowHeight: window.innerHeight,
                      language: pageCommunicator.getUserLanguage(),
                      previewPane: pageCommunicator.getUserOriginalPreviewPaneMode(),
                      isConversationViewDisabled,
                      wasAccountSwitcherReadyAtStart: driver.getEnvData().wasAccountSwitcherReadyAtStart,
                      timings: {
                        responseStart: timing?.responseStart,
                        responseEnd: timing?.responseEnd,
                        domLoading: timing?.domLoading,
                        domInteractive: timing?.domInteractive,
                        domComplete: timing?.domComplete,
                        domContentLoadedEventStart: timing?.domContentLoadedEventStart,
                        domContentLoadedEventEnd: timing?.domContentLoadedEventEnd,
                        domainLookupEnd: timing?.domainLookupEnd,
                        domainLookupStart: timing?.domainLookupStart,
                        fetchStart: timing?.fetchStart,
                        loadEventStart: timing?.loadEventStart,
                        loadEventEnd: timing?.loadEventEnd,
                        navigationStart: timing?.navigationStart,
                        requestStart: timing?.requestStart,
                        ...driver.getTimings()
                      }
                    });
                  }
                  ;
                  class ThreadRowIdentifier {
                    constructor(driver) {
                      this._driver = driver;
                      this._composeViews = /* @__PURE__ */ new Set();
                      this._driver.getComposeViewDriverStream().onValue((gmailComposeView) => {
                        this._composeViews.add(gmailComposeView);
                        gmailComposeView.getStopper().onValue(() => {
                          this._composeViews.delete(gmailComposeView);
                        });
                      });
                    }
                    getThreadIdForThreadRow(gmailThreadRowView, elements) {
                      {
                        const threadID = this._driver.getPageCommunicator().getThreadIdForThreadRowByDatabase(elements[0]);
                        if (threadID) {
                          return threadID;
                        }
                      }
                      if (gmailThreadRowView.getVisibleMessageCount() == 0 && gmailThreadRowView.getVisibleDraftCount() > 0) {
                        const composeView = this._findComposeForThreadRow(gmailThreadRowView);
                        if (composeView) {
                          return composeView.getMessageID();
                        }
                      }
                      if (false) {
                      }
                      return null;
                    }
                    async getDraftIdForThreadRow(gmailThreadRowView) {
                      if (gmailThreadRowView.getVisibleMessageCount() > 0 || gmailThreadRowView.getVisibleDraftCount() == 0) {
                        return Promise.resolve(null);
                      }
                      const composeView = this._findComposeForThreadRow(gmailThreadRowView);
                      if (composeView) {
                        return composeView.getDraftID();
                      }
                      const {
                        draftID
                      } = await this._driver.getDraftIDForMessageID(gmailThreadRowView.getThreadID());
                      return draftID;
                    }
                    _findComposeForThreadRow(gmailThreadRowView) {
                      const candidates = [];
                      const subject = gmailThreadRowView.getSubject();
                      for (const gmailComposeView of this._composeViews) {
                        if (subject === gmailComposeView.getSubject()) {
                          candidates.push(gmailComposeView);
                        }
                      }
                      if (candidates.length == 1) {
                        return candidates[0];
                      }
                      return null;
                    }
                  }
                  const thread_row_identifier = ThreadRowIdentifier;
                  var override_gmail_back_button = __webpack_require__3(2268);
                  var gmail_tooltip_view = __webpack_require__3(4806);
                  var dropdown_view = __webpack_require__3(3046);
                  ;
                  const BANNER_WIDTH_LIMIT = 900;
                  function monitorTopBannerSizeAndReact() {
                    const ResizeObserver = __webpack_require__3.g.ResizeObserver;
                    if (!ResizeObserver) return;
                    const body = document.body;
                    if (!body) return;
                    const banner = body.querySelector("[role=banner]");
                    if (!banner) return;
                    if (banner.hasAttribute("inboxsdk__resize_claimed")) return;
                    banner.setAttribute("inboxsdk__resize_claimed", "true");
                    const resizeObserver = new ResizeObserver(() => {
                      if (banner.clientWidth < BANNER_WIDTH_LIMIT) {
                        body.classList.add("inboxsdk__searchIsNarrow");
                      } else {
                        body.classList.remove("inboxsdk__searchIsNarrow");
                      }
                    });
                    resizeObserver.observe(banner);
                  }
                  ;
                  class GmailAppToolbarButtonView {
                    _element = null;
                    constructor(driver, inButtonDescriptor) {
                      this._driver = driver;
                      this._stopper = js_default()();
                      this._iconSettings = {};
                      inButtonDescriptor.takeUntilBy(this._stopper).onValue((buttonDescriptor) => {
                        try {
                          this._handleButtonDescriptor(buttonDescriptor);
                        } catch (err) {
                          this._driver.getLogger().error(err);
                        }
                      });
                      monitorTopBannerSizeAndReact();
                    }
                    destroy() {
                      this._stopper.destroy();
                      if (this._element) {
                        this._element.remove();
                      }
                      if (this._activeDropdown) {
                        this._activeDropdown.close();
                      }
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getElement() {
                      return this._element;
                    }
                    open() {
                      try {
                        if (!this._activeDropdown) {
                          this._handleClick();
                        }
                      } catch (err) {
                        this._driver.getLogger().error(err);
                      }
                    }
                    close() {
                      try {
                        if (this._activeDropdown) {
                          this._handleClick();
                        }
                      } catch (err) {
                        this._driver.getLogger().error(err);
                      }
                    }
                    _handleButtonDescriptor(buttonDescriptor) {
                      if (!buttonDescriptor) {
                        throw new Error("The application passed an invalid value for buttonDescriptor");
                      }
                      const element = this._element = this._element || _createAppButtonElement(this._driver, () => {
                        this._handleClick();
                      });
                      this._buttonDescriptor = buttonDescriptor;
                      (0, update_icon.A)(this._iconSettings, (0, querySelectorOrFail.A)(element, "a"), false, buttonDescriptor.iconClass, buttonDescriptor.iconUrl);
                      _updateTitle((0, querySelectorOrFail.A)(element, "span"), buttonDescriptor);
                    }
                    _handleClick() {
                      const element = this._element;
                      if (!element) {
                        return;
                      }
                      const buttonDescriptor = this._buttonDescriptor;
                      if (!buttonDescriptor) {
                        throw new Error("app toolbar button clicked before receiving button descriptor");
                      }
                      if (this._activeDropdown) {
                        this._activeDropdown.close();
                      } else {
                        var appEvent = {};
                        var tooltipView = new gmail_tooltip_view.A();
                        tooltipView.getContainerElement().classList.add("inboxsdk__appButton_tooltip");
                        tooltipView.getContentElement().innerHTML = "";
                        if (buttonDescriptor.arrowColor) {
                          (0, querySelectorOrFail.A)(tooltipView.getContainerElement(), ".T-P-atC").style.borderTopColor = buttonDescriptor.arrowColor;
                        }
                        appEvent.dropdown = this._activeDropdown = new dropdown_view.A(tooltipView, element, {
                          manualPosition: true
                        });
                        appEvent.dropdown.on("destroy", () => {
                          this._activeDropdown = null;
                        });
                        if (buttonDescriptor.onClick) {
                          buttonDescriptor.onClick.call(null, appEvent);
                        }
                        if (this._element) {
                          tooltipView.anchor(this._element, {
                            position: "bottom",
                            offset: {
                              top: 8
                            }
                          });
                        }
                      }
                    }
                  }
                  function _createAppButtonElement(driver, onclick) {
                    const element = document.createElement("div");
                    element.setAttribute("class", "inboxsdk__appButton");
                    element.innerHTML = `<a href="#">
               <span class="inboxsdk__appButton_title"></span>
             </a>`;
                    element.addEventListener("click", (event) => {
                      event.preventDefault();
                      onclick(event);
                    });
                    const topAccountContainer = gmail_element_getter.A.getTopAccountContainer();
                    if (!topAccountContainer) {
                      const err = new Error("Could not make button");
                      const banner = document.querySelector("[role=banner]");
                      driver.getLogger().error(err, {
                        type: "failed to make appToolbarButton",
                        gbsfwPresent: !!document.getElementById("gbsfw"),
                        bannerHtml: banner && (0, censorHTMLtree.A)(banner)
                      });
                      throw err;
                    }
                    const insertionElement = topAccountContainer;
                    if (!insertionElement) {
                      const err = new Error("Could not make button");
                      driver.getLogger().error(err, {
                        type: "failed to make appToolbarButton",
                        topAccountContainerHTML: (0, censorHTMLtree.A)(topAccountContainer)
                      });
                      throw err;
                    }
                    try {
                      if (!gmail_element_getter.A.isGplusEnabled()) {
                        element.classList.add("inboxsdk__appButton_noGPlus");
                      }
                      insertionElement.insertBefore(element, insertionElement.lastElementChild);
                      return element;
                    } catch (err) {
                      driver.getLogger().error(err, {
                        type: "failed to make appToolbarButton",
                        insertionElementHTML: (0, censorHTMLtree.A)(insertionElement)
                      });
                      throw err;
                    }
                  }
                  function _updateTitle(element, descriptor) {
                    element.textContent = descriptor.title;
                    element.className = `inboxsdk__appButton_title ${descriptor.titleClass || ""}`;
                  }
                  ;
                  function addToolbarButtonForApp(gmailDriver, buttonDescriptor) {
                    return gmail_element_getter.A.waitForGmailModeToSettle().then(() => {
                      if (gmail_element_getter.A.isStandalone()) {
                        return new Promise((_resolve, _reject) => {
                        });
                      } else {
                        return new GmailAppToolbarButtonView(gmailDriver, buttonDescriptor);
                      }
                    });
                  }
                  ;
                  function getURLObject(url) {
                    const m = url.match(/#([^?]*)(?:\?(.*))?/);
                    if (!m) {
                      return {
                        name: "inbox",
                        params: [],
                        hash: "",
                        query: void 0
                      };
                    }
                    const hash = m[1];
                    const hashParts = hash.split("/");
                    return {
                      name: decodeURIComponent(hashParts[0]),
                      params: hashParts.slice(1).map((part) => part.replace(/\+/g, " ")).map(decodeURIComponent),
                      query: m[2],
                      hash
                    };
                  }
                  var memoize = __webpack_require__3(9513);
                  var memoize_default = /* @__PURE__ */ __webpack_require__3.n(memoize);
                  var escapeRegExp = __webpack_require__3(5098);
                  var escapeRegExp_default = /* @__PURE__ */ __webpack_require__3.n(escapeRegExp);
                  ;
                  const routeIDtoRegExp = memoize_default()((routeID) => new RegExp("^" + escapeRegExp_default()(routeID).replace(/\/:[^/]+/g, "/([^/]+)") + "/?$"));
                  function routeIDmatchesHash(routeID, hash) {
                    const routeIDs = Array.isArray(routeID) ? routeID : [routeID];
                    return find_default()(routeIDs, (routeID2) => hash.match(routeIDtoRegExp(routeID2)));
                  }
                  ;
                  function setupRouteViewDriverStream(gmailRouteProcessor, driver) {
                    const customRouteIDs = driver.getCustomRouteIDs();
                    const customListRouteIDs = driver.getCustomListRouteIDs();
                    const customListSearchStringsToRouteIds = driver.getCustomListSearchStringsToRouteIds();
                    let lastNativeHash = getURLObject(document.location.href).hash;
                    let latestGmailRouteView = null;
                    driver.getStopper().onValue(() => {
                      if (latestGmailRouteView) {
                        latestGmailRouteView.destroy();
                      }
                    });
                    let lastHash = lastNativeHash;
                    let sameRouteData = {};
                    const eligibleHashChanges = kefir_esm["default"].fromEvents(window, "hashchange").filter((event) => !event.oldURL.match(/#inboxsdk-fake-no-vc$/)).map((event) => ({
                      new: getURLObject(event.newURL),
                      old: getURLObject(event.oldURL)
                    })).filter((event) => event.new.hash !== event.old.hash).map((event) => event.new).map((urlObject) => {
                      const {
                        hash,
                        name
                      } = urlObject;
                      for (const routeIDs of customRouteIDs) {
                        const routeID = routeIDmatchesHash(routeIDs, hash);
                        if (routeID) {
                          return {
                            urlObject,
                            type: "CUSTOM",
                            routeID
                          };
                        }
                      }
                      for (const [routeIDs] of customListRouteIDs) {
                        const routeID = routeIDmatchesHash(routeIDs, name);
                        if (routeID) {
                          return {
                            urlObject,
                            type: "CUSTOM_LIST_TRIGGER",
                            routeID
                          };
                        }
                      }
                      if (gmailRouteProcessor.isNativeRoute(urlObject.name)) {
                        return {
                          urlObject,
                          type: "NATIVE"
                        };
                      }
                      return {
                        urlObject,
                        type: "OTHER_APP_CUSTOM"
                      };
                    });
                    const customAndCustomListRouteHashChanges = eligibleHashChanges.filter((_ref) => {
                      let {
                        type
                      } = _ref;
                      return type !== "NATIVE";
                    });
                    const revertNativeHashChanges = eligibleHashChanges.filter((_ref2) => {
                      let {
                        type
                      } = _ref2;
                      return type === "NATIVE";
                    }).filter((_ref3) => {
                      let {
                        urlObject
                      } = _ref3;
                      const tmp = lastNativeHash;
                      lastNativeHash = urlObject.hash;
                      return tmp === urlObject.hash;
                    }).filter((_ref4) => {
                      let {
                        urlObject
                      } = _ref4;
                      return urlObject.hash !== lastHash;
                    });
                    return kefir_esm["default"].merge([
                      customAndCustomListRouteHashChanges,
                      revertNativeHashChanges,
                      // when native gmail changes main view there's a div that takes on role=main.
                      // getMainContentElementChangedStream doesn't respect custom views so filter
                      // out events from it. This filter is needed if the user is already at a custom
                      // view of another InboxSDK instance while this starts up.
                      gmail_element_getter.A.getMainContentElementChangedStream().map((_event) => ({
                        urlObject: getURLObject(document.location.href),
                        type: "NATIVE"
                      })).filter((options2) => gmailRouteProcessor.isNativeRoute(options2.urlObject.name))
                    ]).map((options2) => {
                      const {
                        type,
                        urlObject
                      } = options2;
                      if (type === "NATIVE" && urlObject.name === "search") {
                        const customListRouteId = customListSearchStringsToRouteIds.get(urlObject.params[0]);
                        if (customListRouteId) {
                          const searchInput = gmail_element_getter.A.getSearchInput();
                          if (!searchInput) throw new Error("Should not happen");
                          searchInput.value = "";
                          if (urlObject.params.length === 1 || urlObject.params.length === 2 && urlObject.params[1][0] === "p") {
                            driver.hashChangeNoViewChange("#" + customListRouteId + (urlObject.params[1] ? "/" + urlObject.params[1] : ""));
                            return {
                              type: "CUSTOM_LIST",
                              urlObject,
                              routeID: customListRouteId
                            };
                          }
                        }
                      }
                      return options2;
                    }).map((options2) => {
                      const MAX_KEY_CACHE = 50;
                      const {
                        urlObject
                      } = options2;
                      if (!sameRouteData[urlObject.hash]) {
                        sameRouteData[urlObject.hash] = {
                          data: {}
                        };
                      }
                      sameRouteData[urlObject.hash].lastUsedTimestamp = Date.now();
                      if (Object.keys(sameRouteData).length > MAX_KEY_CACHE) {
                        sameRouteData = Object.keys(sameRouteData).sort((a, b) => sameRouteData[b].lastUsedTimestamp - sameRouteData[a].lastUsedTimestamp).slice(0, MAX_KEY_CACHE / 2).reduce((acc, hash) => ({
                          ...acc,
                          [hash]: sameRouteData[hash]
                        }), {});
                      }
                      return {
                        ...options2,
                        cachedRouteData: sameRouteData[urlObject.hash].data
                      };
                    }).map((options2) => {
                      if (options2.type === "NATIVE" || options2.type === "CUSTOM_LIST") {
                        driver.showNativeRouteView();
                      } else if (options2.type === "CUSTOM_LIST_TRIGGER") {
                        driver.showCustomThreadList(options2.routeID, (0, get_or_fail.A)(customListRouteIDs, options2.routeID), options2.urlObject.params);
                        return;
                      }
                      return new gmail_route_view(options2, gmailRouteProcessor, driver);
                    }).filter(isNotNil.A).map((gmailRouteView) => {
                      if (latestGmailRouteView) {
                        latestGmailRouteView.destroy();
                      }
                      latestGmailRouteView = gmailRouteView;
                      lastHash = getURLObject(document.location.href).hash;
                      return gmailRouteView;
                    });
                  }
                  ;
                  class NativeGmailNavItemView {
                    _activeMarkerElement = null;
                    _isActive = false;
                    _itemContainerElement = null;
                    constructor(driver, nativeElement, navItemName) {
                      this._driver = driver;
                      this._element = nativeElement;
                      this._eventStream = kefir_bus_default()();
                      this._elementBus = kefir_bus_default()();
                      this._elementStream = this._elementBus.toProperty(() => this._element);
                      this._navItemName = navItemName;
                      const parentElement = this._element.parentElement;
                      if (parentElement) {
                        (0, make_mutation_observer_chunked_stream.A)(parentElement, {
                          childList: true
                        }).map(() => parentElement.querySelector(`.aim a[href*="#${this._navItemName}"]`)).filter(isNotNil.A).map((link) => findParent(link, (el) => el.classList.contains("aim"))).filter(isNotNil.A).filter((newElement) => newElement !== this._element).onValue((newElement) => {
                          if (newElement) {
                            const currentContainerElement = this._itemContainerElement;
                            if (currentContainerElement) {
                              currentContainerElement.remove();
                              this._itemContainerElement = null;
                            }
                            this._elementBus.emit(newElement);
                          }
                        });
                      }
                      this._elementStream.onValue((element) => {
                        this._element = element;
                        this._monitorElementForActiveChanges();
                        this.setActive(this._isActive);
                      });
                    }
                    destroy() {
                      this._element.classList.remove("inboxsdk__navItem_claimed");
                      this._eventStream.end();
                      this._elementBus.end();
                      if (this._activeMarkerElement) this._activeMarkerElement.remove();
                      if (this._itemContainerElement) this._itemContainerElement.remove();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    addNavItem(orderGroup, navItemDescriptor) {
                      const gmailNavItemView = new GmailNavItemView(this._driver, orderGroup, 2);
                      kefir_esm.merge([gmailNavItemView.getEventStream().filter((event) => event.eventName === "orderChanged"), this._elementStream]).onValue(() => this._addNavItemElement(gmailNavItemView));
                      gmailNavItemView.setNavItemDescriptor(navItemDescriptor);
                      return gmailNavItemView;
                    }
                    setActive(value) {
                      this._isActive = value;
                      const toElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                      if (value) {
                        this._element.classList.add("ain");
                        toElement.classList.add("nZ");
                        toElement.classList.add("aiq");
                      } else {
                        this._element.classList.remove("ain");
                        toElement.classList.remove("nZ");
                        toElement.classList.remove("aiq");
                      }
                      this._setHeights();
                    }
                    toggleCollapse() {
                      this._toggleCollapse();
                    }
                    setCollapsed(value) {
                      localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] = value;
                      if (!this._element.querySelector(".inboxsdk__expando")) {
                        return;
                      }
                      if (value) {
                        this._collapse();
                      } else {
                        this._expand();
                      }
                    }
                    remove() {
                    }
                    _monitorElementForActiveChanges() {
                      this._element.classList.add("inboxsdk__navItem_claimed");
                      const element = this._element;
                      const classChangeStream = (0, make_mutation_observer_chunked_stream.A)(element, {
                        attributes: true,
                        attributeFilter: ["class"]
                      }).takeUntilBy(this._eventStream.filter(() => false).beforeEnd(() => null)).toProperty(() => []).map(() => element);
                      classChangeStream.filter((el) => el.classList.contains("ain")).onValue(() => this._createActiveMarkerElement());
                      classChangeStream.filter((el) => !el.classList.contains("ain")).onValue(() => this._removeActiveMarkerElement());
                    }
                    _addNavItemElement(gmailNavItemView) {
                      const itemContainerElement = this._getItemContainerElement();
                      const insertBeforeElement = getInsertBeforeElement(gmailNavItemView.getElement(), itemContainerElement.children, ["data-group-order-hint", "data-order-hint", "data-insertion-order-hint"]);
                      itemContainerElement.insertBefore(gmailNavItemView.getElement(), insertBeforeElement);
                      if (!gmailNavItemView.isSection()) {
                        const element = gmailNavItemView.getElement();
                        (0, querySelectorOrFail.A)(element, ".TN").style.marginLeft = getLeftIndentationPaddingValue() + "px";
                      }
                      this._setHeights();
                    }
                    _getItemContainerElement() {
                      let itemContainerElement = this._itemContainerElement;
                      if (!itemContainerElement) {
                        itemContainerElement = this._itemContainerElement = this._element.querySelector(".inboxsdk__navItem_container");
                        if (!itemContainerElement) {
                          itemContainerElement = this._createItemContainerElement();
                          this._createExpando();
                        }
                      }
                      return itemContainerElement;
                    }
                    _createItemContainerElement() {
                      const itemContainerElement = this._itemContainerElement = document.createElement("div");
                      itemContainerElement.classList.add("inboxsdk__navItem_container");
                      this._element.appendChild(itemContainerElement);
                      return itemContainerElement;
                    }
                    _createExpando() {
                      const link = this._element.querySelector("a");
                      const expandoElement = document.createElement("div");
                      expandoElement.setAttribute("class", "TH aih J-J5-Ji inboxsdk__expando");
                      expandoElement.setAttribute("role", "link");
                      expandoElement.title = `Expand ${link ? link.title || link.textContent : ""}`;
                      expandoElement.addEventListener("click", (e) => {
                        this._toggleCollapse();
                        e.stopPropagation();
                        e.preventDefault();
                        e.stopImmediatePropagation();
                      }, true);
                      const insertionPoint = this._element.querySelector(".TN");
                      if (insertionPoint) {
                        insertionPoint.insertAdjacentElement("afterbegin", expandoElement);
                      }
                      if (localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] === "collapsed") {
                        this._collapse();
                      } else {
                        this._expand();
                      }
                    }
                    _toggleCollapse() {
                      if (!this._element.querySelector(".inboxsdk__expando")) {
                        if (localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] === "collapsed") {
                          localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] = "expanded";
                        } else {
                          localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] = "collapsed";
                        }
                        return;
                      }
                      if (localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] === "collapsed") {
                        this._expand();
                      } else {
                        this._collapse();
                      }
                    }
                    _collapse() {
                      const expandoElement = (0, querySelectorOrFail.A)(this._element, ".inboxsdk__expando");
                      expandoElement.classList.remove("aih");
                      expandoElement.classList.add("aii");
                      if (this._itemContainerElement) this._itemContainerElement.style.display = "none";
                      localStorage.setItem("inboxsdk__nativeNavItem__state_" + this._navItemName, "collapsed");
                      this._eventStream.emit({
                        eventName: "collapsed"
                      });
                      this._setHeights();
                    }
                    _expand() {
                      const expandoElement = (0, querySelectorOrFail.A)(this._element, ".inboxsdk__expando");
                      expandoElement.classList.add("aih");
                      expandoElement.classList.remove("aii");
                      if (this._itemContainerElement) this._itemContainerElement.style.display = "";
                      localStorage.setItem("inboxsdk__nativeNavItem__state_" + this._navItemName, "expanded");
                      this._eventStream.emit({
                        eventName: "expanded"
                      });
                      this._setHeights();
                    }
                    _isExpanded() {
                      return !!this._element.querySelector(".inboxsdk__expando.aih");
                    }
                    _setHeights() {
                      if (this._element.classList.contains("ain") && this._itemContainerElement) {
                        const toElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                        this._element.style.height = "";
                        const totalHeight = this._element.clientHeight;
                        const itemHeight = toElement.clientHeight;
                        this._element.style.height = itemHeight + "px";
                        this._element.style.overflow = "visible";
                        this._element.style.marginBottom = totalHeight - itemHeight + "px";
                      } else {
                        this._element.style.height = "";
                        this._element.style.overflow = "";
                        this._element.style.marginBottom = "";
                      }
                    }
                    _createActiveMarkerElement() {
                      this._removeActiveMarkerElement();
                      const activeMarkerElement = this._activeMarkerElement = document.createElement("div");
                      activeMarkerElement.classList.add("inboxsdk__navItem_marker");
                      activeMarkerElement.classList.add("ain");
                      activeMarkerElement.innerHTML = "&nbsp;";
                      this._element.insertBefore(activeMarkerElement, this._element.firstElementChild);
                    }
                    _removeActiveMarkerElement() {
                      const activeMarkerElement = this._activeMarkerElement;
                      if (activeMarkerElement) {
                        activeMarkerElement.remove();
                        this._activeMarkerElement = null;
                      }
                    }
                  }
                  ;
                  function getNativeNavItem(driver, label) {
                    return (0, wait_for.A)(() => {
                      const navContainer = gmail_element_getter.A.getLeftNavContainerElement();
                      if (!navContainer) return null;
                      return navContainer.querySelector(`.aim a[href*="#${label}"]`);
                    }, 300 * 1e3).then((labelLinkElement) => {
                      const labelElement = findParent(labelLinkElement, (el) => el.classList.contains("aim"));
                      if (!labelElement) {
                        throw new Error("native nav item structured weird");
                      }
                      if (!labelElement.__nativeGmailNavItemView) {
                        labelElement.__nativeGmailNavItemView = new NativeGmailNavItemView(driver, labelElement, label);
                      }
                      return labelElement.__nativeGmailNavItemView;
                    }).catch((err) => {
                      if (gmail_element_getter.A.isStandalone()) {
                        return new Promise((_resolve, _reject) => {
                        });
                      }
                      throw err;
                    });
                  }
                  ;
                  function populateRouteID(routeID, params) {
                    const paramsObject = params || {};
                    const usedParams = /* @__PURE__ */ new Set();
                    const result = routeID.replace(/:([^/]+)/g, (whole, term) => {
                      if (term in paramsObject) {
                        usedParams.add(term);
                        return encodeURIComponent(String(paramsObject[term]));
                      } else {
                        throw new Error(`Missing param: ${term}`);
                      }
                    });
                    if (Object.keys(paramsObject).length !== usedParams.size) {
                      throw new Error("Extra parameters given");
                    }
                    return result;
                  }
                  ;
                  function createLink(GmailRouteProcessor2, routeID, params) {
                    params = typeof params === "string" ? params : params ? Object.assign({}, params) : {};
                    routeID = GmailRouteProcessor2.getCompatibleRouteID(routeID);
                    if (typeof params === "string") {
                      var matches = routeID.match(/:/g);
                      if (matches && matches.length === 1) {
                        var paramValue = params;
                        params = {};
                        params[routeID.match(/:(\w+)($|\/)?/)[1]] = paramValue;
                      } else {
                        params = {};
                      }
                    }
                    const hasPageParam = routeID.match(/:page(?:\/|$)/);
                    if (hasPageParam && !params.page) {
                      params.page = 0;
                    }
                    const parts = routeID.split("/");
                    let processedRoute;
                    try {
                      processedRoute = populateRouteID(routeID, params);
                    } catch (error) {
                      lib_logger.A.error(error, {
                        routeID,
                        paramsKey: Object.keys(params)
                      });
                      processedRoute = parts.map(function(part) {
                        if (part.indexOf(":") === -1) {
                          return part;
                        }
                        const colonParts = part.split(":");
                        if (params && typeof params[colonParts[1]] !== "undefined") {
                          return colonParts[0] + params[colonParts[1]];
                        }
                        return colonParts[0];
                      }).map(encodeURIComponent).join("/");
                    }
                    if (GmailRouteProcessor2.isListRouteName(parts[0]) && processedRoute.indexOf("p0") === processedRoute.length - 2) {
                      processedRoute = processedRoute.substring(0, processedRoute.length - 3);
                    }
                    return "#" + processedRoute;
                  }
                  ;
                  function registerSearchQueryRewriter(pageCommunicator, obj2) {
                    pageCommunicator.createCustomSearchTerm(obj2.term);
                    pageCommunicator.ajaxInterceptStream.filter((event) => {
                      return event.type === "searchQueryForReplacement" && event.term === obj2.term;
                    }).onValue((event) => {
                      Promise.resolve(obj2.termReplacer({})).then((result) => {
                        if (typeof result != "string") {
                          throw new Error("termReplacer response must be a string");
                        }
                        const newTerm = "(" + result + ")";
                        const newQuery = event.query.replace(
                          obj2.term,
                          () => newTerm
                          // Callback used so $ escapes aren't interpreted
                        );
                        pageCommunicator.setSearchQueryReplacement(event.query, newQuery);
                      });
                    });
                  }
                  ;
                  async function openComposeWindow(_gmailDriver) {
                    await gmail_element_getter.A.waitForGmailModeToSettle();
                    if (gmail_element_getter.A.isStandaloneComposeWindow() || gmail_element_getter.A.isStandaloneThreadWindow()) {
                      throw new Error("Can not open new compose while in standalone window");
                    }
                    if (!gmail_element_getter.A.getComposeButton()) {
                      await (0, wait_for.A)(() => !!gmail_element_getter.A.getComposeButton());
                    }
                    const composeButton = gmail_element_getter.A.getComposeButton();
                    if (!composeButton) throw new Error("Could not find compose button");
                    (0, simulate_mouse_event.jp)(composeButton);
                  }
                  var gmail_app_sidebar_view = __webpack_require__3(2893);
                  ;
                  function suppressAddon(driver, addonTitle) {
                    (0, stream_wait_for.A)(() => gmail_element_getter.A.getCompanionSidebarIconContainerElement()).map((iconContainerElement) => {
                      const elementToWatch = iconContainerElement.querySelector(".J-KU-Jg, [role=tablist], .brC-bsf-aT5-aOt");
                      if (!elementToWatch) {
                        driver.getLogger().error(new Error("_waitForAddonTitleAndSuppress: elementToWatch not found"));
                        return null;
                      }
                      return elementToWatch;
                    }).filter().flatMap(make_element_child_stream.A).filter((_ref) => {
                      let {
                        el
                      } = _ref;
                      return el.getAttribute("role") === "tab" && (el.getAttribute("data-tooltip") || el.getAttribute("aria-label")) === addonTitle;
                    }).takeUntilBy(driver.getStopper()).onValue((_ref2) => {
                      let {
                        el
                      } = _ref2;
                      if (el.classList.contains("J-KU-KO") || // old pre-2018-07-30 classname?
                      el.classList.contains("bse-bvF-I-KO") || // old pre-2018-10-15 classname?
                      el.classList.contains("aT5-aOt-I-KO")) {
                        (0, simulate_mouse_event.jp)(el);
                      }
                      el.style.display = "none";
                    }).onError((err) => {
                      driver.getLogger().error(err, "error in suppressAddon");
                    });
                  }
                  var getAccountUrlPart = __webpack_require__3(8105);
                  ;
                  async function getThreadFromSyncThreadId(driver, syncThreadId) {
                    const [btaiHeader, xsrfToken] = await Promise.all([driver.getPageCommunicator().getBtaiHeader(), driver.getPageCommunicator().getXsrfToken()]);
                    return getThreadFromSyncThreadIdUsingHeaders(syncThreadId, btaiHeader, xsrfToken);
                  }
                  async function getThreadFromSyncThreadIdUsingHeaders(syncThreadId, btaiHeader, xsrfToken) {
                    let responseText = null;
                    try {
                      const {
                        text
                      } = await (0, gmailAjax.A)({
                        method: "POST",
                        url: `https://mail.google.com/sync${(0, getAccountUrlPart.A)()}/i/fd`,
                        headers: {
                          "Content-Type": "application/json",
                          "X-Framework-Xsrf-Token": xsrfToken,
                          "X-Gmail-BTAI": btaiHeader,
                          "X-Google-BTD": "1"
                        },
                        data: JSON.stringify({
                          "1": [{
                            "1": syncThreadId,
                            "2": 1
                          }]
                        })
                      });
                      responseText = text;
                    } catch (err) {
                      const {
                        text
                      } = await (0, gmailAjax.A)({
                        method: "POST",
                        url: `https://mail.google.com/sync${(0, getAccountUrlPart.A)()}/i/fd?rt=r&pt=ji`,
                        headers: {
                          "Content-Type": "application/json",
                          "X-Framework-Xsrf-Token": xsrfToken,
                          "X-Gmail-BTAI": btaiHeader,
                          "X-Google-BTD": "1"
                        },
                        data: JSON.stringify([[[syncThreadId, 1]], 2])
                      });
                      responseText = text;
                    }
                    const threadDescriptors = (0, gmail_sync_response_processor.gb)(responseText);
                    if (threadDescriptors.length > 0) {
                      const thread = threadDescriptors[0];
                      if (thread.oldGmailThreadID) {
                        return thread;
                      }
                    }
                    return null;
                  }
                  var bignumber = __webpack_require__3(2180);
                  var bignumber_default = /* @__PURE__ */ __webpack_require__3.n(bignumber);
                  ;
                  async function getSyncThreadForOldGmailThreadId(driver, oldGmailThreadId) {
                    const {
                      threads: threadDescriptors,
                      _text
                    } = await (0, getSyncThreadsForSearch.A)(driver, "threadid:" + new (bignumber_default())(oldGmailThreadId, 16).toString(10));
                    const firstThread = threadDescriptors[0];
                    if (firstThread == null) {
                      console.error(`Thread with ID ${oldGmailThreadId} not found by Gmail`);
                      const isStreak = (0, isStreakAppId.A)(driver.getAppId());
                      const err = new Error("Thread not found by getSyncThreadForOldGmailThreadId");
                      driver.getLogger().error(err, {
                        oldGmailThreadId: isStreak ? oldGmailThreadId : null,
                        responseText: isStreak ? _text : null
                      });
                      throw err;
                    }
                    return firstThread;
                  }
                  var live_set = __webpack_require__3(2436);
                  var live_set_default = /* @__PURE__ */ __webpack_require__3.n(live_set);
                  ;
                  function toLiveSet(itemWithLifetimeStream) {
                    return new (live_set_default())({
                      read() {
                        throw new Error("should not happen; liveset was inactive");
                      },
                      listen(setValues, controller) {
                        setValues(/* @__PURE__ */ new Set());
                        const sub = itemWithLifetimeStream.observe({
                          value(_ref) {
                            let {
                              el,
                              removalStream
                            } = _ref;
                            controller.add(el);
                            removalStream.take(1).onValue(() => {
                              controller.remove(el);
                            });
                          }
                        });
                        return () => {
                          sub.unsubscribe();
                        };
                      }
                    });
                  }
                  ;
                  async function getPersonDetails(driver, emailAddress) {
                    const headers = driver.getPageCommunicator().getGoogleRequestHeaders();
                    const requestBody = [[emailAddress], 2, null, null, [null, null, null, ["GMAIL_COMPOSE_WEB_POPULOUS", null, 2]], [[["person.name", "person.photo", "person.email", "person.phone", "person.email.certificate", "person.metadata", "person.name.metadata.verified", "person.email.metadata.verified", "person.phone.metadata.verified"]], null, [2, 1, 7, 8, 10], null, null, []], [], [null, null, [], null, null, [2], [[1]], null, [3]], [[23, 36, 14, 15]], [], null, null, null, null, null, [null, [null, 2]], null, []];
                    const response = await fetch("https://people-pa.clients6.google.com/$rpc/google.internal.people.v2.minimal.InternalPeopleMinimalService/ListPeopleByKnownId", {
                      headers: {
                        ...headers,
                        accept: "*/*",
                        "content-type": "application/json+protobuf",
                        "x-goog-authuser": "0",
                        "x-user-agent": "grpc-web-javascript/0.1"
                      },
                      body: JSON.stringify(requestBody),
                      method: "POST",
                      credentials: "include"
                    });
                    if (!response.ok) {
                      throw new Error(`Bad response from Google People API: ${response.status} ${response.statusText}`);
                    }
                    return parseListPeopleByKnownIdResponse(await response.json());
                  }
                  function parseListPeopleByKnownIdResponse(data) {
                    const mainList = data[1]?.[0]?.[1];
                    if (!mainList) {
                      return void 0;
                    }
                    const response = {};
                    const nameBlock = mainList[2];
                    if (nameBlock) {
                      const firstEntry = nameBlock[0];
                      if (firstEntry) {
                        const fullName = firstEntry[1];
                        if (typeof fullName === "string") {
                          response.fullName = fullName;
                        }
                        const firstName = firstEntry[3];
                        if (typeof firstName === "string") {
                          response.firstName = firstName;
                        }
                        const lastName = firstEntry[4];
                        if (typeof lastName === "string") {
                          response.lastName = lastName;
                        }
                        const nameSortOrder = firstEntry[5]?.[13];
                        if (typeof nameSortOrder === "string") {
                          response.fullNameSortOrder = nameSortOrder;
                        }
                      }
                    }
                    const avatarBlock = mainList[3];
                    if (avatarBlock) {
                      const imageUrl = avatarBlock[0]?.[1];
                      if (typeof imageUrl === "string") {
                        response.imageUrl = imageUrl;
                      }
                    }
                    return response;
                  }
                  ;
                  class GmailDriver {
                    #gmailTheme = {
                      isDarkMode: {
                        frame: false,
                        body: false
                      }
                    };
                    #appId;
                    #logger;
                    #opts;
                    #envData;
                    #customRouteIDs = /* @__PURE__ */ new Set();
                    #customListRouteIDs = /* @__PURE__ */ new Map();
                    #customListSearchStringsToRouteIds = /* @__PURE__ */ new Map();
                    #messageIDsToThreadIDs = /* @__PURE__ */ new Map();
                    #threadRowIdentifier;
                    #gmailRouteProcessor;
                    #keyboardShortcutHelpModifier;
                    #page;
                    #pageCommunicator;
                    #pageCommunicatorPromise;
                    #butterBar;
                    #butterBarDriver;
                    #routeViewDriverStream;
                    #rowListViewDriverStream;
                    #threadRowViewDriverKefirStream;
                    #threadViewDriverLiveSet;
                    #toolbarViewDriverLiveSet;
                    #composeViewDriverStream;
                    #xhrInterceptorStream;
                    #messageViewDriverStream;
                    #stopper = js_default()();
                    #navMarkerHiddenChanged = kefir_bus_default()();
                    #addonSidebarHiddenChanged = kefir_bus_default()();
                    #userInfo;
                    #timestampAccountSwitcherReady;
                    #timestampGlobalsFound;
                    #timestampOnready;
                    #lastCustomThreadListActivity;
                    #currentRouteViewDriver;
                    #appSidebarView = null;
                    constructor(appId, LOADER_VERSION, IMPL_VERSION, logger, opts, envData) {
                      this.#appId = appId;
                      this.#logger = logger;
                      this.#opts = opts;
                      this.#envData = envData;
                      this.#page = (0, makePageParserTree.A)(this, document);
                      this.#stopper.onValue(() => this.#page.dump());
                      {
                        const rfcIdCache = new (bimapcache_js_default())({
                          key: "inboxsdk__cached_thread_ids",
                          getAfromB: (gmailThreadId) => getRfcMessageIdForGmailThreadId(this, gmailThreadId),
                          getBfromA: (rfcMessageId) => (0, getGmailThreadIdForRfcMessageId.A)(this, rfcMessageId)
                        });
                        this.getGmailThreadIdForRfcMessageId = (rfcMessageId) => rfcIdCache.getBfromA(rfcMessageId);
                        this.getRfcMessageIdForGmailThreadId = (gmailThreadId) => rfcIdCache.getAfromB(gmailThreadId);
                      }
                      {
                        const syncThreadIdToOldGmailThreadIdCache = new (bimapcache_js_default())({
                          key: "inboxsdk__cached_sync_thread_id_old_gmail_thread_id",
                          getAfromB: (oldGmailThreadId) => {
                            return getSyncThreadForOldGmailThreadId(this, oldGmailThreadId).then((_ref) => {
                              let {
                                syncThreadID
                              } = _ref;
                              return syncThreadID;
                            });
                          },
                          getBfromA: (syncThreadID) => {
                            return getThreadFromSyncThreadId(this, syncThreadID).then((syncThread) => {
                              if (syncThread) return syncThread.oldGmailThreadID;
                              else throw new Error("syncThread not found");
                            });
                          }
                        });
                        this.getSyncThreadIdForOldGmailThreadId = (oldGmailThreadId) => syncThreadIdToOldGmailThreadIdCache.getAfromB(oldGmailThreadId);
                        this.getOldGmailThreadIdFromSyncThreadId = (syncThreadId) => syncThreadIdToOldGmailThreadIdCache.getBfromA(syncThreadId);
                        this.removeCachedOldGmailThreadIdFromSyncThreadId = (syncThreadId) => syncThreadIdToOldGmailThreadIdCache.removeAfromCache(syncThreadId);
                      }
                      {
                        const gmailMessageIdForSyncMessageIdCache = new (bimapcache_js_default())({
                          key: "inboxsdk__cached_gmail_and_inbox_message_ids_3",
                          getAfromB: (sync) => (0, getGmailMessageIdForSyncMessageId.A)(this, sync),
                          getBfromA() {
                            throw new Error("should not happen");
                          }
                        });
                        this.getGmailMessageIdForSyncMessageId = (syncMessageId) => gmailMessageIdForSyncMessageIdCache.getAfromB(syncMessageId);
                        this.removeCachedGmailMessageIdForSyncMessageId = (syncMessageId) => gmailMessageIdForSyncMessageIdCache.removeBfromCache(syncMessageId);
                        this.getGmailMessageIdForSyncDraftId = (syncDraftId) => (0, getGmailMessageIdForSyncMessageId.A)(this, syncDraftId);
                      }
                      this.#gmailRouteProcessor = new GmailRouteProcessor();
                      this.#keyboardShortcutHelpModifier = new KeyboardShortcutHelpModifier();
                      this.#butterBarDriver = new GmailButterBarDriver();
                      kefir_esm.later(45 * 1e3, void 0).takeUntilBy((0, toItemWithLifetimeStream.A)(this.#page.tree.getAllByTag("supportMenu"))).onValue(() => {
                        this.#logger.errorSite(new Error("Failed to find gmail supportMenu"));
                      });
                      this.#setupEventStreams();
                      this.onready.then(() => {
                        trackEvents(this);
                        gmailLoadEvent(this);
                        (0, override_gmail_back_button.A)(this, this.#gmailRouteProcessor);
                        trackGmailStyles();
                        temporaryTrackDownloadUrlValidity(this);
                        if (opts.suppressAddonTitle != null) {
                          suppressAddon(this, opts.suppressAddonTitle);
                        }
                      }).catch((err) => {
                        this.#logger.error(err);
                      });
                    }
                    destroy() {
                      this.#threadRowViewSelectionChanges.end();
                      this.#keyboardShortcutHelpModifier.destroy();
                      this.#stopper.destroy();
                      (0, gmail_thread_row_view.v)();
                    }
                    getAppId() {
                      return this.#appId;
                    }
                    getOpts() {
                      return this.#opts;
                    }
                    getPageCommunicator() {
                      return this.#pageCommunicator;
                    }
                    getPageCommunicatorPromise() {
                      return this.#pageCommunicatorPromise;
                    }
                    get logger() {
                      return this.#logger;
                    }
                    getLogger() {
                      return this.#logger;
                    }
                    getTagTree() {
                      return this.#page.tree;
                    }
                    getCustomListSearchStringsToRouteIds() {
                      return this.#customListSearchStringsToRouteIds;
                    }
                    getThreadRowIdentifier() {
                      return this.#threadRowIdentifier;
                    }
                    getButterBarDriver() {
                      return this.#butterBarDriver;
                    }
                    getButterBar() {
                      return this.#butterBar;
                    }
                    setButterBar(bb) {
                      this.#butterBar = bb;
                    }
                    getCustomRouteIDs() {
                      return this.#customRouteIDs;
                    }
                    getCustomListRouteIDs() {
                      return this.#customListRouteIDs;
                    }
                    getKeyboardShortcutHelpModifier() {
                      return this.#keyboardShortcutHelpModifier;
                    }
                    getRouteViewDriverStream() {
                      return this.#routeViewDriverStream;
                    }
                    getThreadRowViewDriverStream() {
                      return this.#threadRowViewDriverKefirStream;
                    }
                    getThreadViewDriverStream() {
                      return (0, toItemWithLifetimeStream.A)(this.#threadViewDriverLiveSet).map((_ref2) => {
                        let {
                          el
                        } = _ref2;
                        return el;
                      });
                    }
                    getAttachmentCardViewDriverStream() {
                      return this.#messageViewDriverStream.flatMap((messageViewDriver) => messageViewDriver.isLoaded() ? kefir_esm.constant(messageViewDriver) : messageViewDriver.getEventStream().filter((event) => event.eventName === "messageLoad").map(() => messageViewDriver).take(1)).map((messageView) => messageView.getAttachmentCardViewDrivers()).flatten();
                    }
                    getComposeViewDriverStream() {
                      return this.#composeViewDriverStream;
                    }
                    getXhrInterceptorStream() {
                      return this.#xhrInterceptorStream;
                    }
                    getMessageViewDriverStream() {
                      return this.#messageViewDriverStream;
                    }
                    getStopper() {
                      return this.#stopper;
                    }
                    getEnvData() {
                      return this.#envData;
                    }
                    getTimestampOnReady() {
                      if (this.#timestampOnready == null) {
                        this.#logger.error(new Error("getTimestampOnReady called before ready"));
                        return Date.now();
                      }
                      return this.#timestampOnready;
                    }
                    // Returns a stream that emits an event once at least `time` milliseconds has
                    // passed since the GmailDriver's ready event.
                    delayToTimeAfterReady(time) {
                      const targetTime = this.getTimestampOnReady() + time;
                      const timeToWait = Math.max(0, targetTime - Date.now());
                      return kefir_esm.later(timeToWait, void 0);
                    }
                    getTimings() {
                      return {
                        piMainStarted: this.#envData.piMainStarted,
                        piLoadStarted: this.#envData.piLoadStarted,
                        globalsFound: this.#timestampGlobalsFound,
                        accountSwitcherReady: this.#timestampAccountSwitcherReady,
                        onready: this.#timestampOnready
                      };
                    }
                    registerThreadButton(options2) {
                      const unregister = js_default()();
                      const removeButtonOnUnregister = (button) => {
                        unregister.takeUntilBy(button.getStopper()).onValue(() => {
                          button.destroy();
                        });
                      };
                      const toolbarViewSub = toValueObservable_default()(this.#toolbarViewDriverLiveSet).subscribe((_ref3) => {
                        let {
                          value: gmailToolbarView
                        } = _ref3;
                        if (gmailToolbarView.isForThread()) {
                          if (!options2.positions || includes_default()(options2.positions, "THREAD")) {
                            removeButtonOnUnregister(gmailToolbarView.addButton({
                              ...options2,
                              section: options2.threadSection || "METADATA_STATE",
                              onClick: (event) => {
                                options2.onClick({
                                  position: "THREAD",
                                  dropdown: event.dropdown,
                                  selectedThreadViewDrivers: [gmailToolbarView.getThreadViewDriver()],
                                  selectedThreadRowViewDrivers: []
                                });
                              }
                            }));
                          }
                        } else if (gmailToolbarView.isForRowList()) {
                          if (!options2.positions || includes_default()(options2.positions, "LIST")) {
                            removeButtonOnUnregister(gmailToolbarView.addButton({
                              ...options2,
                              section: options2.listSection || "METADATA_STATE",
                              onClick: (event) => {
                                const selectedThreadRowViewDrivers = Array.from(gmailToolbarView.getThreadRowViewDrivers()).filter((gmailThreadRow) => gmailThreadRow.isSelected());
                                options2.onClick({
                                  position: "LIST",
                                  dropdown: event.dropdown,
                                  selectedThreadViewDrivers: [],
                                  selectedThreadRowViewDrivers
                                });
                              }
                            }));
                          }
                        }
                      });
                      unregister.onValue(() => {
                        toolbarViewSub.unsubscribe();
                      });
                      if (!options2.positions || includes_default()(options2.positions, "ROW")) {
                        const perThreadRow = (gmailThreadRow) => {
                          gmailThreadRow.addButton(kefir_esm.constant({
                            hasDropdown: options2.hasDropdown,
                            iconClass: options2.iconClass,
                            iconUrl: options2.iconUrl,
                            title: options2.title,
                            orderHint: options2.orderHint,
                            onClick: (event) => {
                              if (!options2.onClick) return;
                              options2.onClick({
                                position: "ROW",
                                dropdown: event.dropdown,
                                selectedThreadViewDrivers: [],
                                selectedThreadRowViewDrivers: [gmailThreadRow]
                              });
                            }
                          }).merge(unregister));
                        };
                        if (this.#currentRouteViewDriver) {
                          this.#currentRouteViewDriver.getRowListViews().forEach((gmailRowListView) => {
                            gmailRowListView.getThreadRowViewDrivers().forEach(perThreadRow);
                          });
                        }
                        const threadRowViewSub = this.#threadRowViewDriverKefirStream.observe({
                          value: perThreadRow
                        });
                        unregister.onValue(() => {
                          threadRowViewSub.unsubscribe();
                        });
                      }
                      return () => {
                        unregister.destroy();
                      };
                    }
                    hashChangeNoViewChange(hash) {
                      if (hash[0] !== "#") {
                        throw new Error("bad hash");
                      }
                      window.history.replaceState(null, null, hash);
                      var hce = new window.HashChangeEvent("hashchange", {
                        oldURL: document.location.href.replace(/#.*$/, "") + "#inboxsdk-fake-no-vc",
                        newURL: document.location.href.replace(/#.*$/, "") + hash
                      });
                      window.dispatchEvent(hce);
                    }
                    addCustomRouteID(routeID) {
                      this.#customRouteIDs.add(routeID);
                      this.#pageCommunicator.registerAllowedHashLinkStartTerm(routeID.split("/")[0]);
                      return () => {
                        this.#customRouteIDs.delete(routeID);
                      };
                    }
                    addCustomListRouteID(routeID, handler) {
                      this.#customListRouteIDs.set(routeID, handler);
                      this.#pageCommunicator.registerAllowedHashLinkStartTerm(routeID.split("/")[0]);
                      return () => {
                        this.#customListRouteIDs.delete(routeID);
                      };
                    }
                    signalCustomThreadListActivity(customRouteID) {
                      this.#lastCustomThreadListActivity = {
                        customRouteID,
                        timestamp: /* @__PURE__ */ new Date()
                      };
                    }
                    // Returns the last time a request for a custom thread list search has gone
                    // out or we got a response, and the customRouteID for that.
                    getLastCustomThreadListActivity() {
                      return this.#lastCustomThreadListActivity;
                    }
                    showCustomThreadList(customRouteID, onActivate, params) {
                      showCustomThreadList(this, customRouteID, onActivate, params);
                    }
                    showCustomRouteView(element) {
                      (0, show_custom_route_view.A)(this, element);
                    }
                    showNativeRouteView() {
                      showNativeRouteView(this);
                    }
                    createLink(routeID, params) {
                      return createLink(this.#gmailRouteProcessor, routeID, params);
                    }
                    goto(routeID, params) {
                      return (0, goto_view.A)(this, routeID, params);
                    }
                    resolveUrlRedirects(url) {
                      return this.#pageCommunicatorPromise.then((pageCommunicator) => pageCommunicator.resolveUrlRedirects(url));
                    }
                    registerSearchSuggestionsProvider(handler) {
                      registerSearchSuggestionsProvider(this, handler);
                    }
                    registerSearchQueryRewriter(obj2) {
                      registerSearchQueryRewriter(this.#pageCommunicator, obj2);
                    }
                    addToolbarButtonForApp(buttonDescriptor) {
                      return addToolbarButtonForApp(this, buttonDescriptor);
                    }
                    async openNewComposeViewDriver() {
                      try {
                        const composeViewDriverPromise = this.getNextComposeViewDriver();
                        await openComposeWindow(this);
                        const composeViewDriver = await composeViewDriverPromise;
                        return composeViewDriver;
                      } catch (err) {
                        this.#logger.error(err);
                        throw err;
                      }
                    }
                    getNextComposeViewDriver() {
                      let timeout = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 10 * 1e3;
                      return this.#composeViewDriverStream.merge(kefir_esm.later(timeout, new Error("Reached timeout while waiting for getNextComposeViewDriver"))).beforeEnd(() => new Error("Driver was shut down before a new compose was found")).flatMap((x2) => x2 instanceof Error ? kefir_esm.constantError(x2) : kefir_esm.constant(x2)).take(1).takeErrors(1).toPromise();
                    }
                    openDraftByMessageID(messageID) {
                      return openDraftByMessageID(this, messageID);
                    }
                    createModalViewDriver(options2) {
                      return new gmail_modal_view_driver(options2);
                    }
                    createMoleViewDriver(options2) {
                      return new gmail_mole_view_driver(this, options2);
                    }
                    createDrawerViewDriver(options2) {
                      return new inbox_drawer_view(options2);
                    }
                    createBackdrop(zIndex2, target) {
                      return new gmail_backdrop(zIndex2, target);
                    }
                    addNavItem(appId, navItemDescriptorPropertyStream, navMenuInjectionContainer) {
                      return addNavItem(this, appId, navItemDescriptorPropertyStream, navMenuInjectionContainer);
                    }
                    addNavItemToPanel(appId, navItemDescriptorPropertyStream, panelElement) {
                      return addNavItemToPanel(this, appId, navItemDescriptorPropertyStream, panelElement);
                    }
                    addAppMenuItem(menuItemDescriptor) {
                      return addAppMenuItem(this, menuItemDescriptor);
                    }
                    addSupportItem(supportItemDescriptor) {
                      return addSupportItem(this, supportItemDescriptor);
                    }
                    getSentMailNativeNavItem() {
                      const p = getNativeNavItem(this, "sent");
                      p.catch((err) => this.#logger.error(err));
                      return p;
                    }
                    setShowNativeNavMarker(isNative) {
                      this.#navMarkerHiddenChanged.emit(null);
                      const leftNavContainerElement = gmail_element_getter.A.getLeftNavContainerElement();
                      if (leftNavContainerElement) {
                        if (isNative) {
                          leftNavContainerElement.classList.remove("inboxsdk__hide_native_marker");
                        } else {
                          leftNavContainerElement.classList.add("inboxsdk__hide_native_marker");
                          this.#stopper.takeUntilBy(this.#navMarkerHiddenChanged).onValue(() => {
                            leftNavContainerElement.classList.remove("inboxsdk__hide_native_marker");
                          });
                        }
                      }
                    }
                    setShowNativeAddonSidebar(isNative) {
                      this.#addonSidebarHiddenChanged.emit(null);
                      const addonContainerElement = gmail_element_getter.A.getAddonSidebarContainerElement();
                      const mainContentBodyContainerElement = gmail_element_getter.A.getMainContentBodyContainerElement();
                      if (addonContainerElement && mainContentBodyContainerElement) {
                        const parent = mainContentBodyContainerElement.parentElement;
                        if (!parent) return;
                        if (isNative) {
                          parent.classList.remove("inboxsdk__hide_addon_container");
                        } else {
                          parent.classList.add("inboxsdk__hide_addon_container");
                          this.#stopper.takeUntilBy(this.#addonSidebarHiddenChanged).onValue(() => {
                            parent.classList.remove("inboxsdk__hide_addon_container");
                          });
                        }
                      }
                    }
                    async getGmailActionToken() {
                      return this.#pageCommunicator.getActionTokenValue();
                    }
                    getUserEmailAddress() {
                      return this.#pageCommunicator.getUserEmailAddress();
                    }
                    isConversationViewDisabled() {
                      return this.#pageCommunicator.isConversationViewDisabled();
                    }
                    getUserLanguage() {
                      return this.#pageCommunicator.getUserLanguage();
                    }
                    getUserContact() {
                      return {
                        emailAddress: this.getUserEmailAddress(),
                        name: this.#userInfo.getUserName()
                      };
                    }
                    getAccountSwitcherContactList() {
                      return this.#userInfo.getAccountSwitcherContactList();
                    }
                    activateShortcut(keyboardShortcutHandle, appName, appIconUrl) {
                      this.getKeyboardShortcutHelpModifier().set(keyboardShortcutHandle, this.#appId, appName, appIconUrl);
                      keyboardShortcutHandle.once("destroy", () => {
                        this.getKeyboardShortcutHelpModifier().delete(keyboardShortcutHandle);
                      });
                    }
                    get gmailTheme() {
                      return this.#gmailTheme;
                    }
                    /**
                     * Listen for if Gmail changes its theme (dark, light, or frame dark / body light mode).
                     */
                    get gmailThemeStream() {
                      return stylesStream.flatMap((event) => {
                        if (event.type !== "theme") {
                          return kefir_esm.never();
                        }
                        this.#gmailTheme.isDarkMode = event.isDarkMode;
                        return kefir_esm.constant(event.isDarkMode);
                      });
                    }
                    #setupEventStreams() {
                      var result = makeXhrInterceptor();
                      this.#xhrInterceptorStream = result.xhrInterceptStream.takeUntilBy(this.#stopper);
                      this.#pageCommunicatorPromise = result.pageCommunicatorPromise;
                      this.onready = this.#pageCommunicatorPromise.then((pageCommunicator) => {
                        this.#timestampGlobalsFound = Date.now();
                        this.#pageCommunicator = pageCommunicator;
                        this.#logger.setUserEmailAddress(this.getUserEmailAddress());
                        this.#userInfo = new UserInfo(this);
                        this.#timestampAccountSwitcherReady = Date.now();
                        this.#routeViewDriverStream = setupRouteViewDriverStream(this.#gmailRouteProcessor, this).takeUntilBy(this.#stopper).toProperty();
                        this.#routeViewDriverStream.onValue((gmailRouteView) => {
                          this.#currentRouteViewDriver = gmailRouteView;
                        });
                        this.#rowListViewDriverStream = this.#setupRouteSubViewDriver("newGmailRowListView").takeUntilBy(this.#stopper);
                        this.#setupThreadRowViewDriverKefirStream();
                        this.#threadViewDriverLiveSet = toLiveSet(this.#setupRouteSubViewDriver("newGmailThreadView").takeUntilBy(this.#stopper).flatMap((gmailThreadView) => gmailThreadView.getReadyStream().map(() => gmailThreadView)).map((gmailThreadView) => ({
                          el: gmailThreadView,
                          removalStream: gmailThreadView.getStopper()
                        })));
                        this.#setupToolbarViewDriverStream();
                        this.#setupMessageViewDriverStream();
                        this.#setupComposeViewDriverStream();
                        this.#threadRowIdentifier = new thread_row_identifier(this);
                        this.#timestampOnready = Date.now();
                      });
                    }
                    #setupComposeViewDriverStream() {
                      this.#composeViewDriverStream = (0, setup_compose_view_driver_stream.A)(this, this.#messageViewDriverStream, this.#xhrInterceptorStream).takeUntilBy(this.#stopper);
                    }
                    #setupRouteSubViewDriver(viewName) {
                      return this.#routeViewDriverStream.flatMap((gmailRouteView) => {
                        return gmailRouteView.getEventStream().filter((event) => event.eventName === viewName).map((event) => event.view);
                      });
                    }
                    #setupThreadRowViewDriverKefirStream() {
                      this.#threadRowViewDriverKefirStream = this.#rowListViewDriverStream.flatMap((rowListViewDriver) => rowListViewDriver.getRowViewDriverStream()).takeUntilBy(this.#stopper);
                    }
                    #setupToolbarViewDriverStream() {
                      this.#toolbarViewDriverLiveSet = toLiveSet(kefir_esm.merge([this.#rowListViewDriverStream.map((gmailRowListView) => gmailRowListView.getToolbarView()), this.getThreadViewDriverStream().map((gmailThreadView) => gmailThreadView.getToolbarView())]).filter(isNotNil.A).flatMap((gmailToolbarView) => gmailToolbarView.waitForReady()).map((gmailToolbarView) => ({
                        el: gmailToolbarView,
                        removalStream: gmailToolbarView.getStopper()
                      })).takeUntilBy(this.#stopper));
                      this.#toolbarViewDriverLiveSet.subscribe({});
                    }
                    #setupMessageViewDriverStream() {
                      this.#messageViewDriverStream = this.getThreadViewDriverStream().flatMap((gmailThreadView) => gmailThreadView.getMessageViewDriverStream()).takeUntilBy(this.#stopper);
                    }
                    async addGlobalSidebarContentPanel(descriptor) {
                      await this.waitForGlobalSidebarReady().merge(this.#stopper.flatMap(() => kefir_esm.constantError(new Error("Driver instance was destroyed early")))).take(1).takeErrors(1).toPromise();
                      const appSidebar = this.getGlobalSidebar();
                      return appSidebar.addGlobalSidebarContentPanel(descriptor);
                    }
                    waitForGlobalSidebarReady() {
                      const condition = () => gmail_element_getter.A.getCompanionSidebarContentContainerElement() && (gmail_element_getter.A.getCompanionSidebarIconContainerElement() || gmail_element_getter.A.getAddonSidebarContainerElement());
                      if (condition()) {
                        return kefir_esm.constant(void 0);
                      }
                      return (0, stream_wait_for.A)(condition).map(() => void 0);
                    }
                    getGlobalSidebar() {
                      let appSidebarView = this.#appSidebarView;
                      if (!appSidebarView) {
                        const companionSidebarContentContainerEl = gmail_element_getter.A.getCompanionSidebarContentContainerElement();
                        if (!companionSidebarContentContainerEl) throw new Error("did not find companionSidebarContentContainerEl");
                        appSidebarView = this.#appSidebarView = new gmail_app_sidebar_view.A(this, companionSidebarContentContainerEl);
                      }
                      return appSidebarView;
                    }
                    isRunningInPageContext() {
                      return !!(__webpack_require__3.g.GLOBALS && __webpack_require__3.g._GM_main);
                    }
                    showAppIdWarning() {
                      showAppIdWarning(this);
                    }
                    createTopMessageBarDriver(optionStream) {
                      return new GmailTopMessageBarDriver(optionStream);
                    }
                    associateThreadAndMessageIDs(threadID, messageID) {
                      this.#messageIDsToThreadIDs.set(messageID, threadID);
                    }
                    getThreadIDForMessageID(messageID) {
                      return (0, get_or_fail.A)(this.#messageIDsToThreadIDs, messageID);
                    }
                    getDraftIDForMessageID(messageID) {
                      let skipCache = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
                      return (0, get_draft_id_for_message_id.A)(this, messageID, skipCache);
                    }
                    #recentSyncDraftIds = /* @__PURE__ */ new Map();
                    reportRecentSyncDraftId(syncDraftId) {
                      const count = this.#recentSyncDraftIds.get(syncDraftId);
                      const newCount = (count ?? 0) + 1;
                      this.#recentSyncDraftIds.set(syncDraftId, newCount);
                    }
                    reportDraftClosed(syncDraftId) {
                      kefir_esm.later(30 * 1e3, void 0).takeUntilBy(this.#stopper).onValue(() => {
                        const count = this.#recentSyncDraftIds.get(syncDraftId);
                        let newCount;
                        if (count == null || count < 1) {
                          newCount = 0;
                          this.#logger.error(new Error("_recentSyncDraftIds count had unexpected value"), {
                            count
                          });
                        } else {
                          newCount = count - 1;
                        }
                        if (newCount === 0) {
                          this.#recentSyncDraftIds.delete(syncDraftId);
                        } else {
                          this.#recentSyncDraftIds.set(syncDraftId, newCount);
                        }
                      });
                    }
                    isRecentSyncDraftId(syncMessageId) {
                      return this.#recentSyncDraftIds.has(syncMessageId);
                    }
                    #selectedThreadRows = transducers_default().mapcat((gmailRowListView) => gmailRowListView.getSelectedThreadRowViewDrivers());
                    getSelectedThreadRowViewDrivers() {
                      if (!this.#currentRouteViewDriver) {
                        return [];
                      }
                      return transducers_default().toArray(this.#currentRouteViewDriver.getRowListViews(), this.#selectedThreadRows);
                    }
                    #threadRowViewSelectionChanges = kefir_bus_default()();
                    signalThreadRowViewSelectionChange() {
                      this.#threadRowViewSelectionChanges.value(void 0);
                    }
                    registerThreadRowViewSelectionHandler(handler) {
                      this.#threadRowViewSelectionChanges.onValue(handler);
                      return () => {
                        this.#threadRowViewSelectionChanges.offValue(handler);
                      };
                    }
                    getPersonDetails(emailAddress) {
                      return getPersonDetails(this, emailAddress);
                    }
                  }
                  const gmail_driver = GmailDriver;
                  var sha1 = __webpack_require__3(799);
                  var sha1_default = /* @__PURE__ */ __webpack_require__3.n(sha1);
                  ;
                  function grandfatherHash(x2) {
                    const hasher = new (sha1_default())();
                    hasher.update("YlEHtGl72+c" + x2);
                    return hasher.digest("hex");
                  }
                  const whitelist = /* @__PURE__ */ new Set([
                    "b540a2819e4b26823288046869e5577852178d69",
                    // streak
                    "1e9084cb394369dcdfd43cfcd84d17b78b0903dd",
                    // Rockwell
                    "a9b816b86b6085eb0b80315da6b2297ff30cf7b6",
                    // Screenleap
                    "5140e277522fd95ece3d540c94b97f443bcc3256",
                    // docsend
                    "b56a2d6e6f650ed6eae78774d3b1f02d969d8485",
                    // giphy
                    "bc6308648a588258f31f8f4b64f7c4652b6fcaac",
                    // stripe
                    "4cb8e6bd1aab0b4b05c7f07fbe8332b842009358"
                    // godMode
                  ]);
                  const appIdRegex = /^sdk_(.{5,15})_([0-9a-f]{10})$/;
                  function isValidAppId(appId) {
                    if (whitelist.has(grandfatherHash(appId))) return true;
                    const m = appIdRegex.exec(appId);
                    if (!m) return false;
                    const name = m[1], hash = m[2];
                    const shasum = new (sha1_default())();
                    shasum.update(name);
                    return shasum.digest("hex").slice(0, 10) === hash;
                  }
                  ;
                  const loadedAppIds = /* @__PURE__ */ new Set();
                  class PlatformImplementation extends safe_event_emitter.A {
                    /**
                     * @deprecated
                     */
                    #driver;
                    constructor(driver, appId, piOpts) {
                      super();
                      const {
                        appName,
                        appIconUrl,
                        VERSION: LOADER_VERSION
                      } = piOpts;
                      this.#driver = driver;
                      const membrane = new Membrane([[gmail_compose_view.A, (viewDriver) => new compose_view.A(driver, viewDriver, membrane)], [gmail_attachment_card_view, (viewDriver) => new AttachmentCardView(viewDriver, driver, membrane)], [gmail_message_view, (viewDriver) => new MessageView(viewDriver, membrane, driver)], [gmail_thread_view, (viewDriver) => new thread_view(viewDriver, appId, driver, membrane)], [gmail_thread_row_view.A, (viewDriver) => new ThreadRowView(viewDriver)], [gmail_route_view, (viewDriver) => new route_view.A(viewDriver)], [dummy_route_view_driver, (viewDriver) => new route_view.A(viewDriver)]]);
                      this.destroyed = false;
                      this.LOADER_VERSION = LOADER_VERSION;
                      this.IMPL_VERSION = version2.Q;
                      this.ButterBar = new ButterBar(appId, driver);
                      driver.setButterBar(this.ButterBar);
                      this.Compose = new compose.A(driver, membrane);
                      this.Conversations = new conversations(appId, driver, membrane);
                      this.Keyboard = new keyboard.A(appId, appName, appIconUrl, driver);
                      this.User = new User(driver, piOpts);
                      this.Lists = new Lists(appId, driver, membrane);
                      this.NavMenu = new NavMenu(appId, driver);
                      this.AppMenu = new AppMenu(driver);
                      this.Router = new namespaces_router(appId, driver, membrane);
                      this.Search = new Search(appId, driver);
                      this.Toolbars = new Toolbars(appId, driver, membrane, piOpts);
                      this.Widgets = new widgets(appId, driver);
                      if (piOpts.REQUESTED_API_VERSION === 1) {
                        this.Modal = new modal(appId, driver, piOpts);
                      }
                      if (piOpts.REQUESTED_API_VERSION >= 2) {
                        this.Global = new Global(appId, driver);
                      }
                      this.Logger = driver.getLogger().getAppLogger();
                    }
                    destroy() {
                      if (!this.destroyed) {
                        this.destroyed = true;
                        this.#driver.destroy();
                        this.emit("destroy");
                      }
                    }
                  }
                  function makePlatformImplementation(appId, _opts, envData) {
                    if (typeof appId !== "string") {
                      throw new Error("appId must be a string");
                    }
                    const opts = {
                      // defaults
                      globalErrorLogging: true,
                      eventTracking: true,
                      ..._opts
                    };
                    opts.REQUESTED_API_VERSION = +opts.REQUESTED_API_VERSION;
                    switch (opts.REQUESTED_API_VERSION) {
                      case 2:
                      case 1:
                        break;
                      default:
                        throw new Error("InboxSDK: Unsupported API version " + opts.REQUESTED_API_VERSION);
                    }
                    const LOADER_VERSION = opts.VERSION;
                    const IMPL_VERSION = version2.Q;
                    const logger = new lib_logger.A(appId, opts, LOADER_VERSION, IMPL_VERSION);
                    const origin = document.location.origin;
                    if (origin !== "https://mail.google.com") {
                      return new Promise(() => {
                      });
                    }
                    const driver = new gmail_driver(appId, LOADER_VERSION, IMPL_VERSION, logger, opts, envData);
                    return driver.onready.then(() => {
                      if (!isValidAppId(appId)) {
                        console.error(`
===========================================================
InboxSDK: You have loaded InboxSDK with an invalid appId:
${appId}
Registering an appId is free. Please see
https://www.inboxsdk.com/docs/#RequiredSetup
===========================================================
`);
                        driver.showAppIdWarning();
                      }
                      if (driver.isRunningInPageContext()) {
                        console.warn("Running the InboxSDK outside of an extension content script is not recommended!");
                      }
                      logger.eventSdkPassive("instantiate");
                      const pi = new PlatformImplementation(driver, appId, opts);
                      if (!loadedAppIds.has(appId)) {
                        loadedAppIds.add(appId);
                        logger.eventSdkPassive("load");
                      }
                      return pi;
                    });
                  }
                })
              ),
              /***/
              3741: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      SimpleElementView
                    )
                    /* harmony export */
                  });
                  var _lib_safe_event_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(2788);
                  class SimpleElementView extends _lib_safe_event_emitter__WEBPACK_IMPORTED_MODULE_0__.A {
                    destroyed = false;
                    constructor(el) {
                      super();
                      this.el = el;
                    }
                    destroy() {
                      if (this.destroyed) return;
                      this.destroyed = true;
                      this.emit("destroy");
                      this.el.remove();
                    }
                  }
                })
              ),
              /***/
              7600: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      ComposeView
                    )
                  });
                  var safe_event_emitter = __webpack_require__3(2788);
                  var kefir_esm = __webpack_require__3(7249);
                  var kefir_cast = __webpack_require__3(5164);
                  var kefir_cast_default = /* @__PURE__ */ __webpack_require__3.n(kefir_cast);
                  var js = __webpack_require__3(7332);
                  var get_or_fail = __webpack_require__3(4531);
                  ;
                  const memberMap = /* @__PURE__ */ new WeakMap();
                  class ComposeButtonView extends safe_event_emitter.A {
                    destroyed = false;
                    #addedEventBus;
                    constructor(addedEventBus, composeViewDriver, driver) {
                      super();
                      this.#addedEventBus = addedEventBus;
                      const members = {
                        composeViewDriver,
                        driver
                      };
                      memberMap.set(this, members);
                      this.#addedEventBus.toProperty().onValue((options) => {
                        if (!options) {
                          _destroy(this);
                          return;
                        }
                        members.composeViewDriver.getStopper().onValue(() => {
                          _destroy(this);
                        });
                      });
                    }
                    showTooltip(tooltipDescriptor) {
                      const members = (0, get_or_fail.A)(memberMap, this);
                      members.driver.getLogger().eventSdkPassive("ComposeButtonView.showTooltip", {
                        keys: Object.keys(tooltipDescriptor)
                      });
                      this.#addedEventBus.onValue((options) => {
                        if (!options) return;
                        members.composeViewDriver.addTooltipToButton(options.buttonViewController, options.buttonDescriptor, tooltipDescriptor);
                      });
                    }
                    closeTooltip() {
                      const members = (0, get_or_fail.A)(memberMap, this);
                      this.#addedEventBus.onValue((options) => {
                        if (!options) return;
                        members.composeViewDriver.closeButtonTooltip(options.buttonViewController);
                      });
                    }
                  }
                  function _destroy(composeButtonViewInstance) {
                    composeButtonViewInstance.destroyed = true;
                    composeButtonViewInstance.emit("destroy");
                  }
                  var kefir_bus = __webpack_require__3(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__3.n(kefir_bus);
                  ;
                  module3 = __webpack_require__3.hmd(module3);
                  const compose_view_memberMap = js.defonce(module3, () => /* @__PURE__ */ new WeakMap());
                  class ComposeView extends safe_event_emitter.A {
                    destroyed = false;
                    constructor(driver, composeViewImplementation, membrane) {
                      super();
                      const members = {
                        driver,
                        membrane,
                        composeViewImplementation
                      };
                      compose_view_memberMap.set(this, members);
                      this.on("newListener", (eventName) => {
                        if (eventName === "close") {
                          driver.getLogger().deprecationWarning("composeView close event", "composeView destroy event");
                          if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                            console.error("The composeView close event was removed after API version 1");
                          }
                        } else if (eventName === "messageIDChange") {
                          driver.getLogger().deprecationWarning("composeView messageIDChange event", "composeView.getDraftID");
                          if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                            console.error("The composeView messageIDChange event was removed after API version 1");
                          }
                        } else if (eventName === "linkPopOver") {
                          composeViewImplementation.setupLinkPopOvers();
                        }
                      });
                      members.composeViewImplementation.getEventStream().onValue((event) => {
                        if (event.eventName === "destroy") {
                          this.destroyed = true;
                          if (driver.getOpts().REQUESTED_API_VERSION === 1) {
                            this.emit("close");
                          }
                        } else if (event.eventName === "messageIDChange") {
                          if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                            return;
                          }
                        }
                        this.emit(event.eventName, event.data);
                      });
                    }
                    /**
                     * Inserts a button into the compose bar. This method also accepts a stream of {@link ComposeButtonDescriptor}s so that you can change the appearance of your button after you've added it.
                     *
                     * @param buttonDescriptor The details of the button to add to the compose bar.
                     */
                    addButton(buttonDescriptor) {
                      const members = (0, get_or_fail.A)(compose_view_memberMap, this);
                      const buttonDescriptorStream = kefir_cast_default()(kefir_esm["default"], buttonDescriptor);
                      const bus = kefir_bus_default()();
                      members.composeViewImplementation.addButton(buttonDescriptorStream, members.driver.getAppId(), {
                        composeView: this
                      }, bus);
                      const view = new ComposeButtonView(bus, members.composeViewImplementation, members.driver);
                      view.on("destroy", () => {
                        bus.end();
                      });
                      return view;
                    }
                    addComposeNotice(composeNoticeDescriptor) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.addComposeNotice(composeNoticeDescriptor);
                    }
                    addStatusBar(statusBarDescriptor) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.addStatusBar(statusBarDescriptor);
                    }
                    hideNativeStatusBar() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.hideNativeStatusBar();
                    }
                    addRecipientRow(options) {
                      return {
                        destroy: (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.addRecipientRow(kefir_cast_default()(kefir_esm["default"], options))
                      };
                    }
                    forceRecipientRowsOpen() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.forceRecipientRowsOpen();
                    }
                    hideNativeRecipientRows() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.hideNativeRecipientRows();
                    }
                    hideRecipientArea() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.hideRecipientArea();
                    }
                    close() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.close();
                    }
                    send() {
                      let {
                        sendAndArchive
                      } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {
                        sendAndArchive: false
                      };
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.send({
                        sendAndArchive
                      });
                    }
                    openScheduleSendMenu() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.openScheduleSendMenu();
                    }
                    discard() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.discard();
                    }
                    getMetadataForm() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getMetadataFormElement();
                    }
                    getSubjectInput() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getSubjectInput();
                    }
                    getBodyElement() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getBodyElement();
                    }
                    // NOT DOCUMENTED BECAUSE NOT SURE IF API USERS NEED THIS
                    // TODO remove?
                    getComposeID() {
                      const {
                        driver,
                        composeViewImplementation
                      } = (0, get_or_fail.A)(compose_view_memberMap, this);
                      driver.getLogger().deprecationWarning("composeView.getComposeID");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return composeViewImplementation.getComposeID();
                    }
                    getInitialMessageID() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getInitialMessageID();
                    }
                    /* deprecated */
                    getMessageID() {
                      const {
                        driver,
                        composeViewImplementation
                      } = (0, get_or_fail.A)(compose_view_memberMap, this);
                      driver.getLogger().deprecationWarning("composeView.getMessageID", "composeView.getDraftID");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return composeViewImplementation.getMessageID();
                    }
                    getThreadID() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getThreadID();
                    }
                    getDraftID() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getDraftID();
                    }
                    getCurrentDraftID() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getCurrentDraftID();
                    }
                    getHTMLContent() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getHTMLContent();
                    }
                    getSelectedBodyHTML() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getSelectedBodyHTML() || "";
                    }
                    getSelectedBodyText() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getSelectedBodyText() || "";
                    }
                    getSubject() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getSubject();
                    }
                    getTextContent() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getTextContent();
                    }
                    getToRecipients() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getToRecipients();
                    }
                    getCcRecipients() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getCcRecipients();
                    }
                    getBccRecipients() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getBccRecipients();
                    }
                    insertTextIntoBodyAtCursor(text) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.insertBodyTextAtCursor(text);
                    }
                    insertHTMLIntoBodyAtCursor(html) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.insertBodyHTMLAtCursor(html);
                    }
                    insertLinkChipIntoBodyAtCursor(text, url, iconUrl) {
                      if (!iconUrl || typeof iconUrl !== "string" || iconUrl.indexOf("http") !== 0) {
                        console.warn("You must provide a publicly accessible iconUrl");
                        return;
                      }
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.insertLinkChipIntoBody({
                        text,
                        url,
                        iconUrl
                      });
                    }
                    insertLinkIntoBodyAtCursor(text, url) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.insertLinkIntoBody(text, url);
                    }
                    isForward() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isForward();
                    }
                    isInlineReplyForm() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isInlineReplyForm();
                    }
                    isFullscreen() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isFullscreen();
                    }
                    setFullscreen(fullscreen2) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setFullscreen(fullscreen2);
                    }
                    isMinimized() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isMinimized();
                    }
                    setMinimized(minimized) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setMinimized(minimized);
                    }
                    setTitleBarColor(color) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setTitleBarColor(color);
                    }
                    setTitleBarText(text) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setTitleBarText(text);
                    }
                    async popOut() {
                      const nextComposeViewDriverPromise = (0, get_or_fail.A)(compose_view_memberMap, this).driver.getNextComposeViewDriver();
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.popOut();
                      const nextComposeViewDriver = await nextComposeViewDriverPromise;
                      return (0, get_or_fail.A)(compose_view_memberMap, this).membrane.get(nextComposeViewDriver);
                    }
                    isReply() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isReply();
                    }
                    setToRecipients(emails) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setToRecipients(emails);
                    }
                    setCcRecipients(emails) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setCcRecipients(emails);
                    }
                    setBccRecipients(emails) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setBccRecipients(emails);
                    }
                    getFromContact() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getFromContact();
                    }
                    getFromContactChoices() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getFromContactChoices();
                    }
                    setFromEmail(email) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setFromEmail(email);
                    }
                    setSubject(text) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setSubject(text);
                    }
                    setBodyHTML(html) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setBodyHTML(html);
                    }
                    setBodyText(text) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setBodyText(text);
                    }
                    async attachFiles(files) {
                      if (files.length === 0) {
                        return;
                      }
                      if (!(files[0] instanceof Blob)) {
                        throw new Error("parameter must be an array of Blob objects");
                      }
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.attachFiles(Array.from(files));
                    }
                    async attachInlineFiles(files) {
                      if (files.length === 0) {
                        return;
                      }
                      if (!(files[0] instanceof Blob)) {
                        throw new Error("parameter must be an array of Blob objects");
                      }
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.attachInlineFiles(Array.from(files));
                    }
                    // Old alias that we should keep around until we're sure no one is using it.
                    dragFilesIntoCompose(files) {
                      const {
                        driver
                      } = (0, get_or_fail.A)(compose_view_memberMap, this);
                      driver.getLogger().deprecationWarning("ComposeView.dragFilesIntoCompose", "ComposeView.attachInlineFiles");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.attachInlineFiles(files);
                    }
                    //NOT DOCUMENTED BECAUSE STREAK-ONLY FOR NOW
                    getElement() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getElement();
                    }
                    registerRequestModifier(modifier) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.registerRequestModifier(modifier);
                    }
                    replaceSendButton(_ref) {
                      let {
                        el
                      } = _ref;
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.replaceSendButton(el);
                    }
                    hideDiscardButton() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.hideDiscardButton();
                    }
                    ensureFormattingToolbarIsHidden() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.ensureFormattingToolbarIsHidden();
                    }
                    ensureAppButtonToolbarsAreClosed() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.ensureAppButtonToolbarsAreClosed();
                    }
                    // TODO remove
                    overrideEditSubject() {
                      const {
                        driver,
                        composeViewImplementation
                      } = (0, get_or_fail.A)(compose_view_memberMap, this);
                      driver.getLogger().deprecationWarning("composeView.overrideEditSubject");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      if (typeof composeViewImplementation.overrideEditSubject === "function") {
                        composeViewImplementation.overrideEditSubject();
                      }
                    }
                  }
                })
              ),
              /***/
              6341: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(7332);
                  var _route_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(321);
                  var _common_get_or_fail__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(4531);
                  module3 = __webpack_require__3.hmd(module3);
                  class CustomRouteView extends _route_view__WEBPACK_IMPORTED_MODULE_0__.A {
                    constructor(routeViewDriver) {
                      super(routeViewDriver);
                      const members = {
                        routeViewDriver
                      };
                      membersMap.set(this, members);
                    }
                    setFullWidth(fullWidth) {
                      const {
                        routeViewDriver
                      } = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_1__.A)(membersMap, this);
                      routeViewDriver.setFullWidth(fullWidth);
                    }
                    getElement() {
                      const {
                        routeViewDriver
                      } = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_1__.A)(membersMap, this);
                      const el = routeViewDriver.getCustomViewElement();
                      if (!el) throw new Error("Should not happen");
                      return el;
                    }
                  }
                  const membersMap = (0, ud__WEBPACK_IMPORTED_MODULE_2__.defonce)(module3, () => /* @__PURE__ */ new WeakMap());
                  const __WEBPACK_DEFAULT_EXPORT__ = CustomRouteView;
                })
              ),
              /***/
              321: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var _lib_safe_event_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(2788);
                  class RouteView extends _lib_safe_event_emitter__WEBPACK_IMPORTED_MODULE_0__.A {
                    #routeID = null;
                    #routeType = null;
                    #params = null;
                    #routeViewDriver;
                    constructor(routeViewDriver) {
                      super();
                      this.destroyed = false;
                      this.#routeViewDriver = routeViewDriver;
                      _bindToEventStream(routeViewDriver, this);
                    }
                    /**
                     * @returns a string of the ID of the RouteView. This is the same routeID that you give Router.goto() or Router.createLink(). This will be a value from NativeRouteIDs.
                     */
                    getRouteID() {
                      if (!this.#routeID) {
                        this.#routeID = this.#routeViewDriver.getRouteID();
                      }
                      return this.#routeID;
                    }
                    getRouteType() {
                      if (!this.#routeType) {
                        this.#routeType = this.#routeViewDriver.getRouteType();
                      }
                      return this.#routeType;
                    }
                    getParams() {
                      if (!this.#params) {
                        this.#params = this.#routeViewDriver.getParams();
                      }
                      return this.#params;
                    }
                  }
                  function _bindToEventStream(routeViewDriver, routeView) {
                    routeViewDriver.getEventStream().onEnd(() => {
                      routeView.destroyed = true;
                      routeView.emit("destroy");
                      routeView.removeAllListeners();
                    });
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = RouteView;
                })
              ),
              /***/
              9755: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      BasicButtonViewController
                    )
                    /* harmony export */
                  });
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_0__);
                  class BasicButtonViewController {
                    _stopper = kefir_stopper__WEBPACK_IMPORTED_MODULE_0___default()();
                    constructor(options) {
                      this._activateFunction = options.activateFunction || options.onClick;
                      this._view = options.buttonView;
                      this._view.getEventStream().filter((event) => event.eventName === "click").onValue(() => {
                        this.activate();
                      });
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    destroy() {
                      this._activateFunction = null;
                      this._view.destroy();
                      this._stopper.destroy();
                    }
                    update(options) {
                      this.getView().update(options);
                      this.setActivateFunction(options && (options.activateFunction || options.onClick));
                    }
                    getView() {
                      return this._view;
                    }
                    setActivateFunction(f) {
                      this._activateFunction = f;
                    }
                    activate() {
                      if (this._activateFunction) {
                        this._activateFunction({});
                      }
                    }
                  }
                })
              ),
              /***/
              9374: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      DropdownButtonViewController
                    )
                    /* harmony export */
                  });
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_1__);
                  var _dropdown_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(3046);
                  class DropdownButtonViewController {
                    _dropdownView = null;
                    _stopper = kefir_stopper__WEBPACK_IMPORTED_MODULE_1___default()();
                    constructor(options) {
                      this._dropdownShowFunction = options.dropdownShowFunction;
                      this._DropdownViewDriverClass = options.dropdownViewDriverClass;
                      const view = this._view = options.buttonView;
                      this._dropdownPositionOptions = options.dropdownPositionOptions;
                      view.getElement().setAttribute("aria-haspopup", "true");
                      view.getElement().setAttribute("aria-pressed", "false");
                      view.getElement().setAttribute("aria-expanded", "false");
                      this._bindToViewEvents();
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    destroy() {
                      if (this._view) {
                        this._view.destroy();
                        this._view = null;
                      }
                      if (this._dropdownView) {
                        this._dropdownView.close();
                        this._dropdownView = null;
                      }
                      this._stopper.destroy();
                    }
                    update(options) {
                      this.getView().update(options);
                      this.setDropdownShowFunction(options && options.dropdownShowFunction);
                    }
                    getView() {
                      if (!this._view) throw new Error("Already destroyed");
                      return this._view;
                    }
                    setDropdownShowFunction(func) {
                      this._dropdownShowFunction = func;
                    }
                    showDropdown() {
                      this.hideDropdown();
                      const view = this._view;
                      if (!view) throw new Error("Already destroyed");
                      view.activate();
                      const dropdownView = this._dropdownView = new _dropdown_view__WEBPACK_IMPORTED_MODULE_0__.A(new this._DropdownViewDriverClass(), view.getElement(), void 0);
                      if (this._dropdownPositionOptions) {
                        dropdownView.setPlacementOptions(this._dropdownPositionOptions);
                      }
                      dropdownView.on("destroy", this._dropdownClosed.bind(this));
                      if (this._dropdownShowFunction) {
                        this._dropdownShowFunction({
                          dropdown: this._dropdownView
                        });
                      }
                      view.getElement().setAttribute("aria-pressed", "true");
                      view.getElement().setAttribute("aria-expanded", "true");
                    }
                    hideDropdown() {
                      if (this._dropdownView) {
                        this._dropdownView.close();
                      }
                    }
                    isDropdownVisible() {
                      return !!this._dropdownView;
                    }
                    _bindToViewEvents() {
                      if (!this._view) throw new Error("Already destroyed");
                      this._view.getEventStream().filter((event) => event.eventName === "click").onValue(() => {
                        this._toggleDropdownState();
                      });
                    }
                    _toggleDropdownState() {
                      if (this._dropdownView) {
                        this._dropdownView.close();
                      } else {
                        this.showDropdown();
                      }
                    }
                    _dropdownClosed() {
                      const view = this._view;
                      if (view) {
                        view.deactivate();
                        this._dropdownView = null;
                        view.getElement().setAttribute("aria-pressed", "false");
                        view.getElement().setAttribute("aria-expanded", "false");
                      }
                    }
                  }
                })
              ),
              /***/
              3046: (
                /***/
                ((__unused_webpack_module2, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    A: () => (
                      /* binding */
                      DropdownView
                    )
                  });
                  var browser_asap = __webpack_require__3(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__3.n(browser_asap);
                  var safe_event_emitter = __webpack_require__3(2788);
                  var kefir_esm = __webpack_require__3(7249);
                  var make_mutation_observer_chunked_stream = __webpack_require__3(3197);
                  var js = __webpack_require__3(5714);
                  var js_default = /* @__PURE__ */ __webpack_require__3.n(js);
                  var kefir_bus = __webpack_require__3(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__3.n(kefir_bus);
                  var kefir_stopper_js = __webpack_require__3(4924);
                  var kefir_stopper_js_default = /* @__PURE__ */ __webpack_require__3.n(kefir_stopper_js);
                  ;
                  function fromEventsWithOptions(target, eventName, options) {
                    return kefir_esm.stream((emitter) => {
                      target.addEventListener(eventName, emitter.emit, options);
                      return () => {
                        target.removeEventListener(eventName, emitter.emit, options);
                      };
                    });
                  }
                  ;
                  class ScrollableContainByScreen {
                    _manualRepositions = kefir_bus_default()();
                    _stopper = kefir_stopper_js_default()();
                    constructor(element, anchorPoint, options) {
                      kefir_esm["default"].merge([this._manualRepositions, kefir_esm["default"].fromEvents(window, "resize"), fromEventsWithOptions(window, "scroll", {
                        capture: true,
                        passive: true
                      }).filter((event) => event.target.contains(anchorPoint))]).toProperty(() => null).takeUntilBy(this._stopper).onValue(() => {
                        js_default()(element, anchorPoint, options);
                      });
                    }
                    reposition() {
                      this._manualRepositions.emit(null);
                    }
                    destroy() {
                      this._stopper.destroy();
                    }
                  }
                  var from_event_target_capture = __webpack_require__3(3985);
                  ;
                  function* parentNodes(node) {
                    do {
                      yield node;
                    } while (node = node.rfaAnchor || node._logicalParent || node.parentNode);
                  }
                  ;
                  function outsideClicksAndEscape(elements) {
                    return kefir_esm.merge([
                      (0, from_event_target_capture.A)(document, "click"),
                      // We modify the focus event on document sometimes, so we listen for
                      // it on body so our modifications can happen first.
                      (0, from_event_target_capture.A)(document.body, "focus")
                    ]).filter((event) => !event.shouldIgnore && (event.isTrusted || false) && elements.every((el) => {
                      for (const node of parentNodes(event.target)) {
                        if (node === el) return false;
                      }
                      return true;
                    })).map((event) => ({
                      type: "outsideInteraction",
                      cause: event
                    })).merge(kefir_esm.fromEvents(document, "keydown").filter((e) => e.key ? e.key === "Escape" : e.which === 27).map((event) => {
                      event.preventDefault();
                      event.stopPropagation();
                      return {
                        type: "escape",
                        cause: event
                      };
                    })).map((e) => {
                      if (false) {
                      }
                      return e;
                    });
                  }
                  ;
                  class DropdownView extends safe_event_emitter.A {
                    destroyed = false;
                    /*deprecated*/
                    closed = false;
                    _userPlacementOptions = {
                      hAlign: "left"
                    };
                    _scrollableContainByScreen = null;
                    constructor(dropdownViewDriver, anchorElement, options) {
                      super();
                      this._dropdownViewDriver = dropdownViewDriver;
                      this._options = {
                        ...dropdownViewDriver.getDropdownOptions && dropdownViewDriver.getDropdownOptions(),
                        ...options
                      };
                      this.el = dropdownViewDriver.getContentElement();
                      const containerEl = dropdownViewDriver.getContainerElement();
                      if (document.contains(containerEl)) {
                        this._didInsertContainerEl = false;
                      } else {
                        document.body.insertBefore(containerEl, document.body.firstElementChild);
                        this._didInsertContainerEl = true;
                      }
                      if (!containerEl.hasAttribute("tabindex")) {
                        containerEl.setAttribute("tabindex", "-1");
                      }
                      const onDestroy = kefir_esm["default"].fromEvents(this, "destroy");
                      const elementsToIgnore = [anchorElement, containerEl];
                      if (this._options.extraElementsToIgnore) {
                        elementsToIgnore.push(...this._options.extraElementsToIgnore);
                      }
                      outsideClicksAndEscape(elementsToIgnore).takeUntilBy(onDestroy).filter((event) => {
                        let isCanceled = false;
                        const appEvent = {
                          type: event.type,
                          cause: event.cause,
                          cancel: () => {
                            isCanceled = true;
                          }
                        };
                        this.emit("preautoclose", appEvent);
                        return !isCanceled;
                      }).onValue(() => {
                        this.close();
                      });
                      if (!this._options.manualPosition) {
                        containerEl.style.position = "fixed";
                        browser_asap_default()(() => {
                          if (this.closed) return;
                          kefir_esm["default"].fromEvents(this, "_placementOptionsUpdated").toProperty(() => null).takeUntilBy(onDestroy).onValue(() => {
                            if (this._scrollableContainByScreen) {
                              this._scrollableContainByScreen.destroy();
                            }
                            this._scrollableContainByScreen = new ScrollableContainByScreen(containerEl, anchorElement, this._userPlacementOptions);
                          });
                          (0, make_mutation_observer_chunked_stream.A)(dropdownViewDriver.getContentElement(), {
                            childList: true,
                            attributes: true,
                            characterData: true,
                            subtree: true
                          }).throttle(200).takeUntilBy(onDestroy).onValue(() => this.reposition());
                        });
                      }
                      const startActiveElement = document.activeElement;
                      browser_asap_default()(() => {
                        if (this.closed) return;
                        if (document.activeElement !== startActiveElement) return;
                        containerEl.focus();
                      });
                    }
                    setPlacementOptions(options) {
                      if (this._options.manualPosition) {
                        console.error("DropdownView.setPlacementOptions() was called on a manually-positioned DropdownView.");
                        return;
                      }
                      this._userPlacementOptions = {
                        ...this._userPlacementOptions,
                        ...options
                      };
                      this.emit("_placementOptionsUpdated");
                    }
                    close() {
                      if (!this.destroyed) {
                        this.destroyed = this.closed = true;
                        if (this._scrollableContainByScreen) {
                          this._scrollableContainByScreen.destroy();
                        }
                        this.emit("destroy");
                        if (this._didInsertContainerEl) {
                          this._dropdownViewDriver.getContainerElement().remove();
                        }
                        this._dropdownViewDriver.destroy();
                      }
                    }
                    reposition() {
                      if (this._scrollableContainByScreen) {
                        this._scrollableContainByScreen.reposition();
                      }
                    }
                  }
                })
              ),
              /***/
              8855: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    N: () => (
                      /* binding */
                      iconLiga
                    )
                    /* harmony export */
                  });
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(5516);
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(1364);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
                  var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());
                  ___CSS_LOADER_EXPORT___.push([module3.id, ".inboxsdk__GBPjAIsupt3H7foDtouM{font-size:20px;line-height:1;position:relative;z-index:1!important}", "", { "version": 3, "sources": ["webpack://./src/platform-implementation-js/dom-driver/gmail/views/gmail-app-sidebar-view/primary/index.module.css"], "names": [], "mappings": "AAAA,gCACE,cAAe,CACf,aAAc,CACd,iBAAkB,CAClB,mBACF", "sourcesContent": [".iconLiga {\n  font-size: 20px;\n  line-height: 1;\n  position: relative;\n  z-index: 1 !important;\n}\n"], "sourceRoot": "" }]);
                  var iconLiga = "inboxsdk__GBPjAIsupt3H7foDtouM";
                  const __WEBPACK_DEFAULT_EXPORT__ = ___CSS_LOADER_EXPORT___;
                })
              ),
              /***/
              9245: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    $r: () => (
                      /* binding */
                      attachmentIcon
                    ),
                    /* harmony export */
                    Ad: () => (
                      /* binding */
                      shortDetail
                    ),
                    /* harmony export */
                    Ay: () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    DD: () => (
                      /* binding */
                      title
                    ),
                    /* harmony export */
                    Lf: () => (
                      /* binding */
                      recipients
                    ),
                    /* harmony export */
                    Lm: () => (
                      /* binding */
                      iconAtStart
                    ),
                    /* harmony export */
                    UA: () => (
                      /* binding */
                      snippet
                    ),
                    /* harmony export */
                    VA: () => (
                      /* binding */
                      subtitle
                    ),
                    /* harmony export */
                    gy: () => (
                      /* binding */
                      unread
                    ),
                    /* harmony export */
                    kk: () => (
                      /* binding */
                      resultTitle
                    )
                    /* harmony export */
                  });
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(5516);
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(1364);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
                  var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());
                  ___CSS_LOADER_EXPORT___.push([module3.id, '.Wn{--inboxsdk-title-color:rgb(0 0 0 / 87%);--inboxsdk-subtitle-color:rgb(0 0 0 / 54%)}.inboxsdk__gmail_dark_body_theme .Wn{--inboxsdk-title-color:rgb(255 255 255);--inboxsdk-subtitle-color:rgb(255 255 255 / 70%)}.Wn.inboxsdk__ZWrBCcqtIqrDEdUtPOrg{color:var(--inboxsdk-title-color)}.Wn .inboxsdk__WFNlIHJZA6zYVSDGWS2K{color:var(--inboxsdk-subtitle-color)}.xY.inboxsdk__HBTr58WKm0EhmpKhN5k1{max-width:calc(168px + (30px*2));flex-basis:calc(168px + (30px*2))}.inboxsdk__HBTr58WKm0EhmpKhN5k1 span{text-overflow:ellipsis;display:block;overflow:hidden}.inboxsdk__kN8mmVlzZVbzIS_awdJ_,.inboxsdk__Va73Osg6o8dIKLvkvywn,.inboxsdk__oxF6Ne2PQsND932WpK9J,.inboxsdk__N8BEpD1pdj535bJKkz7u,.inboxsdk__rusCS8I3RyomwIQUtkef{content:""}.inboxsdk__POtXLY2WRLq21pk7OxRg b{font-weight:700}.inboxsdk__N8BEpD1pdj535bJKkz7u.inboxsdk__POtXLY2WRLq21pk7OxRg{color:rgb(95 99 104)}.inboxsdk__gmail_dark_body_theme .inboxsdk__N8BEpD1pdj535bJKkz7u.inboxsdk__POtXLY2WRLq21pk7OxRg{color:rgb(255 255 255/50%)}', "", { "version": 3, "sources": ["webpack://./src/platform-implementation-js/dom-driver/gmail/views/gmail-collapsible-section-view.module.css"], "names": [], "mappings": "AAAA,IACE,uCAAwC,CACxC,0CACF,CAEA,qCACE,uCAAwC,CACxC,gDACF,CAEA,mCACE,iCACF,CAEA,oCACE,oCACF,CAGA,mCAKE,gCAAmC,CACnC,iCACF,CAGA,qCACE,sBAAuB,CACvB,aAAc,CACd,eACF,CAEA,gKACE,UACF,CAWA,kCACE,eACF,CAWA,+DACE,oBACF,CAGA,gGACE,0BACF", "sourcesContent": [":global(.Wn) {\n  --inboxsdk-title-color: rgb(0 0 0 / 87%);\n  --inboxsdk-subtitle-color: rgb(0 0 0 / 54%);\n}\n\n:global(.inboxsdk__gmail_dark_body_theme .Wn) {\n  --inboxsdk-title-color: rgb(255 255 255);\n  --inboxsdk-subtitle-color: rgb(255 255 255 / 70%);\n}\n\n:global(.Wn).title {\n  color: var(--inboxsdk-title-color);\n}\n\n:global(.Wn) .subtitle {\n  color: var(--inboxsdk-subtitle-color);\n}\n\n/* Make the recipient's column wider after taking out two of the native rows icons. */\n:global(.xY).resultTitle {\n  /*\n   * 168px is the max width of the recipients' column element.\n   * 30px is the width of each rows' individual icons.\n   */\n  max-width: calc(168px + (30px * 2));\n  flex-basis: calc(168px + (30px * 2));\n}\n\n/* Rows */\n.resultTitle span {\n  text-overflow: ellipsis;\n  display: block;\n  overflow: hidden;\n}\n\n.iconAtStart {\n  content: '';\n}\n\n.recipients {\n  content: '';\n}\n\n.snippet {\n  content: '';\n}\n\n/* if `isRead: { text: false, background: true }` is passed to the corresponding RowDescriptor, account for Gmail rule making b tags 400 weight. */\n.unread b {\n  font-weight: 700;\n}\n\n.attachmentIcon {\n  content: '';\n}\n\n.shortDetail {\n  content: '';\n}\n\n/* Without this monkey patch, in light Gmail themes, .shortDetail is fully opaque black. */\n.shortDetail.unread {\n  color: rgb(95 99 104);\n}\n\n/* Without this monkey patch, in dark Gmail themes, .shortDetail is fully opaque white. */\n:global(.inboxsdk__gmail_dark_body_theme) .shortDetail.unread {\n  color: rgb(255 255 255 / 50%);\n}\n"], "sourceRoot": "" }]);
                  var title = "inboxsdk__ZWrBCcqtIqrDEdUtPOrg";
                  var subtitle = "inboxsdk__WFNlIHJZA6zYVSDGWS2K";
                  var resultTitle = "inboxsdk__HBTr58WKm0EhmpKhN5k1";
                  var attachmentIcon = "inboxsdk__kN8mmVlzZVbzIS_awdJ_";
                  var iconAtStart = "inboxsdk__Va73Osg6o8dIKLvkvywn";
                  var recipients = "inboxsdk__oxF6Ne2PQsND932WpK9J";
                  var shortDetail = "inboxsdk__N8BEpD1pdj535bJKkz7u";
                  var snippet = "inboxsdk__rusCS8I3RyomwIQUtkef";
                  var unread = "inboxsdk__POtXLY2WRLq21pk7OxRg";
                  const __WEBPACK_DEFAULT_EXPORT__ = ___CSS_LOADER_EXPORT___;
                })
              ),
              /***/
              8558: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    Ay: () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    iW: () => (
                      /* binding */
                      main
                    ),
                    /* harmony export */
                    iy: () => (
                      /* binding */
                      hideComposes
                    ),
                    /* harmony export */
                    jq: () => (
                      /* binding */
                      inboxsdkMolesInUse
                    )
                    /* harmony export */
                  });
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(5516);
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(1364);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
                  var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());
                  ___CSS_LOADER_EXPORT___.push([module3.id, ".inboxsdk___CVI_XgzMBSxR6kVfDAg{order:1}.inboxsdk__UJYCuevuXZxfTgEf23lV .aDj.ahe{position:static!important}.inboxsdk__cZb1_NDJIxsKMlBKVLgD .dw\n      .nH\n      > .nH\n      > .no\n      > *:not([style*='order: 0;'], [style*='order: 2147483647;'], .aJl).nn.nH{display:none!important}", "", { "version": 3, "sources": ["webpack://./src/platform-implementation-js/dom-driver/gmail/widgets/mole-view.module.css"], "names": [], "mappings": "AAAA,gCACE,OACF,CAKA,yCACE,yBACF,CAEA;;;;+EAQE,sBACF", "sourcesContent": [".main {\n  order: 1;\n}\n\n/* .aDj.ahe are the `position: fixed` are elements that contain ComposeView toolbars when the ComposeView body isn't focused.\n * This selector may have been the equivalent of `.aDj.aDi` before 2023-08-30.\n */\n.inboxsdkMolesInUse :global(.aDj.ahe) {\n  position: static !important;\n}\n\n.hideComposes\n  :global(\n    .dw\n      .nH\n      > .nH\n      > .no\n      > *:not([style*='order: 0;'], [style*='order: 2147483647;'], .aJl).nn.nH\n  ) {\n  display: none !important;\n}\n"], "sourceRoot": "" }]);
                  var main = "inboxsdk___CVI_XgzMBSxR6kVfDAg";
                  var inboxsdkMolesInUse = "inboxsdk__UJYCuevuXZxfTgEf23lV";
                  var hideComposes = "inboxsdk__cZb1_NDJIxsKMlBKVLgD";
                  const __WEBPACK_DEFAULT_EXPORT__ = ___CSS_LOADER_EXPORT___;
                })
              ),
              /***/
              7510: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    $8: () => (
                      /* binding */
                      app_sidebar_waiting_platform
                    ),
                    /* harmony export */
                    Ay: () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    E3: () => (
                      /* binding */
                      app_sidebar_content_panel
                    ),
                    /* harmony export */
                    Go: () => (
                      /* binding */
                      sidebar_button_container
                    ),
                    /* harmony export */
                    JR: () => (
                      /* binding */
                      app_sidebar_in_use
                    ),
                    /* harmony export */
                    OW: () => (
                      /* binding */
                      companion_container_app_sidebar_in_use
                    ),
                    /* harmony export */
                    PD: () => (
                      /* binding */
                      app_sidebar_content_panel_grip
                    ),
                    /* harmony export */
                    Pl: () => (
                      /* binding */
                      app_sidebar_content_panel_title
                    ),
                    /* harmony export */
                    T6: () => (
                      /* binding */
                      app_sidebar_content_panel_top_line
                    ),
                    /* harmony export */
                    V: () => (
                      /* binding */
                      app_sidebar_content_panel_toggle
                    ),
                    /* harmony export */
                    Y8: () => (
                      /* binding */
                      app_sidebar_content_panel_toggle_button
                    ),
                    /* harmony export */
                    Yf: () => (
                      /* binding */
                      sidebar_iconArea
                    ),
                    /* harmony export */
                    bh: () => (
                      /* binding */
                      app_sidebar_content_panel_title_text
                    ),
                    /* harmony export */
                    dG: () => (
                      /* binding */
                      app_sidebar_main
                    ),
                    /* harmony export */
                    i1: () => (
                      /* binding */
                      app_sidebar_content_panel_content
                    ),
                    /* harmony export */
                    lt: () => (
                      /* binding */
                      app_sidebar_content_panel_title_icon
                    ),
                    /* harmony export */
                    mz: () => (
                      /* binding */
                      showControls
                    ),
                    /* harmony export */
                    nc: () => (
                      /* binding */
                      app_sidebar
                    ),
                    /* harmony export */
                    qX: () => (
                      /* binding */
                      container_app_sidebar_no_icons
                    ),
                    /* harmony export */
                    rz: () => (
                      /* binding */
                      dragged
                    ),
                    /* harmony export */
                    sz: () => (
                      /* binding */
                      expanded
                    ),
                    /* harmony export */
                    th: () => (
                      /* binding */
                      app_sidebar_content_area
                    ),
                    /* harmony export */
                    uj: () => (
                      /* binding */
                      hideTitleBar
                    ),
                    /* harmony export */
                    vQ: () => (
                      /* binding */
                      thread_noticeBar
                    ),
                    /* harmony export */
                    x1: () => (
                      /* binding */
                      app_sidebar_content_panel_title_icon_container
                    ),
                    /* harmony export */
                    zC: () => (
                      /* binding */
                      app_sidebar_container
                    )
                    /* harmony export */
                  });
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__3(5516);
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__3.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__3(1364);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__3.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
                  var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__3(3615);
                  var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__3.n(_node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__);
                  var ___CSS_LOADER_URL_IMPORT_0___ = new URL(
                    /* asset import */
                    __webpack_require__3(6306),
                    __webpack_require__3.b
                  );
                  var ___CSS_LOADER_URL_IMPORT_1___ = new URL(
                    /* asset import */
                    __webpack_require__3(6948),
                    __webpack_require__3.b
                  );
                  var ___CSS_LOADER_URL_IMPORT_2___ = new URL(
                    /* asset import */
                    __webpack_require__3(6332),
                    __webpack_require__3.b
                  );
                  var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());
                  var ___CSS_LOADER_URL_REPLACEMENT_0___ = _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default()(___CSS_LOADER_URL_IMPORT_0___);
                  var ___CSS_LOADER_URL_REPLACEMENT_1___ = _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default()(___CSS_LOADER_URL_IMPORT_1___);
                  var ___CSS_LOADER_URL_REPLACEMENT_2___ = _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default()(___CSS_LOADER_URL_IMPORT_2___);
                  ___CSS_LOADER_EXPORT___.push([module3.id, '.inboxsdk__notransition{transition:none!important}.inboxsdk__close_button{height:24px;width:24px;opacity:.7;position:relative;background:0 0;border:0;padding:0;box-sizing:content-box;outline:0;cursor:pointer}.inboxsdk__close_button:focus,.inboxsdk__close_button:hover{opacity:1}.inboxsdk__close_button:focus::before{background-color:rgb(0 0 0/12%)}.inboxsdk__close_button::before{border-radius:50%;position:absolute;inset:-4px -4px -4px -4px;padding:4px;content:" "}.inboxsdk__close_button::after{content:" ";background:url(https://www.gstatic.com/images/icons/material/system/1x/close_black_24dp.png);position:absolute;height:24px;width:24px;top:0;left:0}@media (min-resolution:192dpi){.inboxsdk__close_button::after{background:url(https://www.gstatic.com/images/icons/material/system/2x/close_black_24dp.png);background-size:contain}}.inboxsdk__nJrOYb9x4IUalKhkqH70{display:none}.inboxsdk__drawer_view_container{visibility:visible;direction:initial;position:fixed;height:100vh;width:100vw;bottom:0;left:0;z-index:51;pointer-events:none}.inboxsdk__drawer_view{position:absolute;pointer-events:auto;top:0;bottom:0;right:0;width:452px;font:13px"Helvetica Neue",Helvetica,Arial,sans-serif;display:flex;flex-direction:column;background-color:#fff;outline:0;box-shadow:0 0 8px rgb(0 0 0/18%),0 8px 16px rgb(0 0 0/36%);transform:translateX(100%);transition:transform 150ms cubic-bezier(.4,0,.2,1)}.inboxsdk__drawer_view.inboxsdk__match_sidebar_content_panel_width{width:300px}.inboxsdk__drawer_view.inboxsdk__active{transform:none}.inboxsdk__drawer_title_bar{background-color:#f5f5f5;border-bottom:1px solid #e0e0e0;padding:16px 20px;white-space:nowrap;display:flex;flex:0 0 auto}.inboxsdk__drawer_title_bar .inboxsdk__close_button{margin-right:20px;flex-shrink:0}.inboxsdk__drawer_title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font:20px/24px"Helvetica Neue",Helvetica,Arial,sans-serif}.inboxsdk__inbox_backdrop{visibility:visible;position:fixed;height:100vh;width:100vw;bottom:0;left:0;z-index:50;background-color:transparent;transition:background-color 150ms cubic-bezier(.4,0,1,1)}.inboxsdk__inbox_backdrop.inboxsdk__active{background-color:rgb(10 10 10/60%);transition:background-color 70ms cubic-bezier(0,0,.2,1)}.inboxsdk__inbox_backdrop~.inboxsdk__inbox_backdrop{opacity:.6}.inboxsdk__YVRXKNcaUvgm8xbnhvbA{display:flex;flex-direction:column}.inboxsdk__L1YTilBb_3NY6uyjljIg>.inboxsdk__close_button{position:absolute;bottom:10px;right:20px}.inboxsdk__ZsVjiThsnbCmCG_X1Vvn{width:216px}.inboxsdk__RRnCd87hoA2uHeC1Z_FE{overflow:hidden;font:12px Arial,sans-serif;max-height:100%;box-sizing:border-box}.inboxsdk__iYzl6PjYB9v7KGQNbONH{white-space:nowrap;display:flex;user-select:none;cursor:default}.inboxsdk__RRnCd87hoA2uHeC1Z_FE:not(.inboxsdk__o9YcckDJql686JS0n2cc) .inboxsdk__iYzl6PjYB9v7KGQNbONH{border-bottom:1px solid #ddd}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__XdCPRDkO7zSIv6nU4USH .inboxsdk__iYzl6PjYB9v7KGQNbONH,.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__vTsoFgWgM9ldKGsRJYHd .inboxsdk__iYzl6PjYB9v7KGQNbONH:hover{background:rgb(0 0 0/3%)}.inboxsdk__lD1h9YUibxcHdtWGdiWq{min-width:0;overflow:hidden;text-overflow:ellipsis}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__vTsoFgWgM9ldKGsRJYHd .inboxsdk__lD1h9YUibxcHdtWGdiWq{cursor:move}.inboxsdk__p_cMIiZvN4vwQdGOpCts{padding-left:6px;vertical-align:middle;font:700 13px/40px"Helvetica Neue",Helvetica,Arial,sans-serif;color:rgb(0 0 0/87%)}.inboxsdk__L1YTilBb_3NY6uyjljIg.inboxsdk__fQK2Ffccj51PVtC_ibDc .inboxsdk__iYzl6PjYB9v7KGQNbONH{display:none}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__vTsoFgWgM9ldKGsRJYHd .inboxsdk__iYzl6PjYB9v7KGQNbONH:hover .inboxsdk__KudoZ1EBFoQsddbSavvj{position:absolute;top:0;left:0;width:10px;height:40px;background:url(' + ___CSS_LOADER_URL_REPLACEMENT_0___ + ")50%center no-repeat}.inboxsdk__TFQRFr4aJVmDmx2llTVx{width:20px;height:20px;vertical-align:middle;display:inline-flex;justify-content:center;align-items:center;margin-top:-1px}.inboxsdk__Yzt2_upvw7fe6BjWdlhZ,.inboxsdk__Yzt2_upvw7fe6BjWdlhZ>img{width:13px;height:13px}.inboxsdk__M4Frio2Us0lwSTltblkg{flex:1;text-align:right;visibility:hidden}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__vTsoFgWgM9ldKGsRJYHd .inboxsdk__M4Frio2Us0lwSTltblkg{visibility:visible;cursor:pointer}.inboxsdk__Nr6Udyn2ocUynKpdfxh1{margin-top:12px;margin-right:4px;background:url(" + ___CSS_LOADER_URL_REPLACEMENT_1___ + ')center/20px no-repeat;border:0;width:14px;height:14px;transform:rotate(-90deg);transition:-webkit-transform .15s,transform .15s;outline:0;opacity:.6;cursor:pointer}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__XdCPRDkO7zSIv6nU4USH .inboxsdk__iYzl6PjYB9v7KGQNbONH .inboxsdk__Nr6Udyn2ocUynKpdfxh1,.inboxsdk__iYzl6PjYB9v7KGQNbONH:hover .inboxsdk__Nr6Udyn2ocUynKpdfxh1{opacity:.9}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__o9YcckDJql686JS0n2cc .inboxsdk__Nr6Udyn2ocUynKpdfxh1{transform:rotate(0)}.inboxsdk__QsikHKWmzD0Ovsg3wrIw{margin-bottom:25px}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__ARG5bpD2vntIyElH978u{position:relative}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon:focus,.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon:hover{outline:0}.inboxsdk__appid_warning{margin:0;padding:9px;color:#4b4b4b;background:#ff6c6c;font-size:10pt}.inboxsdk__appid_warning_main,a.inboxsdk__appid_register{display:inline-block;vertical-align:middle}.inboxsdk__appid_warning .topline{font-weight:700;font-size:11pt}a.inboxsdk__appid_register{color:#fff;background:#1989ff;border-radius:3px;text-decoration:none;box-shadow:0 0 5px rgb(0 0 0/30%);padding:7px;font-size:10pt;margin-left:1em}.inboxsdk__thread_row_icon_wrapper{display:inline-block}.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg{margin-top:0}.inboxsdk__QbxpXL1mja3SlO_1nJOS{background:#f8ebc0;margin-bottom:10px;padding:12px 4px 6px 12px}.inboxsdk__suggestions_separator_before{padding-bottom:2px!important}.inboxsdk__suggestions_separator_after{border-top:1px solid #e5e5e5;padding-top:2px!important}div.T-I.inboxsdk__button{user-select:none;min-width:27px}div.bHJ .inboxsdk__button{margin:0 2px 0 10px}.inboxsdk__no_bg{background:0 0}.inboxsdk__button.inboxsdk__button_disabled{opacity:.55}.inboxsdk__button_icon+.inboxsdk__button_text{margin-left:5px}.inboxsdk__button_icon{display:inline-block}.inboxsdk__button_iconImg{height:20px;width:20px;vertical-align:middle;margin-top:-2px;user-drag:none;user-select:none;-webkit-user-drag:none}.inboxsdk__button_green_hover,.inboxsdk__button_green_inactive{background-image:-webkit-linear-gradient(top,transparent,transparent);background-image:linear-gradient(top,transparent,transparent);border:1px solid transparent;text-shadow:none}.inboxsdk__button_green_inactive{box-shadow:0 1px 0 rgb(0 0 0/5%);background-color:#53a93f;color:#fff}.inboxsdk__button_green_hover{box-shadow:inset 0-1px 0#4c8534;background-color:#65b045;border-bottom:1px solid #4c8534}.inboxsdk__button_green_active{box-shadow:inset 0 1px 0#2f6124;background:#3e802f;border:1px solid transparent;border-top:1px solid #2f6124;color:#fff;text-shadow:none}.ams.inboxsdk__button::before{width:0;margin:0}.ams.inboxsdk__button:focus{background:rgb(0 0 0/0%)}.ams.inboxsdk__button .asa:not(.bjy)::after{width:auto;height:auto}.inboxsdk__menu{min-width:1em;min-height:1em;padding:0;overflow:visible;max-height:none;z-index:7;cursor:default;font-size:13px;margin:0;outline:0}.inboxsdk__menu>.inboxsdk__menuContent{padding:0;box-shadow:0 8px 10px 1px rgb(0 0 0/14%),0 3px 14px 2px rgb(0 0 0/12%),0 5px 5px -3px rgb(0 0 0/20%);transition:opacity .218s;border:1px solid rgb(0 0 0/20%);background:#fff;outline:0}.f4.J-N-JX.inboxsdk__message_more_icon{height:16px;margin-top:1px;width:16px}.inboxsdk__composeButton{height:20px;width:20px;padding:4px}.inboxsdk__composeButton,.inboxsdk__compose_sendButton{display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;outline:0;position:relative}.inboxsdk__composeButton+.inboxsdk__composeButton{margin-left:4px}.inboxsdk__composeButton .inboxsdk__button_icon{opacity:.55}.inboxsdk__composeButton.inboxsdk__composeButton_active .inboxsdk__button_icon,.inboxsdk__composeButton:focus .inboxsdk__button_icon,.inboxsdk__composeButton:hover .inboxsdk__button_icon{opacity:1}.inboxsdk__composeButton::before{content:"";display:block;opacity:0;position:absolute;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);inset:0 0 0 0;background:0 0;box-sizing:border-box;transform:scale(0);transition-property:transform,opacity;border-radius:4px}.inboxsdk__composeButton:hover::before{background-color:rgb(32 33 36/5.9%);border:0;box-shadow:none;opacity:1;transform:scale(1)}.inboxsdk__composeButton.inboxsdk__composeButton_active::before,.inboxsdk__composeButton:focus::before{background-color:rgb(32 33 36/12.2%);border:0;box-shadow:none;opacity:1;transform:scale(1)}.inboxsdk__compose_actionToolbar .inboxsdk__compose_groupedActionToolbar div.inboxsdk__composeButton:last-child{margin-right:0}.inboxsdk__compose_sendButton{background-color:#1a73e8;color:#fff;height:24px;width:auto;border-radius:4px;padding:6px 4px;margin-left:2px}.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton{height:24px}.inboxsdk__compose_sendButton.inboxsdk__composeButton_active,.inboxsdk__compose_sendButton:focus{background-color:#5094ed;box-shadow:0 1px 1px 0 rgb(66 133 244/30%),0 1px 3px 1px rgb(66 133 244/15%);border:0}.T-I~.inboxsdk__compose_sendButton{margin-left:-6px}.inboxsdk__compose_actionToolbar{white-space:nowrap;padding-left:6px}.inboxsdk__compose_actionToolbar .inboxsdk__button_icon{height:20px;width:20px;display:inline-flex;user-select:none}.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg{height:17px;width:17px;display:inline-flex;margin:auto}.inboxsdk__compose_actionToolbar+.gU:not(.inboxsdk__compose_separator){padding-left:8px}.inboxsdk__compose_groupedActionToolbar_visible .aDg .aDh{overflow-y:visible}.inboxsdk__compose_groupedActionToolbar{position:absolute;bottom:44px;z-index:10;border-radius:2px;box-shadow:0 4px 5px 0 rgb(0 0 0/14%),0 1px 10px 0 rgb(0 0 0/12%),0 2px 4px -1px rgb(0 0 0/20%);margin:3px 3px 7px;padding:4px 5px;background:#fff;left:-3px}.inboxsdk__compose_inlineReply .inboxsdk__compose_groupedActionToolbar{left:14px}.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton:first-child{margin-left:0;margin-right:0}.inboxsdk__composeButton.inboxsdk__compose_groupedActionButton{margin-right:0}.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton{padding:4px}.inboxsdk__compose_groupedActionToolbar_visible .bA3{height:40px}.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button{z-index:1;margin-right:0}.inboxsdk__compose_groupedActionToolbar_arrow,span.inboxsdk__thread_row_custom_draft_label+div.yW{display:none}.inboxsdk__compose_customSendContainer{display:inline-block;position:relative;outline:0;margin:6px 0;padding:0;vertical-align:middle;height:36px;line-height:36px}.inboxsdk__compose_customTitleBarColor>img.Ha,.inboxsdk__compose_customTitleBarColor>img.Hl,.inboxsdk__compose_customTitleBarColor>img.Hq{background-color:transparent!important}.inboxsdk__compose_hasCustomTitleBarText,.inboxsdk__compose_hasCustomTitleBarText>tbody>tr{display:flex}.inboxsdk__compose_hasCustomTitleBarText>tbody>tr{align-items:center}.inboxsdk__compose_hasCustomTitleBarText>tbody{width:100%}.inboxsdk__compose_nativeTitleBarText{display:none!important}.inboxsdk__compose_customTitleBarText{width:calc(100% - 80px)}.inboxsdk__compose_hasCustomTitleBarText td.Hm{margin-right:10px;margin-left:auto}.inboxsdk__compose_statusBarPrependContainer{border-top:1px solid #cfcfcf}.inboxsdk__compose_statusBarPrependContainer+table td.gU{border-top:none}input.inboxsdk__x_close_button{background-color:transparent;background-image:url(' + ___CSS_LOADER_URL_REPLACEMENT_2___ + ');background-size:cover;background-repeat:no-repeat;background-position:center center;height:20px;width:20px;border:0;vertical-align:middle;cursor:pointer;float:right;margin:5px}.inboxsdk__gmail_label.inboxsdk__label_has_icon .au{display:inline-block;margin-left:14px}.inboxsdk__thread_row_label .inboxsdk__button_icon,.inboxsdk__thread_row_label .inboxsdk__button_iconImg{height:11px;width:11px}.inboxsdk__thread_row_label .inboxsdk__button_icon{display:inline-block;margin-top:3px;margin-left:4px;position:absolute}.inboxsdk__thread_row_button{outline:0;height:20px;width:20px;padding:0}.inboxsdk__thread_row_button .inboxsdk__button_icon{max-height:100%}.inboxsdk__thread_row_custom_date_container,.zA>.xY.inboxsdk__thread_row_attachment_icons_present{max-width:inherit}.inboxsdk__thread_row_button .inboxsdk__button_iconImg{height:20px;width:20px;margin-top:0}.inboxsdk__gmail_action{float:right;position:relative;background-color:gray;margin-left:1em;cursor:default;background-image:-webkit-linear-gradient(top,#e9e9e9,#e6e6e6);background-image:linear-gradient(top,#e9e9e9,#e6e6e6);border:1px solid rgb(0 0 0/10%);border-color:#ccc;color:#444;height:17px;line-height:17px;min-width:56px;border-radius:2px;font-size:11px;font-weight:700;text-align:center;white-space:nowrap;padding:0 18px 0 6px}.inboxsdk__gmail_action:focus{border:1px solid #4d90fe;outline:0}.inboxsdk__gmail_action:active{box-shadow:inset 0 1px 2px rgb(0 0 0/10%)}.inboxsdk__gmail_action:hover{box-shadow:0 1px 1px rgb(0 0 0/5%);background-color:#ededed;background-image:-webkit-linear-gradient(top,#ededed,#eaeaea);background-image:linear-gradient(top,#ededed,#eaeaea);border-color:#b8b8b8}.inboxsdk__gmail_action::after{content:"";position:absolute;right:5px;top:5px;margin-left:5px;background:no-repeat url(https://ssl.gstatic.com/mail/sprites/smartmail-561acb673be75c1d374881a95997fce4.png)-67px -100px;width:7px;height:7px;opacity:.55}.inboxsdk__thread_row_custom_date{margin-left:2px}span.inboxsdk__thread_row_custom_date+span:not(.inboxsdk__thread_row_custom_date){display:none}.inboxsdk__thread_row_attachment_iconWrapper{margin-left:3px;height:16px}.inboxsdk__thread_row_attachment_icon{margin-left:3px;width:16px;height:16px}.inboxsdk__thread_row_attachment_iconWrapper{display:flex;justify-content:center;align-items:center;width:max-content}.zA td.apU.xY{width:initial}.zA td.apU.xY span.inboxsdk__thread_row_button{margin:0 10px;opacity:.16}.zA.aqw td.apU.xY span.inboxsdk__thread_row_button{opacity:.54}.zA.aqw td.apU.xY span.inboxsdk__thread_row_button:hover{opacity:1}.zA td.apU.xY span.inboxsdk__thread_row_button::before{width:0;height:0}.inboxsdk__thread_row_attachment_icon{vertical-align:middle}.Zs .xY.inboxsdk__thread_row_attachment_icons_present{flex-grow:0}.Zs .xY.inboxsdk__thread_row_label{order:1}.Zs .xY.inboxsdk__thread_row_icon_wrapper{order:1;margin-left:3px;margin-right:0}.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon,.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg{height:18px;width:18px}.inboxsdk__thread_row_icon_wrapper{width:20px;margin-right:3px;align-self:center;height:20px;flex:0 0 auto}.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg{vertical-align:top}.inboxsdk__thread_row_image_added .y6 .inboxsdk__thread_row_icon_wrapper~span[id]{margin-left:3px}.inboxsdk__thread_row_image_added .a4W,.inboxsdk__thread_row_image_added .apA,.inboxsdk__thread_row_image_added .apx{position:relative}[inboxsdk__message_added_attachment_icon] td.gH div.gK>span:first-child>img,[inboxsdk__message_added_attachment_icon] td.gH>span:first-child>img{margin-right:3px;margin-left:3px;margin-top:0}[inboxsdk__message_added_attachment_icon] td.gH div.gK>span:first-child>:last-child,[inboxsdk__message_added_attachment_icon] td.gH>span:first-child>:last-child{margin-right:6px}.inboxsdk__message_attachment_icon,.inboxsdk__message_attachment_iconWrapper{width:21px;height:21px;position:relative}.inboxsdk__message_attachment_iconWrapper{margin:auto 3px;display:inline-flex;justify-content:center;align-items:center;vertical-align:top}.inboxsdk__message_attachment_tooltipWrapper{position:absolute;top:19px;z-index:10}.gU .aWQ{max-height:3px}.aQw .inboxsdk__button_icon{display:inline-flex;align-items:center;justify-content:center;height:28px}.aQw .inboxsdk__button_iconImg{height:18px;width:18px;margin-top:2px}.aZi .asa .inboxsdk__button_iconImg{display:inline-block;vertical-align:middle;margin-top:-3px}.aZi .aZj .asa .inboxsdk__button_iconImg{margin:0}body .dw{z-index:6!important}.inboxsdk__compose_outerSidebar_wrapper{position:absolute;left:-401px;top:0;background:#fff;width:400px;bottom:0;border-left:1px solid silver;box-shadow:-2px 0 1px #e6e6e6;display:block}.inboxsdk__outerSidebarActive .aSt .inboxsdk__compose_outerSidebar_wrapper{border-left:0;box-shadow:none;left:-400px}.inboxsdk__outerSidebarActive .aSs>div{width:50%!important;margin-left:30%}.inboxsdk__compose_outerSidebar_header{background:#404040;font-size:80%;padding:10px 10px 11px;color:#fff;border-bottom:1px solid #c4c4c4}.inboxsdk__compose_outerSidebar_body{position:absolute;width:100%;bottom:43px;top:36px;left:-1px;overflow:auto}.inboxsdk__compose_outerSidebar_footer{position:absolute;bottom:0;width:100%;border-top:1px solid rgb(206 206 206);display:block}.inboxsdk__compose_innerSidebarActive .GQ,.inboxsdk__compose_innerSidebarActive form{padding-right:200px}div.inboxsdk__compose_statusbar{border:0;height:40px;margin:0}.inboxsdk__compose_statusbar{background:0 0;position:relative}.HM .I5 .inboxsdk__compose_statusbar{padding:0 16px 16px}table+.inboxsdk__compose_statusbar{margin-top:-8px}body.inboxsdk__classic_gmail_recipients_area .inboxsdk__compose_statusbarActive .aoI{height:auto!important}.inboxsdk__compose_statusbarActive .aDl{z-index:unset}.inboxsdk__compose .qz{max-height:inherit!important}body:not(.inboxsdk_hack_disableComposeSizeFixer) .inboxsdk__size_fixer .aDj.aDi{position:static!important}.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .HM .I5{padding-bottom:var(--inboxsdk-total-added-statusbar-height, 0px)}.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj::before{height:calc(100% + var(--inboxsdk-total-added-statusbar-height, 0px))}.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj.aDi>.aDh{background-color:#fff}.inboxsdk__recipient_row{display:flex}.inboxsdk__compose_notice{background-color:#f5f5f5;border-radius:4px;margin:10px;padding:10px 16px}.inboxsdk__recipient_row td.ok{height:20px;padding:0!important}.inboxsdk__recipient_row td.az3{padding:0 3px}.inboxsdk__compose_forceRecipientsOpen .fX.aXjCH{display:block!important}.inboxsdk__compose_forceRecipientRowHidden,.inboxsdk__compose_forceRecipientsOpen .aoD.hl,.inboxsdk__compose_hideRecipientArea .aoD.hl,.inboxsdk__compose_hideRecipientArea .fX.aXjCH,[data-thread-toolbar=true] [data-rowlist-toolbar=true],[data-toolbar-expanded=false] [data-toolbar-expanded=true],[data-toolbar-expanded=true] [data-toolbar-expanded=false],[data-toolbar-icononly=true] .inboxsdk__button_text{display:none!important}[data-toolbar-icononly=false] .inboxsdk__button_text{color:#5f6368}[data-toolbar-icononly=false] .asa::before{border-radius:4px;border:0!important}[data-toolbar-icononly=false] .inboxsdk__button{align-items:center;border:0;display:inline-flex;justify-content:center;position:relative;z-index:0;-webkit-font-smoothing:antialiased;font-family:"Google Sans",Roboto,RobotoDraft,Helvetica,Arial,sans-serif;font-size:14px;letter-spacing:.15px;background:0 0;box-sizing:border-box;color:#5f6368;cursor:pointer;font-weight:500;outline:0;padding:0 8px}.inboxsdk__menuItem .inboxsdk__icon,.inboxsdk__menuItem img{height:16px;width:16px;margin-top:-1px}.inboxsdk__modal_overlay{right:0;bottom:0}.inboxsdk__modal_fullscreen{position:fixed;inset:0 0 0 0;z-index:503;display:flex;justify-content:center;align-items:center;padding:110px 50px 50px}.inboxsdk__modal_content{margin-top:30px;margin-bottom:30px}.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons .inboxsdk__modal_content{margin-bottom:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons:not(.inboxsdk__modal_hideBottom) .inboxsdk__modal_content{margin-bottom:0;padding-bottom:24px}.inboxsdk__modal_close{outline:0;cursor:pointer}.inboxsdk__modal_fullscreen .inboxsdk__modal_container{position:relative;margin-top:-60px;width:auto;overflow:hidden}.inboxsdk__modal_fullscreen .inboxsdk__modal_container .inboxsdk__modal_toprow{margin-right:16px}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_close{display:none}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_container{padding-top:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_content{margin-top:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .Kj-JD-K7{margin:0;display:none}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_container,.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_content{padding-left:0;padding-right:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom .inboxsdk__modal_content{margin-bottom:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom .inboxsdk__modal_container{padding-bottom:0}.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width{display:flex}.inboxsdk__modal_toprow--constrain-title-width>span[role=heading]{flex:1;width:0;word-wrap:break-word}.inboxsdk__drawers_in_use .aDi,.inboxsdk__moles_in_use .aDi{left:auto!important;position:static}.inboxsdk__moles_in_use .nH>.nH>.no{white-space:nowrap}.inboxsdk__moles_in_use .nH>.nH>.no>*{white-space:initial}.inboxsdk__moles_in_use .nH>.nH>.no>.nn{display:inline-block;float:none}.inboxsdk__mole_view{position:relative;max-width:564px;height:100vh;vertical-align:top;display:inline-flex;align-items:flex-end}.inboxsdk__mole_view_inner{visibility:visible;box-sizing:border-box;margin-right:5px;box-shadow:rgb(0 0 0/20%)0 2px 6px;min-width:260px;min-height:40px}.inboxsdk__mole_view_inner:not(.inboxsdk__original_view),.inboxsdk__mole_view_titlebar:not(.inboxsdk__original_view){border-radius:8px 8px 0 0}.inboxsdk__mole_view_titlebar{position:absolute;left:0;right:5px;font-size:14px;font-weight:500;box-sizing:border-box;height:40px;cursor:pointer;padding:10px 12px 10px 16px;color:#041e49;background:#f2f6fc}.inboxsdk__mole_view_titlebar.inboxsdk__original_view{color:#fff;font-size:12.8px;font-weight:400;background:#404040;padding:9px 0 0 11px;border-radius:4px 4px 0 0}.inboxsdk__mole_view_titlebar h2{font-size:inherit;font-weight:inherit;margin:4px 0 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.inboxsdk__mole_title_buttons{white-space:nowrap;float:right;padding-right:5px;margin-top:1px}.inboxsdk__mole_title_buttons.inboxsdk__original_view{margin-top:-3px}.inboxsdk__mole_title_buttons>img{height:24px;width:24px;position:relative;top:2px}.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view)>img{height:16px;width:16px;margin-left:4px}.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view)>img:hover{background-color:rgb(68 71 70/7.8%)}.inboxsdk__mole_title_buttons.inboxsdk__original_view>img:hover{background-color:#737373}.inboxsdk__mole_title_buttons>img:hover{opacity:1}.inboxsdk__mole_view.inboxsdk__minimized .Hl,.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content,.inboxsdk__mole_view.inboxsdk__minimized.inboxsdk__mole_use_minimize_title h2.inboxsdk__mole_default,.inboxsdk__mole_view:not(.inboxsdk__minimized) .Hk,.inboxsdk__mole_view:not(.inboxsdk__minimized) h2.inboxsdk__mole_minimized,.inboxsdk__mole_view:not(.inboxsdk__mole_use_minimize_title) h2.inboxsdk__mole_minimized{display:none}.inboxsdk__mole_view_content:not(.inboxsdk__original_view){margin-top:40px;border:0}.inboxsdk__mole_view_content{margin-top:36px;border:1px solid #cfcfcf;background:#fff;min-width:260px;min-height:20px;max-height:80vh}.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_inner{min-width:0}.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_content{margin-top:0;min-width:0}.inboxsdk__tab{width:30px}.inboxsdk__tab.inboxsdk__fQK2Ffccj51PVtC_ibDc:first-child:last-child{display:none}.inboxsdk__tab.inboxsdk__tab_selected{width:auto}table.aKk .inboxsdk__contentTabContainer .inboxsdk__tab .aAy[role=tab]{height:28px}.inboxsdk__tab_icon{width:30px;height:25px;background-position-x:5px;background-position-y:3px;background-size:16px;background-repeat:no-repeat}.inboxsdk__tab_icon img{height:16px;width:16px;margin-left:5px;margin-top:3px}.inboxsdk__tab .aKx{top:4px}.inboxsdk__sidebar div[role=complementary]{position:static!important}.inboxsdk__sidebar>div.y4,.inboxsdk__lmkPHCz841PzU2vywMZI>div.y4{display:none}table.aKk .inboxsdk__contentTabContainer .inboxsdk__tab:first-child .aAy[role=tab]{border-left-width:1px}.inboxsdk__sidebar .inboxsdk__contentPanelContainer{font:12px Arial,sans-serif;max-width:220px}.inboxsdk__contentPanelContainer_contentContainer{overflow:hidden;margin-bottom:10px;border-bottom:1px solid #d8d8d8}body.inboxsdk__hasTopMessageBar .bq9{top:var(--inboxsdk__topMessageBar-height)}.inboxsdk__lmkPHCz841PzU2vywMZI>div[role=complementary]{position:static!important;width:216px!important}.inboxsdk__lmkPHCz841PzU2vywMZI{will-change:position}.inboxsdk__RRnCd87hoA2uHeC1Z_FE{background:#fff}.inboxsdk__ZsVjiThsnbCmCG_X1Vvn{padding:4px 0 12px}.inboxsdk__L1YTilBb_3NY6uyjljIg.inboxsdk__fQK2Ffccj51PVtC_ibDc .inboxsdk__ZsVjiThsnbCmCG_X1Vvn{padding-top:0}.container_app_sidebar_in_use.no,.inboxsdk__IpDkQtEZuh257muFXot6.no{display:flex;flex-direction:row;width:100%}body[dir=rtl] .container_app_sidebar_in_use.no[dir=ltr],body[dir=rtl] .idm5_container_app_sidebar_no_icons.no[dir=ltr]{flex-direction:row-reverse}.container_app_sidebar_in_use.no .G-atb.inboxsdk__thread_toolbar_parent[gh=tm]{margin-right:-57px!important}.container_addon_sidebar_visible.container_app_sidebar_in_use.no .G-atb.inboxsdk__thread_toolbar_parent[gh=tm],.container_app_sidebar_visible.container_app_sidebar_in_use.no .G-atb.inboxsdk__thread_toolbar_parent[gh=tm]{margin-right:-321px!important}.inboxsdk__IpDkQtEZuh257muFXot6 .G-atb.inboxsdk__thread_toolbar_parent[gh=tm]{margin-right:0!important}.inboxsdk__button.ar7{pointer-events:all!important}.container_app_sidebar_in_use .bkK.nn,.inboxsdk__IpDkQtEZuh257muFXot6 .bkK.nn{width:auto!important;flex:1;min-width:0}.inboxsdk__IpDkQtEZuh257muFXot6 .bnl.nn{z-index:-1;position:absolute}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI{min-width:57px!important;flex-shrink:0}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI.app_sidebar_visible{min-width:321px!important}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI>.J-KU-Jg{display:block!important}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI .inboxsdk__jQiSbhX57v1JCl6fIbdb{display:none}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI.app_sidebar_visible .inboxsdk__jQiSbhX57v1JCl6fIbdb{display:block;float:left;height:100%;border-left:1px solid #e0e0e0;padding-left:16px;width:calc(100% - 74px);overflow:auto}.container_app_sidebar_in_use .inboxsdk__jQiSbhX57v1JCl6fIbdb .inboxsdk__ZsVjiThsnbCmCG_X1Vvn{width:calc(100% - 16px);padding-right:16px}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI.app_sidebar_visible .J-KU-Jz{width:auto;padding-right:50px}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon{margin:18px 18px 10px;border:0;background:0 0;height:20px;width:20px;overflow:hidden;padding:0;cursor:pointer;position:relative}.inboxsdk__z3cCBtGXYneog44Vf16J.sidebar_global_iconArea .inboxsdk__button_icon{margin-bottom:18px}body .inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon{overflow:visible}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon:hover::before,.inboxsdk__z3cCBtGXYneog44Vf16J .sidebar_button_container_active .inboxsdk__button_icon::before{content:"";background:#f1f3f4;position:absolute;inset:-10px -10px -10px -10px;border-radius:50%;z-index:0}.inboxsdk__z3cCBtGXYneog44Vf16J .sidebar_button_container_active .inboxsdk__button_icon::before{background:#e8eaed}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_iconImg{width:20px;height:20px;margin-top:0}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon .inboxsdk__button_iconImg{position:absolute;left:0;top:0;z-index:1}.inboxsdk__z3cCBtGXYneog44Vf16J .sidebar_button_container_active .inboxsdk__button_selectedIndicator{height:40px;width:3px;position:absolute;left:0;bottom:0;background-color:rgb(66 133 244);border-radius:0 3px 3px 0}body:not(.inboxsdk__sidebar_icons_right) .inboxsdk__z3cCBtGXYneog44Vf16J .sidebar_button_container_active .inboxsdk__button_selectedIndicator{left:unset;right:0;border-radius:3px 0 0 3px}.inboxsdk__z3cCBtGXYneog44Vf16J.sidebar_global_iconArea .sidebar_button_container_active .inboxsdk__button_selectedIndicator{bottom:8px}.brC-brG.companion_app_sidebar_visible{display:block!important}.bq9:not(.brC-brG).companion_app_sidebar_wrapper_visible{display:block!important}.WN9Ejb.br3.companion_app_sidebar_wrapper_visible{display:block!important}.companion_global_app_sidebar_visible .thread_app_sidebar{display:none}.companion_app_sidebar_visible:not(.companion_global_app_sidebar_visible) .global_app_sidebar,body.inboxsdk__custom_view_active .brC-aT5-aOt-ato-Kp-Jw [role=tablist]>div:not(:last-child){display:none}.nH.companion_container_app_sidebar_visible{width:calc(100% - 300px)!important}.companion_app_sidebar_visible .addon_sidebar~div:not(.addon_sidebar){display:none!important}.inboxsdk__lmkPHCz841PzU2vywMZI .inboxsdk__jQiSbhX57v1JCl6fIbdb.addon_sidebar{height:100%;overflow:auto}.inboxsdk__lmkPHCz841PzU2vywMZI .inboxsdk__jQiSbhX57v1JCl6fIbdb.addon_sidebar .inboxsdk__ZsVjiThsnbCmCG_X1Vvn{width:100%}.inboxsdk__lmkPHCz841PzU2vywMZI:not(.companion_app_sidebar_visible) .addon_sidebar{display:none}.inboxsdk__TFQRFr4aJVmDmx2llTVx{margin-left:0}.inboxsdk__RRnCd87hoA2uHeC1Z_FE .inboxsdk__iYzl6PjYB9v7KGQNbONH{padding:0 16px}.inboxsdk__lmkPHCz841PzU2vywMZI .bvq,.inboxsdk__lmkPHCz841PzU2vywMZI .bvq>div:last-child{display:block!important}.inboxsdk__cnd4jAy3zFUYdR_NdMxT .bvq>div:first-child{display:none!important}.inboxsdk__custom_view_element{overflow:auto}.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem){border-left-color:transparent}.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .bsU,.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .nU:not(.n1) .n0{font-weight:400}.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .TO{background:0 0}.inboxsdk__hide_addon_container{display:flex!important;flex-direction:row;width:100%!important}body[dir=rtl] .inboxsdk__hide_addon_container[dir=ltr]{flex-direction:row-reverse}.inboxsdk__hide_addon_container>.bkK.nn{width:auto!important;flex:1;min-width:0}.inboxsdk__hide_addon_container>.bnl.nn,.inboxsdk__navItem>.TO img.afM.afO~.aio>.bsU{display:none}.inboxsdk__navItem{font-size:14px}.inboxsdk__navItem:not(.Xr)>.V3[style]{flex-grow:0!important}.inboxsdk__navItem>.TO.n4{display:block;padding-left:0}.inboxsdk__collapsiblePanel .inboxsdk__navItem>.TO .TN.aik{padding-left:18px}.inboxsdk__collapsiblePanel .inboxsdk__navItem>.TO .qj{margin-right:14px}.inboxsdk__navItem>.TO.n4 .qj>.G-asx{margin-right:0}.inboxsdk__navItem>.TO .aio>.bsU:empty{display:none}.inboxsdk__navItem>.TO .qj:empty::after{background-color:rgb(118 118 118);border-radius:50%;content:"";height:18px;margin-left:1px;width:18px}.inboxsdk__navItem>.TO .qj[style*=border-color]:empty::after{border-color:inherit}.inboxsdk__navItem>.TO:hover .pM{display:flex;visibility:visible}.inboxsdk__navItem>.TO .afM{cursor:pointer}.inboxsdk__navItem>.TO img.afM.afO,.inboxsdk__navItem>.TO:hover .afM{display:block;visibility:visible}.inboxsdk__collapsiblePanel_loading_container,.inboxsdk__navItem>.TO:hover .bsU{display:none}.inboxsdk__navItem.inboxsdk__navItem_nonClickable>.TO:active{background-color:initial}.inboxsdk__navItem_hover .aj0,.inboxsdk__navItem_hover .p8{visibility:visible}.inboxsdk__appMenuItem .CL.V6::before,.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3::before{background-image:var(--background-image)}.inboxsdk__collapsiblePanel.apV.aJu .T-I.T-I-KE.L3::before{background-image:var(--background-image--hover)}.inboxsdk__appMenuItem.apV .CL.V6::before{background-image:var(--background-image--active)}.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3::before{background-size:24px}.inboxsdk__collapsiblePanel_loading_container.inboxsdk__collapsiblePanel_loading_container--active,.inboxsdk__shortcutHelp_table table.cf,.inboxsdk__shortcutHelp_table tbody tbody,table[role=presentation].inboxsdk__thread_view_with_custom_view>tr{display:block}.inboxsdk__navItem_link{cursor:pointer;margin-left:auto}.inboxsdk__navItem_link>a{margin-left:16px}.inboxsdk__navItem>.TO .inboxsdk__button{margin-right:0}[dir=rtl] .inboxsdk__navItem_link{left:-4px;right:initial}.inboxsdk__navItem_container .aio .inboxsdk__button{position:absolute;top:0;right:-30px}.inboxsdk__navItem_marker{position:absolute;left:0;padding-bottom:2px}.inboxsdk__expando{z-index:1}.aip .CK,.inboxsdk__navItem_link>a{color:#15c}.aip .CK:hover,.inboxsdk__navItem_link>a:hover{text-decoration:underline}.inboxsdk__navItem_container .aio.aip{white-space:nowrap}.WR[role=navigation] .inboxsdk__navItem .Yh:not(.inboxsdk__navItem_parent_accessory_button):empty{display:none}.WR[role=navigation] .inboxsdk__navItem .Yh:not(.inboxsdk__navItem_parent_accessory_button){background:0 0}.WR[role=navigation] .inboxsdk__navItem .Yh .inboxsdk__button_icon{display:none}.WR[role=navigation].bhZ:not(.bym) .inboxsdk__navItem .Yh{opacity:1}.WR[role=navigation].bhZ:not(.bym) .inboxsdk__navItem .Yh.inboxsdk__navItem_parent_accessory_button{background-image:none!important}.WR[role=navigation].bhZ:not(.bym) .inboxsdk__navItem .Yh:empty{background-color:rgb(32 33 36/71%);border-radius:50%;display:inherit;height:18px;margin-left:1px;width:18px}.WR[role=navigation].bhZ:not(.bym) .inboxsdk__navItem .Yh .inboxsdk__button_icon{display:inherit}.inboxsdk__custom_sections{margin-bottom:8px}.inboxsdk__custom_sections.Wc{padding:0;margin-bottom:0}.inboxsdk__resultsSection.inboxsdk__resultsSection_nonCollapsible .inboxsdk__resultsSection_title .Wp{visibility:hidden}.inboxsdk__custom_sections .Wg,.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection{padding-top:0}.inboxsdk__custom_sections.Wc .Wg{border-bottom:0;padding:0}.inboxsdk__results_collapsedContainer.Wg{height:auto}.inboxsdk__results_collapsedContainer>div{display:flex;flex-wrap:wrap;flex:1 0 100%}.inboxsdk__results_collapsedContainer>div>.inboxsdk__resultsSection_collapsed:first-child:last-child{flex:1;margin-right:0}.inboxsdk__results_collapsedContainer>div>.inboxsdk__resultsSection_collapsed:first-child:last-child>.inboxsdk__resultsSection_header{display:flex;align-items:center;flex:1}.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed{display:inline-block;margin-right:20px;display:inline-flex}.Wc .inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed{margin-right:0}.inboxsdk__resultsSection_collapsed .inboxsdk__resultsSection_header{padding-right:0}.inboxsdk__resultsSection_title{white-space:nowrap;cursor:pointer;display:inline-block;display:flex;align-items:center;height:48px}.Wc .inboxsdk__resultsSection_title{padding:3px 0 3px 8px}.inboxsdk__resultsSection_header{min-height:48px;line-height:48px}.inboxsdk__resultsSection_header_summaryText.Wm:last-child .amH{padding-right:0;margin-right:0}.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection_header_summaryText:last-child{margin-right:11px}.inboxsdk__custom_sections.Wc .J-JN-M-I{margin-right:13px}.inboxsdk__resultsSection .TB.TC{text-align:center;padding-left:0;padding-right:0}.inboxsdk__resultsSection .inboxsdk__resultsSection_loading{font-style:italic}.inboxsdk__resultsSection .inboxsdk__resultsSection_result_icon{height:15px;width:15px}.inboxsdk__resultsSection_label_iconHtml,.inboxsdk__resultsSection_result_iconHtml{display:flex;justify-content:center;align-items:center}.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA:hover>.xW{display:flex}.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA>.xW{max-width:none;flex-basis:auto}.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow .xT{align-items:center}.inboxsdk__resultsSection .xX{width:20ex}.inboxsdk__resultsSection tr .xW>span{overflow:hidden;display:block;text-overflow:ellipsis}.inboxsdk__resultsSection .V3{overflow:hidden;white-space:nowrap}.inboxsdk__resultsSection .at{position:relative}.inboxsdk__thread_row_label{flex-shrink:0;align-self:flex-end}.apv .inboxsdk__thread_row_label{align-self:flex-start}.inboxsdk__resultsSection_label_icon{height:11px;width:11px;position:absolute;top:2px;margin-left:4px;margin-top:1px}.inboxsdk__resultsSection .av,.inboxsdk__thread_row_label .av{overflow:hidden;text-overflow:ellipsis}.inboxsdk__resultsSection_label_icon+.av,.inboxsdk__thread_row_label .inboxsdk__button_icon+.av{margin-left:16px}.Wc .inboxsdk__resultsSection_footer{padding:3px 3px 3px 8px}.inboxsdk__tooltip .T-P{box-shadow:0 1px 3px rgb(0 0 0/20%);background-color:#fff;border:1px solid;border-color:#bbb #bbb #a8a8a8;padding:16px;z-index:1201!important}.inboxdk__tooltip_content.inboxsdk__tooltip .aRM,.inboxsdk__tooltip.inboxdk__tooltip_content .T-P,.inboxsdk__tooltip.inboxsdk__appButton_tooltip .T-P{padding:0}.inboxsdk__tooltip .aRM{outline:0;padding:13px 10px 16px;text-align:center;font:16px arial,sans-serif}.inboxsdk__tooltip .aRR{color:#333;font-size:18px;margin-top:13px}.inboxsdk__tooltip .aRQ{color:#777;font-size:13px;margin:3px 0 14px}.inboxsdk__tooltip{position:fixed;z-index:1300;transition:left 200ms ease,top 200ms ease}.inboxsdk__tooltip .T-P{position:relative;width:auto;max-width:500px}.inboxsdk__tooltip .inboxsdk__tooltip_arrow{position:fixed;z-index:1400;margin-top:-1px;transition:left 200ms ease,top 200ms ease}.inboxsdk__tooltip .inboxsdk__tooltip_close{user-select:none}.inboxsdk__tooltip .inboxsdk__button{margin-right:0}.inboxsdk__tooltip .inboxsdk__tooltip_image{max-height:300px;max-width:500px;overflow:hidden;height:auto}.inboxsdk__tooltip .inboxsdk__tooltip_image>img{max-height:300px;max-width:500px}.inboxsdk__attachmentCard img.aQG.aYB{max-width:178px;min-width:178px;min-height:118px}.inboxsdk__attachmentCard img.aZG.aYw{background:0 0}.aQw>.T-I.J-J5-Ji.L3{margin-top:5px}table.cf.wd.inboxsdk__shortcutHelp_table{margin-bottom:15px}.inboxsdk__shortcutHelp_table td.Dn{display:inline-block;width:50%}.inboxsdk__shortcutHelp_table tbody tbody tr{display:block;white-space:nowrap}.inboxsdk__shortcutHelp_table td.wg.Dn{display:inline-block;width:45%}.inboxsdk__shortcutHelp_table span.wb{margin-left:3px}.inboxsdk__shortcutHelp_table td.we.Dn{width:60%;white-space:normal}.inboxsdk__shortcutHelp_title img.inboxsdk__icon{height:21px;width:21px;vertical-align:middle;margin-right:10px;border-radius:4px}.asor.inboxsdk__custom_suggestion,.inboxsdk__custom_suggestion_iconHTML{display:flex;justify-content:center;align-items:center}.inboxsdk__custom_suggestion img{max-width:32px;max-height:32px}.inboxsdk__custom_suggestion_iconHTML{position:absolute;left:8px;height:32px;width:43px}.gstq_d .inboxsdk__custom_suggestion_iconHTML{margin-top:-8px}.inboxsdk__appButton{margin-right:8px}.inboxsdk__appButton+.inboxsdk__appButton{margin-left:16px}.inboxsdk__appButton.inboxsdk__appButton_noGPlus{margin-right:0}.inboxsdk__appButton .inboxsdk__button_icon{margin-right:5px;position:relative}.inboxsdk__appButton a{color:#404040;text-decoration:none;line-height:24px}.inboxsdk__appButton.inboxsdk__appButton_noGPlus a{line-height:30px}.inboxsdk__appButton a:hover{text-decoration:underline;color:#000}.inboxsdk__gmail_dark_theme .inboxsdk__appButton a{color:#eee}.inboxsdk__gmail_dark_theme .inboxsdk__appButton a:hover{color:#fff}.inboxsdk__appButton_tooltip{outline:0;transition:none;animation:gb__a .2s}.inboxsdk__appButton_tooltip .inboxsdk__tooltip_close,.inboxsdk__searchIsNarrow .streak__appToolbarButton_title{display:none}.inboxsdk__tooltip.inboxsdk__appButton_tooltip .aRM{padding:0;white-space:initial;text-align:center;font:16px arial,sans-serif}.inboxsdk__tooltip.inboxsdk__appButton_tooltip .inboxsdk__tooltip_arrow{transform-origin:top;transform:rotateZ(180deg);margin-top:9px}.inboxsdk__custom_message_view{display:flex;padding-top:20px;padding-bottom:20px;border-top:1px solid #efefef;border-collapse:collapse}.inboxsdk__custom_message_view_hidden{display:none}.h7.ie+.inboxsdk__custom_message_view{margin-top:5px}.kQ+.inboxsdk__custom_message_view,.kx+.inboxsdk__custom_message_view{margin-top:1px}.inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed{cursor:pointer}.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon{padding-left:16px;padding-right:16px;flex-shrink:0}.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon img{height:32px;width:32px;border-radius:50%}.inboxsdk__custom_message_view .inboxsdk__custom_message_view_content{width:100%;min-width:0}.inboxsdk__custom_message_view .inboxsdk__custom_message_view_header{cursor:pointer}.inboxsdk__custom_message_view_app_notice_content{position:relative;z-index:1;align-items:center;display:flex;font-size:.75rem!important;justify-content:flex-start;margin-left:0;padding:0;top:0}.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container{position:relative;width:auto!important;min-width:32px}.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container:hover::before{content:none!important}.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container>span:first-child{display:none}.inboxsdk__custom_message_view_app_notice_container::before{position:absolute}.inboxsdk__custom_message_view_app_notice_content>*{color:#555}table[role=presentation].inboxsdk__thread_view_with_custom_view{table-layout:fixed}.inboxsdk__butterbar.inboxsdk__butterbar_error{background-color:#c53929!important}.inboxsdk__butterbar.inboxsdk__butterbar_error [role=button]{color:#fff}.inboxsdk__butterbar.inboxsdk__butterbar_error [role=button]::before{background:rgb(255 255 255/8%)}.inboxsdk__support_menuItem:hover{background-color:#eee;outline:1px dashed transparent}.inboxsdk__compose_addressList{display:flex!important}.inboxsdk__linkPopOver_section_container{position:absolute;width:100%;left:0;margin-top:8px;box-sizing:border-box}.VRezbc.phnWcc .inboxsdk__linkPopOver_section_container{padding:0 5px}.inboxsdk__linkPopOver_section{width:100%;background:#fff;border:1px solid;border-color:#bbb #bbb #a8a8a8;font:13px arial,sans-serif;padding:5px 8px;margin-bottom:5px;box-sizing:border-box;box-shadow:0 1px 3px rgb(0 0 0/20%)}.T-I.J-J5-Ji.T-I-ax7.inboxsdk__button .asa::after{width:auto}.inboxsdk__hide_filter_toolbar .G6[role=toolbar],.inboxsdk__hide_filter_toolbar .biW[data-srm=email]{display:none}.inboxsdk__hide_filter_toolbar .G-atb.PY{min-height:32px!important;height:32px!important}', "", { "version": 3, "sources": ["webpack://./src/platform-implementation-js/style/gmail.css", "<no source>"], "names": [], "mappings": "AAAA,wBACE,yBACF,CAEA,wBACE,WAAY,CACZ,UAAW,CACX,UAAY,CACZ,iBAAkB,CAClB,cAAgB,CAChB,QAAY,CACZ,SAAU,CACV,sBAAuB,CACvB,SAAa,CACb,cACF,CAEA,4DAEE,SACF,CAEA,sCACE,+BACF,CAEA,gCACE,iBAAkB,CAClB,iBAAkB,CAClB,yBAA0B,CAC1B,WAAY,CACZ,WACF,CAEA,+BACE,WAAY,CACZ,4FAA6F,CAC7F,iBAAkB,CAClB,WAAY,CACZ,UAAW,CACX,KAAM,CACN,MACF,CAEA,+BACE,+BACE,4FAA6F,CAC7F,uBACF,CACF,CAEA,gCACE,YACF,CAIA,iCACE,kBAAmB,CACnB,iBAAkB,CAClB,cAAe,CACf,YAAa,CACb,WAAY,CACZ,QAAS,CACT,MAAO,CACP,UAAW,CACX,mBACF,CAEA,uBACE,iBAAkB,CAClB,mBAAoB,CACpB,KAAM,CACN,QAAS,CACT,OAAQ,CACR,WAAY,CACZ,oDAIY,CACZ,YAAa,CACb,qBAAsB,CACtB,qBAAsB,CACtB,SAAa,CACb,2DAE6B,CAC7B,0BAA2B,CAC3B,kDACF,CAEA,mEACE,WACF,CAEA,wCACE,cACF,CAEA,4BACE,wBAAyB,CACzB,+BAAgC,CAChC,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,aACF,CAEA,oDACE,iBAAkB,CAClB,aACF,CAEA,wBACE,eAAgB,CAChB,sBAAuB,CACvB,kBAAmB,CACnB,yDAKF,CAIA,0BACE,kBAAmB,CACnB,cAAe,CACf,YAAa,CACb,WAAY,CACZ,QAAS,CACT,MAAO,CACP,UAAW,CACX,4BAA6B,CAC7B,wDACF,CAEA,2CACE,kCAAqC,CACrC,uDACF,CAEA,oDACE,UACF,CAIA,gCACE,YAAa,CACb,qBACF,CAEA,wDACE,iBAAkB,CAClB,WAAY,CACZ,UACF,CAEA,gCACE,WACF,CAEA,gCACE,eAAgB,CAChB,0BAEY,CACZ,eAAgB,CAChB,qBACF,CAEA,gCACE,kBAAmB,CACnB,YAAa,CACb,gBAAiB,CACjB,cACF,CAEA,qGAEE,4BACF,CAEA,oMAIE,wBACF,CAEA,gCACE,WAAY,CACZ,eAAgB,CAChB,sBACF,CAEA,+FAEE,WACF,CAEA,gCACE,gBAAiB,CACjB,qBAAsB,CACtB,6DAIY,CACZ,oBACF,CAEA,+FAEE,YACF,CAEA,qIAGE,iBAAkB,CAClB,KAAQ,CACR,MAAS,CACT,UAAW,CACX,WAAY,CACZ,qEAEF,CAEA,gCACE,UAAW,CACX,WAAY,CACZ,qBAAsB,CAEtB,mBAAoB,CACpB,sBAAuB,CACvB,kBAAmB,CACnB,eACF,CAEA,oEAEE,UAAW,CACX,WACF,CAEA,gCACE,MAAO,CACP,gBAAiB,CACjB,iBACF,CAEA,+FAEE,kBAAmB,CACnB,cACF,CAEA,gCACE,eAAgB,CAChB,gBAAiB,CACjB,uEACyB,CACzB,QAAY,CACZ,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,gDAEiB,CACjB,SAAa,CACb,UAAY,CACZ,cACF,CAEA,qMAKE,UACF,CAEA,+FAEE,mBACF,CAEA,gCACE,kBACF,CAEA,gEACE,iBACF,CAEA,0HAEE,SACF,CAMA,yBACE,QAAS,CACT,WAAY,CACZ,aAAc,CACd,kBAAmB,CACnB,cACF,CAEA,yDACE,oBAAqB,CACrB,qBACF,CAEA,kCACE,eAAiB,CACjB,cACF,CAEA,2BACE,UAAY,CAEZ,kBAAmB,CACnB,iBAAkB,CAClB,oBAAqB,CACrB,iCAAoC,CACpC,WAAY,CACZ,cAAe,CAEf,eACF,CAEA,mCACE,oBACF,CAEA,6DACE,YACF,CAEA,gCACE,kBAAmB,CACnB,kBAAmB,CACnB,yBACF,CAIA,wCACE,4BACF,CAEA,uCACE,4BAA6B,CAC7B,yBACF,CAIA,yBACE,gBAAiB,CACjB,cACF,CAGA,0BACE,mBACF,CAEA,iBACE,cACF,CAEA,4CACE,WACF,CAEA,8CACE,eACF,CAEA,uBACE,oBACF,CAEA,0BACE,WAAY,CACZ,UAAW,CACX,qBAAsB,CACtB,eAAgB,CAEhB,cAAe,CACf,gBAAiB,CACjB,sBACF,CCjZA,+DDmaE,qEAAwE,CAExE,6DAAgE,CAChE,4BAA6B,CAE7B,eAAiB,ECxanB,ADmZA,iCACE,gCAAmC,CACnC,wBAAyB,CAMzB,UAEF,CAEA,8BACE,+BAAkC,CAClC,wBAAyB,CAMzB,+BAEF,CAEA,+BACE,+BAAiC,CACjC,kBAAmB,CACnB,4BAA6B,CAC7B,4BAA6B,CAC7B,UAAW,CACX,gBACF,CAGA,8BACE,OAAQ,CACR,QACF,CAEA,4BACE,wBACF,CAEA,4CACE,UAAW,CACX,WACF,CAEA,gBACE,aAAc,CACd,cAAe,CACf,SAAY,CACZ,gBAAiB,CACjB,eAAgB,CAGhB,SAAU,CACV,cAAe,CACf,cAAe,CACf,QAAS,CACT,SACF,CAEA,uCACE,SAAU,CACV,oGAGiC,CACjC,wBAA0B,CAC1B,+BAAkC,CAClC,eAAgB,CAChB,SACF,CAEA,uCACE,WAAY,CACZ,cAAe,CACf,UACF,CAOA,yBAEE,WAAY,CACZ,UAAW,CACX,WAOF,CAXA,uDAKE,mBAAoB,CACpB,kBAAmB,CACnB,sBAAuB,CACvB,qBAAsB,CACtB,SAAa,CACb,gBAAkB,CACpB,CAEA,kDACE,eACF,CAEA,gDACE,WACF,CAEA,2LAGE,SACF,CAEA,iCACE,UAAW,CACX,aAAc,CACd,SAAU,CACV,iBAAkB,CAClB,wBAA0B,CAC1B,kDAAwD,CACxD,aAAsB,CACtB,cAAgB,CAChB,qBAAsB,CACtB,kBAAmB,CACnB,qCAAuC,CACvC,iBACF,CAEA,uCACE,mCAAsC,CACtC,QAAY,CACZ,eAAgB,CAChB,SAAU,CACV,kBACF,CAEA,uGAEE,oCAAuC,CACvC,QAAY,CACZ,eAAgB,CAChB,SAAU,CACV,kBACF,CAEA,gHAGE,cACF,CAEA,8BACE,wBAAyB,CACzB,UAAY,CACZ,WAAY,CACZ,UAAW,CAGX,iBAAkB,CAKlB,eAAgB,CAChB,cAAgB,CALlB,CAQA,6DAME,UAAY,CAJd,CAOA,iGAEE,wBAAyB,CACzB,4EAEqC,CACrC,QACF,CAEA,mCACE,gBACF,CAEA,iCACE,kBAAmB,CAKnB,eAAiB,CAJnB,CAOA,wDACE,WAAY,CACZ,UAAW,CACX,mBAAoB,CACpB,gBACF,CAEA,2DACE,WAAY,CACZ,UAAW,CACX,mBAAoB,CACpB,WACF,CAEA,uEACE,gBACF,CAGA,0DACE,kBACF,CAEA,wCACE,iBAAkB,CAClB,WAAY,CAEZ,UAAW,CAEX,iBAAkB,CAClB,+FAGiC,CAMjC,kBAAkB,CAClB,eAAgB,CAChB,eAAiB,CACjB,QAAU,CAPZ,CAUA,uEACE,SACF,CAEA,6EACE,aAAgB,CAChB,cACF,CAEA,+DACE,cACF,CAEA,iEACE,WACF,CAOA,qDACE,WACF,CAEA,6DACE,SAAU,CAKV,aAAiB,CAJnB,CAOA,kGACE,YACF,CAIA,uCACE,oBAAqB,CACrB,iBAAkB,CAClB,SAAU,CAEV,YAAa,CACb,SAAU,CAEV,qBAAsB,CAKtB,WAAY,CACZ,eAAiB,CALnB,CAQA,0IAGE,sCACF,CAEA,2FAEE,YACF,CAEA,kDACE,kBACF,CAEA,+CACE,UACF,CAEA,sCACE,sBACF,CAEA,sCACE,uBACF,CAEA,+CACE,iBAAkB,CAClB,gBACF,CAEA,6CACE,4BACF,CAEA,yDACE,eACF,CAMA,+BACE,4BAA6B,CAC7B,wDAAynF,CACznF,qBAAsB,CACtB,2BAA4B,CAC5B,iCAAkC,CAClC,WAAY,CACZ,UAAW,CACX,QAAY,CACZ,qBAAsB,CACtB,cAAe,CAEf,WAAY,CACZ,UACF,CAIA,oDACE,oBAAqB,CACrB,gBACF,CAEA,yGAEE,WAAY,CACZ,UACF,CAEA,mDACE,oBAAqB,CACrB,cAAe,CACf,eAAgB,CAChB,iBACF,CAEA,6BACE,SAAU,CACV,WAAY,CACZ,UAAW,CACX,SACF,CAEA,oDACE,eACF,CAEA,kGACE,iBACF,CAEA,uDACE,WAAY,CACZ,UAAW,CACX,YACF,CAEA,wBACE,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,eAAgB,CAChB,cAAe,CAGf,6DAAgE,CAEhE,qDAAwD,CACxD,+BAAkC,CAClC,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,gBAAiB,CACjB,cAAe,CACf,iBAAkB,CAClB,cAAe,CACf,eAAiB,CACjB,iBAAkB,CAClB,kBAAmB,CACnB,oBACF,CAEA,8BACE,wBAAyB,CACzB,SACF,CAEA,+BACE,yCACF,CAEA,8BACE,kCAAqC,CACrC,wBAAyB,CAEzB,6DAAgE,CAEhE,qDAAwD,CACxD,oBACF,CAEA,+BACE,UAAW,CACX,iBAAkB,CAClB,SAAU,CACV,OAAQ,CACR,eAAgB,CAChB,yHACuG,CACvG,SAAU,CACV,UAAW,CACX,WACF,CAEA,kCACE,eACF,CAEA,kFAEE,YACF,CAMA,6CAEE,eAAgB,CAEhB,WACF,CALA,sCAEE,eAAgB,CAChB,UAAW,CACX,UAAY,CACd,CAEA,6CACE,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,iBACF,CAMA,cACE,aACF,CAEA,+CACE,aAAc,CACd,WACF,CAEA,mDACE,WACF,CAEA,yDACE,SACF,CAEA,uDAGE,OAAU,CACV,QACF,CAEA,sCACE,qBACF,CAOA,sDACE,WACF,CAEA,mCACE,OACF,CAEA,0CACE,OAAQ,CACR,eAAgB,CAChB,cACF,CAIA,uHAEE,WAAY,CACZ,UACF,CAGA,mCACE,UAAW,CACX,gBAAiB,CACjB,iBAAkB,CAClB,WAAY,CACZ,aACF,CAGA,6DACE,kBACF,CAEA,kFAIE,eACF,CAEA,qHAGE,iBACF,CAGA,iJAME,gBAAiB,CACjB,eAAgB,CAChB,YACF,CAEA,iKASE,gBACF,CAEA,6EAEE,UAAW,CACX,WAAY,CACZ,iBACF,CAEA,0CACE,eAAgB,CAChB,mBAAoB,CACpB,sBAAuB,CACvB,kBAAmB,CACnB,kBACF,CAEA,6CACE,iBAAkB,CAClB,QAAS,CACT,UACF,CAIA,SACE,cACF,CAEA,4BACE,mBAAoB,CACpB,kBAAmB,CACnB,sBAAuB,CACvB,WACF,CAEA,+BACE,WAAY,CACZ,UAAW,CAKX,aAAe,CAJjB,CAOA,oCACE,oBAAqB,CACrB,qBAAsB,CACtB,eACF,CAGA,yCACE,QACF,CAEA,SAKE,mBACF,CAEA,wCACE,iBAAkB,CAClB,WAAY,CACZ,KAAQ,CACR,eAAiB,CACjB,WAAY,CACZ,QAAW,CACX,4BAA6B,CAC7B,6BAAgC,CAChC,aACF,CAEA,2EACE,aAAc,CACd,eAAgB,CAChB,WACF,CAEA,uCACE,mBAAqB,CACrB,eACF,CAEA,uCACE,kBAAmB,CACnB,aAAc,CACd,sBAA4B,CAC5B,UAAY,CACZ,+BACF,CAEA,qCACE,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,QAAS,CACT,SAAU,CACV,aACF,CAEA,uCACE,iBAAkB,CAClB,QAAW,CACX,UAAW,CACX,qCAAsC,CACtC,aACF,CAEA,qFAEE,mBACF,CAEA,gCACE,QAAS,CACT,WAAY,CACZ,QACF,CAEA,6BACE,cAAgB,CAChB,iBACF,CAGA,qCACE,mBACF,CAEA,mCACE,eACF,CAKA,qFAGE,qBACF,CAEA,wCACE,aACF,CAIA,uBACE,4BACF,CAKA,gFAGE,yBACF,CAEA,yEACE,gEACF,CAGA,8EACE,qEACF,CAKA,+EAGE,qBACF,CAEA,yBACE,YACF,CAEA,0BACE,wBAAyB,CACzB,iBAAkB,CAClB,WAAY,CACZ,iBACF,CAEA,+BACE,WAAY,CACZ,mBACF,CAEA,gCACE,aACF,CAEA,iDACE,uBACF,CAEA,uZAIE,sBACF,CAoBA,qDACE,aACF,CAEA,2CACE,iBAAkB,CAClB,kBACF,CAEA,gDACE,kBAAmB,CACnB,QAAY,CACZ,mBAAoB,CACpB,sBAAuB,CACvB,iBAAkB,CAClB,SAAU,CACV,kCAAmC,CACnC,uEAA6E,CAC7E,cAAe,CACf,oBAAsB,CACtB,cAAgB,CAChB,qBAAsB,CACtB,aAAc,CACd,cAAe,CACf,eAAgB,CAChB,SAAa,CACb,aACF,CAEA,4DAEE,WAAY,CACZ,UAAW,CACX,eACF,CAMA,yBACE,OAAU,CACV,QACF,CAEA,4BACE,cAAe,CACf,aAAsB,CACtB,WAAY,CACZ,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,uBACF,CAEA,yBACE,eAAgB,CAChB,kBACF,CAEA,wFAEE,eACF,CAEA,yHAIE,eAAkB,CAClB,mBACF,CAEA,uBACE,SAAa,CACb,cACF,CAEA,uDACE,iBAAkB,CAClB,gBAAiB,CACjB,UAAW,CACX,eACF,CAEA,+EACE,iBACF,CAEA,2EACE,YACF,CAEA,+EACE,aACF,CAEA,6EACE,YACF,CAEA,8DACE,QAAW,CACX,YACF,CAEA,gKAGE,cAAiB,CACjB,eACF,CAEA,gFAEE,eACF,CAEA,kFAEE,gBACF,CAEA,sEACE,YACF,CAEA,kEACE,MAAO,CACP,OAAQ,CACR,oBACF,CAQA,4DAEE,mBAAqB,CAMrB,cAAgB,CALlB,CAUA,oCACE,kBACF,CAEA,sCACE,mBACF,CAEA,wCACE,oBAAqB,CACrB,UACF,CAEA,qBACE,iBAAkB,CAClB,eAAgB,CAChB,YAAa,CACb,kBAAmB,CACnB,mBAAoB,CACpB,oBACF,CAEA,2BACE,kBAAmB,CACnB,qBAAsB,CACtB,gBAAiB,CACjB,kCAAsC,CACtC,eAAgB,CAMhB,cAAgB,CAJlB,CAOA,qHAEE,yBACF,CAEA,8BACE,iBAAkB,CAClB,MAAO,CACP,SAAU,CACV,cAAe,CACf,eAAgB,CAChB,qBAAsB,CACtB,WAAY,CACZ,cAAe,CACf,2BAA4B,CAC5B,aAAc,CACd,kBACF,CAEA,sDACE,UAAY,CACZ,gBAAiB,CACjB,eAAgB,CAChB,kBAAmB,CACnB,oBAAqB,CACrB,yBACF,CAEA,iCACE,iBAAkB,CAClB,mBAAoB,CACpB,cAAiB,CACjB,kBAAmB,CACnB,eAAgB,CAChB,sBACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,iBAAkB,CAClB,cACF,CAEA,sDACE,eACF,CAEA,kCACE,WAAY,CACZ,UAAW,CACX,iBAAkB,CAClB,OACF,CAEA,gEACE,WAAY,CACZ,UAAW,CACX,eACF,CAEA,sEACE,mCACF,CAEA,gEACE,wBACF,CAEA,wCACE,SACF,CAEA,+aAQE,YACF,CAEA,2DACE,eAAgB,CAChB,QACF,CAEA,6BACE,eAAgB,CAChB,wBAAyB,CACzB,eAAiB,CACjB,eAAgB,CAChB,eAAgB,CAChB,eACF,CAEA,2DACE,WACF,CAEA,6DACE,YAAe,CACf,WACF,CAMA,eACE,UACF,CAEA,qEACE,YACF,CAEA,sCACE,UACF,CAEA,uEACE,WACF,CAEA,oBACE,UAAW,CACX,WAAY,CACZ,yBAA0B,CAC1B,yBAA0B,CAC1B,oBAAqB,CACrB,2BACF,CAEA,wBACE,WAAY,CACZ,UAAW,CACX,eAAgB,CAChB,cACF,CAEA,oBACE,OACF,CAEA,2CACE,yBACF,CAGA,iEAEE,YACF,CAEA,mFAIE,qBACF,CAMA,oDACE,0BAEY,CACZ,eACF,CAEA,kDACE,eAAgB,CAChB,kBAAmB,CACnB,+BACF,CAMA,qCACE,yCACF,CAEA,wDACE,yBAA2B,CAC3B,qBACF,CAEA,gCAGE,oBACF,CAGA,gCACE,eACF,CAGA,gCACE,kBACF,CAEA,+FACE,aACF,CAIA,oEAEE,YAAa,CACb,kBAAmB,CACnB,UACF,CAEA,uHAEE,0BACF,CAMA,+EAEE,4BACF,CAGA,4NAEE,6BACF,CASA,8EAEE,wBACF,CAGA,sBACE,4BACF,CAEA,8EAEE,oBAAsB,CACtB,MAAO,CACP,WACF,CAGA,wCACE,UAAW,CACX,iBACF,CAEA,8DACE,wBAA0B,CAC1B,aACF,CAEA,kFACE,yBACF,CAEA,uEACE,uBACF,CAEA,8FAGE,YACF,CAEA,kHAGE,aAAc,CACd,UAAW,CACX,WAAY,CACZ,6BAA8B,CAC9B,iBAAkB,CAClB,uBAAwB,CACxB,aACF,CAEA,8FAGE,uBAAwB,CACxB,kBACF,CAEA,2FAGE,UAAW,CACX,kBACF,CAEA,uDACE,qBAA2B,CAC3B,QAAY,CACZ,cAAuB,CACvB,WAAY,CACZ,UAAW,CACX,eAAgB,CAChB,SAAU,CACV,cAAe,CACf,iBACF,CAEA,+EACE,kBACF,CAEA,4DACE,gBACF,CAEA,qKAIE,UAAW,CACX,kBAAmB,CACnB,iBAAkB,CAClB,6BAA8B,CAC9B,iBAAkB,CAClB,SACF,CAEA,gGAGE,kBACF,CAEA,0DACE,UAAW,CACX,WAAY,CACZ,YACF,CAEA,iFACE,iBAAkB,CAClB,MAAS,CACT,KAAQ,CACR,SACF,CAEA,qGAGE,WAAY,CACZ,SAAU,CACV,iBAAkB,CAClB,MAAS,CACT,QAAW,CACX,gCAAiC,CACjC,yBACF,CAGA,8IAIE,UAAW,CACX,OAAQ,CACR,yBACF,CAEA,6HAGE,UACF,CAKA,uCACE,uBACF,CAEA,yDACE,uBACF,CAGA,kDACE,uBACF,CAEA,0DACE,YACF,CAEA,2LAEE,YACF,CAEA,4CACE,kCACF,CAEA,sEACE,sBACF,CAEA,8EACE,WAAY,CACZ,aACF,CAEA,8GAGE,UACF,CAEA,mFACE,YACF,CAGA,gCACE,aACF,CAEA,gEACE,cACF,CAWA,yFAEE,uBACF,CAGA,qDACE,sBACF,CAMA,+BACE,aACF,CAMA,2DACE,6BACF,CAEA,4IACE,eACF,CAMA,+DACE,cACF,CAEA,gCACE,sBAAwB,CACxB,kBAAmB,CACnB,oBACF,CAEA,uDACE,0BACF,CAEA,wCACE,oBAAsB,CACtB,MAAO,CACP,WACF,CAEA,qFACE,YACF,CAEA,mBACE,cACF,CAMA,uCACE,qBACF,CAEA,0BACE,aAAc,CACd,cACF,CAGA,2DACE,iBACF,CAGA,uDACE,iBACF,CAIA,qCACE,cACF,CAEA,uCACE,YACF,CAEA,wCACE,iCAAkC,CAClC,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,eAAgB,CAChB,UACF,CAEA,6DACE,oBACF,CAEA,iCACE,YAAa,CACb,kBACF,CAEA,4BACE,cACF,CAEA,qEACE,aAAc,CACd,kBACF,CAcA,gFACE,YACF,CAEA,6DACE,wBACF,CAEA,2DAEE,kBACF,CAEA,yFAEE,wCACF,CAEA,2DACE,+CACF,CAEA,0CACE,gDACF,CAEA,mDACE,oBACF,CAMA,uPACE,aACF,CAEA,wBACE,cAAe,CACf,gBACF,CAEA,0BACE,gBACF,CAEA,yCACE,cACF,CAEA,kCACE,SAAU,CACV,aACF,CAEA,oDACE,iBAAkB,CAClB,KAAQ,CACR,WACF,CAEA,0BACE,iBAAkB,CAClB,MAAS,CACT,kBACF,CAEA,mBACE,SACF,CAEA,mCAEE,UACF,CAEA,+CAEE,yBACF,CAEA,sCACE,kBACF,CAIA,kGAGE,YACF,CAEA,4FAGE,cACF,CAEA,mEAIE,YACF,CAMA,0DAGE,SACF,CAEA,oGAGE,+BACF,CAEA,gEAGE,kCAAqC,CACrC,iBAAkB,CAClB,eAAgB,CAChB,WAAY,CACZ,eAAgB,CAChB,UACF,CAEA,iFAIE,eACF,CAQA,2BAWE,gBAAkB,CATpB,CAEA,8BACE,SAAY,CACZ,eACF,CAOA,sGAGE,iBACF,CAEA,uFACE,aACF,CAMA,kCACE,eAAgB,CAChB,SACF,CAIA,yCACE,WACF,CAEA,0CACE,YAAa,CACb,cAAe,CACf,aACF,CAKA,qGAGE,MAAO,CACP,cACF,CAEA,sIAIE,YAAa,CACb,kBAAmB,CACnB,MACF,CAIA,6DACE,oBAAqB,CACrB,iBAAkB,CAKlB,kBAAoB,CAJtB,CAOA,iEACE,cACF,CAGA,qEACE,eACF,CAEA,gCACE,kBAAmB,CACnB,cAAe,CACf,oBAAqB,CAKrB,YAAa,CACb,kBAAmB,CACnB,UAAY,CANd,CASA,oCACE,qBACF,CAEA,iCACE,eAAgB,CAChB,gBACF,CAEA,gEACE,eAAkB,CAClB,cACF,CAEA,sFAEE,iBACF,CAEA,wCACE,iBACF,CAEA,iCACE,iBAAkB,CAKlB,cAAe,CACf,eACF,CAEA,4DACE,iBACF,CAEA,gEACE,WAAY,CACZ,UACF,CAEA,mFAEE,YAAa,CACb,sBAAuB,CACvB,kBACF,CAEA,0EAEE,YACF,CAEA,oEACE,cAAe,CACf,eACF,CAEA,iEACE,kBACF,CAEA,8BACE,UACF,CAEA,sCACE,eAAgB,CAChB,aAAc,CACd,sBACF,CAEA,8BACE,eAAgB,CAChB,kBACF,CAEA,8BACE,iBACF,CAEA,4BACE,aAAc,CAMd,kBAAoB,CAJtB,CAQA,iCACE,qBACF,CAEA,qCACE,WAAY,CACZ,UAAW,CACX,iBAAkB,CAClB,OAAQ,CACR,eAAgB,CAKhB,aAAe,CAJjB,CAOA,8DAGE,eAAgB,CAChB,sBACF,CAEA,gGAEE,gBACF,CAEA,qCACE,uBACF,CAQA,wBACE,mCAAsC,CACtC,qBAAsB,CACtB,gBAAiB,CACjB,8BAA+B,CAC/B,YAAa,CAEb,sBACF,CAEA,sJACE,SACF,CAEA,wBACE,SAAa,CACb,sBAAuB,CACvB,iBAAkB,CAClB,0BAGF,CAMA,wBACE,UAAW,CACX,cAAe,CACf,eACF,CAEA,wBACE,UAAW,CACX,cAAe,CACf,iBACF,CAIA,mBACE,cAAe,CACf,YAAa,CACb,yCAGF,CAGA,wBACE,iBAAkB,CAClB,UAAW,CACX,eACF,CAEA,4CACE,cAAe,CACf,YAAa,CACb,eAAgB,CAChB,yCAGF,CAEA,4CACE,gBACF,CAEA,qCACE,cACF,CAEA,4CACE,gBAAiB,CACjB,eAAgB,CAChB,eAAgB,CAChB,WACF,CAEA,gDACE,gBAAiB,CACjB,eACF,CAMA,sCACE,eAAgB,CAChB,eAAgB,CAChB,gBACF,CAEA,sCACE,cACF,CAIA,qBACE,cACF,CAMA,yCACE,kBACF,CAEA,oCACE,oBAAqB,CACrB,SACF,CAUA,6CACE,aAAc,CACd,kBACF,CAEA,uCACE,oBAAqB,CACrB,SACF,CAEA,sCACE,eACF,CAEA,uCACE,SAAU,CACV,kBACF,CAEA,iDACE,WAAY,CACZ,UAAW,CACX,qBAAsB,CACtB,iBAAkB,CAClB,iBACF,CAMA,wEACE,YAAa,CACb,sBAAuB,CACvB,kBACF,CAEA,iCACE,cAAe,CACf,eACF,CAEA,sCAIE,iBAAkB,CAClB,QAAS,CACT,WAAY,CACZ,UACF,CAGA,8CACE,eACF,CAMA,qBACE,gBACF,CAEA,0CACE,gBACF,CAEA,iDACE,cACF,CAEA,4CACE,gBAAiB,CACjB,iBACF,CAEA,uBACE,aAAc,CACd,oBAAqB,CACrB,gBACF,CAEA,mDACE,gBACF,CAEA,6BACE,yBAA0B,CAC1B,UACF,CAEA,mDACE,UACF,CAEA,yDACE,UACF,CAEA,6BACE,SAAa,CACb,eAAgB,CAChB,mBACF,CAEA,gHACE,YACF,CAMA,oDACE,SAAY,CACZ,mBAAoB,CACpB,iBAAkB,CAClB,0BAGF,CAEA,wEACE,oBAAqB,CACrB,yBAA0B,CAC1B,cACF,CAcA,+BACE,YAAa,CACb,gBAAiB,CACjB,mBAAoB,CACpB,4BAA6B,CAC7B,wBACF,CAEA,sCACE,YACF,CAGA,sCACE,cACF,CAGA,sEAEE,cACF,CAEA,uEACE,cACF,CAEA,mEACE,iBAAkB,CAClB,kBAAmB,CACnB,aACF,CAEA,uEACE,WAAY,CACZ,UAAW,CACX,iBACF,CAEA,sEACE,UAAW,CACX,WACF,CAEA,qEACE,cACF,CAEA,kDACE,iBAAkB,CAGlB,SAAU,CAWV,kBAAmB,CACnB,YAAa,CACb,0BAA6B,CAC7B,0BAA2B,CAC3B,aAAc,CACd,SAAY,CACZ,IAAM,CAhBR,CAEA,2GACE,iBAAkB,CAClB,oBAAsB,CACtB,cACF,CAaA,yHACE,sBACF,CAEA,4HAEE,YACF,CAEA,4DACE,iBACF,CAEA,oDACE,UACF,CAEA,gEACE,kBACF,CAUA,+CACE,kCACF,CAEA,6DACE,UACF,CAEA,qEACE,8BACF,CAKA,kCACE,qBAAsB,CACtB,8BACF,CAEA,+BACE,sBACF,CAKA,yCACE,iBAAkB,CAClB,UAAW,CACX,MAAO,CACP,cAAe,CACf,qBACF,CAGA,wDACE,aACF,CAEA,+BACE,UAAW,CACX,eAAgB,CAChB,gBAAiB,CACjB,8BAA+B,CAC/B,0BAEY,CACZ,eAAgB,CAChB,iBAAkB,CAClB,qBAAsB,CACtB,mCACF,CASA,kDACE,UACF,CAGA,qGAEE,YACF,CAEA,yCACE,yBAA2B,CAC3B,qBACF", "sourcesContent": [`.inboxsdk__notransition {
  transition: none !important;
}

.inboxsdk__close_button {
  height: 24px;
  width: 24px;
  opacity: 0.7;
  position: relative;
  background: none;
  border: none;
  padding: 0;
  box-sizing: content-box;
  outline: none;
  cursor: pointer;
}

.inboxsdk__close_button:focus,
.inboxsdk__close_button:hover {
  opacity: 1;
}

.inboxsdk__close_button:focus::before {
  background-color: rgb(0 0 0 / 12%);
}

.inboxsdk__close_button::before {
  border-radius: 50%;
  position: absolute;
  inset: -4px -4px -4px -4px;
  padding: 4px;
  content: ' ';
}

.inboxsdk__close_button::after {
  content: ' ';
  background: url(https://www.gstatic.com/images/icons/material/system/1x/close_black_24dp.png);
  position: absolute;
  height: 24px;
  width: 24px;
  top: 0;
  left: 0;
}

@media (min-resolution: 192dpi) {
  .inboxsdk__close_button::after {
    background: url(https://www.gstatic.com/images/icons/material/system/2x/close_black_24dp.png);
    background-size: contain;
  }
}

:local(.app_sidebar_waiting_platform) {
  display: none;
}

/* drawer */

.inboxsdk__drawer_view_container {
  visibility: visible;
  direction: initial;
  position: fixed;
  height: 100vh;
  width: 100vw;
  bottom: 0;
  left: 0;
  z-index: 51;
  pointer-events: none;
}

.inboxsdk__drawer_view {
  position: absolute;
  pointer-events: auto;
  top: 0;
  bottom: 0;
  right: 0;
  width: 452px;
  font:
    normal normal normal normal 13px / normal 'Helvetica Neue',
    Helvetica,
    Arial,
    sans-serif;
  display: flex;
  flex-direction: column;
  background-color: #fff;
  outline: none;
  box-shadow:
    0 0 8px rgb(0 0 0 / 18%),
    0 8px 16px rgb(0 0 0 / 36%);
  transform: translateX(100%);
  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.inboxsdk__drawer_view.inboxsdk__match_sidebar_content_panel_width {
  width: 300px;
}

.inboxsdk__drawer_view.inboxsdk__active {
  transform: none;
}

.inboxsdk__drawer_title_bar {
  background-color: #f5f5f5;
  border-bottom: 1px solid #e0e0e0;
  padding: 16px 20px;
  white-space: nowrap;
  display: flex;
  flex: 0 0 auto;
}

.inboxsdk__drawer_title_bar .inboxsdk__close_button {
  margin-right: 20px;
  flex-shrink: 0;
}

.inboxsdk__drawer_title {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font:
    normal normal normal normal 20px / 24px 'Helvetica Neue',
    Helvetica,
    Arial,
    sans-serif;
}

/* backdrop */

.inboxsdk__inbox_backdrop {
  visibility: visible;
  position: fixed;
  height: 100vh;
  width: 100vw;
  bottom: 0;
  left: 0;
  z-index: 50;
  background-color: transparent;
  transition: background-color 150ms cubic-bezier(0.4, 0, 1, 1);
}

.inboxsdk__inbox_backdrop.inboxsdk__active {
  background-color: rgb(10 10 10 / 60%);
  transition: background-color 70ms cubic-bezier(0, 0, 0.2, 1);
}

.inboxsdk__inbox_backdrop ~ .inboxsdk__inbox_backdrop {
  opacity: 0.6;
}

/* sidebar */

:local(.app_sidebar_main) {
  display: flex;
  flex-direction: column;
}

:local(.app_sidebar) > .inboxsdk__close_button {
  position: absolute;
  bottom: 10px;
  right: 20px;
}

:local(.app_sidebar_content_area) {
  width: 216px;
}

:local(.app_sidebar_content_panel) {
  overflow: hidden;
  font:
    12px Arial,
    sans-serif;
  max-height: 100%;
  box-sizing: border-box;
}

:local(.app_sidebar_content_panel_top_line) {
  white-space: nowrap;
  display: flex;
  user-select: none;
  cursor: default;
}

:local(.app_sidebar_content_panel):not(:local(.expanded))
  :local(.app_sidebar_content_panel_top_line) {
  border-bottom: 1px solid #ddd;
}

:local(.app_sidebar_content_panel):local(.showControls)
  :local(.app_sidebar_content_panel_top_line):hover,
:local(.app_sidebar_content_panel):local(.dragged)
  :local(.app_sidebar_content_panel_top_line) {
  background: rgb(0 0 0 / 3%);
}

:local(.app_sidebar_content_panel_title) {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

:local(.app_sidebar_content_panel):local(.showControls)
  :local(.app_sidebar_content_panel_title) {
  cursor: move;
}

:local(.app_sidebar_content_panel_title_text) {
  padding-left: 6px;
  vertical-align: middle;
  font:
    bold 13px / 40px 'Helvetica Neue',
    Helvetica,
    Arial,
    sans-serif;
  color: rgb(0 0 0 / 87%);
}

:local(.app_sidebar):local(.hideTitleBar)
  :local(.app_sidebar_content_panel_top_line) {
  display: none;
}

:local(.app_sidebar_content_panel):local(.showControls)
  :local(.app_sidebar_content_panel_top_line):hover
  :local(.app_sidebar_content_panel_grip) {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 10px;
  height: 40px;
  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI2cHgiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDYgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Q29tYmluZWQgU2hhcGU8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iRkluYWxzLSoqSmFuLTkqKiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iU2lkZWJhci1jbG9zZWQtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIC0xNC4wMDAwMDApIiBmaWxsPSIjQUFBQUFBIj4gICAgICAgICAgICA8ZyBpZD0iU2lkZWJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgPGcgaWQ9IkJveC1pbmZvLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcmlwcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxNC41MDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC42NjY2NjY2NjcsNS40MTY2NjY2NyBDMC42NjY2NjY2NjcsNC44NjQzODE5MiAxLjExMDUzMTQ5LDQuNDE2NjY2NjcgMS42NjY2NjY2Nyw0LjQxNjY2NjY3IEMyLjIxODk1MTQyLDQuNDE2NjY2NjcgMi42NjY2NjY2Nyw0Ljg2MDUzMTQ5IDIuNjY2NjY2NjcsNS40MTY2NjY2NyBDMi42NjY2NjY2Nyw1Ljk2ODk1MTQyIDIuMjIyODAxODQsNi40MTY2NjY2NyAxLjY2NjY2NjY3LDYuNDE2NjY2NjcgQzEuMTE0MzgxOTIsNi40MTY2NjY2NyAwLjY2NjY2NjY2Nyw1Ljk3MjgwMTg0IDAuNjY2NjY2NjY3LDUuNDE2NjY2NjcgWiBNMC42NjY2NjY2NjcsMS4yNSBDMC42NjY2NjY2NjcsMC42OTc3MTUyNSAxLjExMDUzMTQ5LDAuMjUgMS42NjY2NjY2NywwLjI1IEMyLjIxODk1MTQyLDAuMjUgMi42NjY2NjY2NywwLjY5Mzg2NDgyMiAyLjY2NjY2NjY3LDEuMjUgQzIuNjY2NjY2NjcsMS44MDIyODQ3NSAyLjIyMjgwMTg0LDIuMjUgMS42NjY2NjY2NywyLjI1IEMxLjExNDM4MTkyLDIuMjUgMC42NjY2NjY2NjcsMS44MDYxMzUxOCAwLjY2NjY2NjY2NywxLjI1IFogTTAuNjY2NjY2NjY3LDkuNTgzMzMzMzMgQzAuNjY2NjY2NjY3LDkuMDMxMDQ4NTggMS4xMTA1MzE0OSw4LjU4MzMzMzMzIDEuNjY2NjY2NjcsOC41ODMzMzMzMyBDMi4yMTg5NTE0Miw4LjU4MzMzMzMzIDIuNjY2NjY2NjcsOS4wMjcxOTgxNiAyLjY2NjY2NjY3LDkuNTgzMzMzMzMgQzIuNjY2NjY2NjcsMTAuMTM1NjE4MSAyLjIyMjgwMTg0LDEwLjU4MzMzMzMgMS42NjY2NjY2NywxMC41ODMzMzMzIEMxLjExNDM4MTkyLDEwLjU4MzMzMzMgMC42NjY2NjY2NjcsMTAuMTM5NDY4NSAwLjY2NjY2NjY2Nyw5LjU4MzMzMzMzIFogTTMuMzAwMDAwMTksMS4yNSBDMy4zMDAwMDAxOSwwLjY5NzcxNTI1IDMuNzQzODY1MDEsMC4yNSA0LjMwMDAwMDE5LDAuMjUgQzQuODUyMjg0OTQsMC4yNSA1LjMwMDAwMDE5LDAuNjkzODY0ODIyIDUuMzAwMDAwMTksMS4yNSBDNS4zMDAwMDAxOSwxLjgwMjI4NDc1IDQuODU2MTM1MzcsMi4yNSA0LjMwMDAwMDE5LDIuMjUgQzMuNzQ3NzE1NDQsMi4yNSAzLjMwMDAwMDE5LDEuODA2MTM1MTggMy4zMDAwMDAxOSwxLjI1IFogTTMuMzAwMDAwMTksNS40MTY2NjY2NyBDMy4zMDAwMDAxOSw0Ljg2NDM4MTkyIDMuNzQzODY1MDEsNC40MTY2NjY2NyA0LjMwMDAwMDE5LDQuNDE2NjY2NjcgQzQuODUyMjg0OTQsNC40MTY2NjY2NyA1LjMwMDAwMDE5LDQuODYwNTMxNDkgNS4zMDAwMDAxOSw1LjQxNjY2NjY3IEM1LjMwMDAwMDE5LDUuOTY4OTUxNDIgNC44NTYxMzUzNyw2LjQxNjY2NjY3IDQuMzAwMDAwMTksNi40MTY2NjY2NyBDMy43NDc3MTU0NCw2LjQxNjY2NjY3IDMuMzAwMDAwMTksNS45NzI4MDE4NCAzLjMwMDAwMDE5LDUuNDE2NjY2NjcgWiBNMy4zMDAwMDAxOSw5LjU4MzMzMzMzIEMzLjMwMDAwMDE5LDkuMDMxMDQ4NTggMy43NDM4NjUwMSw4LjU4MzMzMzMzIDQuMzAwMDAwMTksOC41ODMzMzMzMyBDNC44NTIyODQ5NCw4LjU4MzMzMzMzIDUuMzAwMDAwMTksOS4wMjcxOTgxNiA1LjMwMDAwMDE5LDkuNTgzMzMzMzMgQzUuMzAwMDAwMTksMTAuMTM1NjE4MSA0Ljg1NjEzNTM3LDEwLjU4MzMzMzMgNC4zMDAwMDAxOSwxMC41ODMzMzMzIEMzLjc0NzcxNTQ0LDEwLjU4MzMzMzMgMy4zMDAwMDAxOSwxMC4xMzk0Njg1IDMuMzAwMDAwMTksOS41ODMzMzMzMyBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==)
    50% center no-repeat;
}

:local(.app_sidebar_content_panel_title_icon_container) {
  width: 20px;
  height: 20px;
  vertical-align: middle;
  margin-left: 6px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  margin-top: -1px;
}

:local(.app_sidebar_content_panel_title_icon),
:local(.app_sidebar_content_panel_title_icon) > img {
  width: 13px;
  height: 13px;
}

:local(.app_sidebar_content_panel_toggle) {
  flex: 1;
  text-align: right;
  visibility: hidden;
}

:local(.app_sidebar_content_panel):local(.showControls)
  :local(.app_sidebar_content_panel_toggle) {
  visibility: visible;
  cursor: pointer;
}

:local(.app_sidebar_content_panel_toggle_button) {
  margin-top: 12px;
  margin-right: 4px;
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAA30lEQVR4Ae3RO04EMRgE4Q45hlkuxWMPCwdBLNxjZQJPNBkq4U7qm9x/lyb6A0mSJEmSJEmS9NB/iXjKV57DJdd8ZmSzS34yc+cJueaemVvG/vnzSODz596ES77XUZxwzN+b8HjM5wlva/7uhI91DCes+efvPf9u5AYSTvMbfwAm9OfzhNf2fJbQn48S+vNRQn8+SujPRwn9+SjhpT+fJPTno4T+fJTQnw8T+PxyAp/fT+Dz+wl8fj+Bz28n8PnVBD6/msDnVxP4/GoCn99MYPP7xmm+JEmSJEmSJEmSfgG9E96X0mx7vAAAAABJRU5ErkJggg==)
    center / 20px no-repeat;
  border: none;
  width: 14px;
  height: 14px;
  transform: rotate(-90deg);
  transition:
    -webkit-transform 0.15s,
    transform 0.15s;
  outline: none;
  opacity: 0.6;
  cursor: pointer;
}

:local(.app_sidebar_content_panel_top_line):hover
  :local(.app_sidebar_content_panel_toggle_button),
:local(.app_sidebar_content_panel):local(.dragged)
  :local(.app_sidebar_content_panel_top_line)
  :local(.app_sidebar_content_panel_toggle_button) {
  opacity: 0.9;
}

:local(.app_sidebar_content_panel):local(.expanded)
  :local(.app_sidebar_content_panel_toggle_button) {
  transform: rotate(0);
}

:local(.app_sidebar_content_panel_content) {
  margin-bottom: 25px;
}

:local(.sidebar_iconArea) :local(.sidebar_button_container) {
  position: relative;
}

:local(.sidebar_iconArea) .inboxsdk__button_icon:focus,
:local(.sidebar_iconArea) .inboxsdk__button_icon:hover {
  outline: none;
}

/* end sidebar */

/* shared parts of app id warning */

.inboxsdk__appid_warning {
  margin: 0;
  padding: 9px;
  color: #4b4b4b;
  background: #ff6c6c;
  font-size: 10pt;
}

.inboxsdk__appid_warning_main {
  display: inline-block;
  vertical-align: middle;
}

.inboxsdk__appid_warning .topline {
  font-weight: bold;
  font-size: 11pt;
}

a.inboxsdk__appid_register {
  color: white;
  display: inline-block;
  background: #1989ff;
  border-radius: 3px;
  text-decoration: none;
  box-shadow: 0 0 5px rgb(0 0 0 / 30%);
  padding: 7px;
  font-size: 10pt;
  vertical-align: middle;
  margin-left: 1em;
}

.inboxsdk__thread_row_icon_wrapper {
  display: inline-block;
}

.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  margin-top: 0px;
}

:local(.thread_noticeBar) {
  background: #f8ebc0;
  margin-bottom: 10px;
  padding: 12px 4px 6px 12px;
}

/* suggestions */

.inboxsdk__suggestions_separator_before {
  padding-bottom: 2px !important;
}

.inboxsdk__suggestions_separator_after {
  border-top: 1px solid #e5e5e5;
  padding-top: 2px !important;
}

/* buttons */

div.T-I.inboxsdk__button {
  user-select: none;
  min-width: 27px;
}

/* subject line buttons */
div.bHJ .inboxsdk__button {
  margin: 0 2px 0 10px;
}

.inboxsdk__no_bg {
  background: none;
}

.inboxsdk__button.inboxsdk__button_disabled {
  opacity: 0.55;
}

.inboxsdk__button_icon + .inboxsdk__button_text {
  margin-left: 5px;
}

.inboxsdk__button_icon {
  display: inline-block;
}

.inboxsdk__button_iconImg {
  height: 20px;
  width: 20px;
  vertical-align: middle;
  margin-top: -2px;
  /* stylelint-disable-next-line property-no-unknown */
  user-drag: none;
  user-select: none;
  -webkit-user-drag: none;
}

.inboxsdk__button_green_inactive {
  box-shadow: 0 1px 0 rgb(0 0 0 / 5%);
  background-color: #53a93f;
  /* stylelint-disable-next-line value-no-vendor-prefix */
  background-image: -webkit-linear-gradient(top, transparent, transparent);
  /* stylelint-disable-next-line function-linear-gradient-no-nonstandard-direction */
  background-image: linear-gradient(top, transparent, transparent);
  border: 1px solid transparent;
  color: #fff;
  text-shadow: none;
}

.inboxsdk__button_green_hover {
  box-shadow: inset 0 -1px 0 #4c8534;
  background-color: #65b045;
  /* stylelint-disable-next-line value-no-vendor-prefix */
  background-image: -webkit-linear-gradient(top, transparent, transparent);
  /* stylelint-disable-next-line function-linear-gradient-no-nonstandard-direction */
  background-image: linear-gradient(top, transparent, transparent);
  border: 1px solid transparent;
  border-bottom: 1px solid #4c8534;
  text-shadow: none;
}

.inboxsdk__button_green_active {
  box-shadow: inset 0 1px 0 #2f6124;
  background: #3e802f;
  border: 1px solid transparent;
  border-top: 1px solid #2f6124;
  color: #fff;
  text-shadow: none;
}

/* For the outline style button (ams). We need to counteract a few of gmail's styles */
.ams.inboxsdk__button::before {
  width: 0;
  margin: 0;
}

.ams.inboxsdk__button:focus {
  background: rgb(0 0 0 / 0%);
}

.ams.inboxsdk__button .asa:not(.bjy)::after {
  width: auto;
  height: auto;
}

.inboxsdk__menu {
  min-width: 1em;
  min-height: 1em;
  padding: 0px;
  overflow: visible;
  max-height: none;

  /* Copied from Gmail's .J-M class */
  z-index: 7;
  cursor: default;
  font-size: 13px;
  margin: 0;
  outline: none;
}

.inboxsdk__menu > .inboxsdk__menuContent {
  padding: 0;
  box-shadow:
    0 8px 10px 1px rgb(0 0 0 / 14%),
    0 3px 14px 2px rgb(0 0 0 / 12%),
    0 5px 5px -3px rgb(0 0 0 / 20%);
  transition: opacity 0.218s;
  border: 1px solid rgb(0 0 0 / 20%);
  background: #fff;
  outline: none;
}

.f4.J-N-JX.inboxsdk__message_more_icon {
  height: 16px;
  margin-top: 1px;
  width: 16px;
}

/* end */

/* compose buttons */

/* mimic button styling */
.inboxsdk__composeButton,
.inboxsdk__compose_sendButton {
  height: 20px;
  width: 20px;
  padding: 4px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  outline: none;
  position: relative;
}

.inboxsdk__composeButton + .inboxsdk__composeButton {
  margin-left: 4px;
}

.inboxsdk__composeButton .inboxsdk__button_icon {
  opacity: 0.55;
}

.inboxsdk__composeButton:hover .inboxsdk__button_icon,
.inboxsdk__composeButton:focus .inboxsdk__button_icon,
.inboxsdk__composeButton.inboxsdk__composeButton_active .inboxsdk__button_icon {
  opacity: 1;
}

.inboxsdk__composeButton::before {
  content: '';
  display: block;
  opacity: 0;
  position: absolute;
  transition-duration: 0.15s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  inset: 0px 0px 0px 0px;
  background: none;
  box-sizing: border-box;
  transform: scale(0);
  transition-property: transform, opacity;
  border-radius: 4px;
}

.inboxsdk__composeButton:hover::before {
  background-color: rgb(32 33 36 / 5.9%);
  border: none;
  box-shadow: none;
  opacity: 1;
  transform: scale(1);
}

.inboxsdk__composeButton:focus::before,
.inboxsdk__composeButton.inboxsdk__composeButton_active::before {
  background-color: rgb(32 33 36 / 12.2%);
  border: none;
  box-shadow: none;
  opacity: 1;
  transform: scale(1);
}

.inboxsdk__compose_actionToolbar
  .inboxsdk__compose_groupedActionToolbar
  div.inboxsdk__composeButton:last-child {
  margin-right: 0px;
}

.inboxsdk__compose_sendButton {
  background-color: #1a73e8;
  color: white;
  height: 24px;
  width: auto;
  padding-left: 3px;
  padding-right: 3px;
  border-radius: 4px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_sendButton {
  padding: 6px 4px;
  margin-left: 2px;
}

.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {
  height: 20px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {
  height: 24px;
}

.inboxsdk__compose_sendButton:focus,
.inboxsdk__compose_sendButton.inboxsdk__composeButton_active {
  background-color: #5094ed;
  box-shadow:
    0 1px 1px 0 rgb(66 133 244 / 30%),
    0 1px 3px 1px rgb(66 133 244 / 15%);
  border: none;
}

.T-I ~ .inboxsdk__compose_sendButton {
  margin-left: -6px;
}

.inboxsdk__compose_actionToolbar {
  white-space: nowrap;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_actionToolbar {
  padding-left: 6px;
}

.inboxsdk__compose_actionToolbar .inboxsdk__button_icon {
  height: 20px;
  width: 20px;
  display: inline-flex;
  user-select: none;
}

.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg {
  height: 17px;
  width: 17px;
  display: inline-flex;
  margin: auto;
}

.inboxsdk__compose_actionToolbar + .gU:not(.inboxsdk__compose_separator) {
  padding-left: 8px;
}

/* grouped action toolbar */
.inboxsdk__compose_groupedActionToolbar_visible .aDg .aDh {
  overflow-y: visible;
}

.inboxsdk__compose_groupedActionToolbar {
  position: absolute;
  bottom: 44px;
  margin: 3px;
  z-index: 10;
  left: 0px;
  border-radius: 2px;
  box-shadow:
    0 4px 5px 0 rgb(0 0 0 / 14%),
    0 1px 10px 0 rgb(0 0 0 / 12%),
    0 2px 4px -1px rgb(0 0 0 / 20%);
  padding: 5px 15px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_groupedActionToolbar {
  margin-bottom: 7px;
  padding: 4px 5px;
  background: white;
  left: -3px;
}

.inboxsdk__compose_inlineReply .inboxsdk__compose_groupedActionToolbar {
  left: 14px;
}

.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton:first-child {
  margin-left: 0px;
  margin-right: 0px;
}

.inboxsdk__composeButton.inboxsdk__compose_groupedActionButton {
  margin-right: 0px;
}

.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton {
  padding: 4px;
}

/*
there's an element that gets a height of 40px when the gmail formatting toolbar
is visible. This rule makes that same element get the 40px height when
the actionToolbar is visible
*/
.inboxsdk__compose_groupedActionToolbar_visible .bA3 {
  height: 40px;
}

.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {
  z-index: 1;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {
  margin-right: 0px;
}

.inboxsdk__compose_groupedActionToolbar_arrow {
  display: none;
}

/* end grouped action toolbar */

.inboxsdk__compose_customSendContainer {
  display: inline-block;
  position: relative;
  outline: 0;
  height: 29px;
  margin: 6px 0;
  padding: 0;
  line-height: 29px;
  vertical-align: middle;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_customSendContainer {
  height: 36px;
  line-height: 36px;
}

.inboxsdk__compose_customTitleBarColor > img.Hl,
.inboxsdk__compose_customTitleBarColor > img.Hq,
.inboxsdk__compose_customTitleBarColor > img.Ha {
  background-color: transparent !important;
}

.inboxsdk__compose_hasCustomTitleBarText,
.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {
  display: flex;
}

.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {
  align-items: center;
}

.inboxsdk__compose_hasCustomTitleBarText > tbody {
  width: 100%;
}

.inboxsdk__compose_nativeTitleBarText {
  display: none !important;
}

.inboxsdk__compose_customTitleBarText {
  width: calc(100% - 80px);
}

.inboxsdk__compose_hasCustomTitleBarText td.Hm {
  margin-right: 10px;
  margin-left: auto;
}

.inboxsdk__compose_statusBarPrependContainer {
  border-top: 1px solid #cfcfcf;
}

.inboxsdk__compose_statusBarPrependContainer + table td.gU {
  border-top: none;
}

/* end */

/* appid warning gmail specific parts */

input.inboxsdk__x_close_button {
  background-color: transparent;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/dpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzMjIxMUU0REM1MTExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1QzhERjZDREM1MDExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIElsbHVzdHJhdG9yIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzliZDBjZTYtYWVjMy00NWZkLThkOTktMzJhOTNhMTkxZGM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmQ4ZGVjMWJhLTk5NGEtNGViMC04NzE4LTdhMGJkN2FlOGY4OCIvPiA8ZGM6dGl0bGU+IDxyZGY6QWx0PiA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPmdseXBoaWNvbnM8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvfrd2cAAANXSURBVHja5JrPaxNBFMe72wj1lFM8pNUcelLaQFLJRYptDgVBBe9F/BdyzV8h6bWQq0iKQQWhl1psL14VPPQUtErbS3owpIhdv6Mvsl1m3rz9FZv1wZeBdHbmfTozb2fejuN53lSS5jhOCcVNSJUFaJr+9BM6gXrQJ/TbS7LfXAKO51E8gB5Cd6FrwueOUexCL6FXADuN5YgakSiClaE2NFDNxNSA2ipH9icCwDy0BZ0nABDUObU9nxoITcMmNEwBIKgh9ZVLFARWhPbHABCU6rOYCAhsCfr2DyBGUn0v2fx0uPCLyLKK4gWUF8aOr9Ab+k9+hD7TNFE2A81Bi9Ad6B6NtMRURHsEX3dCRy0aib5wgXahOuSGWHMuPdMVBo4+NzLcmpBMp3dQJWrI9PVXgfaE06woAqHoZFvYZ1BDzb64EL5+HWrzTBAAchKQpmCIl5MC0PS/LJjSTRaEXnZDC8RCWhA+PxYsMMPgSzPYwJZlOi0za6oFVUM4W4WeGuf8n5HhpllHC0J7Jy56NAwdzkIHvhGrCSBqvv+4enbWUK9hiZZlHUjbEp0cC4QngQlAeBwMBQAumrUvgNALb8CQV4QQLIwBwgZTYWaK8jnvB1lnqLuGNXEgiG41IYQfpqjpr8s8s+4Hec5UrGsabgn3SX0CqAl3CUobmv7qTP1nfpAjQ6VD3baDIk4/BEyYurcN25lDwzNHo/1iiWl4M+SijSNbkNhkni25lCgw2T6z2XyPYo12pnFNtbFGbYb2RTG4NCIm+2A57ycBI4Gw+fJ7RApMhS+C5EUcGCmEzZeCArnCVBgKMzFRYMJA2HyZdullY/RxajLMdSkDaLKrwmSbimDbIY7Eo93ENj0rsRnmbz9cSmOabC4liCgwnC8nLuViTbaYIkRYGM6XXmZeiJdxi1KNskVxaWjeGoZM7XJXNL8/Fk6nUwrL0tCs2nyi+X2FyYHt/M1rZWkbP6kHq+8XDlaCo+7eRBx1M5V8iJkOUjAbukORJR3USjwdlKkEXWZSpplKYmfms8KkfugZ16c3j84212khj+/T26R9DP1/Pk9n6sKA5qXZSfEKRyfVKxyX/VKNE/e+lu+a031oVXrNCXZMh6LXSVxzclK4eHYDxa1xXzz7JcAA2eNXdJTLzjAAAAAASUVORK5CYII=);
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center center;
  height: 20px;
  width: 20px;
  border: none;
  vertical-align: middle;
  cursor: pointer;

  float: right;
  margin: 5px;
}

/* thread rows */

.inboxsdk__gmail_label.inboxsdk__label_has_icon .au {
  display: inline-block;
  margin-left: 14px;
}

.inboxsdk__thread_row_label .inboxsdk__button_icon,
.inboxsdk__thread_row_label .inboxsdk__button_iconImg {
  height: 11px;
  width: 11px;
}

.inboxsdk__thread_row_label .inboxsdk__button_icon {
  display: inline-block;
  margin-top: 3px;
  margin-left: 4px;
  position: absolute;
}

.inboxsdk__thread_row_button {
  outline: 0;
  height: 20px;
  width: 20px;
  padding: 0px;
}

.inboxsdk__thread_row_button .inboxsdk__button_icon {
  max-height: 100%;
}

.inboxsdk__thread_row_custom_date_container {
  max-width: inherit;
}

.inboxsdk__thread_row_button .inboxsdk__button_iconImg {
  height: 20px;
  width: 20px;
  margin-top: 0px;
}

.inboxsdk__gmail_action {
  float: right;
  position: relative;
  background-color: grey;
  margin-left: 1em;
  cursor: default;
  padding: 0 6px;
  /* stylelint-disable-next-line value-no-vendor-prefix */
  background-image: -webkit-linear-gradient(top, #e9e9e9, #e6e6e6);
  /* stylelint-disable-next-line function-linear-gradient-no-nonstandard-direction */
  background-image: linear-gradient(top, #e9e9e9, #e6e6e6);
  border: 1px solid rgb(0 0 0 / 10%);
  border-color: #ccc;
  color: #444;
  height: 17px;
  line-height: 17px;
  min-width: 56px;
  border-radius: 2px;
  font-size: 11px;
  font-weight: bold;
  text-align: center;
  white-space: nowrap;
  padding-right: 18px;
}

.inboxsdk__gmail_action:focus {
  border: 1px solid #4d90fe;
  outline: none;
}

.inboxsdk__gmail_action:active {
  box-shadow: inset 0 1px 2px rgb(0 0 0 / 10%);
}

.inboxsdk__gmail_action:hover {
  box-shadow: 0 1px 1px rgb(0 0 0 / 5%);
  background-color: #ededed;
  /* stylelint-disable-next-line value-no-vendor-prefix */
  background-image: -webkit-linear-gradient(top, #ededed, #eaeaea);
  /* stylelint-disable-next-line function-linear-gradient-no-nonstandard-direction */
  background-image: linear-gradient(top, #ededed, #eaeaea);
  border-color: #b8b8b8;
}

.inboxsdk__gmail_action::after {
  content: '';
  position: absolute;
  right: 5px;
  top: 5px;
  margin-left: 5px;
  background: no-repeat
    url(https://ssl.gstatic.com/mail/sprites/smartmail-561acb673be75c1d374881a95997fce4.png) -67px -100px;
  width: 7px;
  height: 7px;
  opacity: 0.55;
}

.inboxsdk__thread_row_custom_date {
  margin-left: 2px;
}

span.inboxsdk__thread_row_custom_date
  + span:not(.inboxsdk__thread_row_custom_date) {
  display: none;
}

span.inboxsdk__thread_row_custom_draft_label + div.yW {
  display: none;
}

.inboxsdk__thread_row_attachment_iconWrapper,
.inboxsdk__thread_row_attachment_icon {
  margin-left: 3px;
  width: 16px;
  height: 16px;
}

.inboxsdk__thread_row_attachment_iconWrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  width: max-content;
}

/* .zA td.apU.xy refers to the <td/> element that houses the favorite star in thread row view.
 The <span> element is what inboxSDK will render threadRowButtons as when Gmail hover actions are disabled.
 The following rules fix the issue where threadRowButtons were spilling over into the thread row email text.
 */
.zA td.apU.xY {
  width: initial;
}

.zA td.apU.xY span.inboxsdk__thread_row_button {
  margin: 0 10px;
  opacity: 0.16;
}

.zA.aqw td.apU.xY span.inboxsdk__thread_row_button {
  opacity: 0.54;
}

.zA.aqw td.apU.xY span.inboxsdk__thread_row_button:hover {
  opacity: 1;
}

.zA td.apU.xY span.inboxsdk__thread_row_button::before {
  /* Google adds in a pseduo ::before element to span elems with the T-KT class applied.
  Explicity setting this width and height to zero as remove weird positioning that results */
  width: 0px;
  height: 0px;
}

.inboxsdk__thread_row_attachment_icon {
  vertical-align: middle;
}

.zA > .xY.inboxsdk__thread_row_attachment_icons_present {
  max-width: inherit;
}

/* narrow vertical preview pane */
.Zs .xY.inboxsdk__thread_row_attachment_icons_present {
  flex-grow: 0;
}

.Zs .xY.inboxsdk__thread_row_label {
  order: 1;
}

.Zs .xY.inboxsdk__thread_row_icon_wrapper {
  order: 1;
  margin-left: 3px;
  margin-right: 0px;
}

/* end narrow vertical preview pane */

.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon,
.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  height: 18px;
  width: 18px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__thread_row_icon_wrapper {
  width: 20px;
  margin-right: 3px;
  align-self: center;
  height: 20px;
  flex: 0 0 auto;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  vertical-align: top;
}

.inboxsdk__thread_row_image_added
  .y6
  .inboxsdk__thread_row_icon_wrapper
  ~ span[id] {
  margin-left: 3px;
}

.inboxsdk__thread_row_image_added .a4W,
.inboxsdk__thread_row_image_added .apA,
.inboxsdk__thread_row_image_added .apx {
  position: relative;
}

/* end thread rows */
[inboxsdk__message_added_attachment_icon] td.gH > span:first-child > img,
[inboxsdk__message_added_attachment_icon]
  td.gH
  div.gK
  > span:first-child
  > img {
  margin-right: 3px;
  margin-left: 3px;
  margin-top: 0px;
}

[inboxsdk__message_added_attachment_icon]
  td.gH
  > span:first-child
  > *:last-child,
[inboxsdk__message_added_attachment_icon]
  td.gH
  div.gK
  > span:first-child
  > *:last-child {
  margin-right: 6px;
}

.inboxsdk__message_attachment_iconWrapper,
.inboxsdk__message_attachment_icon {
  width: 21px;
  height: 21px;
  position: relative;
}

.inboxsdk__message_attachment_iconWrapper {
  margin: auto 3px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  vertical-align: top;
}

.inboxsdk__message_attachment_tooltipWrapper {
  position: absolute;
  top: 19px;
  z-index: 10;
}

/* Work around issue where clicking "Remove formatting" in Compose causes this
 * element to become taller and shift the toolbar down. */
.gU .aWQ {
  max-height: 3px;
}

.aQw .inboxsdk__button_icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 28px;
}

.aQw .inboxsdk__button_iconImg {
  height: 18px;
  width: 18px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.aQw .inboxsdk__button_iconImg {
  margin-top: 2px;
}

.aZi .asa .inboxsdk__button_iconImg {
  display: inline-block;
  vertical-align: middle;
  margin-top: -3px;
}

/* Message view attachments toolbar */
.aZi .aZj .asa .inboxsdk__button_iconImg {
  margin: 0;
}

body .dw {
  /* Fixes issue where a tall compose window opened over a custom view could be
   * overlapped by Gmail's top bar. Also fixes issue where mole widgets are
   * only visible while a compose window is open.
   */
  z-index: 6 !important;
}

.inboxsdk__compose_outerSidebar_wrapper {
  position: absolute;
  left: -401px;
  top: 0px;
  background: white;
  width: 400px;
  bottom: 0px;
  border-left: 1px solid silver;
  box-shadow: -2px 0px 1px #e6e6e6;
  display: block;
}

.inboxsdk__outerSidebarActive .aSt .inboxsdk__compose_outerSidebar_wrapper {
  border-left: 0;
  box-shadow: none;
  left: -400px;
}

.inboxsdk__outerSidebarActive .aSs > div {
  width: 50% !important;
  margin-left: 30%;
}

.inboxsdk__compose_outerSidebar_header {
  background: #404040;
  font-size: 80%;
  padding: 10px 10px 11px 10px;
  color: white;
  border-bottom: 1px solid #c4c4c4;
}

.inboxsdk__compose_outerSidebar_body {
  position: absolute;
  width: 100%;
  bottom: 43px;
  top: 36px;
  left: -1px;
  overflow: auto;
}

.inboxsdk__compose_outerSidebar_footer {
  position: absolute;
  bottom: 0px;
  width: 100%;
  border-top: 1px solid rgb(206 206 206);
  display: block;
}

.inboxsdk__compose_innerSidebarActive form,
.inboxsdk__compose_innerSidebarActive .GQ {
  padding-right: 200px;
}

div.inboxsdk__compose_statusbar {
  border: 0;
  height: 40px;
  margin: 0;
}

.inboxsdk__compose_statusbar {
  background: none;
  position: relative;
}

/* only include padding when in thread inline view */
.HM .I5 .inboxsdk__compose_statusbar {
  padding: 0 16px 16px 16px;
}

table + .inboxsdk__compose_statusbar {
  margin-top: -8px;
}

/* Necessary in pre-new-recipients-area Gmail to stop the compose body
from resizing and pushing the statusbars off-screen when the recipients
area is focused. */
body.inboxsdk__classic_gmail_recipients_area
  .inboxsdk__compose_statusbarActive
  .aoI {
  height: auto !important;
}

.inboxsdk__compose_statusbarActive .aDl {
  z-index: unset;
}

/* compose size fixing.
TODO Can we restrict this to only composes we've modified? */
.inboxsdk__compose .qz {
  max-height: inherit !important;
}

/* aDi is initially position: fixed, which messes things up, so we make static

TODO: 2023-08-31 is .aDi still in use anymore? */
body:not(.inboxsdk_hack_disableComposeSizeFixer)
  .inboxsdk__size_fixer
  .aDj.aDi {
  position: static !important;
}

.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .HM .I5 {
  padding-bottom: var(--inboxsdk-total-added-statusbar-height, 0px);
}

/* Extend the message foreground outline downwards to contain our added status bars */
.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj::before {
  height: calc(100% + var(--inboxsdk-total-added-statusbar-height, 0px));
}

/* When we have a status bar added and the reply status is in position absolute or fixed mode (.aDi),
use a background color on the element containing our added status bars so the message background outline
isn't visible behind it. */
.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive
  .aDj.aDi
  > .aDh {
  background-color: white;
}

.inboxsdk__recipient_row {
  display: flex;
}

.inboxsdk__compose_notice {
  background-color: #f5f5f5;
  border-radius: 4px;
  margin: 10px;
  padding: 10px 16px;
}

.inboxsdk__recipient_row td.ok {
  height: 20px;
  padding: 0px !important;
}

.inboxsdk__recipient_row td.az3 {
  padding: 0px 3px 0px 3px;
}

.inboxsdk__compose_forceRecipientsOpen .fX.aXjCH {
  display: block !important;
}

.inboxsdk__compose_hideRecipientArea .fX.aXjCH,
.inboxsdk__compose_hideRecipientArea .aoD.hl,
.inboxsdk__compose_forceRecipientsOpen .aoD.hl,
.inboxsdk__compose_forceRecipientRowHidden {
  display: none !important;
}

/* toolbar visibility */

[data-thread-toolbar='true'] [data-rowlist-toolbar='true'] {
  display: none !important;
}

[data-toolbar-expanded='true'] [data-toolbar-expanded='false'] {
  display: none !important;
}

[data-toolbar-expanded='false'] [data-toolbar-expanded='true'] {
  display: none !important;
}

[data-toolbar-icononly='true'] .inboxsdk__button_text {
  display: none !important;
}

[data-toolbar-icononly='false'] .inboxsdk__button_text {
  color: #5f6368;
}

[data-toolbar-icononly='false'] .asa::before {
  border-radius: 4px;
  border: none !important;
}

[data-toolbar-icononly='false'] .inboxsdk__button {
  align-items: center;
  border: none;
  display: inline-flex;
  justify-content: center;
  position: relative;
  z-index: 0;
  -webkit-font-smoothing: antialiased;
  font-family: 'Google Sans', Roboto, RobotoDraft, Helvetica, Arial, sans-serif;
  font-size: 14px;
  letter-spacing: 0.15px;
  background: none;
  box-sizing: border-box;
  color: #5f6368;
  cursor: pointer;
  font-weight: 500;
  outline: none;
  padding: 0 8px;
}

.inboxsdk__menuItem img,
.inboxsdk__menuItem .inboxsdk__icon {
  height: 16px;
  width: 16px;
  margin-top: -1px;
}

/* end */

/* modal */

.inboxsdk__modal_overlay {
  right: 0px;
  bottom: 0px;
}

.inboxsdk__modal_fullscreen {
  position: fixed;
  inset: 0px 0px 0px 0px;
  z-index: 503;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 110px 50px 50px 50px;
}

.inboxsdk__modal_content {
  margin-top: 30px;
  margin-bottom: 30px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons
  .inboxsdk__modal_content {
  margin-bottom: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons:not(
    .inboxsdk__modal_hideBottom
  )
  .inboxsdk__modal_content {
  margin-bottom: 0px;
  padding-bottom: 24px;
}

.inboxsdk__modal_close {
  outline: none;
  cursor: pointer;
}

.inboxsdk__modal_fullscreen .inboxsdk__modal_container {
  position: relative;
  margin-top: -60px;
  width: auto;
  overflow: hidden;
}

.inboxsdk__modal_fullscreen .inboxsdk__modal_container .inboxsdk__modal_toprow {
  margin-right: 16px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_close {
  display: none;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_container {
  padding-top: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_content {
  margin-top: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .Kj-JD-K7 {
  margin: 0px;
  display: none;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides
  .inboxsdk__modal_container,
.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_content {
  padding-left: 0px;
  padding-right: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom
  .inboxsdk__modal_content {
  margin-bottom: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom
  .inboxsdk__modal_container {
  padding-bottom: 0px;
}

.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width {
  display: flex;
}

.inboxsdk__modal_toprow--constrain-title-width > span[role='heading'] {
  flex: 1;
  width: 0;
  word-wrap: break-word;
}

/* end modal */

/* mole */

/* Fix issue where Compose toolbar can become disconnected when moles or
 * drawers are in use */
.inboxsdk__drawers_in_use .aDi,
.inboxsdk__moles_in_use .aDi {
  left: auto !important;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__drawers_in_use .aDi,
.inboxsdk__moles_in_use .aDi {
  position: static;
}

/* Make it so the compose/mole layer doesn't wrap, so we don't have to do a lot
 * of fancy logic to hide moles ourselves when things get too crowded. */
.inboxsdk__moles_in_use .nH > .nH > .no {
  white-space: nowrap;
}

.inboxsdk__moles_in_use .nH > .nH > .no > * {
  white-space: initial;
}

.inboxsdk__moles_in_use .nH > .nH > .no > .nn {
  display: inline-block;
  float: none;
}

.inboxsdk__mole_view {
  position: relative;
  max-width: 564px;
  height: 100vh;
  vertical-align: top;
  display: inline-flex;
  align-items: flex-end;
}

.inboxsdk__mole_view_inner {
  visibility: visible;
  box-sizing: border-box;
  margin-right: 5px;
  box-shadow: rgb(0 0 0 / 20%) 0 2px 6px;
  min-width: 260px;
  min-height: 36px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__mole_view_inner {
  min-height: 40px;
}

.inboxsdk__mole_view_titlebar:not(.inboxsdk__original_view),
.inboxsdk__mole_view_inner:not(.inboxsdk__original_view) {
  border-radius: 8px 8px 0 0;
}

.inboxsdk__mole_view_titlebar {
  position: absolute;
  left: 0;
  right: 5px;
  font-size: 14px;
  font-weight: 500;
  box-sizing: border-box;
  height: 40px;
  cursor: pointer;
  padding: 10px 12px 10px 16px;
  color: #041e49;
  background: #f2f6fc;
}

.inboxsdk__mole_view_titlebar.inboxsdk__original_view {
  color: white;
  font-size: 12.8px;
  font-weight: 400;
  background: #404040;
  padding: 9px 0 0 11px;
  border-radius: 4px 4px 0 0;
}

.inboxsdk__mole_view_titlebar h2 {
  font-size: inherit;
  font-weight: inherit;
  margin: 4px 0 0 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.inboxsdk__mole_title_buttons {
  white-space: nowrap;
  float: right;
  padding-right: 5px;
  margin-top: 1px;
}

.inboxsdk__mole_title_buttons.inboxsdk__original_view {
  margin-top: -3px;
}

.inboxsdk__mole_title_buttons > img {
  height: 24px;
  width: 24px;
  position: relative;
  top: 2px;
}

.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view) > img {
  height: 16px;
  width: 16px;
  margin-left: 4px;
}

.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view) > img:hover {
  background-color: rgb(68 71 70 / 7.8%);
}

.inboxsdk__mole_title_buttons.inboxsdk__original_view > img:hover {
  background-color: #737373;
}

.inboxsdk__mole_title_buttons > img:hover {
  opacity: 1;
}

.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content,
.inboxsdk__mole_view.inboxsdk__minimized.inboxsdk__mole_use_minimize_title
  h2.inboxsdk__mole_default,
.inboxsdk__mole_view:not(.inboxsdk__minimized) h2.inboxsdk__mole_minimized,
.inboxsdk__mole_view:not(.inboxsdk__mole_use_minimize_title)
  h2.inboxsdk__mole_minimized,
.inboxsdk__mole_view.inboxsdk__minimized .Hl,
.inboxsdk__mole_view:not(.inboxsdk__minimized) .Hk {
  display: none;
}

.inboxsdk__mole_view_content:not(.inboxsdk__original_view) {
  margin-top: 40px;
  border: none;
}

.inboxsdk__mole_view_content {
  margin-top: 36px;
  border: 1px solid #cfcfcf;
  background: white;
  min-width: 260px;
  min-height: 20px;
  max-height: 80vh;
}

.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_inner {
  min-width: 0px;
}

.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_content {
  margin-top: 0px;
  min-width: 0px;
}

/* end mole */

/* tabs */

.inboxsdk__tab {
  width: 30px;
}

.inboxsdk__tab:local(.hideTitleBar):first-child:last-child {
  display: none;
}

.inboxsdk__tab.inboxsdk__tab_selected {
  width: auto;
}

table.aKk .inboxsdk__contentTabContainer .inboxsdk__tab .aAy[role='tab'] {
  height: 28px;
}

.inboxsdk__tab_icon {
  width: 30px;
  height: 25px;
  background-position-x: 5px;
  background-position-y: 3px;
  background-size: 16px;
  background-repeat: no-repeat;
}

.inboxsdk__tab_icon img {
  height: 16px;
  width: 16px;
  margin-left: 5px;
  margin-top: 3px;
}

.inboxsdk__tab .aKx {
  top: 4px;
}

.inboxsdk__sidebar div[role='complementary'] {
  position: static !important;
}

/* Fix issue where sidebar causes threadview to be taller than it should */
.inboxsdk__sidebar > div.y4,
:local(.app_sidebar_in_use) > div.y4 {
  display: none;
}

table.aKk
  .inboxsdk__contentTabContainer
  .inboxsdk__tab:first-child
  .aAy[role='tab'] {
  border-left-width: 1px;
}

/* end tabs */

/* old sidebar */

.inboxsdk__sidebar .inboxsdk__contentPanelContainer {
  font:
    12px Arial,
    sans-serif;
  max-width: 220px;
}

.inboxsdk__contentPanelContainer_contentContainer {
  overflow: hidden;
  margin-bottom: 10px;
  border-bottom: 1px solid #d8d8d8;
}

/* end old sidebar */

/* sidebar */

body.inboxsdk__hasTopMessageBar .bq9 {
  top: var(--inboxsdk__topMessageBar-height);
}

:local(.app_sidebar_in_use) > div[role='complementary'] {
  position: static !important;
  width: 216px !important;
}

:local(.app_sidebar_in_use) {
  /* Necessary to prevent z-indexes on sidebar items from causing them to show
  above stuff outside of the sidebar. */
  will-change: position;
}

/* stylelint-disable-next-line no-duplicate-selectors */
:local(.app_sidebar_content_panel) {
  background: #fff;
}

/* stylelint-disable-next-line no-duplicate-selectors */
:local(.app_sidebar_content_area) {
  padding: 4px 0 12px;
}

:local(.app_sidebar):local(.hideTitleBar) :local(.app_sidebar_content_area) {
  padding-top: 0;
}

/* gmail addon support */

.container_app_sidebar_in_use.no,
:local(.container_app_sidebar_no_icons).no {
  display: flex;
  flex-direction: row;
  width: 100%;
}

body[dir='rtl'] .container_app_sidebar_in_use.no[dir='ltr'],
body[dir='rtl'] .idm5_container_app_sidebar_no_icons.no[dir='ltr'] {
  flex-direction: row-reverse;
}

/* overwrite margin right of the gmail page next/back and settings icon buttons
   to line up properly */

/* when no siebar is visible */
.container_app_sidebar_in_use.no
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: -57px !important;
}

/* when addon sidebar visible */
.container_addon_sidebar_visible.container_app_sidebar_in_use.no
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: -321px !important;
}

/* when sdk sidebar visible */
.container_app_sidebar_visible.container_app_sidebar_in_use.no
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: -321px !important;
}

/* no sdk icons and no native addons */
:local(.container_app_sidebar_no_icons)
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: 0px !important;
}

/* quickfix, TODO investigate removing ar7 class from our buttons */
.inboxsdk__button.ar7 {
  pointer-events: all !important;
}

.container_app_sidebar_in_use .bkK.nn,
:local(.container_app_sidebar_no_icons) .bkK.nn {
  width: auto !important;
  flex: 1;
  min-width: 0px;
}

/* when removing addon icons */
:local(.container_app_sidebar_no_icons) .bnl.nn {
  z-index: -1;
  position: absolute;
}

.container_app_sidebar_in_use :local(.app_sidebar_in_use) {
  min-width: 57px !important;
  flex-shrink: 0;
}

.container_app_sidebar_in_use :local(.app_sidebar_in_use).app_sidebar_visible {
  min-width: 321px !important;
}

.container_app_sidebar_in_use :local(.app_sidebar_in_use) > .J-KU-Jg {
  display: block !important;
}

.container_app_sidebar_in_use
  :local(.app_sidebar_in_use)
  :local(.app_sidebar_container) {
  display: none;
}

.container_app_sidebar_in_use
  :local(.app_sidebar_in_use).app_sidebar_visible
  :local(.app_sidebar_container) {
  display: block;
  float: left;
  height: 100%;
  border-left: 1px solid #e0e0e0;
  padding-left: 16px;
  width: calc(100% - 74px);
  overflow: auto;
}

.container_app_sidebar_in_use
  :local(.app_sidebar_container)
  :local(.app_sidebar_content_area) {
  width: calc(100% - 16px);
  padding-right: 16px;
}

.container_app_sidebar_in_use
  :local(.app_sidebar_in_use).app_sidebar_visible
  .J-KU-Jz {
  width: auto;
  padding-right: 50px;
}

:local(.sidebar_iconArea) .inboxsdk__button_icon {
  margin: 18px 18px 10px 18px;
  border: none;
  background: transparent;
  height: 20px;
  width: 20px;
  overflow: hidden;
  padding: 0;
  cursor: pointer;
  position: relative;
}

:local(.sidebar_iconArea).sidebar_global_iconArea .inboxsdk__button_icon {
  margin-bottom: 18px;
}

body :local(.sidebar_iconArea) .inboxsdk__button_icon {
  overflow: visible;
}

:local(.sidebar_iconArea)
  .sidebar_button_container_active
  .inboxsdk__button_icon::before,
:local(.sidebar_iconArea) .inboxsdk__button_icon:hover::before {
  content: '';
  background: #f1f3f4;
  position: absolute;
  inset: -10px -10px -10px -10px;
  border-radius: 50%;
  z-index: 0;
}

:local(.sidebar_iconArea)
  .sidebar_button_container_active
  .inboxsdk__button_icon::before {
  background: #e8eaed;
}

:local(.sidebar_iconArea) .inboxsdk__button_iconImg {
  width: 20px;
  height: 20px;
  margin-top: 0px;
}

:local(.sidebar_iconArea) .inboxsdk__button_icon .inboxsdk__button_iconImg {
  position: absolute;
  left: 0px;
  top: 0px;
  z-index: 1;
}

:local(.sidebar_iconArea)
  .sidebar_button_container_active
  .inboxsdk__button_selectedIndicator {
  height: 40px;
  width: 3px;
  position: absolute;
  left: 0px;
  bottom: 0px;
  background-color: rgb(66 133 244);
  border-radius: 0 3px 3px 0;
}

/* old pre-2024-11-07 sidebar where buttons were on the right of the panel */
body:not(.inboxsdk__sidebar_icons_right)
  :local(.sidebar_iconArea)
  .sidebar_button_container_active
  .inboxsdk__button_selectedIndicator {
  left: unset;
  right: 0;
  border-radius: 3px 0 0 3px;
}

:local(.sidebar_iconArea).sidebar_global_iconArea
  .sidebar_button_container_active
  .inboxsdk__button_selectedIndicator {
  bottom: 8px;
}

/* end sidebar */

/* material sidebar */
.brC-brG.companion_app_sidebar_visible {
  display: block !important;
}

.bq9:not(.brC-brG).companion_app_sidebar_wrapper_visible {
  display: block !important;
}

/* for 2024-11-07 gmail change moving sidebar icons to the right */
.WN9Ejb.br3.companion_app_sidebar_wrapper_visible {
  display: block !important;
}

.companion_global_app_sidebar_visible .thread_app_sidebar {
  display: none;
}

.companion_app_sidebar_visible:not(.companion_global_app_sidebar_visible)
  .global_app_sidebar {
  display: none;
}

.nH.companion_container_app_sidebar_visible {
  width: calc(100% - 300px) !important;
}

.companion_app_sidebar_visible .addon_sidebar ~ div:not(.addon_sidebar) {
  display: none !important;
}

:local(.app_sidebar_in_use) :local(.app_sidebar_container).addon_sidebar {
  height: 100%;
  overflow: auto;
}

:local(.app_sidebar_in_use)
  :local(.app_sidebar_container).addon_sidebar
  :local(.app_sidebar_content_area) {
  width: 100%;
}

:local(.app_sidebar_in_use):not(.companion_app_sidebar_visible) .addon_sidebar {
  display: none;
}

/* stylelint-disable-next-line no-duplicate-selectors */
:local(.app_sidebar_content_panel_title_icon_container) {
  margin-left: 0px;
}

:local(.app_sidebar_content_panel) :local(.app_sidebar_content_panel_top_line) {
  padding: 0px 16px;
}

/* hide thread addon icons when in custom view */
body.inboxsdk__custom_view_active
  .brC-aT5-aOt-ato-Kp-Jw
  [role='tablist']
  > div:not(:last-child) {
  display: none;
}

/* make the native addon icon container for thread add-ons (div.bvq) always visible */
:local(.app_sidebar_in_use) .bvq,
:local(.app_sidebar_in_use) .bvq > div:last-child {
  display: block !important;
}

/* hide the native addon loading div */
:local(.companion_container_app_sidebar_in_use) .bvq > div:first-child {
  display: none !important;
}

/* end material sidebar */

/* custom content */

.inboxsdk__custom_view_element {
  overflow: auto;
}

/* end custom content */

/* nav menu */

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) {
  border-left-color: transparent;
}

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .nU:not(.n1) .n0 {
  font-weight: normal;
}

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .bsU {
  font-weight: normal;
}

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .TO {
  background: none;
}

.inboxsdk__hide_addon_container {
  display: flex !important;
  flex-direction: row;
  width: 100% !important;
}

body[dir='rtl'] .inboxsdk__hide_addon_container[dir='ltr'] {
  flex-direction: row-reverse;
}

.inboxsdk__hide_addon_container > .bkK.nn {
  width: auto !important;
  flex: 1;
  min-width: 0;
}

.inboxsdk__hide_addon_container > .bnl.nn {
  display: none;
}

.inboxsdk__navItem {
  font-size: 14px;
}

/*
fix issue in pre-Chat Gmail versions where somehow a style="flex-grow: 1" attribute
shows up on our elements preventing them from collapsing.
*/
.inboxsdk__navItem:not(.Xr) > .V3[style] {
  flex-grow: 0 !important;
}

.inboxsdk__navItem > .TO.n4 {
  display: block;
  padding-left: 0;
}

/* app menu panel nav item reshaping */
.inboxsdk__collapsiblePanel .inboxsdk__navItem > .TO .TN.aik {
  padding-left: 18px;
}

/* Tweak alignment of  */
.inboxsdk__collapsiblePanel .inboxsdk__navItem > .TO .qj {
  margin-right: 14px;
}

/* end app menu panel nav item reshaping */

.inboxsdk__navItem > .TO.n4 .qj > .G-asx {
  margin-right: 0;
}

.inboxsdk__navItem > .TO .aio > .bsU:empty {
  display: none;
}

.inboxsdk__navItem > .TO .qj:empty::after {
  background-color: rgb(118 118 118);
  border-radius: 50%;
  content: '';
  height: 18px;
  margin-left: 1px;
  width: 18px;
}

.inboxsdk__navItem > .TO .qj[style*='border-color']:empty::after {
  border-color: inherit;
}

.inboxsdk__navItem > .TO:hover .pM {
  display: flex;
  visibility: visible;
}

.inboxsdk__navItem > .TO .afM {
  cursor: pointer;
}

.inboxsdk__navItem > .TO:hover .afM {
  display: block;
  visibility: visible;
}

/* This does slightly break from the native Gmail behavior, but we keep the dropdown button
  visible while it has an active dropdown */
.inboxsdk__navItem > .TO img.afM.afO {
  display: block;
  visibility: visible;
}

/* Keep the subtitle hidden while the dropdown is active */
.inboxsdk__navItem > .TO img.afM.afO ~ .aio > .bsU {
  display: none;
}

.inboxsdk__navItem > .TO:hover .bsU {
  display: none;
}

.inboxsdk__navItem.inboxsdk__navItem_nonClickable > .TO:active {
  background-color: initial;
}

.inboxsdk__navItem_hover .aj0,
.inboxsdk__navItem_hover .p8 {
  visibility: visible;
}

.inboxsdk__appMenuItem .CL.V6::before,
.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3::before {
  background-image: var(--background-image);
}

.inboxsdk__collapsiblePanel.apV.aJu .T-I.T-I-KE.L3::before {
  background-image: var(--background-image--hover);
}

.inboxsdk__appMenuItem.apV .CL.V6::before {
  background-image: var(--background-image--active);
}

.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3::before {
  background-size: 24px;
}

.inboxsdk__collapsiblePanel_loading_container {
  display: none;
}

.inboxsdk__collapsiblePanel_loading_container.inboxsdk__collapsiblePanel_loading_container--active {
  display: block;
}

.inboxsdk__navItem_link {
  cursor: pointer;
  margin-left: auto;
}

.inboxsdk__navItem_link > a {
  margin-left: 16px;
}

.inboxsdk__navItem > .TO .inboxsdk__button {
  margin-right: 0;
}

[dir='rtl'] .inboxsdk__navItem_link {
  left: -4px;
  right: initial;
}

.inboxsdk__navItem_container .aio .inboxsdk__button {
  position: absolute;
  top: 0px;
  right: -30px;
}

.inboxsdk__navItem_marker {
  position: absolute;
  left: 0px;
  padding-bottom: 2px;
}

.inboxsdk__expando {
  z-index: 1;
}

.inboxsdk__navItem_link > a,
.aip .CK {
  color: #15c;
}

.inboxsdk__navItem_link > a:hover,
.aip .CK:hover {
  text-decoration: underline;
}

.inboxsdk__navItem_container .aio.aip {
  white-space: nowrap;
}

/* start nav menu open state */

.WR[role="navigation"] /* new left nav */
  .inboxsdk__navItem
  .Yh:not(.inboxsdk__navItem_parent_accessory_button):empty {
  display: none;
}

.WR[role="navigation"] /* new left nav */
  .inboxsdk__navItem
  .Yh:not(.inboxsdk__navItem_parent_accessory_button) {
  background: none;
}

.WR[role="navigation"] /* new left nav */
  .inboxsdk__navItem
  .Yh
  .inboxsdk__button_icon {
  display: none;
}

/* end nav menu open state */

/* start nav menu close state */

.WR[role="navigation"].bhZ:not(.bym) /* .WR is the new left nav */
  .inboxsdk__navItem
  .Yh {
  opacity: 1;
}

.WR[role="navigation"].bhZ:not(.bym) /* .WR is the new left nav */
  .inboxsdk__navItem
  .Yh.inboxsdk__navItem_parent_accessory_button {
  background-image: none !important;
}

.WR[role="navigation"].bhZ:not(.bym) /* .WR is the new left nav */
  .inboxsdk__navItem
  .Yh:empty {
  background-color: rgb(32 33 36 / 71%);
  border-radius: 50%;
  display: inherit;
  height: 18px;
  margin-left: 1px;
  width: 18px;
}

.WR[role='navigation'].bhZ:not(.bym)
  .inboxsdk__navItem
  .Yh
  .inboxsdk__button_icon {
  display: inherit;
}

/* end nav menu close state */

/* end nav menu */

/* search results section */

.inboxsdk__custom_sections {
  margin-bottom: 15px;
}

.inboxsdk__custom_sections.Wc {
  padding: 0px;
  margin-bottom: 0px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__custom_sections {
  margin-bottom: 8px;
}

.inboxsdk__resultsSection.inboxsdk__resultsSection_nonCollapsible
  .inboxsdk__resultsSection_title
  .Wp {
  visibility: hidden;
}

.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection {
  padding-top: 0px;
}

.inboxsdk__custom_sections .Wg {
  padding-top: 0px;
}

.inboxsdk__custom_sections.Wc .Wg {
  border-bottom: 0;
  padding: 0px;
}

/* end lone collapsed SectionView in Gmailv1 */

.inboxsdk__results_collapsedContainer.Wg {
  height: auto;
}

.inboxsdk__results_collapsedContainer > div {
  display: flex;
  flex-wrap: wrap;
  flex: 1 0 100%;
}

/* lone collapsed SectionView in Gmailv2 */

/* If only a single SectionView is collapsed then its dropdown button and titleTextLink are still shown */
.inboxsdk__results_collapsedContainer
  > div
  > .inboxsdk__resultsSection_collapsed:first-child:last-child {
  flex: 1;
  margin-right: 0;
}

.inboxsdk__results_collapsedContainer
  > div
  > .inboxsdk__resultsSection_collapsed:first-child:last-child
  > .inboxsdk__resultsSection_header {
  display: flex;
  align-items: center;
  flex: 1;
}

/* end lone collapsed SectionView in Gmailv2 */

.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {
  display: inline-block;
  margin-right: 20px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {
  display: inline-flex;
}

.Wc .inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {
  margin-right: 0px;
}

/* 2024-01-25 Prevent the addition of extra padding on the right side of the header from \`.Wg\` */
.inboxsdk__resultsSection_collapsed .inboxsdk__resultsSection_header {
  padding-right: 0;
}

.inboxsdk__resultsSection_title {
  white-space: nowrap;
  cursor: pointer;
  display: inline-block;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__resultsSection_title {
  display: flex;
  align-items: center;
  height: 48px;
}

.Wc .inboxsdk__resultsSection_title {
  padding: 3px 0 3px 8px;
}

.inboxsdk__resultsSection_header {
  min-height: 48px;
  line-height: 48px;
}

.inboxsdk__resultsSection_header_summaryText.Wm:last-child .amH {
  padding-right: 0px;
  margin-right: 0px;
}

.inboxsdk__custom_sections.Wc
  .inboxsdk__resultsSection_header_summaryText:last-child {
  margin-right: 11px;
}

.inboxsdk__custom_sections.Wc .J-JN-M-I {
  margin-right: 13px;
}

.inboxsdk__resultsSection .TB.TC {
  text-align: center;

  /* 2025-07-10: Remove padding from the left and right of the message element.
    prevents .TM .TC from being applied which has a padding 8px on the left and right.
   */
  padding-left: 0;
  padding-right: 0;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_loading {
  font-style: italic;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_result_icon {
  height: 15px;
  width: 15px;
}

.inboxsdk__resultsSection_label_iconHtml,
.inboxsdk__resultsSection_result_iconHtml {
  display: flex;
  justify-content: center;
  align-items: center;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA:hover > .xW {
  /* Gmailv2 tries to hide the "xW" element when a "zA" element is hovered. This prevent that. */
  display: flex;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA > .xW {
  max-width: none;
  flex-basis: auto;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow .xT {
  align-items: center;
}

.inboxsdk__resultsSection .xX {
  width: 20ex;
}

.inboxsdk__resultsSection tr .xW > span {
  overflow: hidden;
  display: block;
  text-overflow: ellipsis;
}

.inboxsdk__resultsSection .V3 {
  overflow: hidden;
  white-space: nowrap;
}

.inboxsdk__resultsSection .at {
  position: relative;
}

.inboxsdk__thread_row_label {
  flex-shrink: 0;
  align-self: center;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__thread_row_label {
  align-self: flex-end;
}

/* label in vertical preview pane */
.apv .inboxsdk__thread_row_label {
  align-self: flex-start;
}

.inboxsdk__resultsSection_label_icon {
  height: 11px;
  width: 11px;
  position: absolute;
  top: 2px;
  margin-left: 4px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__resultsSection_label_icon {
  margin-top: 1px;
}

.inboxsdk__resultsSection .av,
.inboxsdk__thread_row_label .av {
  /* max-width is set inline, default is 90px */
  overflow: hidden;
  text-overflow: ellipsis;
}

.inboxsdk__resultsSection_label_icon + .av,
.inboxsdk__thread_row_label .inboxsdk__button_icon + .av {
  margin-left: 16px;
}

.Wc .inboxsdk__resultsSection_footer {
  padding: 3px 3px 3px 8px;
}

/* end search results section */

/* tooltip */

/* gmail styles */

.inboxsdk__tooltip .T-P {
  box-shadow: 0 1px 3px rgb(0 0 0 / 20%);
  background-color: #fff;
  border: 1px solid;
  border-color: #bbb #bbb #a8a8a8;
  padding: 16px;
  position: absolute;
  z-index: 1201 !important;
}

.inboxsdk__tooltip.inboxdk__tooltip_content .T-P {
  padding: 0px;
}

.inboxsdk__tooltip .aRM {
  outline: none;
  padding: 13px 10px 16px;
  text-align: center;
  font:
    normal normal normal normal 16px / normal arial,
    sans-serif;
}

.inboxdk__tooltip_content.inboxsdk__tooltip .aRM {
  padding: 0px;
}

.inboxsdk__tooltip .aRR {
  color: #333;
  font-size: 18px;
  margin-top: 13px;
}

.inboxsdk__tooltip .aRQ {
  color: #777;
  font-size: 13px;
  margin: 3px 0 14px 0;
}

/* end gmail styles */

.inboxsdk__tooltip {
  position: fixed;
  z-index: 1300;
  transition:
    left 200ms ease,
    top 200ms ease;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__tooltip .T-P {
  position: relative;
  width: auto;
  max-width: 500px;
}

.inboxsdk__tooltip .inboxsdk__tooltip_arrow {
  position: fixed;
  z-index: 1400;
  margin-top: -1px;
  transition:
    left 200ms ease,
    top 200ms ease;
}

.inboxsdk__tooltip .inboxsdk__tooltip_close {
  user-select: none;
}

.inboxsdk__tooltip .inboxsdk__button {
  margin-right: 0px;
}

.inboxsdk__tooltip .inboxsdk__tooltip_image {
  max-height: 300px;
  max-width: 500px;
  overflow: hidden;
  height: auto;
}

.inboxsdk__tooltip .inboxsdk__tooltip_image > img {
  max-height: 300px;
  max-width: 500px;
}

/* end tooltip */

/* attachment card */

.inboxsdk__attachmentCard img.aQG.aYB {
  max-width: 178px;
  min-width: 178px;
  min-height: 118px;
}

.inboxsdk__attachmentCard img.aZG.aYw {
  background: none;
}

/* add some margins between cards so 4+ cards don't hit each other */

.aQw > .T-I.J-J5-Ji.L3 {
  margin-top: 5px;
}

/* end attachment card */

/* keyboard shortcut help */

table.cf.wd.inboxsdk__shortcutHelp_table {
  margin-bottom: 15px;
}

.inboxsdk__shortcutHelp_table td.Dn {
  display: inline-block;
  width: 50%;
}

.inboxsdk__shortcutHelp_table table.cf {
  display: block;
}

.inboxsdk__shortcutHelp_table tbody tbody {
  display: block;
}

.inboxsdk__shortcutHelp_table tbody tbody tr {
  display: block;
  white-space: nowrap;
}

.inboxsdk__shortcutHelp_table td.wg.Dn {
  display: inline-block;
  width: 45%;
}

.inboxsdk__shortcutHelp_table span.wb {
  margin-left: 3px;
}

.inboxsdk__shortcutHelp_table td.we.Dn {
  width: 60%;
  white-space: normal;
}

.inboxsdk__shortcutHelp_title img.inboxsdk__icon {
  height: 21px;
  width: 21px;
  vertical-align: middle;
  margin-right: 10px;
  border-radius: 4px;
}

/* end keyboard shortcut help */

/* search suggestions */

.asor.inboxsdk__custom_suggestion {
  display: flex;
  justify-content: center;
  align-items: center;
}

.inboxsdk__custom_suggestion img {
  max-width: 32px;
  max-height: 32px;
}

.inboxsdk__custom_suggestion_iconHTML {
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  left: 8px;
  height: 32px;
  width: 43px;
}

/* Adjust positioning when no description present */
.gstq_d .inboxsdk__custom_suggestion_iconHTML {
  margin-top: -8px;
}

/* end send suggestions */

/* app toolbar */

.inboxsdk__appButton {
  margin-right: 8px;
}

.inboxsdk__appButton + .inboxsdk__appButton {
  margin-left: 16px;
}

.inboxsdk__appButton.inboxsdk__appButton_noGPlus {
  margin-right: 0px;
}

.inboxsdk__appButton .inboxsdk__button_icon {
  margin-right: 5px;
  position: relative;
}

.inboxsdk__appButton a {
  color: #404040;
  text-decoration: none;
  line-height: 24px;
}

.inboxsdk__appButton.inboxsdk__appButton_noGPlus a {
  line-height: 30px;
}

.inboxsdk__appButton a:hover {
  text-decoration: underline;
  color: #000;
}

.inboxsdk__gmail_dark_theme .inboxsdk__appButton a {
  color: #eee;
}

.inboxsdk__gmail_dark_theme .inboxsdk__appButton a:hover {
  color: #fff;
}

.inboxsdk__appButton_tooltip {
  outline: none;
  transition: none;
  animation: gb__a 0.2s;
}

.inboxsdk__appButton_tooltip .inboxsdk__tooltip_close {
  display: none;
}

.inboxsdk__tooltip.inboxsdk__appButton_tooltip .T-P {
  padding: 0px;
}

.inboxsdk__tooltip.inboxsdk__appButton_tooltip .aRM {
  padding: 0px;
  white-space: initial;
  text-align: center;
  font:
    normal normal normal normal 16px / normal arial,
    sans-serif;
}

.inboxsdk__tooltip.inboxsdk__appButton_tooltip .inboxsdk__tooltip_arrow {
  transform-origin: top;
  transform: rotateZ(180deg);
  margin-top: 9px;
}

/* resize based on width */

.inboxsdk__searchIsNarrow .streak__appToolbarButton_title {
  display: none;
}

/* end resize based on width */

/* end app toolbar */

/* custom message views */

.inboxsdk__custom_message_view {
  display: flex;
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid #efefef;
  border-collapse: collapse;
}

.inboxsdk__custom_message_view_hidden {
  display: none;
}

/* when cusotm message is right after the last message with its reply */
.h7.ie + .inboxsdk__custom_message_view {
  margin-top: 5px;
}

/* when custom message is after the super collapsed message elements */
.kQ + .inboxsdk__custom_message_view,
.kx + .inboxsdk__custom_message_view {
  margin-top: 1px;
}

.inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed {
  cursor: pointer;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon {
  padding-left: 16px;
  padding-right: 16px;
  flex-shrink: 0;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon img {
  height: 32px;
  width: 32px;
  border-radius: 50%;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_content {
  width: 100%;
  min-width: 0px;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_header {
  cursor: pointer;
}

.inboxsdk__custom_message_view_app_notice_content {
  position: relative;
  display: flex;
  justify-content: center;
  z-index: 1;
}

.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container {
  position: relative;
  width: auto !important;
  min-width: 32px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__custom_message_view_app_notice_content {
  align-items: center;
  display: flex;
  font-size: 0.75rem !important;
  justify-content: flex-start;
  margin-left: 0;
  padding: 0px;
  top: 0;
}

.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container:hover::before {
  content: none !important;
}

.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container
  > span:first-child {
  display: none;
}

.inboxsdk__custom_message_view_app_notice_container::before {
  position: absolute;
}

.inboxsdk__custom_message_view_app_notice_content > * {
  color: #555;
}

table[role='presentation'].inboxsdk__thread_view_with_custom_view {
  table-layout: fixed;
}

table[role='presentation'].inboxsdk__thread_view_with_custom_view > tr {
  display: block;
}

/* end custom message views */

/* butter/snack bar */

.inboxsdk__butterbar.inboxsdk__butterbar_error {
  background-color: #c53929 !important;
}

.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button'] {
  color: #fff;
}

.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button']::before {
  background: rgb(255 255 255 / 8%);
}

/* end butter/snack bar */

/* support menu item */
.inboxsdk__support_menuItem:hover {
  background-color: #eee;
  outline: 1px dashed transparent;
}

.inboxsdk__compose_addressList {
  display: flex !important;
}

/* end support menu item */

/* compose popover */
.inboxsdk__linkPopOver_section_container {
  position: absolute;
  width: 100%;
  left: 0;
  margin-top: 8px;
  box-sizing: border-box;
}

/* version with new gmail style (late 2024) popover: match width better */
.VRezbc.phnWcc .inboxsdk__linkPopOver_section_container {
  padding: 0 5px;
}

.inboxsdk__linkPopOver_section {
  width: 100%;
  background: #fff;
  border: 1px solid;
  border-color: #bbb #bbb #a8a8a8;
  font:
    13px arial,
    sans-serif;
  padding: 5px 8px;
  margin-bottom: 5px;
  box-sizing: border-box;
  box-shadow: 0 1px 3px rgb(0 0 0 / 20%);
}

/* end compose popover */

/*
 Toolbar/Thread button style fix for
 when the gmail setting "Button labels" is set to "text"
*/

.T-I.J-J5-Ji.T-I-ax7.inboxsdk__button .asa::after {
  width: auto;
}

/* ListRouteView hideFilterToolbar() support */
.inboxsdk__hide_filter_toolbar .G6[role="toolbar"] /* chat+meet off */,
.inboxsdk__hide_filter_toolbar .biW[data-srm="email"] /* chat+meet on */ {
  display: none;
}

.inboxsdk__hide_filter_toolbar .G-atb.PY /* chat+meet off */ {
  min-height: 32px !important;
  height: 32px !important;
}
`, null], "sourceRoot": "" }]);
                  var app_sidebar_waiting_platform = "inboxsdk__nJrOYb9x4IUalKhkqH70";
                  var app_sidebar_main = "inboxsdk__YVRXKNcaUvgm8xbnhvbA";
                  var app_sidebar = "inboxsdk__L1YTilBb_3NY6uyjljIg";
                  var app_sidebar_content_area = "inboxsdk__ZsVjiThsnbCmCG_X1Vvn";
                  var app_sidebar_content_panel = "inboxsdk__RRnCd87hoA2uHeC1Z_FE";
                  var app_sidebar_content_panel_top_line = "inboxsdk__iYzl6PjYB9v7KGQNbONH";
                  var expanded = "inboxsdk__o9YcckDJql686JS0n2cc";
                  var dragged = "inboxsdk__XdCPRDkO7zSIv6nU4USH";
                  var showControls = "inboxsdk__vTsoFgWgM9ldKGsRJYHd";
                  var app_sidebar_content_panel_title = "inboxsdk__lD1h9YUibxcHdtWGdiWq";
                  var app_sidebar_content_panel_title_text = "inboxsdk__p_cMIiZvN4vwQdGOpCts";
                  var hideTitleBar = "inboxsdk__fQK2Ffccj51PVtC_ibDc";
                  var app_sidebar_content_panel_grip = "inboxsdk__KudoZ1EBFoQsddbSavvj";
                  var app_sidebar_content_panel_title_icon_container = "inboxsdk__TFQRFr4aJVmDmx2llTVx";
                  var app_sidebar_content_panel_title_icon = "inboxsdk__Yzt2_upvw7fe6BjWdlhZ";
                  var app_sidebar_content_panel_toggle = "inboxsdk__M4Frio2Us0lwSTltblkg";
                  var app_sidebar_content_panel_toggle_button = "inboxsdk__Nr6Udyn2ocUynKpdfxh1";
                  var app_sidebar_content_panel_content = "inboxsdk__QsikHKWmzD0Ovsg3wrIw";
                  var sidebar_iconArea = "inboxsdk__z3cCBtGXYneog44Vf16J";
                  var sidebar_button_container = "inboxsdk__ARG5bpD2vntIyElH978u";
                  var thread_noticeBar = "inboxsdk__QbxpXL1mja3SlO_1nJOS";
                  var app_sidebar_in_use = "inboxsdk__lmkPHCz841PzU2vywMZI";
                  var container_app_sidebar_no_icons = "inboxsdk__IpDkQtEZuh257muFXot6";
                  var app_sidebar_container = "inboxsdk__jQiSbhX57v1JCl6fIbdb";
                  var companion_container_app_sidebar_in_use = "inboxsdk__cnd4jAy3zFUYdR_NdMxT";
                  const __WEBPACK_DEFAULT_EXPORT__ = ___CSS_LOADER_EXPORT___;
                })
              ),
              /***/
              6408: (
                /***/
                (function(__unused_webpack_module2, exports3, __webpack_require__3) {
                  "use strict";
                  var __importDefault = this && this.__importDefault || function(mod) {
                    return mod && mod.__esModule ? mod : { "default": mod };
                  };
                  Object.defineProperty(exports3, "__esModule", { value: true });
                  exports3._62To10 = exports3._36To10 = exports3._32To10 = exports3._16To10 = exports3._8To10 = exports3._2To10 = exports3._10To62 = exports3._10To36 = exports3._10To32 = exports3._10To16 = exports3._10To8 = exports3._10To2 = exports3.convertBase = void 0;
                  var decimal_js_1 = __importDefault(__webpack_require__3(2400));
                  decimal_js_1.default.set({ precision: 1e9 });
                  decimal_js_1.default.set({ toExpPos: 9e15 });
                  var _convertFromDecimal = function(num, base) {
                    var convertedNumArr = [];
                    var decimalNum = new decimal_js_1.default(num);
                    var decimalBase = new decimal_js_1.default(base.length);
                    while (!decimalNum.isZero()) {
                      var remainder = decimalNum.mod(decimalBase).toNumber();
                      decimalNum = decimalNum.dividedToIntegerBy(decimalBase);
                      convertedNumArr.unshift(base.substr(remainder, 1));
                    }
                    if (convertedNumArr.length === 0) {
                      convertedNumArr.unshift("0");
                    }
                    return convertedNumArr.join("");
                  };
                  var _convertToDecimal = function(num, base) {
                    var baseChar2Idx = {};
                    for (var i2 = 0; i2 < base.length; i2++) {
                      baseChar2Idx[base.substr(i2, 1)] = new decimal_js_1.default(i2);
                    }
                    var decimalBase = new decimal_js_1.default(base.length);
                    var convertedNum = new decimal_js_1.default(0);
                    for (var i2 = 0; i2 < num.length; i2++) {
                      var tmpDecimal1 = baseChar2Idx[num.substr((i2 + 1) * -1, 1)];
                      var tmpDecimal2 = decimal_js_1.default.pow(decimalBase, i2);
                      var tmpDecimal3 = tmpDecimal1.times(tmpDecimal2);
                      convertedNum = convertedNum.plus(tmpDecimal3);
                    }
                    return convertedNum.toString();
                  };
                  var convertBase = function(num, originalBase, newBase) {
                    var BASE62 = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
                    if (typeof num !== "number" && typeof num !== "string" || typeof num === "number" && !isFinite(num)) {
                      throw new Error("First augument must be a number or string.");
                    }
                    if (typeof num === "number") {
                      num = num.toString();
                    }
                    if (typeof originalBase !== "number" && typeof originalBase !== "string") {
                      throw new Error("Second augument must be a number or string.");
                    }
                    if (typeof originalBase === "number") {
                      if (!Number.isInteger(originalBase)) {
                        throw new Error("Second augument must be integer.");
                      }
                      if (!(2 <= originalBase && originalBase <= 62)) {
                        throw new Error("Second augument must be between 2 and 62.");
                      }
                      originalBase = BASE62.substr(0, originalBase);
                    }
                    if (originalBase.length <= 1) {
                      throw new Error("Second augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");
                    }
                    if (originalBase.length !== new Set(originalBase).size) {
                      throw new Error("Second augument must not contain the same characters.");
                    }
                    var availableCharacters = new RegExp("^[" + originalBase + "]+$");
                    if (!availableCharacters.test(num)) {
                      throw new Error("First augument must consist of second augument.");
                    }
                    if (typeof newBase !== "number" && typeof newBase !== "string") {
                      throw new Error("Third augument must be a number or string.");
                    }
                    if (typeof newBase === "number") {
                      if (!Number.isInteger(newBase)) {
                        throw new Error("Third augument must be integer.");
                      }
                      if (!(2 <= newBase && newBase <= 62)) {
                        throw new Error("Third augument must be between 2 and 62.");
                      }
                      newBase = BASE62.substr(0, newBase);
                    }
                    if (newBase.length <= 1) {
                      throw new Error("Third augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");
                    }
                    if (newBase.length !== new Set(newBase).size) {
                      throw new Error("Third augument must not contain the same characters.");
                    }
                    var tmpNum = _convertToDecimal(num, originalBase);
                    return _convertFromDecimal(tmpNum, newBase);
                  };
                  exports3.convertBase = convertBase;
                  var _10To2 = function(num) {
                    return convertBase(num, 10, 2);
                  };
                  exports3._10To2 = _10To2;
                  var _10To8 = function(num) {
                    return convertBase(num, 10, 8);
                  };
                  exports3._10To8 = _10To8;
                  var _10To16 = function(num) {
                    return convertBase(num, 10, 16);
                  };
                  exports3._10To16 = _10To16;
                  var _10To32 = function(num) {
                    return convertBase(num, 10, 32);
                  };
                  exports3._10To32 = _10To32;
                  var _10To36 = function(num) {
                    return convertBase(num, 10, 36);
                  };
                  exports3._10To36 = _10To36;
                  var _10To62 = function(num) {
                    return convertBase(num, 10, 62);
                  };
                  exports3._10To62 = _10To62;
                  var _2To10 = function(num) {
                    return convertBase(num, 2, 10);
                  };
                  exports3._2To10 = _2To10;
                  var _8To10 = function(num) {
                    return convertBase(num, 8, 10);
                  };
                  exports3._8To10 = _8To10;
                  var _16To10 = function(num) {
                    return convertBase(num, 16, 10);
                  };
                  exports3._16To10 = _16To10;
                  var _32To10 = function(num) {
                    return convertBase(num, 32, 10);
                  };
                  exports3._32To10 = _32To10;
                  var _36To10 = function(num) {
                    return convertBase(num, 36, 10);
                  };
                  exports3._36To10 = _36To10;
                  var _62To10 = function(num) {
                    return convertBase(num, 62, 10);
                  };
                  exports3._62To10 = _62To10;
                })
              ),
              /***/
              9060: (
                /***/
                ((module3) => {
                  module3.exports = function newArray(start, end) {
                    var n0 = typeof start === "number", n1 = typeof end === "number";
                    if (n0 && !n1) {
                      end = start;
                      start = 0;
                    } else if (!n0 && !n1) {
                      start = 0;
                      end = 0;
                    }
                    start = start | 0;
                    end = end | 0;
                    var len = end - start;
                    if (len < 0)
                      throw new Error("array length must be positive");
                    var a = new Array(len);
                    for (var i2 = 0, c = start; i2 < len; i2++, c++)
                      a[i2] = c;
                    return a;
                  };
                })
              ),
              /***/
              4622: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  var rawAsap = __webpack_require__3(6285);
                  var freeTasks = [];
                  var pendingErrors = [];
                  var requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);
                  function throwFirstError() {
                    if (pendingErrors.length) {
                      throw pendingErrors.shift();
                    }
                  }
                  module3.exports = asap;
                  function asap(task) {
                    var rawTask;
                    if (freeTasks.length) {
                      rawTask = freeTasks.pop();
                    } else {
                      rawTask = new RawTask();
                    }
                    rawTask.task = task;
                    rawAsap(rawTask);
                  }
                  function RawTask() {
                    this.task = null;
                  }
                  RawTask.prototype.call = function() {
                    try {
                      this.task.call();
                    } catch (error) {
                      if (asap.onerror) {
                        asap.onerror(error);
                      } else {
                        pendingErrors.push(error);
                        requestErrorThrow();
                      }
                    } finally {
                      this.task = null;
                      freeTasks[freeTasks.length] = this;
                    }
                  };
                })
              ),
              /***/
              6285: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = rawAsap;
                  function rawAsap(task) {
                    if (!queue.length) {
                      requestFlush();
                      flushing = true;
                    }
                    queue[queue.length] = task;
                  }
                  var queue = [];
                  var flushing = false;
                  var requestFlush;
                  var index = 0;
                  var capacity = 1024;
                  function flush() {
                    while (index < queue.length) {
                      var currentIndex = index;
                      index = index + 1;
                      queue[currentIndex].call();
                      if (index > capacity) {
                        for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {
                          queue[scan] = queue[scan + index];
                        }
                        queue.length -= index;
                        index = 0;
                      }
                    }
                    queue.length = 0;
                    index = 0;
                    flushing = false;
                  }
                  var scope = typeof __webpack_require__3.g !== "undefined" ? __webpack_require__3.g : self;
                  var BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;
                  if (typeof BrowserMutationObserver === "function") {
                    requestFlush = makeRequestCallFromMutationObserver(flush);
                  } else {
                    requestFlush = makeRequestCallFromTimer(flush);
                  }
                  rawAsap.requestFlush = requestFlush;
                  function makeRequestCallFromMutationObserver(callback) {
                    var toggle = 1;
                    var observer = new BrowserMutationObserver(callback);
                    var node = document.createTextNode("");
                    observer.observe(node, { characterData: true });
                    return function requestCall() {
                      toggle = -toggle;
                      node.data = toggle;
                    };
                  }
                  function makeRequestCallFromTimer(callback) {
                    return function requestCall() {
                      var timeoutHandle = setTimeout(handleTimer, 0);
                      var intervalHandle = setInterval(handleTimer, 50);
                      function handleTimer() {
                        clearTimeout(timeoutHandle);
                        clearInterval(intervalHandle);
                        callback();
                      }
                    };
                  }
                  rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;
                })
              ),
              /***/
              1812: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = autoHtml;
                  var _escape = _interopRequireDefault(__webpack_require__3(3131));
                  function _interopRequireDefault(obj2) {
                    return obj2 && obj2.__esModule ? obj2 : { default: obj2 };
                  }
                  function autoHtml(templateParts) {
                    var parts = new Array(templateParts.length * 2 - 1);
                    parts[0] = templateParts[0];
                    for (var i2 = 0, len = arguments.length <= 1 ? 0 : arguments.length - 1; i2 < len; i2++) {
                      var value = i2 + 1 < 1 || arguments.length <= i2 + 1 ? void 0 : arguments[i2 + 1];
                      parts[2 * i2 + 1] = value && Object.prototype.hasOwnProperty.call(value, "__html") ? value.__html : (0, _escape.default)(value);
                      parts[2 * i2 + 2] = templateParts[i2 + 1];
                    }
                    return parts.join("");
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              2504: (
                /***/
                ((__unused_webpack_module2, exports3) => {
                  "use strict";
                  exports3.byteLength = byteLength;
                  exports3.toByteArray = toByteArray;
                  exports3.fromByteArray = fromByteArray;
                  var lookup = [];
                  var revLookup = [];
                  var Arr = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
                  var code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
                  for (var i2 = 0, len = code.length; i2 < len; ++i2) {
                    lookup[i2] = code[i2];
                    revLookup[code.charCodeAt(i2)] = i2;
                  }
                  revLookup["-".charCodeAt(0)] = 62;
                  revLookup["_".charCodeAt(0)] = 63;
                  function getLens(b64) {
                    var len2 = b64.length;
                    if (len2 % 4 > 0) {
                      throw new Error("Invalid string. Length must be a multiple of 4");
                    }
                    var validLen = b64.indexOf("=");
                    if (validLen === -1) validLen = len2;
                    var placeHoldersLen = validLen === len2 ? 0 : 4 - validLen % 4;
                    return [validLen, placeHoldersLen];
                  }
                  function byteLength(b64) {
                    var lens = getLens(b64);
                    var validLen = lens[0];
                    var placeHoldersLen = lens[1];
                    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
                  }
                  function _byteLength(b64, validLen, placeHoldersLen) {
                    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
                  }
                  function toByteArray(b64) {
                    var tmp;
                    var lens = getLens(b64);
                    var validLen = lens[0];
                    var placeHoldersLen = lens[1];
                    var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));
                    var curByte = 0;
                    var len2 = placeHoldersLen > 0 ? validLen - 4 : validLen;
                    var i3;
                    for (i3 = 0; i3 < len2; i3 += 4) {
                      tmp = revLookup[b64.charCodeAt(i3)] << 18 | revLookup[b64.charCodeAt(i3 + 1)] << 12 | revLookup[b64.charCodeAt(i3 + 2)] << 6 | revLookup[b64.charCodeAt(i3 + 3)];
                      arr[curByte++] = tmp >> 16 & 255;
                      arr[curByte++] = tmp >> 8 & 255;
                      arr[curByte++] = tmp & 255;
                    }
                    if (placeHoldersLen === 2) {
                      tmp = revLookup[b64.charCodeAt(i3)] << 2 | revLookup[b64.charCodeAt(i3 + 1)] >> 4;
                      arr[curByte++] = tmp & 255;
                    }
                    if (placeHoldersLen === 1) {
                      tmp = revLookup[b64.charCodeAt(i3)] << 10 | revLookup[b64.charCodeAt(i3 + 1)] << 4 | revLookup[b64.charCodeAt(i3 + 2)] >> 2;
                      arr[curByte++] = tmp >> 8 & 255;
                      arr[curByte++] = tmp & 255;
                    }
                    return arr;
                  }
                  function tripletToBase64(num) {
                    return lookup[num >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[num & 63];
                  }
                  function encodeChunk(uint8, start, end) {
                    var tmp;
                    var output = [];
                    for (var i3 = start; i3 < end; i3 += 3) {
                      tmp = (uint8[i3] << 16 & 16711680) + (uint8[i3 + 1] << 8 & 65280) + (uint8[i3 + 2] & 255);
                      output.push(tripletToBase64(tmp));
                    }
                    return output.join("");
                  }
                  function fromByteArray(uint8) {
                    var tmp;
                    var len2 = uint8.length;
                    var extraBytes = len2 % 3;
                    var parts = [];
                    var maxChunkLength = 16383;
                    for (var i3 = 0, len22 = len2 - extraBytes; i3 < len22; i3 += maxChunkLength) {
                      parts.push(encodeChunk(uint8, i3, i3 + maxChunkLength > len22 ? len22 : i3 + maxChunkLength));
                    }
                    if (extraBytes === 1) {
                      tmp = uint8[len2 - 1];
                      parts.push(
                        lookup[tmp >> 2] + lookup[tmp << 4 & 63] + "=="
                      );
                    } else if (extraBytes === 2) {
                      tmp = (uint8[len2 - 2] << 8) + uint8[len2 - 1];
                      parts.push(
                        lookup[tmp >> 10] + lookup[tmp >> 4 & 63] + lookup[tmp << 2 & 63] + "="
                      );
                    }
                    return parts.join("");
                  }
                })
              ),
              /***/
              2180: (
                /***/
                (function(module3, exports3, __webpack_require__3) {
                  var __WEBPACK_AMD_DEFINE_RESULT__;
                  ;
                  (function(globalObject) {
                    "use strict";
                    var BigNumber, isNumeric = /^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i, mathceil = Math.ceil, mathfloor = Math.floor, bignumberError = "[BigNumber Error] ", tooManyDigits = bignumberError + "Number primitive has more than 15 significant digits: ", BASE = 1e14, LOG_BASE = 14, MAX_SAFE_INTEGER = 9007199254740991, POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13], SQRT_BASE = 1e7, MAX = 1e9;
                    function clone(configObject) {
                      var div, convertBase, parseNumeric, P = BigNumber2.prototype = { constructor: BigNumber2, toString: null, valueOf: null }, ONE = new BigNumber2(1), DECIMAL_PLACES = 20, ROUNDING_MODE = 4, TO_EXP_NEG = -7, TO_EXP_POS = 21, MIN_EXP = -1e7, MAX_EXP = 1e7, CRYPTO = false, MODULO_MODE = 1, POW_PRECISION = 0, FORMAT = {
                        prefix: "",
                        groupSize: 3,
                        secondaryGroupSize: 0,
                        groupSeparator: ",",
                        decimalSeparator: ".",
                        fractionGroupSize: 0,
                        fractionGroupSeparator: "\xA0",
                        // non-breaking space
                        suffix: ""
                      }, ALPHABET = "0123456789abcdefghijklmnopqrstuvwxyz";
                      function BigNumber2(v, b) {
                        var alphabet, c, caseChanged, e, i2, isNum, len, str, x2 = this;
                        if (!(x2 instanceof BigNumber2)) return new BigNumber2(v, b);
                        if (b == null) {
                          if (v && v._isBigNumber === true) {
                            x2.s = v.s;
                            if (!v.c || v.e > MAX_EXP) {
                              x2.c = x2.e = null;
                            } else if (v.e < MIN_EXP) {
                              x2.c = [x2.e = 0];
                            } else {
                              x2.e = v.e;
                              x2.c = v.c.slice();
                            }
                            return;
                          }
                          if ((isNum = typeof v == "number") && v * 0 == 0) {
                            x2.s = 1 / v < 0 ? (v = -v, -1) : 1;
                            if (v === ~~v) {
                              for (e = 0, i2 = v; i2 >= 10; i2 /= 10, e++) ;
                              if (e > MAX_EXP) {
                                x2.c = x2.e = null;
                              } else {
                                x2.e = e;
                                x2.c = [v];
                              }
                              return;
                            }
                            str = String(v);
                          } else {
                            if (!isNumeric.test(str = String(v))) return parseNumeric(x2, str, isNum);
                            x2.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;
                          }
                          if ((e = str.indexOf(".")) > -1) str = str.replace(".", "");
                          if ((i2 = str.search(/e/i)) > 0) {
                            if (e < 0) e = i2;
                            e += +str.slice(i2 + 1);
                            str = str.substring(0, i2);
                          } else if (e < 0) {
                            e = str.length;
                          }
                        } else {
                          intCheck(b, 2, ALPHABET.length, "Base");
                          if (b == 10) {
                            x2 = new BigNumber2(v);
                            return round(x2, DECIMAL_PLACES + x2.e + 1, ROUNDING_MODE);
                          }
                          str = String(v);
                          if (isNum = typeof v == "number") {
                            if (v * 0 != 0) return parseNumeric(x2, str, isNum, b);
                            x2.s = 1 / v < 0 ? (str = str.slice(1), -1) : 1;
                            if (BigNumber2.DEBUG && str.replace(/^0\.0*|\./, "").length > 15) {
                              throw Error(tooManyDigits + v);
                            }
                          } else {
                            x2.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;
                          }
                          alphabet = ALPHABET.slice(0, b);
                          e = i2 = 0;
                          for (len = str.length; i2 < len; i2++) {
                            if (alphabet.indexOf(c = str.charAt(i2)) < 0) {
                              if (c == ".") {
                                if (i2 > e) {
                                  e = len;
                                  continue;
                                }
                              } else if (!caseChanged) {
                                if (str == str.toUpperCase() && (str = str.toLowerCase()) || str == str.toLowerCase() && (str = str.toUpperCase())) {
                                  caseChanged = true;
                                  i2 = -1;
                                  e = 0;
                                  continue;
                                }
                              }
                              return parseNumeric(x2, String(v), isNum, b);
                            }
                          }
                          isNum = false;
                          str = convertBase(str, b, 10, x2.s);
                          if ((e = str.indexOf(".")) > -1) str = str.replace(".", "");
                          else e = str.length;
                        }
                        for (i2 = 0; str.charCodeAt(i2) === 48; i2++) ;
                        for (len = str.length; str.charCodeAt(--len) === 48; ) ;
                        if (str = str.slice(i2, ++len)) {
                          len -= i2;
                          if (isNum && BigNumber2.DEBUG && len > 15 && (v > MAX_SAFE_INTEGER || v !== mathfloor(v))) {
                            throw Error(tooManyDigits + x2.s * v);
                          }
                          if ((e = e - i2 - 1) > MAX_EXP) {
                            x2.c = x2.e = null;
                          } else if (e < MIN_EXP) {
                            x2.c = [x2.e = 0];
                          } else {
                            x2.e = e;
                            x2.c = [];
                            i2 = (e + 1) % LOG_BASE;
                            if (e < 0) i2 += LOG_BASE;
                            if (i2 < len) {
                              if (i2) x2.c.push(+str.slice(0, i2));
                              for (len -= LOG_BASE; i2 < len; ) {
                                x2.c.push(+str.slice(i2, i2 += LOG_BASE));
                              }
                              i2 = LOG_BASE - (str = str.slice(i2)).length;
                            } else {
                              i2 -= len;
                            }
                            for (; i2--; str += "0") ;
                            x2.c.push(+str);
                          }
                        } else {
                          x2.c = [x2.e = 0];
                        }
                      }
                      BigNumber2.clone = clone;
                      BigNumber2.ROUND_UP = 0;
                      BigNumber2.ROUND_DOWN = 1;
                      BigNumber2.ROUND_CEIL = 2;
                      BigNumber2.ROUND_FLOOR = 3;
                      BigNumber2.ROUND_HALF_UP = 4;
                      BigNumber2.ROUND_HALF_DOWN = 5;
                      BigNumber2.ROUND_HALF_EVEN = 6;
                      BigNumber2.ROUND_HALF_CEIL = 7;
                      BigNumber2.ROUND_HALF_FLOOR = 8;
                      BigNumber2.EUCLID = 9;
                      BigNumber2.config = BigNumber2.set = function(obj2) {
                        var p, v;
                        if (obj2 != null) {
                          if (typeof obj2 == "object") {
                            if (obj2.hasOwnProperty(p = "DECIMAL_PLACES")) {
                              v = obj2[p];
                              intCheck(v, 0, MAX, p);
                              DECIMAL_PLACES = v;
                            }
                            if (obj2.hasOwnProperty(p = "ROUNDING_MODE")) {
                              v = obj2[p];
                              intCheck(v, 0, 8, p);
                              ROUNDING_MODE = v;
                            }
                            if (obj2.hasOwnProperty(p = "EXPONENTIAL_AT")) {
                              v = obj2[p];
                              if (v && v.pop) {
                                intCheck(v[0], -MAX, 0, p);
                                intCheck(v[1], 0, MAX, p);
                                TO_EXP_NEG = v[0];
                                TO_EXP_POS = v[1];
                              } else {
                                intCheck(v, -MAX, MAX, p);
                                TO_EXP_NEG = -(TO_EXP_POS = v < 0 ? -v : v);
                              }
                            }
                            if (obj2.hasOwnProperty(p = "RANGE")) {
                              v = obj2[p];
                              if (v && v.pop) {
                                intCheck(v[0], -MAX, -1, p);
                                intCheck(v[1], 1, MAX, p);
                                MIN_EXP = v[0];
                                MAX_EXP = v[1];
                              } else {
                                intCheck(v, -MAX, MAX, p);
                                if (v) {
                                  MIN_EXP = -(MAX_EXP = v < 0 ? -v : v);
                                } else {
                                  throw Error(bignumberError + p + " cannot be zero: " + v);
                                }
                              }
                            }
                            if (obj2.hasOwnProperty(p = "CRYPTO")) {
                              v = obj2[p];
                              if (v === !!v) {
                                if (v) {
                                  if (typeof crypto != "undefined" && crypto && (crypto.getRandomValues || crypto.randomBytes)) {
                                    CRYPTO = v;
                                  } else {
                                    CRYPTO = !v;
                                    throw Error(bignumberError + "crypto unavailable");
                                  }
                                } else {
                                  CRYPTO = v;
                                }
                              } else {
                                throw Error(bignumberError + p + " not true or false: " + v);
                              }
                            }
                            if (obj2.hasOwnProperty(p = "MODULO_MODE")) {
                              v = obj2[p];
                              intCheck(v, 0, 9, p);
                              MODULO_MODE = v;
                            }
                            if (obj2.hasOwnProperty(p = "POW_PRECISION")) {
                              v = obj2[p];
                              intCheck(v, 0, MAX, p);
                              POW_PRECISION = v;
                            }
                            if (obj2.hasOwnProperty(p = "FORMAT")) {
                              v = obj2[p];
                              if (typeof v == "object") FORMAT = v;
                              else throw Error(bignumberError + p + " not an object: " + v);
                            }
                            if (obj2.hasOwnProperty(p = "ALPHABET")) {
                              v = obj2[p];
                              if (typeof v == "string" && !/^.?$|[+\-.\s]|(.).*\1/.test(v)) {
                                ALPHABET = v;
                              } else {
                                throw Error(bignumberError + p + " invalid: " + v);
                              }
                            }
                          } else {
                            throw Error(bignumberError + "Object expected: " + obj2);
                          }
                        }
                        return {
                          DECIMAL_PLACES,
                          ROUNDING_MODE,
                          EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],
                          RANGE: [MIN_EXP, MAX_EXP],
                          CRYPTO,
                          MODULO_MODE,
                          POW_PRECISION,
                          FORMAT,
                          ALPHABET
                        };
                      };
                      BigNumber2.isBigNumber = function(v) {
                        if (!v || v._isBigNumber !== true) return false;
                        if (!BigNumber2.DEBUG) return true;
                        var i2, n, c = v.c, e = v.e, s = v.s;
                        out: if ({}.toString.call(c) == "[object Array]") {
                          if ((s === 1 || s === -1) && e >= -MAX && e <= MAX && e === mathfloor(e)) {
                            if (c[0] === 0) {
                              if (e === 0 && c.length === 1) return true;
                              break out;
                            }
                            i2 = (e + 1) % LOG_BASE;
                            if (i2 < 1) i2 += LOG_BASE;
                            if (String(c[0]).length == i2) {
                              for (i2 = 0; i2 < c.length; i2++) {
                                n = c[i2];
                                if (n < 0 || n >= BASE || n !== mathfloor(n)) break out;
                              }
                              if (n !== 0) return true;
                            }
                          }
                        } else if (c === null && e === null && (s === null || s === 1 || s === -1)) {
                          return true;
                        }
                        throw Error(bignumberError + "Invalid BigNumber: " + v);
                      };
                      BigNumber2.maximum = BigNumber2.max = function() {
                        return maxOrMin(arguments, P.lt);
                      };
                      BigNumber2.minimum = BigNumber2.min = function() {
                        return maxOrMin(arguments, P.gt);
                      };
                      BigNumber2.random = (function() {
                        var pow2_53 = 9007199254740992;
                        var random53bitInt = Math.random() * pow2_53 & 2097151 ? function() {
                          return mathfloor(Math.random() * pow2_53);
                        } : function() {
                          return (Math.random() * 1073741824 | 0) * 8388608 + (Math.random() * 8388608 | 0);
                        };
                        return function(dp) {
                          var a, b, e, k, v, i2 = 0, c = [], rand = new BigNumber2(ONE);
                          if (dp == null) dp = DECIMAL_PLACES;
                          else intCheck(dp, 0, MAX);
                          k = mathceil(dp / LOG_BASE);
                          if (CRYPTO) {
                            if (crypto.getRandomValues) {
                              a = crypto.getRandomValues(new Uint32Array(k *= 2));
                              for (; i2 < k; ) {
                                v = a[i2] * 131072 + (a[i2 + 1] >>> 11);
                                if (v >= 9e15) {
                                  b = crypto.getRandomValues(new Uint32Array(2));
                                  a[i2] = b[0];
                                  a[i2 + 1] = b[1];
                                } else {
                                  c.push(v % 1e14);
                                  i2 += 2;
                                }
                              }
                              i2 = k / 2;
                            } else if (crypto.randomBytes) {
                              a = crypto.randomBytes(k *= 7);
                              for (; i2 < k; ) {
                                v = (a[i2] & 31) * 281474976710656 + a[i2 + 1] * 1099511627776 + a[i2 + 2] * 4294967296 + a[i2 + 3] * 16777216 + (a[i2 + 4] << 16) + (a[i2 + 5] << 8) + a[i2 + 6];
                                if (v >= 9e15) {
                                  crypto.randomBytes(7).copy(a, i2);
                                } else {
                                  c.push(v % 1e14);
                                  i2 += 7;
                                }
                              }
                              i2 = k / 7;
                            } else {
                              CRYPTO = false;
                              throw Error(bignumberError + "crypto unavailable");
                            }
                          }
                          if (!CRYPTO) {
                            for (; i2 < k; ) {
                              v = random53bitInt();
                              if (v < 9e15) c[i2++] = v % 1e14;
                            }
                          }
                          k = c[--i2];
                          dp %= LOG_BASE;
                          if (k && dp) {
                            v = POWS_TEN[LOG_BASE - dp];
                            c[i2] = mathfloor(k / v) * v;
                          }
                          for (; c[i2] === 0; c.pop(), i2--) ;
                          if (i2 < 0) {
                            c = [e = 0];
                          } else {
                            for (e = -1; c[0] === 0; c.splice(0, 1), e -= LOG_BASE) ;
                            for (i2 = 1, v = c[0]; v >= 10; v /= 10, i2++) ;
                            if (i2 < LOG_BASE) e -= LOG_BASE - i2;
                          }
                          rand.e = e;
                          rand.c = c;
                          return rand;
                        };
                      })();
                      BigNumber2.sum = function() {
                        var i2 = 1, args = arguments, sum = new BigNumber2(args[0]);
                        for (; i2 < args.length; ) sum = sum.plus(args[i2++]);
                        return sum;
                      };
                      convertBase = /* @__PURE__ */ (function() {
                        var decimal = "0123456789";
                        function toBaseOut(str, baseIn, baseOut, alphabet) {
                          var j, arr = [0], arrL, i2 = 0, len = str.length;
                          for (; i2 < len; ) {
                            for (arrL = arr.length; arrL--; arr[arrL] *= baseIn) ;
                            arr[0] += alphabet.indexOf(str.charAt(i2++));
                            for (j = 0; j < arr.length; j++) {
                              if (arr[j] > baseOut - 1) {
                                if (arr[j + 1] == null) arr[j + 1] = 0;
                                arr[j + 1] += arr[j] / baseOut | 0;
                                arr[j] %= baseOut;
                              }
                            }
                          }
                          return arr.reverse();
                        }
                        return function(str, baseIn, baseOut, sign, callerIsToString) {
                          var alphabet, d, e, k, r, x2, xc, y2, i2 = str.indexOf("."), dp = DECIMAL_PLACES, rm = ROUNDING_MODE;
                          if (i2 >= 0) {
                            k = POW_PRECISION;
                            POW_PRECISION = 0;
                            str = str.replace(".", "");
                            y2 = new BigNumber2(baseIn);
                            x2 = y2.pow(str.length - i2);
                            POW_PRECISION = k;
                            y2.c = toBaseOut(
                              toFixedPoint(coeffToString(x2.c), x2.e, "0"),
                              10,
                              baseOut,
                              decimal
                            );
                            y2.e = y2.c.length;
                          }
                          xc = toBaseOut(str, baseIn, baseOut, callerIsToString ? (alphabet = ALPHABET, decimal) : (alphabet = decimal, ALPHABET));
                          e = k = xc.length;
                          for (; xc[--k] == 0; xc.pop()) ;
                          if (!xc[0]) return alphabet.charAt(0);
                          if (i2 < 0) {
                            --e;
                          } else {
                            x2.c = xc;
                            x2.e = e;
                            x2.s = sign;
                            x2 = div(x2, y2, dp, rm, baseOut);
                            xc = x2.c;
                            r = x2.r;
                            e = x2.e;
                          }
                          d = e + dp + 1;
                          i2 = xc[d];
                          k = baseOut / 2;
                          r = r || d < 0 || xc[d + 1] != null;
                          r = rm < 4 ? (i2 != null || r) && (rm == 0 || rm == (x2.s < 0 ? 3 : 2)) : i2 > k || i2 == k && (rm == 4 || r || rm == 6 && xc[d - 1] & 1 || rm == (x2.s < 0 ? 8 : 7));
                          if (d < 1 || !xc[0]) {
                            str = r ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);
                          } else {
                            xc.length = d;
                            if (r) {
                              for (--baseOut; ++xc[--d] > baseOut; ) {
                                xc[d] = 0;
                                if (!d) {
                                  ++e;
                                  xc = [1].concat(xc);
                                }
                              }
                            }
                            for (k = xc.length; !xc[--k]; ) ;
                            for (i2 = 0, str = ""; i2 <= k; str += alphabet.charAt(xc[i2++])) ;
                            str = toFixedPoint(str, e, alphabet.charAt(0));
                          }
                          return str;
                        };
                      })();
                      div = /* @__PURE__ */ (function() {
                        function multiply(x2, k, base) {
                          var m, temp, xlo, xhi, carry = 0, i2 = x2.length, klo = k % SQRT_BASE, khi = k / SQRT_BASE | 0;
                          for (x2 = x2.slice(); i2--; ) {
                            xlo = x2[i2] % SQRT_BASE;
                            xhi = x2[i2] / SQRT_BASE | 0;
                            m = khi * xlo + xhi * klo;
                            temp = klo * xlo + m % SQRT_BASE * SQRT_BASE + carry;
                            carry = (temp / base | 0) + (m / SQRT_BASE | 0) + khi * xhi;
                            x2[i2] = temp % base;
                          }
                          if (carry) x2 = [carry].concat(x2);
                          return x2;
                        }
                        function compare2(a, b, aL, bL) {
                          var i2, cmp;
                          if (aL != bL) {
                            cmp = aL > bL ? 1 : -1;
                          } else {
                            for (i2 = cmp = 0; i2 < aL; i2++) {
                              if (a[i2] != b[i2]) {
                                cmp = a[i2] > b[i2] ? 1 : -1;
                                break;
                              }
                            }
                          }
                          return cmp;
                        }
                        function subtract(a, b, aL, base) {
                          var i2 = 0;
                          for (; aL--; ) {
                            a[aL] -= i2;
                            i2 = a[aL] < b[aL] ? 1 : 0;
                            a[aL] = i2 * base + a[aL] - b[aL];
                          }
                          for (; !a[0] && a.length > 1; a.splice(0, 1)) ;
                        }
                        return function(x2, y2, dp, rm, base) {
                          var cmp, e, i2, more, n, prod, prodL, q, qc, rem, remL, rem0, xi, xL, yc0, yL, yz, s = x2.s == y2.s ? 1 : -1, xc = x2.c, yc = y2.c;
                          if (!xc || !xc[0] || !yc || !yc[0]) {
                            return new BigNumber2(
                              // Return NaN if either NaN, or both Infinity or 0.
                              !x2.s || !y2.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN : (
                                // Return ±0 if x is ±0 or y is ±Infinity, or return ±Infinity as y is ±0.
                                xc && xc[0] == 0 || !yc ? s * 0 : s / 0
                              )
                            );
                          }
                          q = new BigNumber2(s);
                          qc = q.c = [];
                          e = x2.e - y2.e;
                          s = dp + e + 1;
                          if (!base) {
                            base = BASE;
                            e = bitFloor(x2.e / LOG_BASE) - bitFloor(y2.e / LOG_BASE);
                            s = s / LOG_BASE | 0;
                          }
                          for (i2 = 0; yc[i2] == (xc[i2] || 0); i2++) ;
                          if (yc[i2] > (xc[i2] || 0)) e--;
                          if (s < 0) {
                            qc.push(1);
                            more = true;
                          } else {
                            xL = xc.length;
                            yL = yc.length;
                            i2 = 0;
                            s += 2;
                            n = mathfloor(base / (yc[0] + 1));
                            if (n > 1) {
                              yc = multiply(yc, n, base);
                              xc = multiply(xc, n, base);
                              yL = yc.length;
                              xL = xc.length;
                            }
                            xi = yL;
                            rem = xc.slice(0, yL);
                            remL = rem.length;
                            for (; remL < yL; rem[remL++] = 0) ;
                            yz = yc.slice();
                            yz = [0].concat(yz);
                            yc0 = yc[0];
                            if (yc[1] >= base / 2) yc0++;
                            do {
                              n = 0;
                              cmp = compare2(yc, rem, yL, remL);
                              if (cmp < 0) {
                                rem0 = rem[0];
                                if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);
                                n = mathfloor(rem0 / yc0);
                                if (n > 1) {
                                  if (n >= base) n = base - 1;
                                  prod = multiply(yc, n, base);
                                  prodL = prod.length;
                                  remL = rem.length;
                                  while (compare2(prod, rem, prodL, remL) == 1) {
                                    n--;
                                    subtract(prod, yL < prodL ? yz : yc, prodL, base);
                                    prodL = prod.length;
                                    cmp = 1;
                                  }
                                } else {
                                  if (n == 0) {
                                    cmp = n = 1;
                                  }
                                  prod = yc.slice();
                                  prodL = prod.length;
                                }
                                if (prodL < remL) prod = [0].concat(prod);
                                subtract(rem, prod, remL, base);
                                remL = rem.length;
                                if (cmp == -1) {
                                  while (compare2(yc, rem, yL, remL) < 1) {
                                    n++;
                                    subtract(rem, yL < remL ? yz : yc, remL, base);
                                    remL = rem.length;
                                  }
                                }
                              } else if (cmp === 0) {
                                n++;
                                rem = [0];
                              }
                              qc[i2++] = n;
                              if (rem[0]) {
                                rem[remL++] = xc[xi] || 0;
                              } else {
                                rem = [xc[xi]];
                                remL = 1;
                              }
                            } while ((xi++ < xL || rem[0] != null) && s--);
                            more = rem[0] != null;
                            if (!qc[0]) qc.splice(0, 1);
                          }
                          if (base == BASE) {
                            for (i2 = 1, s = qc[0]; s >= 10; s /= 10, i2++) ;
                            round(q, dp + (q.e = i2 + e * LOG_BASE - 1) + 1, rm, more);
                          } else {
                            q.e = e;
                            q.r = +more;
                          }
                          return q;
                        };
                      })();
                      function format(n, i2, rm, id) {
                        var c0, e, ne, len, str;
                        if (rm == null) rm = ROUNDING_MODE;
                        else intCheck(rm, 0, 8);
                        if (!n.c) return n.toString();
                        c0 = n.c[0];
                        ne = n.e;
                        if (i2 == null) {
                          str = coeffToString(n.c);
                          str = id == 1 || id == 2 && (ne <= TO_EXP_NEG || ne >= TO_EXP_POS) ? toExponential(str, ne) : toFixedPoint(str, ne, "0");
                        } else {
                          n = round(new BigNumber2(n), i2, rm);
                          e = n.e;
                          str = coeffToString(n.c);
                          len = str.length;
                          if (id == 1 || id == 2 && (i2 <= e || e <= TO_EXP_NEG)) {
                            for (; len < i2; str += "0", len++) ;
                            str = toExponential(str, e);
                          } else {
                            i2 -= ne;
                            str = toFixedPoint(str, e, "0");
                            if (e + 1 > len) {
                              if (--i2 > 0) for (str += "."; i2--; str += "0") ;
                            } else {
                              i2 += e - len;
                              if (i2 > 0) {
                                if (e + 1 == len) str += ".";
                                for (; i2--; str += "0") ;
                              }
                            }
                          }
                        }
                        return n.s < 0 && c0 ? "-" + str : str;
                      }
                      function maxOrMin(args, method) {
                        var n, i2 = 1, m = new BigNumber2(args[0]);
                        for (; i2 < args.length; i2++) {
                          n = new BigNumber2(args[i2]);
                          if (!n.s) {
                            m = n;
                            break;
                          } else if (method.call(m, n)) {
                            m = n;
                          }
                        }
                        return m;
                      }
                      function normalise(n, c, e) {
                        var i2 = 1, j = c.length;
                        for (; !c[--j]; c.pop()) ;
                        for (j = c[0]; j >= 10; j /= 10, i2++) ;
                        if ((e = i2 + e * LOG_BASE - 1) > MAX_EXP) {
                          n.c = n.e = null;
                        } else if (e < MIN_EXP) {
                          n.c = [n.e = 0];
                        } else {
                          n.e = e;
                          n.c = c;
                        }
                        return n;
                      }
                      parseNumeric = /* @__PURE__ */ (function() {
                        var basePrefix = /^(-?)0([xbo])(?=\w[\w.]*$)/i, dotAfter = /^([^.]+)\.$/, dotBefore = /^\.([^.]+)$/, isInfinityOrNaN = /^-?(Infinity|NaN)$/, whitespaceOrPlus = /^\s*\+(?=[\w.])|^\s+|\s+$/g;
                        return function(x2, str, isNum, b) {
                          var base, s = isNum ? str : str.replace(whitespaceOrPlus, "");
                          if (isInfinityOrNaN.test(s)) {
                            x2.s = isNaN(s) ? null : s < 0 ? -1 : 1;
                          } else {
                            if (!isNum) {
                              s = s.replace(basePrefix, function(m, p1, p2) {
                                base = (p2 = p2.toLowerCase()) == "x" ? 16 : p2 == "b" ? 2 : 8;
                                return !b || b == base ? p1 : m;
                              });
                              if (b) {
                                base = b;
                                s = s.replace(dotAfter, "$1").replace(dotBefore, "0.$1");
                              }
                              if (str != s) return new BigNumber2(s, base);
                            }
                            if (BigNumber2.DEBUG) {
                              throw Error(bignumberError + "Not a" + (b ? " base " + b : "") + " number: " + str);
                            }
                            x2.s = null;
                          }
                          x2.c = x2.e = null;
                        };
                      })();
                      function round(x2, sd, rm, r) {
                        var d, i2, j, k, n, ni, rd, xc = x2.c, pows10 = POWS_TEN;
                        if (xc) {
                          out: {
                            for (d = 1, k = xc[0]; k >= 10; k /= 10, d++) ;
                            i2 = sd - d;
                            if (i2 < 0) {
                              i2 += LOG_BASE;
                              j = sd;
                              n = xc[ni = 0];
                              rd = n / pows10[d - j - 1] % 10 | 0;
                            } else {
                              ni = mathceil((i2 + 1) / LOG_BASE);
                              if (ni >= xc.length) {
                                if (r) {
                                  for (; xc.length <= ni; xc.push(0)) ;
                                  n = rd = 0;
                                  d = 1;
                                  i2 %= LOG_BASE;
                                  j = i2 - LOG_BASE + 1;
                                } else {
                                  break out;
                                }
                              } else {
                                n = k = xc[ni];
                                for (d = 1; k >= 10; k /= 10, d++) ;
                                i2 %= LOG_BASE;
                                j = i2 - LOG_BASE + d;
                                rd = j < 0 ? 0 : n / pows10[d - j - 1] % 10 | 0;
                              }
                            }
                            r = r || sd < 0 || // Are there any non-zero digits after the rounding digit?
                            // The expression  n % pows10[d - j - 1]  returns all digits of n to the right
                            // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.
                            xc[ni + 1] != null || (j < 0 ? n : n % pows10[d - j - 1]);
                            r = rm < 4 ? (rd || r) && (rm == 0 || rm == (x2.s < 0 ? 3 : 2)) : rd > 5 || rd == 5 && (rm == 4 || r || rm == 6 && // Check whether the digit to the left of the rounding digit is odd.
                            (i2 > 0 ? j > 0 ? n / pows10[d - j] : 0 : xc[ni - 1]) % 10 & 1 || rm == (x2.s < 0 ? 8 : 7));
                            if (sd < 1 || !xc[0]) {
                              xc.length = 0;
                              if (r) {
                                sd -= x2.e + 1;
                                xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];
                                x2.e = -sd || 0;
                              } else {
                                xc[0] = x2.e = 0;
                              }
                              return x2;
                            }
                            if (i2 == 0) {
                              xc.length = ni;
                              k = 1;
                              ni--;
                            } else {
                              xc.length = ni + 1;
                              k = pows10[LOG_BASE - i2];
                              xc[ni] = j > 0 ? mathfloor(n / pows10[d - j] % pows10[j]) * k : 0;
                            }
                            if (r) {
                              for (; ; ) {
                                if (ni == 0) {
                                  for (i2 = 1, j = xc[0]; j >= 10; j /= 10, i2++) ;
                                  j = xc[0] += k;
                                  for (k = 1; j >= 10; j /= 10, k++) ;
                                  if (i2 != k) {
                                    x2.e++;
                                    if (xc[0] == BASE) xc[0] = 1;
                                  }
                                  break;
                                } else {
                                  xc[ni] += k;
                                  if (xc[ni] != BASE) break;
                                  xc[ni--] = 0;
                                  k = 1;
                                }
                              }
                            }
                            for (i2 = xc.length; xc[--i2] === 0; xc.pop()) ;
                          }
                          if (x2.e > MAX_EXP) {
                            x2.c = x2.e = null;
                          } else if (x2.e < MIN_EXP) {
                            x2.c = [x2.e = 0];
                          }
                        }
                        return x2;
                      }
                      function valueOf(n) {
                        var str, e = n.e;
                        if (e === null) return n.toString();
                        str = coeffToString(n.c);
                        str = e <= TO_EXP_NEG || e >= TO_EXP_POS ? toExponential(str, e) : toFixedPoint(str, e, "0");
                        return n.s < 0 ? "-" + str : str;
                      }
                      P.absoluteValue = P.abs = function() {
                        var x2 = new BigNumber2(this);
                        if (x2.s < 0) x2.s = 1;
                        return x2;
                      };
                      P.comparedTo = function(y2, b) {
                        return compare(this, new BigNumber2(y2, b));
                      };
                      P.decimalPlaces = P.dp = function(dp, rm) {
                        var c, n, v, x2 = this;
                        if (dp != null) {
                          intCheck(dp, 0, MAX);
                          if (rm == null) rm = ROUNDING_MODE;
                          else intCheck(rm, 0, 8);
                          return round(new BigNumber2(x2), dp + x2.e + 1, rm);
                        }
                        if (!(c = x2.c)) return null;
                        n = ((v = c.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;
                        if (v = c[v]) for (; v % 10 == 0; v /= 10, n--) ;
                        if (n < 0) n = 0;
                        return n;
                      };
                      P.dividedBy = P.div = function(y2, b) {
                        return div(this, new BigNumber2(y2, b), DECIMAL_PLACES, ROUNDING_MODE);
                      };
                      P.dividedToIntegerBy = P.idiv = function(y2, b) {
                        return div(this, new BigNumber2(y2, b), 0, 1);
                      };
                      P.exponentiatedBy = P.pow = function(n, m) {
                        var half, isModExp, i2, k, more, nIsBig, nIsNeg, nIsOdd, y2, x2 = this;
                        n = new BigNumber2(n);
                        if (n.c && !n.isInteger()) {
                          throw Error(bignumberError + "Exponent not an integer: " + valueOf(n));
                        }
                        if (m != null) m = new BigNumber2(m);
                        nIsBig = n.e > 14;
                        if (!x2.c || !x2.c[0] || x2.c[0] == 1 && !x2.e && x2.c.length == 1 || !n.c || !n.c[0]) {
                          y2 = new BigNumber2(Math.pow(+valueOf(x2), nIsBig ? 2 - isOdd(n) : +valueOf(n)));
                          return m ? y2.mod(m) : y2;
                        }
                        nIsNeg = n.s < 0;
                        if (m) {
                          if (m.c ? !m.c[0] : !m.s) return new BigNumber2(NaN);
                          isModExp = !nIsNeg && x2.isInteger() && m.isInteger();
                          if (isModExp) x2 = x2.mod(m);
                        } else if (n.e > 9 && (x2.e > 0 || x2.e < -1 || (x2.e == 0 ? x2.c[0] > 1 || nIsBig && x2.c[1] >= 24e7 : x2.c[0] < 8e13 || nIsBig && x2.c[0] <= 9999975e7))) {
                          k = x2.s < 0 && isOdd(n) ? -0 : 0;
                          if (x2.e > -1) k = 1 / k;
                          return new BigNumber2(nIsNeg ? 1 / k : k);
                        } else if (POW_PRECISION) {
                          k = mathceil(POW_PRECISION / LOG_BASE + 2);
                        }
                        if (nIsBig) {
                          half = new BigNumber2(0.5);
                          if (nIsNeg) n.s = 1;
                          nIsOdd = isOdd(n);
                        } else {
                          i2 = Math.abs(+valueOf(n));
                          nIsOdd = i2 % 2;
                        }
                        y2 = new BigNumber2(ONE);
                        for (; ; ) {
                          if (nIsOdd) {
                            y2 = y2.times(x2);
                            if (!y2.c) break;
                            if (k) {
                              if (y2.c.length > k) y2.c.length = k;
                            } else if (isModExp) {
                              y2 = y2.mod(m);
                            }
                          }
                          if (i2) {
                            i2 = mathfloor(i2 / 2);
                            if (i2 === 0) break;
                            nIsOdd = i2 % 2;
                          } else {
                            n = n.times(half);
                            round(n, n.e + 1, 1);
                            if (n.e > 14) {
                              nIsOdd = isOdd(n);
                            } else {
                              i2 = +valueOf(n);
                              if (i2 === 0) break;
                              nIsOdd = i2 % 2;
                            }
                          }
                          x2 = x2.times(x2);
                          if (k) {
                            if (x2.c && x2.c.length > k) x2.c.length = k;
                          } else if (isModExp) {
                            x2 = x2.mod(m);
                          }
                        }
                        if (isModExp) return y2;
                        if (nIsNeg) y2 = ONE.div(y2);
                        return m ? y2.mod(m) : k ? round(y2, POW_PRECISION, ROUNDING_MODE, more) : y2;
                      };
                      P.integerValue = function(rm) {
                        var n = new BigNumber2(this);
                        if (rm == null) rm = ROUNDING_MODE;
                        else intCheck(rm, 0, 8);
                        return round(n, n.e + 1, rm);
                      };
                      P.isEqualTo = P.eq = function(y2, b) {
                        return compare(this, new BigNumber2(y2, b)) === 0;
                      };
                      P.isFinite = function() {
                        return !!this.c;
                      };
                      P.isGreaterThan = P.gt = function(y2, b) {
                        return compare(this, new BigNumber2(y2, b)) > 0;
                      };
                      P.isGreaterThanOrEqualTo = P.gte = function(y2, b) {
                        return (b = compare(this, new BigNumber2(y2, b))) === 1 || b === 0;
                      };
                      P.isInteger = function() {
                        return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;
                      };
                      P.isLessThan = P.lt = function(y2, b) {
                        return compare(this, new BigNumber2(y2, b)) < 0;
                      };
                      P.isLessThanOrEqualTo = P.lte = function(y2, b) {
                        return (b = compare(this, new BigNumber2(y2, b))) === -1 || b === 0;
                      };
                      P.isNaN = function() {
                        return !this.s;
                      };
                      P.isNegative = function() {
                        return this.s < 0;
                      };
                      P.isPositive = function() {
                        return this.s > 0;
                      };
                      P.isZero = function() {
                        return !!this.c && this.c[0] == 0;
                      };
                      P.minus = function(y2, b) {
                        var i2, j, t2, xLTy, x2 = this, a = x2.s;
                        y2 = new BigNumber2(y2, b);
                        b = y2.s;
                        if (!a || !b) return new BigNumber2(NaN);
                        if (a != b) {
                          y2.s = -b;
                          return x2.plus(y2);
                        }
                        var xe = x2.e / LOG_BASE, ye = y2.e / LOG_BASE, xc = x2.c, yc = y2.c;
                        if (!xe || !ye) {
                          if (!xc || !yc) return xc ? (y2.s = -b, y2) : new BigNumber2(yc ? x2 : NaN);
                          if (!xc[0] || !yc[0]) {
                            return yc[0] ? (y2.s = -b, y2) : new BigNumber2(xc[0] ? x2 : (
                              // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity
                              ROUNDING_MODE == 3 ? -0 : 0
                            ));
                          }
                        }
                        xe = bitFloor(xe);
                        ye = bitFloor(ye);
                        xc = xc.slice();
                        if (a = xe - ye) {
                          if (xLTy = a < 0) {
                            a = -a;
                            t2 = xc;
                          } else {
                            ye = xe;
                            t2 = yc;
                          }
                          t2.reverse();
                          for (b = a; b--; t2.push(0)) ;
                          t2.reverse();
                        } else {
                          j = (xLTy = (a = xc.length) < (b = yc.length)) ? a : b;
                          for (a = b = 0; b < j; b++) {
                            if (xc[b] != yc[b]) {
                              xLTy = xc[b] < yc[b];
                              break;
                            }
                          }
                        }
                        if (xLTy) t2 = xc, xc = yc, yc = t2, y2.s = -y2.s;
                        b = (j = yc.length) - (i2 = xc.length);
                        if (b > 0) for (; b--; xc[i2++] = 0) ;
                        b = BASE - 1;
                        for (; j > a; ) {
                          if (xc[--j] < yc[j]) {
                            for (i2 = j; i2 && !xc[--i2]; xc[i2] = b) ;
                            --xc[i2];
                            xc[j] += BASE;
                          }
                          xc[j] -= yc[j];
                        }
                        for (; xc[0] == 0; xc.splice(0, 1), --ye) ;
                        if (!xc[0]) {
                          y2.s = ROUNDING_MODE == 3 ? -1 : 1;
                          y2.c = [y2.e = 0];
                          return y2;
                        }
                        return normalise(y2, xc, ye);
                      };
                      P.modulo = P.mod = function(y2, b) {
                        var q, s, x2 = this;
                        y2 = new BigNumber2(y2, b);
                        if (!x2.c || !y2.s || y2.c && !y2.c[0]) {
                          return new BigNumber2(NaN);
                        } else if (!y2.c || x2.c && !x2.c[0]) {
                          return new BigNumber2(x2);
                        }
                        if (MODULO_MODE == 9) {
                          s = y2.s;
                          y2.s = 1;
                          q = div(x2, y2, 0, 3);
                          y2.s = s;
                          q.s *= s;
                        } else {
                          q = div(x2, y2, 0, MODULO_MODE);
                        }
                        y2 = x2.minus(q.times(y2));
                        if (!y2.c[0] && MODULO_MODE == 1) y2.s = x2.s;
                        return y2;
                      };
                      P.multipliedBy = P.times = function(y2, b) {
                        var c, e, i2, j, k, m, xcL, xlo, xhi, ycL, ylo, yhi, zc, base, sqrtBase, x2 = this, xc = x2.c, yc = (y2 = new BigNumber2(y2, b)).c;
                        if (!xc || !yc || !xc[0] || !yc[0]) {
                          if (!x2.s || !y2.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {
                            y2.c = y2.e = y2.s = null;
                          } else {
                            y2.s *= x2.s;
                            if (!xc || !yc) {
                              y2.c = y2.e = null;
                            } else {
                              y2.c = [0];
                              y2.e = 0;
                            }
                          }
                          return y2;
                        }
                        e = bitFloor(x2.e / LOG_BASE) + bitFloor(y2.e / LOG_BASE);
                        y2.s *= x2.s;
                        xcL = xc.length;
                        ycL = yc.length;
                        if (xcL < ycL) zc = xc, xc = yc, yc = zc, i2 = xcL, xcL = ycL, ycL = i2;
                        for (i2 = xcL + ycL, zc = []; i2--; zc.push(0)) ;
                        base = BASE;
                        sqrtBase = SQRT_BASE;
                        for (i2 = ycL; --i2 >= 0; ) {
                          c = 0;
                          ylo = yc[i2] % sqrtBase;
                          yhi = yc[i2] / sqrtBase | 0;
                          for (k = xcL, j = i2 + k; j > i2; ) {
                            xlo = xc[--k] % sqrtBase;
                            xhi = xc[k] / sqrtBase | 0;
                            m = yhi * xlo + xhi * ylo;
                            xlo = ylo * xlo + m % sqrtBase * sqrtBase + zc[j] + c;
                            c = (xlo / base | 0) + (m / sqrtBase | 0) + yhi * xhi;
                            zc[j--] = xlo % base;
                          }
                          zc[j] = c;
                        }
                        if (c) {
                          ++e;
                        } else {
                          zc.splice(0, 1);
                        }
                        return normalise(y2, zc, e);
                      };
                      P.negated = function() {
                        var x2 = new BigNumber2(this);
                        x2.s = -x2.s || null;
                        return x2;
                      };
                      P.plus = function(y2, b) {
                        var t2, x2 = this, a = x2.s;
                        y2 = new BigNumber2(y2, b);
                        b = y2.s;
                        if (!a || !b) return new BigNumber2(NaN);
                        if (a != b) {
                          y2.s = -b;
                          return x2.minus(y2);
                        }
                        var xe = x2.e / LOG_BASE, ye = y2.e / LOG_BASE, xc = x2.c, yc = y2.c;
                        if (!xe || !ye) {
                          if (!xc || !yc) return new BigNumber2(a / 0);
                          if (!xc[0] || !yc[0]) return yc[0] ? y2 : new BigNumber2(xc[0] ? x2 : a * 0);
                        }
                        xe = bitFloor(xe);
                        ye = bitFloor(ye);
                        xc = xc.slice();
                        if (a = xe - ye) {
                          if (a > 0) {
                            ye = xe;
                            t2 = yc;
                          } else {
                            a = -a;
                            t2 = xc;
                          }
                          t2.reverse();
                          for (; a--; t2.push(0)) ;
                          t2.reverse();
                        }
                        a = xc.length;
                        b = yc.length;
                        if (a - b < 0) t2 = yc, yc = xc, xc = t2, b = a;
                        for (a = 0; b; ) {
                          a = (xc[--b] = xc[b] + yc[b] + a) / BASE | 0;
                          xc[b] = BASE === xc[b] ? 0 : xc[b] % BASE;
                        }
                        if (a) {
                          xc = [a].concat(xc);
                          ++ye;
                        }
                        return normalise(y2, xc, ye);
                      };
                      P.precision = P.sd = function(sd, rm) {
                        var c, n, v, x2 = this;
                        if (sd != null && sd !== !!sd) {
                          intCheck(sd, 1, MAX);
                          if (rm == null) rm = ROUNDING_MODE;
                          else intCheck(rm, 0, 8);
                          return round(new BigNumber2(x2), sd, rm);
                        }
                        if (!(c = x2.c)) return null;
                        v = c.length - 1;
                        n = v * LOG_BASE + 1;
                        if (v = c[v]) {
                          for (; v % 10 == 0; v /= 10, n--) ;
                          for (v = c[0]; v >= 10; v /= 10, n++) ;
                        }
                        if (sd && x2.e + 1 > n) n = x2.e + 1;
                        return n;
                      };
                      P.shiftedBy = function(k) {
                        intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);
                        return this.times("1e" + k);
                      };
                      P.squareRoot = P.sqrt = function() {
                        var m, n, r, rep, t2, x2 = this, c = x2.c, s = x2.s, e = x2.e, dp = DECIMAL_PLACES + 4, half = new BigNumber2("0.5");
                        if (s !== 1 || !c || !c[0]) {
                          return new BigNumber2(!s || s < 0 && (!c || c[0]) ? NaN : c ? x2 : 1 / 0);
                        }
                        s = Math.sqrt(+valueOf(x2));
                        if (s == 0 || s == 1 / 0) {
                          n = coeffToString(c);
                          if ((n.length + e) % 2 == 0) n += "0";
                          s = Math.sqrt(+n);
                          e = bitFloor((e + 1) / 2) - (e < 0 || e % 2);
                          if (s == 1 / 0) {
                            n = "5e" + e;
                          } else {
                            n = s.toExponential();
                            n = n.slice(0, n.indexOf("e") + 1) + e;
                          }
                          r = new BigNumber2(n);
                        } else {
                          r = new BigNumber2(s + "");
                        }
                        if (r.c[0]) {
                          e = r.e;
                          s = e + dp;
                          if (s < 3) s = 0;
                          for (; ; ) {
                            t2 = r;
                            r = half.times(t2.plus(div(x2, t2, dp, 1)));
                            if (coeffToString(t2.c).slice(0, s) === (n = coeffToString(r.c)).slice(0, s)) {
                              if (r.e < e) --s;
                              n = n.slice(s - 3, s + 1);
                              if (n == "9999" || !rep && n == "4999") {
                                if (!rep) {
                                  round(t2, t2.e + DECIMAL_PLACES + 2, 0);
                                  if (t2.times(t2).eq(x2)) {
                                    r = t2;
                                    break;
                                  }
                                }
                                dp += 4;
                                s += 4;
                                rep = 1;
                              } else {
                                if (!+n || !+n.slice(1) && n.charAt(0) == "5") {
                                  round(r, r.e + DECIMAL_PLACES + 2, 1);
                                  m = !r.times(r).eq(x2);
                                }
                                break;
                              }
                            }
                          }
                        }
                        return round(r, r.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m);
                      };
                      P.toExponential = function(dp, rm) {
                        if (dp != null) {
                          intCheck(dp, 0, MAX);
                          dp++;
                        }
                        return format(this, dp, rm, 1);
                      };
                      P.toFixed = function(dp, rm) {
                        if (dp != null) {
                          intCheck(dp, 0, MAX);
                          dp = dp + this.e + 1;
                        }
                        return format(this, dp, rm);
                      };
                      P.toFormat = function(dp, rm, format2) {
                        var str, x2 = this;
                        if (format2 == null) {
                          if (dp != null && rm && typeof rm == "object") {
                            format2 = rm;
                            rm = null;
                          } else if (dp && typeof dp == "object") {
                            format2 = dp;
                            dp = rm = null;
                          } else {
                            format2 = FORMAT;
                          }
                        } else if (typeof format2 != "object") {
                          throw Error(bignumberError + "Argument not an object: " + format2);
                        }
                        str = x2.toFixed(dp, rm);
                        if (x2.c) {
                          var i2, arr = str.split("."), g1 = +format2.groupSize, g2 = +format2.secondaryGroupSize, groupSeparator = format2.groupSeparator || "", intPart = arr[0], fractionPart = arr[1], isNeg = x2.s < 0, intDigits = isNeg ? intPart.slice(1) : intPart, len = intDigits.length;
                          if (g2) i2 = g1, g1 = g2, g2 = i2, len -= i2;
                          if (g1 > 0 && len > 0) {
                            i2 = len % g1 || g1;
                            intPart = intDigits.substr(0, i2);
                            for (; i2 < len; i2 += g1) intPart += groupSeparator + intDigits.substr(i2, g1);
                            if (g2 > 0) intPart += groupSeparator + intDigits.slice(i2);
                            if (isNeg) intPart = "-" + intPart;
                          }
                          str = fractionPart ? intPart + (format2.decimalSeparator || "") + ((g2 = +format2.fractionGroupSize) ? fractionPart.replace(
                            new RegExp("\\d{" + g2 + "}\\B", "g"),
                            "$&" + (format2.fractionGroupSeparator || "")
                          ) : fractionPart) : intPart;
                        }
                        return (format2.prefix || "") + str + (format2.suffix || "");
                      };
                      P.toFraction = function(md) {
                        var d, d0, d1, d2, e, exp, n, n0, n1, q, r, s, x2 = this, xc = x2.c;
                        if (md != null) {
                          n = new BigNumber2(md);
                          if (!n.isInteger() && (n.c || n.s !== 1) || n.lt(ONE)) {
                            throw Error(bignumberError + "Argument " + (n.isInteger() ? "out of range: " : "not an integer: ") + valueOf(n));
                          }
                        }
                        if (!xc) return new BigNumber2(x2);
                        d = new BigNumber2(ONE);
                        n1 = d0 = new BigNumber2(ONE);
                        d1 = n0 = new BigNumber2(ONE);
                        s = coeffToString(xc);
                        e = d.e = s.length - x2.e - 1;
                        d.c[0] = POWS_TEN[(exp = e % LOG_BASE) < 0 ? LOG_BASE + exp : exp];
                        md = !md || n.comparedTo(d) > 0 ? e > 0 ? d : n1 : n;
                        exp = MAX_EXP;
                        MAX_EXP = 1 / 0;
                        n = new BigNumber2(s);
                        n0.c[0] = 0;
                        for (; ; ) {
                          q = div(n, d, 0, 1);
                          d2 = d0.plus(q.times(d1));
                          if (d2.comparedTo(md) == 1) break;
                          d0 = d1;
                          d1 = d2;
                          n1 = n0.plus(q.times(d2 = n1));
                          n0 = d2;
                          d = n.minus(q.times(d2 = d));
                          n = d2;
                        }
                        d2 = div(md.minus(d0), d1, 0, 1);
                        n0 = n0.plus(d2.times(n1));
                        d0 = d0.plus(d2.times(d1));
                        n0.s = n1.s = x2.s;
                        e = e * 2;
                        r = div(n1, d1, e, ROUNDING_MODE).minus(x2).abs().comparedTo(
                          div(n0, d0, e, ROUNDING_MODE).minus(x2).abs()
                        ) < 1 ? [n1, d1] : [n0, d0];
                        MAX_EXP = exp;
                        return r;
                      };
                      P.toNumber = function() {
                        return +valueOf(this);
                      };
                      P.toPrecision = function(sd, rm) {
                        if (sd != null) intCheck(sd, 1, MAX);
                        return format(this, sd, rm, 2);
                      };
                      P.toString = function(b) {
                        var str, n = this, s = n.s, e = n.e;
                        if (e === null) {
                          if (s) {
                            str = "Infinity";
                            if (s < 0) str = "-" + str;
                          } else {
                            str = "NaN";
                          }
                        } else {
                          if (b == null) {
                            str = e <= TO_EXP_NEG || e >= TO_EXP_POS ? toExponential(coeffToString(n.c), e) : toFixedPoint(coeffToString(n.c), e, "0");
                          } else if (b === 10) {
                            n = round(new BigNumber2(n), DECIMAL_PLACES + e + 1, ROUNDING_MODE);
                            str = toFixedPoint(coeffToString(n.c), n.e, "0");
                          } else {
                            intCheck(b, 2, ALPHABET.length, "Base");
                            str = convertBase(toFixedPoint(coeffToString(n.c), e, "0"), 10, b, s, true);
                          }
                          if (s < 0 && n.c[0]) str = "-" + str;
                        }
                        return str;
                      };
                      P.valueOf = P.toJSON = function() {
                        return valueOf(this);
                      };
                      P._isBigNumber = true;
                      if (configObject != null) BigNumber2.set(configObject);
                      return BigNumber2;
                    }
                    function bitFloor(n) {
                      var i2 = n | 0;
                      return n > 0 || n === i2 ? i2 : i2 - 1;
                    }
                    function coeffToString(a) {
                      var s, z, i2 = 1, j = a.length, r = a[0] + "";
                      for (; i2 < j; ) {
                        s = a[i2++] + "";
                        z = LOG_BASE - s.length;
                        for (; z--; s = "0" + s) ;
                        r += s;
                      }
                      for (j = r.length; r.charCodeAt(--j) === 48; ) ;
                      return r.slice(0, j + 1 || 1);
                    }
                    function compare(x2, y2) {
                      var a, b, xc = x2.c, yc = y2.c, i2 = x2.s, j = y2.s, k = x2.e, l = y2.e;
                      if (!i2 || !j) return null;
                      a = xc && !xc[0];
                      b = yc && !yc[0];
                      if (a || b) return a ? b ? 0 : -j : i2;
                      if (i2 != j) return i2;
                      a = i2 < 0;
                      b = k == l;
                      if (!xc || !yc) return b ? 0 : !xc ^ a ? 1 : -1;
                      if (!b) return k > l ^ a ? 1 : -1;
                      j = (k = xc.length) < (l = yc.length) ? k : l;
                      for (i2 = 0; i2 < j; i2++) if (xc[i2] != yc[i2]) return xc[i2] > yc[i2] ^ a ? 1 : -1;
                      return k == l ? 0 : k > l ^ a ? 1 : -1;
                    }
                    function intCheck(n, min, max, name) {
                      if (n < min || n > max || n !== mathfloor(n)) {
                        throw Error(bignumberError + (name || "Argument") + (typeof n == "number" ? n < min || n > max ? " out of range: " : " not an integer: " : " not a primitive number: ") + String(n));
                      }
                    }
                    function isOdd(n) {
                      var k = n.c.length - 1;
                      return bitFloor(n.e / LOG_BASE) == k && n.c[k] % 2 != 0;
                    }
                    function toExponential(str, e) {
                      return (str.length > 1 ? str.charAt(0) + "." + str.slice(1) : str) + (e < 0 ? "e" : "e+") + e;
                    }
                    function toFixedPoint(str, e, z) {
                      var len, zs;
                      if (e < 0) {
                        for (zs = z + "."; ++e; zs += z) ;
                        str = zs + str;
                      } else {
                        len = str.length;
                        if (++e > len) {
                          for (zs = z, e -= len; --e; zs += z) ;
                          str += zs;
                        } else if (e < len) {
                          str = str.slice(0, e) + "." + str.slice(e);
                        }
                      }
                      return str;
                    }
                    BigNumber = clone();
                    BigNumber["default"] = BigNumber.BigNumber = BigNumber;
                    if (true) {
                      !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
                        return BigNumber;
                      }).call(exports3, __webpack_require__3, exports3, module3), __WEBPACK_AMD_DEFINE_RESULT__ !== void 0 && (module3.exports = __WEBPACK_AMD_DEFINE_RESULT__));
                    } else {
                    }
                  })(this);
                })
              ),
              /***/
              9844: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _slicedToArray2 = _interopRequireDefault(__webpack_require__3(6583));
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _throttle = _interopRequireDefault(__webpack_require__3(1680));
                  var _sortBy = _interopRequireDefault(__webpack_require__3(3281));
                  var BiMapCache = /* @__PURE__ */ (function() {
                    function BiMapCache2(_ref) {
                      var _this = this;
                      var key = _ref.key, getAfromB = _ref.getAfromB, getBfromA = _ref.getBfromA, storage = _ref.storage, saveThrottle = _ref.saveThrottle, maxLimit = _ref.maxLimit, maxAge = _ref.maxAge;
                      (0, _classCallCheck2.default)(this, BiMapCache2);
                      (0, _defineProperty2.default)(this, "_key", void 0);
                      (0, _defineProperty2.default)(this, "_getAfromB", void 0);
                      (0, _defineProperty2.default)(this, "_getBfromA", void 0);
                      (0, _defineProperty2.default)(this, "_storage", void 0);
                      (0, _defineProperty2.default)(this, "_aToTimestamp", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_aToB", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_bToA", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_aToBpromise", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_bToApromise", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_saveCache", void 0);
                      this._key = key;
                      this._getBfromA = getBfromA;
                      this._getAfromB = getAfromB;
                      this._storage = storage || (__webpack_require__3.g.localStorage ? __webpack_require__3.g.localStorage : null);
                      if (saveThrottle == null) {
                        saveThrottle = 3e3;
                      }
                      if (maxLimit == null) {
                        maxLimit = 1e3;
                      }
                      if (maxAge == null) {
                        maxAge = 1e3 * 60 * 60 * 24 * 365;
                      }
                      var maxLimit_ = maxLimit, maxAge_ = maxAge;
                      this._saveCache = (0, _throttle.default)(function() {
                        var storage2 = _this._storage;
                        if (!storage2) return;
                        _this._loadCache();
                        var minTimestamp = Date.now() - maxAge_;
                        var item = {
                          version: 2,
                          ids: []
                        };
                        _this._aToB.forEach(function(b, a) {
                          var timestamp = _this._aToTimestamp.get(a);
                          if (timestamp != null && timestamp > minTimestamp) {
                            item.ids.push([a, b, timestamp]);
                          }
                        });
                        if (item.ids.length > maxLimit_) {
                          item.ids = (0, _sortBy.default)(item.ids, function(_ref2) {
                            var _ref3 = (0, _slicedToArray2.default)(_ref2, 3), timestamp = _ref3[2];
                            return timestamp;
                          }).slice(-maxLimit_);
                        }
                        storage2.setItem(_this._key, JSON.stringify(item));
                      }, saveThrottle, {
                        leading: false
                      });
                      this._loadCache();
                    }
                    (0, _createClass2.default)(BiMapCache2, [{
                      key: "_loadCache",
                      value: function _loadCache() {
                        var storage = this._storage;
                        if (!storage) return;
                        try {
                          var item = JSON.parse(storage.getItem(this._key) || "null");
                          if (!item || item.version !== 2) return;
                          var _iteratorNormalCompletion = true;
                          var _didIteratorError = false;
                          var _iteratorError = void 0;
                          try {
                            for (var _iterator = item.ids[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                              var x2 = _step.value;
                              var _x = (0, _slicedToArray2.default)(x2, 3), _a = _x[0], _b = _x[1], timestamp = _x[2];
                              this._aToTimestamp.set(_a, timestamp);
                              this._aToB.set(_a, _b);
                              this._bToA.set(_b, _a);
                            }
                          } catch (err) {
                            _didIteratorError = true;
                            _iteratorError = err;
                          } finally {
                            try {
                              if (!_iteratorNormalCompletion && _iterator.return != null) {
                                _iterator.return();
                              }
                            } finally {
                              if (_didIteratorError) {
                                throw _iteratorError;
                              }
                            }
                          }
                        } catch (e) {
                          console.error("failed to load BiMapCache from storage", e);
                        }
                      }
                    }, {
                      key: "_rememberPair",
                      value: function _rememberPair(a, b) {
                        this._aToTimestamp.set(a, Date.now());
                        this._aToB.set(a, b);
                        this._bToA.set(b, a);
                        this._saveCache();
                      }
                    }, {
                      key: "_update",
                      value: function _update(a) {
                        this._aToTimestamp.set(a, Date.now());
                        this._saveCache();
                      }
                    }, {
                      key: "getBfromA",
                      value: function getBfromA(a) {
                        var _this2 = this;
                        var b = this._aToB.get(a);
                        if (b) {
                          this._update(a);
                          return Promise.resolve(b);
                        }
                        var existingPromise = this._aToBpromise.get(a);
                        if (existingPromise) {
                          return existingPromise;
                        }
                        var promise = this._getBfromA(a);
                        this._aToBpromise.set(a, promise);
                        promise.then(function(b2) {
                          var promiseWasStillCached = promise === _this2._aToBpromise.get(a);
                          if (promiseWasStillCached) {
                            _this2._aToBpromise.delete(a);
                            _this2._rememberPair(a, b2);
                          }
                        }, function() {
                          var promiseWasStillCached = promise === _this2._aToBpromise.get(a);
                          if (promiseWasStillCached) {
                            _this2._aToBpromise.delete(a);
                          }
                        });
                        return promise;
                      }
                    }, {
                      key: "getAfromB",
                      value: function getAfromB(b) {
                        var _this3 = this;
                        var a = this._bToA.get(b);
                        if (a) {
                          this._update(a);
                          return Promise.resolve(a);
                        }
                        var existingPromise = this._bToApromise.get(b);
                        if (existingPromise) {
                          return existingPromise;
                        }
                        var promise = this._getAfromB(b);
                        this._bToApromise.set(b, promise);
                        promise.then(function(a2) {
                          var promiseWasStillCached = promise === _this3._bToApromise.get(b);
                          if (promiseWasStillCached) {
                            _this3._bToApromise.delete(b);
                            _this3._rememberPair(a2, b);
                          }
                        }, function() {
                          var promiseWasStillCached = promise === _this3._bToApromise.get(b);
                          if (promiseWasStillCached) {
                            _this3._bToApromise.delete(b);
                          }
                        });
                        return promise;
                      }
                    }, {
                      key: "removeAfromCache",
                      value: function removeAfromCache(a) {
                        this._aToBpromise.delete(a);
                        if (this._aToB.has(a)) {
                          var _b2 = this._aToB.get(a);
                          this._aToB.delete(a);
                          this._bToA.delete(_b2);
                          this._saveCache();
                        }
                      }
                    }, {
                      key: "removeBfromCache",
                      value: function removeBfromCache(b) {
                        this._bToApromise.delete(b);
                        if (this._bToA.has(b)) {
                          var _a2 = this._bToA.get(b);
                          this._aToB.delete(_a2);
                          this._bToA.delete(b);
                          this._saveCache();
                        }
                      }
                    }]);
                    return BiMapCache2;
                  })();
                  exports3["default"] = BiMapCache;
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              2313: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  const base64 = __webpack_require__3(2504);
                  const ieee754 = __webpack_require__3(9029);
                  const customInspectSymbol = typeof Symbol === "function" && typeof Symbol["for"] === "function" ? Symbol["for"]("nodejs.util.inspect.custom") : null;
                  exports3.Buffer = Buffer2;
                  exports3.SlowBuffer = SlowBuffer;
                  exports3.INSPECT_MAX_BYTES = 50;
                  const K_MAX_LENGTH = 2147483647;
                  exports3.kMaxLength = K_MAX_LENGTH;
                  Buffer2.TYPED_ARRAY_SUPPORT = typedArraySupport();
                  if (!Buffer2.TYPED_ARRAY_SUPPORT && typeof console !== "undefined" && typeof console.error === "function") {
                    console.error(
                      "This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."
                    );
                  }
                  function typedArraySupport() {
                    try {
                      const arr = new Uint8Array(1);
                      const proto = { foo: function() {
                        return 42;
                      } };
                      Object.setPrototypeOf(proto, Uint8Array.prototype);
                      Object.setPrototypeOf(arr, proto);
                      return arr.foo() === 42;
                    } catch (e) {
                      return false;
                    }
                  }
                  Object.defineProperty(Buffer2.prototype, "parent", {
                    enumerable: true,
                    get: function() {
                      if (!Buffer2.isBuffer(this)) return void 0;
                      return this.buffer;
                    }
                  });
                  Object.defineProperty(Buffer2.prototype, "offset", {
                    enumerable: true,
                    get: function() {
                      if (!Buffer2.isBuffer(this)) return void 0;
                      return this.byteOffset;
                    }
                  });
                  function createBuffer(length) {
                    if (length > K_MAX_LENGTH) {
                      throw new RangeError('The value "' + length + '" is invalid for option "size"');
                    }
                    const buf = new Uint8Array(length);
                    Object.setPrototypeOf(buf, Buffer2.prototype);
                    return buf;
                  }
                  function Buffer2(arg, encodingOrOffset, length) {
                    if (typeof arg === "number") {
                      if (typeof encodingOrOffset === "string") {
                        throw new TypeError(
                          'The "string" argument must be of type string. Received type number'
                        );
                      }
                      return allocUnsafe(arg);
                    }
                    return from(arg, encodingOrOffset, length);
                  }
                  Buffer2.poolSize = 8192;
                  function from(value, encodingOrOffset, length) {
                    if (typeof value === "string") {
                      return fromString(value, encodingOrOffset);
                    }
                    if (ArrayBuffer.isView(value)) {
                      return fromArrayView(value);
                    }
                    if (value == null) {
                      throw new TypeError(
                        "The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof value
                      );
                    }
                    if (isInstance(value, ArrayBuffer) || value && isInstance(value.buffer, ArrayBuffer)) {
                      return fromArrayBuffer(value, encodingOrOffset, length);
                    }
                    if (typeof SharedArrayBuffer !== "undefined" && (isInstance(value, SharedArrayBuffer) || value && isInstance(value.buffer, SharedArrayBuffer))) {
                      return fromArrayBuffer(value, encodingOrOffset, length);
                    }
                    if (typeof value === "number") {
                      throw new TypeError(
                        'The "value" argument must not be of type number. Received type number'
                      );
                    }
                    const valueOf = value.valueOf && value.valueOf();
                    if (valueOf != null && valueOf !== value) {
                      return Buffer2.from(valueOf, encodingOrOffset, length);
                    }
                    const b = fromObject(value);
                    if (b) return b;
                    if (typeof Symbol !== "undefined" && Symbol.toPrimitive != null && typeof value[Symbol.toPrimitive] === "function") {
                      return Buffer2.from(value[Symbol.toPrimitive]("string"), encodingOrOffset, length);
                    }
                    throw new TypeError(
                      "The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof value
                    );
                  }
                  Buffer2.from = function(value, encodingOrOffset, length) {
                    return from(value, encodingOrOffset, length);
                  };
                  Object.setPrototypeOf(Buffer2.prototype, Uint8Array.prototype);
                  Object.setPrototypeOf(Buffer2, Uint8Array);
                  function assertSize(size) {
                    if (typeof size !== "number") {
                      throw new TypeError('"size" argument must be of type number');
                    } else if (size < 0) {
                      throw new RangeError('The value "' + size + '" is invalid for option "size"');
                    }
                  }
                  function alloc(size, fill, encoding) {
                    assertSize(size);
                    if (size <= 0) {
                      return createBuffer(size);
                    }
                    if (fill !== void 0) {
                      return typeof encoding === "string" ? createBuffer(size).fill(fill, encoding) : createBuffer(size).fill(fill);
                    }
                    return createBuffer(size);
                  }
                  Buffer2.alloc = function(size, fill, encoding) {
                    return alloc(size, fill, encoding);
                  };
                  function allocUnsafe(size) {
                    assertSize(size);
                    return createBuffer(size < 0 ? 0 : checked(size) | 0);
                  }
                  Buffer2.allocUnsafe = function(size) {
                    return allocUnsafe(size);
                  };
                  Buffer2.allocUnsafeSlow = function(size) {
                    return allocUnsafe(size);
                  };
                  function fromString(string, encoding) {
                    if (typeof encoding !== "string" || encoding === "") {
                      encoding = "utf8";
                    }
                    if (!Buffer2.isEncoding(encoding)) {
                      throw new TypeError("Unknown encoding: " + encoding);
                    }
                    const length = byteLength(string, encoding) | 0;
                    let buf = createBuffer(length);
                    const actual = buf.write(string, encoding);
                    if (actual !== length) {
                      buf = buf.slice(0, actual);
                    }
                    return buf;
                  }
                  function fromArrayLike(array) {
                    const length = array.length < 0 ? 0 : checked(array.length) | 0;
                    const buf = createBuffer(length);
                    for (let i2 = 0; i2 < length; i2 += 1) {
                      buf[i2] = array[i2] & 255;
                    }
                    return buf;
                  }
                  function fromArrayView(arrayView) {
                    if (isInstance(arrayView, Uint8Array)) {
                      const copy2 = new Uint8Array(arrayView);
                      return fromArrayBuffer(copy2.buffer, copy2.byteOffset, copy2.byteLength);
                    }
                    return fromArrayLike(arrayView);
                  }
                  function fromArrayBuffer(array, byteOffset, length) {
                    if (byteOffset < 0 || array.byteLength < byteOffset) {
                      throw new RangeError('"offset" is outside of buffer bounds');
                    }
                    if (array.byteLength < byteOffset + (length || 0)) {
                      throw new RangeError('"length" is outside of buffer bounds');
                    }
                    let buf;
                    if (byteOffset === void 0 && length === void 0) {
                      buf = new Uint8Array(array);
                    } else if (length === void 0) {
                      buf = new Uint8Array(array, byteOffset);
                    } else {
                      buf = new Uint8Array(array, byteOffset, length);
                    }
                    Object.setPrototypeOf(buf, Buffer2.prototype);
                    return buf;
                  }
                  function fromObject(obj2) {
                    if (Buffer2.isBuffer(obj2)) {
                      const len = checked(obj2.length) | 0;
                      const buf = createBuffer(len);
                      if (buf.length === 0) {
                        return buf;
                      }
                      obj2.copy(buf, 0, 0, len);
                      return buf;
                    }
                    if (obj2.length !== void 0) {
                      if (typeof obj2.length !== "number" || numberIsNaN(obj2.length)) {
                        return createBuffer(0);
                      }
                      return fromArrayLike(obj2);
                    }
                    if (obj2.type === "Buffer" && Array.isArray(obj2.data)) {
                      return fromArrayLike(obj2.data);
                    }
                  }
                  function checked(length) {
                    if (length >= K_MAX_LENGTH) {
                      throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + K_MAX_LENGTH.toString(16) + " bytes");
                    }
                    return length | 0;
                  }
                  function SlowBuffer(length) {
                    if (+length != length) {
                      length = 0;
                    }
                    return Buffer2.alloc(+length);
                  }
                  Buffer2.isBuffer = function isBuffer(b) {
                    return b != null && b._isBuffer === true && b !== Buffer2.prototype;
                  };
                  Buffer2.compare = function compare(a, b) {
                    if (isInstance(a, Uint8Array)) a = Buffer2.from(a, a.offset, a.byteLength);
                    if (isInstance(b, Uint8Array)) b = Buffer2.from(b, b.offset, b.byteLength);
                    if (!Buffer2.isBuffer(a) || !Buffer2.isBuffer(b)) {
                      throw new TypeError(
                        'The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array'
                      );
                    }
                    if (a === b) return 0;
                    let x2 = a.length;
                    let y2 = b.length;
                    for (let i2 = 0, len = Math.min(x2, y2); i2 < len; ++i2) {
                      if (a[i2] !== b[i2]) {
                        x2 = a[i2];
                        y2 = b[i2];
                        break;
                      }
                    }
                    if (x2 < y2) return -1;
                    if (y2 < x2) return 1;
                    return 0;
                  };
                  Buffer2.isEncoding = function isEncoding(encoding) {
                    switch (String(encoding).toLowerCase()) {
                      case "hex":
                      case "utf8":
                      case "utf-8":
                      case "ascii":
                      case "latin1":
                      case "binary":
                      case "base64":
                      case "ucs2":
                      case "ucs-2":
                      case "utf16le":
                      case "utf-16le":
                        return true;
                      default:
                        return false;
                    }
                  };
                  Buffer2.concat = function concat(list, length) {
                    if (!Array.isArray(list)) {
                      throw new TypeError('"list" argument must be an Array of Buffers');
                    }
                    if (list.length === 0) {
                      return Buffer2.alloc(0);
                    }
                    let i2;
                    if (length === void 0) {
                      length = 0;
                      for (i2 = 0; i2 < list.length; ++i2) {
                        length += list[i2].length;
                      }
                    }
                    const buffer = Buffer2.allocUnsafe(length);
                    let pos = 0;
                    for (i2 = 0; i2 < list.length; ++i2) {
                      let buf = list[i2];
                      if (isInstance(buf, Uint8Array)) {
                        if (pos + buf.length > buffer.length) {
                          if (!Buffer2.isBuffer(buf)) buf = Buffer2.from(buf);
                          buf.copy(buffer, pos);
                        } else {
                          Uint8Array.prototype.set.call(
                            buffer,
                            buf,
                            pos
                          );
                        }
                      } else if (!Buffer2.isBuffer(buf)) {
                        throw new TypeError('"list" argument must be an Array of Buffers');
                      } else {
                        buf.copy(buffer, pos);
                      }
                      pos += buf.length;
                    }
                    return buffer;
                  };
                  function byteLength(string, encoding) {
                    if (Buffer2.isBuffer(string)) {
                      return string.length;
                    }
                    if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {
                      return string.byteLength;
                    }
                    if (typeof string !== "string") {
                      throw new TypeError(
                        'The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof string
                      );
                    }
                    const len = string.length;
                    const mustMatch = arguments.length > 2 && arguments[2] === true;
                    if (!mustMatch && len === 0) return 0;
                    let loweredCase = false;
                    for (; ; ) {
                      switch (encoding) {
                        case "ascii":
                        case "latin1":
                        case "binary":
                          return len;
                        case "utf8":
                        case "utf-8":
                          return utf8ToBytes(string).length;
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                          return len * 2;
                        case "hex":
                          return len >>> 1;
                        case "base64":
                          return base64ToBytes(string).length;
                        default:
                          if (loweredCase) {
                            return mustMatch ? -1 : utf8ToBytes(string).length;
                          }
                          encoding = ("" + encoding).toLowerCase();
                          loweredCase = true;
                      }
                    }
                  }
                  Buffer2.byteLength = byteLength;
                  function slowToString(encoding, start, end) {
                    let loweredCase = false;
                    if (start === void 0 || start < 0) {
                      start = 0;
                    }
                    if (start > this.length) {
                      return "";
                    }
                    if (end === void 0 || end > this.length) {
                      end = this.length;
                    }
                    if (end <= 0) {
                      return "";
                    }
                    end >>>= 0;
                    start >>>= 0;
                    if (end <= start) {
                      return "";
                    }
                    if (!encoding) encoding = "utf8";
                    while (true) {
                      switch (encoding) {
                        case "hex":
                          return hexSlice(this, start, end);
                        case "utf8":
                        case "utf-8":
                          return utf8Slice(this, start, end);
                        case "ascii":
                          return asciiSlice(this, start, end);
                        case "latin1":
                        case "binary":
                          return latin1Slice(this, start, end);
                        case "base64":
                          return base64Slice(this, start, end);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                          return utf16leSlice(this, start, end);
                        default:
                          if (loweredCase) throw new TypeError("Unknown encoding: " + encoding);
                          encoding = (encoding + "").toLowerCase();
                          loweredCase = true;
                      }
                    }
                  }
                  Buffer2.prototype._isBuffer = true;
                  function swap(b, n, m) {
                    const i2 = b[n];
                    b[n] = b[m];
                    b[m] = i2;
                  }
                  Buffer2.prototype.swap16 = function swap16() {
                    const len = this.length;
                    if (len % 2 !== 0) {
                      throw new RangeError("Buffer size must be a multiple of 16-bits");
                    }
                    for (let i2 = 0; i2 < len; i2 += 2) {
                      swap(this, i2, i2 + 1);
                    }
                    return this;
                  };
                  Buffer2.prototype.swap32 = function swap32() {
                    const len = this.length;
                    if (len % 4 !== 0) {
                      throw new RangeError("Buffer size must be a multiple of 32-bits");
                    }
                    for (let i2 = 0; i2 < len; i2 += 4) {
                      swap(this, i2, i2 + 3);
                      swap(this, i2 + 1, i2 + 2);
                    }
                    return this;
                  };
                  Buffer2.prototype.swap64 = function swap64() {
                    const len = this.length;
                    if (len % 8 !== 0) {
                      throw new RangeError("Buffer size must be a multiple of 64-bits");
                    }
                    for (let i2 = 0; i2 < len; i2 += 8) {
                      swap(this, i2, i2 + 7);
                      swap(this, i2 + 1, i2 + 6);
                      swap(this, i2 + 2, i2 + 5);
                      swap(this, i2 + 3, i2 + 4);
                    }
                    return this;
                  };
                  Buffer2.prototype.toString = function toString() {
                    const length = this.length;
                    if (length === 0) return "";
                    if (arguments.length === 0) return utf8Slice(this, 0, length);
                    return slowToString.apply(this, arguments);
                  };
                  Buffer2.prototype.toLocaleString = Buffer2.prototype.toString;
                  Buffer2.prototype.equals = function equals(b) {
                    if (!Buffer2.isBuffer(b)) throw new TypeError("Argument must be a Buffer");
                    if (this === b) return true;
                    return Buffer2.compare(this, b) === 0;
                  };
                  Buffer2.prototype.inspect = function inspect() {
                    let str = "";
                    const max = exports3.INSPECT_MAX_BYTES;
                    str = this.toString("hex", 0, max).replace(/(.{2})/g, "$1 ").trim();
                    if (this.length > max) str += " ... ";
                    return "<Buffer " + str + ">";
                  };
                  if (customInspectSymbol) {
                    Buffer2.prototype[customInspectSymbol] = Buffer2.prototype.inspect;
                  }
                  Buffer2.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {
                    if (isInstance(target, Uint8Array)) {
                      target = Buffer2.from(target, target.offset, target.byteLength);
                    }
                    if (!Buffer2.isBuffer(target)) {
                      throw new TypeError(
                        'The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof target
                      );
                    }
                    if (start === void 0) {
                      start = 0;
                    }
                    if (end === void 0) {
                      end = target ? target.length : 0;
                    }
                    if (thisStart === void 0) {
                      thisStart = 0;
                    }
                    if (thisEnd === void 0) {
                      thisEnd = this.length;
                    }
                    if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
                      throw new RangeError("out of range index");
                    }
                    if (thisStart >= thisEnd && start >= end) {
                      return 0;
                    }
                    if (thisStart >= thisEnd) {
                      return -1;
                    }
                    if (start >= end) {
                      return 1;
                    }
                    start >>>= 0;
                    end >>>= 0;
                    thisStart >>>= 0;
                    thisEnd >>>= 0;
                    if (this === target) return 0;
                    let x2 = thisEnd - thisStart;
                    let y2 = end - start;
                    const len = Math.min(x2, y2);
                    const thisCopy = this.slice(thisStart, thisEnd);
                    const targetCopy = target.slice(start, end);
                    for (let i2 = 0; i2 < len; ++i2) {
                      if (thisCopy[i2] !== targetCopy[i2]) {
                        x2 = thisCopy[i2];
                        y2 = targetCopy[i2];
                        break;
                      }
                    }
                    if (x2 < y2) return -1;
                    if (y2 < x2) return 1;
                    return 0;
                  };
                  function bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {
                    if (buffer.length === 0) return -1;
                    if (typeof byteOffset === "string") {
                      encoding = byteOffset;
                      byteOffset = 0;
                    } else if (byteOffset > 2147483647) {
                      byteOffset = 2147483647;
                    } else if (byteOffset < -2147483648) {
                      byteOffset = -2147483648;
                    }
                    byteOffset = +byteOffset;
                    if (numberIsNaN(byteOffset)) {
                      byteOffset = dir ? 0 : buffer.length - 1;
                    }
                    if (byteOffset < 0) byteOffset = buffer.length + byteOffset;
                    if (byteOffset >= buffer.length) {
                      if (dir) return -1;
                      else byteOffset = buffer.length - 1;
                    } else if (byteOffset < 0) {
                      if (dir) byteOffset = 0;
                      else return -1;
                    }
                    if (typeof val === "string") {
                      val = Buffer2.from(val, encoding);
                    }
                    if (Buffer2.isBuffer(val)) {
                      if (val.length === 0) {
                        return -1;
                      }
                      return arrayIndexOf(buffer, val, byteOffset, encoding, dir);
                    } else if (typeof val === "number") {
                      val = val & 255;
                      if (typeof Uint8Array.prototype.indexOf === "function") {
                        if (dir) {
                          return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);
                        } else {
                          return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);
                        }
                      }
                      return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);
                    }
                    throw new TypeError("val must be string, number or Buffer");
                  }
                  function arrayIndexOf(arr, val, byteOffset, encoding, dir) {
                    let indexSize = 1;
                    let arrLength = arr.length;
                    let valLength = val.length;
                    if (encoding !== void 0) {
                      encoding = String(encoding).toLowerCase();
                      if (encoding === "ucs2" || encoding === "ucs-2" || encoding === "utf16le" || encoding === "utf-16le") {
                        if (arr.length < 2 || val.length < 2) {
                          return -1;
                        }
                        indexSize = 2;
                        arrLength /= 2;
                        valLength /= 2;
                        byteOffset /= 2;
                      }
                    }
                    function read(buf, i3) {
                      if (indexSize === 1) {
                        return buf[i3];
                      } else {
                        return buf.readUInt16BE(i3 * indexSize);
                      }
                    }
                    let i2;
                    if (dir) {
                      let foundIndex = -1;
                      for (i2 = byteOffset; i2 < arrLength; i2++) {
                        if (read(arr, i2) === read(val, foundIndex === -1 ? 0 : i2 - foundIndex)) {
                          if (foundIndex === -1) foundIndex = i2;
                          if (i2 - foundIndex + 1 === valLength) return foundIndex * indexSize;
                        } else {
                          if (foundIndex !== -1) i2 -= i2 - foundIndex;
                          foundIndex = -1;
                        }
                      }
                    } else {
                      if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;
                      for (i2 = byteOffset; i2 >= 0; i2--) {
                        let found = true;
                        for (let j = 0; j < valLength; j++) {
                          if (read(arr, i2 + j) !== read(val, j)) {
                            found = false;
                            break;
                          }
                        }
                        if (found) return i2;
                      }
                    }
                    return -1;
                  }
                  Buffer2.prototype.includes = function includes(val, byteOffset, encoding) {
                    return this.indexOf(val, byteOffset, encoding) !== -1;
                  };
                  Buffer2.prototype.indexOf = function indexOf(val, byteOffset, encoding) {
                    return bidirectionalIndexOf(this, val, byteOffset, encoding, true);
                  };
                  Buffer2.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {
                    return bidirectionalIndexOf(this, val, byteOffset, encoding, false);
                  };
                  function hexWrite(buf, string, offset, length) {
                    offset = Number(offset) || 0;
                    const remaining = buf.length - offset;
                    if (!length) {
                      length = remaining;
                    } else {
                      length = Number(length);
                      if (length > remaining) {
                        length = remaining;
                      }
                    }
                    const strLen = string.length;
                    if (length > strLen / 2) {
                      length = strLen / 2;
                    }
                    let i2;
                    for (i2 = 0; i2 < length; ++i2) {
                      const parsed = parseInt(string.substr(i2 * 2, 2), 16);
                      if (numberIsNaN(parsed)) return i2;
                      buf[offset + i2] = parsed;
                    }
                    return i2;
                  }
                  function utf8Write(buf, string, offset, length) {
                    return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);
                  }
                  function asciiWrite(buf, string, offset, length) {
                    return blitBuffer(asciiToBytes(string), buf, offset, length);
                  }
                  function base64Write(buf, string, offset, length) {
                    return blitBuffer(base64ToBytes(string), buf, offset, length);
                  }
                  function ucs2Write(buf, string, offset, length) {
                    return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);
                  }
                  Buffer2.prototype.write = function write(string, offset, length, encoding) {
                    if (offset === void 0) {
                      encoding = "utf8";
                      length = this.length;
                      offset = 0;
                    } else if (length === void 0 && typeof offset === "string") {
                      encoding = offset;
                      length = this.length;
                      offset = 0;
                    } else if (isFinite(offset)) {
                      offset = offset >>> 0;
                      if (isFinite(length)) {
                        length = length >>> 0;
                        if (encoding === void 0) encoding = "utf8";
                      } else {
                        encoding = length;
                        length = void 0;
                      }
                    } else {
                      throw new Error(
                        "Buffer.write(string, encoding, offset[, length]) is no longer supported"
                      );
                    }
                    const remaining = this.length - offset;
                    if (length === void 0 || length > remaining) length = remaining;
                    if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {
                      throw new RangeError("Attempt to write outside buffer bounds");
                    }
                    if (!encoding) encoding = "utf8";
                    let loweredCase = false;
                    for (; ; ) {
                      switch (encoding) {
                        case "hex":
                          return hexWrite(this, string, offset, length);
                        case "utf8":
                        case "utf-8":
                          return utf8Write(this, string, offset, length);
                        case "ascii":
                        case "latin1":
                        case "binary":
                          return asciiWrite(this, string, offset, length);
                        case "base64":
                          return base64Write(this, string, offset, length);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                          return ucs2Write(this, string, offset, length);
                        default:
                          if (loweredCase) throw new TypeError("Unknown encoding: " + encoding);
                          encoding = ("" + encoding).toLowerCase();
                          loweredCase = true;
                      }
                    }
                  };
                  Buffer2.prototype.toJSON = function toJSON() {
                    return {
                      type: "Buffer",
                      data: Array.prototype.slice.call(this._arr || this, 0)
                    };
                  };
                  function base64Slice(buf, start, end) {
                    if (start === 0 && end === buf.length) {
                      return base64.fromByteArray(buf);
                    } else {
                      return base64.fromByteArray(buf.slice(start, end));
                    }
                  }
                  function utf8Slice(buf, start, end) {
                    end = Math.min(buf.length, end);
                    const res2 = [];
                    let i2 = start;
                    while (i2 < end) {
                      const firstByte = buf[i2];
                      let codePoint = null;
                      let bytesPerSequence = firstByte > 239 ? 4 : firstByte > 223 ? 3 : firstByte > 191 ? 2 : 1;
                      if (i2 + bytesPerSequence <= end) {
                        let secondByte, thirdByte, fourthByte, tempCodePoint;
                        switch (bytesPerSequence) {
                          case 1:
                            if (firstByte < 128) {
                              codePoint = firstByte;
                            }
                            break;
                          case 2:
                            secondByte = buf[i2 + 1];
                            if ((secondByte & 192) === 128) {
                              tempCodePoint = (firstByte & 31) << 6 | secondByte & 63;
                              if (tempCodePoint > 127) {
                                codePoint = tempCodePoint;
                              }
                            }
                            break;
                          case 3:
                            secondByte = buf[i2 + 1];
                            thirdByte = buf[i2 + 2];
                            if ((secondByte & 192) === 128 && (thirdByte & 192) === 128) {
                              tempCodePoint = (firstByte & 15) << 12 | (secondByte & 63) << 6 | thirdByte & 63;
                              if (tempCodePoint > 2047 && (tempCodePoint < 55296 || tempCodePoint > 57343)) {
                                codePoint = tempCodePoint;
                              }
                            }
                            break;
                          case 4:
                            secondByte = buf[i2 + 1];
                            thirdByte = buf[i2 + 2];
                            fourthByte = buf[i2 + 3];
                            if ((secondByte & 192) === 128 && (thirdByte & 192) === 128 && (fourthByte & 192) === 128) {
                              tempCodePoint = (firstByte & 15) << 18 | (secondByte & 63) << 12 | (thirdByte & 63) << 6 | fourthByte & 63;
                              if (tempCodePoint > 65535 && tempCodePoint < 1114112) {
                                codePoint = tempCodePoint;
                              }
                            }
                        }
                      }
                      if (codePoint === null) {
                        codePoint = 65533;
                        bytesPerSequence = 1;
                      } else if (codePoint > 65535) {
                        codePoint -= 65536;
                        res2.push(codePoint >>> 10 & 1023 | 55296);
                        codePoint = 56320 | codePoint & 1023;
                      }
                      res2.push(codePoint);
                      i2 += bytesPerSequence;
                    }
                    return decodeCodePointsArray(res2);
                  }
                  const MAX_ARGUMENTS_LENGTH = 4096;
                  function decodeCodePointsArray(codePoints) {
                    const len = codePoints.length;
                    if (len <= MAX_ARGUMENTS_LENGTH) {
                      return String.fromCharCode.apply(String, codePoints);
                    }
                    let res2 = "";
                    let i2 = 0;
                    while (i2 < len) {
                      res2 += String.fromCharCode.apply(
                        String,
                        codePoints.slice(i2, i2 += MAX_ARGUMENTS_LENGTH)
                      );
                    }
                    return res2;
                  }
                  function asciiSlice(buf, start, end) {
                    let ret2 = "";
                    end = Math.min(buf.length, end);
                    for (let i2 = start; i2 < end; ++i2) {
                      ret2 += String.fromCharCode(buf[i2] & 127);
                    }
                    return ret2;
                  }
                  function latin1Slice(buf, start, end) {
                    let ret2 = "";
                    end = Math.min(buf.length, end);
                    for (let i2 = start; i2 < end; ++i2) {
                      ret2 += String.fromCharCode(buf[i2]);
                    }
                    return ret2;
                  }
                  function hexSlice(buf, start, end) {
                    const len = buf.length;
                    if (!start || start < 0) start = 0;
                    if (!end || end < 0 || end > len) end = len;
                    let out = "";
                    for (let i2 = start; i2 < end; ++i2) {
                      out += hexSliceLookupTable[buf[i2]];
                    }
                    return out;
                  }
                  function utf16leSlice(buf, start, end) {
                    const bytes = buf.slice(start, end);
                    let res2 = "";
                    for (let i2 = 0; i2 < bytes.length - 1; i2 += 2) {
                      res2 += String.fromCharCode(bytes[i2] + bytes[i2 + 1] * 256);
                    }
                    return res2;
                  }
                  Buffer2.prototype.slice = function slice(start, end) {
                    const len = this.length;
                    start = ~~start;
                    end = end === void 0 ? len : ~~end;
                    if (start < 0) {
                      start += len;
                      if (start < 0) start = 0;
                    } else if (start > len) {
                      start = len;
                    }
                    if (end < 0) {
                      end += len;
                      if (end < 0) end = 0;
                    } else if (end > len) {
                      end = len;
                    }
                    if (end < start) end = start;
                    const newBuf = this.subarray(start, end);
                    Object.setPrototypeOf(newBuf, Buffer2.prototype);
                    return newBuf;
                  };
                  function checkOffset(offset, ext, length) {
                    if (offset % 1 !== 0 || offset < 0) throw new RangeError("offset is not uint");
                    if (offset + ext > length) throw new RangeError("Trying to access beyond buffer length");
                  }
                  Buffer2.prototype.readUintLE = Buffer2.prototype.readUIntLE = function readUIntLE(offset, byteLength2, noAssert) {
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) checkOffset(offset, byteLength2, this.length);
                    let val = this[offset];
                    let mul = 1;
                    let i2 = 0;
                    while (++i2 < byteLength2 && (mul *= 256)) {
                      val += this[offset + i2] * mul;
                    }
                    return val;
                  };
                  Buffer2.prototype.readUintBE = Buffer2.prototype.readUIntBE = function readUIntBE(offset, byteLength2, noAssert) {
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) {
                      checkOffset(offset, byteLength2, this.length);
                    }
                    let val = this[offset + --byteLength2];
                    let mul = 1;
                    while (byteLength2 > 0 && (mul *= 256)) {
                      val += this[offset + --byteLength2] * mul;
                    }
                    return val;
                  };
                  Buffer2.prototype.readUint8 = Buffer2.prototype.readUInt8 = function readUInt8(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 1, this.length);
                    return this[offset];
                  };
                  Buffer2.prototype.readUint16LE = Buffer2.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 2, this.length);
                    return this[offset] | this[offset + 1] << 8;
                  };
                  Buffer2.prototype.readUint16BE = Buffer2.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 2, this.length);
                    return this[offset] << 8 | this[offset + 1];
                  };
                  Buffer2.prototype.readUint32LE = Buffer2.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 16777216;
                  };
                  Buffer2.prototype.readUint32BE = Buffer2.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return this[offset] * 16777216 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);
                  };
                  Buffer2.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE(offset) {
                    offset = offset >>> 0;
                    validateNumber(offset, "offset");
                    const first2 = this[offset];
                    const last2 = this[offset + 7];
                    if (first2 === void 0 || last2 === void 0) {
                      boundsError(offset, this.length - 8);
                    }
                    const lo = first2 + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 24;
                    const hi = this[++offset] + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + last2 * 2 ** 24;
                    return BigInt(lo) + (BigInt(hi) << BigInt(32));
                  });
                  Buffer2.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE(offset) {
                    offset = offset >>> 0;
                    validateNumber(offset, "offset");
                    const first2 = this[offset];
                    const last2 = this[offset + 7];
                    if (first2 === void 0 || last2 === void 0) {
                      boundsError(offset, this.length - 8);
                    }
                    const hi = first2 * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + this[++offset];
                    const lo = this[++offset] * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + last2;
                    return (BigInt(hi) << BigInt(32)) + BigInt(lo);
                  });
                  Buffer2.prototype.readIntLE = function readIntLE(offset, byteLength2, noAssert) {
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) checkOffset(offset, byteLength2, this.length);
                    let val = this[offset];
                    let mul = 1;
                    let i2 = 0;
                    while (++i2 < byteLength2 && (mul *= 256)) {
                      val += this[offset + i2] * mul;
                    }
                    mul *= 128;
                    if (val >= mul) val -= Math.pow(2, 8 * byteLength2);
                    return val;
                  };
                  Buffer2.prototype.readIntBE = function readIntBE(offset, byteLength2, noAssert) {
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) checkOffset(offset, byteLength2, this.length);
                    let i2 = byteLength2;
                    let mul = 1;
                    let val = this[offset + --i2];
                    while (i2 > 0 && (mul *= 256)) {
                      val += this[offset + --i2] * mul;
                    }
                    mul *= 128;
                    if (val >= mul) val -= Math.pow(2, 8 * byteLength2);
                    return val;
                  };
                  Buffer2.prototype.readInt8 = function readInt8(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 1, this.length);
                    if (!(this[offset] & 128)) return this[offset];
                    return (255 - this[offset] + 1) * -1;
                  };
                  Buffer2.prototype.readInt16LE = function readInt16LE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 2, this.length);
                    const val = this[offset] | this[offset + 1] << 8;
                    return val & 32768 ? val | 4294901760 : val;
                  };
                  Buffer2.prototype.readInt16BE = function readInt16BE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 2, this.length);
                    const val = this[offset + 1] | this[offset] << 8;
                    return val & 32768 ? val | 4294901760 : val;
                  };
                  Buffer2.prototype.readInt32LE = function readInt32LE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;
                  };
                  Buffer2.prototype.readInt32BE = function readInt32BE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];
                  };
                  Buffer2.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE(offset) {
                    offset = offset >>> 0;
                    validateNumber(offset, "offset");
                    const first2 = this[offset];
                    const last2 = this[offset + 7];
                    if (first2 === void 0 || last2 === void 0) {
                      boundsError(offset, this.length - 8);
                    }
                    const val = this[offset + 4] + this[offset + 5] * 2 ** 8 + this[offset + 6] * 2 ** 16 + (last2 << 24);
                    return (BigInt(val) << BigInt(32)) + BigInt(first2 + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 24);
                  });
                  Buffer2.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE(offset) {
                    offset = offset >>> 0;
                    validateNumber(offset, "offset");
                    const first2 = this[offset];
                    const last2 = this[offset + 7];
                    if (first2 === void 0 || last2 === void 0) {
                      boundsError(offset, this.length - 8);
                    }
                    const val = (first2 << 24) + // Overflow
                    this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + this[++offset];
                    return (BigInt(val) << BigInt(32)) + BigInt(this[++offset] * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + last2);
                  });
                  Buffer2.prototype.readFloatLE = function readFloatLE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return ieee754.read(this, offset, true, 23, 4);
                  };
                  Buffer2.prototype.readFloatBE = function readFloatBE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return ieee754.read(this, offset, false, 23, 4);
                  };
                  Buffer2.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 8, this.length);
                    return ieee754.read(this, offset, true, 52, 8);
                  };
                  Buffer2.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 8, this.length);
                    return ieee754.read(this, offset, false, 52, 8);
                  };
                  function checkInt(buf, value, offset, ext, max, min) {
                    if (!Buffer2.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance');
                    if (value > max || value < min) throw new RangeError('"value" argument is out of bounds');
                    if (offset + ext > buf.length) throw new RangeError("Index out of range");
                  }
                  Buffer2.prototype.writeUintLE = Buffer2.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength2, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) {
                      const maxBytes = Math.pow(2, 8 * byteLength2) - 1;
                      checkInt(this, value, offset, byteLength2, maxBytes, 0);
                    }
                    let mul = 1;
                    let i2 = 0;
                    this[offset] = value & 255;
                    while (++i2 < byteLength2 && (mul *= 256)) {
                      this[offset + i2] = value / mul & 255;
                    }
                    return offset + byteLength2;
                  };
                  Buffer2.prototype.writeUintBE = Buffer2.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength2, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) {
                      const maxBytes = Math.pow(2, 8 * byteLength2) - 1;
                      checkInt(this, value, offset, byteLength2, maxBytes, 0);
                    }
                    let i2 = byteLength2 - 1;
                    let mul = 1;
                    this[offset + i2] = value & 255;
                    while (--i2 >= 0 && (mul *= 256)) {
                      this[offset + i2] = value / mul & 255;
                    }
                    return offset + byteLength2;
                  };
                  Buffer2.prototype.writeUint8 = Buffer2.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 1, 255, 0);
                    this[offset] = value & 255;
                    return offset + 1;
                  };
                  Buffer2.prototype.writeUint16LE = Buffer2.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 2, 65535, 0);
                    this[offset] = value & 255;
                    this[offset + 1] = value >>> 8;
                    return offset + 2;
                  };
                  Buffer2.prototype.writeUint16BE = Buffer2.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 2, 65535, 0);
                    this[offset] = value >>> 8;
                    this[offset + 1] = value & 255;
                    return offset + 2;
                  };
                  Buffer2.prototype.writeUint32LE = Buffer2.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 4, 4294967295, 0);
                    this[offset + 3] = value >>> 24;
                    this[offset + 2] = value >>> 16;
                    this[offset + 1] = value >>> 8;
                    this[offset] = value & 255;
                    return offset + 4;
                  };
                  Buffer2.prototype.writeUint32BE = Buffer2.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 4, 4294967295, 0);
                    this[offset] = value >>> 24;
                    this[offset + 1] = value >>> 16;
                    this[offset + 2] = value >>> 8;
                    this[offset + 3] = value & 255;
                    return offset + 4;
                  };
                  function wrtBigUInt64LE(buf, value, offset, min, max) {
                    checkIntBI(value, min, max, buf, offset, 7);
                    let lo = Number(value & BigInt(4294967295));
                    buf[offset++] = lo;
                    lo = lo >> 8;
                    buf[offset++] = lo;
                    lo = lo >> 8;
                    buf[offset++] = lo;
                    lo = lo >> 8;
                    buf[offset++] = lo;
                    let hi = Number(value >> BigInt(32) & BigInt(4294967295));
                    buf[offset++] = hi;
                    hi = hi >> 8;
                    buf[offset++] = hi;
                    hi = hi >> 8;
                    buf[offset++] = hi;
                    hi = hi >> 8;
                    buf[offset++] = hi;
                    return offset;
                  }
                  function wrtBigUInt64BE(buf, value, offset, min, max) {
                    checkIntBI(value, min, max, buf, offset, 7);
                    let lo = Number(value & BigInt(4294967295));
                    buf[offset + 7] = lo;
                    lo = lo >> 8;
                    buf[offset + 6] = lo;
                    lo = lo >> 8;
                    buf[offset + 5] = lo;
                    lo = lo >> 8;
                    buf[offset + 4] = lo;
                    let hi = Number(value >> BigInt(32) & BigInt(4294967295));
                    buf[offset + 3] = hi;
                    hi = hi >> 8;
                    buf[offset + 2] = hi;
                    hi = hi >> 8;
                    buf[offset + 1] = hi;
                    hi = hi >> 8;
                    buf[offset] = hi;
                    return offset + 8;
                  }
                  Buffer2.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE(value, offset = 0) {
                    return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt("0xffffffffffffffff"));
                  });
                  Buffer2.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE(value, offset = 0) {
                    return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt("0xffffffffffffffff"));
                  });
                  Buffer2.prototype.writeIntLE = function writeIntLE(value, offset, byteLength2, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) {
                      const limit = Math.pow(2, 8 * byteLength2 - 1);
                      checkInt(this, value, offset, byteLength2, limit - 1, -limit);
                    }
                    let i2 = 0;
                    let mul = 1;
                    let sub = 0;
                    this[offset] = value & 255;
                    while (++i2 < byteLength2 && (mul *= 256)) {
                      if (value < 0 && sub === 0 && this[offset + i2 - 1] !== 0) {
                        sub = 1;
                      }
                      this[offset + i2] = (value / mul >> 0) - sub & 255;
                    }
                    return offset + byteLength2;
                  };
                  Buffer2.prototype.writeIntBE = function writeIntBE(value, offset, byteLength2, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) {
                      const limit = Math.pow(2, 8 * byteLength2 - 1);
                      checkInt(this, value, offset, byteLength2, limit - 1, -limit);
                    }
                    let i2 = byteLength2 - 1;
                    let mul = 1;
                    let sub = 0;
                    this[offset + i2] = value & 255;
                    while (--i2 >= 0 && (mul *= 256)) {
                      if (value < 0 && sub === 0 && this[offset + i2 + 1] !== 0) {
                        sub = 1;
                      }
                      this[offset + i2] = (value / mul >> 0) - sub & 255;
                    }
                    return offset + byteLength2;
                  };
                  Buffer2.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 1, 127, -128);
                    if (value < 0) value = 255 + value + 1;
                    this[offset] = value & 255;
                    return offset + 1;
                  };
                  Buffer2.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 2, 32767, -32768);
                    this[offset] = value & 255;
                    this[offset + 1] = value >>> 8;
                    return offset + 2;
                  };
                  Buffer2.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 2, 32767, -32768);
                    this[offset] = value >>> 8;
                    this[offset + 1] = value & 255;
                    return offset + 2;
                  };
                  Buffer2.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 4, 2147483647, -2147483648);
                    this[offset] = value & 255;
                    this[offset + 1] = value >>> 8;
                    this[offset + 2] = value >>> 16;
                    this[offset + 3] = value >>> 24;
                    return offset + 4;
                  };
                  Buffer2.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 4, 2147483647, -2147483648);
                    if (value < 0) value = 4294967295 + value + 1;
                    this[offset] = value >>> 24;
                    this[offset + 1] = value >>> 16;
                    this[offset + 2] = value >>> 8;
                    this[offset + 3] = value & 255;
                    return offset + 4;
                  };
                  Buffer2.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE(value, offset = 0) {
                    return wrtBigUInt64LE(this, value, offset, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
                  });
                  Buffer2.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE(value, offset = 0) {
                    return wrtBigUInt64BE(this, value, offset, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
                  });
                  function checkIEEE754(buf, value, offset, ext, max, min) {
                    if (offset + ext > buf.length) throw new RangeError("Index out of range");
                    if (offset < 0) throw new RangeError("Index out of range");
                  }
                  function writeFloat(buf, value, offset, littleEndian, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) {
                      checkIEEE754(buf, value, offset, 4, 34028234663852886e22, -34028234663852886e22);
                    }
                    ieee754.write(buf, value, offset, littleEndian, 23, 4);
                    return offset + 4;
                  }
                  Buffer2.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {
                    return writeFloat(this, value, offset, true, noAssert);
                  };
                  Buffer2.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {
                    return writeFloat(this, value, offset, false, noAssert);
                  };
                  function writeDouble(buf, value, offset, littleEndian, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) {
                      checkIEEE754(buf, value, offset, 8, 17976931348623157e292, -17976931348623157e292);
                    }
                    ieee754.write(buf, value, offset, littleEndian, 52, 8);
                    return offset + 8;
                  }
                  Buffer2.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {
                    return writeDouble(this, value, offset, true, noAssert);
                  };
                  Buffer2.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {
                    return writeDouble(this, value, offset, false, noAssert);
                  };
                  Buffer2.prototype.copy = function copy2(target, targetStart, start, end) {
                    if (!Buffer2.isBuffer(target)) throw new TypeError("argument should be a Buffer");
                    if (!start) start = 0;
                    if (!end && end !== 0) end = this.length;
                    if (targetStart >= target.length) targetStart = target.length;
                    if (!targetStart) targetStart = 0;
                    if (end > 0 && end < start) end = start;
                    if (end === start) return 0;
                    if (target.length === 0 || this.length === 0) return 0;
                    if (targetStart < 0) {
                      throw new RangeError("targetStart out of bounds");
                    }
                    if (start < 0 || start >= this.length) throw new RangeError("Index out of range");
                    if (end < 0) throw new RangeError("sourceEnd out of bounds");
                    if (end > this.length) end = this.length;
                    if (target.length - targetStart < end - start) {
                      end = target.length - targetStart + start;
                    }
                    const len = end - start;
                    if (this === target && typeof Uint8Array.prototype.copyWithin === "function") {
                      this.copyWithin(targetStart, start, end);
                    } else {
                      Uint8Array.prototype.set.call(
                        target,
                        this.subarray(start, end),
                        targetStart
                      );
                    }
                    return len;
                  };
                  Buffer2.prototype.fill = function fill(val, start, end, encoding) {
                    if (typeof val === "string") {
                      if (typeof start === "string") {
                        encoding = start;
                        start = 0;
                        end = this.length;
                      } else if (typeof end === "string") {
                        encoding = end;
                        end = this.length;
                      }
                      if (encoding !== void 0 && typeof encoding !== "string") {
                        throw new TypeError("encoding must be a string");
                      }
                      if (typeof encoding === "string" && !Buffer2.isEncoding(encoding)) {
                        throw new TypeError("Unknown encoding: " + encoding);
                      }
                      if (val.length === 1) {
                        const code = val.charCodeAt(0);
                        if (encoding === "utf8" && code < 128 || encoding === "latin1") {
                          val = code;
                        }
                      }
                    } else if (typeof val === "number") {
                      val = val & 255;
                    } else if (typeof val === "boolean") {
                      val = Number(val);
                    }
                    if (start < 0 || this.length < start || this.length < end) {
                      throw new RangeError("Out of range index");
                    }
                    if (end <= start) {
                      return this;
                    }
                    start = start >>> 0;
                    end = end === void 0 ? this.length : end >>> 0;
                    if (!val) val = 0;
                    let i2;
                    if (typeof val === "number") {
                      for (i2 = start; i2 < end; ++i2) {
                        this[i2] = val;
                      }
                    } else {
                      const bytes = Buffer2.isBuffer(val) ? val : Buffer2.from(val, encoding);
                      const len = bytes.length;
                      if (len === 0) {
                        throw new TypeError('The value "' + val + '" is invalid for argument "value"');
                      }
                      for (i2 = 0; i2 < end - start; ++i2) {
                        this[i2 + start] = bytes[i2 % len];
                      }
                    }
                    return this;
                  };
                  const errors = {};
                  function E(sym, getMessage, Base) {
                    errors[sym] = class NodeError extends Base {
                      constructor() {
                        super();
                        Object.defineProperty(this, "message", {
                          value: getMessage.apply(this, arguments),
                          writable: true,
                          configurable: true
                        });
                        this.name = `${this.name} [${sym}]`;
                        this.stack;
                        delete this.name;
                      }
                      get code() {
                        return sym;
                      }
                      set code(value) {
                        Object.defineProperty(this, "code", {
                          configurable: true,
                          enumerable: true,
                          value,
                          writable: true
                        });
                      }
                      toString() {
                        return `${this.name} [${sym}]: ${this.message}`;
                      }
                    };
                  }
                  E(
                    "ERR_BUFFER_OUT_OF_BOUNDS",
                    function(name) {
                      if (name) {
                        return `${name} is outside of buffer bounds`;
                      }
                      return "Attempt to access memory outside buffer bounds";
                    },
                    RangeError
                  );
                  E(
                    "ERR_INVALID_ARG_TYPE",
                    function(name, actual) {
                      return `The "${name}" argument must be of type number. Received type ${typeof actual}`;
                    },
                    TypeError
                  );
                  E(
                    "ERR_OUT_OF_RANGE",
                    function(str, range, input) {
                      let msg = `The value of "${str}" is out of range.`;
                      let received = input;
                      if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {
                        received = addNumericalSeparator(String(input));
                      } else if (typeof input === "bigint") {
                        received = String(input);
                        if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {
                          received = addNumericalSeparator(received);
                        }
                        received += "n";
                      }
                      msg += ` It must be ${range}. Received ${received}`;
                      return msg;
                    },
                    RangeError
                  );
                  function addNumericalSeparator(val) {
                    let res2 = "";
                    let i2 = val.length;
                    const start = val[0] === "-" ? 1 : 0;
                    for (; i2 >= start + 4; i2 -= 3) {
                      res2 = `_${val.slice(i2 - 3, i2)}${res2}`;
                    }
                    return `${val.slice(0, i2)}${res2}`;
                  }
                  function checkBounds(buf, offset, byteLength2) {
                    validateNumber(offset, "offset");
                    if (buf[offset] === void 0 || buf[offset + byteLength2] === void 0) {
                      boundsError(offset, buf.length - (byteLength2 + 1));
                    }
                  }
                  function checkIntBI(value, min, max, buf, offset, byteLength2) {
                    if (value > max || value < min) {
                      const n = typeof min === "bigint" ? "n" : "";
                      let range;
                      if (byteLength2 > 3) {
                        if (min === 0 || min === BigInt(0)) {
                          range = `>= 0${n} and < 2${n} ** ${(byteLength2 + 1) * 8}${n}`;
                        } else {
                          range = `>= -(2${n} ** ${(byteLength2 + 1) * 8 - 1}${n}) and < 2 ** ${(byteLength2 + 1) * 8 - 1}${n}`;
                        }
                      } else {
                        range = `>= ${min}${n} and <= ${max}${n}`;
                      }
                      throw new errors.ERR_OUT_OF_RANGE("value", range, value);
                    }
                    checkBounds(buf, offset, byteLength2);
                  }
                  function validateNumber(value, name) {
                    if (typeof value !== "number") {
                      throw new errors.ERR_INVALID_ARG_TYPE(name, "number", value);
                    }
                  }
                  function boundsError(value, length, type) {
                    if (Math.floor(value) !== value) {
                      validateNumber(value, type);
                      throw new errors.ERR_OUT_OF_RANGE(type || "offset", "an integer", value);
                    }
                    if (length < 0) {
                      throw new errors.ERR_BUFFER_OUT_OF_BOUNDS();
                    }
                    throw new errors.ERR_OUT_OF_RANGE(
                      type || "offset",
                      `>= ${type ? 1 : 0} and <= ${length}`,
                      value
                    );
                  }
                  const INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g;
                  function base64clean(str) {
                    str = str.split("=")[0];
                    str = str.trim().replace(INVALID_BASE64_RE, "");
                    if (str.length < 2) return "";
                    while (str.length % 4 !== 0) {
                      str = str + "=";
                    }
                    return str;
                  }
                  function utf8ToBytes(string, units) {
                    units = units || Infinity;
                    let codePoint;
                    const length = string.length;
                    let leadSurrogate = null;
                    const bytes = [];
                    for (let i2 = 0; i2 < length; ++i2) {
                      codePoint = string.charCodeAt(i2);
                      if (codePoint > 55295 && codePoint < 57344) {
                        if (!leadSurrogate) {
                          if (codePoint > 56319) {
                            if ((units -= 3) > -1) bytes.push(239, 191, 189);
                            continue;
                          } else if (i2 + 1 === length) {
                            if ((units -= 3) > -1) bytes.push(239, 191, 189);
                            continue;
                          }
                          leadSurrogate = codePoint;
                          continue;
                        }
                        if (codePoint < 56320) {
                          if ((units -= 3) > -1) bytes.push(239, 191, 189);
                          leadSurrogate = codePoint;
                          continue;
                        }
                        codePoint = (leadSurrogate - 55296 << 10 | codePoint - 56320) + 65536;
                      } else if (leadSurrogate) {
                        if ((units -= 3) > -1) bytes.push(239, 191, 189);
                      }
                      leadSurrogate = null;
                      if (codePoint < 128) {
                        if ((units -= 1) < 0) break;
                        bytes.push(codePoint);
                      } else if (codePoint < 2048) {
                        if ((units -= 2) < 0) break;
                        bytes.push(
                          codePoint >> 6 | 192,
                          codePoint & 63 | 128
                        );
                      } else if (codePoint < 65536) {
                        if ((units -= 3) < 0) break;
                        bytes.push(
                          codePoint >> 12 | 224,
                          codePoint >> 6 & 63 | 128,
                          codePoint & 63 | 128
                        );
                      } else if (codePoint < 1114112) {
                        if ((units -= 4) < 0) break;
                        bytes.push(
                          codePoint >> 18 | 240,
                          codePoint >> 12 & 63 | 128,
                          codePoint >> 6 & 63 | 128,
                          codePoint & 63 | 128
                        );
                      } else {
                        throw new Error("Invalid code point");
                      }
                    }
                    return bytes;
                  }
                  function asciiToBytes(str) {
                    const byteArray = [];
                    for (let i2 = 0; i2 < str.length; ++i2) {
                      byteArray.push(str.charCodeAt(i2) & 255);
                    }
                    return byteArray;
                  }
                  function utf16leToBytes(str, units) {
                    let c, hi, lo;
                    const byteArray = [];
                    for (let i2 = 0; i2 < str.length; ++i2) {
                      if ((units -= 2) < 0) break;
                      c = str.charCodeAt(i2);
                      hi = c >> 8;
                      lo = c % 256;
                      byteArray.push(lo);
                      byteArray.push(hi);
                    }
                    return byteArray;
                  }
                  function base64ToBytes(str) {
                    return base64.toByteArray(base64clean(str));
                  }
                  function blitBuffer(src2, dst, offset, length) {
                    let i2;
                    for (i2 = 0; i2 < length; ++i2) {
                      if (i2 + offset >= dst.length || i2 >= src2.length) break;
                      dst[i2 + offset] = src2[i2];
                    }
                    return i2;
                  }
                  function isInstance(obj2, type) {
                    return obj2 instanceof type || obj2 != null && obj2.constructor != null && obj2.constructor.name != null && obj2.constructor.name === type.name;
                  }
                  function numberIsNaN(obj2) {
                    return obj2 !== obj2;
                  }
                  const hexSliceLookupTable = (function() {
                    const alphabet = "0123456789abcdef";
                    const table = new Array(256);
                    for (let i2 = 0; i2 < 16; ++i2) {
                      const i16 = i2 * 16;
                      for (let j = 0; j < 16; ++j) {
                        table[i16 + j] = alphabet[i2] + alphabet[j];
                      }
                    }
                    return table;
                  })();
                  function defineBigIntMethod(fn) {
                    return typeof BigInt === "undefined" ? BufferBigIntNotDefined : fn;
                  }
                  function BufferBigIntNotDefined() {
                    throw new Error("BigInt not supported");
                  }
                })
              ),
              /***/
              5755: (
                /***/
                ((module3, exports3) => {
                  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
                  (function() {
                    "use strict";
                    var hasOwn = {}.hasOwnProperty;
                    function classNames() {
                      var classes = [];
                      for (var i2 = 0; i2 < arguments.length; i2++) {
                        var arg = arguments[i2];
                        if (!arg) continue;
                        var argType = typeof arg;
                        if (argType === "string" || argType === "number") {
                          classes.push(arg);
                        } else if (Array.isArray(arg)) {
                          if (arg.length) {
                            var inner = classNames.apply(null, arg);
                            if (inner) {
                              classes.push(inner);
                            }
                          }
                        } else if (argType === "object") {
                          if (arg.toString === Object.prototype.toString) {
                            for (var key in arg) {
                              if (hasOwn.call(arg, key) && arg[key]) {
                                classes.push(key);
                              }
                            }
                          } else {
                            classes.push(arg.toString());
                          }
                        }
                      }
                      return classes.join(" ");
                    }
                    if (module3.exports) {
                      classNames.default = classNames;
                      module3.exports = classNames;
                    } else if (true) {
                      !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {
                        return classNames;
                      }).apply(exports3, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== void 0 && (module3.exports = __WEBPACK_AMD_DEFINE_RESULT__));
                    } else {
                    }
                  })();
                })
              ),
              /***/
              6401: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function(element, useCapture) {
                    var self2 = this, Combokeys = self2.constructor;
                    self2.callbacks = {};
                    self2.activeSequences = [];
                    self2.resetTimer;
                    self2.ignoreNextKeyup = false;
                    self2.ignoreNextKeypress = false;
                    self2.nextExpectedAction = false;
                    self2.element = element;
                    self2.addEvents(useCapture);
                    Combokeys.instances.push(self2);
                    return self2;
                  };
                  module3.exports.prototype.bind = __webpack_require__3(4830);
                  module3.exports.prototype.bindMultiple = __webpack_require__3(9829);
                  module3.exports.prototype.trigger = __webpack_require__3(9240);
                  module3.exports.prototype.reset = __webpack_require__3(8967);
                  module3.exports.prototype.stopCallback = __webpack_require__3(8873);
                  module3.exports.prototype.handleKey = __webpack_require__3(1605);
                  module3.exports.prototype.addEvents = __webpack_require__3(486);
                  module3.exports.prototype.bindSingle = __webpack_require__3(4041);
                  module3.exports.prototype.getKeyInfo = __webpack_require__3(553);
                  module3.exports.prototype.pickBestAction = __webpack_require__3(2867);
                  module3.exports.prototype.getReverseMap = __webpack_require__3(7752);
                  module3.exports.prototype.getMatches = __webpack_require__3(3763);
                  module3.exports.prototype.resetSequences = __webpack_require__3(4101);
                  module3.exports.prototype.fireCallback = __webpack_require__3(8805);
                  module3.exports.prototype.bindSequence = __webpack_require__3(8844);
                  module3.exports.prototype.resetSequenceTimer = __webpack_require__3(4173);
                  module3.exports.instances = [];
                  module3.exports.reset = __webpack_require__3(870);
                  module3.exports.REVERSE_MAP = null;
                })
              ),
              /***/
              486: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function(useCapture) {
                    var self2 = this, addEvent, element = self2.element, handleKeyEvent, boundHandler;
                    handleKeyEvent = __webpack_require__3(1254);
                    addEvent = __webpack_require__3(7193);
                    boundHandler = handleKeyEvent.bind(self2);
                    addEvent(element, "keypress", boundHandler, useCapture);
                    addEvent(element, "keydown", boundHandler, useCapture);
                    addEvent(element, "keyup", boundHandler, useCapture);
                  };
                })
              ),
              /***/
              4830: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(keys, callback, action) {
                    var self2 = this;
                    keys = keys instanceof Array ? keys : [keys];
                    return self2.bindMultiple(keys, callback, action);
                  };
                })
              ),
              /***/
              9829: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(combinations, callback, action) {
                    var self2 = this;
                    var unbinders = [];
                    for (var j = 0; j < combinations.length; ++j) {
                      unbinders.push(self2.bindSingle(combinations[j], callback, action));
                    }
                    return function() {
                      for (var ii = 0; ii < unbinders.length; ii++) {
                        unbinders[ii]();
                      }
                    };
                  };
                })
              ),
              /***/
              8844: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function(combo, keys, callback, action) {
                    var self2 = this;
                    callback.currentLevel = 0;
                    function increaseSequence(nextAction) {
                      return function() {
                        self2.nextExpectedAction = nextAction;
                        ++callback.currentLevel;
                        self2.resetSequenceTimer();
                        return true;
                      };
                    }
                    function callbackAndReset(e) {
                      var characterFromEvent;
                      self2.fireCallback(callback, e, combo);
                      if (action !== "keyup") {
                        characterFromEvent = __webpack_require__3(7625);
                        self2.ignoreNextKeyup = characterFromEvent(e);
                      }
                      setTimeout(
                        function() {
                          self2.resetSequences();
                        },
                        10
                      );
                    }
                    var unbinders = [];
                    for (var j = 0; j < keys.length; ++j) {
                      var isFinal = j + 1 === keys.length;
                      var wrappedCallback = isFinal ? callbackAndReset : increaseSequence(action || self2.getKeyInfo(keys[j + 1]).action);
                      unbinders.push(self2.bindSingle(keys[j], wrappedCallback, action, combo, j, callback));
                    }
                    return function() {
                      for (var ii = 0; ii < unbinders.length; ii++) {
                        unbinders[ii]();
                      }
                    };
                  };
                })
              ),
              /***/
              4041: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(combination, callback, action, sequenceName, level, originalCallback) {
                    var self2 = this;
                    combination = combination.replace(/\s+/g, " ");
                    var sequence = combination.split(" "), info;
                    if (sequence.length > 1) {
                      return self2.bindSequence(combination, sequence, callback, action);
                    }
                    info = self2.getKeyInfo(combination, action);
                    self2.callbacks[info.key] = self2.callbacks[info.key] || { sequences: [], singles: [] };
                    var callbacksArray = self2.callbacks[info.key][sequenceName ? "sequences" : "singles"];
                    var callbackDefinition = {
                      callback,
                      originalCallback: originalCallback || callback,
                      modifiers: info.modifiers,
                      action: info.action,
                      seq: sequenceName,
                      level,
                      combo: combination
                    };
                    callbacksArray.push(callbackDefinition);
                    return function() {
                      var index = callbacksArray.indexOf(callbackDefinition);
                      callbacksArray.splice(index, 1);
                    };
                  };
                })
              ),
              /***/
              8805: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function(callback, e, combo, sequence) {
                    var self2 = this, preventDefault, stopPropagation;
                    if (self2.stopCallback(e, e.target || e.srcElement, combo, sequence)) {
                      return true;
                    }
                    var callbackReturnValue = callback(e, combo);
                    if (callbackReturnValue === false) {
                      preventDefault = __webpack_require__3(7623);
                      preventDefault(e);
                      stopPropagation = __webpack_require__3(696);
                      stopPropagation(e);
                    }
                    return callbackReturnValue;
                  };
                })
              ),
              /***/
              553: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function(combination, action) {
                    var self2 = this, keysFromString, keys, key, j, modifiers = [], SPECIAL_ALIASES, SHIFT_MAP, isModifier;
                    keysFromString = __webpack_require__3(7417);
                    keys = keysFromString(combination);
                    SPECIAL_ALIASES = __webpack_require__3(3232);
                    SHIFT_MAP = __webpack_require__3(8385);
                    isModifier = __webpack_require__3(973);
                    for (j = 0; j < keys.length; ++j) {
                      key = keys[j];
                      if (SPECIAL_ALIASES[key]) {
                        key = SPECIAL_ALIASES[key];
                      }
                      if (action && action !== "keypress" && SHIFT_MAP[key]) {
                        key = SHIFT_MAP[key];
                        modifiers.push("shift");
                      }
                      if (isModifier(key)) {
                        modifiers.push(key);
                      }
                    }
                    action = self2.pickBestAction(key, modifiers, action);
                    return {
                      key,
                      modifiers,
                      action
                    };
                  };
                })
              ),
              /***/
              3763: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function(character, modifiers, e, sequenceName, combination, level) {
                    var self2 = this, j, callback, matches = [], action = e.type, isModifier, modifiersMatch;
                    if (!self2.callbacks[character]) {
                      return [];
                    }
                    isModifier = __webpack_require__3(973);
                    if (action === "keyup" && isModifier(character)) {
                      modifiers = [character];
                    }
                    var callbackDefinitions = self2.callbacks[character].sequences.reverse().concat(self2.callbacks[character].singles.reverse());
                    self2.callbacks[character].sequences.reverse();
                    self2.callbacks[character].singles.reverse();
                    for (j = 0; j < callbackDefinitions.length; ++j) {
                      var callbackDefinition = callbackDefinitions[j];
                      if (!sequenceName && callbackDefinition.seq && callbackDefinition.originalCallback.currentLevel !== callbackDefinition.level) {
                        continue;
                      }
                      if (action !== callbackDefinition.action) {
                        continue;
                      }
                      modifiersMatch = __webpack_require__3(4069);
                      if (action === "keypress" && !e.metaKey && !e.ctrlKey || modifiersMatch(modifiers, callbackDefinition.modifiers)) {
                        matches.push(callbackDefinition);
                      }
                    }
                    return matches;
                  };
                })
              ),
              /***/
              7752: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function() {
                    var self2 = this, constructor = self2.constructor, SPECIAL_KEYS_MAP;
                    if (!constructor.REVERSE_MAP) {
                      constructor.REVERSE_MAP = {};
                      SPECIAL_KEYS_MAP = __webpack_require__3(6037);
                      for (var key in SPECIAL_KEYS_MAP) {
                        if (key > 95 && key < 112) {
                          continue;
                        }
                        if (SPECIAL_KEYS_MAP.hasOwnProperty(key)) {
                          constructor.REVERSE_MAP[SPECIAL_KEYS_MAP[key]] = key;
                        }
                      }
                    }
                    return constructor.REVERSE_MAP;
                  };
                })
              ),
              /***/
              1605: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function(character, modifiers, e) {
                    var self2 = this, callbacks, j, activeSequences = [], maxLevel = 0, processedSequenceCallback = false, isModifier, ignoreThisKeypress;
                    callbacks = self2.getMatches(character, modifiers, e);
                    for (j = 0; j < callbacks.length; ++j) {
                      if (callbacks[j].seq) {
                        maxLevel = Math.max(maxLevel, callbacks[j].level);
                      }
                    }
                    for (j = 0; j < callbacks.length; ++j) {
                      if (callbacks[j].seq) {
                        if (callbacks[j].level !== maxLevel) {
                          continue;
                        }
                        processedSequenceCallback = true;
                        activeSequences.push(callbacks[j].originalCallback);
                        if (!self2.fireCallback(callbacks[j].callback, e, callbacks[j].combo, callbacks[j].seq)) {
                          activeSequences = [];
                          break;
                        }
                        continue;
                      }
                      if (!processedSequenceCallback) {
                        self2.fireCallback(callbacks[j].callback, e, callbacks[j].combo);
                      }
                    }
                    ignoreThisKeypress = e.type === "keypress" && self2.ignoreNextKeypress;
                    isModifier = __webpack_require__3(973);
                    if (e.type === self2.nextExpectedAction && !isModifier(character) && !ignoreThisKeypress) {
                      self2.resetSequences(activeSequences);
                    }
                    self2.ignoreNextKeypress = processedSequenceCallback && e.type === "keydown";
                  };
                })
              ),
              /***/
              1254: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function(e) {
                    var self2 = this, characterFromEvent, eventModifiers;
                    if (typeof e.which !== "number") {
                      e.which = e.keyCode;
                    }
                    characterFromEvent = __webpack_require__3(7625);
                    var character = characterFromEvent(e);
                    if (!character) {
                      return;
                    }
                    if (e.type === "keyup" && self2.ignoreNextKeyup === character) {
                      self2.ignoreNextKeyup = false;
                      return;
                    }
                    eventModifiers = __webpack_require__3(2490);
                    self2.handleKey(character, eventModifiers(e), e);
                  };
                })
              ),
              /***/
              4069: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(modifiers1, modifiers2) {
                    return modifiers1.sort().join(",") === modifiers2.sort().join(",");
                  };
                })
              ),
              /***/
              2867: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(key, modifiers, action) {
                    var self2 = this;
                    if (!action) {
                      action = self2.getReverseMap()[key] ? "keydown" : "keypress";
                    }
                    if (action === "keypress" && modifiers.length) {
                      action = "keydown";
                    }
                    return action;
                  };
                })
              ),
              /***/
              8967: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function() {
                    var self2 = this;
                    self2.callbacks = {};
                    self2.directMap = {};
                    return this;
                  };
                })
              ),
              /***/
              4173: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function() {
                    var self2 = this;
                    clearTimeout(self2.resetTimer);
                    self2.resetTimer = setTimeout(
                      function() {
                        self2.resetSequences();
                      },
                      1e3
                    );
                  };
                })
              ),
              /***/
              4101: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(activeSequences) {
                    activeSequences = activeSequences || [];
                    for (var key in this.callbacks) {
                      var callbackDefinitions = this.callbacks[key].sequences;
                      for (var ii = 0; ii < callbackDefinitions.length; ii++) {
                        if (activeSequences.indexOf(callbackDefinitions[ii].originalCallback) === -1) {
                          callbackDefinitions[ii].originalCallback.currentLevel = 0;
                        }
                      }
                    }
                    this.nextExpectedAction = activeSequences.length > 0;
                  };
                })
              ),
              /***/
              8873: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(e, element) {
                    if ((" " + element.className + " ").indexOf(" combokeys ") > -1) {
                      return false;
                    }
                    return element.tagName === "INPUT" || element.tagName === "SELECT" || element.tagName === "TEXTAREA" || element.isContentEditable;
                  };
                })
              ),
              /***/
              9240: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(keys, action) {
                  };
                })
              ),
              /***/
              870: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function() {
                    var self2 = this;
                    self2.instances.forEach(function(combokeys) {
                      combokeys.reset();
                    });
                  };
                })
              ),
              /***/
              7193: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(object, type, callback, useCapture) {
                    if (object.addEventListener) {
                      object.addEventListener(type, callback, useCapture);
                      return;
                    }
                    object.attachEvent("on" + type, callback);
                  };
                })
              ),
              /***/
              7625: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = function(e) {
                    var SPECIAL_KEYS_MAP, SPECIAL_CHARACTERS_MAP;
                    SPECIAL_KEYS_MAP = __webpack_require__3(6037);
                    SPECIAL_CHARACTERS_MAP = __webpack_require__3(5129);
                    if (e.type === "keypress") {
                      var character = String.fromCharCode(e.which);
                      if (!e.shiftKey) {
                        character = character.toLowerCase();
                      }
                      return character;
                    }
                    if (SPECIAL_KEYS_MAP[e.which]) {
                      return SPECIAL_KEYS_MAP[e.which];
                    }
                    if (SPECIAL_CHARACTERS_MAP[e.which]) {
                      return SPECIAL_CHARACTERS_MAP[e.which];
                    }
                    return String.fromCharCode(e.which).toLowerCase();
                  };
                })
              ),
              /***/
              2490: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(e) {
                    var modifiers = [];
                    if (e.shiftKey) {
                      modifiers.push("shift");
                    }
                    if (e.altKey) {
                      modifiers.push("alt");
                    }
                    if (e.ctrlKey) {
                      modifiers.push("ctrl");
                    }
                    if (e.metaKey) {
                      modifiers.push("meta");
                    }
                    return modifiers;
                  };
                })
              ),
              /***/
              973: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(key) {
                    return key === "shift" || key === "ctrl" || key === "alt" || key === "meta";
                  };
                })
              ),
              /***/
              7417: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(combination) {
                    if (combination === "+") {
                      return ["+"];
                    }
                    return combination.split("+");
                  };
                })
              ),
              /***/
              7623: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(e) {
                    if (e.preventDefault) {
                      e.preventDefault();
                      return;
                    }
                    e.returnValue = false;
                  };
                })
              ),
              /***/
              8385: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = {
                    "~": "`",
                    "!": "1",
                    "@": "2",
                    "#": "3",
                    "$": "4",
                    "%": "5",
                    "^": "6",
                    "&": "7",
                    "*": "8",
                    "(": "9",
                    ")": "0",
                    "_": "-",
                    "+": "=",
                    ":": ";",
                    '"': "'",
                    "<": ",",
                    ">": ".",
                    "?": "/",
                    "|": "\\"
                  };
                })
              ),
              /***/
              3232: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = {
                    "option": "alt",
                    "command": "meta",
                    "return": "enter",
                    "escape": "esc",
                    "mod": /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "meta" : "ctrl"
                  };
                })
              ),
              /***/
              5129: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = {
                    106: "*",
                    107: "+",
                    109: "-",
                    110: ".",
                    111: "/",
                    186: ";",
                    187: "=",
                    188: ",",
                    189: "-",
                    190: ".",
                    191: "/",
                    192: "`",
                    219: "[",
                    220: "\\",
                    221: "]",
                    222: "'"
                  };
                })
              ),
              /***/
              6037: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = {
                    8: "backspace",
                    9: "tab",
                    13: "enter",
                    16: "shift",
                    17: "ctrl",
                    18: "alt",
                    20: "capslock",
                    27: "esc",
                    32: "space",
                    33: "pageup",
                    34: "pagedown",
                    35: "end",
                    36: "home",
                    37: "left",
                    38: "up",
                    39: "right",
                    40: "down",
                    45: "ins",
                    46: "del",
                    91: "meta",
                    93: "meta",
                    187: "plus",
                    189: "minus",
                    224: "meta"
                  };
                  for (var i2 = 1; i2 < 20; ++i2) {
                    module3.exports[111 + i2] = "f" + i2;
                  }
                  for (i2 = 0; i2 <= 9; ++i2) {
                    module3.exports[i2 + 96] = i2;
                  }
                })
              ),
              /***/
              696: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(e) {
                    if (e.stopPropagation) {
                      e.stopPropagation();
                      return;
                    }
                    e.cancelBubble = true;
                  };
                })
              ),
              /***/
              4400: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  module3.exports = __webpack_require__3(6401);
                })
              ),
              /***/
              5714: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = containByScreen;
                  var _flatten = _interopRequireDefault(__webpack_require__3(4176));
                  var _uniq = _interopRequireDefault(__webpack_require__3(1285));
                  function containByScreen(element, anchorPoint, options) {
                    if (false) {
                      var style;
                    }
                    var elRect = getBoundingClientRect(element);
                    var anchorRect = getBoundingClientRect(anchorPoint);
                    var buffers = {
                      all: options.buffer || 0,
                      top: options.topBuffer || 0,
                      bottom: options.bottomBuffer || 0,
                      left: options.leftBuffer || 0,
                      right: options.rightBuffer || 0
                    };
                    var optionPositions = Array.isArray(options.position) ? options.position : [options.position].filter(Boolean);
                    var optionHAligns = Array.isArray(options.hAlign) ? options.hAlign : [options.hAlign].filter(Boolean);
                    var optionVAligns = Array.isArray(options.vAlign) ? options.vAlign : [options.vAlign].filter(Boolean);
                    var positions = optionPositions.length > 0 && options.forcePosition ? optionPositions : (0, _uniq.default)(optionPositions.concat(["top", "bottom", "left", "right"]));
                    var hAligns = optionHAligns.length > 0 && options.forceHAlign ? optionHAligns : (0, _uniq.default)(optionHAligns.concat(["center", "left", "right"]));
                    var vAligns = optionVAligns.length > 0 && options.forceVAlign ? optionVAligns : (0, _uniq.default)(optionVAligns.concat(["center", "top", "bottom"]));
                    var allPossibleChoices = (0, _flatten.default)(positions.map(function(position) {
                      return position === "cover" ? (0, _flatten.default)(hAligns.map(function(hAlign) {
                        return vAligns.map(function(vAlign) {
                          return {
                            position,
                            hAlign,
                            vAlign
                          };
                        });
                      })) : position === "top" || position === "bottom" ? hAligns.map(function(hAlign) {
                        return {
                          position,
                          hAlign,
                          vAlign: "center"
                        };
                      }) : vAligns.map(function(vAlign) {
                        return {
                          position,
                          hAlign: "center",
                          vAlign
                        };
                      });
                    }));
                    var choiceAndCoord = null;
                    for (var i2 = 0; i2 < allPossibleChoices.length; i2++) {
                      var choice = allPossibleChoices[i2];
                      var coord = positionAndAlign(elRect, anchorRect, choice, buffers);
                      var top = coord.top, left2 = coord.left;
                      if (top - buffers.all - buffers.top >= 0 && left2 - buffers.all - buffers.left >= 0 && top + elRect.height + buffers.all + buffers.bottom <= window.innerHeight && left2 + elRect.width + buffers.all + buffers.right <= window.innerWidth) {
                        choiceAndCoord = {
                          choice,
                          coord
                        };
                        break;
                      }
                    }
                    if (!choiceAndCoord) {
                      var _choice = {
                        position: optionPositions[0] || "top",
                        hAlign: optionHAligns[0] || "center",
                        vAlign: optionVAligns[0] || "center"
                      };
                      choiceAndCoord = {
                        choice: _choice,
                        coord: positionAndAlign(elRect, anchorRect, _choice, buffers)
                      };
                    }
                    element.style.top = "".concat(choiceAndCoord.coord.top, "px");
                    element.style.left = "".concat(choiceAndCoord.coord.left, "px");
                    return choiceAndCoord.choice;
                  }
                  function getBoundingClientRect(el) {
                    var rect = el.getBoundingClientRect();
                    if (!("width" in rect)) {
                      rect = Object.assign({
                        width: rect.right - rect.left,
                        height: rect.bottom - rect.top
                      }, rect);
                    }
                    return rect;
                  }
                  function positionAndAlign(elRect, anchorRect, _ref, buffers) {
                    var position = _ref.position, hAlign = _ref.hAlign, vAlign = _ref.vAlign;
                    var top = 0, left2 = 0;
                    if (position === "cover") {
                      switch (hAlign) {
                        case "center":
                          left2 = Math.round((anchorRect.left + anchorRect.right - elRect.width) / 2);
                          break;
                        case "left":
                          left2 = Math.floor(anchorRect.left);
                          break;
                        case "right":
                          left2 = Math.ceil(anchorRect.right - elRect.width);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                      switch (vAlign) {
                        case "center":
                          top = Math.round((anchorRect.top + anchorRect.bottom - elRect.height) / 2);
                          break;
                        case "top":
                          top = Math.floor(anchorRect.top);
                          break;
                        case "bottom":
                          top = Math.ceil(anchorRect.bottom - elRect.height);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                    } else if (position === "top" || position === "bottom") {
                      switch (position) {
                        case "top":
                          top = Math.floor(anchorRect.top - elRect.height - buffers.all - buffers.bottom);
                          break;
                        case "bottom":
                          top = Math.ceil(anchorRect.bottom + buffers.all + buffers.top);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                      switch (hAlign) {
                        case "center":
                          left2 = Math.round((anchorRect.left + anchorRect.right - elRect.width) / 2);
                          break;
                        case "left":
                          left2 = Math.round(anchorRect.left);
                          break;
                        case "right":
                          left2 = Math.round(anchorRect.right - elRect.width);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                    } else {
                      switch (position) {
                        case "left":
                          left2 = Math.floor(anchorRect.left - elRect.width - buffers.all - buffers.right);
                          break;
                        case "right":
                          left2 = Math.ceil(anchorRect.right + buffers.all + buffers.left);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                      switch (vAlign) {
                        case "center":
                          top = Math.round((anchorRect.top + anchorRect.bottom - elRect.height) / 2);
                          break;
                        case "top":
                          top = Math.round(anchorRect.top);
                          break;
                        case "bottom":
                          top = Math.round(anchorRect.bottom - elRect.height);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                    }
                    return {
                      top,
                      left: left2
                    };
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              1364: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(cssWithMappingToString) {
                    var list = [];
                    list.toString = function toString() {
                      return this.map(function(item) {
                        var content = "";
                        var needLayer = typeof item[5] !== "undefined";
                        if (item[4]) {
                          content += "@supports (".concat(item[4], ") {");
                        }
                        if (item[2]) {
                          content += "@media ".concat(item[2], " {");
                        }
                        if (needLayer) {
                          content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");
                        }
                        content += cssWithMappingToString(item);
                        if (needLayer) {
                          content += "}";
                        }
                        if (item[2]) {
                          content += "}";
                        }
                        if (item[4]) {
                          content += "}";
                        }
                        return content;
                      }).join("");
                    };
                    list.i = function i2(modules, media, dedupe, supports, layer) {
                      if (typeof modules === "string") {
                        modules = [[null, modules, void 0]];
                      }
                      var alreadyImportedModules = {};
                      if (dedupe) {
                        for (var k = 0; k < this.length; k++) {
                          var id = this[k][0];
                          if (id != null) {
                            alreadyImportedModules[id] = true;
                          }
                        }
                      }
                      for (var _k = 0; _k < modules.length; _k++) {
                        var item = [].concat(modules[_k]);
                        if (dedupe && alreadyImportedModules[item[0]]) {
                          continue;
                        }
                        if (typeof layer !== "undefined") {
                          if (typeof item[5] === "undefined") {
                            item[5] = layer;
                          } else {
                            item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");
                            item[5] = layer;
                          }
                        }
                        if (media) {
                          if (!item[2]) {
                            item[2] = media;
                          } else {
                            item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");
                            item[2] = media;
                          }
                        }
                        if (supports) {
                          if (!item[4]) {
                            item[4] = "".concat(supports);
                          } else {
                            item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");
                            item[4] = supports;
                          }
                        }
                        list.push(item);
                      }
                    };
                    return list;
                  };
                })
              ),
              /***/
              3615: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(url, options) {
                    if (!options) {
                      options = {};
                    }
                    if (!url) {
                      return url;
                    }
                    url = String(url.__esModule ? url.default : url);
                    if (/^['"].*['"]$/.test(url)) {
                      url = url.slice(1, -1);
                    }
                    if (options.hash) {
                      url += options.hash;
                    }
                    if (/["'() \t\n]|(%20)/.test(url) || options.needQuotes) {
                      return '"'.concat(url.replace(/"/g, '\\"').replace(/\n/g, "\\n"), '"');
                    }
                    return url;
                  };
                })
              ),
              /***/
              5516: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function(item) {
                    var content = item[1];
                    var cssMapping = item[3];
                    if (!cssMapping) {
                      return content;
                    }
                    if (typeof btoa === "function") {
                      var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
                      var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
                      var sourceMapping = "/*# ".concat(data, " */");
                      return [content].concat([sourceMapping]).join("\n");
                    }
                    return [content].join("\n");
                  };
                })
              ),
              /***/
              2400: (
                /***/
                (function(module3, exports3, __webpack_require__3) {
                  var __WEBPACK_AMD_DEFINE_RESULT__;
                  ;
                  (function(globalScope) {
                    "use strict";
                    var EXP_LIMIT = 9e15, MAX_DIGITS = 1e9, NUMERALS = "0123456789abcdef", LN10 = "2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058", PI = "3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789", DEFAULTS = {
                      // These values must be integers within the stated ranges (inclusive).
                      // Most of these values can be changed at run-time using the `Decimal.config` method.
                      // The maximum number of significant digits of the result of a calculation or base conversion.
                      // E.g. `Decimal.config({ precision: 20 });`
                      precision: 20,
                      // 1 to MAX_DIGITS
                      // The rounding mode used when rounding to `precision`.
                      //
                      // ROUND_UP         0 Away from zero.
                      // ROUND_DOWN       1 Towards zero.
                      // ROUND_CEIL       2 Towards +Infinity.
                      // ROUND_FLOOR      3 Towards -Infinity.
                      // ROUND_HALF_UP    4 Towards nearest neighbour. If equidistant, up.
                      // ROUND_HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.
                      // ROUND_HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.
                      // ROUND_HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.
                      // ROUND_HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.
                      //
                      // E.g.
                      // `Decimal.rounding = 4;`
                      // `Decimal.rounding = Decimal.ROUND_HALF_UP;`
                      rounding: 4,
                      // 0 to 8
                      // The modulo mode used when calculating the modulus: a mod n.
                      // The quotient (q = a / n) is calculated according to the corresponding rounding mode.
                      // The remainder (r) is calculated as: r = a - n * q.
                      //
                      // UP         0 The remainder is positive if the dividend is negative, else is negative.
                      // DOWN       1 The remainder has the same sign as the dividend (JavaScript %).
                      // FLOOR      3 The remainder has the same sign as the divisor (Python %).
                      // HALF_EVEN  6 The IEEE 754 remainder function.
                      // EUCLID     9 Euclidian division. q = sign(n) * floor(a / abs(n)). Always positive.
                      //
                      // Truncated division (1), floored division (3), the IEEE 754 remainder (6), and Euclidian
                      // division (9) are commonly used for the modulus operation. The other rounding modes can also
                      // be used, but they may not give useful results.
                      modulo: 1,
                      // 0 to 9
                      // The exponent value at and beneath which `toString` returns exponential notation.
                      // JavaScript numbers: -7
                      toExpNeg: -7,
                      // 0 to -EXP_LIMIT
                      // The exponent value at and above which `toString` returns exponential notation.
                      // JavaScript numbers: 21
                      toExpPos: 21,
                      // 0 to EXP_LIMIT
                      // The minimum exponent value, beneath which underflow to zero occurs.
                      // JavaScript numbers: -324  (5e-324)
                      minE: -EXP_LIMIT,
                      // -1 to -EXP_LIMIT
                      // The maximum exponent value, above which overflow to Infinity occurs.
                      // JavaScript numbers: 308  (1.7976931348623157e+308)
                      maxE: EXP_LIMIT,
                      // 1 to EXP_LIMIT
                      // Whether to use cryptographically-secure random number generation, if available.
                      crypto: false
                      // true/false
                    }, Decimal, inexact, noConflict, quadrant, external = true, decimalError = "[DecimalError] ", invalidArgument = decimalError + "Invalid argument: ", precisionLimitExceeded = decimalError + "Precision limit exceeded", cryptoUnavailable = decimalError + "crypto unavailable", mathfloor = Math.floor, mathpow = Math.pow, isBinary = /^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i, isHex = /^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i, isOctal = /^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i, isDecimal = /^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i, BASE = 1e7, LOG_BASE = 7, MAX_SAFE_INTEGER = 9007199254740991, LN10_PRECISION = LN10.length - 1, PI_PRECISION = PI.length - 1, P = { name: "[object Decimal]" };
                    P.absoluteValue = P.abs = function() {
                      var x2 = new this.constructor(this);
                      if (x2.s < 0) x2.s = 1;
                      return finalise(x2);
                    };
                    P.ceil = function() {
                      return finalise(new this.constructor(this), this.e + 1, 2);
                    };
                    P.comparedTo = P.cmp = function(y2) {
                      var i2, j, xdL, ydL, x2 = this, xd = x2.d, yd = (y2 = new x2.constructor(y2)).d, xs = x2.s, ys = y2.s;
                      if (!xd || !yd) {
                        return !xs || !ys ? NaN : xs !== ys ? xs : xd === yd ? 0 : !xd ^ xs < 0 ? 1 : -1;
                      }
                      if (!xd[0] || !yd[0]) return xd[0] ? xs : yd[0] ? -ys : 0;
                      if (xs !== ys) return xs;
                      if (x2.e !== y2.e) return x2.e > y2.e ^ xs < 0 ? 1 : -1;
                      xdL = xd.length;
                      ydL = yd.length;
                      for (i2 = 0, j = xdL < ydL ? xdL : ydL; i2 < j; ++i2) {
                        if (xd[i2] !== yd[i2]) return xd[i2] > yd[i2] ^ xs < 0 ? 1 : -1;
                      }
                      return xdL === ydL ? 0 : xdL > ydL ^ xs < 0 ? 1 : -1;
                    };
                    P.cosine = P.cos = function() {
                      var pr, rm, x2 = this, Ctor = x2.constructor;
                      if (!x2.d) return new Ctor(NaN);
                      if (!x2.d[0]) return new Ctor(1);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(x2.e, x2.sd()) + LOG_BASE;
                      Ctor.rounding = 1;
                      x2 = cosine(Ctor, toLessThanHalfPi(Ctor, x2));
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return finalise(quadrant == 2 || quadrant == 3 ? x2.neg() : x2, pr, rm, true);
                    };
                    P.cubeRoot = P.cbrt = function() {
                      var e, m, n, r, rep, s, sd, t2, t3, t3plusx, x2 = this, Ctor = x2.constructor;
                      if (!x2.isFinite() || x2.isZero()) return new Ctor(x2);
                      external = false;
                      s = x2.s * mathpow(x2.s * x2, 1 / 3);
                      if (!s || Math.abs(s) == 1 / 0) {
                        n = digitsToString(x2.d);
                        e = x2.e;
                        if (s = (e - n.length + 1) % 3) n += s == 1 || s == -2 ? "0" : "00";
                        s = mathpow(n, 1 / 3);
                        e = mathfloor((e + 1) / 3) - (e % 3 == (e < 0 ? -1 : 2));
                        if (s == 1 / 0) {
                          n = "5e" + e;
                        } else {
                          n = s.toExponential();
                          n = n.slice(0, n.indexOf("e") + 1) + e;
                        }
                        r = new Ctor(n);
                        r.s = x2.s;
                      } else {
                        r = new Ctor(s.toString());
                      }
                      sd = (e = Ctor.precision) + 3;
                      for (; ; ) {
                        t2 = r;
                        t3 = t2.times(t2).times(t2);
                        t3plusx = t3.plus(x2);
                        r = divide(t3plusx.plus(x2).times(t2), t3plusx.plus(t3), sd + 2, 1);
                        if (digitsToString(t2.d).slice(0, sd) === (n = digitsToString(r.d)).slice(0, sd)) {
                          n = n.slice(sd - 3, sd + 1);
                          if (n == "9999" || !rep && n == "4999") {
                            if (!rep) {
                              finalise(t2, e + 1, 0);
                              if (t2.times(t2).times(t2).eq(x2)) {
                                r = t2;
                                break;
                              }
                            }
                            sd += 4;
                            rep = 1;
                          } else {
                            if (!+n || !+n.slice(1) && n.charAt(0) == "5") {
                              finalise(r, e + 1, 1);
                              m = !r.times(r).times(r).eq(x2);
                            }
                            break;
                          }
                        }
                      }
                      external = true;
                      return finalise(r, e, Ctor.rounding, m);
                    };
                    P.decimalPlaces = P.dp = function() {
                      var w, d = this.d, n = NaN;
                      if (d) {
                        w = d.length - 1;
                        n = (w - mathfloor(this.e / LOG_BASE)) * LOG_BASE;
                        w = d[w];
                        if (w) for (; w % 10 == 0; w /= 10) n--;
                        if (n < 0) n = 0;
                      }
                      return n;
                    };
                    P.dividedBy = P.div = function(y2) {
                      return divide(this, new this.constructor(y2));
                    };
                    P.dividedToIntegerBy = P.divToInt = function(y2) {
                      var x2 = this, Ctor = x2.constructor;
                      return finalise(divide(x2, new Ctor(y2), 0, 1, 1), Ctor.precision, Ctor.rounding);
                    };
                    P.equals = P.eq = function(y2) {
                      return this.cmp(y2) === 0;
                    };
                    P.floor = function() {
                      return finalise(new this.constructor(this), this.e + 1, 3);
                    };
                    P.greaterThan = P.gt = function(y2) {
                      return this.cmp(y2) > 0;
                    };
                    P.greaterThanOrEqualTo = P.gte = function(y2) {
                      var k = this.cmp(y2);
                      return k == 1 || k === 0;
                    };
                    P.hyperbolicCosine = P.cosh = function() {
                      var k, n, pr, rm, len, x2 = this, Ctor = x2.constructor, one = new Ctor(1);
                      if (!x2.isFinite()) return new Ctor(x2.s ? 1 / 0 : NaN);
                      if (x2.isZero()) return one;
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(x2.e, x2.sd()) + 4;
                      Ctor.rounding = 1;
                      len = x2.d.length;
                      if (len < 32) {
                        k = Math.ceil(len / 3);
                        n = (1 / tinyPow(4, k)).toString();
                      } else {
                        k = 16;
                        n = "2.3283064365386962890625e-10";
                      }
                      x2 = taylorSeries(Ctor, 1, x2.times(n), new Ctor(1), true);
                      var cosh2_x, i2 = k, d8 = new Ctor(8);
                      for (; i2--; ) {
                        cosh2_x = x2.times(x2);
                        x2 = one.minus(cosh2_x.times(d8.minus(cosh2_x.times(d8))));
                      }
                      return finalise(x2, Ctor.precision = pr, Ctor.rounding = rm, true);
                    };
                    P.hyperbolicSine = P.sinh = function() {
                      var k, pr, rm, len, x2 = this, Ctor = x2.constructor;
                      if (!x2.isFinite() || x2.isZero()) return new Ctor(x2);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(x2.e, x2.sd()) + 4;
                      Ctor.rounding = 1;
                      len = x2.d.length;
                      if (len < 3) {
                        x2 = taylorSeries(Ctor, 2, x2, x2, true);
                      } else {
                        k = 1.4 * Math.sqrt(len);
                        k = k > 16 ? 16 : k | 0;
                        x2 = x2.times(1 / tinyPow(5, k));
                        x2 = taylorSeries(Ctor, 2, x2, x2, true);
                        var sinh2_x, d5 = new Ctor(5), d16 = new Ctor(16), d20 = new Ctor(20);
                        for (; k--; ) {
                          sinh2_x = x2.times(x2);
                          x2 = x2.times(d5.plus(sinh2_x.times(d16.times(sinh2_x).plus(d20))));
                        }
                      }
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return finalise(x2, pr, rm, true);
                    };
                    P.hyperbolicTangent = P.tanh = function() {
                      var pr, rm, x2 = this, Ctor = x2.constructor;
                      if (!x2.isFinite()) return new Ctor(x2.s);
                      if (x2.isZero()) return new Ctor(x2);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + 7;
                      Ctor.rounding = 1;
                      return divide(x2.sinh(), x2.cosh(), Ctor.precision = pr, Ctor.rounding = rm);
                    };
                    P.inverseCosine = P.acos = function() {
                      var halfPi, x2 = this, Ctor = x2.constructor, k = x2.abs().cmp(1), pr = Ctor.precision, rm = Ctor.rounding;
                      if (k !== -1) {
                        return k === 0 ? x2.isNeg() ? getPi(Ctor, pr, rm) : new Ctor(0) : new Ctor(NaN);
                      }
                      if (x2.isZero()) return getPi(Ctor, pr + 4, rm).times(0.5);
                      Ctor.precision = pr + 6;
                      Ctor.rounding = 1;
                      x2 = x2.asin();
                      halfPi = getPi(Ctor, pr + 4, rm).times(0.5);
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return halfPi.minus(x2);
                    };
                    P.inverseHyperbolicCosine = P.acosh = function() {
                      var pr, rm, x2 = this, Ctor = x2.constructor;
                      if (x2.lte(1)) return new Ctor(x2.eq(1) ? 0 : NaN);
                      if (!x2.isFinite()) return new Ctor(x2);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(Math.abs(x2.e), x2.sd()) + 4;
                      Ctor.rounding = 1;
                      external = false;
                      x2 = x2.times(x2).minus(1).sqrt().plus(x2);
                      external = true;
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return x2.ln();
                    };
                    P.inverseHyperbolicSine = P.asinh = function() {
                      var pr, rm, x2 = this, Ctor = x2.constructor;
                      if (!x2.isFinite() || x2.isZero()) return new Ctor(x2);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + 2 * Math.max(Math.abs(x2.e), x2.sd()) + 6;
                      Ctor.rounding = 1;
                      external = false;
                      x2 = x2.times(x2).plus(1).sqrt().plus(x2);
                      external = true;
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return x2.ln();
                    };
                    P.inverseHyperbolicTangent = P.atanh = function() {
                      var pr, rm, wpr, xsd, x2 = this, Ctor = x2.constructor;
                      if (!x2.isFinite()) return new Ctor(NaN);
                      if (x2.e >= 0) return new Ctor(x2.abs().eq(1) ? x2.s / 0 : x2.isZero() ? x2 : NaN);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      xsd = x2.sd();
                      if (Math.max(xsd, pr) < 2 * -x2.e - 1) return finalise(new Ctor(x2), pr, rm, true);
                      Ctor.precision = wpr = xsd - x2.e;
                      x2 = divide(x2.plus(1), new Ctor(1).minus(x2), wpr + pr, 1);
                      Ctor.precision = pr + 4;
                      Ctor.rounding = 1;
                      x2 = x2.ln();
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return x2.times(0.5);
                    };
                    P.inverseSine = P.asin = function() {
                      var halfPi, k, pr, rm, x2 = this, Ctor = x2.constructor;
                      if (x2.isZero()) return new Ctor(x2);
                      k = x2.abs().cmp(1);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      if (k !== -1) {
                        if (k === 0) {
                          halfPi = getPi(Ctor, pr + 4, rm).times(0.5);
                          halfPi.s = x2.s;
                          return halfPi;
                        }
                        return new Ctor(NaN);
                      }
                      Ctor.precision = pr + 6;
                      Ctor.rounding = 1;
                      x2 = x2.div(new Ctor(1).minus(x2.times(x2)).sqrt().plus(1)).atan();
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return x2.times(2);
                    };
                    P.inverseTangent = P.atan = function() {
                      var i2, j, k, n, px, t2, r, wpr, x2, x3 = this, Ctor = x3.constructor, pr = Ctor.precision, rm = Ctor.rounding;
                      if (!x3.isFinite()) {
                        if (!x3.s) return new Ctor(NaN);
                        if (pr + 4 <= PI_PRECISION) {
                          r = getPi(Ctor, pr + 4, rm).times(0.5);
                          r.s = x3.s;
                          return r;
                        }
                      } else if (x3.isZero()) {
                        return new Ctor(x3);
                      } else if (x3.abs().eq(1) && pr + 4 <= PI_PRECISION) {
                        r = getPi(Ctor, pr + 4, rm).times(0.25);
                        r.s = x3.s;
                        return r;
                      }
                      Ctor.precision = wpr = pr + 10;
                      Ctor.rounding = 1;
                      k = Math.min(28, wpr / LOG_BASE + 2 | 0);
                      for (i2 = k; i2; --i2) x3 = x3.div(x3.times(x3).plus(1).sqrt().plus(1));
                      external = false;
                      j = Math.ceil(wpr / LOG_BASE);
                      n = 1;
                      x2 = x3.times(x3);
                      r = new Ctor(x3);
                      px = x3;
                      for (; i2 !== -1; ) {
                        px = px.times(x2);
                        t2 = r.minus(px.div(n += 2));
                        px = px.times(x2);
                        r = t2.plus(px.div(n += 2));
                        if (r.d[j] !== void 0) for (i2 = j; r.d[i2] === t2.d[i2] && i2--; ) ;
                      }
                      if (k) r = r.times(2 << k - 1);
                      external = true;
                      return finalise(r, Ctor.precision = pr, Ctor.rounding = rm, true);
                    };
                    P.isFinite = function() {
                      return !!this.d;
                    };
                    P.isInteger = P.isInt = function() {
                      return !!this.d && mathfloor(this.e / LOG_BASE) > this.d.length - 2;
                    };
                    P.isNaN = function() {
                      return !this.s;
                    };
                    P.isNegative = P.isNeg = function() {
                      return this.s < 0;
                    };
                    P.isPositive = P.isPos = function() {
                      return this.s > 0;
                    };
                    P.isZero = function() {
                      return !!this.d && this.d[0] === 0;
                    };
                    P.lessThan = P.lt = function(y2) {
                      return this.cmp(y2) < 0;
                    };
                    P.lessThanOrEqualTo = P.lte = function(y2) {
                      return this.cmp(y2) < 1;
                    };
                    P.logarithm = P.log = function(base) {
                      var isBase10, d, denominator, k, inf, num, sd, r, arg = this, Ctor = arg.constructor, pr = Ctor.precision, rm = Ctor.rounding, guard = 5;
                      if (base == null) {
                        base = new Ctor(10);
                        isBase10 = true;
                      } else {
                        base = new Ctor(base);
                        d = base.d;
                        if (base.s < 0 || !d || !d[0] || base.eq(1)) return new Ctor(NaN);
                        isBase10 = base.eq(10);
                      }
                      d = arg.d;
                      if (arg.s < 0 || !d || !d[0] || arg.eq(1)) {
                        return new Ctor(d && !d[0] ? -1 / 0 : arg.s != 1 ? NaN : d ? 0 : 1 / 0);
                      }
                      if (isBase10) {
                        if (d.length > 1) {
                          inf = true;
                        } else {
                          for (k = d[0]; k % 10 === 0; ) k /= 10;
                          inf = k !== 1;
                        }
                      }
                      external = false;
                      sd = pr + guard;
                      num = naturalLogarithm(arg, sd);
                      denominator = isBase10 ? getLn10(Ctor, sd + 10) : naturalLogarithm(base, sd);
                      r = divide(num, denominator, sd, 1);
                      if (checkRoundingDigits(r.d, k = pr, rm)) {
                        do {
                          sd += 10;
                          num = naturalLogarithm(arg, sd);
                          denominator = isBase10 ? getLn10(Ctor, sd + 10) : naturalLogarithm(base, sd);
                          r = divide(num, denominator, sd, 1);
                          if (!inf) {
                            if (+digitsToString(r.d).slice(k + 1, k + 15) + 1 == 1e14) {
                              r = finalise(r, pr + 1, 0);
                            }
                            break;
                          }
                        } while (checkRoundingDigits(r.d, k += 10, rm));
                      }
                      external = true;
                      return finalise(r, pr, rm);
                    };
                    P.minus = P.sub = function(y2) {
                      var d, e, i2, j, k, len, pr, rm, xd, xe, xLTy, yd, x2 = this, Ctor = x2.constructor;
                      y2 = new Ctor(y2);
                      if (!x2.d || !y2.d) {
                        if (!x2.s || !y2.s) y2 = new Ctor(NaN);
                        else if (x2.d) y2.s = -y2.s;
                        else y2 = new Ctor(y2.d || x2.s !== y2.s ? x2 : NaN);
                        return y2;
                      }
                      if (x2.s != y2.s) {
                        y2.s = -y2.s;
                        return x2.plus(y2);
                      }
                      xd = x2.d;
                      yd = y2.d;
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      if (!xd[0] || !yd[0]) {
                        if (yd[0]) y2.s = -y2.s;
                        else if (xd[0]) y2 = new Ctor(x2);
                        else return new Ctor(rm === 3 ? -0 : 0);
                        return external ? finalise(y2, pr, rm) : y2;
                      }
                      e = mathfloor(y2.e / LOG_BASE);
                      xe = mathfloor(x2.e / LOG_BASE);
                      xd = xd.slice();
                      k = xe - e;
                      if (k) {
                        xLTy = k < 0;
                        if (xLTy) {
                          d = xd;
                          k = -k;
                          len = yd.length;
                        } else {
                          d = yd;
                          e = xe;
                          len = xd.length;
                        }
                        i2 = Math.max(Math.ceil(pr / LOG_BASE), len) + 2;
                        if (k > i2) {
                          k = i2;
                          d.length = 1;
                        }
                        d.reverse();
                        for (i2 = k; i2--; ) d.push(0);
                        d.reverse();
                      } else {
                        i2 = xd.length;
                        len = yd.length;
                        xLTy = i2 < len;
                        if (xLTy) len = i2;
                        for (i2 = 0; i2 < len; i2++) {
                          if (xd[i2] != yd[i2]) {
                            xLTy = xd[i2] < yd[i2];
                            break;
                          }
                        }
                        k = 0;
                      }
                      if (xLTy) {
                        d = xd;
                        xd = yd;
                        yd = d;
                        y2.s = -y2.s;
                      }
                      len = xd.length;
                      for (i2 = yd.length - len; i2 > 0; --i2) xd[len++] = 0;
                      for (i2 = yd.length; i2 > k; ) {
                        if (xd[--i2] < yd[i2]) {
                          for (j = i2; j && xd[--j] === 0; ) xd[j] = BASE - 1;
                          --xd[j];
                          xd[i2] += BASE;
                        }
                        xd[i2] -= yd[i2];
                      }
                      for (; xd[--len] === 0; ) xd.pop();
                      for (; xd[0] === 0; xd.shift()) --e;
                      if (!xd[0]) return new Ctor(rm === 3 ? -0 : 0);
                      y2.d = xd;
                      y2.e = getBase10Exponent(xd, e);
                      return external ? finalise(y2, pr, rm) : y2;
                    };
                    P.modulo = P.mod = function(y2) {
                      var q, x2 = this, Ctor = x2.constructor;
                      y2 = new Ctor(y2);
                      if (!x2.d || !y2.s || y2.d && !y2.d[0]) return new Ctor(NaN);
                      if (!y2.d || x2.d && !x2.d[0]) {
                        return finalise(new Ctor(x2), Ctor.precision, Ctor.rounding);
                      }
                      external = false;
                      if (Ctor.modulo == 9) {
                        q = divide(x2, y2.abs(), 0, 3, 1);
                        q.s *= y2.s;
                      } else {
                        q = divide(x2, y2, 0, Ctor.modulo, 1);
                      }
                      q = q.times(y2);
                      external = true;
                      return x2.minus(q);
                    };
                    P.naturalExponential = P.exp = function() {
                      return naturalExponential(this);
                    };
                    P.naturalLogarithm = P.ln = function() {
                      return naturalLogarithm(this);
                    };
                    P.negated = P.neg = function() {
                      var x2 = new this.constructor(this);
                      x2.s = -x2.s;
                      return finalise(x2);
                    };
                    P.plus = P.add = function(y2) {
                      var carry, d, e, i2, k, len, pr, rm, xd, yd, x2 = this, Ctor = x2.constructor;
                      y2 = new Ctor(y2);
                      if (!x2.d || !y2.d) {
                        if (!x2.s || !y2.s) y2 = new Ctor(NaN);
                        else if (!x2.d) y2 = new Ctor(y2.d || x2.s === y2.s ? x2 : NaN);
                        return y2;
                      }
                      if (x2.s != y2.s) {
                        y2.s = -y2.s;
                        return x2.minus(y2);
                      }
                      xd = x2.d;
                      yd = y2.d;
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      if (!xd[0] || !yd[0]) {
                        if (!yd[0]) y2 = new Ctor(x2);
                        return external ? finalise(y2, pr, rm) : y2;
                      }
                      k = mathfloor(x2.e / LOG_BASE);
                      e = mathfloor(y2.e / LOG_BASE);
                      xd = xd.slice();
                      i2 = k - e;
                      if (i2) {
                        if (i2 < 0) {
                          d = xd;
                          i2 = -i2;
                          len = yd.length;
                        } else {
                          d = yd;
                          e = k;
                          len = xd.length;
                        }
                        k = Math.ceil(pr / LOG_BASE);
                        len = k > len ? k + 1 : len + 1;
                        if (i2 > len) {
                          i2 = len;
                          d.length = 1;
                        }
                        d.reverse();
                        for (; i2--; ) d.push(0);
                        d.reverse();
                      }
                      len = xd.length;
                      i2 = yd.length;
                      if (len - i2 < 0) {
                        i2 = len;
                        d = yd;
                        yd = xd;
                        xd = d;
                      }
                      for (carry = 0; i2; ) {
                        carry = (xd[--i2] = xd[i2] + yd[i2] + carry) / BASE | 0;
                        xd[i2] %= BASE;
                      }
                      if (carry) {
                        xd.unshift(carry);
                        ++e;
                      }
                      for (len = xd.length; xd[--len] == 0; ) xd.pop();
                      y2.d = xd;
                      y2.e = getBase10Exponent(xd, e);
                      return external ? finalise(y2, pr, rm) : y2;
                    };
                    P.precision = P.sd = function(z) {
                      var k, x2 = this;
                      if (z !== void 0 && z !== !!z && z !== 1 && z !== 0) throw Error(invalidArgument + z);
                      if (x2.d) {
                        k = getPrecision(x2.d);
                        if (z && x2.e + 1 > k) k = x2.e + 1;
                      } else {
                        k = NaN;
                      }
                      return k;
                    };
                    P.round = function() {
                      var x2 = this, Ctor = x2.constructor;
                      return finalise(new Ctor(x2), x2.e + 1, Ctor.rounding);
                    };
                    P.sine = P.sin = function() {
                      var pr, rm, x2 = this, Ctor = x2.constructor;
                      if (!x2.isFinite()) return new Ctor(NaN);
                      if (x2.isZero()) return new Ctor(x2);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(x2.e, x2.sd()) + LOG_BASE;
                      Ctor.rounding = 1;
                      x2 = sine(Ctor, toLessThanHalfPi(Ctor, x2));
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return finalise(quadrant > 2 ? x2.neg() : x2, pr, rm, true);
                    };
                    P.squareRoot = P.sqrt = function() {
                      var m, n, sd, r, rep, t2, x2 = this, d = x2.d, e = x2.e, s = x2.s, Ctor = x2.constructor;
                      if (s !== 1 || !d || !d[0]) {
                        return new Ctor(!s || s < 0 && (!d || d[0]) ? NaN : d ? x2 : 1 / 0);
                      }
                      external = false;
                      s = Math.sqrt(+x2);
                      if (s == 0 || s == 1 / 0) {
                        n = digitsToString(d);
                        if ((n.length + e) % 2 == 0) n += "0";
                        s = Math.sqrt(n);
                        e = mathfloor((e + 1) / 2) - (e < 0 || e % 2);
                        if (s == 1 / 0) {
                          n = "5e" + e;
                        } else {
                          n = s.toExponential();
                          n = n.slice(0, n.indexOf("e") + 1) + e;
                        }
                        r = new Ctor(n);
                      } else {
                        r = new Ctor(s.toString());
                      }
                      sd = (e = Ctor.precision) + 3;
                      for (; ; ) {
                        t2 = r;
                        r = t2.plus(divide(x2, t2, sd + 2, 1)).times(0.5);
                        if (digitsToString(t2.d).slice(0, sd) === (n = digitsToString(r.d)).slice(0, sd)) {
                          n = n.slice(sd - 3, sd + 1);
                          if (n == "9999" || !rep && n == "4999") {
                            if (!rep) {
                              finalise(t2, e + 1, 0);
                              if (t2.times(t2).eq(x2)) {
                                r = t2;
                                break;
                              }
                            }
                            sd += 4;
                            rep = 1;
                          } else {
                            if (!+n || !+n.slice(1) && n.charAt(0) == "5") {
                              finalise(r, e + 1, 1);
                              m = !r.times(r).eq(x2);
                            }
                            break;
                          }
                        }
                      }
                      external = true;
                      return finalise(r, e, Ctor.rounding, m);
                    };
                    P.tangent = P.tan = function() {
                      var pr, rm, x2 = this, Ctor = x2.constructor;
                      if (!x2.isFinite()) return new Ctor(NaN);
                      if (x2.isZero()) return new Ctor(x2);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + 10;
                      Ctor.rounding = 1;
                      x2 = x2.sin();
                      x2.s = 1;
                      x2 = divide(x2, new Ctor(1).minus(x2.times(x2)).sqrt(), pr + 10, 0);
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return finalise(quadrant == 2 || quadrant == 4 ? x2.neg() : x2, pr, rm, true);
                    };
                    P.times = P.mul = function(y2) {
                      var carry, e, i2, k, r, rL, t2, xdL, ydL, x2 = this, Ctor = x2.constructor, xd = x2.d, yd = (y2 = new Ctor(y2)).d;
                      y2.s *= x2.s;
                      if (!xd || !xd[0] || !yd || !yd[0]) {
                        return new Ctor(!y2.s || xd && !xd[0] && !yd || yd && !yd[0] && !xd ? NaN : !xd || !yd ? y2.s / 0 : y2.s * 0);
                      }
                      e = mathfloor(x2.e / LOG_BASE) + mathfloor(y2.e / LOG_BASE);
                      xdL = xd.length;
                      ydL = yd.length;
                      if (xdL < ydL) {
                        r = xd;
                        xd = yd;
                        yd = r;
                        rL = xdL;
                        xdL = ydL;
                        ydL = rL;
                      }
                      r = [];
                      rL = xdL + ydL;
                      for (i2 = rL; i2--; ) r.push(0);
                      for (i2 = ydL; --i2 >= 0; ) {
                        carry = 0;
                        for (k = xdL + i2; k > i2; ) {
                          t2 = r[k] + yd[i2] * xd[k - i2 - 1] + carry;
                          r[k--] = t2 % BASE | 0;
                          carry = t2 / BASE | 0;
                        }
                        r[k] = (r[k] + carry) % BASE | 0;
                      }
                      for (; !r[--rL]; ) r.pop();
                      if (carry) ++e;
                      else r.shift();
                      y2.d = r;
                      y2.e = getBase10Exponent(r, e);
                      return external ? finalise(y2, Ctor.precision, Ctor.rounding) : y2;
                    };
                    P.toBinary = function(sd, rm) {
                      return toStringBinary(this, 2, sd, rm);
                    };
                    P.toDecimalPlaces = P.toDP = function(dp, rm) {
                      var x2 = this, Ctor = x2.constructor;
                      x2 = new Ctor(x2);
                      if (dp === void 0) return x2;
                      checkInt32(dp, 0, MAX_DIGITS);
                      if (rm === void 0) rm = Ctor.rounding;
                      else checkInt32(rm, 0, 8);
                      return finalise(x2, dp + x2.e + 1, rm);
                    };
                    P.toExponential = function(dp, rm) {
                      var str, x2 = this, Ctor = x2.constructor;
                      if (dp === void 0) {
                        str = finiteToString(x2, true);
                      } else {
                        checkInt32(dp, 0, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                        x2 = finalise(new Ctor(x2), dp + 1, rm);
                        str = finiteToString(x2, true, dp + 1);
                      }
                      return x2.isNeg() && !x2.isZero() ? "-" + str : str;
                    };
                    P.toFixed = function(dp, rm) {
                      var str, y2, x2 = this, Ctor = x2.constructor;
                      if (dp === void 0) {
                        str = finiteToString(x2);
                      } else {
                        checkInt32(dp, 0, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                        y2 = finalise(new Ctor(x2), dp + x2.e + 1, rm);
                        str = finiteToString(y2, false, dp + y2.e + 1);
                      }
                      return x2.isNeg() && !x2.isZero() ? "-" + str : str;
                    };
                    P.toFraction = function(maxD) {
                      var d, d0, d1, d2, e, k, n, n0, n1, pr, q, r, x2 = this, xd = x2.d, Ctor = x2.constructor;
                      if (!xd) return new Ctor(x2);
                      n1 = d0 = new Ctor(1);
                      d1 = n0 = new Ctor(0);
                      d = new Ctor(d1);
                      e = d.e = getPrecision(xd) - x2.e - 1;
                      k = e % LOG_BASE;
                      d.d[0] = mathpow(10, k < 0 ? LOG_BASE + k : k);
                      if (maxD == null) {
                        maxD = e > 0 ? d : n1;
                      } else {
                        n = new Ctor(maxD);
                        if (!n.isInt() || n.lt(n1)) throw Error(invalidArgument + n);
                        maxD = n.gt(d) ? e > 0 ? d : n1 : n;
                      }
                      external = false;
                      n = new Ctor(digitsToString(xd));
                      pr = Ctor.precision;
                      Ctor.precision = e = xd.length * LOG_BASE * 2;
                      for (; ; ) {
                        q = divide(n, d, 0, 1, 1);
                        d2 = d0.plus(q.times(d1));
                        if (d2.cmp(maxD) == 1) break;
                        d0 = d1;
                        d1 = d2;
                        d2 = n1;
                        n1 = n0.plus(q.times(d2));
                        n0 = d2;
                        d2 = d;
                        d = n.minus(q.times(d2));
                        n = d2;
                      }
                      d2 = divide(maxD.minus(d0), d1, 0, 1, 1);
                      n0 = n0.plus(d2.times(n1));
                      d0 = d0.plus(d2.times(d1));
                      n0.s = n1.s = x2.s;
                      r = divide(n1, d1, e, 1).minus(x2).abs().cmp(divide(n0, d0, e, 1).minus(x2).abs()) < 1 ? [n1, d1] : [n0, d0];
                      Ctor.precision = pr;
                      external = true;
                      return r;
                    };
                    P.toHexadecimal = P.toHex = function(sd, rm) {
                      return toStringBinary(this, 16, sd, rm);
                    };
                    P.toNearest = function(y2, rm) {
                      var x2 = this, Ctor = x2.constructor;
                      x2 = new Ctor(x2);
                      if (y2 == null) {
                        if (!x2.d) return x2;
                        y2 = new Ctor(1);
                        rm = Ctor.rounding;
                      } else {
                        y2 = new Ctor(y2);
                        if (rm === void 0) {
                          rm = Ctor.rounding;
                        } else {
                          checkInt32(rm, 0, 8);
                        }
                        if (!x2.d) return y2.s ? x2 : y2;
                        if (!y2.d) {
                          if (y2.s) y2.s = x2.s;
                          return y2;
                        }
                      }
                      if (y2.d[0]) {
                        external = false;
                        x2 = divide(x2, y2, 0, rm, 1).times(y2);
                        external = true;
                        finalise(x2);
                      } else {
                        y2.s = x2.s;
                        x2 = y2;
                      }
                      return x2;
                    };
                    P.toNumber = function() {
                      return +this;
                    };
                    P.toOctal = function(sd, rm) {
                      return toStringBinary(this, 8, sd, rm);
                    };
                    P.toPower = P.pow = function(y2) {
                      var e, k, pr, r, rm, s, x2 = this, Ctor = x2.constructor, yn = +(y2 = new Ctor(y2));
                      if (!x2.d || !y2.d || !x2.d[0] || !y2.d[0]) return new Ctor(mathpow(+x2, yn));
                      x2 = new Ctor(x2);
                      if (x2.eq(1)) return x2;
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      if (y2.eq(1)) return finalise(x2, pr, rm);
                      e = mathfloor(y2.e / LOG_BASE);
                      if (e >= y2.d.length - 1 && (k = yn < 0 ? -yn : yn) <= MAX_SAFE_INTEGER) {
                        r = intPow(Ctor, x2, k, pr);
                        return y2.s < 0 ? new Ctor(1).div(r) : finalise(r, pr, rm);
                      }
                      s = x2.s;
                      if (s < 0) {
                        if (e < y2.d.length - 1) return new Ctor(NaN);
                        if ((y2.d[e] & 1) == 0) s = 1;
                        if (x2.e == 0 && x2.d[0] == 1 && x2.d.length == 1) {
                          x2.s = s;
                          return x2;
                        }
                      }
                      k = mathpow(+x2, yn);
                      e = k == 0 || !isFinite(k) ? mathfloor(yn * (Math.log("0." + digitsToString(x2.d)) / Math.LN10 + x2.e + 1)) : new Ctor(k + "").e;
                      if (e > Ctor.maxE + 1 || e < Ctor.minE - 1) return new Ctor(e > 0 ? s / 0 : 0);
                      external = false;
                      Ctor.rounding = x2.s = 1;
                      k = Math.min(12, (e + "").length);
                      r = naturalExponential(y2.times(naturalLogarithm(x2, pr + k)), pr);
                      if (r.d) {
                        r = finalise(r, pr + 5, 1);
                        if (checkRoundingDigits(r.d, pr, rm)) {
                          e = pr + 10;
                          r = finalise(naturalExponential(y2.times(naturalLogarithm(x2, e + k)), e), e + 5, 1);
                          if (+digitsToString(r.d).slice(pr + 1, pr + 15) + 1 == 1e14) {
                            r = finalise(r, pr + 1, 0);
                          }
                        }
                      }
                      r.s = s;
                      external = true;
                      Ctor.rounding = rm;
                      return finalise(r, pr, rm);
                    };
                    P.toPrecision = function(sd, rm) {
                      var str, x2 = this, Ctor = x2.constructor;
                      if (sd === void 0) {
                        str = finiteToString(x2, x2.e <= Ctor.toExpNeg || x2.e >= Ctor.toExpPos);
                      } else {
                        checkInt32(sd, 1, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                        x2 = finalise(new Ctor(x2), sd, rm);
                        str = finiteToString(x2, sd <= x2.e || x2.e <= Ctor.toExpNeg, sd);
                      }
                      return x2.isNeg() && !x2.isZero() ? "-" + str : str;
                    };
                    P.toSignificantDigits = P.toSD = function(sd, rm) {
                      var x2 = this, Ctor = x2.constructor;
                      if (sd === void 0) {
                        sd = Ctor.precision;
                        rm = Ctor.rounding;
                      } else {
                        checkInt32(sd, 1, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                      }
                      return finalise(new Ctor(x2), sd, rm);
                    };
                    P.toString = function() {
                      var x2 = this, Ctor = x2.constructor, str = finiteToString(x2, x2.e <= Ctor.toExpNeg || x2.e >= Ctor.toExpPos);
                      return x2.isNeg() && !x2.isZero() ? "-" + str : str;
                    };
                    P.truncated = P.trunc = function() {
                      return finalise(new this.constructor(this), this.e + 1, 1);
                    };
                    P.valueOf = P.toJSON = function() {
                      var x2 = this, Ctor = x2.constructor, str = finiteToString(x2, x2.e <= Ctor.toExpNeg || x2.e >= Ctor.toExpPos);
                      return x2.isNeg() ? "-" + str : str;
                    };
                    function digitsToString(d) {
                      var i2, k, ws, indexOfLastWord = d.length - 1, str = "", w = d[0];
                      if (indexOfLastWord > 0) {
                        str += w;
                        for (i2 = 1; i2 < indexOfLastWord; i2++) {
                          ws = d[i2] + "";
                          k = LOG_BASE - ws.length;
                          if (k) str += getZeroString(k);
                          str += ws;
                        }
                        w = d[i2];
                        ws = w + "";
                        k = LOG_BASE - ws.length;
                        if (k) str += getZeroString(k);
                      } else if (w === 0) {
                        return "0";
                      }
                      for (; w % 10 === 0; ) w /= 10;
                      return str + w;
                    }
                    function checkInt32(i2, min2, max2) {
                      if (i2 !== ~~i2 || i2 < min2 || i2 > max2) {
                        throw Error(invalidArgument + i2);
                      }
                    }
                    function checkRoundingDigits(d, i2, rm, repeating) {
                      var di, k, r, rd;
                      for (k = d[0]; k >= 10; k /= 10) --i2;
                      if (--i2 < 0) {
                        i2 += LOG_BASE;
                        di = 0;
                      } else {
                        di = Math.ceil((i2 + 1) / LOG_BASE);
                        i2 %= LOG_BASE;
                      }
                      k = mathpow(10, LOG_BASE - i2);
                      rd = d[di] % k | 0;
                      if (repeating == null) {
                        if (i2 < 3) {
                          if (i2 == 0) rd = rd / 100 | 0;
                          else if (i2 == 1) rd = rd / 10 | 0;
                          r = rm < 4 && rd == 99999 || rm > 3 && rd == 49999 || rd == 5e4 || rd == 0;
                        } else {
                          r = (rm < 4 && rd + 1 == k || rm > 3 && rd + 1 == k / 2) && (d[di + 1] / k / 100 | 0) == mathpow(10, i2 - 2) - 1 || (rd == k / 2 || rd == 0) && (d[di + 1] / k / 100 | 0) == 0;
                        }
                      } else {
                        if (i2 < 4) {
                          if (i2 == 0) rd = rd / 1e3 | 0;
                          else if (i2 == 1) rd = rd / 100 | 0;
                          else if (i2 == 2) rd = rd / 10 | 0;
                          r = (repeating || rm < 4) && rd == 9999 || !repeating && rm > 3 && rd == 4999;
                        } else {
                          r = ((repeating || rm < 4) && rd + 1 == k || !repeating && rm > 3 && rd + 1 == k / 2) && (d[di + 1] / k / 1e3 | 0) == mathpow(10, i2 - 3) - 1;
                        }
                      }
                      return r;
                    }
                    function convertBase(str, baseIn, baseOut) {
                      var j, arr = [0], arrL, i2 = 0, strL = str.length;
                      for (; i2 < strL; ) {
                        for (arrL = arr.length; arrL--; ) arr[arrL] *= baseIn;
                        arr[0] += NUMERALS.indexOf(str.charAt(i2++));
                        for (j = 0; j < arr.length; j++) {
                          if (arr[j] > baseOut - 1) {
                            if (arr[j + 1] === void 0) arr[j + 1] = 0;
                            arr[j + 1] += arr[j] / baseOut | 0;
                            arr[j] %= baseOut;
                          }
                        }
                      }
                      return arr.reverse();
                    }
                    function cosine(Ctor, x2) {
                      var k, y2, len = x2.d.length;
                      if (len < 32) {
                        k = Math.ceil(len / 3);
                        y2 = (1 / tinyPow(4, k)).toString();
                      } else {
                        k = 16;
                        y2 = "2.3283064365386962890625e-10";
                      }
                      Ctor.precision += k;
                      x2 = taylorSeries(Ctor, 1, x2.times(y2), new Ctor(1));
                      for (var i2 = k; i2--; ) {
                        var cos2x = x2.times(x2);
                        x2 = cos2x.times(cos2x).minus(cos2x).times(8).plus(1);
                      }
                      Ctor.precision -= k;
                      return x2;
                    }
                    var divide = /* @__PURE__ */ (function() {
                      function multiplyInteger(x2, k, base) {
                        var temp, carry = 0, i2 = x2.length;
                        for (x2 = x2.slice(); i2--; ) {
                          temp = x2[i2] * k + carry;
                          x2[i2] = temp % base | 0;
                          carry = temp / base | 0;
                        }
                        if (carry) x2.unshift(carry);
                        return x2;
                      }
                      function compare(a, b, aL, bL) {
                        var i2, r;
                        if (aL != bL) {
                          r = aL > bL ? 1 : -1;
                        } else {
                          for (i2 = r = 0; i2 < aL; i2++) {
                            if (a[i2] != b[i2]) {
                              r = a[i2] > b[i2] ? 1 : -1;
                              break;
                            }
                          }
                        }
                        return r;
                      }
                      function subtract(a, b, aL, base) {
                        var i2 = 0;
                        for (; aL--; ) {
                          a[aL] -= i2;
                          i2 = a[aL] < b[aL] ? 1 : 0;
                          a[aL] = i2 * base + a[aL] - b[aL];
                        }
                        for (; !a[0] && a.length > 1; ) a.shift();
                      }
                      return function(x2, y2, pr, rm, dp, base) {
                        var cmp, e, i2, k, logBase, more, prod, prodL, q, qd, rem, remL, rem0, sd, t2, xi, xL, yd0, yL, yz, Ctor = x2.constructor, sign2 = x2.s == y2.s ? 1 : -1, xd = x2.d, yd = y2.d;
                        if (!xd || !xd[0] || !yd || !yd[0]) {
                          return new Ctor(
                            // Return NaN if either NaN, or both Infinity or 0.
                            !x2.s || !y2.s || (xd ? yd && xd[0] == yd[0] : !yd) ? NaN : (
                              // Return ±0 if x is 0 or y is ±Infinity, or return ±Infinity as y is 0.
                              xd && xd[0] == 0 || !yd ? sign2 * 0 : sign2 / 0
                            )
                          );
                        }
                        if (base) {
                          logBase = 1;
                          e = x2.e - y2.e;
                        } else {
                          base = BASE;
                          logBase = LOG_BASE;
                          e = mathfloor(x2.e / logBase) - mathfloor(y2.e / logBase);
                        }
                        yL = yd.length;
                        xL = xd.length;
                        q = new Ctor(sign2);
                        qd = q.d = [];
                        for (i2 = 0; yd[i2] == (xd[i2] || 0); i2++) ;
                        if (yd[i2] > (xd[i2] || 0)) e--;
                        if (pr == null) {
                          sd = pr = Ctor.precision;
                          rm = Ctor.rounding;
                        } else if (dp) {
                          sd = pr + (x2.e - y2.e) + 1;
                        } else {
                          sd = pr;
                        }
                        if (sd < 0) {
                          qd.push(1);
                          more = true;
                        } else {
                          sd = sd / logBase + 2 | 0;
                          i2 = 0;
                          if (yL == 1) {
                            k = 0;
                            yd = yd[0];
                            sd++;
                            for (; (i2 < xL || k) && sd--; i2++) {
                              t2 = k * base + (xd[i2] || 0);
                              qd[i2] = t2 / yd | 0;
                              k = t2 % yd | 0;
                            }
                            more = k || i2 < xL;
                          } else {
                            k = base / (yd[0] + 1) | 0;
                            if (k > 1) {
                              yd = multiplyInteger(yd, k, base);
                              xd = multiplyInteger(xd, k, base);
                              yL = yd.length;
                              xL = xd.length;
                            }
                            xi = yL;
                            rem = xd.slice(0, yL);
                            remL = rem.length;
                            for (; remL < yL; ) rem[remL++] = 0;
                            yz = yd.slice();
                            yz.unshift(0);
                            yd0 = yd[0];
                            if (yd[1] >= base / 2) ++yd0;
                            do {
                              k = 0;
                              cmp = compare(yd, rem, yL, remL);
                              if (cmp < 0) {
                                rem0 = rem[0];
                                if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);
                                k = rem0 / yd0 | 0;
                                if (k > 1) {
                                  if (k >= base) k = base - 1;
                                  prod = multiplyInteger(yd, k, base);
                                  prodL = prod.length;
                                  remL = rem.length;
                                  cmp = compare(prod, rem, prodL, remL);
                                  if (cmp == 1) {
                                    k--;
                                    subtract(prod, yL < prodL ? yz : yd, prodL, base);
                                  }
                                } else {
                                  if (k == 0) cmp = k = 1;
                                  prod = yd.slice();
                                }
                                prodL = prod.length;
                                if (prodL < remL) prod.unshift(0);
                                subtract(rem, prod, remL, base);
                                if (cmp == -1) {
                                  remL = rem.length;
                                  cmp = compare(yd, rem, yL, remL);
                                  if (cmp < 1) {
                                    k++;
                                    subtract(rem, yL < remL ? yz : yd, remL, base);
                                  }
                                }
                                remL = rem.length;
                              } else if (cmp === 0) {
                                k++;
                                rem = [0];
                              }
                              qd[i2++] = k;
                              if (cmp && rem[0]) {
                                rem[remL++] = xd[xi] || 0;
                              } else {
                                rem = [xd[xi]];
                                remL = 1;
                              }
                            } while ((xi++ < xL || rem[0] !== void 0) && sd--);
                            more = rem[0] !== void 0;
                          }
                          if (!qd[0]) qd.shift();
                        }
                        if (logBase == 1) {
                          q.e = e;
                          inexact = more;
                        } else {
                          for (i2 = 1, k = qd[0]; k >= 10; k /= 10) i2++;
                          q.e = i2 + e * logBase - 1;
                          finalise(q, dp ? pr + q.e + 1 : pr, rm, more);
                        }
                        return q;
                      };
                    })();
                    function finalise(x2, sd, rm, isTruncated) {
                      var digits, i2, j, k, rd, roundUp, w, xd, xdi, Ctor = x2.constructor;
                      out: if (sd != null) {
                        xd = x2.d;
                        if (!xd) return x2;
                        for (digits = 1, k = xd[0]; k >= 10; k /= 10) digits++;
                        i2 = sd - digits;
                        if (i2 < 0) {
                          i2 += LOG_BASE;
                          j = sd;
                          w = xd[xdi = 0];
                          rd = w / mathpow(10, digits - j - 1) % 10 | 0;
                        } else {
                          xdi = Math.ceil((i2 + 1) / LOG_BASE);
                          k = xd.length;
                          if (xdi >= k) {
                            if (isTruncated) {
                              for (; k++ <= xdi; ) xd.push(0);
                              w = rd = 0;
                              digits = 1;
                              i2 %= LOG_BASE;
                              j = i2 - LOG_BASE + 1;
                            } else {
                              break out;
                            }
                          } else {
                            w = k = xd[xdi];
                            for (digits = 1; k >= 10; k /= 10) digits++;
                            i2 %= LOG_BASE;
                            j = i2 - LOG_BASE + digits;
                            rd = j < 0 ? 0 : w / mathpow(10, digits - j - 1) % 10 | 0;
                          }
                        }
                        isTruncated = isTruncated || sd < 0 || xd[xdi + 1] !== void 0 || (j < 0 ? w : w % mathpow(10, digits - j - 1));
                        roundUp = rm < 4 ? (rd || isTruncated) && (rm == 0 || rm == (x2.s < 0 ? 3 : 2)) : rd > 5 || rd == 5 && (rm == 4 || isTruncated || rm == 6 && // Check whether the digit to the left of the rounding digit is odd.
                        (i2 > 0 ? j > 0 ? w / mathpow(10, digits - j) : 0 : xd[xdi - 1]) % 10 & 1 || rm == (x2.s < 0 ? 8 : 7));
                        if (sd < 1 || !xd[0]) {
                          xd.length = 0;
                          if (roundUp) {
                            sd -= x2.e + 1;
                            xd[0] = mathpow(10, (LOG_BASE - sd % LOG_BASE) % LOG_BASE);
                            x2.e = -sd || 0;
                          } else {
                            xd[0] = x2.e = 0;
                          }
                          return x2;
                        }
                        if (i2 == 0) {
                          xd.length = xdi;
                          k = 1;
                          xdi--;
                        } else {
                          xd.length = xdi + 1;
                          k = mathpow(10, LOG_BASE - i2);
                          xd[xdi] = j > 0 ? (w / mathpow(10, digits - j) % mathpow(10, j) | 0) * k : 0;
                        }
                        if (roundUp) {
                          for (; ; ) {
                            if (xdi == 0) {
                              for (i2 = 1, j = xd[0]; j >= 10; j /= 10) i2++;
                              j = xd[0] += k;
                              for (k = 1; j >= 10; j /= 10) k++;
                              if (i2 != k) {
                                x2.e++;
                                if (xd[0] == BASE) xd[0] = 1;
                              }
                              break;
                            } else {
                              xd[xdi] += k;
                              if (xd[xdi] != BASE) break;
                              xd[xdi--] = 0;
                              k = 1;
                            }
                          }
                        }
                        for (i2 = xd.length; xd[--i2] === 0; ) xd.pop();
                      }
                      if (external) {
                        if (x2.e > Ctor.maxE) {
                          x2.d = null;
                          x2.e = NaN;
                        } else if (x2.e < Ctor.minE) {
                          x2.e = 0;
                          x2.d = [0];
                        }
                      }
                      return x2;
                    }
                    function finiteToString(x2, isExp, sd) {
                      if (!x2.isFinite()) return nonFiniteToString(x2);
                      var k, e = x2.e, str = digitsToString(x2.d), len = str.length;
                      if (isExp) {
                        if (sd && (k = sd - len) > 0) {
                          str = str.charAt(0) + "." + str.slice(1) + getZeroString(k);
                        } else if (len > 1) {
                          str = str.charAt(0) + "." + str.slice(1);
                        }
                        str = str + (x2.e < 0 ? "e" : "e+") + x2.e;
                      } else if (e < 0) {
                        str = "0." + getZeroString(-e - 1) + str;
                        if (sd && (k = sd - len) > 0) str += getZeroString(k);
                      } else if (e >= len) {
                        str += getZeroString(e + 1 - len);
                        if (sd && (k = sd - e - 1) > 0) str = str + "." + getZeroString(k);
                      } else {
                        if ((k = e + 1) < len) str = str.slice(0, k) + "." + str.slice(k);
                        if (sd && (k = sd - len) > 0) {
                          if (e + 1 === len) str += ".";
                          str += getZeroString(k);
                        }
                      }
                      return str;
                    }
                    function getBase10Exponent(digits, e) {
                      var w = digits[0];
                      for (e *= LOG_BASE; w >= 10; w /= 10) e++;
                      return e;
                    }
                    function getLn10(Ctor, sd, pr) {
                      if (sd > LN10_PRECISION) {
                        external = true;
                        if (pr) Ctor.precision = pr;
                        throw Error(precisionLimitExceeded);
                      }
                      return finalise(new Ctor(LN10), sd, 1, true);
                    }
                    function getPi(Ctor, sd, rm) {
                      if (sd > PI_PRECISION) throw Error(precisionLimitExceeded);
                      return finalise(new Ctor(PI), sd, rm, true);
                    }
                    function getPrecision(digits) {
                      var w = digits.length - 1, len = w * LOG_BASE + 1;
                      w = digits[w];
                      if (w) {
                        for (; w % 10 == 0; w /= 10) len--;
                        for (w = digits[0]; w >= 10; w /= 10) len++;
                      }
                      return len;
                    }
                    function getZeroString(k) {
                      var zs = "";
                      for (; k--; ) zs += "0";
                      return zs;
                    }
                    function intPow(Ctor, x2, n, pr) {
                      var isTruncated, r = new Ctor(1), k = Math.ceil(pr / LOG_BASE + 4);
                      external = false;
                      for (; ; ) {
                        if (n % 2) {
                          r = r.times(x2);
                          if (truncate(r.d, k)) isTruncated = true;
                        }
                        n = mathfloor(n / 2);
                        if (n === 0) {
                          n = r.d.length - 1;
                          if (isTruncated && r.d[n] === 0) ++r.d[n];
                          break;
                        }
                        x2 = x2.times(x2);
                        truncate(x2.d, k);
                      }
                      external = true;
                      return r;
                    }
                    function isOdd(n) {
                      return n.d[n.d.length - 1] & 1;
                    }
                    function maxOrMin(Ctor, args, ltgt) {
                      var y2, x2 = new Ctor(args[0]), i2 = 0;
                      for (; ++i2 < args.length; ) {
                        y2 = new Ctor(args[i2]);
                        if (!y2.s) {
                          x2 = y2;
                          break;
                        } else if (x2[ltgt](y2)) {
                          x2 = y2;
                        }
                      }
                      return x2;
                    }
                    function naturalExponential(x2, sd) {
                      var denominator, guard, j, pow2, sum, t2, wpr, rep = 0, i2 = 0, k = 0, Ctor = x2.constructor, rm = Ctor.rounding, pr = Ctor.precision;
                      if (!x2.d || !x2.d[0] || x2.e > 17) {
                        return new Ctor(x2.d ? !x2.d[0] ? 1 : x2.s < 0 ? 0 : 1 / 0 : x2.s ? x2.s < 0 ? 0 : x2 : 0 / 0);
                      }
                      if (sd == null) {
                        external = false;
                        wpr = pr;
                      } else {
                        wpr = sd;
                      }
                      t2 = new Ctor(0.03125);
                      while (x2.e > -2) {
                        x2 = x2.times(t2);
                        k += 5;
                      }
                      guard = Math.log(mathpow(2, k)) / Math.LN10 * 2 + 5 | 0;
                      wpr += guard;
                      denominator = pow2 = sum = new Ctor(1);
                      Ctor.precision = wpr;
                      for (; ; ) {
                        pow2 = finalise(pow2.times(x2), wpr, 1);
                        denominator = denominator.times(++i2);
                        t2 = sum.plus(divide(pow2, denominator, wpr, 1));
                        if (digitsToString(t2.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {
                          j = k;
                          while (j--) sum = finalise(sum.times(sum), wpr, 1);
                          if (sd == null) {
                            if (rep < 3 && checkRoundingDigits(sum.d, wpr - guard, rm, rep)) {
                              Ctor.precision = wpr += 10;
                              denominator = pow2 = t2 = new Ctor(1);
                              i2 = 0;
                              rep++;
                            } else {
                              return finalise(sum, Ctor.precision = pr, rm, external = true);
                            }
                          } else {
                            Ctor.precision = pr;
                            return sum;
                          }
                        }
                        sum = t2;
                      }
                    }
                    function naturalLogarithm(y2, sd) {
                      var c, c0, denominator, e, numerator, rep, sum, t2, wpr, x1, x2, n = 1, guard = 10, x3 = y2, xd = x3.d, Ctor = x3.constructor, rm = Ctor.rounding, pr = Ctor.precision;
                      if (x3.s < 0 || !xd || !xd[0] || !x3.e && xd[0] == 1 && xd.length == 1) {
                        return new Ctor(xd && !xd[0] ? -1 / 0 : x3.s != 1 ? NaN : xd ? 0 : x3);
                      }
                      if (sd == null) {
                        external = false;
                        wpr = pr;
                      } else {
                        wpr = sd;
                      }
                      Ctor.precision = wpr += guard;
                      c = digitsToString(xd);
                      c0 = c.charAt(0);
                      if (Math.abs(e = x3.e) < 15e14) {
                        while (c0 < 7 && c0 != 1 || c0 == 1 && c.charAt(1) > 3) {
                          x3 = x3.times(y2);
                          c = digitsToString(x3.d);
                          c0 = c.charAt(0);
                          n++;
                        }
                        e = x3.e;
                        if (c0 > 1) {
                          x3 = new Ctor("0." + c);
                          e++;
                        } else {
                          x3 = new Ctor(c0 + "." + c.slice(1));
                        }
                      } else {
                        t2 = getLn10(Ctor, wpr + 2, pr).times(e + "");
                        x3 = naturalLogarithm(new Ctor(c0 + "." + c.slice(1)), wpr - guard).plus(t2);
                        Ctor.precision = pr;
                        return sd == null ? finalise(x3, pr, rm, external = true) : x3;
                      }
                      x1 = x3;
                      sum = numerator = x3 = divide(x3.minus(1), x3.plus(1), wpr, 1);
                      x2 = finalise(x3.times(x3), wpr, 1);
                      denominator = 3;
                      for (; ; ) {
                        numerator = finalise(numerator.times(x2), wpr, 1);
                        t2 = sum.plus(divide(numerator, new Ctor(denominator), wpr, 1));
                        if (digitsToString(t2.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {
                          sum = sum.times(2);
                          if (e !== 0) sum = sum.plus(getLn10(Ctor, wpr + 2, pr).times(e + ""));
                          sum = divide(sum, new Ctor(n), wpr, 1);
                          if (sd == null) {
                            if (checkRoundingDigits(sum.d, wpr - guard, rm, rep)) {
                              Ctor.precision = wpr += guard;
                              t2 = numerator = x3 = divide(x1.minus(1), x1.plus(1), wpr, 1);
                              x2 = finalise(x3.times(x3), wpr, 1);
                              denominator = rep = 1;
                            } else {
                              return finalise(sum, Ctor.precision = pr, rm, external = true);
                            }
                          } else {
                            Ctor.precision = pr;
                            return sum;
                          }
                        }
                        sum = t2;
                        denominator += 2;
                      }
                    }
                    function nonFiniteToString(x2) {
                      return String(x2.s * x2.s / 0);
                    }
                    function parseDecimal(x2, str) {
                      var e, i2, len;
                      if ((e = str.indexOf(".")) > -1) str = str.replace(".", "");
                      if ((i2 = str.search(/e/i)) > 0) {
                        if (e < 0) e = i2;
                        e += +str.slice(i2 + 1);
                        str = str.substring(0, i2);
                      } else if (e < 0) {
                        e = str.length;
                      }
                      for (i2 = 0; str.charCodeAt(i2) === 48; i2++) ;
                      for (len = str.length; str.charCodeAt(len - 1) === 48; --len) ;
                      str = str.slice(i2, len);
                      if (str) {
                        len -= i2;
                        x2.e = e = e - i2 - 1;
                        x2.d = [];
                        i2 = (e + 1) % LOG_BASE;
                        if (e < 0) i2 += LOG_BASE;
                        if (i2 < len) {
                          if (i2) x2.d.push(+str.slice(0, i2));
                          for (len -= LOG_BASE; i2 < len; ) x2.d.push(+str.slice(i2, i2 += LOG_BASE));
                          str = str.slice(i2);
                          i2 = LOG_BASE - str.length;
                        } else {
                          i2 -= len;
                        }
                        for (; i2--; ) str += "0";
                        x2.d.push(+str);
                        if (external) {
                          if (x2.e > x2.constructor.maxE) {
                            x2.d = null;
                            x2.e = NaN;
                          } else if (x2.e < x2.constructor.minE) {
                            x2.e = 0;
                            x2.d = [0];
                          }
                        }
                      } else {
                        x2.e = 0;
                        x2.d = [0];
                      }
                      return x2;
                    }
                    function parseOther(x2, str) {
                      var base, Ctor, divisor, i2, isFloat, len, p, xd, xe;
                      if (str === "Infinity" || str === "NaN") {
                        if (!+str) x2.s = NaN;
                        x2.e = NaN;
                        x2.d = null;
                        return x2;
                      }
                      if (isHex.test(str)) {
                        base = 16;
                        str = str.toLowerCase();
                      } else if (isBinary.test(str)) {
                        base = 2;
                      } else if (isOctal.test(str)) {
                        base = 8;
                      } else {
                        throw Error(invalidArgument + str);
                      }
                      i2 = str.search(/p/i);
                      if (i2 > 0) {
                        p = +str.slice(i2 + 1);
                        str = str.substring(2, i2);
                      } else {
                        str = str.slice(2);
                      }
                      i2 = str.indexOf(".");
                      isFloat = i2 >= 0;
                      Ctor = x2.constructor;
                      if (isFloat) {
                        str = str.replace(".", "");
                        len = str.length;
                        i2 = len - i2;
                        divisor = intPow(Ctor, new Ctor(base), i2, i2 * 2);
                      }
                      xd = convertBase(str, base, BASE);
                      xe = xd.length - 1;
                      for (i2 = xe; xd[i2] === 0; --i2) xd.pop();
                      if (i2 < 0) return new Ctor(x2.s * 0);
                      x2.e = getBase10Exponent(xd, xe);
                      x2.d = xd;
                      external = false;
                      if (isFloat) x2 = divide(x2, divisor, len * 4);
                      if (p) x2 = x2.times(Math.abs(p) < 54 ? mathpow(2, p) : Decimal.pow(2, p));
                      external = true;
                      return x2;
                    }
                    function sine(Ctor, x2) {
                      var k, len = x2.d.length;
                      if (len < 3) return taylorSeries(Ctor, 2, x2, x2);
                      k = 1.4 * Math.sqrt(len);
                      k = k > 16 ? 16 : k | 0;
                      x2 = x2.times(1 / tinyPow(5, k));
                      x2 = taylorSeries(Ctor, 2, x2, x2);
                      var sin2_x, d5 = new Ctor(5), d16 = new Ctor(16), d20 = new Ctor(20);
                      for (; k--; ) {
                        sin2_x = x2.times(x2);
                        x2 = x2.times(d5.plus(sin2_x.times(d16.times(sin2_x).minus(d20))));
                      }
                      return x2;
                    }
                    function taylorSeries(Ctor, n, x2, y2, isHyperbolic) {
                      var j, t2, u, x22, i2 = 1, pr = Ctor.precision, k = Math.ceil(pr / LOG_BASE);
                      external = false;
                      x22 = x2.times(x2);
                      u = new Ctor(y2);
                      for (; ; ) {
                        t2 = divide(u.times(x22), new Ctor(n++ * n++), pr, 1);
                        u = isHyperbolic ? y2.plus(t2) : y2.minus(t2);
                        y2 = divide(t2.times(x22), new Ctor(n++ * n++), pr, 1);
                        t2 = u.plus(y2);
                        if (t2.d[k] !== void 0) {
                          for (j = k; t2.d[j] === u.d[j] && j--; ) ;
                          if (j == -1) break;
                        }
                        j = u;
                        u = y2;
                        y2 = t2;
                        t2 = j;
                        i2++;
                      }
                      external = true;
                      t2.d.length = k + 1;
                      return t2;
                    }
                    function tinyPow(b, e) {
                      var n = b;
                      while (--e) n *= b;
                      return n;
                    }
                    function toLessThanHalfPi(Ctor, x2) {
                      var t2, isNeg = x2.s < 0, pi = getPi(Ctor, Ctor.precision, 1), halfPi = pi.times(0.5);
                      x2 = x2.abs();
                      if (x2.lte(halfPi)) {
                        quadrant = isNeg ? 4 : 1;
                        return x2;
                      }
                      t2 = x2.divToInt(pi);
                      if (t2.isZero()) {
                        quadrant = isNeg ? 3 : 2;
                      } else {
                        x2 = x2.minus(t2.times(pi));
                        if (x2.lte(halfPi)) {
                          quadrant = isOdd(t2) ? isNeg ? 2 : 3 : isNeg ? 4 : 1;
                          return x2;
                        }
                        quadrant = isOdd(t2) ? isNeg ? 1 : 4 : isNeg ? 3 : 2;
                      }
                      return x2.minus(pi).abs();
                    }
                    function toStringBinary(x2, baseOut, sd, rm) {
                      var base, e, i2, k, len, roundUp, str, xd, y2, Ctor = x2.constructor, isExp = sd !== void 0;
                      if (isExp) {
                        checkInt32(sd, 1, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                      } else {
                        sd = Ctor.precision;
                        rm = Ctor.rounding;
                      }
                      if (!x2.isFinite()) {
                        str = nonFiniteToString(x2);
                      } else {
                        str = finiteToString(x2);
                        i2 = str.indexOf(".");
                        if (isExp) {
                          base = 2;
                          if (baseOut == 16) {
                            sd = sd * 4 - 3;
                          } else if (baseOut == 8) {
                            sd = sd * 3 - 2;
                          }
                        } else {
                          base = baseOut;
                        }
                        if (i2 >= 0) {
                          str = str.replace(".", "");
                          y2 = new Ctor(1);
                          y2.e = str.length - i2;
                          y2.d = convertBase(finiteToString(y2), 10, base);
                          y2.e = y2.d.length;
                        }
                        xd = convertBase(str, 10, base);
                        e = len = xd.length;
                        for (; xd[--len] == 0; ) xd.pop();
                        if (!xd[0]) {
                          str = isExp ? "0p+0" : "0";
                        } else {
                          if (i2 < 0) {
                            e--;
                          } else {
                            x2 = new Ctor(x2);
                            x2.d = xd;
                            x2.e = e;
                            x2 = divide(x2, y2, sd, rm, 0, base);
                            xd = x2.d;
                            e = x2.e;
                            roundUp = inexact;
                          }
                          i2 = xd[sd];
                          k = base / 2;
                          roundUp = roundUp || xd[sd + 1] !== void 0;
                          roundUp = rm < 4 ? (i2 !== void 0 || roundUp) && (rm === 0 || rm === (x2.s < 0 ? 3 : 2)) : i2 > k || i2 === k && (rm === 4 || roundUp || rm === 6 && xd[sd - 1] & 1 || rm === (x2.s < 0 ? 8 : 7));
                          xd.length = sd;
                          if (roundUp) {
                            for (; ++xd[--sd] > base - 1; ) {
                              xd[sd] = 0;
                              if (!sd) {
                                ++e;
                                xd.unshift(1);
                              }
                            }
                          }
                          for (len = xd.length; !xd[len - 1]; --len) ;
                          for (i2 = 0, str = ""; i2 < len; i2++) str += NUMERALS.charAt(xd[i2]);
                          if (isExp) {
                            if (len > 1) {
                              if (baseOut == 16 || baseOut == 8) {
                                i2 = baseOut == 16 ? 4 : 3;
                                for (--len; len % i2; len++) str += "0";
                                xd = convertBase(str, base, baseOut);
                                for (len = xd.length; !xd[len - 1]; --len) ;
                                for (i2 = 1, str = "1."; i2 < len; i2++) str += NUMERALS.charAt(xd[i2]);
                              } else {
                                str = str.charAt(0) + "." + str.slice(1);
                              }
                            }
                            str = str + (e < 0 ? "p" : "p+") + e;
                          } else if (e < 0) {
                            for (; ++e; ) str = "0" + str;
                            str = "0." + str;
                          } else {
                            if (++e > len) for (e -= len; e--; ) str += "0";
                            else if (e < len) str = str.slice(0, e) + "." + str.slice(e);
                          }
                        }
                        str = (baseOut == 16 ? "0x" : baseOut == 2 ? "0b" : baseOut == 8 ? "0o" : "") + str;
                      }
                      return x2.s < 0 ? "-" + str : str;
                    }
                    function truncate(arr, len) {
                      if (arr.length > len) {
                        arr.length = len;
                        return true;
                      }
                    }
                    function abs(x2) {
                      return new this(x2).abs();
                    }
                    function acos(x2) {
                      return new this(x2).acos();
                    }
                    function acosh(x2) {
                      return new this(x2).acosh();
                    }
                    function add(x2, y2) {
                      return new this(x2).plus(y2);
                    }
                    function asin(x2) {
                      return new this(x2).asin();
                    }
                    function asinh(x2) {
                      return new this(x2).asinh();
                    }
                    function atan(x2) {
                      return new this(x2).atan();
                    }
                    function atanh(x2) {
                      return new this(x2).atanh();
                    }
                    function atan2(y2, x2) {
                      y2 = new this(y2);
                      x2 = new this(x2);
                      var r, pr = this.precision, rm = this.rounding, wpr = pr + 4;
                      if (!y2.s || !x2.s) {
                        r = new this(NaN);
                      } else if (!y2.d && !x2.d) {
                        r = getPi(this, wpr, 1).times(x2.s > 0 ? 0.25 : 0.75);
                        r.s = y2.s;
                      } else if (!x2.d || y2.isZero()) {
                        r = x2.s < 0 ? getPi(this, pr, rm) : new this(0);
                        r.s = y2.s;
                      } else if (!y2.d || x2.isZero()) {
                        r = getPi(this, wpr, 1).times(0.5);
                        r.s = y2.s;
                      } else if (x2.s < 0) {
                        this.precision = wpr;
                        this.rounding = 1;
                        r = this.atan(divide(y2, x2, wpr, 1));
                        x2 = getPi(this, wpr, 1);
                        this.precision = pr;
                        this.rounding = rm;
                        r = y2.s < 0 ? r.minus(x2) : r.plus(x2);
                      } else {
                        r = this.atan(divide(y2, x2, wpr, 1));
                      }
                      return r;
                    }
                    function cbrt(x2) {
                      return new this(x2).cbrt();
                    }
                    function ceil(x2) {
                      return finalise(x2 = new this(x2), x2.e + 1, 2);
                    }
                    function config(obj2) {
                      if (!obj2 || typeof obj2 !== "object") throw Error(decimalError + "Object expected");
                      var i2, p, v, useDefaults = obj2.defaults === true, ps = [
                        "precision",
                        1,
                        MAX_DIGITS,
                        "rounding",
                        0,
                        8,
                        "toExpNeg",
                        -EXP_LIMIT,
                        0,
                        "toExpPos",
                        0,
                        EXP_LIMIT,
                        "maxE",
                        0,
                        EXP_LIMIT,
                        "minE",
                        -EXP_LIMIT,
                        0,
                        "modulo",
                        0,
                        9
                      ];
                      for (i2 = 0; i2 < ps.length; i2 += 3) {
                        if (p = ps[i2], useDefaults) this[p] = DEFAULTS[p];
                        if ((v = obj2[p]) !== void 0) {
                          if (mathfloor(v) === v && v >= ps[i2 + 1] && v <= ps[i2 + 2]) this[p] = v;
                          else throw Error(invalidArgument + p + ": " + v);
                        }
                      }
                      if (p = "crypto", useDefaults) this[p] = DEFAULTS[p];
                      if ((v = obj2[p]) !== void 0) {
                        if (v === true || v === false || v === 0 || v === 1) {
                          if (v) {
                            if (typeof crypto != "undefined" && crypto && (crypto.getRandomValues || crypto.randomBytes)) {
                              this[p] = true;
                            } else {
                              throw Error(cryptoUnavailable);
                            }
                          } else {
                            this[p] = false;
                          }
                        } else {
                          throw Error(invalidArgument + p + ": " + v);
                        }
                      }
                      return this;
                    }
                    function cos(x2) {
                      return new this(x2).cos();
                    }
                    function cosh(x2) {
                      return new this(x2).cosh();
                    }
                    function clone(obj2) {
                      var i2, p, ps;
                      function Decimal2(v) {
                        var e, i3, t2, x2 = this;
                        if (!(x2 instanceof Decimal2)) return new Decimal2(v);
                        x2.constructor = Decimal2;
                        if (v instanceof Decimal2) {
                          x2.s = v.s;
                          if (external) {
                            if (!v.d || v.e > Decimal2.maxE) {
                              x2.e = NaN;
                              x2.d = null;
                            } else if (v.e < Decimal2.minE) {
                              x2.e = 0;
                              x2.d = [0];
                            } else {
                              x2.e = v.e;
                              x2.d = v.d.slice();
                            }
                          } else {
                            x2.e = v.e;
                            x2.d = v.d ? v.d.slice() : v.d;
                          }
                          return;
                        }
                        t2 = typeof v;
                        if (t2 === "number") {
                          if (v === 0) {
                            x2.s = 1 / v < 0 ? -1 : 1;
                            x2.e = 0;
                            x2.d = [0];
                            return;
                          }
                          if (v < 0) {
                            v = -v;
                            x2.s = -1;
                          } else {
                            x2.s = 1;
                          }
                          if (v === ~~v && v < 1e7) {
                            for (e = 0, i3 = v; i3 >= 10; i3 /= 10) e++;
                            if (external) {
                              if (e > Decimal2.maxE) {
                                x2.e = NaN;
                                x2.d = null;
                              } else if (e < Decimal2.minE) {
                                x2.e = 0;
                                x2.d = [0];
                              } else {
                                x2.e = e;
                                x2.d = [v];
                              }
                            } else {
                              x2.e = e;
                              x2.d = [v];
                            }
                            return;
                          } else if (v * 0 !== 0) {
                            if (!v) x2.s = NaN;
                            x2.e = NaN;
                            x2.d = null;
                            return;
                          }
                          return parseDecimal(x2, v.toString());
                        } else if (t2 !== "string") {
                          throw Error(invalidArgument + v);
                        }
                        if ((i3 = v.charCodeAt(0)) === 45) {
                          v = v.slice(1);
                          x2.s = -1;
                        } else {
                          if (i3 === 43) v = v.slice(1);
                          x2.s = 1;
                        }
                        return isDecimal.test(v) ? parseDecimal(x2, v) : parseOther(x2, v);
                      }
                      Decimal2.prototype = P;
                      Decimal2.ROUND_UP = 0;
                      Decimal2.ROUND_DOWN = 1;
                      Decimal2.ROUND_CEIL = 2;
                      Decimal2.ROUND_FLOOR = 3;
                      Decimal2.ROUND_HALF_UP = 4;
                      Decimal2.ROUND_HALF_DOWN = 5;
                      Decimal2.ROUND_HALF_EVEN = 6;
                      Decimal2.ROUND_HALF_CEIL = 7;
                      Decimal2.ROUND_HALF_FLOOR = 8;
                      Decimal2.EUCLID = 9;
                      Decimal2.config = Decimal2.set = config;
                      Decimal2.clone = clone;
                      Decimal2.isDecimal = isDecimalInstance;
                      Decimal2.abs = abs;
                      Decimal2.acos = acos;
                      Decimal2.acosh = acosh;
                      Decimal2.add = add;
                      Decimal2.asin = asin;
                      Decimal2.asinh = asinh;
                      Decimal2.atan = atan;
                      Decimal2.atanh = atanh;
                      Decimal2.atan2 = atan2;
                      Decimal2.cbrt = cbrt;
                      Decimal2.ceil = ceil;
                      Decimal2.cos = cos;
                      Decimal2.cosh = cosh;
                      Decimal2.div = div;
                      Decimal2.exp = exp;
                      Decimal2.floor = floor;
                      Decimal2.hypot = hypot;
                      Decimal2.ln = ln;
                      Decimal2.log = log;
                      Decimal2.log10 = log10;
                      Decimal2.log2 = log2;
                      Decimal2.max = max;
                      Decimal2.min = min;
                      Decimal2.mod = mod;
                      Decimal2.mul = mul;
                      Decimal2.pow = pow;
                      Decimal2.random = random;
                      Decimal2.round = round;
                      Decimal2.sign = sign;
                      Decimal2.sin = sin;
                      Decimal2.sinh = sinh;
                      Decimal2.sqrt = sqrt;
                      Decimal2.sub = sub;
                      Decimal2.tan = tan;
                      Decimal2.tanh = tanh;
                      Decimal2.trunc = trunc;
                      if (obj2 === void 0) obj2 = {};
                      if (obj2) {
                        if (obj2.defaults !== true) {
                          ps = ["precision", "rounding", "toExpNeg", "toExpPos", "maxE", "minE", "modulo", "crypto"];
                          for (i2 = 0; i2 < ps.length; ) if (!obj2.hasOwnProperty(p = ps[i2++])) obj2[p] = this[p];
                        }
                      }
                      Decimal2.config(obj2);
                      return Decimal2;
                    }
                    function div(x2, y2) {
                      return new this(x2).div(y2);
                    }
                    function exp(x2) {
                      return new this(x2).exp();
                    }
                    function floor(x2) {
                      return finalise(x2 = new this(x2), x2.e + 1, 3);
                    }
                    function hypot() {
                      var i2, n, t2 = new this(0);
                      external = false;
                      for (i2 = 0; i2 < arguments.length; ) {
                        n = new this(arguments[i2++]);
                        if (!n.d) {
                          if (n.s) {
                            external = true;
                            return new this(1 / 0);
                          }
                          t2 = n;
                        } else if (t2.d) {
                          t2 = t2.plus(n.times(n));
                        }
                      }
                      external = true;
                      return t2.sqrt();
                    }
                    function isDecimalInstance(obj2) {
                      return obj2 instanceof Decimal || obj2 && obj2.name === "[object Decimal]" || false;
                    }
                    function ln(x2) {
                      return new this(x2).ln();
                    }
                    function log(x2, y2) {
                      return new this(x2).log(y2);
                    }
                    function log2(x2) {
                      return new this(x2).log(2);
                    }
                    function log10(x2) {
                      return new this(x2).log(10);
                    }
                    function max() {
                      return maxOrMin(this, arguments, "lt");
                    }
                    function min() {
                      return maxOrMin(this, arguments, "gt");
                    }
                    function mod(x2, y2) {
                      return new this(x2).mod(y2);
                    }
                    function mul(x2, y2) {
                      return new this(x2).mul(y2);
                    }
                    function pow(x2, y2) {
                      return new this(x2).pow(y2);
                    }
                    function random(sd) {
                      var d, e, k, n, i2 = 0, r = new this(1), rd = [];
                      if (sd === void 0) sd = this.precision;
                      else checkInt32(sd, 1, MAX_DIGITS);
                      k = Math.ceil(sd / LOG_BASE);
                      if (!this.crypto) {
                        for (; i2 < k; ) rd[i2++] = Math.random() * 1e7 | 0;
                      } else if (crypto.getRandomValues) {
                        d = crypto.getRandomValues(new Uint32Array(k));
                        for (; i2 < k; ) {
                          n = d[i2];
                          if (n >= 429e7) {
                            d[i2] = crypto.getRandomValues(new Uint32Array(1))[0];
                          } else {
                            rd[i2++] = n % 1e7;
                          }
                        }
                      } else if (crypto.randomBytes) {
                        d = crypto.randomBytes(k *= 4);
                        for (; i2 < k; ) {
                          n = d[i2] + (d[i2 + 1] << 8) + (d[i2 + 2] << 16) + ((d[i2 + 3] & 127) << 24);
                          if (n >= 214e7) {
                            crypto.randomBytes(4).copy(d, i2);
                          } else {
                            rd.push(n % 1e7);
                            i2 += 4;
                          }
                        }
                        i2 = k / 4;
                      } else {
                        throw Error(cryptoUnavailable);
                      }
                      k = rd[--i2];
                      sd %= LOG_BASE;
                      if (k && sd) {
                        n = mathpow(10, LOG_BASE - sd);
                        rd[i2] = (k / n | 0) * n;
                      }
                      for (; rd[i2] === 0; i2--) rd.pop();
                      if (i2 < 0) {
                        e = 0;
                        rd = [0];
                      } else {
                        e = -1;
                        for (; rd[0] === 0; e -= LOG_BASE) rd.shift();
                        for (k = 1, n = rd[0]; n >= 10; n /= 10) k++;
                        if (k < LOG_BASE) e -= LOG_BASE - k;
                      }
                      r.e = e;
                      r.d = rd;
                      return r;
                    }
                    function round(x2) {
                      return finalise(x2 = new this(x2), x2.e + 1, this.rounding);
                    }
                    function sign(x2) {
                      x2 = new this(x2);
                      return x2.d ? x2.d[0] ? x2.s : 0 * x2.s : x2.s || NaN;
                    }
                    function sin(x2) {
                      return new this(x2).sin();
                    }
                    function sinh(x2) {
                      return new this(x2).sinh();
                    }
                    function sqrt(x2) {
                      return new this(x2).sqrt();
                    }
                    function sub(x2, y2) {
                      return new this(x2).sub(y2);
                    }
                    function tan(x2) {
                      return new this(x2).tan();
                    }
                    function tanh(x2) {
                      return new this(x2).tanh();
                    }
                    function trunc(x2) {
                      return finalise(x2 = new this(x2), x2.e + 1, 1);
                    }
                    Decimal = clone(DEFAULTS);
                    Decimal["default"] = Decimal.Decimal = Decimal;
                    LN10 = new Decimal(LN10);
                    PI = new Decimal(PI);
                    if (true) {
                      !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
                        return Decimal;
                      }).call(exports3, __webpack_require__3, exports3, module3), __WEBPACK_AMD_DEFINE_RESULT__ !== void 0 && (module3.exports = __WEBPACK_AMD_DEFINE_RESULT__));
                    } else {
                    }
                  })(this);
                })
              ),
              /***/
              4785: (
                /***/
                ((module3) => {
                  "use strict";
                  var R = typeof Reflect === "object" ? Reflect : null;
                  var ReflectApply = R && typeof R.apply === "function" ? R.apply : function ReflectApply2(target, receiver, args) {
                    return Function.prototype.apply.call(target, receiver, args);
                  };
                  var ReflectOwnKeys;
                  if (R && typeof R.ownKeys === "function") {
                    ReflectOwnKeys = R.ownKeys;
                  } else if (Object.getOwnPropertySymbols) {
                    ReflectOwnKeys = function ReflectOwnKeys2(target) {
                      return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));
                    };
                  } else {
                    ReflectOwnKeys = function ReflectOwnKeys2(target) {
                      return Object.getOwnPropertyNames(target);
                    };
                  }
                  function ProcessEmitWarning(warning) {
                    if (console && console.warn) console.warn(warning);
                  }
                  var NumberIsNaN = Number.isNaN || function NumberIsNaN2(value) {
                    return value !== value;
                  };
                  function EventEmitter() {
                    EventEmitter.init.call(this);
                  }
                  module3.exports = EventEmitter;
                  module3.exports.once = once;
                  EventEmitter.EventEmitter = EventEmitter;
                  EventEmitter.prototype._events = void 0;
                  EventEmitter.prototype._eventsCount = 0;
                  EventEmitter.prototype._maxListeners = void 0;
                  var defaultMaxListeners = 10;
                  function checkListener(listener) {
                    if (typeof listener !== "function") {
                      throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
                    }
                  }
                  Object.defineProperty(EventEmitter, "defaultMaxListeners", {
                    enumerable: true,
                    get: function() {
                      return defaultMaxListeners;
                    },
                    set: function(arg) {
                      if (typeof arg !== "number" || arg < 0 || NumberIsNaN(arg)) {
                        throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + ".");
                      }
                      defaultMaxListeners = arg;
                    }
                  });
                  EventEmitter.init = function() {
                    if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {
                      this._events = /* @__PURE__ */ Object.create(null);
                      this._eventsCount = 0;
                    }
                    this._maxListeners = this._maxListeners || void 0;
                  };
                  EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
                    if (typeof n !== "number" || n < 0 || NumberIsNaN(n)) {
                      throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + ".");
                    }
                    this._maxListeners = n;
                    return this;
                  };
                  function _getMaxListeners(that) {
                    if (that._maxListeners === void 0)
                      return EventEmitter.defaultMaxListeners;
                    return that._maxListeners;
                  }
                  EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
                    return _getMaxListeners(this);
                  };
                  EventEmitter.prototype.emit = function emit(type) {
                    var args = [];
                    for (var i2 = 1; i2 < arguments.length; i2++) args.push(arguments[i2]);
                    var doError = type === "error";
                    var events = this._events;
                    if (events !== void 0)
                      doError = doError && events.error === void 0;
                    else if (!doError)
                      return false;
                    if (doError) {
                      var er;
                      if (args.length > 0)
                        er = args[0];
                      if (er instanceof Error) {
                        throw er;
                      }
                      var err = new Error("Unhandled error." + (er ? " (" + er.message + ")" : ""));
                      err.context = er;
                      throw err;
                    }
                    var handler = events[type];
                    if (handler === void 0)
                      return false;
                    if (typeof handler === "function") {
                      ReflectApply(handler, this, args);
                    } else {
                      var len = handler.length;
                      var listeners = arrayClone(handler, len);
                      for (var i2 = 0; i2 < len; ++i2)
                        ReflectApply(listeners[i2], this, args);
                    }
                    return true;
                  };
                  function _addListener(target, type, listener, prepend) {
                    var m;
                    var events;
                    var existing;
                    checkListener(listener);
                    events = target._events;
                    if (events === void 0) {
                      events = target._events = /* @__PURE__ */ Object.create(null);
                      target._eventsCount = 0;
                    } else {
                      if (events.newListener !== void 0) {
                        target.emit(
                          "newListener",
                          type,
                          listener.listener ? listener.listener : listener
                        );
                        events = target._events;
                      }
                      existing = events[type];
                    }
                    if (existing === void 0) {
                      existing = events[type] = listener;
                      ++target._eventsCount;
                    } else {
                      if (typeof existing === "function") {
                        existing = events[type] = prepend ? [listener, existing] : [existing, listener];
                      } else if (prepend) {
                        existing.unshift(listener);
                      } else {
                        existing.push(listener);
                      }
                      m = _getMaxListeners(target);
                      if (m > 0 && existing.length > m && !existing.warned) {
                        existing.warned = true;
                        var w = new Error("Possible EventEmitter memory leak detected. " + existing.length + " " + String(type) + " listeners added. Use emitter.setMaxListeners() to increase limit");
                        w.name = "MaxListenersExceededWarning";
                        w.emitter = target;
                        w.type = type;
                        w.count = existing.length;
                        ProcessEmitWarning(w);
                      }
                    }
                    return target;
                  }
                  EventEmitter.prototype.addListener = function addListener(type, listener) {
                    return _addListener(this, type, listener, false);
                  };
                  EventEmitter.prototype.on = EventEmitter.prototype.addListener;
                  EventEmitter.prototype.prependListener = function prependListener(type, listener) {
                    return _addListener(this, type, listener, true);
                  };
                  function onceWrapper() {
                    if (!this.fired) {
                      this.target.removeListener(this.type, this.wrapFn);
                      this.fired = true;
                      if (arguments.length === 0)
                        return this.listener.call(this.target);
                      return this.listener.apply(this.target, arguments);
                    }
                  }
                  function _onceWrap(target, type, listener) {
                    var state = { fired: false, wrapFn: void 0, target, type, listener };
                    var wrapped = onceWrapper.bind(state);
                    wrapped.listener = listener;
                    state.wrapFn = wrapped;
                    return wrapped;
                  }
                  EventEmitter.prototype.once = function once2(type, listener) {
                    checkListener(listener);
                    this.on(type, _onceWrap(this, type, listener));
                    return this;
                  };
                  EventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {
                    checkListener(listener);
                    this.prependListener(type, _onceWrap(this, type, listener));
                    return this;
                  };
                  EventEmitter.prototype.removeListener = function removeListener(type, listener) {
                    var list, events, position, i2, originalListener;
                    checkListener(listener);
                    events = this._events;
                    if (events === void 0)
                      return this;
                    list = events[type];
                    if (list === void 0)
                      return this;
                    if (list === listener || list.listener === listener) {
                      if (--this._eventsCount === 0)
                        this._events = /* @__PURE__ */ Object.create(null);
                      else {
                        delete events[type];
                        if (events.removeListener)
                          this.emit("removeListener", type, list.listener || listener);
                      }
                    } else if (typeof list !== "function") {
                      position = -1;
                      for (i2 = list.length - 1; i2 >= 0; i2--) {
                        if (list[i2] === listener || list[i2].listener === listener) {
                          originalListener = list[i2].listener;
                          position = i2;
                          break;
                        }
                      }
                      if (position < 0)
                        return this;
                      if (position === 0)
                        list.shift();
                      else {
                        spliceOne(list, position);
                      }
                      if (list.length === 1)
                        events[type] = list[0];
                      if (events.removeListener !== void 0)
                        this.emit("removeListener", type, originalListener || listener);
                    }
                    return this;
                  };
                  EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
                  EventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {
                    var listeners, events, i2;
                    events = this._events;
                    if (events === void 0)
                      return this;
                    if (events.removeListener === void 0) {
                      if (arguments.length === 0) {
                        this._events = /* @__PURE__ */ Object.create(null);
                        this._eventsCount = 0;
                      } else if (events[type] !== void 0) {
                        if (--this._eventsCount === 0)
                          this._events = /* @__PURE__ */ Object.create(null);
                        else
                          delete events[type];
                      }
                      return this;
                    }
                    if (arguments.length === 0) {
                      var keys = Object.keys(events);
                      var key;
                      for (i2 = 0; i2 < keys.length; ++i2) {
                        key = keys[i2];
                        if (key === "removeListener") continue;
                        this.removeAllListeners(key);
                      }
                      this.removeAllListeners("removeListener");
                      this._events = /* @__PURE__ */ Object.create(null);
                      this._eventsCount = 0;
                      return this;
                    }
                    listeners = events[type];
                    if (typeof listeners === "function") {
                      this.removeListener(type, listeners);
                    } else if (listeners !== void 0) {
                      for (i2 = listeners.length - 1; i2 >= 0; i2--) {
                        this.removeListener(type, listeners[i2]);
                      }
                    }
                    return this;
                  };
                  function _listeners(target, type, unwrap) {
                    var events = target._events;
                    if (events === void 0)
                      return [];
                    var evlistener = events[type];
                    if (evlistener === void 0)
                      return [];
                    if (typeof evlistener === "function")
                      return unwrap ? [evlistener.listener || evlistener] : [evlistener];
                    return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
                  }
                  EventEmitter.prototype.listeners = function listeners(type) {
                    return _listeners(this, type, true);
                  };
                  EventEmitter.prototype.rawListeners = function rawListeners(type) {
                    return _listeners(this, type, false);
                  };
                  EventEmitter.listenerCount = function(emitter, type) {
                    if (typeof emitter.listenerCount === "function") {
                      return emitter.listenerCount(type);
                    } else {
                      return listenerCount.call(emitter, type);
                    }
                  };
                  EventEmitter.prototype.listenerCount = listenerCount;
                  function listenerCount(type) {
                    var events = this._events;
                    if (events !== void 0) {
                      var evlistener = events[type];
                      if (typeof evlistener === "function") {
                        return 1;
                      } else if (evlistener !== void 0) {
                        return evlistener.length;
                      }
                    }
                    return 0;
                  }
                  EventEmitter.prototype.eventNames = function eventNames() {
                    return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
                  };
                  function arrayClone(arr, n) {
                    var copy2 = new Array(n);
                    for (var i2 = 0; i2 < n; ++i2)
                      copy2[i2] = arr[i2];
                    return copy2;
                  }
                  function spliceOne(list, index) {
                    for (; index + 1 < list.length; index++)
                      list[index] = list[index + 1];
                    list.pop();
                  }
                  function unwrapListeners(arr) {
                    var ret2 = new Array(arr.length);
                    for (var i2 = 0; i2 < ret2.length; ++i2) {
                      ret2[i2] = arr[i2].listener || arr[i2];
                    }
                    return ret2;
                  }
                  function once(emitter, name) {
                    return new Promise(function(resolve, reject) {
                      function errorListener(err) {
                        emitter.removeListener(name, resolver);
                        reject(err);
                      }
                      function resolver() {
                        if (typeof emitter.removeListener === "function") {
                          emitter.removeListener("error", errorListener);
                        }
                        resolve([].slice.call(arguments));
                      }
                      ;
                      eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });
                      if (name !== "error") {
                        addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });
                      }
                    });
                  }
                  function addErrorHandlerIfEventEmitter(emitter, handler, flags) {
                    if (typeof emitter.on === "function") {
                      eventTargetAgnosticAddListener(emitter, "error", handler, flags);
                    }
                  }
                  function eventTargetAgnosticAddListener(emitter, name, listener, flags) {
                    if (typeof emitter.on === "function") {
                      if (flags.once) {
                        emitter.once(name, listener);
                      } else {
                        emitter.on(name, listener);
                      }
                    } else if (typeof emitter.addEventListener === "function") {
                      emitter.addEventListener(name, function wrapListener(arg) {
                        if (flags.once) {
                          emitter.removeEventListener(name, wrapListener);
                        }
                        listener(arg);
                      });
                    } else {
                      throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
                    }
                  }
                })
              ),
              /***/
              9482: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  var __webpack_unused_export__;
                  var _interopRequireDefault = __webpack_require__3(1654);
                  __webpack_unused_export__ = {
                    value: true
                  };
                  __webpack_unused_export__ = exports3.np = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _slicedToArray2 = _interopRequireDefault(__webpack_require__3(6583));
                  var _once = _interopRequireDefault(__webpack_require__3(8921));
                  var _moduleId = __webpack_require__3(917);
                  var _transferrables = _interopRequireDefault(__webpack_require__3(5440));
                  function _createForOfIteratorHelper(o, allowArrayLike) {
                    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
                    if (!it) {
                      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
                        if (it) o = it;
                        var i2 = 0;
                        var F = function F2() {
                        };
                        return { s: F, n: function n() {
                          if (i2 >= o.length) return { done: true };
                          return { done: false, value: o[i2++] };
                        }, e: function e(_e) {
                          throw _e;
                        }, f: F };
                      }
                      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                    }
                    var normalCompletion = true, didErr = false, err;
                    return { s: function s() {
                      it = it.call(o);
                    }, n: function n() {
                      var step = it.next();
                      normalCompletion = step.done;
                      return step;
                    }, e: function e(_e2) {
                      didErr = true;
                      err = _e2;
                    }, f: function f() {
                      try {
                        if (!normalCompletion && it["return"] != null) it["return"]();
                      } finally {
                        if (didErr) throw err;
                      }
                    } };
                  }
                  function _unsupportedIterableToArray(o, minLen) {
                    if (!o) return;
                    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
                    var n = Object.prototype.toString.call(o).slice(8, -1);
                    if (n === "Object" && o.constructor) n = o.constructor.name;
                    if (n === "Map" || n === "Set") return Array.from(o);
                    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
                  }
                  function _arrayLikeToArray(arr, len) {
                    if (len == null || len > arr.length) len = arr.length;
                    for (var i2 = 0, arr2 = new Array(len); i2 < len; i2++) {
                      arr2[i2] = arr[i2];
                    }
                    return arr2;
                  }
                  var getXMLHttpRequest = (0, _once["default"])(function() {
                    var instancesById = {};
                    var channel = new MessageChannel();
                    var port = channel.port1;
                    port.addEventListener("message", function(event) {
                      var _event$data = event.data, id = _event$data.id, type = _event$data.type;
                      var xhr = instancesById[id];
                      switch (type) {
                        case "COMPLETE": {
                          var _event$data2 = event.data, headers = _event$data2.headers, readyState = _event$data2.readyState, status = _event$data2.status, statusText = _event$data2.statusText, response = _event$data2.response, responseText = _event$data2.responseText, responseURL = _event$data2.responseURL;
                          var headersObj = {};
                          headers.split("\r\n").forEach(function(line) {
                            var _line$split = line.split(":"), _line$split2 = (0, _slicedToArray2["default"])(_line$split, 2), name = _line$split2[0], value = _line$split2[1];
                            if (name && value) {
                              headersObj[name.toLowerCase().trim()] = value.trim();
                            }
                          });
                          xhr._headers = headers;
                          xhr._headersObj = headersObj;
                          xhr.status = status;
                          xhr.statusText = statusText;
                          xhr.readyState = readyState;
                          xhr.response = response;
                          xhr.responseText = responseText;
                          xhr.responseURL = responseURL;
                          delete instancesById[id];
                          var _loop = function _loop2() {
                            var event2 = _arr[_i];
                            var eventObj = {
                              name: event2,
                              target: xhr
                            };
                            var handlers = Object.prototype.hasOwnProperty.call(xhr._eventListeners, event2) ? xhr._eventListeners[event2] : [];
                            handlers.forEach(function(handler) {
                              return handler(eventObj);
                            });
                            if (xhr["on" + event2]) {
                              xhr["on" + event2](eventObj);
                            }
                          };
                          for (var _i = 0, _arr = ["load", "loadend", "readystatechange"]; _i < _arr.length; _i++) {
                            _loop();
                          }
                          break;
                        }
                        default: {
                          console.error("ext-corb-workaround: Unknown event in content script:", event);
                        }
                      }
                    });
                    port.addEventListener("messageerror", function(event) {
                      console.error("ext-corb-workaround: Unknown error in content script:", event);
                    });
                    port.start();
                    window.postMessage({
                      type: "ext-corb-workaround_port",
                      moduleId: _moduleId.moduleId,
                      port: channel.port2
                    }, document.location.origin, [channel.port2]);
                    var nextFreeId = 0;
                    var CORBWorkaroundXMLHttpRequest = /* @__PURE__ */ (function() {
                      function CORBWorkaroundXMLHttpRequest2() {
                        var _this = this;
                        (0, _classCallCheck2["default"])(this, CORBWorkaroundXMLHttpRequest2);
                        (0, _defineProperty2["default"])(this, "UNSENT", 0);
                        (0, _defineProperty2["default"])(this, "OPENED", 1);
                        (0, _defineProperty2["default"])(this, "HEADERS_RECEIVED", 2);
                        (0, _defineProperty2["default"])(this, "LOADING", 3);
                        (0, _defineProperty2["default"])(this, "DONE", 4);
                        (0, _defineProperty2["default"])(this, "_id", nextFreeId++);
                        (0, _defineProperty2["default"])(this, "_eventListeners", {});
                        (0, _defineProperty2["default"])(this, "_headersObj", {});
                        (0, _defineProperty2["default"])(this, "status", 0);
                        (0, _defineProperty2["default"])(this, "statusText", "");
                        (0, _defineProperty2["default"])(this, "readyState", 0);
                        (0, _defineProperty2["default"])(this, "response", "");
                        (0, _defineProperty2["default"])(this, "responseText", "");
                        (0, _defineProperty2["default"])(this, "responseURL", "");
                        (0, _defineProperty2["default"])(this, "_headers", "");
                        (0, _defineProperty2["default"])(this, "responseType", void 0);
                        (0, _defineProperty2["default"])(this, "withCredentials", void 0);
                        (0, _defineProperty2["default"])(this, "setRequestHeader", void 0);
                        (0, _defineProperty2["default"])(this, "open", void 0);
                        (0, _defineProperty2["default"])(this, "send", void 0);
                        (0, _defineProperty2["default"])(this, "abort", void 0);
                        var id = this._id;
                        instancesById[id] = this;
                        port.postMessage({
                          type: "NEW_XHR",
                          id
                        });
                        var _iterator = _createForOfIteratorHelper(["responseType", "withCredentials"]), _step;
                        try {
                          var _loop2 = function _loop22() {
                            var prop = _step.value;
                            var value = void 0;
                            Object.defineProperty(_this, prop, {
                              get: function get() {
                                return value;
                              },
                              set: function set(newValue) {
                                value = newValue;
                                port.postMessage({
                                  type: "SET",
                                  id,
                                  prop,
                                  value: newValue
                                });
                              }
                            });
                          };
                          for (_iterator.s(); !(_step = _iterator.n()).done; ) {
                            _loop2();
                          }
                        } catch (err) {
                          _iterator.e(err);
                        } finally {
                          _iterator.f();
                        }
                        var _iterator2 = _createForOfIteratorHelper(["setRequestHeader", "open", "send", "abort"]), _step2;
                        try {
                          var _loop3 = function _loop32() {
                            var method = _step2.value;
                            _this[method] = function() {
                              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                                args[_key] = arguments[_key];
                              }
                              port.postMessage({
                                type: "CALL",
                                id,
                                method,
                                args
                              }, (0, _transferrables["default"])(args));
                            };
                          };
                          for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
                            _loop3();
                          }
                        } catch (err) {
                          _iterator2.e(err);
                        } finally {
                          _iterator2.f();
                        }
                      }
                      (0, _createClass2["default"])(CORBWorkaroundXMLHttpRequest2, [{
                        key: "getAllResponseHeaders",
                        value: function getAllResponseHeaders() {
                          return this._headers;
                        }
                      }, {
                        key: "getResponseHeader",
                        value: function getResponseHeader(header) {
                          header = header.toLowerCase();
                          if (Object.prototype.hasOwnProperty.call(this._headersObj, header)) {
                            return this._headersObj[header];
                          }
                        }
                      }, {
                        key: "addEventListener",
                        value: function addEventListener(event, handler) {
                          if (!Object.prototype.hasOwnProperty.call(this._eventListeners, event)) {
                            this._eventListeners[event] = [];
                          }
                          this._eventListeners[event].push(handler);
                        }
                      }, {
                        key: "removeEventListener",
                        value: function removeEventListener(event, handler) {
                          if (Object.prototype.hasOwnProperty.call(this._eventListeners, event)) {
                            this._eventListeners[event] = this._eventListeners[event].filter(function(_handler) {
                              return handler !== _handler;
                            });
                          }
                        }
                      }]);
                      return CORBWorkaroundXMLHttpRequest2;
                    })();
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "UNSENT", 0);
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "OPENED", 1);
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "HEADERS_RECEIVED", 2);
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "LOADING", 3);
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "DONE", 4);
                    return CORBWorkaroundXMLHttpRequest;
                  });
                  exports3.np = getXMLHttpRequest;
                  var installGlobally = (0, _once["default"])(function() {
                    window.XMLHttpRequest = getXMLHttpRequest();
                  });
                  __webpack_unused_export__ = installGlobally;
                })
              ),
              /***/
              917: (
                /***/
                ((__unused_webpack_module2, exports3) => {
                  "use strict";
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3.moduleId = void 0;
                  var moduleId = "1f24 e53a";
                  exports3.moduleId = moduleId;
                })
              ),
              /***/
              5440: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = transferrables;
                  var _typeof2 = _interopRequireDefault(__webpack_require__3(2990));
                  function transferrables(list) {
                    return list.map(function(value) {
                      if (value && (0, _typeof2["default"])(value) === "object" && value.__proto__) {
                        if (value.__proto__.constructor.name === "ArrayBuffer") {
                          return value;
                        }
                        if (value.__proto__.__proto__ && value.__proto__.__proto__.constructor.name === "TypedArray") {
                          return value.buffer;
                        }
                      }
                    }).filter(Boolean);
                  }
                })
              ),
              /***/
              5215: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = function equal(a, b) {
                    if (a === b) return true;
                    if (a && b && typeof a == "object" && typeof b == "object") {
                      if (a.constructor !== b.constructor) return false;
                      var length, i2, keys;
                      if (Array.isArray(a)) {
                        length = a.length;
                        if (length != b.length) return false;
                        for (i2 = length; i2-- !== 0; )
                          if (!equal(a[i2], b[i2])) return false;
                        return true;
                      }
                      if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;
                      if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();
                      if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();
                      keys = Object.keys(a);
                      length = keys.length;
                      if (length !== Object.keys(b).length) return false;
                      for (i2 = length; i2-- !== 0; )
                        if (!Object.prototype.hasOwnProperty.call(b, keys[i2])) return false;
                      for (i2 = length; i2-- !== 0; ) {
                        var key = keys[i2];
                        if (!equal(a[key], b[key])) return false;
                      }
                      return true;
                    }
                    return a !== a && b !== b;
                  };
                })
              ),
              /***/
              9029: (
                /***/
                ((__unused_webpack_module2, exports3) => {
                  exports3.read = function(buffer, offset, isLE, mLen, nBytes) {
                    var e, m;
                    var eLen = nBytes * 8 - mLen - 1;
                    var eMax = (1 << eLen) - 1;
                    var eBias = eMax >> 1;
                    var nBits = -7;
                    var i2 = isLE ? nBytes - 1 : 0;
                    var d = isLE ? -1 : 1;
                    var s = buffer[offset + i2];
                    i2 += d;
                    e = s & (1 << -nBits) - 1;
                    s >>= -nBits;
                    nBits += eLen;
                    for (; nBits > 0; e = e * 256 + buffer[offset + i2], i2 += d, nBits -= 8) {
                    }
                    m = e & (1 << -nBits) - 1;
                    e >>= -nBits;
                    nBits += mLen;
                    for (; nBits > 0; m = m * 256 + buffer[offset + i2], i2 += d, nBits -= 8) {
                    }
                    if (e === 0) {
                      e = 1 - eBias;
                    } else if (e === eMax) {
                      return m ? NaN : (s ? -1 : 1) * Infinity;
                    } else {
                      m = m + Math.pow(2, mLen);
                      e = e - eBias;
                    }
                    return (s ? -1 : 1) * m * Math.pow(2, e - mLen);
                  };
                  exports3.write = function(buffer, value, offset, isLE, mLen, nBytes) {
                    var e, m, c;
                    var eLen = nBytes * 8 - mLen - 1;
                    var eMax = (1 << eLen) - 1;
                    var eBias = eMax >> 1;
                    var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;
                    var i2 = isLE ? 0 : nBytes - 1;
                    var d = isLE ? 1 : -1;
                    var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
                    value = Math.abs(value);
                    if (isNaN(value) || value === Infinity) {
                      m = isNaN(value) ? 1 : 0;
                      e = eMax;
                    } else {
                      e = Math.floor(Math.log(value) / Math.LN2);
                      if (value * (c = Math.pow(2, -e)) < 1) {
                        e--;
                        c *= 2;
                      }
                      if (e + eBias >= 1) {
                        value += rt / c;
                      } else {
                        value += rt * Math.pow(2, 1 - eBias);
                      }
                      if (value * c >= 2) {
                        e++;
                        c /= 2;
                      }
                      if (e + eBias >= eMax) {
                        m = 0;
                        e = eMax;
                      } else if (e + eBias >= 1) {
                        m = (value * c - 1) * Math.pow(2, mLen);
                        e = e + eBias;
                      } else {
                        m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
                        e = 0;
                      }
                    }
                    for (; mLen >= 8; buffer[offset + i2] = m & 255, i2 += d, m /= 256, mLen -= 8) {
                    }
                    e = e << mLen | m;
                    eLen += mLen;
                    for (; eLen > 0; buffer[offset + i2] = e & 255, i2 += d, e /= 256, eLen -= 8) {
                    }
                    buffer[offset + i2 - d] |= s * 128;
                  };
                })
              ),
              /***/
              2996: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var process = __webpack_require__3(9964);
                  Object.defineProperty(exports3, "__esModule", { value: true });
                  function stringifiable(obj2) {
                    return typeof obj2 === "object" && !("toString" in obj2) ? Object.prototype.toString.call(obj2).slice(8, -1) : obj2;
                  }
                  var isProduction = typeof process === "object" && true;
                  function invariant(condition, message) {
                    if (!condition) {
                      if (isProduction) {
                        throw new Error("Invariant failed");
                      }
                      throw new Error(message());
                    }
                  }
                  exports3.invariant = invariant;
                  var hasOwnProperty = Object.prototype.hasOwnProperty;
                  var splice = Array.prototype.splice;
                  var toString = Object.prototype.toString;
                  function type(obj2) {
                    return toString.call(obj2).slice(8, -1);
                  }
                  var assign = Object.assign || /* istanbul ignore next */
                  (function(target, source) {
                    getAllKeys(source).forEach(function(key) {
                      if (hasOwnProperty.call(source, key)) {
                        target[key] = source[key];
                      }
                    });
                    return target;
                  });
                  var getAllKeys = typeof Object.getOwnPropertySymbols === "function" ? function(obj2) {
                    return Object.keys(obj2).concat(Object.getOwnPropertySymbols(obj2));
                  } : function(obj2) {
                    return Object.keys(obj2);
                  };
                  function copy2(object) {
                    return Array.isArray(object) ? assign(object.constructor(object.length), object) : type(object) === "Map" ? new Map(object) : type(object) === "Set" ? new Set(object) : object && typeof object === "object" ? assign(Object.create(Object.getPrototypeOf(object)), object) : object;
                  }
                  var Context = (
                    /** @class */
                    (function() {
                      function Context2() {
                        this.commands = assign({}, defaultCommands);
                        this.update = this.update.bind(this);
                        this.update.extend = this.extend = this.extend.bind(this);
                        this.update.isEquals = function(x2, y2) {
                          return x2 === y2;
                        };
                        this.update.newContext = function() {
                          return new Context2().update;
                        };
                      }
                      Object.defineProperty(Context2.prototype, "isEquals", {
                        get: function() {
                          return this.update.isEquals;
                        },
                        set: function(value) {
                          this.update.isEquals = value;
                        },
                        enumerable: true,
                        configurable: true
                      });
                      Context2.prototype.extend = function(directive, fn) {
                        this.commands[directive] = fn;
                      };
                      Context2.prototype.update = function(object, $spec) {
                        var _this = this;
                        var spec = typeof $spec === "function" ? { $apply: $spec } : $spec;
                        if (!(Array.isArray(object) && Array.isArray(spec))) {
                          invariant(!Array.isArray(spec), function() {
                            return "update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value.";
                          });
                        }
                        invariant(typeof spec === "object" && spec !== null, function() {
                          return "update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the " + ("following commands: " + Object.keys(_this.commands).join(", ") + ".");
                        });
                        var nextObject = object;
                        getAllKeys(spec).forEach(function(key) {
                          if (hasOwnProperty.call(_this.commands, key)) {
                            var objectWasNextObject = object === nextObject;
                            nextObject = _this.commands[key](spec[key], nextObject, spec, object);
                            if (objectWasNextObject && _this.isEquals(nextObject, object)) {
                              nextObject = object;
                            }
                          } else {
                            var nextValueForKey = type(object) === "Map" ? _this.update(object.get(key), spec[key]) : _this.update(object[key], spec[key]);
                            var nextObjectValue = type(nextObject) === "Map" ? nextObject.get(key) : nextObject[key];
                            if (!_this.isEquals(nextValueForKey, nextObjectValue) || typeof nextValueForKey === "undefined" && !hasOwnProperty.call(object, key)) {
                              if (nextObject === object) {
                                nextObject = copy2(object);
                              }
                              if (type(nextObject) === "Map") {
                                nextObject.set(key, nextValueForKey);
                              } else {
                                nextObject[key] = nextValueForKey;
                              }
                            }
                          }
                        });
                        return nextObject;
                      };
                      return Context2;
                    })()
                  );
                  exports3.Context = Context;
                  var defaultCommands = {
                    $push: function(value, nextObject, spec) {
                      invariantPushAndUnshift(nextObject, spec, "$push");
                      return value.length ? nextObject.concat(value) : nextObject;
                    },
                    $unshift: function(value, nextObject, spec) {
                      invariantPushAndUnshift(nextObject, spec, "$unshift");
                      return value.length ? value.concat(nextObject) : nextObject;
                    },
                    $splice: function(value, nextObject, spec, originalObject) {
                      invariantSplices(nextObject, spec);
                      value.forEach(function(args) {
                        invariantSplice(args);
                        if (nextObject === originalObject && args.length) {
                          nextObject = copy2(originalObject);
                        }
                        splice.apply(nextObject, args);
                      });
                      return nextObject;
                    },
                    $set: function(value, _nextObject, spec) {
                      invariantSet(spec);
                      return value;
                    },
                    $toggle: function(targets, nextObject) {
                      invariantSpecArray(targets, "$toggle");
                      var nextObjectCopy = targets.length ? copy2(nextObject) : nextObject;
                      targets.forEach(function(target) {
                        nextObjectCopy[target] = !nextObject[target];
                      });
                      return nextObjectCopy;
                    },
                    $unset: function(value, nextObject, _spec, originalObject) {
                      invariantSpecArray(value, "$unset");
                      value.forEach(function(key) {
                        if (Object.hasOwnProperty.call(nextObject, key)) {
                          if (nextObject === originalObject) {
                            nextObject = copy2(originalObject);
                          }
                          delete nextObject[key];
                        }
                      });
                      return nextObject;
                    },
                    $add: function(values, nextObject, _spec, originalObject) {
                      invariantMapOrSet(nextObject, "$add");
                      invariantSpecArray(values, "$add");
                      if (type(nextObject) === "Map") {
                        values.forEach(function(_a) {
                          var key = _a[0], value = _a[1];
                          if (nextObject === originalObject && nextObject.get(key) !== value) {
                            nextObject = copy2(originalObject);
                          }
                          nextObject.set(key, value);
                        });
                      } else {
                        values.forEach(function(value) {
                          if (nextObject === originalObject && !nextObject.has(value)) {
                            nextObject = copy2(originalObject);
                          }
                          nextObject.add(value);
                        });
                      }
                      return nextObject;
                    },
                    $remove: function(value, nextObject, _spec, originalObject) {
                      invariantMapOrSet(nextObject, "$remove");
                      invariantSpecArray(value, "$remove");
                      value.forEach(function(key) {
                        if (nextObject === originalObject && nextObject.has(key)) {
                          nextObject = copy2(originalObject);
                        }
                        nextObject.delete(key);
                      });
                      return nextObject;
                    },
                    $merge: function(value, nextObject, _spec, originalObject) {
                      invariantMerge(nextObject, value);
                      getAllKeys(value).forEach(function(key) {
                        if (value[key] !== nextObject[key]) {
                          if (nextObject === originalObject) {
                            nextObject = copy2(originalObject);
                          }
                          nextObject[key] = value[key];
                        }
                      });
                      return nextObject;
                    },
                    $apply: function(value, original) {
                      invariantApply(value);
                      return value(original);
                    }
                  };
                  var defaultContext = new Context();
                  exports3.isEquals = defaultContext.update.isEquals;
                  exports3.extend = defaultContext.extend;
                  exports3["default"] = defaultContext.update;
                  exports3["default"]["default"] = module3.exports = assign(exports3.default, exports3);
                  function invariantPushAndUnshift(value, spec, command) {
                    invariant(Array.isArray(value), function() {
                      return "update(): expected target of " + stringifiable(command) + " to be an array; got " + stringifiable(value) + ".";
                    });
                    invariantSpecArray(spec[command], command);
                  }
                  function invariantSpecArray(spec, command) {
                    invariant(Array.isArray(spec), function() {
                      return "update(): expected spec of " + stringifiable(command) + " to be an array; got " + stringifiable(spec) + ". Did you forget to wrap your parameter in an array?";
                    });
                  }
                  function invariantSplices(value, spec) {
                    invariant(Array.isArray(value), function() {
                      return "Expected $splice target to be an array; got " + stringifiable(value);
                    });
                    invariantSplice(spec.$splice);
                  }
                  function invariantSplice(value) {
                    invariant(Array.isArray(value), function() {
                      return "update(): expected spec of $splice to be an array of arrays; got " + stringifiable(value) + ". Did you forget to wrap your parameters in an array?";
                    });
                  }
                  function invariantApply(fn) {
                    invariant(typeof fn === "function", function() {
                      return "update(): expected spec of $apply to be a function; got " + stringifiable(fn) + ".";
                    });
                  }
                  function invariantSet(spec) {
                    invariant(Object.keys(spec).length === 1, function() {
                      return "Cannot have more than one key in an object with $set";
                    });
                  }
                  function invariantMerge(target, specValue) {
                    invariant(specValue && typeof specValue === "object", function() {
                      return "update(): $merge expects a spec of type 'object'; got " + stringifiable(specValue);
                    });
                    invariant(target && typeof target === "object", function() {
                      return "update(): $merge expects a target of type 'object'; got " + stringifiable(target);
                    });
                  }
                  function invariantMapOrSet(target, command) {
                    var typeOfTarget = type(target);
                    invariant(typeOfTarget === "Map" || typeOfTarget === "Set", function() {
                      return "update(): " + stringifiable(command) + " expects a target of type Set or Map; got " + stringifiable(typeOfTarget);
                    });
                  }
                })
              ),
              /***/
              9784: (
                /***/
                ((module3) => {
                  if (typeof Object.create === "function") {
                    module3.exports = function inherits(ctor, superCtor) {
                      if (superCtor) {
                        ctor.super_ = superCtor;
                        ctor.prototype = Object.create(superCtor.prototype, {
                          constructor: {
                            value: ctor,
                            enumerable: false,
                            writable: true,
                            configurable: true
                          }
                        });
                      }
                    };
                  } else {
                    module3.exports = function inherits(ctor, superCtor) {
                      if (superCtor) {
                        ctor.super_ = superCtor;
                        var TempCtor = function() {
                        };
                        TempCtor.prototype = superCtor.prototype;
                        ctor.prototype = new TempCtor();
                        ctor.prototype.constructor = ctor;
                      }
                    };
                  }
                })
              ),
              /***/
              8631: (
                /***/
                (function(module3, exports3, __webpack_require__3) {
                  var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
                  (function(root, factory2) {
                    if (true) {
                      !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__3(7249)], __WEBPACK_AMD_DEFINE_FACTORY__ = factory2, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === "function" ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports3, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== void 0 && (module3.exports = __WEBPACK_AMD_DEFINE_RESULT__));
                    } else {
                    }
                  })(this, function(Kefir) {
                    var dummyPool = { plug: function() {
                    }, unplug: function() {
                    } };
                    function kefirBus() {
                      var ended = false;
                      var pool = Kefir.pool();
                      var emitter = null;
                      var stream = Kefir.stream(function(_emitter) {
                        function sub(event) {
                          _emitter.emitEvent(event);
                        }
                        emitter = _emitter;
                        if (ended) {
                          _emitter.end();
                        } else {
                          pool.onAny(sub);
                          return function() {
                            emitter = null;
                            pool.offAny(sub);
                          };
                        }
                      });
                      stream.value = stream.emit = function(x2) {
                        if (emitter) emitter.emit(x2);
                        return stream;
                      };
                      stream.error = function(err) {
                        if (emitter) emitter.error(err);
                        return stream;
                      };
                      stream.event = stream.emitEvent = function(event) {
                        if (event.type === "end") {
                          stream.end();
                        } else {
                          if (emitter) emitter.emitEvent(event);
                        }
                        return stream;
                      };
                      stream.plug = function(s) {
                        pool.plug(s);
                        return stream;
                      };
                      stream.unplug = function(s) {
                        pool.unplug(s);
                        return stream;
                      };
                      stream.end = function() {
                        if (!ended) {
                          ended = true;
                          if (emitter) emitter.end();
                          pool = dummyPool;
                        }
                        return stream;
                      };
                      return stream.setName("bus");
                    }
                    kefirBus.default = kefirBus;
                    return kefirBus;
                  });
                })
              ),
              /***/
              5164: (
                /***/
                ((module3) => {
                  "use strict";
                  function kefirCast(Kefir, input) {
                    if (input && input.subscribe && input.subscribeOnNext) {
                      return Kefir.stream(function(emitter) {
                        var subscription = input.subscribe(
                          function onNext(value) {
                            emitter.emit(value);
                          },
                          function onError(err) {
                            emitter.error(err);
                            emitter.end();
                          },
                          function onCompleted() {
                            emitter.end();
                          }
                        );
                        return function() {
                          subscription.dispose();
                        };
                      });
                    } else if (input && input.onAny && input.offAny) {
                      return Kefir.stream(function(emitter) {
                        var emitEvent = emitter.emitEvent;
                        input.onAny(emitEvent);
                        return function() {
                          input.offAny(emitEvent);
                        };
                      });
                    } else if (input && input.subscribe && input.onValue) {
                      return Kefir.stream(function(emitter) {
                        return input.subscribe(function(event) {
                          if (typeof event.hasValue === "function") {
                            if (event.hasValue()) {
                              emitter.emit(event.value());
                            } else if (event.isEnd()) {
                              emitter.end();
                            } else if (event.isError()) {
                              emitter.error(event.error);
                            } else {
                              console.error("Unknown type of Bacon event", event);
                            }
                          } else {
                            if (event.hasValue) {
                              emitter.emit(event.value);
                            } else if (event.isEnd) {
                              emitter.end();
                            } else if (event.isError) {
                              emitter.error(event.error);
                            } else {
                              console.error("Unknown type of Bacon event", event);
                            }
                          }
                        });
                      });
                    } else if (input && input.subscribe && input.lift) {
                      return Kefir.stream(function(emitter) {
                        var subscription = input.subscribe(
                          function onNext(value) {
                            emitter.emit(value);
                          },
                          function onError(err) {
                            emitter.error(err);
                            emitter.end();
                          },
                          function onCompleted() {
                            emitter.end();
                          }
                        );
                        return function() {
                          subscription.unsubscribe();
                        };
                      });
                    } else {
                      return Kefir.constant(input);
                    }
                  }
                  module3.exports = kefirCast;
                })
              ),
              /***/
              4924: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = kefirStopper;
                  var Kefir = __webpack_require__3(7249);
                  function kefirStopper() {
                    var emitter = null;
                    function end() {
                      stopper.stopped = true;
                      if (emitter) {
                        emitter.emit(null);
                        emitter.end();
                      }
                    }
                    var stream = Kefir.stream(function(_emitter) {
                      emitter = _emitter;
                      if (stopper.stopped) {
                        end();
                      }
                    });
                    var stopper = stream.toProperty();
                    stopper.stopped = false;
                    stopper.destroy = end;
                    return stopper;
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              7249: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.r(__webpack_exports__3);
                  __webpack_require__3.d(__webpack_exports__3, {
                    /* harmony export */
                    Kefir: () => (
                      /* binding */
                      Kefir
                    ),
                    /* harmony export */
                    Observable: () => (
                      /* binding */
                      Observable
                    ),
                    /* harmony export */
                    Pool: () => (
                      /* binding */
                      Pool
                    ),
                    /* harmony export */
                    Property: () => (
                      /* binding */
                      Property
                    ),
                    /* harmony export */
                    Stream: () => (
                      /* binding */
                      Stream
                    ),
                    /* harmony export */
                    combine: () => (
                      /* binding */
                      combine
                    ),
                    /* harmony export */
                    concat: () => (
                      /* binding */
                      concat$1
                    ),
                    /* harmony export */
                    constant: () => (
                      /* binding */
                      constant
                    ),
                    /* harmony export */
                    constantError: () => (
                      /* binding */
                      constantError
                    ),
                    /* harmony export */
                    "default": () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    dissableDeprecationWarnings: () => (
                      /* binding */
                      dissableDeprecationWarnings
                    ),
                    /* harmony export */
                    fromCallback: () => (
                      /* binding */
                      fromCallback
                    ),
                    /* harmony export */
                    fromESObservable: () => (
                      /* binding */
                      fromESObservable
                    ),
                    /* harmony export */
                    fromEvents: () => (
                      /* binding */
                      fromEvents
                    ),
                    /* harmony export */
                    fromNodeCallback: () => (
                      /* binding */
                      fromNodeCallback
                    ),
                    /* harmony export */
                    fromPoll: () => (
                      /* binding */
                      fromPoll
                    ),
                    /* harmony export */
                    fromPromise: () => (
                      /* binding */
                      fromPromise
                    ),
                    /* harmony export */
                    interval: () => (
                      /* binding */
                      interval
                    ),
                    /* harmony export */
                    later: () => (
                      /* binding */
                      later
                    ),
                    /* harmony export */
                    merge: () => (
                      /* binding */
                      merge
                    ),
                    /* harmony export */
                    never: () => (
                      /* binding */
                      never
                    ),
                    /* harmony export */
                    pool: () => (
                      /* binding */
                      pool
                    ),
                    /* harmony export */
                    repeat: () => (
                      /* binding */
                      repeat
                    ),
                    /* harmony export */
                    sequentially: () => (
                      /* binding */
                      sequentially
                    ),
                    /* harmony export */
                    staticLand: () => (
                      /* binding */
                      staticLand
                    ),
                    /* harmony export */
                    stream: () => (
                      /* binding */
                      stream
                    ),
                    /* harmony export */
                    withInterval: () => (
                      /* binding */
                      withInterval
                    ),
                    /* harmony export */
                    zip: () => (
                      /* binding */
                      zip
                    )
                    /* harmony export */
                  });
                  module3 = __webpack_require__3.hmd(module3);
                  function createObj(proto) {
                    var F = function() {
                    };
                    F.prototype = proto;
                    return new F();
                  }
                  function extend(target) {
                    var length = arguments.length, i2 = void 0, prop = void 0;
                    for (i2 = 1; i2 < length; i2++) {
                      for (prop in arguments[i2]) {
                        target[prop] = arguments[i2][prop];
                      }
                    }
                    return target;
                  }
                  function inherit(Child, Parent) {
                    var length = arguments.length, i2 = void 0;
                    Child.prototype = createObj(Parent.prototype);
                    Child.prototype.constructor = Child;
                    for (i2 = 2; i2 < length; i2++) {
                      extend(Child.prototype, arguments[i2]);
                    }
                    return Child;
                  }
                  var NOTHING = ["<nothing>"];
                  var END = "end";
                  var VALUE = "value";
                  var ERROR = "error";
                  var ANY = "any";
                  function concat(a, b) {
                    var result2 = void 0, length = void 0, i2 = void 0, j = void 0;
                    if (a.length === 0) {
                      return b;
                    }
                    if (b.length === 0) {
                      return a;
                    }
                    j = 0;
                    result2 = new Array(a.length + b.length);
                    length = a.length;
                    for (i2 = 0; i2 < length; i2++, j++) {
                      result2[j] = a[i2];
                    }
                    length = b.length;
                    for (i2 = 0; i2 < length; i2++, j++) {
                      result2[j] = b[i2];
                    }
                    return result2;
                  }
                  function find(arr, value) {
                    var length = arr.length, i2 = void 0;
                    for (i2 = 0; i2 < length; i2++) {
                      if (arr[i2] === value) {
                        return i2;
                      }
                    }
                    return -1;
                  }
                  function findByPred(arr, pred) {
                    var length = arr.length, i2 = void 0;
                    for (i2 = 0; i2 < length; i2++) {
                      if (pred(arr[i2])) {
                        return i2;
                      }
                    }
                    return -1;
                  }
                  function cloneArray(input) {
                    var length = input.length, result2 = new Array(length), i2 = void 0;
                    for (i2 = 0; i2 < length; i2++) {
                      result2[i2] = input[i2];
                    }
                    return result2;
                  }
                  function remove(input, index) {
                    var length = input.length, result2 = void 0, i2 = void 0, j = void 0;
                    if (index >= 0 && index < length) {
                      if (length === 1) {
                        return [];
                      } else {
                        result2 = new Array(length - 1);
                        for (i2 = 0, j = 0; i2 < length; i2++) {
                          if (i2 !== index) {
                            result2[j] = input[i2];
                            j++;
                          }
                        }
                        return result2;
                      }
                    } else {
                      return input;
                    }
                  }
                  function map(input, fn) {
                    var length = input.length, result2 = new Array(length), i2 = void 0;
                    for (i2 = 0; i2 < length; i2++) {
                      result2[i2] = fn(input[i2]);
                    }
                    return result2;
                  }
                  function forEach(arr, fn) {
                    var length = arr.length, i2 = void 0;
                    for (i2 = 0; i2 < length; i2++) {
                      fn(arr[i2]);
                    }
                  }
                  function fillArray(arr, value) {
                    var length = arr.length, i2 = void 0;
                    for (i2 = 0; i2 < length; i2++) {
                      arr[i2] = value;
                    }
                  }
                  function contains(arr, value) {
                    return find(arr, value) !== -1;
                  }
                  function slide(cur, next, max) {
                    var length = Math.min(max, cur.length + 1), offset = cur.length - length + 1, result2 = new Array(length), i2 = void 0;
                    for (i2 = offset; i2 < length; i2++) {
                      result2[i2 - offset] = cur[i2];
                    }
                    result2[length - 1] = next;
                    return result2;
                  }
                  function callSubscriber(type, fn, event) {
                    if (type === ANY) {
                      fn(event);
                    } else if (type === event.type) {
                      if (type === VALUE || type === ERROR) {
                        fn(event.value);
                      } else {
                        fn();
                      }
                    }
                  }
                  function Dispatcher() {
                    this._items = [];
                    this._spies = [];
                    this._inLoop = 0;
                    this._removedItems = null;
                  }
                  extend(Dispatcher.prototype, {
                    add: function(type, fn) {
                      this._items = concat(this._items, [{ type, fn }]);
                      return this._items.length;
                    },
                    remove: function(type, fn) {
                      var index = findByPred(this._items, function(x2) {
                        return x2.type === type && x2.fn === fn;
                      });
                      if (this._inLoop !== 0 && index !== -1) {
                        if (this._removedItems === null) {
                          this._removedItems = [];
                        }
                        this._removedItems.push(this._items[index]);
                      }
                      this._items = remove(this._items, index);
                      return this._items.length;
                    },
                    addSpy: function(fn) {
                      this._spies = concat(this._spies, [fn]);
                      return this._spies.length;
                    },
                    // Because spies are only ever a function that perform logging as
                    // their only side effect, we don't need the same complicated
                    // removal logic like in remove()
                    removeSpy: function(fn) {
                      this._spies = remove(this._spies, this._spies.indexOf(fn));
                      return this._spies.length;
                    },
                    dispatch: function(event) {
                      this._inLoop++;
                      for (var i2 = 0, spies = this._spies; this._spies !== null && i2 < spies.length; i2++) {
                        spies[i2](event);
                      }
                      for (var _i = 0, items = this._items; _i < items.length; _i++) {
                        if (this._items === null) {
                          break;
                        }
                        if (this._removedItems !== null && contains(this._removedItems, items[_i])) {
                          continue;
                        }
                        callSubscriber(items[_i].type, items[_i].fn, event);
                      }
                      this._inLoop--;
                      if (this._inLoop === 0) {
                        this._removedItems = null;
                      }
                    },
                    cleanup: function() {
                      this._items = null;
                      this._spies = null;
                    }
                  });
                  function Observable() {
                    this._dispatcher = new Dispatcher();
                    this._active = false;
                    this._alive = true;
                    this._activating = false;
                    this._logHandlers = null;
                    this._spyHandlers = null;
                  }
                  extend(Observable.prototype, {
                    _name: "observable",
                    _onActivation: function() {
                    },
                    _onDeactivation: function() {
                    },
                    _setActive: function(active) {
                      if (this._active !== active) {
                        this._active = active;
                        if (active) {
                          this._activating = true;
                          this._onActivation();
                          this._activating = false;
                        } else {
                          this._onDeactivation();
                        }
                      }
                    },
                    _clear: function() {
                      this._setActive(false);
                      this._dispatcher.cleanup();
                      this._dispatcher = null;
                      this._logHandlers = null;
                    },
                    _emit: function(type, x2) {
                      switch (type) {
                        case VALUE:
                          return this._emitValue(x2);
                        case ERROR:
                          return this._emitError(x2);
                        case END:
                          return this._emitEnd();
                      }
                    },
                    _emitValue: function(value) {
                      if (this._alive) {
                        this._dispatcher.dispatch({ type: VALUE, value });
                      }
                    },
                    _emitError: function(value) {
                      if (this._alive) {
                        this._dispatcher.dispatch({ type: ERROR, value });
                      }
                    },
                    _emitEnd: function() {
                      if (this._alive) {
                        this._alive = false;
                        this._dispatcher.dispatch({ type: END });
                        this._clear();
                      }
                    },
                    _on: function(type, fn) {
                      if (this._alive) {
                        this._dispatcher.add(type, fn);
                        this._setActive(true);
                      } else {
                        callSubscriber(type, fn, { type: END });
                      }
                      return this;
                    },
                    _off: function(type, fn) {
                      if (this._alive) {
                        var count = this._dispatcher.remove(type, fn);
                        if (count === 0) {
                          this._setActive(false);
                        }
                      }
                      return this;
                    },
                    onValue: function(fn) {
                      return this._on(VALUE, fn);
                    },
                    onError: function(fn) {
                      return this._on(ERROR, fn);
                    },
                    onEnd: function(fn) {
                      return this._on(END, fn);
                    },
                    onAny: function(fn) {
                      return this._on(ANY, fn);
                    },
                    offValue: function(fn) {
                      return this._off(VALUE, fn);
                    },
                    offError: function(fn) {
                      return this._off(ERROR, fn);
                    },
                    offEnd: function(fn) {
                      return this._off(END, fn);
                    },
                    offAny: function(fn) {
                      return this._off(ANY, fn);
                    },
                    observe: function(observerOrOnValue, onError, onEnd) {
                      var _this = this;
                      var closed = false;
                      var observer = !observerOrOnValue || typeof observerOrOnValue === "function" ? { value: observerOrOnValue, error: onError, end: onEnd } : observerOrOnValue;
                      var handler = function(event) {
                        if (event.type === END) {
                          closed = true;
                        }
                        if (event.type === VALUE && observer.value) {
                          observer.value(event.value);
                        } else if (event.type === ERROR && observer.error) {
                          observer.error(event.value);
                        } else if (event.type === END && observer.end) {
                          observer.end(event.value);
                        }
                      };
                      this.onAny(handler);
                      return {
                        unsubscribe: function() {
                          if (!closed) {
                            _this.offAny(handler);
                            closed = true;
                          }
                        },
                        get closed() {
                          return closed;
                        }
                      };
                    },
                    // A and B must be subclasses of Stream and Property (order doesn't matter)
                    _ofSameType: function(A, B) {
                      return A.prototype.getType() === this.getType() ? A : B;
                    },
                    setName: function(sourceObs, selfName) {
                      this._name = selfName ? sourceObs._name + "." + selfName : sourceObs;
                      return this;
                    },
                    log: function() {
                      var name = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.toString();
                      var isCurrent = void 0;
                      var handler = function(event) {
                        var type = "<" + event.type + (isCurrent ? ":current" : "") + ">";
                        if (event.type === END) {
                          console.log(name, type);
                        } else {
                          console.log(name, type, event.value);
                        }
                      };
                      if (this._alive) {
                        if (!this._logHandlers) {
                          this._logHandlers = [];
                        }
                        this._logHandlers.push({ name, handler });
                      }
                      isCurrent = true;
                      this.onAny(handler);
                      isCurrent = false;
                      return this;
                    },
                    offLog: function() {
                      var name = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.toString();
                      if (this._logHandlers) {
                        var handlerIndex = findByPred(this._logHandlers, function(obj2) {
                          return obj2.name === name;
                        });
                        if (handlerIndex !== -1) {
                          this.offAny(this._logHandlers[handlerIndex].handler);
                          this._logHandlers.splice(handlerIndex, 1);
                        }
                      }
                      return this;
                    },
                    spy: function() {
                      var name = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.toString();
                      var handler = function(event) {
                        var type = "<" + event.type + ">";
                        if (event.type === END) {
                          console.log(name, type);
                        } else {
                          console.log(name, type, event.value);
                        }
                      };
                      if (this._alive) {
                        if (!this._spyHandlers) {
                          this._spyHandlers = [];
                        }
                        this._spyHandlers.push({ name, handler });
                        this._dispatcher.addSpy(handler);
                      }
                      return this;
                    },
                    offSpy: function() {
                      var name = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.toString();
                      if (this._spyHandlers) {
                        var handlerIndex = findByPred(this._spyHandlers, function(obj2) {
                          return obj2.name === name;
                        });
                        if (handlerIndex !== -1) {
                          this._dispatcher.removeSpy(this._spyHandlers[handlerIndex].handler);
                          this._spyHandlers.splice(handlerIndex, 1);
                        }
                      }
                      return this;
                    }
                  });
                  Observable.prototype.toString = function() {
                    return "[" + this._name + "]";
                  };
                  function Stream() {
                    Observable.call(this);
                  }
                  inherit(Stream, Observable, {
                    _name: "stream",
                    getType: function() {
                      return "stream";
                    }
                  });
                  function Property() {
                    Observable.call(this);
                    this._currentEvent = null;
                  }
                  inherit(Property, Observable, {
                    _name: "property",
                    _emitValue: function(value) {
                      if (this._alive) {
                        this._currentEvent = { type: VALUE, value };
                        if (!this._activating) {
                          this._dispatcher.dispatch({ type: VALUE, value });
                        }
                      }
                    },
                    _emitError: function(value) {
                      if (this._alive) {
                        this._currentEvent = { type: ERROR, value };
                        if (!this._activating) {
                          this._dispatcher.dispatch({ type: ERROR, value });
                        }
                      }
                    },
                    _emitEnd: function() {
                      if (this._alive) {
                        this._alive = false;
                        if (!this._activating) {
                          this._dispatcher.dispatch({ type: END });
                        }
                        this._clear();
                      }
                    },
                    _on: function(type, fn) {
                      if (this._alive) {
                        this._dispatcher.add(type, fn);
                        this._setActive(true);
                      }
                      if (this._currentEvent !== null) {
                        callSubscriber(type, fn, this._currentEvent);
                      }
                      if (!this._alive) {
                        callSubscriber(type, fn, { type: END });
                      }
                      return this;
                    },
                    getType: function() {
                      return "property";
                    }
                  });
                  var neverS = new Stream();
                  neverS._emitEnd();
                  neverS._name = "never";
                  function never() {
                    return neverS;
                  }
                  function timeBased(mixin2) {
                    function AnonymousStream(wait, options) {
                      var _this = this;
                      Stream.call(this);
                      this._wait = wait;
                      this._intervalId = null;
                      this._$onTick = function() {
                        return _this._onTick();
                      };
                      this._init(options);
                    }
                    inherit(AnonymousStream, Stream, {
                      _init: function() {
                      },
                      _free: function() {
                      },
                      _onTick: function() {
                      },
                      _onActivation: function() {
                        this._intervalId = setInterval(this._$onTick, this._wait);
                      },
                      _onDeactivation: function() {
                        if (this._intervalId !== null) {
                          clearInterval(this._intervalId);
                          this._intervalId = null;
                        }
                      },
                      _clear: function() {
                        Stream.prototype._clear.call(this);
                        this._$onTick = null;
                        this._free();
                      }
                    }, mixin2);
                    return AnonymousStream;
                  }
                  var S = timeBased({
                    _name: "later",
                    _init: function(_ref) {
                      var x2 = _ref.x;
                      this._x = x2;
                    },
                    _free: function() {
                      this._x = null;
                    },
                    _onTick: function() {
                      this._emitValue(this._x);
                      this._emitEnd();
                    }
                  });
                  function later(wait, x2) {
                    return new S(wait, { x: x2 });
                  }
                  var S$1 = timeBased({
                    _name: "interval",
                    _init: function(_ref) {
                      var x2 = _ref.x;
                      this._x = x2;
                    },
                    _free: function() {
                      this._x = null;
                    },
                    _onTick: function() {
                      this._emitValue(this._x);
                    }
                  });
                  function interval(wait, x2) {
                    return new S$1(wait, { x: x2 });
                  }
                  var S$2 = timeBased({
                    _name: "sequentially",
                    _init: function(_ref) {
                      var xs = _ref.xs;
                      this._xs = cloneArray(xs);
                    },
                    _free: function() {
                      this._xs = null;
                    },
                    _onTick: function() {
                      if (this._xs.length === 1) {
                        this._emitValue(this._xs[0]);
                        this._emitEnd();
                      } else {
                        this._emitValue(this._xs.shift());
                      }
                    }
                  });
                  function sequentially(wait, xs) {
                    return xs.length === 0 ? never() : new S$2(wait, { xs });
                  }
                  var S$3 = timeBased({
                    _name: "fromPoll",
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _onTick: function() {
                      var fn = this._fn;
                      this._emitValue(fn());
                    }
                  });
                  function fromPoll(wait, fn) {
                    return new S$3(wait, { fn });
                  }
                  function emitter(obs) {
                    function value(x2) {
                      obs._emitValue(x2);
                      return obs._active;
                    }
                    function error(x2) {
                      obs._emitError(x2);
                      return obs._active;
                    }
                    function end() {
                      obs._emitEnd();
                      return obs._active;
                    }
                    function event(e) {
                      obs._emit(e.type, e.value);
                      return obs._active;
                    }
                    return {
                      value,
                      error,
                      end,
                      event,
                      // legacy
                      emit: value,
                      emitEvent: event
                    };
                  }
                  var S$4 = timeBased({
                    _name: "withInterval",
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                      this._emitter = emitter(this);
                    },
                    _free: function() {
                      this._fn = null;
                      this._emitter = null;
                    },
                    _onTick: function() {
                      var fn = this._fn;
                      fn(this._emitter);
                    }
                  });
                  function withInterval(wait, fn) {
                    return new S$4(wait, { fn });
                  }
                  function S$5(fn) {
                    Stream.call(this);
                    this._fn = fn;
                    this._unsubscribe = null;
                  }
                  inherit(S$5, Stream, {
                    _name: "stream",
                    _onActivation: function() {
                      var fn = this._fn;
                      var unsubscribe = fn(emitter(this));
                      this._unsubscribe = typeof unsubscribe === "function" ? unsubscribe : null;
                      if (!this._active) {
                        this._callUnsubscribe();
                      }
                    },
                    _callUnsubscribe: function() {
                      if (this._unsubscribe !== null) {
                        this._unsubscribe();
                        this._unsubscribe = null;
                      }
                    },
                    _onDeactivation: function() {
                      this._callUnsubscribe();
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._fn = null;
                    }
                  });
                  function stream(fn) {
                    return new S$5(fn);
                  }
                  function fromCallback(callbackConsumer) {
                    var called = false;
                    return stream(function(emitter2) {
                      if (!called) {
                        callbackConsumer(function(x2) {
                          emitter2.emit(x2);
                          emitter2.end();
                        });
                        called = true;
                      }
                    }).setName("fromCallback");
                  }
                  function fromNodeCallback(callbackConsumer) {
                    var called = false;
                    return stream(function(emitter2) {
                      if (!called) {
                        callbackConsumer(function(error, x2) {
                          if (error) {
                            emitter2.error(error);
                          } else {
                            emitter2.emit(x2);
                          }
                          emitter2.end();
                        });
                        called = true;
                      }
                    }).setName("fromNodeCallback");
                  }
                  function spread(fn, length) {
                    switch (length) {
                      case 0:
                        return function() {
                          return fn();
                        };
                      case 1:
                        return function(a) {
                          return fn(a[0]);
                        };
                      case 2:
                        return function(a) {
                          return fn(a[0], a[1]);
                        };
                      case 3:
                        return function(a) {
                          return fn(a[0], a[1], a[2]);
                        };
                      case 4:
                        return function(a) {
                          return fn(a[0], a[1], a[2], a[3]);
                        };
                      default:
                        return function(a) {
                          return fn.apply(null, a);
                        };
                    }
                  }
                  function apply(fn, c, a) {
                    var aLength = a ? a.length : 0;
                    if (c == null) {
                      switch (aLength) {
                        case 0:
                          return fn();
                        case 1:
                          return fn(a[0]);
                        case 2:
                          return fn(a[0], a[1]);
                        case 3:
                          return fn(a[0], a[1], a[2]);
                        case 4:
                          return fn(a[0], a[1], a[2], a[3]);
                        default:
                          return fn.apply(null, a);
                      }
                    } else {
                      switch (aLength) {
                        case 0:
                          return fn.call(c);
                        default:
                          return fn.apply(c, a);
                      }
                    }
                  }
                  function fromSubUnsub(sub, unsub, transformer) {
                    return stream(function(emitter2) {
                      var handler = transformer ? function() {
                        emitter2.emit(apply(transformer, this, arguments));
                      } : function(x2) {
                        emitter2.emit(x2);
                      };
                      sub(handler);
                      return function() {
                        return unsub(handler);
                      };
                    }).setName("fromSubUnsub");
                  }
                  var pairs = [["addEventListener", "removeEventListener"], ["addListener", "removeListener"], ["on", "off"]];
                  function fromEvents(target, eventName, transformer) {
                    var sub = void 0, unsub = void 0;
                    for (var i2 = 0; i2 < pairs.length; i2++) {
                      if (typeof target[pairs[i2][0]] === "function" && typeof target[pairs[i2][1]] === "function") {
                        sub = pairs[i2][0];
                        unsub = pairs[i2][1];
                        break;
                      }
                    }
                    if (sub === void 0) {
                      throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");
                    }
                    return fromSubUnsub(function(handler) {
                      return target[sub](eventName, handler);
                    }, function(handler) {
                      return target[unsub](eventName, handler);
                    }, transformer).setName("fromEvents");
                  }
                  function P(value) {
                    this._currentEvent = { type: "value", value, current: true };
                  }
                  inherit(P, Property, {
                    _name: "constant",
                    _active: false,
                    _activating: false,
                    _alive: false,
                    _dispatcher: null,
                    _logHandlers: null
                  });
                  function constant(x2) {
                    return new P(x2);
                  }
                  function P$1(value) {
                    this._currentEvent = { type: "error", value, current: true };
                  }
                  inherit(P$1, Property, {
                    _name: "constantError",
                    _active: false,
                    _activating: false,
                    _alive: false,
                    _dispatcher: null,
                    _logHandlers: null
                  });
                  function constantError(x2) {
                    return new P$1(x2);
                  }
                  function createConstructor(BaseClass, name) {
                    return function AnonymousObservable(source, options) {
                      var _this = this;
                      BaseClass.call(this);
                      this._source = source;
                      this._name = source._name + "." + name;
                      this._init(options);
                      this._$handleAny = function(event) {
                        return _this._handleAny(event);
                      };
                    };
                  }
                  function createClassMethods(BaseClass) {
                    return {
                      _init: function() {
                      },
                      _free: function() {
                      },
                      _handleValue: function(x2) {
                        this._emitValue(x2);
                      },
                      _handleError: function(x2) {
                        this._emitError(x2);
                      },
                      _handleEnd: function() {
                        this._emitEnd();
                      },
                      _handleAny: function(event) {
                        switch (event.type) {
                          case VALUE:
                            return this._handleValue(event.value);
                          case ERROR:
                            return this._handleError(event.value);
                          case END:
                            return this._handleEnd();
                        }
                      },
                      _onActivation: function() {
                        this._source.onAny(this._$handleAny);
                      },
                      _onDeactivation: function() {
                        this._source.offAny(this._$handleAny);
                      },
                      _clear: function() {
                        BaseClass.prototype._clear.call(this);
                        this._source = null;
                        this._$handleAny = null;
                        this._free();
                      }
                    };
                  }
                  function createStream(name, mixin2) {
                    var S2 = createConstructor(Stream, name);
                    inherit(S2, Stream, createClassMethods(Stream), mixin2);
                    return S2;
                  }
                  function createProperty(name, mixin2) {
                    var P2 = createConstructor(Property, name);
                    inherit(P2, Property, createClassMethods(Property), mixin2);
                    return P2;
                  }
                  var P$2 = createProperty("toProperty", {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._getInitialCurrent = fn;
                    },
                    _onActivation: function() {
                      if (this._getInitialCurrent !== null) {
                        var getInitial = this._getInitialCurrent;
                        this._emitValue(getInitial());
                      }
                      this._source.onAny(this._$handleAny);
                    }
                  });
                  function toProperty(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
                    if (fn !== null && typeof fn !== "function") {
                      throw new Error("You should call toProperty() with a function or no arguments.");
                    }
                    return new P$2(obs, { fn });
                  }
                  var S$6 = createStream("changes", {
                    _handleValue: function(x2) {
                      if (!this._activating) {
                        this._emitValue(x2);
                      }
                    },
                    _handleError: function(x2) {
                      if (!this._activating) {
                        this._emitError(x2);
                      }
                    }
                  });
                  function changes(obs) {
                    return new S$6(obs);
                  }
                  function fromPromise(promise) {
                    var called = false;
                    var result2 = stream(function(emitter2) {
                      if (!called) {
                        var onValue = function(x2) {
                          emitter2.emit(x2);
                          emitter2.end();
                        };
                        var onError = function(x2) {
                          emitter2.error(x2);
                          emitter2.end();
                        };
                        var _promise = promise.then(onValue, onError);
                        if (_promise && typeof _promise.done === "function") {
                          _promise.done();
                        }
                        called = true;
                      }
                    });
                    return toProperty(result2, null).setName("fromPromise");
                  }
                  function getGlodalPromise() {
                    if (typeof Promise === "function") {
                      return Promise;
                    } else {
                      throw new Error("There isn't default Promise, use shim or parameter");
                    }
                  }
                  var toPromise = function(obs) {
                    var Promise2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : getGlodalPromise();
                    var last3 = null;
                    return new Promise2(function(resolve, reject) {
                      obs.onAny(function(event) {
                        if (event.type === END && last3 !== null) {
                          (last3.type === VALUE ? resolve : reject)(last3.value);
                          last3 = null;
                        } else {
                          last3 = event;
                        }
                      });
                    });
                  };
                  function symbolObservablePonyfill(root2) {
                    var result2;
                    var Symbol2 = root2.Symbol;
                    if (typeof Symbol2 === "function") {
                      if (Symbol2.observable) {
                        result2 = Symbol2.observable;
                      } else {
                        result2 = Symbol2("observable");
                        Symbol2.observable = result2;
                      }
                    } else {
                      result2 = "@@observable";
                    }
                    return result2;
                  }
                  var root;
                  if (typeof self !== "undefined") {
                    root = self;
                  } else if (typeof window !== "undefined") {
                    root = window;
                  } else if (typeof __webpack_require__3.g !== "undefined") {
                    root = __webpack_require__3.g;
                  } else if (true) {
                    root = module3;
                  } else {
                  }
                  var result = symbolObservablePonyfill(root);
                  var $$observable = result.default ? result.default : result;
                  function fromESObservable(_observable) {
                    var observable = _observable[$$observable] ? _observable[$$observable]() : _observable;
                    return stream(function(emitter2) {
                      var unsub = observable.subscribe({
                        error: function(error) {
                          emitter2.error(error);
                          emitter2.end();
                        },
                        next: function(value) {
                          emitter2.emit(value);
                        },
                        complete: function() {
                          emitter2.end();
                        }
                      });
                      if (unsub.unsubscribe) {
                        return function() {
                          unsub.unsubscribe();
                        };
                      } else {
                        return unsub;
                      }
                    }).setName("fromESObservable");
                  }
                  function ESObservable(observable) {
                    this._observable = observable.takeErrors(1);
                  }
                  extend(ESObservable.prototype, {
                    subscribe: function(observerOrOnNext, onError, onComplete) {
                      var _this = this;
                      var observer = typeof observerOrOnNext === "function" ? { next: observerOrOnNext, error: onError, complete: onComplete } : observerOrOnNext;
                      var fn = function(event) {
                        if (event.type === END) {
                          closed = true;
                        }
                        if (event.type === VALUE && observer.next) {
                          observer.next(event.value);
                        } else if (event.type === ERROR && observer.error) {
                          observer.error(event.value);
                        } else if (event.type === END && observer.complete) {
                          observer.complete(event.value);
                        }
                      };
                      this._observable.onAny(fn);
                      var closed = false;
                      var subscription = {
                        unsubscribe: function() {
                          closed = true;
                          _this._observable.offAny(fn);
                        },
                        get closed() {
                          return closed;
                        }
                      };
                      return subscription;
                    }
                  });
                  ESObservable.prototype[$$observable] = function() {
                    return this;
                  };
                  function toESObservable() {
                    return new ESObservable(this);
                  }
                  function collect(source, keys, values) {
                    for (var prop in source) {
                      if (source.hasOwnProperty(prop)) {
                        keys.push(prop);
                        values.push(source[prop]);
                      }
                    }
                  }
                  function defaultErrorsCombinator(errors) {
                    var latestError = void 0;
                    for (var i2 = 0; i2 < errors.length; i2++) {
                      if (errors[i2] !== void 0) {
                        if (latestError === void 0 || latestError.index < errors[i2].index) {
                          latestError = errors[i2];
                        }
                      }
                    }
                    return latestError.error;
                  }
                  function Combine(active, passive, combinator) {
                    var _this = this;
                    Stream.call(this);
                    this._activeCount = active.length;
                    this._sources = concat(active, passive);
                    this._combinator = combinator;
                    this._aliveCount = 0;
                    this._latestValues = new Array(this._sources.length);
                    this._latestErrors = new Array(this._sources.length);
                    fillArray(this._latestValues, NOTHING);
                    this._emitAfterActivation = false;
                    this._endAfterActivation = false;
                    this._latestErrorIndex = 0;
                    this._$handlers = [];
                    var _loop = function(i3) {
                      _this._$handlers.push(function(event) {
                        return _this._handleAny(i3, event);
                      });
                    };
                    for (var i2 = 0; i2 < this._sources.length; i2++) {
                      _loop(i2);
                    }
                  }
                  inherit(Combine, Stream, {
                    _name: "combine",
                    _onActivation: function() {
                      this._aliveCount = this._activeCount;
                      for (var i2 = this._activeCount; i2 < this._sources.length; i2++) {
                        this._sources[i2].onAny(this._$handlers[i2]);
                      }
                      for (var _i = 0; _i < this._activeCount; _i++) {
                        this._sources[_i].onAny(this._$handlers[_i]);
                      }
                      if (this._emitAfterActivation) {
                        this._emitAfterActivation = false;
                        this._emitIfFull();
                      }
                      if (this._endAfterActivation) {
                        this._emitEnd();
                      }
                    },
                    _onDeactivation: function() {
                      var length = this._sources.length, i2 = void 0;
                      for (i2 = 0; i2 < length; i2++) {
                        this._sources[i2].offAny(this._$handlers[i2]);
                      }
                    },
                    _emitIfFull: function() {
                      var hasAllValues = true;
                      var hasErrors = false;
                      var length = this._latestValues.length;
                      var valuesCopy = new Array(length);
                      var errorsCopy = new Array(length);
                      for (var i2 = 0; i2 < length; i2++) {
                        valuesCopy[i2] = this._latestValues[i2];
                        errorsCopy[i2] = this._latestErrors[i2];
                        if (valuesCopy[i2] === NOTHING) {
                          hasAllValues = false;
                        }
                        if (errorsCopy[i2] !== void 0) {
                          hasErrors = true;
                        }
                      }
                      if (hasAllValues) {
                        var combinator = this._combinator;
                        this._emitValue(combinator(valuesCopy));
                      }
                      if (hasErrors) {
                        this._emitError(defaultErrorsCombinator(errorsCopy));
                      }
                    },
                    _handleAny: function(i2, event) {
                      if (event.type === VALUE || event.type === ERROR) {
                        if (event.type === VALUE) {
                          this._latestValues[i2] = event.value;
                          this._latestErrors[i2] = void 0;
                        }
                        if (event.type === ERROR) {
                          this._latestValues[i2] = NOTHING;
                          this._latestErrors[i2] = {
                            index: this._latestErrorIndex++,
                            error: event.value
                          };
                        }
                        if (i2 < this._activeCount) {
                          if (this._activating) {
                            this._emitAfterActivation = true;
                          } else {
                            this._emitIfFull();
                          }
                        }
                      } else {
                        if (i2 < this._activeCount) {
                          this._aliveCount--;
                          if (this._aliveCount === 0) {
                            if (this._activating) {
                              this._endAfterActivation = true;
                            } else {
                              this._emitEnd();
                            }
                          }
                        }
                      }
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._sources = null;
                      this._latestValues = null;
                      this._latestErrors = null;
                      this._combinator = null;
                      this._$handlers = null;
                    }
                  });
                  function combineAsArray(active) {
                    var passive = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
                    var combinator = arguments[2];
                    if (!Array.isArray(passive)) {
                      throw new Error("Combine can only combine active and passive collections of the same type.");
                    }
                    combinator = combinator ? spread(combinator, active.length + passive.length) : function(x2) {
                      return x2;
                    };
                    return active.length === 0 ? never() : new Combine(active, passive, combinator);
                  }
                  function combineAsObject(active) {
                    var passive = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
                    var combinator = arguments[2];
                    if (typeof passive !== "object" || Array.isArray(passive)) {
                      throw new Error("Combine can only combine active and passive collections of the same type.");
                    }
                    var keys = [], activeObservables = [], passiveObservables = [];
                    collect(active, keys, activeObservables);
                    collect(passive, keys, passiveObservables);
                    var objectify = function(values) {
                      var event = {};
                      for (var i2 = values.length - 1; 0 <= i2; i2--) {
                        event[keys[i2]] = values[i2];
                      }
                      return combinator ? combinator(event) : event;
                    };
                    return activeObservables.length === 0 ? never() : new Combine(activeObservables, passiveObservables, objectify);
                  }
                  function combine(active, passive, combinator) {
                    if (typeof passive === "function") {
                      combinator = passive;
                      passive = void 0;
                    }
                    return Array.isArray(active) ? combineAsArray(active, passive, combinator) : combineAsObject(active, passive, combinator);
                  }
                  var Observable$2 = {
                    empty: function() {
                      return never();
                    },
                    // Monoid based on merge() seems more useful than one based on concat().
                    concat: function(a, b) {
                      return a.merge(b);
                    },
                    of: function(x2) {
                      return constant(x2);
                    },
                    map: function(fn, obs) {
                      return obs.map(fn);
                    },
                    bimap: function(fnErr, fnVal, obs) {
                      return obs.mapErrors(fnErr).map(fnVal);
                    },
                    // This ap strictly speaking incompatible with chain. If we derive ap from chain we get
                    // different (not very useful) behavior. But spec requires that if method can be derived
                    // it must have the same behavior as hand-written method. We intentionally violate the spec
                    // in hope that it won't cause many troubles in practice. And in return we have more useful type.
                    ap: function(obsFn, obsVal) {
                      return combine([obsFn, obsVal], function(fn, val) {
                        return fn(val);
                      });
                    },
                    chain: function(fn, obs) {
                      return obs.flatMap(fn);
                    }
                  };
                  var staticLand = Object.freeze({
                    Observable: Observable$2
                  });
                  var mixin = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x2) {
                      var fn = this._fn;
                      this._emitValue(fn(x2));
                    }
                  };
                  var S$7 = createStream("map", mixin);
                  var P$3 = createProperty("map", mixin);
                  var id = function(x2) {
                    return x2;
                  };
                  function map$1(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id;
                    return new (obs._ofSameType(S$7, P$3))(obs, { fn });
                  }
                  var mixin$1 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x2) {
                      var fn = this._fn;
                      if (fn(x2)) {
                        this._emitValue(x2);
                      }
                    }
                  };
                  var S$8 = createStream("filter", mixin$1);
                  var P$4 = createProperty("filter", mixin$1);
                  var id$1 = function(x2) {
                    return x2;
                  };
                  function filter2(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$1;
                    return new (obs._ofSameType(S$8, P$4))(obs, { fn });
                  }
                  var mixin$2 = {
                    _init: function(_ref) {
                      var n = _ref.n;
                      this._n = n;
                      if (n <= 0) {
                        this._emitEnd();
                      }
                    },
                    _handleValue: function(x2) {
                      if (this._n === 0) {
                        return;
                      }
                      this._n--;
                      this._emitValue(x2);
                      if (this._n === 0) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$9 = createStream("take", mixin$2);
                  var P$5 = createProperty("take", mixin$2);
                  function take(obs, n) {
                    return new (obs._ofSameType(S$9, P$5))(obs, { n });
                  }
                  var mixin$3 = {
                    _init: function(_ref) {
                      var n = _ref.n;
                      this._n = n;
                      if (n <= 0) {
                        this._emitEnd();
                      }
                    },
                    _handleError: function(x2) {
                      if (this._n === 0) {
                        return;
                      }
                      this._n--;
                      this._emitError(x2);
                      if (this._n === 0) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$10 = createStream("takeErrors", mixin$3);
                  var P$6 = createProperty("takeErrors", mixin$3);
                  function takeErrors(obs, n) {
                    return new (obs._ofSameType(S$10, P$6))(obs, { n });
                  }
                  var mixin$4 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x2) {
                      var fn = this._fn;
                      if (fn(x2)) {
                        this._emitValue(x2);
                      } else {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$11 = createStream("takeWhile", mixin$4);
                  var P$7 = createProperty("takeWhile", mixin$4);
                  var id$2 = function(x2) {
                    return x2;
                  };
                  function takeWhile(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$2;
                    return new (obs._ofSameType(S$11, P$7))(obs, { fn });
                  }
                  var mixin$5 = {
                    _init: function() {
                      this._lastValue = NOTHING;
                    },
                    _free: function() {
                      this._lastValue = null;
                    },
                    _handleValue: function(x2) {
                      this._lastValue = x2;
                    },
                    _handleEnd: function() {
                      if (this._lastValue !== NOTHING) {
                        this._emitValue(this._lastValue);
                      }
                      this._emitEnd();
                    }
                  };
                  var S$12 = createStream("last", mixin$5);
                  var P$8 = createProperty("last", mixin$5);
                  function last2(obs) {
                    return new (obs._ofSameType(S$12, P$8))(obs);
                  }
                  var mixin$6 = {
                    _init: function(_ref) {
                      var n = _ref.n;
                      this._n = Math.max(0, n);
                    },
                    _handleValue: function(x2) {
                      if (this._n === 0) {
                        this._emitValue(x2);
                      } else {
                        this._n--;
                      }
                    }
                  };
                  var S$13 = createStream("skip", mixin$6);
                  var P$9 = createProperty("skip", mixin$6);
                  function skip(obs, n) {
                    return new (obs._ofSameType(S$13, P$9))(obs, { n });
                  }
                  var mixin$7 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x2) {
                      var fn = this._fn;
                      if (this._fn !== null && !fn(x2)) {
                        this._fn = null;
                      }
                      if (this._fn === null) {
                        this._emitValue(x2);
                      }
                    }
                  };
                  var S$14 = createStream("skipWhile", mixin$7);
                  var P$10 = createProperty("skipWhile", mixin$7);
                  var id$3 = function(x2) {
                    return x2;
                  };
                  function skipWhile(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$3;
                    return new (obs._ofSameType(S$14, P$10))(obs, { fn });
                  }
                  var mixin$8 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                      this._prev = NOTHING;
                    },
                    _free: function() {
                      this._fn = null;
                      this._prev = null;
                    },
                    _handleValue: function(x2) {
                      var fn = this._fn;
                      if (this._prev === NOTHING || !fn(this._prev, x2)) {
                        this._prev = x2;
                        this._emitValue(x2);
                      }
                    }
                  };
                  var S$15 = createStream("skipDuplicates", mixin$8);
                  var P$11 = createProperty("skipDuplicates", mixin$8);
                  var eq = function(a, b) {
                    return a === b;
                  };
                  function skipDuplicates(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : eq;
                    return new (obs._ofSameType(S$15, P$11))(obs, { fn });
                  }
                  var mixin$9 = {
                    _init: function(_ref) {
                      var fn = _ref.fn, seed = _ref.seed;
                      this._fn = fn;
                      this._prev = seed;
                    },
                    _free: function() {
                      this._prev = null;
                      this._fn = null;
                    },
                    _handleValue: function(x2) {
                      if (this._prev !== NOTHING) {
                        var fn = this._fn;
                        this._emitValue(fn(this._prev, x2));
                      }
                      this._prev = x2;
                    }
                  };
                  var S$16 = createStream("diff", mixin$9);
                  var P$12 = createProperty("diff", mixin$9);
                  function defaultFn(a, b) {
                    return [a, b];
                  }
                  function diff(obs, fn) {
                    var seed = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : NOTHING;
                    return new (obs._ofSameType(S$16, P$12))(obs, { fn: fn || defaultFn, seed });
                  }
                  var P$13 = createProperty("scan", {
                    _init: function(_ref) {
                      var fn = _ref.fn, seed = _ref.seed;
                      this._fn = fn;
                      this._seed = seed;
                      if (seed !== NOTHING) {
                        this._emitValue(seed);
                      }
                    },
                    _free: function() {
                      this._fn = null;
                      this._seed = null;
                    },
                    _handleValue: function(x2) {
                      var fn = this._fn;
                      if (this._currentEvent === null || this._currentEvent.type === ERROR) {
                        this._emitValue(this._seed === NOTHING ? x2 : fn(this._seed, x2));
                      } else {
                        this._emitValue(fn(this._currentEvent.value, x2));
                      }
                    }
                  });
                  function scan(obs, fn) {
                    var seed = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : NOTHING;
                    return new P$13(obs, { fn, seed });
                  }
                  var mixin$10 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x2) {
                      var fn = this._fn;
                      var xs = fn(x2);
                      for (var i2 = 0; i2 < xs.length; i2++) {
                        this._emitValue(xs[i2]);
                      }
                    }
                  };
                  var S$17 = createStream("flatten", mixin$10);
                  var id$4 = function(x2) {
                    return x2;
                  };
                  function flatten2(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$4;
                    return new S$17(obs, { fn });
                  }
                  var END_MARKER = {};
                  var mixin$11 = {
                    _init: function(_ref) {
                      var _this = this;
                      var wait = _ref.wait;
                      this._wait = Math.max(0, wait);
                      this._buff = [];
                      this._$shiftBuff = function() {
                        var value = _this._buff.shift();
                        if (value === END_MARKER) {
                          _this._emitEnd();
                        } else {
                          _this._emitValue(value);
                        }
                      };
                    },
                    _free: function() {
                      this._buff = null;
                      this._$shiftBuff = null;
                    },
                    _handleValue: function(x2) {
                      if (this._activating) {
                        this._emitValue(x2);
                      } else {
                        this._buff.push(x2);
                        setTimeout(this._$shiftBuff, this._wait);
                      }
                    },
                    _handleEnd: function() {
                      if (this._activating) {
                        this._emitEnd();
                      } else {
                        this._buff.push(END_MARKER);
                        setTimeout(this._$shiftBuff, this._wait);
                      }
                    }
                  };
                  var S$18 = createStream("delay", mixin$11);
                  var P$14 = createProperty("delay", mixin$11);
                  function delay(obs, wait) {
                    return new (obs._ofSameType(S$18, P$14))(obs, { wait });
                  }
                  var now = Date.now ? function() {
                    return Date.now();
                  } : function() {
                    return (/* @__PURE__ */ new Date()).getTime();
                  };
                  var mixin$12 = {
                    _init: function(_ref) {
                      var _this = this;
                      var wait = _ref.wait, leading = _ref.leading, trailing = _ref.trailing;
                      this._wait = Math.max(0, wait);
                      this._leading = leading;
                      this._trailing = trailing;
                      this._trailingValue = null;
                      this._timeoutId = null;
                      this._endLater = false;
                      this._lastCallTime = 0;
                      this._$trailingCall = function() {
                        return _this._trailingCall();
                      };
                    },
                    _free: function() {
                      this._trailingValue = null;
                      this._$trailingCall = null;
                    },
                    _handleValue: function(x2) {
                      if (this._activating) {
                        this._emitValue(x2);
                      } else {
                        var curTime = now();
                        if (this._lastCallTime === 0 && !this._leading) {
                          this._lastCallTime = curTime;
                        }
                        var remaining = this._wait - (curTime - this._lastCallTime);
                        if (remaining <= 0) {
                          this._cancelTrailing();
                          this._lastCallTime = curTime;
                          this._emitValue(x2);
                        } else if (this._trailing) {
                          this._cancelTrailing();
                          this._trailingValue = x2;
                          this._timeoutId = setTimeout(this._$trailingCall, remaining);
                        }
                      }
                    },
                    _handleEnd: function() {
                      if (this._activating) {
                        this._emitEnd();
                      } else {
                        if (this._timeoutId) {
                          this._endLater = true;
                        } else {
                          this._emitEnd();
                        }
                      }
                    },
                    _cancelTrailing: function() {
                      if (this._timeoutId !== null) {
                        clearTimeout(this._timeoutId);
                        this._timeoutId = null;
                      }
                    },
                    _trailingCall: function() {
                      this._emitValue(this._trailingValue);
                      this._timeoutId = null;
                      this._trailingValue = null;
                      this._lastCallTime = !this._leading ? 0 : now();
                      if (this._endLater) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$19 = createStream("throttle", mixin$12);
                  var P$15 = createProperty("throttle", mixin$12);
                  function throttle(obs, wait) {
                    var _ref2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, _ref2$leading = _ref2.leading, leading = _ref2$leading === void 0 ? true : _ref2$leading, _ref2$trailing = _ref2.trailing, trailing = _ref2$trailing === void 0 ? true : _ref2$trailing;
                    return new (obs._ofSameType(S$19, P$15))(obs, { wait, leading, trailing });
                  }
                  var mixin$13 = {
                    _init: function(_ref) {
                      var _this = this;
                      var wait = _ref.wait, immediate = _ref.immediate;
                      this._wait = Math.max(0, wait);
                      this._immediate = immediate;
                      this._lastAttempt = 0;
                      this._timeoutId = null;
                      this._laterValue = null;
                      this._endLater = false;
                      this._$later = function() {
                        return _this._later();
                      };
                    },
                    _free: function() {
                      this._laterValue = null;
                      this._$later = null;
                    },
                    _handleValue: function(x2) {
                      if (this._activating) {
                        this._emitValue(x2);
                      } else {
                        this._lastAttempt = now();
                        if (this._immediate && !this._timeoutId) {
                          this._emitValue(x2);
                        }
                        if (!this._timeoutId) {
                          this._timeoutId = setTimeout(this._$later, this._wait);
                        }
                        if (!this._immediate) {
                          this._laterValue = x2;
                        }
                      }
                    },
                    _handleEnd: function() {
                      if (this._activating) {
                        this._emitEnd();
                      } else {
                        if (this._timeoutId && !this._immediate) {
                          this._endLater = true;
                        } else {
                          this._emitEnd();
                        }
                      }
                    },
                    _later: function() {
                      var last3 = now() - this._lastAttempt;
                      if (last3 < this._wait && last3 >= 0) {
                        this._timeoutId = setTimeout(this._$later, this._wait - last3);
                      } else {
                        this._timeoutId = null;
                        if (!this._immediate) {
                          var _laterValue = this._laterValue;
                          this._laterValue = null;
                          this._emitValue(_laterValue);
                        }
                        if (this._endLater) {
                          this._emitEnd();
                        }
                      }
                    }
                  };
                  var S$20 = createStream("debounce", mixin$13);
                  var P$16 = createProperty("debounce", mixin$13);
                  function debounce(obs, wait) {
                    var _ref2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, _ref2$immediate = _ref2.immediate, immediate = _ref2$immediate === void 0 ? false : _ref2$immediate;
                    return new (obs._ofSameType(S$20, P$16))(obs, { wait, immediate });
                  }
                  var mixin$14 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleError: function(x2) {
                      var fn = this._fn;
                      this._emitError(fn(x2));
                    }
                  };
                  var S$21 = createStream("mapErrors", mixin$14);
                  var P$17 = createProperty("mapErrors", mixin$14);
                  var id$5 = function(x2) {
                    return x2;
                  };
                  function mapErrors(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$5;
                    return new (obs._ofSameType(S$21, P$17))(obs, { fn });
                  }
                  var mixin$15 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleError: function(x2) {
                      var fn = this._fn;
                      if (fn(x2)) {
                        this._emitError(x2);
                      }
                    }
                  };
                  var S$22 = createStream("filterErrors", mixin$15);
                  var P$18 = createProperty("filterErrors", mixin$15);
                  var id$6 = function(x2) {
                    return x2;
                  };
                  function filterErrors(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$6;
                    return new (obs._ofSameType(S$22, P$18))(obs, { fn });
                  }
                  var mixin$16 = {
                    _handleValue: function() {
                    }
                  };
                  var S$23 = createStream("ignoreValues", mixin$16);
                  var P$19 = createProperty("ignoreValues", mixin$16);
                  function ignoreValues(obs) {
                    return new (obs._ofSameType(S$23, P$19))(obs);
                  }
                  var mixin$17 = {
                    _handleError: function() {
                    }
                  };
                  var S$24 = createStream("ignoreErrors", mixin$17);
                  var P$20 = createProperty("ignoreErrors", mixin$17);
                  function ignoreErrors(obs) {
                    return new (obs._ofSameType(S$24, P$20))(obs);
                  }
                  var mixin$18 = {
                    _handleEnd: function() {
                    }
                  };
                  var S$25 = createStream("ignoreEnd", mixin$18);
                  var P$21 = createProperty("ignoreEnd", mixin$18);
                  function ignoreEnd(obs) {
                    return new (obs._ofSameType(S$25, P$21))(obs);
                  }
                  var mixin$19 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleEnd: function() {
                      var fn = this._fn;
                      this._emitValue(fn());
                      this._emitEnd();
                    }
                  };
                  var S$26 = createStream("beforeEnd", mixin$19);
                  var P$22 = createProperty("beforeEnd", mixin$19);
                  function beforeEnd(obs, fn) {
                    return new (obs._ofSameType(S$26, P$22))(obs, { fn });
                  }
                  var mixin$20 = {
                    _init: function(_ref) {
                      var min = _ref.min, max = _ref.max;
                      this._max = max;
                      this._min = min;
                      this._buff = [];
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _handleValue: function(x2) {
                      this._buff = slide(this._buff, x2, this._max);
                      if (this._buff.length >= this._min) {
                        this._emitValue(this._buff);
                      }
                    }
                  };
                  var S$27 = createStream("slidingWindow", mixin$20);
                  var P$23 = createProperty("slidingWindow", mixin$20);
                  function slidingWindow(obs, max) {
                    var min = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
                    return new (obs._ofSameType(S$27, P$23))(obs, { min, max });
                  }
                  var mixin$21 = {
                    _init: function(_ref) {
                      var fn = _ref.fn, flushOnEnd = _ref.flushOnEnd;
                      this._fn = fn;
                      this._flushOnEnd = flushOnEnd;
                      this._buff = [];
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null && this._buff.length !== 0) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handleValue: function(x2) {
                      this._buff.push(x2);
                      var fn = this._fn;
                      if (!fn(x2)) {
                        this._flush();
                      }
                    },
                    _handleEnd: function() {
                      if (this._flushOnEnd) {
                        this._flush();
                      }
                      this._emitEnd();
                    }
                  };
                  var S$28 = createStream("bufferWhile", mixin$21);
                  var P$24 = createProperty("bufferWhile", mixin$21);
                  var id$7 = function(x2) {
                    return x2;
                  };
                  function bufferWhile(obs, fn) {
                    var _ref2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, _ref2$flushOnEnd = _ref2.flushOnEnd, flushOnEnd = _ref2$flushOnEnd === void 0 ? true : _ref2$flushOnEnd;
                    return new (obs._ofSameType(S$28, P$24))(obs, { fn: fn || id$7, flushOnEnd });
                  }
                  var mixin$22 = {
                    _init: function(_ref) {
                      var count = _ref.count, flushOnEnd = _ref.flushOnEnd;
                      this._count = count;
                      this._flushOnEnd = flushOnEnd;
                      this._buff = [];
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null && this._buff.length !== 0) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handleValue: function(x2) {
                      this._buff.push(x2);
                      if (this._buff.length >= this._count) {
                        this._flush();
                      }
                    },
                    _handleEnd: function() {
                      if (this._flushOnEnd) {
                        this._flush();
                      }
                      this._emitEnd();
                    }
                  };
                  var S$29 = createStream("bufferWithCount", mixin$22);
                  var P$25 = createProperty("bufferWithCount", mixin$22);
                  function bufferWhile$1(obs, count) {
                    var _ref2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, _ref2$flushOnEnd = _ref2.flushOnEnd, flushOnEnd = _ref2$flushOnEnd === void 0 ? true : _ref2$flushOnEnd;
                    return new (obs._ofSameType(S$29, P$25))(obs, { count, flushOnEnd });
                  }
                  var mixin$23 = {
                    _init: function(_ref) {
                      var _this = this;
                      var wait = _ref.wait, count = _ref.count, flushOnEnd = _ref.flushOnEnd;
                      this._wait = wait;
                      this._count = count;
                      this._flushOnEnd = flushOnEnd;
                      this._intervalId = null;
                      this._$onTick = function() {
                        return _this._flush();
                      };
                      this._buff = [];
                    },
                    _free: function() {
                      this._$onTick = null;
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handleValue: function(x2) {
                      this._buff.push(x2);
                      if (this._buff.length >= this._count) {
                        clearInterval(this._intervalId);
                        this._flush();
                        this._intervalId = setInterval(this._$onTick, this._wait);
                      }
                    },
                    _handleEnd: function() {
                      if (this._flushOnEnd && this._buff.length !== 0) {
                        this._flush();
                      }
                      this._emitEnd();
                    },
                    _onActivation: function() {
                      this._intervalId = setInterval(this._$onTick, this._wait);
                      this._source.onAny(this._$handleAny);
                    },
                    _onDeactivation: function() {
                      if (this._intervalId !== null) {
                        clearInterval(this._intervalId);
                        this._intervalId = null;
                      }
                      this._source.offAny(this._$handleAny);
                    }
                  };
                  var S$30 = createStream("bufferWithTimeOrCount", mixin$23);
                  var P$26 = createProperty("bufferWithTimeOrCount", mixin$23);
                  function bufferWithTimeOrCount(obs, wait, count) {
                    var _ref2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}, _ref2$flushOnEnd = _ref2.flushOnEnd, flushOnEnd = _ref2$flushOnEnd === void 0 ? true : _ref2$flushOnEnd;
                    return new (obs._ofSameType(S$30, P$26))(obs, { wait, count, flushOnEnd });
                  }
                  function xformForObs(obs) {
                    return {
                      "@@transducer/step": function(res2, input) {
                        obs._emitValue(input);
                        return null;
                      },
                      "@@transducer/result": function() {
                        obs._emitEnd();
                        return null;
                      }
                    };
                  }
                  var mixin$24 = {
                    _init: function(_ref) {
                      var transducer = _ref.transducer;
                      this._xform = transducer(xformForObs(this));
                    },
                    _free: function() {
                      this._xform = null;
                    },
                    _handleValue: function(x2) {
                      if (this._xform["@@transducer/step"](null, x2) !== null) {
                        this._xform["@@transducer/result"](null);
                      }
                    },
                    _handleEnd: function() {
                      this._xform["@@transducer/result"](null);
                    }
                  };
                  var S$31 = createStream("transduce", mixin$24);
                  var P$27 = createProperty("transduce", mixin$24);
                  function transduce(obs, transducer) {
                    return new (obs._ofSameType(S$31, P$27))(obs, { transducer });
                  }
                  var mixin$25 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._handler = fn;
                      this._emitter = emitter(this);
                    },
                    _free: function() {
                      this._handler = null;
                      this._emitter = null;
                    },
                    _handleAny: function(event) {
                      this._handler(this._emitter, event);
                    }
                  };
                  var S$32 = createStream("withHandler", mixin$25);
                  var P$28 = createProperty("withHandler", mixin$25);
                  function withHandler(obs, fn) {
                    return new (obs._ofSameType(S$32, P$28))(obs, { fn });
                  }
                  var isArray = Array.isArray || function(xs) {
                    return Object.prototype.toString.call(xs) === "[object Array]";
                  };
                  function Zip(sources, combinator) {
                    var _this = this;
                    Stream.call(this);
                    this._buffers = map(sources, function(source) {
                      return isArray(source) ? cloneArray(source) : [];
                    });
                    this._sources = map(sources, function(source) {
                      return isArray(source) ? never() : source;
                    });
                    this._combinator = combinator ? spread(combinator, this._sources.length) : function(x2) {
                      return x2;
                    };
                    this._aliveCount = 0;
                    this._$handlers = [];
                    var _loop = function(i3) {
                      _this._$handlers.push(function(event) {
                        return _this._handleAny(i3, event);
                      });
                    };
                    for (var i2 = 0; i2 < this._sources.length; i2++) {
                      _loop(i2);
                    }
                  }
                  inherit(Zip, Stream, {
                    _name: "zip",
                    _onActivation: function() {
                      while (this._isFull()) {
                        this._emit();
                      }
                      var length = this._sources.length;
                      this._aliveCount = length;
                      for (var i2 = 0; i2 < length && this._active; i2++) {
                        this._sources[i2].onAny(this._$handlers[i2]);
                      }
                    },
                    _onDeactivation: function() {
                      for (var i2 = 0; i2 < this._sources.length; i2++) {
                        this._sources[i2].offAny(this._$handlers[i2]);
                      }
                    },
                    _emit: function() {
                      var values = new Array(this._buffers.length);
                      for (var i2 = 0; i2 < this._buffers.length; i2++) {
                        values[i2] = this._buffers[i2].shift();
                      }
                      var combinator = this._combinator;
                      this._emitValue(combinator(values));
                    },
                    _isFull: function() {
                      for (var i2 = 0; i2 < this._buffers.length; i2++) {
                        if (this._buffers[i2].length === 0) {
                          return false;
                        }
                      }
                      return true;
                    },
                    _handleAny: function(i2, event) {
                      if (event.type === VALUE) {
                        this._buffers[i2].push(event.value);
                        if (this._isFull()) {
                          this._emit();
                        }
                      }
                      if (event.type === ERROR) {
                        this._emitError(event.value);
                      }
                      if (event.type === END) {
                        this._aliveCount--;
                        if (this._aliveCount === 0) {
                          this._emitEnd();
                        }
                      }
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._sources = null;
                      this._buffers = null;
                      this._combinator = null;
                      this._$handlers = null;
                    }
                  });
                  function zip(observables, combinator) {
                    return observables.length === 0 ? never() : new Zip(observables, combinator);
                  }
                  var id$8 = function(x2) {
                    return x2;
                  };
                  function AbstractPool() {
                    var _this = this;
                    var _ref = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, _ref$queueLim = _ref.queueLim, queueLim = _ref$queueLim === void 0 ? 0 : _ref$queueLim, _ref$concurLim = _ref.concurLim, concurLim = _ref$concurLim === void 0 ? -1 : _ref$concurLim, _ref$drop = _ref.drop, drop = _ref$drop === void 0 ? "new" : _ref$drop;
                    Stream.call(this);
                    this._queueLim = queueLim < 0 ? -1 : queueLim;
                    this._concurLim = concurLim < 0 ? -1 : concurLim;
                    this._drop = drop;
                    this._queue = [];
                    this._curSources = [];
                    this._$handleSubAny = function(event) {
                      return _this._handleSubAny(event);
                    };
                    this._$endHandlers = [];
                    this._currentlyAdding = null;
                    if (this._concurLim === 0) {
                      this._emitEnd();
                    }
                  }
                  inherit(AbstractPool, Stream, {
                    _name: "abstractPool",
                    _add: function(obj2, toObs) {
                      toObs = toObs || id$8;
                      if (this._concurLim === -1 || this._curSources.length < this._concurLim) {
                        this._addToCur(toObs(obj2));
                      } else {
                        if (this._queueLim === -1 || this._queue.length < this._queueLim) {
                          this._addToQueue(toObs(obj2));
                        } else if (this._drop === "old") {
                          this._removeOldest();
                          this._add(obj2, toObs);
                        }
                      }
                    },
                    _addAll: function(obss) {
                      var _this2 = this;
                      forEach(obss, function(obs) {
                        return _this2._add(obs);
                      });
                    },
                    _remove: function(obs) {
                      if (this._removeCur(obs) === -1) {
                        this._removeQueue(obs);
                      }
                    },
                    _addToQueue: function(obs) {
                      this._queue = concat(this._queue, [obs]);
                    },
                    _addToCur: function(obs) {
                      if (this._active) {
                        if (!obs._alive) {
                          if (obs._currentEvent) {
                            this._emit(obs._currentEvent.type, obs._currentEvent.value);
                          }
                          if (this._active) {
                            if (this._queue.length !== 0) {
                              this._pullQueue();
                            } else if (this._curSources.length === 0) {
                              this._onEmpty();
                            }
                          }
                          return;
                        }
                        this._currentlyAdding = obs;
                        obs.onAny(this._$handleSubAny);
                        this._currentlyAdding = null;
                        if (obs._alive) {
                          this._curSources = concat(this._curSources, [obs]);
                          if (this._active) {
                            this._subToEnd(obs);
                          }
                        } else {
                          if (this._queue.length !== 0) {
                            this._pullQueue();
                          } else if (this._curSources.length === 0) {
                            this._onEmpty();
                          }
                        }
                      } else {
                        this._curSources = concat(this._curSources, [obs]);
                      }
                    },
                    _subToEnd: function(obs) {
                      var _this3 = this;
                      var onEnd = function() {
                        return _this3._removeCur(obs);
                      };
                      this._$endHandlers.push({ obs, handler: onEnd });
                      obs.onEnd(onEnd);
                    },
                    _subscribe: function(obs) {
                      obs.onAny(this._$handleSubAny);
                      if (this._active) {
                        this._subToEnd(obs);
                      }
                    },
                    _unsubscribe: function(obs) {
                      obs.offAny(this._$handleSubAny);
                      var onEndI = findByPred(this._$endHandlers, function(obj2) {
                        return obj2.obs === obs;
                      });
                      if (onEndI !== -1) {
                        obs.offEnd(this._$endHandlers[onEndI].handler);
                        this._$endHandlers.splice(onEndI, 1);
                      }
                    },
                    _handleSubAny: function(event) {
                      if (event.type === VALUE) {
                        this._emitValue(event.value);
                      } else if (event.type === ERROR) {
                        this._emitError(event.value);
                      }
                    },
                    _removeQueue: function(obs) {
                      var index = find(this._queue, obs);
                      this._queue = remove(this._queue, index);
                      return index;
                    },
                    _removeCur: function(obs) {
                      if (this._active) {
                        this._unsubscribe(obs);
                      }
                      var index = find(this._curSources, obs);
                      this._curSources = remove(this._curSources, index);
                      if (index !== -1) {
                        if (this._queue.length !== 0) {
                          this._pullQueue();
                        } else if (this._curSources.length === 0) {
                          this._onEmpty();
                        }
                      }
                      return index;
                    },
                    _removeOldest: function() {
                      this._removeCur(this._curSources[0]);
                    },
                    _pullQueue: function() {
                      if (this._queue.length !== 0) {
                        this._queue = cloneArray(this._queue);
                        this._addToCur(this._queue.shift());
                      }
                    },
                    _onActivation: function() {
                      for (var i2 = 0, sources = this._curSources; i2 < sources.length && this._active; i2++) {
                        this._subscribe(sources[i2]);
                      }
                    },
                    _onDeactivation: function() {
                      for (var i2 = 0, sources = this._curSources; i2 < sources.length; i2++) {
                        this._unsubscribe(sources[i2]);
                      }
                      if (this._currentlyAdding !== null) {
                        this._unsubscribe(this._currentlyAdding);
                      }
                    },
                    _isEmpty: function() {
                      return this._curSources.length === 0;
                    },
                    _onEmpty: function() {
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._queue = null;
                      this._curSources = null;
                      this._$handleSubAny = null;
                      this._$endHandlers = null;
                    }
                  });
                  function Merge(sources) {
                    AbstractPool.call(this);
                    this._addAll(sources);
                    this._initialised = true;
                  }
                  inherit(Merge, AbstractPool, {
                    _name: "merge",
                    _onEmpty: function() {
                      if (this._initialised) {
                        this._emitEnd();
                      }
                    }
                  });
                  function merge(observables) {
                    return observables.length === 0 ? never() : new Merge(observables);
                  }
                  function S$33(generator) {
                    var _this = this;
                    Stream.call(this);
                    this._generator = generator;
                    this._source = null;
                    this._inLoop = false;
                    this._iteration = 0;
                    this._$handleAny = function(event) {
                      return _this._handleAny(event);
                    };
                  }
                  inherit(S$33, Stream, {
                    _name: "repeat",
                    _handleAny: function(event) {
                      if (event.type === END) {
                        this._source = null;
                        this._getSource();
                      } else {
                        this._emit(event.type, event.value);
                      }
                    },
                    _getSource: function() {
                      if (!this._inLoop) {
                        this._inLoop = true;
                        var generator = this._generator;
                        while (this._source === null && this._alive && this._active) {
                          this._source = generator(this._iteration++);
                          if (this._source) {
                            this._source.onAny(this._$handleAny);
                          } else {
                            this._emitEnd();
                          }
                        }
                        this._inLoop = false;
                      }
                    },
                    _onActivation: function() {
                      if (this._source) {
                        this._source.onAny(this._$handleAny);
                      } else {
                        this._getSource();
                      }
                    },
                    _onDeactivation: function() {
                      if (this._source) {
                        this._source.offAny(this._$handleAny);
                      }
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._generator = null;
                      this._source = null;
                      this._$handleAny = null;
                    }
                  });
                  var repeat = function(generator) {
                    return new S$33(generator);
                  };
                  function concat$1(observables) {
                    return repeat(function(index) {
                      return observables.length > index ? observables[index] : false;
                    }).setName("concat");
                  }
                  function Pool() {
                    AbstractPool.call(this);
                  }
                  inherit(Pool, AbstractPool, {
                    _name: "pool",
                    plug: function(obs) {
                      this._add(obs);
                      return this;
                    },
                    unplug: function(obs) {
                      this._remove(obs);
                      return this;
                    }
                  });
                  function FlatMap(source, fn, options) {
                    var _this = this;
                    AbstractPool.call(this, options);
                    this._source = source;
                    this._fn = fn;
                    this._mainEnded = false;
                    this._lastCurrent = null;
                    this._$handleMain = function(event) {
                      return _this._handleMain(event);
                    };
                  }
                  inherit(FlatMap, AbstractPool, {
                    _onActivation: function() {
                      AbstractPool.prototype._onActivation.call(this);
                      if (this._active) {
                        this._source.onAny(this._$handleMain);
                      }
                    },
                    _onDeactivation: function() {
                      AbstractPool.prototype._onDeactivation.call(this);
                      this._source.offAny(this._$handleMain);
                      this._hadNoEvSinceDeact = true;
                    },
                    _handleMain: function(event) {
                      if (event.type === VALUE) {
                        var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;
                        if (!sameCurr) {
                          this._add(event.value, this._fn);
                        }
                        this._lastCurrent = event.value;
                        this._hadNoEvSinceDeact = false;
                      }
                      if (event.type === ERROR) {
                        this._emitError(event.value);
                      }
                      if (event.type === END) {
                        if (this._isEmpty()) {
                          this._emitEnd();
                        } else {
                          this._mainEnded = true;
                        }
                      }
                    },
                    _onEmpty: function() {
                      if (this._mainEnded) {
                        this._emitEnd();
                      }
                    },
                    _clear: function() {
                      AbstractPool.prototype._clear.call(this);
                      this._source = null;
                      this._lastCurrent = null;
                      this._$handleMain = null;
                    }
                  });
                  function FlatMapErrors(source, fn) {
                    FlatMap.call(this, source, fn);
                  }
                  inherit(FlatMapErrors, FlatMap, {
                    // Same as in FlatMap, only VALUE/ERROR flipped
                    _handleMain: function(event) {
                      if (event.type === ERROR) {
                        var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;
                        if (!sameCurr) {
                          this._add(event.value, this._fn);
                        }
                        this._lastCurrent = event.value;
                        this._hadNoEvSinceDeact = false;
                      }
                      if (event.type === VALUE) {
                        this._emitValue(event.value);
                      }
                      if (event.type === END) {
                        if (this._isEmpty()) {
                          this._emitEnd();
                        } else {
                          this._mainEnded = true;
                        }
                      }
                    }
                  });
                  function createConstructor$1(BaseClass, name) {
                    return function AnonymousObservable(primary, secondary, options) {
                      var _this = this;
                      BaseClass.call(this);
                      this._primary = primary;
                      this._secondary = secondary;
                      this._name = primary._name + "." + name;
                      this._lastSecondary = NOTHING;
                      this._$handleSecondaryAny = function(event) {
                        return _this._handleSecondaryAny(event);
                      };
                      this._$handlePrimaryAny = function(event) {
                        return _this._handlePrimaryAny(event);
                      };
                      this._init(options);
                    };
                  }
                  function createClassMethods$1(BaseClass) {
                    return {
                      _init: function() {
                      },
                      _free: function() {
                      },
                      _handlePrimaryValue: function(x2) {
                        this._emitValue(x2);
                      },
                      _handlePrimaryError: function(x2) {
                        this._emitError(x2);
                      },
                      _handlePrimaryEnd: function() {
                        this._emitEnd();
                      },
                      _handleSecondaryValue: function(x2) {
                        this._lastSecondary = x2;
                      },
                      _handleSecondaryError: function(x2) {
                        this._emitError(x2);
                      },
                      _handleSecondaryEnd: function() {
                      },
                      _handlePrimaryAny: function(event) {
                        switch (event.type) {
                          case VALUE:
                            return this._handlePrimaryValue(event.value);
                          case ERROR:
                            return this._handlePrimaryError(event.value);
                          case END:
                            return this._handlePrimaryEnd(event.value);
                        }
                      },
                      _handleSecondaryAny: function(event) {
                        switch (event.type) {
                          case VALUE:
                            return this._handleSecondaryValue(event.value);
                          case ERROR:
                            return this._handleSecondaryError(event.value);
                          case END:
                            this._handleSecondaryEnd(event.value);
                            this._removeSecondary();
                        }
                      },
                      _removeSecondary: function() {
                        if (this._secondary !== null) {
                          this._secondary.offAny(this._$handleSecondaryAny);
                          this._$handleSecondaryAny = null;
                          this._secondary = null;
                        }
                      },
                      _onActivation: function() {
                        if (this._secondary !== null) {
                          this._secondary.onAny(this._$handleSecondaryAny);
                        }
                        if (this._active) {
                          this._primary.onAny(this._$handlePrimaryAny);
                        }
                      },
                      _onDeactivation: function() {
                        if (this._secondary !== null) {
                          this._secondary.offAny(this._$handleSecondaryAny);
                        }
                        this._primary.offAny(this._$handlePrimaryAny);
                      },
                      _clear: function() {
                        BaseClass.prototype._clear.call(this);
                        this._primary = null;
                        this._secondary = null;
                        this._lastSecondary = null;
                        this._$handleSecondaryAny = null;
                        this._$handlePrimaryAny = null;
                        this._free();
                      }
                    };
                  }
                  function createStream$1(name, mixin2) {
                    var S2 = createConstructor$1(Stream, name);
                    inherit(S2, Stream, createClassMethods$1(Stream), mixin2);
                    return S2;
                  }
                  function createProperty$1(name, mixin2) {
                    var P2 = createConstructor$1(Property, name);
                    inherit(P2, Property, createClassMethods$1(Property), mixin2);
                    return P2;
                  }
                  var mixin$26 = {
                    _handlePrimaryValue: function(x2) {
                      if (this._lastSecondary !== NOTHING && this._lastSecondary) {
                        this._emitValue(x2);
                      }
                    },
                    _handleSecondaryEnd: function() {
                      if (this._lastSecondary === NOTHING || !this._lastSecondary) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$34 = createStream$1("filterBy", mixin$26);
                  var P$29 = createProperty$1("filterBy", mixin$26);
                  function filterBy(primary, secondary) {
                    return new (primary._ofSameType(S$34, P$29))(primary, secondary);
                  }
                  var id2 = function(_, x2) {
                    return x2;
                  };
                  function sampledBy(passive, active, combinator) {
                    var _combinator = combinator ? function(a, b) {
                      return combinator(b, a);
                    } : id2;
                    return combine([active], [passive], _combinator).setName(passive, "sampledBy");
                  }
                  var mixin$27 = {
                    _handlePrimaryValue: function(x2) {
                      if (this._lastSecondary !== NOTHING) {
                        this._emitValue(x2);
                      }
                    },
                    _handleSecondaryEnd: function() {
                      if (this._lastSecondary === NOTHING) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$35 = createStream$1("skipUntilBy", mixin$27);
                  var P$30 = createProperty$1("skipUntilBy", mixin$27);
                  function skipUntilBy(primary, secondary) {
                    return new (primary._ofSameType(S$35, P$30))(primary, secondary);
                  }
                  var mixin$28 = {
                    _handleSecondaryValue: function() {
                      this._emitEnd();
                    }
                  };
                  var S$36 = createStream$1("takeUntilBy", mixin$28);
                  var P$31 = createProperty$1("takeUntilBy", mixin$28);
                  function takeUntilBy(primary, secondary) {
                    return new (primary._ofSameType(S$36, P$31))(primary, secondary);
                  }
                  var mixin$29 = {
                    _init: function() {
                      var _ref = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, _ref$flushOnEnd = _ref.flushOnEnd, flushOnEnd = _ref$flushOnEnd === void 0 ? true : _ref$flushOnEnd;
                      this._buff = [];
                      this._flushOnEnd = flushOnEnd;
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handlePrimaryEnd: function() {
                      if (this._flushOnEnd) {
                        this._flush();
                      }
                      this._emitEnd();
                    },
                    _onActivation: function() {
                      this._primary.onAny(this._$handlePrimaryAny);
                      if (this._alive && this._secondary !== null) {
                        this._secondary.onAny(this._$handleSecondaryAny);
                      }
                    },
                    _handlePrimaryValue: function(x2) {
                      this._buff.push(x2);
                    },
                    _handleSecondaryValue: function() {
                      this._flush();
                    },
                    _handleSecondaryEnd: function() {
                      if (!this._flushOnEnd) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$37 = createStream$1("bufferBy", mixin$29);
                  var P$32 = createProperty$1("bufferBy", mixin$29);
                  function bufferBy(primary, secondary, options) {
                    return new (primary._ofSameType(S$37, P$32))(primary, secondary, options);
                  }
                  var mixin$30 = {
                    _init: function() {
                      var _ref = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, _ref$flushOnEnd = _ref.flushOnEnd, flushOnEnd = _ref$flushOnEnd === void 0 ? true : _ref$flushOnEnd, _ref$flushOnChange = _ref.flushOnChange, flushOnChange = _ref$flushOnChange === void 0 ? false : _ref$flushOnChange;
                      this._buff = [];
                      this._flushOnEnd = flushOnEnd;
                      this._flushOnChange = flushOnChange;
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handlePrimaryEnd: function() {
                      if (this._flushOnEnd) {
                        this._flush();
                      }
                      this._emitEnd();
                    },
                    _handlePrimaryValue: function(x2) {
                      this._buff.push(x2);
                      if (this._lastSecondary !== NOTHING && !this._lastSecondary) {
                        this._flush();
                      }
                    },
                    _handleSecondaryEnd: function() {
                      if (!this._flushOnEnd && (this._lastSecondary === NOTHING || this._lastSecondary)) {
                        this._emitEnd();
                      }
                    },
                    _handleSecondaryValue: function(x2) {
                      if (this._flushOnChange && !x2) {
                        this._flush();
                      }
                      this._lastSecondary = x2;
                    }
                  };
                  var S$38 = createStream$1("bufferWhileBy", mixin$30);
                  var P$33 = createProperty$1("bufferWhileBy", mixin$30);
                  function bufferWhileBy(primary, secondary, options) {
                    return new (primary._ofSameType(S$38, P$33))(primary, secondary, options);
                  }
                  var f = function() {
                    return false;
                  };
                  var t2 = function() {
                    return true;
                  };
                  function awaiting(a, b) {
                    var result2 = merge([map$1(a, t2), map$1(b, f)]);
                    result2 = skipDuplicates(result2);
                    result2 = toProperty(result2, f);
                    return result2.setName(a, "awaiting");
                  }
                  var mixin$31 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x2) {
                      var fn = this._fn;
                      var result2 = fn(x2);
                      if (result2.convert) {
                        this._emitError(result2.error);
                      } else {
                        this._emitValue(x2);
                      }
                    }
                  };
                  var S$39 = createStream("valuesToErrors", mixin$31);
                  var P$34 = createProperty("valuesToErrors", mixin$31);
                  var defFn = function(x2) {
                    return { convert: true, error: x2 };
                  };
                  function valuesToErrors(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : defFn;
                    return new (obs._ofSameType(S$39, P$34))(obs, { fn });
                  }
                  var mixin$32 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleError: function(x2) {
                      var fn = this._fn;
                      var result2 = fn(x2);
                      if (result2.convert) {
                        this._emitValue(result2.value);
                      } else {
                        this._emitError(x2);
                      }
                    }
                  };
                  var S$40 = createStream("errorsToValues", mixin$32);
                  var P$35 = createProperty("errorsToValues", mixin$32);
                  var defFn$1 = function(x2) {
                    return { convert: true, value: x2 };
                  };
                  function errorsToValues(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : defFn$1;
                    return new (obs._ofSameType(S$40, P$35))(obs, { fn });
                  }
                  var mixin$33 = {
                    _handleError: function(x2) {
                      this._emitError(x2);
                      this._emitEnd();
                    }
                  };
                  var S$41 = createStream("endOnError", mixin$33);
                  var P$36 = createProperty("endOnError", mixin$33);
                  function endOnError(obs) {
                    return new (obs._ofSameType(S$41, P$36))(obs);
                  }
                  Observable.prototype.toProperty = function(fn) {
                    return toProperty(this, fn);
                  };
                  Observable.prototype.changes = function() {
                    return changes(this);
                  };
                  Observable.prototype.toPromise = function(Promise2) {
                    return toPromise(this, Promise2);
                  };
                  Observable.prototype.toESObservable = toESObservable;
                  Observable.prototype[$$observable] = toESObservable;
                  Observable.prototype.map = function(fn) {
                    return map$1(this, fn);
                  };
                  Observable.prototype.filter = function(fn) {
                    return filter2(this, fn);
                  };
                  Observable.prototype.take = function(n) {
                    return take(this, n);
                  };
                  Observable.prototype.takeErrors = function(n) {
                    return takeErrors(this, n);
                  };
                  Observable.prototype.takeWhile = function(fn) {
                    return takeWhile(this, fn);
                  };
                  Observable.prototype.last = function() {
                    return last2(this);
                  };
                  Observable.prototype.skip = function(n) {
                    return skip(this, n);
                  };
                  Observable.prototype.skipWhile = function(fn) {
                    return skipWhile(this, fn);
                  };
                  Observable.prototype.skipDuplicates = function(fn) {
                    return skipDuplicates(this, fn);
                  };
                  Observable.prototype.diff = function(fn, seed) {
                    return diff(this, fn, seed);
                  };
                  Observable.prototype.scan = function(fn, seed) {
                    return scan(this, fn, seed);
                  };
                  Observable.prototype.flatten = function(fn) {
                    return flatten2(this, fn);
                  };
                  Observable.prototype.delay = function(wait) {
                    return delay(this, wait);
                  };
                  Observable.prototype.throttle = function(wait, options) {
                    return throttle(this, wait, options);
                  };
                  Observable.prototype.debounce = function(wait, options) {
                    return debounce(this, wait, options);
                  };
                  Observable.prototype.mapErrors = function(fn) {
                    return mapErrors(this, fn);
                  };
                  Observable.prototype.filterErrors = function(fn) {
                    return filterErrors(this, fn);
                  };
                  Observable.prototype.ignoreValues = function() {
                    return ignoreValues(this);
                  };
                  Observable.prototype.ignoreErrors = function() {
                    return ignoreErrors(this);
                  };
                  Observable.prototype.ignoreEnd = function() {
                    return ignoreEnd(this);
                  };
                  Observable.prototype.beforeEnd = function(fn) {
                    return beforeEnd(this, fn);
                  };
                  Observable.prototype.slidingWindow = function(max, min) {
                    return slidingWindow(this, max, min);
                  };
                  Observable.prototype.bufferWhile = function(fn, options) {
                    return bufferWhile(this, fn, options);
                  };
                  Observable.prototype.bufferWithCount = function(count, options) {
                    return bufferWhile$1(this, count, options);
                  };
                  Observable.prototype.bufferWithTimeOrCount = function(wait, count, options) {
                    return bufferWithTimeOrCount(this, wait, count, options);
                  };
                  Observable.prototype.transduce = function(transducer) {
                    return transduce(this, transducer);
                  };
                  Observable.prototype.withHandler = function(fn) {
                    return withHandler(this, fn);
                  };
                  Observable.prototype.thru = function(fn) {
                    return fn(this);
                  };
                  Observable.prototype.combine = function(other, combinator) {
                    return combine([this, other], combinator);
                  };
                  Observable.prototype.zip = function(other, combinator) {
                    return zip([this, other], combinator);
                  };
                  Observable.prototype.merge = function(other) {
                    return merge([this, other]);
                  };
                  Observable.prototype.concat = function(other) {
                    return concat$1([this, other]);
                  };
                  var pool = function() {
                    return new Pool();
                  };
                  Observable.prototype.flatMap = function(fn) {
                    return new FlatMap(this, fn).setName(this, "flatMap");
                  };
                  Observable.prototype.flatMapLatest = function(fn) {
                    return new FlatMap(this, fn, { concurLim: 1, drop: "old" }).setName(this, "flatMapLatest");
                  };
                  Observable.prototype.flatMapFirst = function(fn) {
                    return new FlatMap(this, fn, { concurLim: 1 }).setName(this, "flatMapFirst");
                  };
                  Observable.prototype.flatMapConcat = function(fn) {
                    return new FlatMap(this, fn, { queueLim: -1, concurLim: 1 }).setName(this, "flatMapConcat");
                  };
                  Observable.prototype.flatMapConcurLimit = function(fn, limit) {
                    return new FlatMap(this, fn, { queueLim: -1, concurLim: limit }).setName(this, "flatMapConcurLimit");
                  };
                  Observable.prototype.flatMapErrors = function(fn) {
                    return new FlatMapErrors(this, fn).setName(this, "flatMapErrors");
                  };
                  Observable.prototype.filterBy = function(other) {
                    return filterBy(this, other);
                  };
                  Observable.prototype.sampledBy = function(other, combinator) {
                    return sampledBy(this, other, combinator);
                  };
                  Observable.prototype.skipUntilBy = function(other) {
                    return skipUntilBy(this, other);
                  };
                  Observable.prototype.takeUntilBy = function(other) {
                    return takeUntilBy(this, other);
                  };
                  Observable.prototype.bufferBy = function(other, options) {
                    return bufferBy(this, other, options);
                  };
                  Observable.prototype.bufferWhileBy = function(other, options) {
                    return bufferWhileBy(this, other, options);
                  };
                  var DEPRECATION_WARNINGS = true;
                  function dissableDeprecationWarnings() {
                    DEPRECATION_WARNINGS = false;
                  }
                  function warn(msg) {
                    if (DEPRECATION_WARNINGS && console && typeof console.warn === "function") {
                      var msg2 = "\nHere is an Error object for you containing the call stack:";
                      console.warn(msg, msg2, new Error());
                    }
                  }
                  Observable.prototype.awaiting = function(other) {
                    warn("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145");
                    return awaiting(this, other);
                  };
                  Observable.prototype.valuesToErrors = function(fn) {
                    warn("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149");
                    return valuesToErrors(this, fn);
                  };
                  Observable.prototype.errorsToValues = function(fn) {
                    warn("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149");
                    return errorsToValues(this, fn);
                  };
                  Observable.prototype.endOnError = function() {
                    warn("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150");
                    return endOnError(this);
                  };
                  var Kefir = {
                    Observable,
                    Stream,
                    Property,
                    never,
                    later,
                    interval,
                    sequentially,
                    fromPoll,
                    withInterval,
                    fromCallback,
                    fromNodeCallback,
                    fromEvents,
                    stream,
                    constant,
                    constantError,
                    fromPromise,
                    fromESObservable,
                    combine,
                    zip,
                    merge,
                    concat: concat$1,
                    Pool,
                    pool,
                    repeat,
                    staticLand
                  };
                  Kefir.Kefir = Kefir;
                  const __WEBPACK_DEFAULT_EXPORT__ = Kefir;
                })
              ),
              /***/
              4401: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _asap = _interopRequireDefault(__webpack_require__3(4622));
                  var CAPACITY = 1024;
                  var Scheduler = /* @__PURE__ */ (function() {
                    function Scheduler2() {
                      (0, _classCallCheck2.default)(this, Scheduler2);
                      (0, _defineProperty2.default)(this, "_queue", []);
                      (0, _defineProperty2.default)(this, "_isFlushing", false);
                      (0, _defineProperty2.default)(this, "_index", 0);
                    }
                    (0, _createClass2.default)(Scheduler2, [{
                      key: "schedule",
                      value: function schedule(cb) {
                        var _this = this;
                        this._queue.push(function() {
                          try {
                            cb();
                          } catch (e) {
                            setTimeout(function() {
                              throw e;
                            }, 0);
                          }
                        });
                        if (this._queue.length === 1) {
                          (0, _asap.default)(function() {
                            _this.flush();
                          });
                        }
                      }
                    }, {
                      key: "flush",
                      value: function flush() {
                        if (this._isFlushing) return;
                        this._isFlushing = true;
                        var queue = this._queue;
                        while (this._index < queue.length) {
                          var currentIndex = this._index;
                          this._index += 1;
                          queue[currentIndex].call();
                          if (this._index > CAPACITY) {
                            for (var scan = 0, newLength = queue.length - this._index; scan < newLength; scan++) {
                              queue[scan] = queue[scan + this._index];
                            }
                            queue.length -= this._index;
                            this._index = 0;
                          }
                        }
                        queue.length = 0;
                        this._index = 0;
                        this._isFlushing = false;
                      }
                    }]);
                    return Scheduler2;
                  })();
                  exports3["default"] = Scheduler;
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              3800: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = filter2;
                  var _ = _interopRequireDefault(__webpack_require__3(2436));
                  function filter2(liveSet, cb) {
                    return new _.default({
                      scheduler: liveSet.getScheduler(),
                      read: function read() {
                        var ret2 = /* @__PURE__ */ new Set();
                        liveSet.values().forEach(function(value) {
                          if (cb(value)) {
                            ret2.add(value);
                          }
                        });
                        return ret2;
                      },
                      listen: function listen(setValues, controller) {
                        var passedFilter = /* @__PURE__ */ new Set();
                        var sub = liveSet.subscribe({
                          start: function start() {
                            var initialValues = /* @__PURE__ */ new Set();
                            liveSet.values().forEach(function(value) {
                              if (cb(value)) {
                                passedFilter.add(value);
                                initialValues.add(value);
                              }
                            });
                            setValues(initialValues);
                          },
                          next: function next(changes) {
                            changes.forEach(function(change) {
                              if (change.type === "add") {
                                if (cb(change.value)) {
                                  passedFilter.add(change.value);
                                  controller.add(change.value);
                                }
                              } else if (change.type === "remove") {
                                if (passedFilter.has(change.value)) {
                                  passedFilter.delete(change.value);
                                  controller.remove(change.value);
                                }
                              }
                            });
                          },
                          error: function error(err) {
                            controller.error(err);
                          },
                          complete: function complete() {
                            controller.end();
                          }
                        });
                        return sub;
                      }
                    });
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              5145: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = flatMapR;
                  var _ = _interopRequireDefault(__webpack_require__3(2436));
                  function flatMapR(liveSet, cb) {
                    var isReading = false;
                    return new _.default({
                      scheduler: liveSet.getScheduler(),
                      read: function read() {
                        if (isReading) {
                          throw new Error("reading inactive recursively-flatMapped stream is not supported");
                        }
                        isReading = true;
                        var s = /* @__PURE__ */ new Set();
                        liveSet.values().forEach(function(value) {
                          var childSet = cb(value);
                          childSet.values().forEach(function(value2) {
                            s.add(value2);
                          });
                        });
                        isReading = false;
                        return s;
                      },
                      listen: function listen(setValues, controller) {
                        var mainSubCompleted = false;
                        var hasSubscribedToChildren = false;
                        var nextHasFired = false;
                        var childSetSubs = /* @__PURE__ */ new Map();
                        function childSetSubscribe(childSet) {
                          if (childSet.isEnded()) {
                            childSet.values().forEach(function(value) {
                              controller.add(value);
                            });
                          } else {
                            childSet.subscribe({
                              start: function start(sub) {
                                childSetSubs.set(childSet, sub);
                                childSet.values().forEach(function(value) {
                                  controller.add(value);
                                });
                              },
                              next: function next(changes) {
                                nextHasFired = true;
                                changes.forEach(function(change) {
                                  if (change.type === "add") {
                                    controller.add(change.value);
                                  } else if (change.type === "remove") {
                                    controller.remove(change.value);
                                  }
                                });
                              },
                              error: function error(err) {
                                controller.error(err);
                              },
                              complete: function complete() {
                                childSetSubs.delete(childSet);
                                if (mainSubCompleted && childSetSubs.size === 0) {
                                  controller.end();
                                }
                              }
                            });
                          }
                        }
                        setValues(/* @__PURE__ */ new Set());
                        var childSets = /* @__PURE__ */ new Map();
                        var mainSub = liveSet.subscribe({
                          start: function start() {
                            liveSet.values().forEach(function(value) {
                              var childSet = cb(value);
                              childSets.set(value, childSet);
                              childSetSubscribe(childSet);
                            });
                            hasSubscribedToChildren = true;
                          },
                          next: function next(changes) {
                            nextHasFired = true;
                            changes.forEach(function(change) {
                              if (change.type === "add") {
                                var childSet = cb(change.value);
                                childSets.set(change.value, childSet);
                                childSetSubscribe(childSet);
                              } else if (change.type === "remove") {
                                var _childSet = childSets.get(change.value);
                                if (!_childSet) throw new Error("removed value not in liveset");
                                _childSet.values().forEach(function(value) {
                                  controller.remove(value);
                                });
                                childSets.delete(change.value);
                                var childSetSub = childSetSubs.get(_childSet);
                                if (childSetSub) {
                                  childSetSub.unsubscribe();
                                  childSetSubs.delete(_childSet);
                                }
                              }
                            });
                          },
                          error: function error(err) {
                            controller.error(err);
                          },
                          complete: function complete() {
                            mainSubCompleted = true;
                            if (hasSubscribedToChildren && childSetSubs.size === 0) {
                              controller.end();
                            }
                          }
                        });
                        var isPullingChanges = false;
                        return {
                          unsubscribe: function unsubscribe() {
                            mainSub.unsubscribe();
                            childSetSubs.forEach(function(sub) {
                              sub.unsubscribe();
                            });
                            childSets.clear();
                            childSetSubs.clear();
                          },
                          pullChanges: function pullChanges() {
                            if (isPullingChanges) return;
                            isPullingChanges = true;
                            do {
                              nextHasFired = false;
                              mainSub.pullChanges();
                              childSetSubs.forEach(function(sub) {
                                sub.pullChanges();
                              });
                            } while (nextHasFired);
                            isPullingChanges = false;
                          }
                        };
                      }
                    });
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              2436: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _Scheduler = _interopRequireDefault(__webpack_require__3(4401));
                  var _symbolObservable = _interopRequireDefault(__webpack_require__3(8899));
                  var LiveSet = /* @__PURE__ */ (function() {
                    function LiveSet2(init) {
                      (0, _classCallCheck2.default)(this, LiveSet2);
                      (0, _defineProperty2.default)(this, "_init", void 0);
                      (0, _defineProperty2.default)(this, "_scheduler", void 0);
                      (0, _defineProperty2.default)(this, "_values", null);
                      (0, _defineProperty2.default)(this, "_mutableValues", false);
                      (0, _defineProperty2.default)(this, "_active", null);
                      (0, _defineProperty2.default)(this, "_inSubscriptionStart", false);
                      (0, _defineProperty2.default)(this, "_ended", false);
                      (0, _defineProperty2.default)(this, "_endedWithError", false);
                      (0, _defineProperty2.default)(this, "_error", null);
                      (0, _defineProperty2.default)(this, "_queuedCall", false);
                      (0, _defineProperty2.default)(this, "_changeQueue", []);
                      (0, _defineProperty2.default)(this, "_observers", []);
                      this._init = init;
                      this._scheduler = init.scheduler || LiveSet2.defaultScheduler;
                    }
                    (0, _createClass2.default)(LiveSet2, [{
                      key: "_queueChange",
                      value: function _queueChange(record) {
                        var _this = this;
                        if (record) {
                          this._changeQueue.push(record);
                        }
                        if (!this._queuedCall) {
                          this._queuedCall = true;
                          this._scheduler.schedule(function() {
                            _this._queuedCall = false;
                            var changes = _this._changeQueue;
                            _this._changeQueue = [];
                            var observersToCall;
                            var ended = _this._ended;
                            if (ended) {
                              observersToCall = _this._observers;
                              _this._observers = [];
                            } else {
                              observersToCall = _this._observers.slice();
                            }
                            observersToCall.forEach(function(record2) {
                              var observer = record2.observer, ignore = record2.ignore;
                              var observerNext = observer.next;
                              if (observerNext) {
                                if (ignore === 0) {
                                  observerNext.call(observer, changes);
                                } else {
                                  record2.ignore = 0;
                                  var changesToDeliver = changes.slice(ignore);
                                  if (changesToDeliver.length) {
                                    observerNext.call(observer, changesToDeliver);
                                  }
                                }
                              }
                              if (ended) {
                                if (_this._endedWithError) {
                                  if (observer.error) observer.error(_this._error);
                                } else {
                                  if (observer.complete) observer.complete();
                                }
                              }
                            });
                          });
                        }
                      }
                    }, {
                      key: "_deactivate",
                      value: function _deactivate() {
                        if (!this._active) throw new Error("already inactive");
                        var listenHandler = this._active.listenHandler;
                        this._active = null;
                        if (listenHandler) {
                          listenHandler.unsubscribe();
                        }
                      }
                    }, {
                      key: "values",
                      value: function values() {
                        if (this._values) {
                          if (this._active && !this._inSubscriptionStart) {
                            var listenHandler = this._active.listenHandler;
                            if (listenHandler.pullChanges) {
                              listenHandler.pullChanges();
                            }
                          }
                          if (this._mutableValues) {
                            this._mutableValues = false;
                            makeSetImmutable(this._values);
                          }
                          return this._values;
                        } else {
                          if (this._active) {
                            throw new Error("tried to call values() on liveset during subscription before setValues was called");
                          }
                          var s = this._init.read();
                          makeSetImmutable(s);
                          return s;
                        }
                      }
                    }, {
                      key: "isEnded",
                      value: function isEnded() {
                        return this._ended;
                      }
                    }, {
                      key: "getScheduler",
                      value: function getScheduler() {
                        return this._scheduler;
                      }
                    }, {
                      key: "subscribe",
                      value: function subscribe(observerOrOnNext, onError, onComplete) {
                        var _this2 = this;
                        var liveSet = this;
                        var observer;
                        if (typeof observerOrOnNext === "function") {
                          observer = {
                            next: observerOrOnNext,
                            error: onError,
                            complete: onComplete
                          };
                        } else {
                          observer = observerOrOnNext;
                        }
                        observer;
                        if (this._ended) {
                          var _subscription = {
                            closed: false,
                            unsubscribe: function unsubscribe() {
                              _subscription.closed = true;
                            },
                            pullChanges: function pullChanges() {
                            }
                          };
                          if (observer.start) {
                            observer.start(_subscription);
                          }
                          if (!_subscription.closed) {
                            if (this._endedWithError) {
                              if (observer.error) {
                                observer.error(this._error);
                              }
                            } else {
                              if (observer.complete) {
                                observer.complete();
                              }
                            }
                          }
                          _subscription.closed = true;
                          return _subscription;
                        }
                        var observerRecord = {
                          observer,
                          ignore: this._changeQueue.length
                        };
                        var isStarting = true;
                        var unsubscribedInStart = false;
                        var subscription = {
                          /*:: closed: false&&` */
                          get closed() {
                            return !isStarting && liveSet._observers.indexOf(observerRecord) < 0;
                          },
                          unsubscribe: function unsubscribe() {
                            if (isStarting) {
                              unsubscribedInStart = true;
                              return;
                            }
                            var ix = _this2._observers.indexOf(observerRecord);
                            if (ix >= 0) {
                              _this2._observers.splice(ix, 1);
                              if (!_this2._ended && _this2._observers.length === 0) {
                                _this2._values = null;
                                _this2._deactivate();
                              }
                            }
                          },
                          pullChanges: function pullChanges() {
                            if (_this2._active && _this2._active.listenHandler && _this2._active.listenHandler.pullChanges) {
                              _this2._active.listenHandler.pullChanges();
                            }
                            var changeQueueLength = _this2._changeQueue.length;
                            var originalNext = observer.next;
                            if (changeQueueLength !== 0 && originalNext) {
                              var changesToDeliver = _this2._changeQueue.slice(observerRecord.ignore);
                              if (changesToDeliver.length !== 0) {
                                observerRecord.ignore = changeQueueLength;
                                originalNext.call(observer, changesToDeliver);
                              }
                            }
                          }
                        };
                        if (!this._active) {
                          var _controller2 = {
                            // Flow doesn't support getters and setters yet
                            /*:: closed: false&&` */
                            get closed() {
                              return !liveSet._active || liveSet._active.controller !== this;
                            },
                            add: function add(value) {
                              var values = _this2._values;
                              if (!values) throw new Error("setValue must be called before controller is used");
                              if (!_this2._ended && !values.has(value)) {
                                if (!_this2._mutableValues) {
                                  _this2._values = values = new Set(values);
                                  _this2._mutableValues = true;
                                }
                                values.add(value);
                                _this2._queueChange({
                                  type: "add",
                                  value
                                });
                              }
                            },
                            remove: function remove(value) {
                              var values = _this2._values;
                              if (!values) throw new Error("setValue must be called before controller is used");
                              if (!_this2._ended && values.has(value)) {
                                if (!_this2._mutableValues) {
                                  _this2._values = values = new Set(values);
                                  _this2._mutableValues = true;
                                }
                                values.delete(value);
                                _this2._queueChange({
                                  type: "remove",
                                  value
                                });
                              }
                            },
                            error: function error(err) {
                              if (_this2._ended) return;
                              _this2._ended = true;
                              _this2._endedWithError = true;
                              _this2._error = err;
                              _this2._queueChange();
                              _this2._deactivate();
                            },
                            end: function end() {
                              if (_this2._ended) return;
                              _this2._ended = true;
                              _this2._queueChange();
                              _this2._deactivate();
                            }
                          };
                          var active = this._active = {
                            controller: _controller2,
                            listenHandler: {
                              unsubscribe: function unsubscribe() {
                              }
                            }
                          };
                          var setValuesError = function setValuesError2() {
                            throw new Error("setValues must be called once during listen");
                          };
                          var _setValues2 = function _setValues(values) {
                            _setValues2 = setValuesError;
                            makeSetImmutable(values);
                            _this2._values = values;
                            _this2._mutableValues = false;
                          };
                          var listenHandlerOrFunction = this._init.listen(function(values) {
                            return _setValues2(values);
                          }, _controller2);
                          if (!this._values) {
                            setValuesError();
                          }
                          if (typeof listenHandlerOrFunction === "function") {
                            active.listenHandler = {
                              unsubscribe: listenHandlerOrFunction
                            };
                          } else if (listenHandlerOrFunction != null && typeof listenHandlerOrFunction.unsubscribe === "function") {
                            active.listenHandler = listenHandlerOrFunction;
                          } else if (listenHandlerOrFunction != null) {
                            throw new TypeError("listen must return object with unsubscribe method, a function, or null");
                          }
                          if (_controller2.closed) {
                            this._active = active;
                            this._deactivate();
                          }
                        }
                        if (observer.start) {
                          this._inSubscriptionStart = true;
                          observer.start(subscription);
                          this._inSubscriptionStart = false;
                        }
                        isStarting = false;
                        observerRecord.ignore = this._changeQueue.length;
                        if (!unsubscribedInStart) {
                          this._observers.push(observerRecord);
                        }
                        return subscription;
                      }
                    }], [{
                      key: "active",
                      value: function active(initialValues, options) {
                        var set = initialValues || /* @__PURE__ */ new Set();
                        var controller;
                        var liveSet = new LiveSet2({
                          scheduler: options ? options.scheduler : void 0,
                          read: function read() {
                            return set;
                          },
                          listen: function listen(setValues, _controller) {
                            setValues(set);
                            controller = _controller;
                          }
                        });
                        liveSet.subscribe({});
                        return {
                          liveSet,
                          controller
                        };
                      }
                    }, {
                      key: "constant",
                      value: function constant(values, options) {
                        makeSetImmutable(values);
                        var shouldNotHappen = function shouldNotHappen2() {
                          throw new Error("Should not happen");
                        };
                        var ls = new LiveSet2({
                          scheduler: options ? options.scheduler : void 0,
                          read: shouldNotHappen,
                          listen: shouldNotHappen
                        });
                        ls._ended = true;
                        ls._values = values;
                        ls._mutableValues = false;
                        return ls;
                      }
                    }]);
                    return LiveSet2;
                  })();
                  exports3["default"] = LiveSet;
                  (0, _defineProperty2.default)(LiveSet, "defaultScheduler", new _Scheduler.default());
                  LiveSet.prototype[_symbolObservable.default] = function() {
                    return this;
                  };
                  function makeSetImmutable(set) {
                    if (false) {
                    }
                  }
                  function readOnly() {
                    throw new Error("Do not modify Set passed to or from LiveSet: Set is read-only in development");
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              9976: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = merge;
                  var _ = _interopRequireDefault(__webpack_require__3(2436));
                  function merge(liveSets) {
                    return new _.default({
                      scheduler: liveSets[0] ? liveSets[0].getScheduler() : void 0,
                      read: function read() {
                        var s = /* @__PURE__ */ new Set();
                        liveSets.forEach(function(liveSet) {
                          liveSet.values().forEach(function(value) {
                            s.add(value);
                          });
                        });
                        return s;
                      },
                      listen: function listen(setValues, controller) {
                        var initialValues = /* @__PURE__ */ new Set();
                        var subs = /* @__PURE__ */ new Set();
                        var doneSubscribing = false;
                        liveSets.forEach(function(liveSet) {
                          var sub;
                          liveSet.subscribe({
                            start: function start(_sub) {
                              sub = _sub;
                              subs.add(sub);
                              liveSet.values().forEach(function(value) {
                                initialValues.add(value);
                              });
                            },
                            next: function next(changes) {
                              changes.forEach(function(change) {
                                if (change.type === "add") {
                                  controller.add(change.value);
                                } else if (change.type === "remove") {
                                  controller.remove(change.value);
                                }
                              });
                            },
                            error: function error(err) {
                              controller.error(err);
                            },
                            complete: function complete() {
                              subs.delete(sub);
                              if (doneSubscribing && subs.size === 0) {
                                controller.end();
                              }
                            }
                          });
                        });
                        setValues(initialValues);
                        doneSubscribing = true;
                        if (subs.size === 0) {
                          controller.end();
                        }
                        return {
                          unsubscribe: function unsubscribe() {
                            subs.forEach(function(sub) {
                              sub.unsubscribe();
                            });
                          },
                          pullChanges: function pullChanges() {
                            subs.forEach(function(sub) {
                              sub.pullChanges();
                            });
                          }
                        };
                      }
                    });
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              3507: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = toValueObservable;
                  var _ = _interopRequireDefault(__webpack_require__3(2436));
                  var _zenObservable = _interopRequireDefault(__webpack_require__3(1442));
                  function toValueObservable(liveSet) {
                    return new _zenObservable.default(function(observer) {
                      var resolvers = /* @__PURE__ */ new Map();
                      function addedItem(value) {
                        var resolve;
                        var removal = new Promise(function(_resolve) {
                          resolve = _resolve;
                        });
                        resolvers.set(value, resolve);
                        var valueWithRemoval = {
                          value,
                          removal
                        };
                        observer.next(valueWithRemoval);
                      }
                      function removedItem(value) {
                        var resolver = resolvers.get(value);
                        if (!resolver) throw new Error("Resolver not found in map for value");
                        resolvers.delete(value);
                        resolver();
                      }
                      var sub = liveSet.subscribe({
                        start: function start(sub2) {
                          var _iteratorNormalCompletion = true;
                          var _didIteratorError = false;
                          var _iteratorError = void 0;
                          try {
                            for (var _iterator = liveSet.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                              var value = _step.value;
                              if (sub2.closed) break;
                              addedItem(value);
                            }
                          } catch (err) {
                            _didIteratorError = true;
                            _iteratorError = err;
                          } finally {
                            try {
                              if (!_iteratorNormalCompletion && _iterator.return != null) {
                                _iterator.return();
                              }
                            } finally {
                              if (_didIteratorError) {
                                throw _iteratorError;
                              }
                            }
                          }
                        },
                        next: function next(changes) {
                          changes.forEach(function(change) {
                            if (change.type === "add") {
                              addedItem(change.value);
                            } else if (change.type === "remove") {
                              removedItem(change.value);
                            }
                          });
                        },
                        error: function error(err) {
                          observer.error(err);
                        },
                        complete: function complete() {
                          observer.complete();
                        }
                      });
                      return function() {
                        sub.unsubscribe();
                        resolvers.forEach(function(resolver) {
                          resolver();
                        });
                      };
                    });
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              1365: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = transduce;
                  var _ = _interopRequireDefault(__webpack_require__3(2436));
                  var arrayXf = {
                    "@@transducer/init": function transducerInit() {
                      return [];
                    },
                    "@@transducer/step": function transducerStep(res2, input) {
                      res2.push(input);
                      return res2;
                    },
                    "@@transducer/result": function transducerResult(input) {
                      return input;
                    }
                  };
                  function transduce(liveSet, transducer) {
                    function step(xform, inputValue) {
                      var addsComplete = false;
                      var outputValues;
                      var ret2 = xform["@@transducer/step"]([], inputValue);
                      if (ret2 && ret2["@@transducer/reduced"]) {
                        outputValues = ret2["@@transducer/value"];
                        addsComplete = true;
                      } else {
                        outputValues = ret2;
                      }
                      return {
                        outputValues,
                        addsComplete
                      };
                    }
                    function valuesAndContext() {
                      var inputToOutputValues = /* @__PURE__ */ new Map();
                      var xform = transducer(arrayXf);
                      var addsComplete = false;
                      var values = new Set(xform["@@transducer/init"]());
                      var _iteratorNormalCompletion = true;
                      var _didIteratorError = false;
                      var _iteratorError = void 0;
                      try {
                        for (var _iterator = liveSet.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                          var value = _step.value;
                          var _step2 = step(xform, value), outputValues = _step2.outputValues, _addsComplete = _step2.addsComplete;
                          inputToOutputValues.set(value, outputValues);
                          for (var i2 = 0, len = outputValues.length; i2 < len; i2++) {
                            values.add(outputValues[i2]);
                          }
                          if (_addsComplete) {
                            addsComplete = true;
                            xform["@@transducer/result"]([]).forEach(function(value2) {
                              values.add(value2);
                            });
                            break;
                          }
                        }
                      } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                      } finally {
                        try {
                          if (!_iteratorNormalCompletion && _iterator.return != null) {
                            _iterator.return();
                          }
                        } finally {
                          if (_didIteratorError) {
                            throw _iteratorError;
                          }
                        }
                      }
                      return {
                        values,
                        inputToOutputValues,
                        xform,
                        addsComplete
                      };
                    }
                    return new _.default({
                      scheduler: liveSet.getScheduler(),
                      read: function read() {
                        return valuesAndContext().values;
                      },
                      listen: function listen(setValues, controller) {
                        var inputToOutputValues, xform, addsComplete;
                        var sub = liveSet.subscribe({
                          start: function start() {
                            var ret2 = valuesAndContext();
                            setValues(ret2.values);
                            inputToOutputValues = ret2.inputToOutputValues;
                            xform = ret2.xform;
                            addsComplete = ret2.addsComplete;
                          },
                          next: function next(changes) {
                            for (var i2 = 0, len = changes.length; i2 < len; i2++) {
                              var change = changes[i2];
                              if (change.type === "add") {
                                if (!addsComplete) {
                                  var value = change.value;
                                  var _step3 = step(xform, value), outputValues = _step3.outputValues, _addsComplete = _step3.addsComplete;
                                  inputToOutputValues.set(value, outputValues);
                                  for (var _i = 0, _len = outputValues.length; _i < _len; _i++) {
                                    controller.add(outputValues[_i]);
                                  }
                                  if (_addsComplete) {
                                    addsComplete = true;
                                    xform["@@transducer/result"]([]).forEach(function(endValue) {
                                      controller.add(endValue);
                                    });
                                  }
                                }
                              } else if (change.type === "remove") {
                                var _value = change.value;
                                var list = inputToOutputValues.get(_value);
                                if (!list) throw new Error("value had not been added");
                                list.forEach(function(transformedValue) {
                                  controller.remove(transformedValue);
                                });
                                inputToOutputValues.delete(_value);
                              }
                            }
                          },
                          error: function error(err) {
                            controller.error(err);
                          },
                          complete: function complete() {
                            controller.end();
                          }
                        });
                        return sub;
                      }
                    });
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              7230: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getNative = __webpack_require__3(3984), root = __webpack_require__3(9107);
                  var DataView = getNative(root, "DataView");
                  module3.exports = DataView;
                })
              ),
              /***/
              3435: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var hashClear = __webpack_require__3(6890), hashDelete = __webpack_require__3(9484), hashGet = __webpack_require__3(7215), hashHas = __webpack_require__3(7811), hashSet = __webpack_require__3(747);
                  function Hash(entries) {
                    var index = -1, length = entries == null ? 0 : entries.length;
                    this.clear();
                    while (++index < length) {
                      var entry = entries[index];
                      this.set(entry[0], entry[1]);
                    }
                  }
                  Hash.prototype.clear = hashClear;
                  Hash.prototype["delete"] = hashDelete;
                  Hash.prototype.get = hashGet;
                  Hash.prototype.has = hashHas;
                  Hash.prototype.set = hashSet;
                  module3.exports = Hash;
                })
              ),
              /***/
              5217: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var listCacheClear = __webpack_require__3(4412), listCacheDelete = __webpack_require__3(8522), listCacheGet = __webpack_require__3(469), listCacheHas = __webpack_require__3(1161), listCacheSet = __webpack_require__3(1441);
                  function ListCache(entries) {
                    var index = -1, length = entries == null ? 0 : entries.length;
                    this.clear();
                    while (++index < length) {
                      var entry = entries[index];
                      this.set(entry[0], entry[1]);
                    }
                  }
                  ListCache.prototype.clear = listCacheClear;
                  ListCache.prototype["delete"] = listCacheDelete;
                  ListCache.prototype.get = listCacheGet;
                  ListCache.prototype.has = listCacheHas;
                  ListCache.prototype.set = listCacheSet;
                  module3.exports = ListCache;
                })
              ),
              /***/
              5661: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getNative = __webpack_require__3(3984), root = __webpack_require__3(9107);
                  var Map2 = getNative(root, "Map");
                  module3.exports = Map2;
                })
              ),
              /***/
              3287: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var mapCacheClear = __webpack_require__3(8206), mapCacheDelete = __webpack_require__3(9768), mapCacheGet = __webpack_require__3(6827), mapCacheHas = __webpack_require__3(663), mapCacheSet = __webpack_require__3(5135);
                  function MapCache(entries) {
                    var index = -1, length = entries == null ? 0 : entries.length;
                    this.clear();
                    while (++index < length) {
                      var entry = entries[index];
                      this.set(entry[0], entry[1]);
                    }
                  }
                  MapCache.prototype.clear = mapCacheClear;
                  MapCache.prototype["delete"] = mapCacheDelete;
                  MapCache.prototype.get = mapCacheGet;
                  MapCache.prototype.has = mapCacheHas;
                  MapCache.prototype.set = mapCacheSet;
                  module3.exports = MapCache;
                })
              ),
              /***/
              9102: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getNative = __webpack_require__3(3984), root = __webpack_require__3(9107);
                  var Promise2 = getNative(root, "Promise");
                  module3.exports = Promise2;
                })
              ),
              /***/
              5963: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getNative = __webpack_require__3(3984), root = __webpack_require__3(9107);
                  var Set2 = getNative(root, "Set");
                  module3.exports = Set2;
                })
              ),
              /***/
              1641: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var MapCache = __webpack_require__3(3287), setCacheAdd = __webpack_require__3(2486), setCacheHas = __webpack_require__3(9361);
                  function SetCache(values) {
                    var index = -1, length = values == null ? 0 : values.length;
                    this.__data__ = new MapCache();
                    while (++index < length) {
                      this.add(values[index]);
                    }
                  }
                  SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
                  SetCache.prototype.has = setCacheHas;
                  module3.exports = SetCache;
                })
              ),
              /***/
              6435: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var ListCache = __webpack_require__3(5217), stackClear = __webpack_require__3(8658), stackDelete = __webpack_require__3(3844), stackGet = __webpack_require__3(6503), stackHas = __webpack_require__3(1563), stackSet = __webpack_require__3(259);
                  function Stack(entries) {
                    var data = this.__data__ = new ListCache(entries);
                    this.size = data.size;
                  }
                  Stack.prototype.clear = stackClear;
                  Stack.prototype["delete"] = stackDelete;
                  Stack.prototype.get = stackGet;
                  Stack.prototype.has = stackHas;
                  Stack.prototype.set = stackSet;
                  module3.exports = Stack;
                })
              ),
              /***/
              6711: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var root = __webpack_require__3(9107);
                  var Symbol2 = root.Symbol;
                  module3.exports = Symbol2;
                })
              ),
              /***/
              9282: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var root = __webpack_require__3(9107);
                  var Uint8Array2 = root.Uint8Array;
                  module3.exports = Uint8Array2;
                })
              ),
              /***/
              2850: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getNative = __webpack_require__3(3984), root = __webpack_require__3(9107);
                  var WeakMap2 = getNative(root, "WeakMap");
                  module3.exports = WeakMap2;
                })
              ),
              /***/
              807: (
                /***/
                ((module3) => {
                  function apply(func, thisArg, args) {
                    switch (args.length) {
                      case 0:
                        return func.call(thisArg);
                      case 1:
                        return func.call(thisArg, args[0]);
                      case 2:
                        return func.call(thisArg, args[0], args[1]);
                      case 3:
                        return func.call(thisArg, args[0], args[1], args[2]);
                    }
                    return func.apply(thisArg, args);
                  }
                  module3.exports = apply;
                })
              ),
              /***/
              3928: (
                /***/
                ((module3) => {
                  function arrayFilter(array, predicate) {
                    var index = -1, length = array == null ? 0 : array.length, resIndex = 0, result = [];
                    while (++index < length) {
                      var value = array[index];
                      if (predicate(value, index, array)) {
                        result[resIndex++] = value;
                      }
                    }
                    return result;
                  }
                  module3.exports = arrayFilter;
                })
              ),
              /***/
              3271: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIndexOf = __webpack_require__3(8357);
                  function arrayIncludes(array, value) {
                    var length = array == null ? 0 : array.length;
                    return !!length && baseIndexOf(array, value, 0) > -1;
                  }
                  module3.exports = arrayIncludes;
                })
              ),
              /***/
              7599: (
                /***/
                ((module3) => {
                  function arrayIncludesWith(array, value, comparator) {
                    var index = -1, length = array == null ? 0 : array.length;
                    while (++index < length) {
                      if (comparator(value, array[index])) {
                        return true;
                      }
                    }
                    return false;
                  }
                  module3.exports = arrayIncludesWith;
                })
              ),
              /***/
              7137: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseTimes = __webpack_require__3(5410), isArguments = __webpack_require__3(2382), isArray = __webpack_require__3(2003), isBuffer = __webpack_require__3(1262), isIndex = __webpack_require__3(2615), isTypedArray = __webpack_require__3(9221);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function arrayLikeKeys(value, inherited) {
                    var isArr = isArray(value), isArg = !isArr && isArguments(value), isBuff = !isArr && !isArg && isBuffer(value), isType = !isArr && !isArg && !isBuff && isTypedArray(value), skipIndexes = isArr || isArg || isBuff || isType, result = skipIndexes ? baseTimes(value.length, String) : [], length = result.length;
                    for (var key in value) {
                      if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && // Safari 9 has enumerable `arguments.length` in strict mode.
                      (key == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
                      isBuff && (key == "offset" || key == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
                      isType && (key == "buffer" || key == "byteLength" || key == "byteOffset") || // Skip index properties.
                      isIndex(key, length)))) {
                        result.push(key);
                      }
                    }
                    return result;
                  }
                  module3.exports = arrayLikeKeys;
                })
              ),
              /***/
              14: (
                /***/
                ((module3) => {
                  function arrayMap(array, iteratee) {
                    var index = -1, length = array == null ? 0 : array.length, result = Array(length);
                    while (++index < length) {
                      result[index] = iteratee(array[index], index, array);
                    }
                    return result;
                  }
                  module3.exports = arrayMap;
                })
              ),
              /***/
              562: (
                /***/
                ((module3) => {
                  function arrayPush(array, values) {
                    var index = -1, length = values.length, offset = array.length;
                    while (++index < length) {
                      array[offset + index] = values[index];
                    }
                    return array;
                  }
                  module3.exports = arrayPush;
                })
              ),
              /***/
              9854: (
                /***/
                ((module3) => {
                  function arraySome(array, predicate) {
                    var index = -1, length = array == null ? 0 : array.length;
                    while (++index < length) {
                      if (predicate(array[index], index, array)) {
                        return true;
                      }
                    }
                    return false;
                  }
                  module3.exports = arraySome;
                })
              ),
              /***/
              4767: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var eq = __webpack_require__3(8330);
                  function assocIndexOf(array, key) {
                    var length = array.length;
                    while (length--) {
                      if (eq(array[length][0], key)) {
                        return length;
                      }
                    }
                    return -1;
                  }
                  module3.exports = assocIndexOf;
                })
              ),
              /***/
              9631: (
                /***/
                ((module3) => {
                  function baseClamp(number, lower, upper) {
                    if (number === number) {
                      if (upper !== void 0) {
                        number = number <= upper ? number : upper;
                      }
                      if (lower !== void 0) {
                        number = number >= lower ? number : lower;
                      }
                    }
                    return number;
                  }
                  module3.exports = baseClamp;
                })
              ),
              /***/
              7587: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseForOwn = __webpack_require__3(427), createBaseEach = __webpack_require__3(3679);
                  var baseEach = createBaseEach(baseForOwn);
                  module3.exports = baseEach;
                })
              ),
              /***/
              6917: (
                /***/
                ((module3) => {
                  function baseFindIndex(array, predicate, fromIndex, fromRight) {
                    var length = array.length, index = fromIndex + (fromRight ? 1 : -1);
                    while (fromRight ? index-- : ++index < length) {
                      if (predicate(array[index], index, array)) {
                        return index;
                      }
                    }
                    return -1;
                  }
                  module3.exports = baseFindIndex;
                })
              ),
              /***/
              4958: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayPush = __webpack_require__3(562), isFlattenable = __webpack_require__3(4385);
                  function baseFlatten(array, depth, predicate, isStrict, result) {
                    var index = -1, length = array.length;
                    predicate || (predicate = isFlattenable);
                    result || (result = []);
                    while (++index < length) {
                      var value = array[index];
                      if (depth > 0 && predicate(value)) {
                        if (depth > 1) {
                          baseFlatten(value, depth - 1, predicate, isStrict, result);
                        } else {
                          arrayPush(result, value);
                        }
                      } else if (!isStrict) {
                        result[result.length] = value;
                      }
                    }
                    return result;
                  }
                  module3.exports = baseFlatten;
                })
              ),
              /***/
              1595: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var createBaseFor = __webpack_require__3(951);
                  var baseFor = createBaseFor();
                  module3.exports = baseFor;
                })
              ),
              /***/
              427: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseFor = __webpack_require__3(1595), keys = __webpack_require__3(5304);
                  function baseForOwn(object, iteratee) {
                    return object && baseFor(object, iteratee, keys);
                  }
                  module3.exports = baseForOwn;
                })
              ),
              /***/
              384: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var castPath = __webpack_require__3(4275), toKey = __webpack_require__3(8059);
                  function baseGet(object, path) {
                    path = castPath(path, object);
                    var index = 0, length = path.length;
                    while (object != null && index < length) {
                      object = object[toKey(path[index++])];
                    }
                    return index && index == length ? object : void 0;
                  }
                  module3.exports = baseGet;
                })
              ),
              /***/
              8821: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayPush = __webpack_require__3(562), isArray = __webpack_require__3(2003);
                  function baseGetAllKeys(object, keysFunc, symbolsFunc) {
                    var result = keysFunc(object);
                    return isArray(object) ? result : arrayPush(result, symbolsFunc(object));
                  }
                  module3.exports = baseGetAllKeys;
                })
              ),
              /***/
              6522: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Symbol2 = __webpack_require__3(6711), getRawTag = __webpack_require__3(905), objectToString = __webpack_require__3(2588);
                  var nullTag = "[object Null]", undefinedTag = "[object Undefined]";
                  var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
                  function baseGetTag(value) {
                    if (value == null) {
                      return value === void 0 ? undefinedTag : nullTag;
                    }
                    return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
                  }
                  module3.exports = baseGetTag;
                })
              ),
              /***/
              6571: (
                /***/
                ((module3) => {
                  function baseHasIn(object, key) {
                    return object != null && key in Object(object);
                  }
                  module3.exports = baseHasIn;
                })
              ),
              /***/
              8357: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseFindIndex = __webpack_require__3(6917), baseIsNaN = __webpack_require__3(3001), strictIndexOf = __webpack_require__3(5957);
                  function baseIndexOf(array, value, fromIndex) {
                    return value === value ? strictIndexOf(array, value, fromIndex) : baseFindIndex(array, baseIsNaN, fromIndex);
                  }
                  module3.exports = baseIndexOf;
                })
              ),
              /***/
              739: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var SetCache = __webpack_require__3(1641), arrayIncludes = __webpack_require__3(3271), arrayIncludesWith = __webpack_require__3(7599), arrayMap = __webpack_require__3(14), baseUnary = __webpack_require__3(2347), cacheHas = __webpack_require__3(7585);
                  var nativeMin = Math.min;
                  function baseIntersection(arrays, iteratee, comparator) {
                    var includes = comparator ? arrayIncludesWith : arrayIncludes, length = arrays[0].length, othLength = arrays.length, othIndex = othLength, caches = Array(othLength), maxLength = Infinity, result = [];
                    while (othIndex--) {
                      var array = arrays[othIndex];
                      if (othIndex && iteratee) {
                        array = arrayMap(array, baseUnary(iteratee));
                      }
                      maxLength = nativeMin(array.length, maxLength);
                      caches[othIndex] = !comparator && (iteratee || length >= 120 && array.length >= 120) ? new SetCache(othIndex && array) : void 0;
                    }
                    array = arrays[0];
                    var index = -1, seen = caches[0];
                    outer:
                      while (++index < length && result.length < maxLength) {
                        var value = array[index], computed = iteratee ? iteratee(value) : value;
                        value = comparator || value !== 0 ? value : 0;
                        if (!(seen ? cacheHas(seen, computed) : includes(result, computed, comparator))) {
                          othIndex = othLength;
                          while (--othIndex) {
                            var cache = caches[othIndex];
                            if (!(cache ? cacheHas(cache, computed) : includes(arrays[othIndex], computed, comparator))) {
                              continue outer;
                            }
                          }
                          if (seen) {
                            seen.push(computed);
                          }
                          result.push(value);
                        }
                      }
                    return result;
                  }
                  module3.exports = baseIntersection;
                })
              ),
              /***/
              9593: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseForOwn = __webpack_require__3(427);
                  function baseInverter(object, setter, iteratee, accumulator) {
                    baseForOwn(object, function(value, key, object2) {
                      setter(accumulator, iteratee(value), key, object2);
                    });
                    return accumulator;
                  }
                  module3.exports = baseInverter;
                })
              ),
              /***/
              2744: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseGetTag = __webpack_require__3(6522), isObjectLike = __webpack_require__3(2620);
                  var argsTag = "[object Arguments]";
                  function baseIsArguments(value) {
                    return isObjectLike(value) && baseGetTag(value) == argsTag;
                  }
                  module3.exports = baseIsArguments;
                })
              ),
              /***/
              9336: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIsEqualDeep = __webpack_require__3(1894), isObjectLike = __webpack_require__3(2620);
                  function baseIsEqual(value, other, bitmask, customizer, stack) {
                    if (value === other) {
                      return true;
                    }
                    if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {
                      return value !== value && other !== other;
                    }
                    return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
                  }
                  module3.exports = baseIsEqual;
                })
              ),
              /***/
              1894: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Stack = __webpack_require__3(6435), equalArrays = __webpack_require__3(1505), equalByTag = __webpack_require__3(9620), equalObjects = __webpack_require__3(439), getTag = __webpack_require__3(695), isArray = __webpack_require__3(2003), isBuffer = __webpack_require__3(1262), isTypedArray = __webpack_require__3(9221);
                  var COMPARE_PARTIAL_FLAG = 1;
                  var argsTag = "[object Arguments]", arrayTag = "[object Array]", objectTag = "[object Object]";
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
                    var objIsArr = isArray(object), othIsArr = isArray(other), objTag = objIsArr ? arrayTag : getTag(object), othTag = othIsArr ? arrayTag : getTag(other);
                    objTag = objTag == argsTag ? objectTag : objTag;
                    othTag = othTag == argsTag ? objectTag : othTag;
                    var objIsObj = objTag == objectTag, othIsObj = othTag == objectTag, isSameTag = objTag == othTag;
                    if (isSameTag && isBuffer(object)) {
                      if (!isBuffer(other)) {
                        return false;
                      }
                      objIsArr = true;
                      objIsObj = false;
                    }
                    if (isSameTag && !objIsObj) {
                      stack || (stack = new Stack());
                      return objIsArr || isTypedArray(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
                    }
                    if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
                      var objIsWrapped = objIsObj && hasOwnProperty.call(object, "__wrapped__"), othIsWrapped = othIsObj && hasOwnProperty.call(other, "__wrapped__");
                      if (objIsWrapped || othIsWrapped) {
                        var objUnwrapped = objIsWrapped ? object.value() : object, othUnwrapped = othIsWrapped ? other.value() : other;
                        stack || (stack = new Stack());
                        return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
                      }
                    }
                    if (!isSameTag) {
                      return false;
                    }
                    stack || (stack = new Stack());
                    return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
                  }
                  module3.exports = baseIsEqualDeep;
                })
              ),
              /***/
              4253: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Stack = __webpack_require__3(6435), baseIsEqual = __webpack_require__3(9336);
                  var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
                  function baseIsMatch(object, source, matchData, customizer) {
                    var index = matchData.length, length = index, noCustomizer = !customizer;
                    if (object == null) {
                      return !length;
                    }
                    object = Object(object);
                    while (index--) {
                      var data = matchData[index];
                      if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {
                        return false;
                      }
                    }
                    while (++index < length) {
                      data = matchData[index];
                      var key = data[0], objValue = object[key], srcValue = data[1];
                      if (noCustomizer && data[2]) {
                        if (objValue === void 0 && !(key in object)) {
                          return false;
                        }
                      } else {
                        var stack = new Stack();
                        if (customizer) {
                          var result = customizer(objValue, srcValue, key, object, source, stack);
                        }
                        if (!(result === void 0 ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack) : result)) {
                          return false;
                        }
                      }
                    }
                    return true;
                  }
                  module3.exports = baseIsMatch;
                })
              ),
              /***/
              3001: (
                /***/
                ((module3) => {
                  function baseIsNaN(value) {
                    return value !== value;
                  }
                  module3.exports = baseIsNaN;
                })
              ),
              /***/
              2249: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isFunction = __webpack_require__3(8148), isMasked = __webpack_require__3(1398), isObject = __webpack_require__3(5603), toSource = __webpack_require__3(1543);
                  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
                  var reIsHostCtor = /^\[object .+?Constructor\]$/;
                  var funcProto = Function.prototype, objectProto = Object.prototype;
                  var funcToString = funcProto.toString;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var reIsNative = RegExp(
                    "^" + funcToString.call(hasOwnProperty).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
                  );
                  function baseIsNative(value) {
                    if (!isObject(value) || isMasked(value)) {
                      return false;
                    }
                    var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
                    return pattern.test(toSource(value));
                  }
                  module3.exports = baseIsNative;
                })
              ),
              /***/
              5387: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseGetTag = __webpack_require__3(6522), isLength = __webpack_require__3(7164), isObjectLike = __webpack_require__3(2620);
                  var argsTag = "[object Arguments]", arrayTag = "[object Array]", boolTag = "[object Boolean]", dateTag = "[object Date]", errorTag = "[object Error]", funcTag = "[object Function]", mapTag = "[object Map]", numberTag = "[object Number]", objectTag = "[object Object]", regexpTag = "[object RegExp]", setTag = "[object Set]", stringTag = "[object String]", weakMapTag = "[object WeakMap]";
                  var arrayBufferTag = "[object ArrayBuffer]", dataViewTag = "[object DataView]", float32Tag = "[object Float32Array]", float64Tag = "[object Float64Array]", int8Tag = "[object Int8Array]", int16Tag = "[object Int16Array]", int32Tag = "[object Int32Array]", uint8Tag = "[object Uint8Array]", uint8ClampedTag = "[object Uint8ClampedArray]", uint16Tag = "[object Uint16Array]", uint32Tag = "[object Uint32Array]";
                  var typedArrayTags = {};
                  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
                  typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;
                  function baseIsTypedArray(value) {
                    return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
                  }
                  module3.exports = baseIsTypedArray;
                })
              ),
              /***/
              7675: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseMatches = __webpack_require__3(5141), baseMatchesProperty = __webpack_require__3(8476), identity = __webpack_require__3(1686), isArray = __webpack_require__3(2003), property = __webpack_require__3(7093);
                  function baseIteratee(value) {
                    if (typeof value == "function") {
                      return value;
                    }
                    if (value == null) {
                      return identity;
                    }
                    if (typeof value == "object") {
                      return isArray(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);
                    }
                    return property(value);
                  }
                  module3.exports = baseIteratee;
                })
              ),
              /***/
              6794: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isPrototype = __webpack_require__3(6165), nativeKeys = __webpack_require__3(6132);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function baseKeys(object) {
                    if (!isPrototype(object)) {
                      return nativeKeys(object);
                    }
                    var result = [];
                    for (var key in Object(object)) {
                      if (hasOwnProperty.call(object, key) && key != "constructor") {
                        result.push(key);
                      }
                    }
                    return result;
                  }
                  module3.exports = baseKeys;
                })
              ),
              /***/
              8157: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isObject = __webpack_require__3(5603), isPrototype = __webpack_require__3(6165), nativeKeysIn = __webpack_require__3(4555);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function baseKeysIn(object) {
                    if (!isObject(object)) {
                      return nativeKeysIn(object);
                    }
                    var isProto = isPrototype(object), result = [];
                    for (var key in object) {
                      if (!(key == "constructor" && (isProto || !hasOwnProperty.call(object, key)))) {
                        result.push(key);
                      }
                    }
                    return result;
                  }
                  module3.exports = baseKeysIn;
                })
              ),
              /***/
              5718: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseEach = __webpack_require__3(7587), isArrayLike = __webpack_require__3(6316);
                  function baseMap(collection, iteratee) {
                    var index = -1, result = isArrayLike(collection) ? Array(collection.length) : [];
                    baseEach(collection, function(value, key, collection2) {
                      result[++index] = iteratee(value, key, collection2);
                    });
                    return result;
                  }
                  module3.exports = baseMap;
                })
              ),
              /***/
              5141: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIsMatch = __webpack_require__3(4253), getMatchData = __webpack_require__3(8418), matchesStrictComparable = __webpack_require__3(3591);
                  function baseMatches(source) {
                    var matchData = getMatchData(source);
                    if (matchData.length == 1 && matchData[0][2]) {
                      return matchesStrictComparable(matchData[0][0], matchData[0][1]);
                    }
                    return function(object) {
                      return object === source || baseIsMatch(object, source, matchData);
                    };
                  }
                  module3.exports = baseMatches;
                })
              ),
              /***/
              8476: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIsEqual = __webpack_require__3(9336), get = __webpack_require__3(1214), hasIn = __webpack_require__3(8765), isKey = __webpack_require__3(5456), isStrictComparable = __webpack_require__3(7030), matchesStrictComparable = __webpack_require__3(3591), toKey = __webpack_require__3(8059);
                  var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
                  function baseMatchesProperty(path, srcValue) {
                    if (isKey(path) && isStrictComparable(srcValue)) {
                      return matchesStrictComparable(toKey(path), srcValue);
                    }
                    return function(object) {
                      var objValue = get(object, path);
                      return objValue === void 0 && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
                    };
                  }
                  module3.exports = baseMatchesProperty;
                })
              ),
              /***/
              3729: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayMap = __webpack_require__3(14), baseGet = __webpack_require__3(384), baseIteratee = __webpack_require__3(7675), baseMap = __webpack_require__3(5718), baseSortBy = __webpack_require__3(1163), baseUnary = __webpack_require__3(2347), compareMultiple = __webpack_require__3(7644), identity = __webpack_require__3(1686), isArray = __webpack_require__3(2003);
                  function baseOrderBy(collection, iteratees, orders) {
                    if (iteratees.length) {
                      iteratees = arrayMap(iteratees, function(iteratee) {
                        if (isArray(iteratee)) {
                          return function(value) {
                            return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);
                          };
                        }
                        return iteratee;
                      });
                    } else {
                      iteratees = [identity];
                    }
                    var index = -1;
                    iteratees = arrayMap(iteratees, baseUnary(baseIteratee));
                    var result = baseMap(collection, function(value, key, collection2) {
                      var criteria = arrayMap(iteratees, function(iteratee) {
                        return iteratee(value);
                      });
                      return { "criteria": criteria, "index": ++index, "value": value };
                    });
                    return baseSortBy(result, function(object, other) {
                      return compareMultiple(object, other, orders);
                    });
                  }
                  module3.exports = baseOrderBy;
                })
              ),
              /***/
              1171: (
                /***/
                ((module3) => {
                  function baseProperty(key) {
                    return function(object) {
                      return object == null ? void 0 : object[key];
                    };
                  }
                  module3.exports = baseProperty;
                })
              ),
              /***/
              4589: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseGet = __webpack_require__3(384);
                  function basePropertyDeep(path) {
                    return function(object) {
                      return baseGet(object, path);
                    };
                  }
                  module3.exports = basePropertyDeep;
                })
              ),
              /***/
              9390: (
                /***/
                ((module3) => {
                  function basePropertyOf(object) {
                    return function(key) {
                      return object == null ? void 0 : object[key];
                    };
                  }
                  module3.exports = basePropertyOf;
                })
              ),
              /***/
              7916: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseUnset = __webpack_require__3(1289), isIndex = __webpack_require__3(2615);
                  var arrayProto = Array.prototype;
                  var splice = arrayProto.splice;
                  function basePullAt(array, indexes) {
                    var length = array ? indexes.length : 0, lastIndex = length - 1;
                    while (length--) {
                      var index = indexes[length];
                      if (length == lastIndex || index !== previous) {
                        var previous = index;
                        if (isIndex(index)) {
                          splice.call(array, index, 1);
                        } else {
                          baseUnset(array, index);
                        }
                      }
                    }
                    return array;
                  }
                  module3.exports = basePullAt;
                })
              ),
              /***/
              3408: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var identity = __webpack_require__3(1686), overRest = __webpack_require__3(5683), setToString = __webpack_require__3(6391);
                  function baseRest(func, start) {
                    return setToString(overRest(func, start, identity), func + "");
                  }
                  module3.exports = baseRest;
                })
              ),
              /***/
              7880: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var constant = __webpack_require__3(7660), defineProperty = __webpack_require__3(3009), identity = __webpack_require__3(1686);
                  var baseSetToString = !defineProperty ? identity : function(func, string) {
                    return defineProperty(func, "toString", {
                      "configurable": true,
                      "enumerable": false,
                      "value": constant(string),
                      "writable": true
                    });
                  };
                  module3.exports = baseSetToString;
                })
              ),
              /***/
              4198: (
                /***/
                ((module3) => {
                  function baseSlice(array, start, end) {
                    var index = -1, length = array.length;
                    if (start < 0) {
                      start = -start > length ? 0 : length + start;
                    }
                    end = end > length ? length : end;
                    if (end < 0) {
                      end += length;
                    }
                    length = start > end ? 0 : end - start >>> 0;
                    start >>>= 0;
                    var result = Array(length);
                    while (++index < length) {
                      result[index] = array[index + start];
                    }
                    return result;
                  }
                  module3.exports = baseSlice;
                })
              ),
              /***/
              1163: (
                /***/
                ((module3) => {
                  function baseSortBy(array, comparer) {
                    var length = array.length;
                    array.sort(comparer);
                    while (length--) {
                      array[length] = array[length].value;
                    }
                    return array;
                  }
                  module3.exports = baseSortBy;
                })
              ),
              /***/
              5410: (
                /***/
                ((module3) => {
                  function baseTimes(n, iteratee) {
                    var index = -1, result = Array(n);
                    while (++index < n) {
                      result[index] = iteratee(index);
                    }
                    return result;
                  }
                  module3.exports = baseTimes;
                })
              ),
              /***/
              8354: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Symbol2 = __webpack_require__3(6711), arrayMap = __webpack_require__3(14), isArray = __webpack_require__3(2003), isSymbol = __webpack_require__3(6596);
                  var INFINITY = 1 / 0;
                  var symbolProto = Symbol2 ? Symbol2.prototype : void 0, symbolToString = symbolProto ? symbolProto.toString : void 0;
                  function baseToString(value) {
                    if (typeof value == "string") {
                      return value;
                    }
                    if (isArray(value)) {
                      return arrayMap(value, baseToString) + "";
                    }
                    if (isSymbol(value)) {
                      return symbolToString ? symbolToString.call(value) : "";
                    }
                    var result = value + "";
                    return result == "0" && 1 / value == -INFINITY ? "-0" : result;
                  }
                  module3.exports = baseToString;
                })
              ),
              /***/
              9070: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var trimmedEndIndex = __webpack_require__3(8882);
                  var reTrimStart = /^\s+/;
                  function baseTrim(string) {
                    return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, "") : string;
                  }
                  module3.exports = baseTrim;
                })
              ),
              /***/
              2347: (
                /***/
                ((module3) => {
                  function baseUnary(func) {
                    return function(value) {
                      return func(value);
                    };
                  }
                  module3.exports = baseUnary;
                })
              ),
              /***/
              7971: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var SetCache = __webpack_require__3(1641), arrayIncludes = __webpack_require__3(3271), arrayIncludesWith = __webpack_require__3(7599), cacheHas = __webpack_require__3(7585), createSet = __webpack_require__3(7455), setToArray = __webpack_require__3(5841);
                  var LARGE_ARRAY_SIZE = 200;
                  function baseUniq(array, iteratee, comparator) {
                    var index = -1, includes = arrayIncludes, length = array.length, isCommon = true, result = [], seen = result;
                    if (comparator) {
                      isCommon = false;
                      includes = arrayIncludesWith;
                    } else if (length >= LARGE_ARRAY_SIZE) {
                      var set = iteratee ? null : createSet(array);
                      if (set) {
                        return setToArray(set);
                      }
                      isCommon = false;
                      includes = cacheHas;
                      seen = new SetCache();
                    } else {
                      seen = iteratee ? [] : result;
                    }
                    outer:
                      while (++index < length) {
                        var value = array[index], computed = iteratee ? iteratee(value) : value;
                        value = comparator || value !== 0 ? value : 0;
                        if (isCommon && computed === computed) {
                          var seenIndex = seen.length;
                          while (seenIndex--) {
                            if (seen[seenIndex] === computed) {
                              continue outer;
                            }
                          }
                          if (iteratee) {
                            seen.push(computed);
                          }
                          result.push(value);
                        } else if (!includes(seen, computed, comparator)) {
                          if (seen !== result) {
                            seen.push(computed);
                          }
                          result.push(value);
                        }
                      }
                    return result;
                  }
                  module3.exports = baseUniq;
                })
              ),
              /***/
              1289: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var castPath = __webpack_require__3(4275), last2 = __webpack_require__3(6456), parent = __webpack_require__3(1339), toKey = __webpack_require__3(8059);
                  function baseUnset(object, path) {
                    path = castPath(path, object);
                    object = parent(object, path);
                    return object == null || delete object[toKey(last2(path))];
                  }
                  module3.exports = baseUnset;
                })
              ),
              /***/
              4956: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayMap = __webpack_require__3(14);
                  function baseValues(object, props) {
                    return arrayMap(props, function(key) {
                      return object[key];
                    });
                  }
                  module3.exports = baseValues;
                })
              ),
              /***/
              7585: (
                /***/
                ((module3) => {
                  function cacheHas(cache, key) {
                    return cache.has(key);
                  }
                  module3.exports = cacheHas;
                })
              ),
              /***/
              9471: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isArrayLikeObject = __webpack_require__3(1899);
                  function castArrayLikeObject(value) {
                    return isArrayLikeObject(value) ? value : [];
                  }
                  module3.exports = castArrayLikeObject;
                })
              ),
              /***/
              4275: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isArray = __webpack_require__3(2003), isKey = __webpack_require__3(5456), stringToPath = __webpack_require__3(5240), toString = __webpack_require__3(7060);
                  function castPath(value, object) {
                    if (isArray(value)) {
                      return value;
                    }
                    return isKey(value, object) ? [value] : stringToPath(toString(value));
                  }
                  module3.exports = castPath;
                })
              ),
              /***/
              8452: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isSymbol = __webpack_require__3(6596);
                  function compareAscending(value, other) {
                    if (value !== other) {
                      var valIsDefined = value !== void 0, valIsNull = value === null, valIsReflexive = value === value, valIsSymbol = isSymbol(value);
                      var othIsDefined = other !== void 0, othIsNull = other === null, othIsReflexive = other === other, othIsSymbol = isSymbol(other);
                      if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {
                        return 1;
                      }
                      if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {
                        return -1;
                      }
                    }
                    return 0;
                  }
                  module3.exports = compareAscending;
                })
              ),
              /***/
              7644: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var compareAscending = __webpack_require__3(8452);
                  function compareMultiple(object, other, orders) {
                    var index = -1, objCriteria = object.criteria, othCriteria = other.criteria, length = objCriteria.length, ordersLength = orders.length;
                    while (++index < length) {
                      var result = compareAscending(objCriteria[index], othCriteria[index]);
                      if (result) {
                        if (index >= ordersLength) {
                          return result;
                        }
                        var order = orders[index];
                        return result * (order == "desc" ? -1 : 1);
                      }
                    }
                    return object.index - other.index;
                  }
                  module3.exports = compareMultiple;
                })
              ),
              /***/
              3887: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var root = __webpack_require__3(9107);
                  var coreJsData = root["__core-js_shared__"];
                  module3.exports = coreJsData;
                })
              ),
              /***/
              3679: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isArrayLike = __webpack_require__3(6316);
                  function createBaseEach(eachFunc, fromRight) {
                    return function(collection, iteratee) {
                      if (collection == null) {
                        return collection;
                      }
                      if (!isArrayLike(collection)) {
                        return eachFunc(collection, iteratee);
                      }
                      var length = collection.length, index = fromRight ? length : -1, iterable = Object(collection);
                      while (fromRight ? index-- : ++index < length) {
                        if (iteratee(iterable[index], index, iterable) === false) {
                          break;
                        }
                      }
                      return collection;
                    };
                  }
                  module3.exports = createBaseEach;
                })
              ),
              /***/
              951: (
                /***/
                ((module3) => {
                  function createBaseFor(fromRight) {
                    return function(object, iteratee, keysFunc) {
                      var index = -1, iterable = Object(object), props = keysFunc(object), length = props.length;
                      while (length--) {
                        var key = props[fromRight ? length : ++index];
                        if (iteratee(iterable[key], key, iterable) === false) {
                          break;
                        }
                      }
                      return object;
                    };
                  }
                  module3.exports = createBaseFor;
                })
              ),
              /***/
              7216: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIteratee = __webpack_require__3(7675), isArrayLike = __webpack_require__3(6316), keys = __webpack_require__3(5304);
                  function createFind(findIndexFunc) {
                    return function(collection, predicate, fromIndex) {
                      var iterable = Object(collection);
                      if (!isArrayLike(collection)) {
                        var iteratee = baseIteratee(predicate, 3);
                        collection = keys(collection);
                        predicate = function(key) {
                          return iteratee(iterable[key], key, iterable);
                        };
                      }
                      var index = findIndexFunc(collection, predicate, fromIndex);
                      return index > -1 ? iterable[iteratee ? collection[index] : index] : void 0;
                    };
                  }
                  module3.exports = createFind;
                })
              ),
              /***/
              1624: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseInverter = __webpack_require__3(9593);
                  function createInverter(setter, toIteratee) {
                    return function(object, iteratee) {
                      return baseInverter(object, setter, toIteratee(iteratee), {});
                    };
                  }
                  module3.exports = createInverter;
                })
              ),
              /***/
              7455: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Set2 = __webpack_require__3(5963), noop = __webpack_require__3(1700), setToArray = __webpack_require__3(5841);
                  var INFINITY = 1 / 0;
                  var createSet = !(Set2 && 1 / setToArray(new Set2([, -0]))[1] == INFINITY) ? noop : function(values) {
                    return new Set2(values);
                  };
                  module3.exports = createSet;
                })
              ),
              /***/
              3009: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getNative = __webpack_require__3(3984);
                  var defineProperty = (function() {
                    try {
                      var func = getNative(Object, "defineProperty");
                      func({}, "", {});
                      return func;
                    } catch (e) {
                    }
                  })();
                  module3.exports = defineProperty;
                })
              ),
              /***/
              1505: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var SetCache = __webpack_require__3(1641), arraySome = __webpack_require__3(9854), cacheHas = __webpack_require__3(7585);
                  var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
                  function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
                    var isPartial = bitmask & COMPARE_PARTIAL_FLAG, arrLength = array.length, othLength = other.length;
                    if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
                      return false;
                    }
                    var arrStacked = stack.get(array);
                    var othStacked = stack.get(other);
                    if (arrStacked && othStacked) {
                      return arrStacked == other && othStacked == array;
                    }
                    var index = -1, result = true, seen = bitmask & COMPARE_UNORDERED_FLAG ? new SetCache() : void 0;
                    stack.set(array, other);
                    stack.set(other, array);
                    while (++index < arrLength) {
                      var arrValue = array[index], othValue = other[index];
                      if (customizer) {
                        var compared = isPartial ? customizer(othValue, arrValue, index, other, array, stack) : customizer(arrValue, othValue, index, array, other, stack);
                      }
                      if (compared !== void 0) {
                        if (compared) {
                          continue;
                        }
                        result = false;
                        break;
                      }
                      if (seen) {
                        if (!arraySome(other, function(othValue2, othIndex) {
                          if (!cacheHas(seen, othIndex) && (arrValue === othValue2 || equalFunc(arrValue, othValue2, bitmask, customizer, stack))) {
                            return seen.push(othIndex);
                          }
                        })) {
                          result = false;
                          break;
                        }
                      } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
                        result = false;
                        break;
                      }
                    }
                    stack["delete"](array);
                    stack["delete"](other);
                    return result;
                  }
                  module3.exports = equalArrays;
                })
              ),
              /***/
              9620: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Symbol2 = __webpack_require__3(6711), Uint8Array2 = __webpack_require__3(9282), eq = __webpack_require__3(8330), equalArrays = __webpack_require__3(1505), mapToArray = __webpack_require__3(5483), setToArray = __webpack_require__3(5841);
                  var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
                  var boolTag = "[object Boolean]", dateTag = "[object Date]", errorTag = "[object Error]", mapTag = "[object Map]", numberTag = "[object Number]", regexpTag = "[object RegExp]", setTag = "[object Set]", stringTag = "[object String]", symbolTag = "[object Symbol]";
                  var arrayBufferTag = "[object ArrayBuffer]", dataViewTag = "[object DataView]";
                  var symbolProto = Symbol2 ? Symbol2.prototype : void 0, symbolValueOf = symbolProto ? symbolProto.valueOf : void 0;
                  function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
                    switch (tag) {
                      case dataViewTag:
                        if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {
                          return false;
                        }
                        object = object.buffer;
                        other = other.buffer;
                      case arrayBufferTag:
                        if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array2(object), new Uint8Array2(other))) {
                          return false;
                        }
                        return true;
                      case boolTag:
                      case dateTag:
                      case numberTag:
                        return eq(+object, +other);
                      case errorTag:
                        return object.name == other.name && object.message == other.message;
                      case regexpTag:
                      case stringTag:
                        return object == other + "";
                      case mapTag:
                        var convert = mapToArray;
                      case setTag:
                        var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
                        convert || (convert = setToArray);
                        if (object.size != other.size && !isPartial) {
                          return false;
                        }
                        var stacked = stack.get(object);
                        if (stacked) {
                          return stacked == other;
                        }
                        bitmask |= COMPARE_UNORDERED_FLAG;
                        stack.set(object, other);
                        var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
                        stack["delete"](object);
                        return result;
                      case symbolTag:
                        if (symbolValueOf) {
                          return symbolValueOf.call(object) == symbolValueOf.call(other);
                        }
                    }
                    return false;
                  }
                  module3.exports = equalByTag;
                })
              ),
              /***/
              439: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getAllKeys = __webpack_require__3(5760);
                  var COMPARE_PARTIAL_FLAG = 1;
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
                    var isPartial = bitmask & COMPARE_PARTIAL_FLAG, objProps = getAllKeys(object), objLength = objProps.length, othProps = getAllKeys(other), othLength = othProps.length;
                    if (objLength != othLength && !isPartial) {
                      return false;
                    }
                    var index = objLength;
                    while (index--) {
                      var key = objProps[index];
                      if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {
                        return false;
                      }
                    }
                    var objStacked = stack.get(object);
                    var othStacked = stack.get(other);
                    if (objStacked && othStacked) {
                      return objStacked == other && othStacked == object;
                    }
                    var result = true;
                    stack.set(object, other);
                    stack.set(other, object);
                    var skipCtor = isPartial;
                    while (++index < objLength) {
                      key = objProps[index];
                      var objValue = object[key], othValue = other[key];
                      if (customizer) {
                        var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);
                      }
                      if (!(compared === void 0 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {
                        result = false;
                        break;
                      }
                      skipCtor || (skipCtor = key == "constructor");
                    }
                    if (result && !skipCtor) {
                      var objCtor = object.constructor, othCtor = other.constructor;
                      if (objCtor != othCtor && ("constructor" in object && "constructor" in other) && !(typeof objCtor == "function" && objCtor instanceof objCtor && typeof othCtor == "function" && othCtor instanceof othCtor)) {
                        result = false;
                      }
                    }
                    stack["delete"](object);
                    stack["delete"](other);
                    return result;
                  }
                  module3.exports = equalObjects;
                })
              ),
              /***/
              9025: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var basePropertyOf = __webpack_require__3(9390);
                  var htmlEscapes = {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;"
                  };
                  var escapeHtmlChar = basePropertyOf(htmlEscapes);
                  module3.exports = escapeHtmlChar;
                })
              ),
              /***/
              2718: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var freeGlobal = typeof __webpack_require__3.g == "object" && __webpack_require__3.g && __webpack_require__3.g.Object === Object && __webpack_require__3.g;
                  module3.exports = freeGlobal;
                })
              ),
              /***/
              5760: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseGetAllKeys = __webpack_require__3(8821), getSymbols = __webpack_require__3(6806), keys = __webpack_require__3(5304);
                  function getAllKeys(object) {
                    return baseGetAllKeys(object, keys, getSymbols);
                  }
                  module3.exports = getAllKeys;
                })
              ),
              /***/
              6929: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isKeyable = __webpack_require__3(9732);
                  function getMapData(map, key) {
                    var data = map.__data__;
                    return isKeyable(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
                  }
                  module3.exports = getMapData;
                })
              ),
              /***/
              8418: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isStrictComparable = __webpack_require__3(7030), keys = __webpack_require__3(5304);
                  function getMatchData(object) {
                    var result = keys(object), length = result.length;
                    while (length--) {
                      var key = result[length], value = object[key];
                      result[length] = [key, value, isStrictComparable(value)];
                    }
                    return result;
                  }
                  module3.exports = getMatchData;
                })
              ),
              /***/
              3984: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIsNative = __webpack_require__3(2249), getValue2 = __webpack_require__3(1074);
                  function getNative(object, key) {
                    var value = getValue2(object, key);
                    return baseIsNative(value) ? value : void 0;
                  }
                  module3.exports = getNative;
                })
              ),
              /***/
              905: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Symbol2 = __webpack_require__3(6711);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var nativeObjectToString = objectProto.toString;
                  var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
                  function getRawTag(value) {
                    var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];
                    try {
                      value[symToStringTag] = void 0;
                      var unmasked = true;
                    } catch (e) {
                    }
                    var result = nativeObjectToString.call(value);
                    if (unmasked) {
                      if (isOwn) {
                        value[symToStringTag] = tag;
                      } else {
                        delete value[symToStringTag];
                      }
                    }
                    return result;
                  }
                  module3.exports = getRawTag;
                })
              ),
              /***/
              6806: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayFilter = __webpack_require__3(3928), stubArray = __webpack_require__3(119);
                  var objectProto = Object.prototype;
                  var propertyIsEnumerable = objectProto.propertyIsEnumerable;
                  var nativeGetSymbols = Object.getOwnPropertySymbols;
                  var getSymbols = !nativeGetSymbols ? stubArray : function(object) {
                    if (object == null) {
                      return [];
                    }
                    object = Object(object);
                    return arrayFilter(nativeGetSymbols(object), function(symbol) {
                      return propertyIsEnumerable.call(object, symbol);
                    });
                  };
                  module3.exports = getSymbols;
                })
              ),
              /***/
              695: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var DataView = __webpack_require__3(7230), Map2 = __webpack_require__3(5661), Promise2 = __webpack_require__3(9102), Set2 = __webpack_require__3(5963), WeakMap2 = __webpack_require__3(2850), baseGetTag = __webpack_require__3(6522), toSource = __webpack_require__3(1543);
                  var mapTag = "[object Map]", objectTag = "[object Object]", promiseTag = "[object Promise]", setTag = "[object Set]", weakMapTag = "[object WeakMap]";
                  var dataViewTag = "[object DataView]";
                  var dataViewCtorString = toSource(DataView), mapCtorString = toSource(Map2), promiseCtorString = toSource(Promise2), setCtorString = toSource(Set2), weakMapCtorString = toSource(WeakMap2);
                  var getTag = baseGetTag;
                  if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag || Map2 && getTag(new Map2()) != mapTag || Promise2 && getTag(Promise2.resolve()) != promiseTag || Set2 && getTag(new Set2()) != setTag || WeakMap2 && getTag(new WeakMap2()) != weakMapTag) {
                    getTag = function(value) {
                      var result = baseGetTag(value), Ctor = result == objectTag ? value.constructor : void 0, ctorString = Ctor ? toSource(Ctor) : "";
                      if (ctorString) {
                        switch (ctorString) {
                          case dataViewCtorString:
                            return dataViewTag;
                          case mapCtorString:
                            return mapTag;
                          case promiseCtorString:
                            return promiseTag;
                          case setCtorString:
                            return setTag;
                          case weakMapCtorString:
                            return weakMapTag;
                        }
                      }
                      return result;
                    };
                  }
                  module3.exports = getTag;
                })
              ),
              /***/
              1074: (
                /***/
                ((module3) => {
                  function getValue2(object, key) {
                    return object == null ? void 0 : object[key];
                  }
                  module3.exports = getValue2;
                })
              ),
              /***/
              2248: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var castPath = __webpack_require__3(4275), isArguments = __webpack_require__3(2382), isArray = __webpack_require__3(2003), isIndex = __webpack_require__3(2615), isLength = __webpack_require__3(7164), toKey = __webpack_require__3(8059);
                  function hasPath(object, path, hasFunc) {
                    path = castPath(path, object);
                    var index = -1, length = path.length, result = false;
                    while (++index < length) {
                      var key = toKey(path[index]);
                      if (!(result = object != null && hasFunc(object, key))) {
                        break;
                      }
                      object = object[key];
                    }
                    if (result || ++index != length) {
                      return result;
                    }
                    length = object == null ? 0 : object.length;
                    return !!length && isLength(length) && isIndex(key, length) && (isArray(object) || isArguments(object));
                  }
                  module3.exports = hasPath;
                })
              ),
              /***/
              6890: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var nativeCreate = __webpack_require__3(6060);
                  function hashClear() {
                    this.__data__ = nativeCreate ? nativeCreate(null) : {};
                    this.size = 0;
                  }
                  module3.exports = hashClear;
                })
              ),
              /***/
              9484: (
                /***/
                ((module3) => {
                  function hashDelete(key) {
                    var result = this.has(key) && delete this.__data__[key];
                    this.size -= result ? 1 : 0;
                    return result;
                  }
                  module3.exports = hashDelete;
                })
              ),
              /***/
              7215: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var nativeCreate = __webpack_require__3(6060);
                  var HASH_UNDEFINED = "__lodash_hash_undefined__";
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function hashGet(key) {
                    var data = this.__data__;
                    if (nativeCreate) {
                      var result = data[key];
                      return result === HASH_UNDEFINED ? void 0 : result;
                    }
                    return hasOwnProperty.call(data, key) ? data[key] : void 0;
                  }
                  module3.exports = hashGet;
                })
              ),
              /***/
              7811: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var nativeCreate = __webpack_require__3(6060);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function hashHas(key) {
                    var data = this.__data__;
                    return nativeCreate ? data[key] !== void 0 : hasOwnProperty.call(data, key);
                  }
                  module3.exports = hashHas;
                })
              ),
              /***/
              747: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var nativeCreate = __webpack_require__3(6060);
                  var HASH_UNDEFINED = "__lodash_hash_undefined__";
                  function hashSet(key, value) {
                    var data = this.__data__;
                    this.size += this.has(key) ? 0 : 1;
                    data[key] = nativeCreate && value === void 0 ? HASH_UNDEFINED : value;
                    return this;
                  }
                  module3.exports = hashSet;
                })
              ),
              /***/
              4385: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Symbol2 = __webpack_require__3(6711), isArguments = __webpack_require__3(2382), isArray = __webpack_require__3(2003);
                  var spreadableSymbol = Symbol2 ? Symbol2.isConcatSpreadable : void 0;
                  function isFlattenable(value) {
                    return isArray(value) || isArguments(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);
                  }
                  module3.exports = isFlattenable;
                })
              ),
              /***/
              2615: (
                /***/
                ((module3) => {
                  var MAX_SAFE_INTEGER = 9007199254740991;
                  var reIsUint = /^(?:0|[1-9]\d*)$/;
                  function isIndex(value, length) {
                    var type = typeof value;
                    length = length == null ? MAX_SAFE_INTEGER : length;
                    return !!length && (type == "number" || type != "symbol" && reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);
                  }
                  module3.exports = isIndex;
                })
              ),
              /***/
              5934: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var eq = __webpack_require__3(8330), isArrayLike = __webpack_require__3(6316), isIndex = __webpack_require__3(2615), isObject = __webpack_require__3(5603);
                  function isIterateeCall(value, index, object) {
                    if (!isObject(object)) {
                      return false;
                    }
                    var type = typeof index;
                    if (type == "number" ? isArrayLike(object) && isIndex(index, object.length) : type == "string" && index in object) {
                      return eq(object[index], value);
                    }
                    return false;
                  }
                  module3.exports = isIterateeCall;
                })
              ),
              /***/
              5456: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isArray = __webpack_require__3(2003), isSymbol = __webpack_require__3(6596);
                  var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, reIsPlainProp = /^\w*$/;
                  function isKey(value, object) {
                    if (isArray(value)) {
                      return false;
                    }
                    var type = typeof value;
                    if (type == "number" || type == "symbol" || type == "boolean" || value == null || isSymbol(value)) {
                      return true;
                    }
                    return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);
                  }
                  module3.exports = isKey;
                })
              ),
              /***/
              9732: (
                /***/
                ((module3) => {
                  function isKeyable(value) {
                    var type = typeof value;
                    return type == "string" || type == "number" || type == "symbol" || type == "boolean" ? value !== "__proto__" : value === null;
                  }
                  module3.exports = isKeyable;
                })
              ),
              /***/
              1398: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var coreJsData = __webpack_require__3(3887);
                  var maskSrcKey = (function() {
                    var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || "");
                    return uid ? "Symbol(src)_1." + uid : "";
                  })();
                  function isMasked(func) {
                    return !!maskSrcKey && maskSrcKey in func;
                  }
                  module3.exports = isMasked;
                })
              ),
              /***/
              6165: (
                /***/
                ((module3) => {
                  var objectProto = Object.prototype;
                  function isPrototype(value) {
                    var Ctor = value && value.constructor, proto = typeof Ctor == "function" && Ctor.prototype || objectProto;
                    return value === proto;
                  }
                  module3.exports = isPrototype;
                })
              ),
              /***/
              7030: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isObject = __webpack_require__3(5603);
                  function isStrictComparable(value) {
                    return value === value && !isObject(value);
                  }
                  module3.exports = isStrictComparable;
                })
              ),
              /***/
              4412: (
                /***/
                ((module3) => {
                  function listCacheClear() {
                    this.__data__ = [];
                    this.size = 0;
                  }
                  module3.exports = listCacheClear;
                })
              ),
              /***/
              8522: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var assocIndexOf = __webpack_require__3(4767);
                  var arrayProto = Array.prototype;
                  var splice = arrayProto.splice;
                  function listCacheDelete(key) {
                    var data = this.__data__, index = assocIndexOf(data, key);
                    if (index < 0) {
                      return false;
                    }
                    var lastIndex = data.length - 1;
                    if (index == lastIndex) {
                      data.pop();
                    } else {
                      splice.call(data, index, 1);
                    }
                    --this.size;
                    return true;
                  }
                  module3.exports = listCacheDelete;
                })
              ),
              /***/
              469: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var assocIndexOf = __webpack_require__3(4767);
                  function listCacheGet(key) {
                    var data = this.__data__, index = assocIndexOf(data, key);
                    return index < 0 ? void 0 : data[index][1];
                  }
                  module3.exports = listCacheGet;
                })
              ),
              /***/
              1161: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var assocIndexOf = __webpack_require__3(4767);
                  function listCacheHas(key) {
                    return assocIndexOf(this.__data__, key) > -1;
                  }
                  module3.exports = listCacheHas;
                })
              ),
              /***/
              1441: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var assocIndexOf = __webpack_require__3(4767);
                  function listCacheSet(key, value) {
                    var data = this.__data__, index = assocIndexOf(data, key);
                    if (index < 0) {
                      ++this.size;
                      data.push([key, value]);
                    } else {
                      data[index][1] = value;
                    }
                    return this;
                  }
                  module3.exports = listCacheSet;
                })
              ),
              /***/
              8206: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Hash = __webpack_require__3(3435), ListCache = __webpack_require__3(5217), Map2 = __webpack_require__3(5661);
                  function mapCacheClear() {
                    this.size = 0;
                    this.__data__ = {
                      "hash": new Hash(),
                      "map": new (Map2 || ListCache)(),
                      "string": new Hash()
                    };
                  }
                  module3.exports = mapCacheClear;
                })
              ),
              /***/
              9768: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getMapData = __webpack_require__3(6929);
                  function mapCacheDelete(key) {
                    var result = getMapData(this, key)["delete"](key);
                    this.size -= result ? 1 : 0;
                    return result;
                  }
                  module3.exports = mapCacheDelete;
                })
              ),
              /***/
              6827: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getMapData = __webpack_require__3(6929);
                  function mapCacheGet(key) {
                    return getMapData(this, key).get(key);
                  }
                  module3.exports = mapCacheGet;
                })
              ),
              /***/
              663: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getMapData = __webpack_require__3(6929);
                  function mapCacheHas(key) {
                    return getMapData(this, key).has(key);
                  }
                  module3.exports = mapCacheHas;
                })
              ),
              /***/
              5135: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getMapData = __webpack_require__3(6929);
                  function mapCacheSet(key, value) {
                    var data = getMapData(this, key), size = data.size;
                    data.set(key, value);
                    this.size += data.size == size ? 0 : 1;
                    return this;
                  }
                  module3.exports = mapCacheSet;
                })
              ),
              /***/
              5483: (
                /***/
                ((module3) => {
                  function mapToArray(map) {
                    var index = -1, result = Array(map.size);
                    map.forEach(function(value, key) {
                      result[++index] = [key, value];
                    });
                    return result;
                  }
                  module3.exports = mapToArray;
                })
              ),
              /***/
              3591: (
                /***/
                ((module3) => {
                  function matchesStrictComparable(key, srcValue) {
                    return function(object) {
                      if (object == null) {
                        return false;
                      }
                      return object[key] === srcValue && (srcValue !== void 0 || key in Object(object));
                    };
                  }
                  module3.exports = matchesStrictComparable;
                })
              ),
              /***/
              874: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var memoize = __webpack_require__3(9513);
                  var MAX_MEMOIZE_SIZE = 500;
                  function memoizeCapped(func) {
                    var result = memoize(func, function(key) {
                      if (cache.size === MAX_MEMOIZE_SIZE) {
                        cache.clear();
                      }
                      return key;
                    });
                    var cache = result.cache;
                    return result;
                  }
                  module3.exports = memoizeCapped;
                })
              ),
              /***/
              6060: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var getNative = __webpack_require__3(3984);
                  var nativeCreate = getNative(Object, "create");
                  module3.exports = nativeCreate;
                })
              ),
              /***/
              6132: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var overArg = __webpack_require__3(889);
                  var nativeKeys = overArg(Object.keys, Object);
                  module3.exports = nativeKeys;
                })
              ),
              /***/
              4555: (
                /***/
                ((module3) => {
                  function nativeKeysIn(object) {
                    var result = [];
                    if (object != null) {
                      for (var key in Object(object)) {
                        result.push(key);
                      }
                    }
                    return result;
                  }
                  module3.exports = nativeKeysIn;
                })
              ),
              /***/
              8315: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  module3 = __webpack_require__3.nmd(module3);
                  var freeGlobal = __webpack_require__3(2718);
                  var freeExports = exports3 && !exports3.nodeType && exports3;
                  var freeModule = freeExports && true && module3 && !module3.nodeType && module3;
                  var moduleExports = freeModule && freeModule.exports === freeExports;
                  var freeProcess = moduleExports && freeGlobal.process;
                  var nodeUtil = (function() {
                    try {
                      var types = freeModule && freeModule.require && freeModule.require("util").types;
                      if (types) {
                        return types;
                      }
                      return freeProcess && freeProcess.binding && freeProcess.binding("util");
                    } catch (e) {
                    }
                  })();
                  module3.exports = nodeUtil;
                })
              ),
              /***/
              2588: (
                /***/
                ((module3) => {
                  var objectProto = Object.prototype;
                  var nativeObjectToString = objectProto.toString;
                  function objectToString(value) {
                    return nativeObjectToString.call(value);
                  }
                  module3.exports = objectToString;
                })
              ),
              /***/
              889: (
                /***/
                ((module3) => {
                  function overArg(func, transform) {
                    return function(arg) {
                      return func(transform(arg));
                    };
                  }
                  module3.exports = overArg;
                })
              ),
              /***/
              5683: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var apply = __webpack_require__3(807);
                  var nativeMax = Math.max;
                  function overRest(func, start, transform) {
                    start = nativeMax(start === void 0 ? func.length - 1 : start, 0);
                    return function() {
                      var args = arguments, index = -1, length = nativeMax(args.length - start, 0), array = Array(length);
                      while (++index < length) {
                        array[index] = args[start + index];
                      }
                      index = -1;
                      var otherArgs = Array(start + 1);
                      while (++index < start) {
                        otherArgs[index] = args[index];
                      }
                      otherArgs[start] = transform(array);
                      return apply(func, this, otherArgs);
                    };
                  }
                  module3.exports = overRest;
                })
              ),
              /***/
              1339: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseGet = __webpack_require__3(384), baseSlice = __webpack_require__3(4198);
                  function parent(object, path) {
                    return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
                  }
                  module3.exports = parent;
                })
              ),
              /***/
              9107: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var freeGlobal = __webpack_require__3(2718);
                  var freeSelf = typeof self == "object" && self && self.Object === Object && self;
                  var root = freeGlobal || freeSelf || Function("return this")();
                  module3.exports = root;
                })
              ),
              /***/
              2486: (
                /***/
                ((module3) => {
                  var HASH_UNDEFINED = "__lodash_hash_undefined__";
                  function setCacheAdd(value) {
                    this.__data__.set(value, HASH_UNDEFINED);
                    return this;
                  }
                  module3.exports = setCacheAdd;
                })
              ),
              /***/
              9361: (
                /***/
                ((module3) => {
                  function setCacheHas(value) {
                    return this.__data__.has(value);
                  }
                  module3.exports = setCacheHas;
                })
              ),
              /***/
              5841: (
                /***/
                ((module3) => {
                  function setToArray(set) {
                    var index = -1, result = Array(set.size);
                    set.forEach(function(value) {
                      result[++index] = value;
                    });
                    return result;
                  }
                  module3.exports = setToArray;
                })
              ),
              /***/
              6391: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseSetToString = __webpack_require__3(7880), shortOut = __webpack_require__3(9437);
                  var setToString = shortOut(baseSetToString);
                  module3.exports = setToString;
                })
              ),
              /***/
              9437: (
                /***/
                ((module3) => {
                  var HOT_COUNT = 800, HOT_SPAN = 16;
                  var nativeNow = Date.now;
                  function shortOut(func) {
                    var count = 0, lastCalled = 0;
                    return function() {
                      var stamp = nativeNow(), remaining = HOT_SPAN - (stamp - lastCalled);
                      lastCalled = stamp;
                      if (remaining > 0) {
                        if (++count >= HOT_COUNT) {
                          return arguments[0];
                        }
                      } else {
                        count = 0;
                      }
                      return func.apply(void 0, arguments);
                    };
                  }
                  module3.exports = shortOut;
                })
              ),
              /***/
              8658: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var ListCache = __webpack_require__3(5217);
                  function stackClear() {
                    this.__data__ = new ListCache();
                    this.size = 0;
                  }
                  module3.exports = stackClear;
                })
              ),
              /***/
              3844: (
                /***/
                ((module3) => {
                  function stackDelete(key) {
                    var data = this.__data__, result = data["delete"](key);
                    this.size = data.size;
                    return result;
                  }
                  module3.exports = stackDelete;
                })
              ),
              /***/
              6503: (
                /***/
                ((module3) => {
                  function stackGet(key) {
                    return this.__data__.get(key);
                  }
                  module3.exports = stackGet;
                })
              ),
              /***/
              1563: (
                /***/
                ((module3) => {
                  function stackHas(key) {
                    return this.__data__.has(key);
                  }
                  module3.exports = stackHas;
                })
              ),
              /***/
              259: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var ListCache = __webpack_require__3(5217), Map2 = __webpack_require__3(5661), MapCache = __webpack_require__3(3287);
                  var LARGE_ARRAY_SIZE = 200;
                  function stackSet(key, value) {
                    var data = this.__data__;
                    if (data instanceof ListCache) {
                      var pairs = data.__data__;
                      if (!Map2 || pairs.length < LARGE_ARRAY_SIZE - 1) {
                        pairs.push([key, value]);
                        this.size = ++data.size;
                        return this;
                      }
                      data = this.__data__ = new MapCache(pairs);
                    }
                    data.set(key, value);
                    this.size = data.size;
                    return this;
                  }
                  module3.exports = stackSet;
                })
              ),
              /***/
              5957: (
                /***/
                ((module3) => {
                  function strictIndexOf(array, value, fromIndex) {
                    var index = fromIndex - 1, length = array.length;
                    while (++index < length) {
                      if (array[index] === value) {
                        return index;
                      }
                    }
                    return -1;
                  }
                  module3.exports = strictIndexOf;
                })
              ),
              /***/
              5240: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var memoizeCapped = __webpack_require__3(874);
                  var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
                  var reEscapeChar = /\\(\\)?/g;
                  var stringToPath = memoizeCapped(function(string) {
                    var result = [];
                    if (string.charCodeAt(0) === 46) {
                      result.push("");
                    }
                    string.replace(rePropName, function(match, number, quote, subString) {
                      result.push(quote ? subString.replace(reEscapeChar, "$1") : number || match);
                    });
                    return result;
                  });
                  module3.exports = stringToPath;
                })
              ),
              /***/
              8059: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isSymbol = __webpack_require__3(6596);
                  var INFINITY = 1 / 0;
                  function toKey(value) {
                    if (typeof value == "string" || isSymbol(value)) {
                      return value;
                    }
                    var result = value + "";
                    return result == "0" && 1 / value == -INFINITY ? "-0" : result;
                  }
                  module3.exports = toKey;
                })
              ),
              /***/
              1543: (
                /***/
                ((module3) => {
                  var funcProto = Function.prototype;
                  var funcToString = funcProto.toString;
                  function toSource(func) {
                    if (func != null) {
                      try {
                        return funcToString.call(func);
                      } catch (e) {
                      }
                      try {
                        return func + "";
                      } catch (e) {
                      }
                    }
                    return "";
                  }
                  module3.exports = toSource;
                })
              ),
              /***/
              8882: (
                /***/
                ((module3) => {
                  var reWhitespace = /\s/;
                  function trimmedEndIndex(string) {
                    var index = string.length;
                    while (index-- && reWhitespace.test(string.charAt(index))) {
                    }
                    return index;
                  }
                  module3.exports = trimmedEndIndex;
                })
              ),
              /***/
              163: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var toInteger = __webpack_require__3(8007);
                  var FUNC_ERROR_TEXT = "Expected a function";
                  function before(n, func) {
                    var result;
                    if (typeof func != "function") {
                      throw new TypeError(FUNC_ERROR_TEXT);
                    }
                    n = toInteger(n);
                    return function() {
                      if (--n > 0) {
                        result = func.apply(this, arguments);
                      }
                      if (n <= 1) {
                        func = void 0;
                      }
                      return result;
                    };
                  }
                  module3.exports = before;
                })
              ),
              /***/
              7660: (
                /***/
                ((module3) => {
                  function constant(value) {
                    return function() {
                      return value;
                    };
                  }
                  module3.exports = constant;
                })
              ),
              /***/
              4503: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isObject = __webpack_require__3(5603), now = __webpack_require__3(1406), toNumber = __webpack_require__3(3920);
                  var FUNC_ERROR_TEXT = "Expected a function";
                  var nativeMax = Math.max, nativeMin = Math.min;
                  function debounce(func, wait, options) {
                    var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;
                    if (typeof func != "function") {
                      throw new TypeError(FUNC_ERROR_TEXT);
                    }
                    wait = toNumber(wait) || 0;
                    if (isObject(options)) {
                      leading = !!options.leading;
                      maxing = "maxWait" in options;
                      maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
                      trailing = "trailing" in options ? !!options.trailing : trailing;
                    }
                    function invokeFunc(time) {
                      var args = lastArgs, thisArg = lastThis;
                      lastArgs = lastThis = void 0;
                      lastInvokeTime = time;
                      result = func.apply(thisArg, args);
                      return result;
                    }
                    function leadingEdge(time) {
                      lastInvokeTime = time;
                      timerId = setTimeout(timerExpired, wait);
                      return leading ? invokeFunc(time) : result;
                    }
                    function remainingWait(time) {
                      var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;
                      return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
                    }
                    function shouldInvoke(time) {
                      var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;
                      return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
                    }
                    function timerExpired() {
                      var time = now();
                      if (shouldInvoke(time)) {
                        return trailingEdge(time);
                      }
                      timerId = setTimeout(timerExpired, remainingWait(time));
                    }
                    function trailingEdge(time) {
                      timerId = void 0;
                      if (trailing && lastArgs) {
                        return invokeFunc(time);
                      }
                      lastArgs = lastThis = void 0;
                      return result;
                    }
                    function cancel() {
                      if (timerId !== void 0) {
                        clearTimeout(timerId);
                      }
                      lastInvokeTime = 0;
                      lastArgs = lastCallTime = lastThis = timerId = void 0;
                    }
                    function flush() {
                      return timerId === void 0 ? result : trailingEdge(now());
                    }
                    function debounced() {
                      var time = now(), isInvoking = shouldInvoke(time);
                      lastArgs = arguments;
                      lastThis = this;
                      lastCallTime = time;
                      if (isInvoking) {
                        if (timerId === void 0) {
                          return leadingEdge(lastCallTime);
                        }
                        if (maxing) {
                          clearTimeout(timerId);
                          timerId = setTimeout(timerExpired, wait);
                          return invokeFunc(lastCallTime);
                        }
                      }
                      if (timerId === void 0) {
                        timerId = setTimeout(timerExpired, wait);
                      }
                      return result;
                    }
                    debounced.cancel = cancel;
                    debounced.flush = flush;
                    return debounced;
                  }
                  module3.exports = debounce;
                })
              ),
              /***/
              8278: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseRest = __webpack_require__3(3408), eq = __webpack_require__3(8330), isIterateeCall = __webpack_require__3(5934), keysIn = __webpack_require__3(7495);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var defaults = baseRest(function(object, sources) {
                    object = Object(object);
                    var index = -1;
                    var length = sources.length;
                    var guard = length > 2 ? sources[2] : void 0;
                    if (guard && isIterateeCall(sources[0], sources[1], guard)) {
                      length = 1;
                    }
                    while (++index < length) {
                      var source = sources[index];
                      var props = keysIn(source);
                      var propsIndex = -1;
                      var propsLength = props.length;
                      while (++propsIndex < propsLength) {
                        var key = props[propsIndex];
                        var value = object[key];
                        if (value === void 0 || eq(value, objectProto[key]) && !hasOwnProperty.call(object, key)) {
                          object[key] = source[key];
                        }
                      }
                    }
                    return object;
                  });
                  module3.exports = defaults;
                })
              ),
              /***/
              8330: (
                /***/
                ((module3) => {
                  function eq(value, other) {
                    return value === other || value !== value && other !== other;
                  }
                  module3.exports = eq;
                })
              ),
              /***/
              3131: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var escapeHtmlChar = __webpack_require__3(9025), toString = __webpack_require__3(7060);
                  var reUnescapedHtml = /[&<>"']/g, reHasUnescapedHtml = RegExp(reUnescapedHtml.source);
                  function escape(string) {
                    string = toString(string);
                    return string && reHasUnescapedHtml.test(string) ? string.replace(reUnescapedHtml, escapeHtmlChar) : string;
                  }
                  module3.exports = escape;
                })
              ),
              /***/
              5098: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var toString = __webpack_require__3(7060);
                  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g, reHasRegExpChar = RegExp(reRegExpChar.source);
                  function escapeRegExp(string) {
                    string = toString(string);
                    return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar, "\\$&") : string;
                  }
                  module3.exports = escapeRegExp;
                })
              ),
              /***/
              4455: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var createFind = __webpack_require__3(7216), findIndex = __webpack_require__3(9339);
                  var find = createFind(findIndex);
                  module3.exports = find;
                })
              ),
              /***/
              9339: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseFindIndex = __webpack_require__3(6917), baseIteratee = __webpack_require__3(7675), toInteger = __webpack_require__3(8007);
                  var nativeMax = Math.max;
                  function findIndex(array, predicate, fromIndex) {
                    var length = array == null ? 0 : array.length;
                    if (!length) {
                      return -1;
                    }
                    var index = fromIndex == null ? 0 : toInteger(fromIndex);
                    if (index < 0) {
                      index = nativeMax(length + index, 0);
                    }
                    return baseFindIndex(array, baseIteratee(predicate, 3), index);
                  }
                  module3.exports = findIndex;
                })
              ),
              /***/
              2427: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseFindIndex = __webpack_require__3(6917), baseIteratee = __webpack_require__3(7675), toInteger = __webpack_require__3(8007);
                  var nativeMax = Math.max, nativeMin = Math.min;
                  function findLastIndex(array, predicate, fromIndex) {
                    var length = array == null ? 0 : array.length;
                    if (!length) {
                      return -1;
                    }
                    var index = length - 1;
                    if (fromIndex !== void 0) {
                      index = toInteger(fromIndex);
                      index = fromIndex < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);
                    }
                    return baseFindIndex(array, baseIteratee(predicate, 3), index, true);
                  }
                  module3.exports = findLastIndex;
                })
              ),
              /***/
              6501: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseFlatten = __webpack_require__3(4958), map = __webpack_require__3(7528);
                  function flatMap(collection, iteratee) {
                    return baseFlatten(map(collection, iteratee), 1);
                  }
                  module3.exports = flatMap;
                })
              ),
              /***/
              4176: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseFlatten = __webpack_require__3(4958);
                  function flatten2(array) {
                    var length = array == null ? 0 : array.length;
                    return length ? baseFlatten(array, 1) : [];
                  }
                  module3.exports = flatten2;
                })
              ),
              /***/
              1214: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseGet = __webpack_require__3(384);
                  function get(object, path, defaultValue) {
                    var result = object == null ? void 0 : baseGet(object, path);
                    return result === void 0 ? defaultValue : result;
                  }
                  module3.exports = get;
                })
              ),
              /***/
              8765: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseHasIn = __webpack_require__3(6571), hasPath = __webpack_require__3(2248);
                  function hasIn(object, path) {
                    return object != null && hasPath(object, path, baseHasIn);
                  }
                  module3.exports = hasIn;
                })
              ),
              /***/
              1686: (
                /***/
                ((module3) => {
                  function identity(value) {
                    return value;
                  }
                  module3.exports = identity;
                })
              ),
              /***/
              5193: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIndexOf = __webpack_require__3(8357), isArrayLike = __webpack_require__3(6316), isString = __webpack_require__3(3085), toInteger = __webpack_require__3(8007), values = __webpack_require__3(2);
                  var nativeMax = Math.max;
                  function includes(collection, value, fromIndex, guard) {
                    collection = isArrayLike(collection) ? collection : values(collection);
                    fromIndex = fromIndex && !guard ? toInteger(fromIndex) : 0;
                    var length = collection.length;
                    if (fromIndex < 0) {
                      fromIndex = nativeMax(length + fromIndex, 0);
                    }
                    return isString(collection) ? fromIndex <= length && collection.indexOf(value, fromIndex) > -1 : !!length && baseIndexOf(collection, value, fromIndex) > -1;
                  }
                  module3.exports = includes;
                })
              ),
              /***/
              4225: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayMap = __webpack_require__3(14), baseIntersection = __webpack_require__3(739), baseRest = __webpack_require__3(3408), castArrayLikeObject = __webpack_require__3(9471);
                  var intersection = baseRest(function(arrays) {
                    var mapped = arrayMap(arrays, castArrayLikeObject);
                    return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped) : [];
                  });
                  module3.exports = intersection;
                })
              ),
              /***/
              3929: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIteratee = __webpack_require__3(7675), createInverter = __webpack_require__3(1624);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var nativeObjectToString = objectProto.toString;
                  var invertBy = createInverter(function(result, value, key) {
                    if (value != null && typeof value.toString != "function") {
                      value = nativeObjectToString.call(value);
                    }
                    if (hasOwnProperty.call(result, value)) {
                      result[value].push(key);
                    } else {
                      result[value] = [key];
                    }
                  }, baseIteratee);
                  module3.exports = invertBy;
                })
              ),
              /***/
              2382: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIsArguments = __webpack_require__3(2744), isObjectLike = __webpack_require__3(2620);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var propertyIsEnumerable = objectProto.propertyIsEnumerable;
                  var isArguments = baseIsArguments(/* @__PURE__ */ (function() {
                    return arguments;
                  })()) ? baseIsArguments : function(value) {
                    return isObjectLike(value) && hasOwnProperty.call(value, "callee") && !propertyIsEnumerable.call(value, "callee");
                  };
                  module3.exports = isArguments;
                })
              ),
              /***/
              2003: (
                /***/
                ((module3) => {
                  var isArray = Array.isArray;
                  module3.exports = isArray;
                })
              ),
              /***/
              6316: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isFunction = __webpack_require__3(8148), isLength = __webpack_require__3(7164);
                  function isArrayLike(value) {
                    return value != null && isLength(value.length) && !isFunction(value);
                  }
                  module3.exports = isArrayLike;
                })
              ),
              /***/
              1899: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var isArrayLike = __webpack_require__3(6316), isObjectLike = __webpack_require__3(2620);
                  function isArrayLikeObject(value) {
                    return isObjectLike(value) && isArrayLike(value);
                  }
                  module3.exports = isArrayLikeObject;
                })
              ),
              /***/
              1262: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  module3 = __webpack_require__3.nmd(module3);
                  var root = __webpack_require__3(9107), stubFalse = __webpack_require__3(2125);
                  var freeExports = exports3 && !exports3.nodeType && exports3;
                  var freeModule = freeExports && true && module3 && !module3.nodeType && module3;
                  var moduleExports = freeModule && freeModule.exports === freeExports;
                  var Buffer2 = moduleExports ? root.Buffer : void 0;
                  var nativeIsBuffer = Buffer2 ? Buffer2.isBuffer : void 0;
                  var isBuffer = nativeIsBuffer || stubFalse;
                  module3.exports = isBuffer;
                })
              ),
              /***/
              1470: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIsEqual = __webpack_require__3(9336);
                  function isEqual(value, other) {
                    return baseIsEqual(value, other);
                  }
                  module3.exports = isEqual;
                })
              ),
              /***/
              8148: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseGetTag = __webpack_require__3(6522), isObject = __webpack_require__3(5603);
                  var asyncTag = "[object AsyncFunction]", funcTag = "[object Function]", genTag = "[object GeneratorFunction]", proxyTag = "[object Proxy]";
                  function isFunction(value) {
                    if (!isObject(value)) {
                      return false;
                    }
                    var tag = baseGetTag(value);
                    return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
                  }
                  module3.exports = isFunction;
                })
              ),
              /***/
              7164: (
                /***/
                ((module3) => {
                  var MAX_SAFE_INTEGER = 9007199254740991;
                  function isLength(value) {
                    return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
                  }
                  module3.exports = isLength;
                })
              ),
              /***/
              5603: (
                /***/
                ((module3) => {
                  function isObject(value) {
                    var type = typeof value;
                    return value != null && (type == "object" || type == "function");
                  }
                  module3.exports = isObject;
                })
              ),
              /***/
              2620: (
                /***/
                ((module3) => {
                  function isObjectLike(value) {
                    return value != null && typeof value == "object";
                  }
                  module3.exports = isObjectLike;
                })
              ),
              /***/
              3085: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseGetTag = __webpack_require__3(6522), isArray = __webpack_require__3(2003), isObjectLike = __webpack_require__3(2620);
                  var stringTag = "[object String]";
                  function isString(value) {
                    return typeof value == "string" || !isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag;
                  }
                  module3.exports = isString;
                })
              ),
              /***/
              6596: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseGetTag = __webpack_require__3(6522), isObjectLike = __webpack_require__3(2620);
                  var symbolTag = "[object Symbol]";
                  function isSymbol(value) {
                    return typeof value == "symbol" || isObjectLike(value) && baseGetTag(value) == symbolTag;
                  }
                  module3.exports = isSymbol;
                })
              ),
              /***/
              9221: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIsTypedArray = __webpack_require__3(5387), baseUnary = __webpack_require__3(2347), nodeUtil = __webpack_require__3(8315);
                  var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;
                  var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;
                  module3.exports = isTypedArray;
                })
              ),
              /***/
              5304: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayLikeKeys = __webpack_require__3(7137), baseKeys = __webpack_require__3(6794), isArrayLike = __webpack_require__3(6316);
                  function keys(object) {
                    return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
                  }
                  module3.exports = keys;
                })
              ),
              /***/
              7495: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayLikeKeys = __webpack_require__3(7137), baseKeysIn = __webpack_require__3(8157), isArrayLike = __webpack_require__3(6316);
                  function keysIn(object) {
                    return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
                  }
                  module3.exports = keysIn;
                })
              ),
              /***/
              6456: (
                /***/
                ((module3) => {
                  function last2(array) {
                    var length = array == null ? 0 : array.length;
                    return length ? array[length - 1] : void 0;
                  }
                  module3.exports = last2;
                })
              ),
              /***/
              7528: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayMap = __webpack_require__3(14), baseIteratee = __webpack_require__3(7675), baseMap = __webpack_require__3(5718), isArray = __webpack_require__3(2003);
                  function map(collection, iteratee) {
                    var func = isArray(collection) ? arrayMap : baseMap;
                    return func(collection, baseIteratee(iteratee, 3));
                  }
                  module3.exports = map;
                })
              ),
              /***/
              9513: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var MapCache = __webpack_require__3(3287);
                  var FUNC_ERROR_TEXT = "Expected a function";
                  function memoize(func, resolver) {
                    if (typeof func != "function" || resolver != null && typeof resolver != "function") {
                      throw new TypeError(FUNC_ERROR_TEXT);
                    }
                    var memoized = function() {
                      var args = arguments, key = resolver ? resolver.apply(this, args) : args[0], cache = memoized.cache;
                      if (cache.has(key)) {
                        return cache.get(key);
                      }
                      var result = func.apply(this, args);
                      memoized.cache = cache.set(key, result) || cache;
                      return result;
                    };
                    memoized.cache = new (memoize.Cache || MapCache)();
                    return memoized;
                  }
                  memoize.Cache = MapCache;
                  module3.exports = memoize;
                })
              ),
              /***/
              1700: (
                /***/
                ((module3) => {
                  function noop() {
                  }
                  module3.exports = noop;
                })
              ),
              /***/
              1406: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var root = __webpack_require__3(9107);
                  var now = function() {
                    return root.Date.now();
                  };
                  module3.exports = now;
                })
              ),
              /***/
              8921: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var before = __webpack_require__3(163);
                  function once(func) {
                    return before(2, func);
                  }
                  module3.exports = once;
                })
              ),
              /***/
              7093: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseProperty = __webpack_require__3(1171), basePropertyDeep = __webpack_require__3(4589), isKey = __webpack_require__3(5456), toKey = __webpack_require__3(8059);
                  function property(path) {
                    return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);
                  }
                  module3.exports = property;
                })
              ),
              /***/
              2036: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIteratee = __webpack_require__3(7675), basePullAt = __webpack_require__3(7916);
                  function remove(array, predicate) {
                    var result = [];
                    if (!(array && array.length)) {
                      return result;
                    }
                    var index = -1, indexes = [], length = array.length;
                    predicate = baseIteratee(predicate, 3);
                    while (++index < length) {
                      var value = array[index];
                      if (predicate(value, index, array)) {
                        result.push(value);
                        indexes.push(index);
                      }
                    }
                    basePullAt(array, indexes);
                    return result;
                  }
                  module3.exports = remove;
                })
              ),
              /***/
              3281: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseFlatten = __webpack_require__3(4958), baseOrderBy = __webpack_require__3(3729), baseRest = __webpack_require__3(3408), isIterateeCall = __webpack_require__3(5934);
                  var sortBy = baseRest(function(collection, iteratees) {
                    if (collection == null) {
                      return [];
                    }
                    var length = iteratees.length;
                    if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {
                      iteratees = [];
                    } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {
                      iteratees = [iteratees[0]];
                    }
                    return baseOrderBy(collection, baseFlatten(iteratees, 1), []);
                  });
                  module3.exports = sortBy;
                })
              ),
              /***/
              7013: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseClamp = __webpack_require__3(9631), baseToString = __webpack_require__3(8354), toInteger = __webpack_require__3(8007), toString = __webpack_require__3(7060);
                  function startsWith(string, target, position) {
                    string = toString(string);
                    position = position == null ? 0 : baseClamp(toInteger(position), 0, string.length);
                    target = baseToString(target);
                    return string.slice(position, position + target.length) == target;
                  }
                  module3.exports = startsWith;
                })
              ),
              /***/
              119: (
                /***/
                ((module3) => {
                  function stubArray() {
                    return [];
                  }
                  module3.exports = stubArray;
                })
              ),
              /***/
              2125: (
                /***/
                ((module3) => {
                  function stubFalse() {
                    return false;
                  }
                  module3.exports = stubFalse;
                })
              ),
              /***/
              1680: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var debounce = __webpack_require__3(4503), isObject = __webpack_require__3(5603);
                  var FUNC_ERROR_TEXT = "Expected a function";
                  function throttle(func, wait, options) {
                    var leading = true, trailing = true;
                    if (typeof func != "function") {
                      throw new TypeError(FUNC_ERROR_TEXT);
                    }
                    if (isObject(options)) {
                      leading = "leading" in options ? !!options.leading : leading;
                      trailing = "trailing" in options ? !!options.trailing : trailing;
                    }
                    return debounce(func, wait, {
                      "leading": leading,
                      "maxWait": wait,
                      "trailing": trailing
                    });
                  }
                  module3.exports = throttle;
                })
              ),
              /***/
              3950: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var toNumber = __webpack_require__3(3920);
                  var INFINITY = 1 / 0, MAX_INTEGER = 17976931348623157e292;
                  function toFinite(value) {
                    if (!value) {
                      return value === 0 ? value : 0;
                    }
                    value = toNumber(value);
                    if (value === INFINITY || value === -INFINITY) {
                      var sign = value < 0 ? -1 : 1;
                      return sign * MAX_INTEGER;
                    }
                    return value === value ? value : 0;
                  }
                  module3.exports = toFinite;
                })
              ),
              /***/
              8007: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var toFinite = __webpack_require__3(3950);
                  function toInteger(value) {
                    var result = toFinite(value), remainder = result % 1;
                    return result === result ? remainder ? result - remainder : result : 0;
                  }
                  module3.exports = toInteger;
                })
              ),
              /***/
              3920: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseTrim = __webpack_require__3(9070), isObject = __webpack_require__3(5603), isSymbol = __webpack_require__3(6596);
                  var NAN = 0 / 0;
                  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
                  var reIsBinary = /^0b[01]+$/i;
                  var reIsOctal = /^0o[0-7]+$/i;
                  var freeParseInt = parseInt;
                  function toNumber(value) {
                    if (typeof value == "number") {
                      return value;
                    }
                    if (isSymbol(value)) {
                      return NAN;
                    }
                    if (isObject(value)) {
                      var other = typeof value.valueOf == "function" ? value.valueOf() : value;
                      value = isObject(other) ? other + "" : other;
                    }
                    if (typeof value != "string") {
                      return value === 0 ? value : +value;
                    }
                    value = baseTrim(value);
                    var isBinary = reIsBinary.test(value);
                    return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
                  }
                  module3.exports = toNumber;
                })
              ),
              /***/
              7060: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseToString = __webpack_require__3(8354);
                  function toString(value) {
                    return value == null ? "" : baseToString(value);
                  }
                  module3.exports = toString;
                })
              ),
              /***/
              1285: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseUniq = __webpack_require__3(7971);
                  function uniq(array) {
                    return array && array.length ? baseUniq(array) : [];
                  }
                  module3.exports = uniq;
                })
              ),
              /***/
              8496: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseIteratee = __webpack_require__3(7675), baseUniq = __webpack_require__3(7971);
                  function uniqBy(array, iteratee) {
                    return array && array.length ? baseUniq(array, baseIteratee(iteratee, 2)) : [];
                  }
                  module3.exports = uniqBy;
                })
              ),
              /***/
              2344: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayFilter = __webpack_require__3(3928), arrayMap = __webpack_require__3(14), baseProperty = __webpack_require__3(1171), baseTimes = __webpack_require__3(5410), isArrayLikeObject = __webpack_require__3(1899);
                  var nativeMax = Math.max;
                  function unzip(array) {
                    if (!(array && array.length)) {
                      return [];
                    }
                    var length = 0;
                    array = arrayFilter(array, function(group) {
                      if (isArrayLikeObject(group)) {
                        length = nativeMax(group.length, length);
                        return true;
                      }
                    });
                    return baseTimes(length, function(index) {
                      return arrayMap(array, baseProperty(index));
                    });
                  }
                  module3.exports = unzip;
                })
              ),
              /***/
              2: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseValues = __webpack_require__3(4956), keys = __webpack_require__3(5304);
                  function values(object) {
                    return object == null ? [] : baseValues(object, keys(object));
                  }
                  module3.exports = values;
                })
              ),
              /***/
              7981: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var baseRest = __webpack_require__3(3408), unzip = __webpack_require__3(2344);
                  var zip = baseRest(unzip);
                  module3.exports = zip;
                })
              ),
              /***/
              9864: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  exports3.__esModule = true;
                  exports3["default"] = match;
                  var proto = __webpack_require__3.g.Element && __webpack_require__3.g.Element.prototype;
                  var vendor = proto && (proto.matches || proto.matchesSelector || proto.webkitMatchesSelector || proto.mozMatchesSelector || proto.msMatchesSelector || proto.oMatchesSelector);
                  function match(el, selector) {
                    if (vendor) return vendor.call(el, selector);
                    var parentNode = el.parentNode;
                    if (parentNode && typeof parentNode.querySelectorAll === "function") {
                      var nodes = parentNode.querySelectorAll(selector);
                      for (var i2 = 0; i2 < nodes.length; i2++) {
                        if (nodes[i2] === el) return true;
                      }
                    }
                    return false;
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              5946: (
                /***/
                ((module3) => {
                  "use strict";
                  var getOwnPropertySymbols = Object.getOwnPropertySymbols;
                  var hasOwnProperty = Object.prototype.hasOwnProperty;
                  var propIsEnumerable = Object.prototype.propertyIsEnumerable;
                  function toObject(val) {
                    if (val === null || val === void 0) {
                      throw new TypeError("Object.assign cannot be called with null or undefined");
                    }
                    return Object(val);
                  }
                  function shouldUseNative() {
                    try {
                      if (!Object.assign) {
                        return false;
                      }
                      var test1 = new String("abc");
                      test1[5] = "de";
                      if (Object.getOwnPropertyNames(test1)[0] === "5") {
                        return false;
                      }
                      var test2 = {};
                      for (var i2 = 0; i2 < 10; i2++) {
                        test2["_" + String.fromCharCode(i2)] = i2;
                      }
                      var order2 = Object.getOwnPropertyNames(test2).map(function(n) {
                        return test2[n];
                      });
                      if (order2.join("") !== "0123456789") {
                        return false;
                      }
                      var test3 = {};
                      "abcdefghijklmnopqrst".split("").forEach(function(letter) {
                        test3[letter] = letter;
                      });
                      if (Object.keys(Object.assign({}, test3)).join("") !== "abcdefghijklmnopqrst") {
                        return false;
                      }
                      return true;
                    } catch (err) {
                      return false;
                    }
                  }
                  module3.exports = shouldUseNative() ? Object.assign : function(target, source) {
                    var from;
                    var to = toObject(target);
                    var symbols;
                    for (var s = 1; s < arguments.length; s++) {
                      from = Object(arguments[s]);
                      for (var key in from) {
                        if (hasOwnProperty.call(from, key)) {
                          to[key] = from[key];
                        }
                      }
                      if (getOwnPropertySymbols) {
                        symbols = getOwnPropertySymbols(from);
                        for (var i2 = 0; i2 < symbols.length; i2++) {
                          if (propIsEnumerable.call(from, symbols[i2])) {
                            to[symbols[i2]] = from[symbols[i2]];
                          }
                        }
                      }
                    }
                    return to;
                  };
                })
              ),
              /***/
              3520: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var freeze = __webpack_require__3.g.Object.freeze || function(x2) {
                    return x2;
                  };
                  var _default = freeze;
                  exports3["default"] = _default;
                  module3.exports = exports3.default;
                })
              ),
              /***/
              451: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _immutabilityHelper = _interopRequireDefault(__webpack_require__3(2996));
                  var _findIndex = _interopRequireDefault(__webpack_require__3(9339));
                  var _findLastIndex = _interopRequireDefault(__webpack_require__3(2427));
                  var _invertBy = _interopRequireDefault(__webpack_require__3(3929));
                  var _sortBy = _interopRequireDefault(__webpack_require__3(3281));
                  var _freeze = _interopRequireDefault(__webpack_require__3(3520));
                  function ownKeys(object, enumerableOnly) {
                    var keys = Object.keys(object);
                    if (Object.getOwnPropertySymbols) {
                      var symbols = Object.getOwnPropertySymbols(object);
                      enumerableOnly && (symbols = symbols.filter(function(sym) {
                        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
                      })), keys.push.apply(keys, symbols);
                    }
                    return keys;
                  }
                  function _objectSpread(target) {
                    for (var i2 = 1; i2 < arguments.length; i2++) {
                      var source = null != arguments[i2] ? arguments[i2] : {};
                      i2 % 2 ? ownKeys(Object(source), true).forEach(function(key) {
                        (0, _defineProperty2["default"])(target, key, source[key]);
                      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function(key) {
                        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
                      });
                    }
                    return target;
                  }
                  function itemToCombinedId(x2) {
                    return "".concat(JSON.stringify(x2.groupId), ":").concat(JSON.stringify(x2.id));
                  }
                  var OrderManager = /* @__PURE__ */ (function() {
                    function OrderManager2(options) {
                      (0, _classCallCheck2["default"])(this, OrderManager2);
                      (0, _defineProperty2["default"])(this, "_items", (0, _freeze["default"])([]));
                      (0, _defineProperty2["default"])(this, "_needsSort", false);
                      this._get = options.get;
                      this._set = options.set;
                      this._maxLimit = options.maxLimit || 200;
                    }
                    (0, _createClass2["default"])(OrderManager2, [{
                      key: "_read",
                      value: function _read() {
                        var pdata = this._get();
                        return pdata == null ? {
                          order: []
                        } : pdata;
                      }
                    }, {
                      key: "_save",
                      value: function _save(pdata) {
                        if (pdata.order.length > this._maxLimit) {
                          var itemsAndIndexes = pdata.order.map(function(item, index) {
                            return {
                              item,
                              index
                            };
                          });
                          var indexesToRemove = (0, _sortBy["default"])(itemsAndIndexes, function(x2) {
                            return x2.item.lastUse;
                          }).slice(0, pdata.order.length - this._maxLimit).map(function(x2) {
                            return x2.index;
                          });
                          var sortedIndexesToRemove = (0, _sortBy["default"])(indexesToRemove, function(x2) {
                            return -x2;
                          });
                          pdata = (0, _immutabilityHelper["default"])(pdata, {
                            order: {
                              $splice: sortedIndexesToRemove.map(function(i2) {
                                return [i2, 1];
                              })
                            }
                          });
                        }
                        this._set(pdata);
                      }
                    }, {
                      key: "_updatePersistedDataWithItem",
                      value: function _updatePersistedDataWithItem(item) {
                        var pdata = this._read();
                        var ixOfId = (0, _findIndex["default"])(pdata.order, function(x2) {
                          return x2.groupId === item.groupId && x2.id === item.id;
                        });
                        if (ixOfId !== -1 && pdata.order[ixOfId].orderHint !== item.orderHint) {
                          pdata = (0, _immutabilityHelper["default"])(pdata, {
                            order: {
                              $splice: [[ixOfId, 1]]
                            }
                          });
                          ixOfId = -1;
                        }
                        if (ixOfId !== -1) {
                          pdata = (0, _immutabilityHelper["default"])(pdata, {
                            order: {
                              $splice: [[ixOfId, 1, {
                                groupId: item.groupId,
                                id: item.id,
                                orderHint: item.orderHint,
                                lastUse: Date.now()
                              }]]
                            }
                          });
                        } else {
                          var ixToInsertAt;
                          var ixOfLesserOrEqualGroupItem = (0, _findLastIndex["default"])(pdata.order, function(x2) {
                            return x2.groupId === item.groupId && x2.orderHint <= item.orderHint;
                          });
                          if (ixOfLesserOrEqualGroupItem !== -1) {
                            ixToInsertAt = ixOfLesserOrEqualGroupItem + 1;
                          } else {
                            var ixOfGreaterGroupItem = (0, _findIndex["default"])(pdata.order, function(x2) {
                              return x2.groupId === item.groupId;
                            });
                            if (ixOfGreaterGroupItem !== -1) {
                              ixToInsertAt = ixOfGreaterGroupItem;
                            } else {
                              var groupIdsToIndexes = (0, _invertBy["default"])(pdata.order, function(x2) {
                                return x2.groupId;
                              });
                              var groupIds = Object.keys(groupIdsToIndexes);
                              var roll = Math.floor(Math.random() * (groupIds.length + 1));
                              if (roll === groupIds.length) {
                                ixToInsertAt = pdata.order.length;
                              } else {
                                ixToInsertAt = groupIdsToIndexes[groupIds[roll]][0];
                              }
                            }
                          }
                          ixToInsertAt;
                          pdata = (0, _immutabilityHelper["default"])(pdata, {
                            order: {
                              $splice: [[ixToInsertAt, 0, {
                                groupId: item.groupId,
                                id: item.id,
                                orderHint: item.orderHint,
                                lastUse: Date.now()
                              }]]
                            }
                          });
                        }
                        this._save(pdata);
                        return pdata;
                      }
                    }, {
                      key: "_sortItemsIfNecessary",
                      value: function _sortItemsIfNecessary(pdata) {
                        if (this._needsSort) {
                          if (!pdata) pdata = this._read();
                          var idsToIndexes = (0, _invertBy["default"])(pdata.order, itemToCombinedId);
                          this._items = (0, _freeze["default"])((0, _sortBy["default"])(this._items, function(item) {
                            var id = itemToCombinedId(item);
                            return Object.prototype.hasOwnProperty.call(idsToIndexes, id) ? Number(idsToIndexes[id][0]) : 0;
                          }));
                          this._needsSort = false;
                        }
                      }
                    }, {
                      key: "addItem",
                      value: function addItem(item) {
                        this._updatePersistedDataWithItem(item);
                        this._needsSort = true;
                        this._items = this._items.concat([(0, _freeze["default"])({
                          groupId: item.groupId,
                          id: item.id,
                          orderHint: item.orderHint,
                          value: item.value
                        })]);
                      }
                    }, {
                      key: "updateItemValue",
                      value: function updateItemValue(groupId, id, value) {
                        this._items = (0, _freeze["default"])(this._items.map(function(item) {
                          if (item.groupId === groupId && item.id === id) {
                            return (0, _freeze["default"])(_objectSpread(_objectSpread({}, item), {}, {
                              value
                            }));
                          } else {
                            return item;
                          }
                        }));
                      }
                    }, {
                      key: "updateItemValueByIndex",
                      value: function updateItemValueByIndex(index, value) {
                        this._sortItemsIfNecessary();
                        this._items = (0, _freeze["default"])((0, _immutabilityHelper["default"])(this._items, {
                          $splice: [[index, 1, (0, _freeze["default"])(_objectSpread(_objectSpread({}, this._items[index]), {}, {
                            value
                          }))]]
                        }));
                      }
                    }, {
                      key: "removeItem",
                      value: function removeItem(groupId, id) {
                        this._items = (0, _freeze["default"])(this._items.filter(function(item) {
                          return item.groupId !== groupId || item.id !== id;
                        }));
                      }
                    }, {
                      key: "removeItemByIndex",
                      value: function removeItemByIndex(index) {
                        this._sortItemsIfNecessary();
                        this._items = (0, _freeze["default"])((0, _immutabilityHelper["default"])(this._items, {
                          $splice: [[index, 1]]
                        }));
                      }
                    }, {
                      key: "moveItem",
                      value: function moveItem(sourceIndex, destinationIndex) {
                        var pdata = this._read();
                        this._sortItemsIfNecessary(pdata);
                        var source = this._items[sourceIndex];
                        var destination = this._items[destinationIndex];
                        var sourcePIx = (0, _findIndex["default"])(pdata.order, function(item) {
                          return item.groupId === source.groupId && item.id === source.id;
                        });
                        var destinationPIx = (0, _findIndex["default"])(pdata.order, function(item) {
                          return item.groupId === destination.groupId && item.id === destination.id;
                        });
                        pdata = (0, _immutabilityHelper["default"])(pdata, {
                          order: {
                            $splice: [[sourcePIx, 1], [destinationPIx, 0, pdata.order[sourcePIx]]]
                          }
                        });
                        this._save(pdata);
                        this._needsSort = true;
                      }
                    }, {
                      key: "getOrderedItems",
                      value: function getOrderedItems() {
                        this._sortItemsIfNecessary();
                        return this._items;
                      }
                    }, {
                      key: "reload",
                      value: function reload() {
                        this._needsSort = true;
                      }
                    }]);
                    return OrderManager2;
                  })();
                  exports3["default"] = OrderManager;
                  module3.exports = exports3.default;
                })
              ),
              /***/
              3972: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = createCssFn;
                  var _matchesSelectorNg = _interopRequireDefault(__webpack_require__3(9864));
                  function createCssFn(selector) {
                    return function(el) {
                      return (0, _matchesSelectorNg["default"])(el, selector);
                    };
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              1855: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = createTransformer;
                  var _transducers = _interopRequireDefault(__webpack_require__3(6046));
                  var _transduce = _interopRequireDefault(__webpack_require__3(1365));
                  var _filter = _interopRequireDefault(__webpack_require__3(3800));
                  var _merge = _interopRequireDefault(__webpack_require__3(9976));
                  var _createCssFn = _interopRequireDefault(__webpack_require__3(3972));
                  var _watchMutations = _interopRequireDefault(__webpack_require__3(5174));
                  var _watchFilteredChildren = _interopRequireDefault(__webpack_require__3(8572));
                  function createTransformer(scheduler, selectors) {
                    var transformers = selectors.map(function(item) {
                      if (typeof item === "string") {
                        var condFn = (0, _createCssFn["default"])(item);
                        return function(liveSet) {
                          return (0, _watchFilteredChildren["default"])(liveSet, condFn);
                        };
                      } else if (item.$or) {
                        var _transformers = item.$or.map(function(s) {
                          return createTransformer(scheduler, s);
                        });
                        return function(liveSet) {
                          return (0, _merge["default"])(_transformers.map(function(transformer) {
                            return transformer(liveSet);
                          }));
                        };
                      } else if (item.$watch) {
                        var _item$$watch = item.$watch, attributeFilter = _item$$watch.attributeFilter, cond = _item$$watch.cond;
                        var _condFn = typeof cond === "function" ? cond : (0, _createCssFn["default"])(cond);
                        return function(liveSet) {
                          return (0, _watchMutations["default"])(liveSet, attributeFilter, _condFn);
                        };
                      } else if (item.$log) {
                        var $log = item.$log;
                        var filterFn = function filterFn2(value) {
                          console.log($log, value.el);
                          return true;
                        };
                        return function(liveSet) {
                          return (0, _filter["default"])(liveSet, filterFn);
                        };
                      } else if (item.$filter) {
                        var $filter = item.$filter;
                        var _filterFn = function _filterFn2(_ref) {
                          var el = _ref.el;
                          return $filter(el);
                        };
                        return function(liveSet) {
                          return (0, _filter["default"])(liveSet, _filterFn);
                        };
                      } else if (item.$map) {
                        var $map = item.$map;
                        var transducer = _transducers["default"].compose(_transducers["default"].map(function(ec) {
                          return {
                            el: $map(ec.el),
                            parents: ec.parents
                          };
                        }), _transducers["default"].filter(function(ec) {
                          return ec.el != null;
                        }));
                        return function(liveSet) {
                          return (0, _transduce["default"])(liveSet, transducer);
                        };
                      }
                      throw new Error("Invalid selector item: ".concat(JSON.stringify(item)));
                    });
                    return transformers.reduce(function(combined, transformer) {
                      return function(liveSet) {
                        return transformer(combined(liveSet));
                      };
                    }, function(x2) {
                      return x2;
                    });
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              8572: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = watchFilteredChildren;
                  var _liveSet = _interopRequireDefault(__webpack_require__3(2436));
                  function watchFilteredChildren(input, condFn) {
                    return new _liveSet["default"]({
                      scheduler: input.getScheduler(),
                      read: function read() {
                        throw new Error();
                      },
                      listen: function listen(setValues, controller) {
                        setValues(/* @__PURE__ */ new Set());
                        var inputEntries = /* @__PURE__ */ new Map();
                        var outputEcs = /* @__PURE__ */ new Map();
                        function newEc(ec) {
                          function addedNode(child) {
                            if (child.nodeType !== 1) return;
                            if (condFn(child)) {
                              var childEc = {
                                el: child,
                                parents: ec.parents
                              };
                              outputEcs.set(child, childEc);
                              controller.add(childEc);
                            }
                          }
                          function removedNode(child) {
                            if (child.nodeType !== 1) return;
                            var childEc = outputEcs.get(child);
                            if (!childEc) return;
                            outputEcs["delete"](child);
                            controller.remove(childEc);
                          }
                          function changesHandler(mutations) {
                            if (mutations.length > 1) {
                              var removedEls = /* @__PURE__ */ new Set();
                              var addedEls = [];
                              mutations.forEach(function(_ref) {
                                var addedNodes = _ref.addedNodes, removedNodes = _ref.removedNodes;
                                for (var i2 = 0, len = removedNodes.length; i2 < len; i2++) {
                                  var _el = removedNodes[i2];
                                  if (_el.nodeType !== 1) continue;
                                  removedEls.add(removedNodes[i2]);
                                }
                                for (var _i = 0, _len = addedNodes.length; _i < _len; _i++) {
                                  var _el2 = addedNodes[_i];
                                  if (_el2.nodeType !== 1) continue;
                                  if (removedEls.has(_el2)) {
                                    removedEls["delete"](_el2);
                                  } else {
                                    addedEls.push(_el2);
                                  }
                                }
                              });
                              addedEls.forEach(addedNode);
                              removedEls.forEach(removedNode);
                            } else {
                              mutations.forEach(function(mutation) {
                                Array.prototype.forEach.call(mutation.addedNodes, addedNode);
                                Array.prototype.forEach.call(mutation.removedNodes, removedNode);
                              });
                            }
                          }
                          Array.prototype.forEach.call(ec.el.children, addedNode);
                          var observer = new MutationObserver(changesHandler);
                          observer.observe(ec.el, {
                            childList: true
                          });
                          inputEntries.set(ec, {
                            observer,
                            removedNode
                          });
                        }
                        function removedEc(ec) {
                          var entry = inputEntries.get(ec);
                          if (!entry) throw new Error("Should not happen: Unseen ElementContext removed");
                          entry.observer.takeRecords().forEach(function(mutation) {
                            Array.prototype.forEach.call(mutation.removedNodes, entry.removedNode);
                          });
                          entry.observer.disconnect();
                          Array.prototype.forEach.call(ec.el.children, entry.removedNode);
                          inputEntries["delete"](ec);
                        }
                        var sub = input.subscribe({
                          start: function start() {
                            input.values().forEach(newEc);
                          },
                          next: function next(changes) {
                            changes.forEach(function(change) {
                              if (change.type === "add") {
                                newEc(change.value);
                              } else if (change.type === "remove") {
                                removedEc(change.value);
                              }
                            });
                          }
                        });
                        return {
                          unsubscribe: function unsubscribe() {
                            sub.unsubscribe();
                            inputEntries.forEach(function(_ref2) {
                              var observer = _ref2.observer;
                              observer.disconnect();
                            });
                          },
                          pullChanges: function pullChanges() {
                            sub.pullChanges();
                          }
                        };
                      }
                    });
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              5174: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = watchMutations;
                  var _liveSet = _interopRequireDefault(__webpack_require__3(2436));
                  function watchMutations(input, attributeFilter, condFn) {
                    return new _liveSet["default"]({
                      scheduler: input.getScheduler(),
                      read: function read() {
                        throw new Error();
                      },
                      listen: function listen(setValues, controller) {
                        setValues(/* @__PURE__ */ new Set());
                        var entries = /* @__PURE__ */ new Map();
                        function newEc(ec) {
                          var mo = new MutationObserver(function(changes) {
                            if (changes.length === 0) return;
                            if (condFn(ec.el)) {
                              if (!entry.passed) {
                                entry.passed = true;
                                controller.add(ec);
                              }
                            } else {
                              if (entry.passed) {
                                entry.passed = false;
                                controller.remove(ec);
                              }
                            }
                          });
                          var entry = {
                            mo,
                            passed: false
                          };
                          if (condFn(ec.el)) {
                            entry.passed = true;
                            controller.add(ec);
                          }
                          mo.observe(ec.el, {
                            attributes: true,
                            attributeFilter
                          });
                          entries.set(ec, entry);
                        }
                        function removedEc(ec) {
                          var entry = entries.get(ec);
                          if (!entry) throw new Error("Should not happen: Unseen ElementContext removed");
                          entry.mo.disconnect();
                          if (entry.passed) {
                            controller.remove(ec);
                          }
                          entries["delete"](ec);
                        }
                        var sub = input.subscribe({
                          start: function start() {
                            input.values().forEach(newEc);
                          },
                          next: function next(changes) {
                            changes.forEach(function(change) {
                              if (change.type === "add") {
                                newEc(change.value);
                              } else if (change.type === "remove") {
                                removedEc(change.value);
                              }
                            });
                          }
                        });
                        return {
                          unsubscribe: function unsubscribe() {
                            sub.unsubscribe();
                            entries.forEach(function(_ref) {
                              var mo = _ref.mo;
                              mo.disconnect();
                            });
                          },
                          pullChanges: function pullChanges() {
                            sub.pullChanges();
                          }
                        };
                      }
                    });
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              855: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _liveSet = _interopRequireDefault(__webpack_require__3(2436));
                  var _merge = _interopRequireDefault(__webpack_require__3(9976));
                  var _flatMapR = _interopRequireDefault(__webpack_require__3(5145));
                  var _Scheduler = _interopRequireDefault(__webpack_require__3(4401));
                  var _tagTree = __webpack_require__3(7138);
                  var _watcherFinderMerger = _interopRequireDefault(__webpack_require__3(8897));
                  var _createTransformer = _interopRequireDefault(__webpack_require__3(1855));
                  function makeTagOptions(options) {
                    var map = /* @__PURE__ */ new Map();
                    var list = [];
                    Object.keys(options.tags).forEach(function(tag) {
                      var tagOptions = options.tags[tag];
                      var ownedBy = tagOptions.ownedBy;
                      list.push({
                        tag,
                        ownedBy
                      });
                      map.set(tag, tagOptions);
                    });
                    Object.keys(options.finders).concat(options.watchers.map(function(w) {
                      return w.tag;
                    })).forEach(function(tag) {
                      if (!map.has(tag)) {
                        map.set(tag, {
                          ownedBy: []
                        });
                        list.push({
                          tag
                        });
                      }
                    });
                    return {
                      map,
                      list
                    };
                  }
                  var PageParserTree = /* @__PURE__ */ (function() {
                    function PageParserTree2(root, options) {
                      var _this = this;
                      (0, _classCallCheck2["default"])(this, PageParserTree2);
                      (0, _defineProperty2["default"])(this, "tree", void 0);
                      (0, _defineProperty2["default"])(this, "_scheduler", new _Scheduler["default"]());
                      (0, _defineProperty2["default"])(this, "_treeController", void 0);
                      (0, _defineProperty2["default"])(this, "_rootMatchedSet", void 0);
                      (0, _defineProperty2["default"])(this, "_ecSources", void 0);
                      (0, _defineProperty2["default"])(this, "_logError", void 0);
                      (0, _defineProperty2["default"])(this, "_options", void 0);
                      (0, _defineProperty2["default"])(this, "_tagOptions", void 0);
                      (0, _defineProperty2["default"])(this, "_tagsList", void 0);
                      (0, _defineProperty2["default"])(this, "_subscriptions", []);
                      var rootEl;
                      if (root.nodeType === Node.DOCUMENT_NODE) {
                        rootEl = root.documentElement;
                        if (!rootEl) throw new Error("missing documentElement");
                      } else {
                        rootEl = root;
                      }
                      this._options = options;
                      this._logError = options.logError || function(err) {
                        setTimeout(function() {
                          throw err;
                        }, 0);
                      };
                      var _makeTagOptions = makeTagOptions(this._options), tagOptionsMap = _makeTagOptions.map, tags = _makeTagOptions.list;
                      this._tagOptions = tagOptionsMap;
                      this._tagsList = tags;
                      this.tree = new _tagTree.TagTree({
                        root: rootEl,
                        tags,
                        executor: function executor(controller) {
                          _this._treeController = controller;
                        }
                      });
                      this._rootMatchedSet = _liveSet["default"].constant(/* @__PURE__ */ new Set([{
                        el: this.tree.getValue(),
                        parents: [{
                          tag: null,
                          node: this.tree
                        }]
                      }]), {
                        scheduler: this._scheduler
                      });
                      this._setupWatchersAndFinders();
                    }
                    (0, _createClass2["default"])(PageParserTree2, [{
                      key: "_setupWatchersAndFinders",
                      value: function _setupWatchersAndFinders() {
                        var _this2 = this;
                        var tagsWithWatchers = /* @__PURE__ */ new Set();
                        this._options.watchers.forEach(function(watcher) {
                          tagsWithWatchers.add(watcher.tag);
                        });
                        this._ecSources = new Map(this._tagsList.map(function(_ref) {
                          var tag = _ref.tag;
                          var tagOptions = _this2._tagOptions.get(tag);
                          if (!tagOptions) throw new Error();
                          var ownedBy = new Set(tagOptions.ownedBy || []);
                          var _LiveSet$active = _liveSet["default"].active(null, {
                            scheduler: _this2._scheduler
                          }), liveSet = _LiveSet$active.liveSet, controller = _LiveSet$active.controller;
                          var combinedWatcherSet = tagsWithWatchers.has(tag) ? (0, _flatMapR["default"])(liveSet, function(s) {
                            return s;
                          }) : null;
                          var finder = _this2._options.finders[tag];
                          var ecsToTag = finder ? (0, _watcherFinderMerger["default"])(_this2._scheduler, _this2.tree, tag, tagOptions, combinedWatcherSet, finder, _this2._logError) : combinedWatcherSet || _liveSet["default"].constant(/* @__PURE__ */ new Set(), {
                            scheduler: _this2._scheduler
                          });
                          var elementsToNodes = /* @__PURE__ */ new Map();
                          function findParentNode(taggedParents) {
                            var parentNode;
                            for (var i2 = taggedParents.length - 1; i2 >= 0; i2--) {
                              if (taggedParents[i2].tag == null || ownedBy.has(taggedParents[i2].tag)) {
                                parentNode = taggedParents[i2].node;
                                break;
                              }
                            }
                            if (!parentNode) throw new Error();
                            return parentNode;
                          }
                          var ecSet = new _liveSet["default"]({
                            scheduler: _this2._scheduler,
                            read: function read() {
                              throw new Error();
                            },
                            listen: function listen(setValues, controller2) {
                              var m = /* @__PURE__ */ new Map();
                              var cb = function cb2(ec) {
                                var el = ec.el, parents = ec.parents;
                                var parentNode = findParentNode(parents);
                                var node = _this2._treeController.addTaggedValue(parentNode, tag, el);
                                if (elementsToNodes.has(el)) {
                                  _this2._logError(new Error("PageParserTree(".concat(tag, ") watcher received element twice")), el);
                                }
                                elementsToNodes.set(el, node);
                                var newParents = ec.parents.concat([{
                                  tag,
                                  node
                                }]);
                                return {
                                  el,
                                  parents: newParents
                                };
                              };
                              return ecsToTag.subscribe({
                                start: function start() {
                                  var s = /* @__PURE__ */ new Set();
                                  ecsToTag.values().forEach(function(value) {
                                    var newValue = cb(value);
                                    m.set(value, newValue);
                                    s.add(newValue);
                                  });
                                  setValues(s);
                                },
                                next: function next(changes) {
                                  var ecsRemovedInNotification = /* @__PURE__ */ new Set();
                                  if (changes.length > 1) {
                                    changes.forEach(function(change) {
                                      if (change.type === "remove") {
                                        ecsRemovedInNotification.add(change.value);
                                      }
                                    });
                                  }
                                  changes.forEach(function(change) {
                                    if (change.type === "add") {
                                      if (ecsRemovedInNotification.has(change.value)) return;
                                      var newValue = cb(change.value);
                                      m.set(change.value, newValue);
                                      controller2.add(newValue);
                                    } else if (change.type === "remove") {
                                      var _newValue = m.get(change.value);
                                      if (!_newValue) return;
                                      m["delete"](change.value);
                                      controller2.remove(_newValue);
                                      var node = elementsToNodes.get(_newValue.el);
                                      if (!node) throw new Error("Should not happen: received removal of unseen element");
                                      elementsToNodes["delete"](_newValue.el);
                                      var nodeParent = node.getParent();
                                      if (nodeParent && nodeParent.ownsNode(node)) {
                                        _this2._treeController.removeTaggedNode(nodeParent, tag, node);
                                      }
                                    }
                                  });
                                },
                                error: function error(err) {
                                  controller2.error(err);
                                },
                                complete: function complete() {
                                  controller2.end();
                                }
                              });
                            }
                          });
                          _this2._subscriptions.push(ecSet.subscribe({}));
                          return [tag, {
                            liveSet,
                            controller,
                            ecSet
                          }];
                        }));
                        this._options.watchers.forEach(function(_ref2) {
                          var sources = _ref2.sources, selectors = _ref2.selectors, tag = _ref2.tag;
                          var sourceSets = sources.map(function(tag2) {
                            if (!tag2) return _this2._rootMatchedSet;
                            var entry = _this2._ecSources.get(tag2);
                            if (!entry) throw new Error("Unknown source: " + tag2);
                            return entry.ecSet;
                          });
                          var sourceSet = sourceSets.length === 1 ? sourceSets[0] : (0, _merge["default"])(sourceSets);
                          var transformer = (0, _createTransformer["default"])(_this2._scheduler, selectors);
                          var ecEntry = _this2._ecSources.get(tag);
                          if (!ecEntry) throw new Error();
                          ecEntry.controller.add(transformer(sourceSet));
                        });
                        this._scheduler.flush();
                      }
                    }, {
                      key: "_dumpWithoutEnd",
                      value: function _dumpWithoutEnd() {
                        var _this3 = this;
                        this._subscriptions.forEach(function(sub) {
                          sub.unsubscribe();
                        });
                        this._subscriptions.length = 0;
                        this.tree.getOwned().forEach(function(liveSet, tag) {
                          liveSet.values().forEach(function(node) {
                            _this3._treeController.removeTaggedNode(_this3.tree, tag, node);
                          });
                        });
                      }
                    }, {
                      key: "dump",
                      value: function dump() {
                        this._dumpWithoutEnd();
                        this._treeController.end();
                      }
                      // Intended for use with hot module replacement.
                    }, {
                      key: "replaceOptions",
                      value: function replaceOptions(options) {
                        var tagErrStr = "replaceOptions does not support tag changes";
                        var _makeTagOptions2 = makeTagOptions(options), tagOptionsMap = _makeTagOptions2.map;
                        if (this._tagOptions.size !== tagOptionsMap.size) {
                          throw new Error(tagErrStr);
                        }
                        this._tagOptions.forEach(function(oldOptions, tag) {
                          var newOptions = tagOptionsMap.get(tag);
                          if (!newOptions) throw new Error(tagErrStr);
                          var oldOwnedBy = oldOptions.ownedBy || [];
                          var newOwnedBy = new Set(newOptions.ownedBy || []);
                          if (oldOwnedBy.length !== newOwnedBy.size) throw new Error(tagErrStr);
                          oldOwnedBy.forEach(function(tag2) {
                            if (!newOwnedBy.has(tag2)) throw new Error(tagErrStr);
                          });
                        });
                        this._dumpWithoutEnd();
                        this._options = options;
                        this._setupWatchersAndFinders();
                      }
                    }]);
                    return PageParserTree2;
                  })();
                  exports3["default"] = PageParserTree;
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              8897: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = watcherFinderMerger;
                  var _typeof2 = _interopRequireDefault(__webpack_require__3(2990));
                  var _liveSet = _interopRequireDefault(__webpack_require__3(2436));
                  function watcherFinderMerger(scheduler, tagTree, tag, tagOptions, watcherSet, finder, logError) {
                    return new _liveSet["default"]({
                      scheduler,
                      read: function read() {
                        throw new Error("Should not happen");
                      },
                      listen: function listen(setValues, controller) {
                        var currentElements = /* @__PURE__ */ new Set();
                        var currentElementContexts = /* @__PURE__ */ new Set();
                        var watcherFoundElements = /* @__PURE__ */ new Set();
                        var watcherFoundElementsMissedByFinder = /* @__PURE__ */ new Set();
                        var sub = null;
                        if (watcherSet) {
                          sub = watcherSet.subscribe({
                            start: function start() {
                              if (!watcherSet) throw new Error();
                              var currentValues = watcherSet.values();
                              setValues(currentValues);
                              currentValues.forEach(function(ec) {
                                watcherFoundElements.add(ec.el);
                                currentElements.add(ec.el);
                                currentElementContexts.add(ec);
                              });
                            },
                            next: function next(changes) {
                              changes.forEach(function(change) {
                                if (change.type === "add") {
                                  var _el = change.value.el;
                                  watcherFoundElements.add(_el);
                                  if (currentElements.has(_el)) {
                                    logError(new Error("PageParserTree(".concat(tag, ") watcher found element already found by finder")), _el);
                                  } else {
                                    currentElements.add(_el);
                                    currentElementContexts.add(change.value);
                                    controller.add(change.value);
                                  }
                                } else if (change.type === "remove") {
                                  var _el2 = change.value.el;
                                  watcherFoundElements["delete"](_el2);
                                  watcherFoundElementsMissedByFinder["delete"](_el2);
                                  if (currentElementContexts.has(change.value)) {
                                    currentElements["delete"](_el2);
                                    currentElementContexts["delete"](change.value);
                                    controller.remove(change.value);
                                  }
                                }
                              });
                            },
                            error: function error(err) {
                              controller.error(err);
                            },
                            complete: function complete() {
                              controller.end();
                            }
                          });
                        } else {
                          setValues(/* @__PURE__ */ new Set());
                        }
                        var finderSchedule = null;
                        if (finder) {
                          var fn = finder.fn, interval = finder.interval;
                          var ownedBy = tagOptions.ownedBy || [];
                          var runFinder = function runFinder2() {
                            var finderRunFoundElements = /* @__PURE__ */ new Set();
                            var found = fn(tagTree.getValue());
                            for (var i2 = 0, len = found.length; i2 < len; i2++) {
                              var _el3 = found[i2];
                              finderRunFoundElements.add(_el3);
                              if (!currentElements.has(_el3)) {
                                currentElements.add(_el3);
                                var ec = makeElementContext(_el3, tagTree, ownedBy);
                                currentElementContexts.add(ec);
                                controller.add(ec);
                                if (watcherSet) {
                                  logError(new Error("PageParserTree(".concat(tag, ") finder found element missed by watcher")), _el3);
                                  if (sub) sub.pullChanges();
                                }
                              }
                            }
                            currentElementContexts.forEach(function(ec2) {
                              var el = ec2.el;
                              if (!finderRunFoundElements.has(el)) {
                                if (watcherFoundElements.has(el)) {
                                  if (!watcherFoundElementsMissedByFinder.has(el)) {
                                    watcherFoundElementsMissedByFinder.add(el);
                                    logError(new Error("PageParserTree(".concat(tag, ") watcher found element missed by finder")), el);
                                  }
                                } else {
                                  currentElementContexts["delete"](ec2);
                                  currentElements["delete"](el);
                                  controller.remove(ec2);
                                  if (sub) sub.pullChanges();
                                }
                              }
                            });
                            scheduler.flush();
                          };
                          finderSchedule = scheduleRepeatingFinder(interval, currentElements, runFinder);
                        }
                        return {
                          unsubscribe: function unsubscribe() {
                            if (finderSchedule != null) finderSchedule.dispose();
                            if (sub) sub.unsubscribe();
                          },
                          pullChanges: function pullChanges() {
                            if (sub) sub.pullChanges();
                          }
                        };
                      }
                    });
                  }
                  function scheduleRepeatingFinder(interval, currentElements, runFinder) {
                    var finderStartedTimestamp = Date.now();
                    var timeoutHandle = null;
                    var idleHandle = null;
                    var step = function step2() {
                      idleHandle = null;
                      runFinder();
                      scheduleNextStep();
                    };
                    var scheduleNextStep = function scheduleNextStep2() {
                      var time;
                      if (interval == null) {
                        time = 5e3 + Math.random() * 1e3;
                      } else if (typeof interval === "number") {
                        time = interval;
                      } else if (typeof interval === "function") {
                        time = interval(currentElements.size, Date.now() - finderStartedTimestamp);
                      } else {
                        throw new Error("interval has wrong type: ".concat((0, _typeof2["default"])(interval)));
                      }
                      time;
                      if (time === Infinity) {
                        return;
                      }
                      timeoutHandle = setTimeout(function() {
                        timeoutHandle = null;
                        if (__webpack_require__3.g.requestIdleCallback && __webpack_require__3.g.cancelIdleCallback) {
                          idleHandle = __webpack_require__3.g.requestIdleCallback(step, {
                            timeout: time
                          });
                        } else {
                          step();
                        }
                      }, time);
                    };
                    scheduleNextStep();
                    return {
                      dispose: function dispose() {
                        if (timeoutHandle != null) clearTimeout(timeoutHandle);
                        if (idleHandle != null) __webpack_require__3.g.cancelIdleCallback(idleHandle);
                      }
                    };
                  }
                  function makeElementContext(el, tagTree, ownedBy) {
                    var _cachedParents = null;
                    return {
                      el,
                      get parents() {
                        if (!_cachedParents) {
                          var root = tagTree.getValue();
                          var parents = [];
                          var current = el.parentElement;
                          while (current) {
                            var tagTreeNodes = tagTree.getNodesForValue(current);
                            for (var i2 = 0, len = tagTreeNodes.length; i2 < len; i2++) {
                              var node = tagTreeNodes[i2];
                              var tag = node.getTag();
                              if (tag == null || ownedBy.indexOf(tag) >= 0) {
                                parents.push({
                                  tag,
                                  node
                                });
                                break;
                              }
                            }
                            if (current === root) break;
                            current = current.parentElement;
                          }
                          parents.reverse();
                          _cachedParents = parents;
                        }
                        return _cachedParents;
                      }
                    };
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              8498: (
                /***/
                ((__unused_webpack_module2, exports3) => {
                  "use strict";
                  var __webpack_unused_export__;
                  __webpack_unused_export__ = {
                    value: true
                  };
                  exports3.A = delay;
                  function delay(time, value) {
                    return new Promise(function(resolve) {
                      setTimeout(function() {
                        resolve(value);
                      }, time);
                    });
                  }
                })
              ),
              /***/
              1453: (
                /***/
                (function(module3, __unused_webpack_exports, __webpack_require__3) {
                  var process = __webpack_require__3(9964);
                  (function() {
                    var getNanoSeconds, hrtime, loadTime;
                    if (typeof performance !== "undefined" && performance !== null && performance.now) {
                      module3.exports = function() {
                        return performance.now();
                      };
                    } else if (typeof process !== "undefined" && process !== null && process.hrtime) {
                      module3.exports = function() {
                        return (getNanoSeconds() - loadTime) / 1e6;
                      };
                      hrtime = process.hrtime;
                      getNanoSeconds = function() {
                        var hr;
                        hr = hrtime();
                        return hr[0] * 1e9 + hr[1];
                      };
                      loadTime = getNanoSeconds();
                    } else if (Date.now) {
                      module3.exports = function() {
                        return Date.now() - loadTime;
                      };
                      loadTime = Date.now();
                    } else {
                      module3.exports = function() {
                        return (/* @__PURE__ */ new Date()).getTime() - loadTime;
                      };
                      loadTime = (/* @__PURE__ */ new Date()).getTime();
                    }
                  }).call(this);
                })
              ),
              /***/
              9964: (
                /***/
                ((module3) => {
                  var process = module3.exports = {};
                  var cachedSetTimeout;
                  var cachedClearTimeout;
                  function defaultSetTimout() {
                    throw new Error("setTimeout has not been defined");
                  }
                  function defaultClearTimeout() {
                    throw new Error("clearTimeout has not been defined");
                  }
                  (function() {
                    try {
                      if (typeof setTimeout === "function") {
                        cachedSetTimeout = setTimeout;
                      } else {
                        cachedSetTimeout = defaultSetTimout;
                      }
                    } catch (e) {
                      cachedSetTimeout = defaultSetTimout;
                    }
                    try {
                      if (typeof clearTimeout === "function") {
                        cachedClearTimeout = clearTimeout;
                      } else {
                        cachedClearTimeout = defaultClearTimeout;
                      }
                    } catch (e) {
                      cachedClearTimeout = defaultClearTimeout;
                    }
                  })();
                  function runTimeout(fun) {
                    if (cachedSetTimeout === setTimeout) {
                      return setTimeout(fun, 0);
                    }
                    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
                      cachedSetTimeout = setTimeout;
                      return setTimeout(fun, 0);
                    }
                    try {
                      return cachedSetTimeout(fun, 0);
                    } catch (e) {
                      try {
                        return cachedSetTimeout.call(null, fun, 0);
                      } catch (e2) {
                        return cachedSetTimeout.call(this, fun, 0);
                      }
                    }
                  }
                  function runClearTimeout(marker) {
                    if (cachedClearTimeout === clearTimeout) {
                      return clearTimeout(marker);
                    }
                    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
                      cachedClearTimeout = clearTimeout;
                      return clearTimeout(marker);
                    }
                    try {
                      return cachedClearTimeout(marker);
                    } catch (e) {
                      try {
                        return cachedClearTimeout.call(null, marker);
                      } catch (e2) {
                        return cachedClearTimeout.call(this, marker);
                      }
                    }
                  }
                  var queue = [];
                  var draining = false;
                  var currentQueue;
                  var queueIndex = -1;
                  function cleanUpNextTick() {
                    if (!draining || !currentQueue) {
                      return;
                    }
                    draining = false;
                    if (currentQueue.length) {
                      queue = currentQueue.concat(queue);
                    } else {
                      queueIndex = -1;
                    }
                    if (queue.length) {
                      drainQueue();
                    }
                  }
                  function drainQueue() {
                    if (draining) {
                      return;
                    }
                    var timeout = runTimeout(cleanUpNextTick);
                    draining = true;
                    var len = queue.length;
                    while (len) {
                      currentQueue = queue;
                      queue = [];
                      while (++queueIndex < len) {
                        if (currentQueue) {
                          currentQueue[queueIndex].run();
                        }
                      }
                      queueIndex = -1;
                      len = queue.length;
                    }
                    currentQueue = null;
                    draining = false;
                    runClearTimeout(timeout);
                  }
                  process.nextTick = function(fun) {
                    var args = new Array(arguments.length - 1);
                    if (arguments.length > 1) {
                      for (var i2 = 1; i2 < arguments.length; i2++) {
                        args[i2 - 1] = arguments[i2];
                      }
                    }
                    queue.push(new Item(fun, args));
                    if (queue.length === 1 && !draining) {
                      runTimeout(drainQueue);
                    }
                  };
                  function Item(fun, array) {
                    this.fun = fun;
                    this.array = array;
                  }
                  Item.prototype.run = function() {
                    this.fun.apply(null, this.array);
                  };
                  process.title = "browser";
                  process.browser = true;
                  process.env = {};
                  process.argv = [];
                  process.version = "";
                  process.versions = {};
                  function noop() {
                  }
                  process.on = noop;
                  process.addListener = noop;
                  process.once = noop;
                  process.off = noop;
                  process.removeListener = noop;
                  process.removeAllListeners = noop;
                  process.emit = noop;
                  process.prependListener = noop;
                  process.prependOnceListener = noop;
                  process.listeners = function(name) {
                    return [];
                  };
                  process.binding = function(name) {
                    throw new Error("process.binding is not supported");
                  };
                  process.cwd = function() {
                    return "/";
                  };
                  process.chdir = function(dir) {
                    throw new Error("process.chdir is not supported");
                  };
                  process.umask = function() {
                    return 0;
                  };
                })
              ),
              /***/
              628: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  var ReactPropTypesSecret = __webpack_require__3(9305);
                  function emptyFunction() {
                  }
                  function emptyFunctionWithReset() {
                  }
                  emptyFunctionWithReset.resetWarningCache = emptyFunction;
                  module3.exports = function() {
                    function shim(props, propName, componentName, location2, propFullName, secret) {
                      if (secret === ReactPropTypesSecret) {
                        return;
                      }
                      var err = new Error(
                        "Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"
                      );
                      err.name = "Invariant Violation";
                      throw err;
                    }
                    ;
                    shim.isRequired = shim;
                    function getShim() {
                      return shim;
                    }
                    ;
                    var ReactPropTypes = {
                      array: shim,
                      bool: shim,
                      func: shim,
                      number: shim,
                      object: shim,
                      string: shim,
                      symbol: shim,
                      any: shim,
                      arrayOf: getShim,
                      element: shim,
                      elementType: shim,
                      instanceOf: getShim,
                      node: shim,
                      objectOf: getShim,
                      oneOf: getShim,
                      oneOfType: getShim,
                      shape: getShim,
                      exact: getShim,
                      checkPropTypes: emptyFunctionWithReset,
                      resetWarningCache: emptyFunction
                    };
                    ReactPropTypes.PropTypes = ReactPropTypes;
                    return ReactPropTypes;
                  };
                })
              ),
              /***/
              5826: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  if (false) {
                    var throwOnDirectAccess, ReactIs;
                  } else {
                    module3.exports = __webpack_require__3(628)();
                  }
                })
              ),
              /***/
              9305: (
                /***/
                ((module3) => {
                  "use strict";
                  var ReactPropTypesSecret = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
                  module3.exports = ReactPropTypesSecret;
                })
              ),
              /***/
              1892: (
                /***/
                ((module3) => {
                  "use strict";
                  function hasOwnProperty(obj2, prop) {
                    return Object.prototype.hasOwnProperty.call(obj2, prop);
                  }
                  module3.exports = function(qs2, sep, eq, options) {
                    sep = sep || "&";
                    eq = eq || "=";
                    var obj2 = {};
                    if (typeof qs2 !== "string" || qs2.length === 0) {
                      return obj2;
                    }
                    var regexp = /\+/g;
                    qs2 = qs2.split(sep);
                    var maxKeys = 1e3;
                    if (options && typeof options.maxKeys === "number") {
                      maxKeys = options.maxKeys;
                    }
                    var len = qs2.length;
                    if (maxKeys > 0 && len > maxKeys) {
                      len = maxKeys;
                    }
                    for (var i2 = 0; i2 < len; ++i2) {
                      var x2 = qs2[i2].replace(regexp, "%20"), idx = x2.indexOf(eq), kstr, vstr, k, v;
                      if (idx >= 0) {
                        kstr = x2.substr(0, idx);
                        vstr = x2.substr(idx + 1);
                      } else {
                        kstr = x2;
                        vstr = "";
                      }
                      k = decodeURIComponent(kstr);
                      v = decodeURIComponent(vstr);
                      if (!hasOwnProperty(obj2, k)) {
                        obj2[k] = v;
                      } else if (isArray(obj2[k])) {
                        obj2[k].push(v);
                      } else {
                        obj2[k] = [obj2[k], v];
                      }
                    }
                    return obj2;
                  };
                  var isArray = Array.isArray || function(xs) {
                    return Object.prototype.toString.call(xs) === "[object Array]";
                  };
                })
              ),
              /***/
              5052: (
                /***/
                ((module3) => {
                  "use strict";
                  var stringifyPrimitive = function(v) {
                    switch (typeof v) {
                      case "string":
                        return v;
                      case "boolean":
                        return v ? "true" : "false";
                      case "number":
                        return isFinite(v) ? v : "";
                      default:
                        return "";
                    }
                  };
                  module3.exports = function(obj2, sep, eq, name) {
                    sep = sep || "&";
                    eq = eq || "=";
                    if (obj2 === null) {
                      obj2 = void 0;
                    }
                    if (typeof obj2 === "object") {
                      return map(objectKeys(obj2), function(k) {
                        var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
                        if (isArray(obj2[k])) {
                          return map(obj2[k], function(v) {
                            return ks + encodeURIComponent(stringifyPrimitive(v));
                          }).join(sep);
                        } else {
                          return ks + encodeURIComponent(stringifyPrimitive(obj2[k]));
                        }
                      }).join(sep);
                    }
                    if (!name) return "";
                    return encodeURIComponent(stringifyPrimitive(name)) + eq + encodeURIComponent(stringifyPrimitive(obj2));
                  };
                  var isArray = Array.isArray || function(xs) {
                    return Object.prototype.toString.call(xs) === "[object Array]";
                  };
                  function map(xs, f) {
                    if (xs.map) return xs.map(f);
                    var res2 = [];
                    for (var i2 = 0; i2 < xs.length; i2++) {
                      res2.push(f(xs[i2], i2));
                    }
                    return res2;
                  }
                  var objectKeys = Object.keys || function(obj2) {
                    var res2 = [];
                    for (var key in obj2) {
                      if (Object.prototype.hasOwnProperty.call(obj2, key)) res2.push(key);
                    }
                    return res2;
                  };
                })
              ),
              /***/
              6448: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  exports3.decode = exports3.parse = __webpack_require__3(1892);
                  exports3.encode = exports3.stringify = __webpack_require__3(5052);
                })
              ),
              /***/
              1968: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var now = __webpack_require__3(3440), root = typeof window === "undefined" ? __webpack_require__3.g : window, vendors = ["moz", "webkit"], suffix = "AnimationFrame", raf = root["request" + suffix], caf = root["cancel" + suffix] || root["cancelRequest" + suffix];
                  for (var i2 = 0; !raf && i2 < vendors.length; i2++) {
                    raf = root[vendors[i2] + "Request" + suffix];
                    caf = root[vendors[i2] + "Cancel" + suffix] || root[vendors[i2] + "CancelRequest" + suffix];
                  }
                  if (!raf || !caf) {
                    var last2 = 0, id = 0, queue = [], frameDuration = 1e3 / 60;
                    raf = function(callback) {
                      if (queue.length === 0) {
                        var _now = now(), next = Math.max(0, frameDuration - (_now - last2));
                        last2 = next + _now;
                        setTimeout(function() {
                          var cp = queue.slice(0);
                          queue.length = 0;
                          for (var i3 = 0; i3 < cp.length; i3++) {
                            if (!cp[i3].cancelled) {
                              try {
                                cp[i3].callback(last2);
                              } catch (e) {
                                setTimeout(function() {
                                  throw e;
                                }, 0);
                              }
                            }
                          }
                        }, Math.round(next));
                      }
                      queue.push({
                        handle: ++id,
                        callback,
                        cancelled: false
                      });
                      return id;
                    };
                    caf = function(handle) {
                      for (var i3 = 0; i3 < queue.length; i3++) {
                        if (queue[i3].handle === handle) {
                          queue[i3].cancelled = true;
                        }
                      }
                    };
                  }
                  module3.exports = function(fn) {
                    return raf.call(root, fn);
                  };
                  module3.exports.cancel = function() {
                    caf.apply(root, arguments);
                  };
                  module3.exports.polyfill = function(object) {
                    if (!object) {
                      object = root;
                    }
                    object.requestAnimationFrame = raf;
                    object.cancelAnimationFrame = caf;
                  };
                })
              ),
              /***/
              3440: (
                /***/
                (function(module3, __unused_webpack_exports, __webpack_require__3) {
                  var process = __webpack_require__3(9964);
                  (function() {
                    var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;
                    if (typeof performance !== "undefined" && performance !== null && performance.now) {
                      module3.exports = function() {
                        return performance.now();
                      };
                    } else if (typeof process !== "undefined" && process !== null && process.hrtime) {
                      module3.exports = function() {
                        return (getNanoSeconds() - nodeLoadTime) / 1e6;
                      };
                      hrtime = process.hrtime;
                      getNanoSeconds = function() {
                        var hr;
                        hr = hrtime();
                        return hr[0] * 1e9 + hr[1];
                      };
                      moduleLoadTime = getNanoSeconds();
                      upTime = process.uptime() * 1e9;
                      nodeLoadTime = moduleLoadTime - upTime;
                    } else if (Date.now) {
                      module3.exports = function() {
                        return Date.now() - loadTime;
                      };
                      loadTime = Date.now();
                    } else {
                      module3.exports = function() {
                        return (/* @__PURE__ */ new Date()).getTime() - loadTime;
                      };
                      loadTime = (/* @__PURE__ */ new Date()).getTime();
                    }
                  }).call(this);
                })
              ),
              /***/
              7045: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  var aa = __webpack_require__3(7810), m = __webpack_require__3(5946), r = __webpack_require__3(2328);
                  function y2(a) {
                    for (var b = "https://reactjs.org/docs/error-decoder.html?invariant=" + a, c = 1; c < arguments.length; c++) b += "&args[]=" + encodeURIComponent(arguments[c]);
                    return "Minified React error #" + a + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
                  }
                  if (!aa) throw Error(y2(227));
                  var ba = /* @__PURE__ */ new Set(), ca = {};
                  function da(a, b) {
                    ea(a, b);
                    ea(a + "Capture", b);
                  }
                  function ea(a, b) {
                    ca[a] = b;
                    for (a = 0; a < b.length; a++) ba.add(b[a]);
                  }
                  var fa = !("undefined" === typeof window || "undefined" === typeof window.document || "undefined" === typeof window.document.createElement), ha = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/, ia = Object.prototype.hasOwnProperty, ja = {}, ka = {};
                  function la(a) {
                    if (ia.call(ka, a)) return true;
                    if (ia.call(ja, a)) return false;
                    if (ha.test(a)) return ka[a] = true;
                    ja[a] = true;
                    return false;
                  }
                  function ma(a, b, c, d) {
                    if (null !== c && 0 === c.type) return false;
                    switch (typeof b) {
                      case "function":
                      case "symbol":
                        return true;
                      case "boolean":
                        if (d) return false;
                        if (null !== c) return !c.acceptsBooleans;
                        a = a.toLowerCase().slice(0, 5);
                        return "data-" !== a && "aria-" !== a;
                      default:
                        return false;
                    }
                  }
                  function na(a, b, c, d) {
                    if (null === b || "undefined" === typeof b || ma(a, b, c, d)) return true;
                    if (d) return false;
                    if (null !== c) switch (c.type) {
                      case 3:
                        return !b;
                      case 4:
                        return false === b;
                      case 5:
                        return isNaN(b);
                      case 6:
                        return isNaN(b) || 1 > b;
                    }
                    return false;
                  }
                  function B(a, b, c, d, e, f, g) {
                    this.acceptsBooleans = 2 === b || 3 === b || 4 === b;
                    this.attributeName = d;
                    this.attributeNamespace = e;
                    this.mustUseProperty = c;
                    this.propertyName = a;
                    this.type = b;
                    this.sanitizeURL = f;
                    this.removeEmptyString = g;
                  }
                  var D = {};
                  "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a) {
                    D[a] = new B(a, 0, false, a, null, false, false);
                  });
                  [["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function(a) {
                    var b = a[0];
                    D[b] = new B(b, 1, false, a[1], null, false, false);
                  });
                  ["contentEditable", "draggable", "spellCheck", "value"].forEach(function(a) {
                    D[a] = new B(a, 2, false, a.toLowerCase(), null, false, false);
                  });
                  ["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function(a) {
                    D[a] = new B(a, 2, false, a, null, false, false);
                  });
                  "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a) {
                    D[a] = new B(a, 3, false, a.toLowerCase(), null, false, false);
                  });
                  ["checked", "multiple", "muted", "selected"].forEach(function(a) {
                    D[a] = new B(a, 3, true, a, null, false, false);
                  });
                  ["capture", "download"].forEach(function(a) {
                    D[a] = new B(a, 4, false, a, null, false, false);
                  });
                  ["cols", "rows", "size", "span"].forEach(function(a) {
                    D[a] = new B(a, 6, false, a, null, false, false);
                  });
                  ["rowSpan", "start"].forEach(function(a) {
                    D[a] = new B(a, 5, false, a.toLowerCase(), null, false, false);
                  });
                  var oa = /[\-:]([a-z])/g;
                  function pa(a) {
                    return a[1].toUpperCase();
                  }
                  "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a) {
                    var b = a.replace(
                      oa,
                      pa
                    );
                    D[b] = new B(b, 1, false, a, null, false, false);
                  });
                  "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a) {
                    var b = a.replace(oa, pa);
                    D[b] = new B(b, 1, false, a, "http://www.w3.org/1999/xlink", false, false);
                  });
                  ["xml:base", "xml:lang", "xml:space"].forEach(function(a) {
                    var b = a.replace(oa, pa);
                    D[b] = new B(b, 1, false, a, "http://www.w3.org/XML/1998/namespace", false, false);
                  });
                  ["tabIndex", "crossOrigin"].forEach(function(a) {
                    D[a] = new B(a, 1, false, a.toLowerCase(), null, false, false);
                  });
                  D.xlinkHref = new B("xlinkHref", 1, false, "xlink:href", "http://www.w3.org/1999/xlink", true, false);
                  ["src", "href", "action", "formAction"].forEach(function(a) {
                    D[a] = new B(a, 1, false, a.toLowerCase(), null, true, true);
                  });
                  function qa(a, b, c, d) {
                    var e = D.hasOwnProperty(b) ? D[b] : null;
                    var f = null !== e ? 0 === e.type : d ? false : !(2 < b.length) || "o" !== b[0] && "O" !== b[0] || "n" !== b[1] && "N" !== b[1] ? false : true;
                    f || (na(b, c, e, d) && (c = null), d || null === e ? la(b) && (null === c ? a.removeAttribute(b) : a.setAttribute(b, "" + c)) : e.mustUseProperty ? a[e.propertyName] = null === c ? 3 === e.type ? false : "" : c : (b = e.attributeName, d = e.attributeNamespace, null === c ? a.removeAttribute(b) : (e = e.type, c = 3 === e || 4 === e && true === c ? "" : "" + c, d ? a.setAttributeNS(d, b, c) : a.setAttribute(b, c))));
                  }
                  var ra = aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, sa = 60103, ta = 60106, ua = 60107, wa = 60108, xa = 60114, ya = 60109, za = 60110, Aa = 60112, Ba = 60113, Ca = 60120, Da = 60115, Ea = 60116, Fa = 60121, Ga = 60128, Ha = 60129, Ia = 60130, Ja = 60131;
                  if ("function" === typeof Symbol && Symbol.for) {
                    var E = Symbol.for;
                    sa = E("react.element");
                    ta = E("react.portal");
                    ua = E("react.fragment");
                    wa = E("react.strict_mode");
                    xa = E("react.profiler");
                    ya = E("react.provider");
                    za = E("react.context");
                    Aa = E("react.forward_ref");
                    Ba = E("react.suspense");
                    Ca = E("react.suspense_list");
                    Da = E("react.memo");
                    Ea = E("react.lazy");
                    Fa = E("react.block");
                    E("react.scope");
                    Ga = E("react.opaque.id");
                    Ha = E("react.debug_trace_mode");
                    Ia = E("react.offscreen");
                    Ja = E("react.legacy_hidden");
                  }
                  var Ka = "function" === typeof Symbol && Symbol.iterator;
                  function La(a) {
                    if (null === a || "object" !== typeof a) return null;
                    a = Ka && a[Ka] || a["@@iterator"];
                    return "function" === typeof a ? a : null;
                  }
                  var Ma;
                  function Na(a) {
                    if (void 0 === Ma) try {
                      throw Error();
                    } catch (c) {
                      var b = c.stack.trim().match(/\n( *(at )?)/);
                      Ma = b && b[1] || "";
                    }
                    return "\n" + Ma + a;
                  }
                  var Oa = false;
                  function Pa(a, b) {
                    if (!a || Oa) return "";
                    Oa = true;
                    var c = Error.prepareStackTrace;
                    Error.prepareStackTrace = void 0;
                    try {
                      if (b) if (b = function() {
                        throw Error();
                      }, Object.defineProperty(b.prototype, "props", { set: function() {
                        throw Error();
                      } }), "object" === typeof Reflect && Reflect.construct) {
                        try {
                          Reflect.construct(b, []);
                        } catch (k) {
                          var d = k;
                        }
                        Reflect.construct(a, [], b);
                      } else {
                        try {
                          b.call();
                        } catch (k) {
                          d = k;
                        }
                        a.call(b.prototype);
                      }
                      else {
                        try {
                          throw Error();
                        } catch (k) {
                          d = k;
                        }
                        a();
                      }
                    } catch (k) {
                      if (k && d && "string" === typeof k.stack) {
                        for (var e = k.stack.split("\n"), f = d.stack.split("\n"), g = e.length - 1, h = f.length - 1; 1 <= g && 0 <= h && e[g] !== f[h]; ) h--;
                        for (; 1 <= g && 0 <= h; g--, h--) if (e[g] !== f[h]) {
                          if (1 !== g || 1 !== h) {
                            do
                              if (g--, h--, 0 > h || e[g] !== f[h]) return "\n" + e[g].replace(" at new ", " at ");
                            while (1 <= g && 0 <= h);
                          }
                          break;
                        }
                      }
                    } finally {
                      Oa = false, Error.prepareStackTrace = c;
                    }
                    return (a = a ? a.displayName || a.name : "") ? Na(a) : "";
                  }
                  function Qa(a) {
                    switch (a.tag) {
                      case 5:
                        return Na(a.type);
                      case 16:
                        return Na("Lazy");
                      case 13:
                        return Na("Suspense");
                      case 19:
                        return Na("SuspenseList");
                      case 0:
                      case 2:
                      case 15:
                        return a = Pa(a.type, false), a;
                      case 11:
                        return a = Pa(a.type.render, false), a;
                      case 22:
                        return a = Pa(a.type._render, false), a;
                      case 1:
                        return a = Pa(a.type, true), a;
                      default:
                        return "";
                    }
                  }
                  function Ra(a) {
                    if (null == a) return null;
                    if ("function" === typeof a) return a.displayName || a.name || null;
                    if ("string" === typeof a) return a;
                    switch (a) {
                      case ua:
                        return "Fragment";
                      case ta:
                        return "Portal";
                      case xa:
                        return "Profiler";
                      case wa:
                        return "StrictMode";
                      case Ba:
                        return "Suspense";
                      case Ca:
                        return "SuspenseList";
                    }
                    if ("object" === typeof a) switch (a.$$typeof) {
                      case za:
                        return (a.displayName || "Context") + ".Consumer";
                      case ya:
                        return (a._context.displayName || "Context") + ".Provider";
                      case Aa:
                        var b = a.render;
                        b = b.displayName || b.name || "";
                        return a.displayName || ("" !== b ? "ForwardRef(" + b + ")" : "ForwardRef");
                      case Da:
                        return Ra(a.type);
                      case Fa:
                        return Ra(a._render);
                      case Ea:
                        b = a._payload;
                        a = a._init;
                        try {
                          return Ra(a(b));
                        } catch (c) {
                        }
                    }
                    return null;
                  }
                  function Sa(a) {
                    switch (typeof a) {
                      case "boolean":
                      case "number":
                      case "object":
                      case "string":
                      case "undefined":
                        return a;
                      default:
                        return "";
                    }
                  }
                  function Ta(a) {
                    var b = a.type;
                    return (a = a.nodeName) && "input" === a.toLowerCase() && ("checkbox" === b || "radio" === b);
                  }
                  function Ua(a) {
                    var b = Ta(a) ? "checked" : "value", c = Object.getOwnPropertyDescriptor(a.constructor.prototype, b), d = "" + a[b];
                    if (!a.hasOwnProperty(b) && "undefined" !== typeof c && "function" === typeof c.get && "function" === typeof c.set) {
                      var e = c.get, f = c.set;
                      Object.defineProperty(a, b, { configurable: true, get: function() {
                        return e.call(this);
                      }, set: function(a2) {
                        d = "" + a2;
                        f.call(this, a2);
                      } });
                      Object.defineProperty(a, b, { enumerable: c.enumerable });
                      return { getValue: function() {
                        return d;
                      }, setValue: function(a2) {
                        d = "" + a2;
                      }, stopTracking: function() {
                        a._valueTracker = null;
                        delete a[b];
                      } };
                    }
                  }
                  function Va(a) {
                    a._valueTracker || (a._valueTracker = Ua(a));
                  }
                  function Wa(a) {
                    if (!a) return false;
                    var b = a._valueTracker;
                    if (!b) return true;
                    var c = b.getValue();
                    var d = "";
                    a && (d = Ta(a) ? a.checked ? "true" : "false" : a.value);
                    a = d;
                    return a !== c ? (b.setValue(a), true) : false;
                  }
                  function Xa(a) {
                    a = a || ("undefined" !== typeof document ? document : void 0);
                    if ("undefined" === typeof a) return null;
                    try {
                      return a.activeElement || a.body;
                    } catch (b) {
                      return a.body;
                    }
                  }
                  function Ya(a, b) {
                    var c = b.checked;
                    return m({}, b, { defaultChecked: void 0, defaultValue: void 0, value: void 0, checked: null != c ? c : a._wrapperState.initialChecked });
                  }
                  function Za(a, b) {
                    var c = null == b.defaultValue ? "" : b.defaultValue, d = null != b.checked ? b.checked : b.defaultChecked;
                    c = Sa(null != b.value ? b.value : c);
                    a._wrapperState = { initialChecked: d, initialValue: c, controlled: "checkbox" === b.type || "radio" === b.type ? null != b.checked : null != b.value };
                  }
                  function $a(a, b) {
                    b = b.checked;
                    null != b && qa(a, "checked", b, false);
                  }
                  function ab(a, b) {
                    $a(a, b);
                    var c = Sa(b.value), d = b.type;
                    if (null != c) if ("number" === d) {
                      if (0 === c && "" === a.value || a.value != c) a.value = "" + c;
                    } else a.value !== "" + c && (a.value = "" + c);
                    else if ("submit" === d || "reset" === d) {
                      a.removeAttribute("value");
                      return;
                    }
                    b.hasOwnProperty("value") ? bb(a, b.type, c) : b.hasOwnProperty("defaultValue") && bb(a, b.type, Sa(b.defaultValue));
                    null == b.checked && null != b.defaultChecked && (a.defaultChecked = !!b.defaultChecked);
                  }
                  function cb(a, b, c) {
                    if (b.hasOwnProperty("value") || b.hasOwnProperty("defaultValue")) {
                      var d = b.type;
                      if (!("submit" !== d && "reset" !== d || void 0 !== b.value && null !== b.value)) return;
                      b = "" + a._wrapperState.initialValue;
                      c || b === a.value || (a.value = b);
                      a.defaultValue = b;
                    }
                    c = a.name;
                    "" !== c && (a.name = "");
                    a.defaultChecked = !!a._wrapperState.initialChecked;
                    "" !== c && (a.name = c);
                  }
                  function bb(a, b, c) {
                    if ("number" !== b || Xa(a.ownerDocument) !== a) null == c ? a.defaultValue = "" + a._wrapperState.initialValue : a.defaultValue !== "" + c && (a.defaultValue = "" + c);
                  }
                  function db(a) {
                    var b = "";
                    aa.Children.forEach(a, function(a2) {
                      null != a2 && (b += a2);
                    });
                    return b;
                  }
                  function eb(a, b) {
                    a = m({ children: void 0 }, b);
                    if (b = db(b.children)) a.children = b;
                    return a;
                  }
                  function fb(a, b, c, d) {
                    a = a.options;
                    if (b) {
                      b = {};
                      for (var e = 0; e < c.length; e++) b["$" + c[e]] = true;
                      for (c = 0; c < a.length; c++) e = b.hasOwnProperty("$" + a[c].value), a[c].selected !== e && (a[c].selected = e), e && d && (a[c].defaultSelected = true);
                    } else {
                      c = "" + Sa(c);
                      b = null;
                      for (e = 0; e < a.length; e++) {
                        if (a[e].value === c) {
                          a[e].selected = true;
                          d && (a[e].defaultSelected = true);
                          return;
                        }
                        null !== b || a[e].disabled || (b = a[e]);
                      }
                      null !== b && (b.selected = true);
                    }
                  }
                  function gb(a, b) {
                    if (null != b.dangerouslySetInnerHTML) throw Error(y2(91));
                    return m({}, b, { value: void 0, defaultValue: void 0, children: "" + a._wrapperState.initialValue });
                  }
                  function hb(a, b) {
                    var c = b.value;
                    if (null == c) {
                      c = b.children;
                      b = b.defaultValue;
                      if (null != c) {
                        if (null != b) throw Error(y2(92));
                        if (Array.isArray(c)) {
                          if (!(1 >= c.length)) throw Error(y2(93));
                          c = c[0];
                        }
                        b = c;
                      }
                      null == b && (b = "");
                      c = b;
                    }
                    a._wrapperState = { initialValue: Sa(c) };
                  }
                  function ib(a, b) {
                    var c = Sa(b.value), d = Sa(b.defaultValue);
                    null != c && (c = "" + c, c !== a.value && (a.value = c), null == b.defaultValue && a.defaultValue !== c && (a.defaultValue = c));
                    null != d && (a.defaultValue = "" + d);
                  }
                  function jb(a) {
                    var b = a.textContent;
                    b === a._wrapperState.initialValue && "" !== b && null !== b && (a.value = b);
                  }
                  var kb = { html: "http://www.w3.org/1999/xhtml", mathml: "http://www.w3.org/1998/Math/MathML", svg: "http://www.w3.org/2000/svg" };
                  function lb(a) {
                    switch (a) {
                      case "svg":
                        return "http://www.w3.org/2000/svg";
                      case "math":
                        return "http://www.w3.org/1998/Math/MathML";
                      default:
                        return "http://www.w3.org/1999/xhtml";
                    }
                  }
                  function mb(a, b) {
                    return null == a || "http://www.w3.org/1999/xhtml" === a ? lb(b) : "http://www.w3.org/2000/svg" === a && "foreignObject" === b ? "http://www.w3.org/1999/xhtml" : a;
                  }
                  var nb, ob = (function(a) {
                    return "undefined" !== typeof MSApp && MSApp.execUnsafeLocalFunction ? function(b, c, d, e) {
                      MSApp.execUnsafeLocalFunction(function() {
                        return a(b, c, d, e);
                      });
                    } : a;
                  })(function(a, b) {
                    if (a.namespaceURI !== kb.svg || "innerHTML" in a) a.innerHTML = b;
                    else {
                      nb = nb || document.createElement("div");
                      nb.innerHTML = "<svg>" + b.valueOf().toString() + "</svg>";
                      for (b = nb.firstChild; a.firstChild; ) a.removeChild(a.firstChild);
                      for (; b.firstChild; ) a.appendChild(b.firstChild);
                    }
                  });
                  function pb(a, b) {
                    if (b) {
                      var c = a.firstChild;
                      if (c && c === a.lastChild && 3 === c.nodeType) {
                        c.nodeValue = b;
                        return;
                      }
                    }
                    a.textContent = b;
                  }
                  var qb = {
                    animationIterationCount: true,
                    borderImageOutset: true,
                    borderImageSlice: true,
                    borderImageWidth: true,
                    boxFlex: true,
                    boxFlexGroup: true,
                    boxOrdinalGroup: true,
                    columnCount: true,
                    columns: true,
                    flex: true,
                    flexGrow: true,
                    flexPositive: true,
                    flexShrink: true,
                    flexNegative: true,
                    flexOrder: true,
                    gridArea: true,
                    gridRow: true,
                    gridRowEnd: true,
                    gridRowSpan: true,
                    gridRowStart: true,
                    gridColumn: true,
                    gridColumnEnd: true,
                    gridColumnSpan: true,
                    gridColumnStart: true,
                    fontWeight: true,
                    lineClamp: true,
                    lineHeight: true,
                    opacity: true,
                    order: true,
                    orphans: true,
                    tabSize: true,
                    widows: true,
                    zIndex: true,
                    zoom: true,
                    fillOpacity: true,
                    floodOpacity: true,
                    stopOpacity: true,
                    strokeDasharray: true,
                    strokeDashoffset: true,
                    strokeMiterlimit: true,
                    strokeOpacity: true,
                    strokeWidth: true
                  }, rb = ["Webkit", "ms", "Moz", "O"];
                  Object.keys(qb).forEach(function(a) {
                    rb.forEach(function(b) {
                      b = b + a.charAt(0).toUpperCase() + a.substring(1);
                      qb[b] = qb[a];
                    });
                  });
                  function sb(a, b, c) {
                    return null == b || "boolean" === typeof b || "" === b ? "" : c || "number" !== typeof b || 0 === b || qb.hasOwnProperty(a) && qb[a] ? ("" + b).trim() : b + "px";
                  }
                  function tb(a, b) {
                    a = a.style;
                    for (var c in b) if (b.hasOwnProperty(c)) {
                      var d = 0 === c.indexOf("--"), e = sb(c, b[c], d);
                      "float" === c && (c = "cssFloat");
                      d ? a.setProperty(c, e) : a[c] = e;
                    }
                  }
                  var ub = m({ menuitem: true }, { area: true, base: true, br: true, col: true, embed: true, hr: true, img: true, input: true, keygen: true, link: true, meta: true, param: true, source: true, track: true, wbr: true });
                  function vb(a, b) {
                    if (b) {
                      if (ub[a] && (null != b.children || null != b.dangerouslySetInnerHTML)) throw Error(y2(137, a));
                      if (null != b.dangerouslySetInnerHTML) {
                        if (null != b.children) throw Error(y2(60));
                        if (!("object" === typeof b.dangerouslySetInnerHTML && "__html" in b.dangerouslySetInnerHTML)) throw Error(y2(61));
                      }
                      if (null != b.style && "object" !== typeof b.style) throw Error(y2(62));
                    }
                  }
                  function wb(a, b) {
                    if (-1 === a.indexOf("-")) return "string" === typeof b.is;
                    switch (a) {
                      case "annotation-xml":
                      case "color-profile":
                      case "font-face":
                      case "font-face-src":
                      case "font-face-uri":
                      case "font-face-format":
                      case "font-face-name":
                      case "missing-glyph":
                        return false;
                      default:
                        return true;
                    }
                  }
                  function xb(a) {
                    a = a.target || a.srcElement || window;
                    a.correspondingUseElement && (a = a.correspondingUseElement);
                    return 3 === a.nodeType ? a.parentNode : a;
                  }
                  var yb = null, zb = null, Ab = null;
                  function Bb(a) {
                    if (a = Cb(a)) {
                      if ("function" !== typeof yb) throw Error(y2(280));
                      var b = a.stateNode;
                      b && (b = Db(b), yb(a.stateNode, a.type, b));
                    }
                  }
                  function Eb(a) {
                    zb ? Ab ? Ab.push(a) : Ab = [a] : zb = a;
                  }
                  function Fb() {
                    if (zb) {
                      var a = zb, b = Ab;
                      Ab = zb = null;
                      Bb(a);
                      if (b) for (a = 0; a < b.length; a++) Bb(b[a]);
                    }
                  }
                  function Gb(a, b) {
                    return a(b);
                  }
                  function Hb(a, b, c, d, e) {
                    return a(b, c, d, e);
                  }
                  function Ib() {
                  }
                  var Jb = Gb, Kb = false, Lb = false;
                  function Mb() {
                    if (null !== zb || null !== Ab) Ib(), Fb();
                  }
                  function Nb(a, b, c) {
                    if (Lb) return a(b, c);
                    Lb = true;
                    try {
                      return Jb(a, b, c);
                    } finally {
                      Lb = false, Mb();
                    }
                  }
                  function Ob(a, b) {
                    var c = a.stateNode;
                    if (null === c) return null;
                    var d = Db(c);
                    if (null === d) return null;
                    c = d[b];
                    a: switch (b) {
                      case "onClick":
                      case "onClickCapture":
                      case "onDoubleClick":
                      case "onDoubleClickCapture":
                      case "onMouseDown":
                      case "onMouseDownCapture":
                      case "onMouseMove":
                      case "onMouseMoveCapture":
                      case "onMouseUp":
                      case "onMouseUpCapture":
                      case "onMouseEnter":
                        (d = !d.disabled) || (a = a.type, d = !("button" === a || "input" === a || "select" === a || "textarea" === a));
                        a = !d;
                        break a;
                      default:
                        a = false;
                    }
                    if (a) return null;
                    if (c && "function" !== typeof c) throw Error(y2(231, b, typeof c));
                    return c;
                  }
                  var Pb = false;
                  if (fa) try {
                    var Qb = {};
                    Object.defineProperty(Qb, "passive", { get: function() {
                      Pb = true;
                    } });
                    window.addEventListener("test", Qb, Qb);
                    window.removeEventListener("test", Qb, Qb);
                  } catch (a) {
                    Pb = false;
                  }
                  function Rb(a, b, c, d, e, f, g, h, k) {
                    var l = Array.prototype.slice.call(arguments, 3);
                    try {
                      b.apply(c, l);
                    } catch (n) {
                      this.onError(n);
                    }
                  }
                  var Sb = false, Tb = null, Ub = false, Vb = null, Wb = { onError: function(a) {
                    Sb = true;
                    Tb = a;
                  } };
                  function Xb(a, b, c, d, e, f, g, h, k) {
                    Sb = false;
                    Tb = null;
                    Rb.apply(Wb, arguments);
                  }
                  function Yb(a, b, c, d, e, f, g, h, k) {
                    Xb.apply(this, arguments);
                    if (Sb) {
                      if (Sb) {
                        var l = Tb;
                        Sb = false;
                        Tb = null;
                      } else throw Error(y2(198));
                      Ub || (Ub = true, Vb = l);
                    }
                  }
                  function Zb(a) {
                    var b = a, c = a;
                    if (a.alternate) for (; b.return; ) b = b.return;
                    else {
                      a = b;
                      do
                        b = a, 0 !== (b.flags & 1026) && (c = b.return), a = b.return;
                      while (a);
                    }
                    return 3 === b.tag ? c : null;
                  }
                  function $b(a) {
                    if (13 === a.tag) {
                      var b = a.memoizedState;
                      null === b && (a = a.alternate, null !== a && (b = a.memoizedState));
                      if (null !== b) return b.dehydrated;
                    }
                    return null;
                  }
                  function ac(a) {
                    if (Zb(a) !== a) throw Error(y2(188));
                  }
                  function bc(a) {
                    var b = a.alternate;
                    if (!b) {
                      b = Zb(a);
                      if (null === b) throw Error(y2(188));
                      return b !== a ? null : a;
                    }
                    for (var c = a, d = b; ; ) {
                      var e = c.return;
                      if (null === e) break;
                      var f = e.alternate;
                      if (null === f) {
                        d = e.return;
                        if (null !== d) {
                          c = d;
                          continue;
                        }
                        break;
                      }
                      if (e.child === f.child) {
                        for (f = e.child; f; ) {
                          if (f === c) return ac(e), a;
                          if (f === d) return ac(e), b;
                          f = f.sibling;
                        }
                        throw Error(y2(188));
                      }
                      if (c.return !== d.return) c = e, d = f;
                      else {
                        for (var g = false, h = e.child; h; ) {
                          if (h === c) {
                            g = true;
                            c = e;
                            d = f;
                            break;
                          }
                          if (h === d) {
                            g = true;
                            d = e;
                            c = f;
                            break;
                          }
                          h = h.sibling;
                        }
                        if (!g) {
                          for (h = f.child; h; ) {
                            if (h === c) {
                              g = true;
                              c = f;
                              d = e;
                              break;
                            }
                            if (h === d) {
                              g = true;
                              d = f;
                              c = e;
                              break;
                            }
                            h = h.sibling;
                          }
                          if (!g) throw Error(y2(189));
                        }
                      }
                      if (c.alternate !== d) throw Error(y2(190));
                    }
                    if (3 !== c.tag) throw Error(y2(188));
                    return c.stateNode.current === c ? a : b;
                  }
                  function cc(a) {
                    a = bc(a);
                    if (!a) return null;
                    for (var b = a; ; ) {
                      if (5 === b.tag || 6 === b.tag) return b;
                      if (b.child) b.child.return = b, b = b.child;
                      else {
                        if (b === a) break;
                        for (; !b.sibling; ) {
                          if (!b.return || b.return === a) return null;
                          b = b.return;
                        }
                        b.sibling.return = b.return;
                        b = b.sibling;
                      }
                    }
                    return null;
                  }
                  function dc(a, b) {
                    for (var c = a.alternate; null !== b; ) {
                      if (b === a || b === c) return true;
                      b = b.return;
                    }
                    return false;
                  }
                  var ec, fc, gc, hc, ic = false, jc = [], kc = null, lc = null, mc = null, nc = /* @__PURE__ */ new Map(), oc = /* @__PURE__ */ new Map(), pc = [], qc = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
                  function rc(a, b, c, d, e) {
                    return { blockedOn: a, domEventName: b, eventSystemFlags: c | 16, nativeEvent: e, targetContainers: [d] };
                  }
                  function sc(a, b) {
                    switch (a) {
                      case "focusin":
                      case "focusout":
                        kc = null;
                        break;
                      case "dragenter":
                      case "dragleave":
                        lc = null;
                        break;
                      case "mouseover":
                      case "mouseout":
                        mc = null;
                        break;
                      case "pointerover":
                      case "pointerout":
                        nc.delete(b.pointerId);
                        break;
                      case "gotpointercapture":
                      case "lostpointercapture":
                        oc.delete(b.pointerId);
                    }
                  }
                  function tc(a, b, c, d, e, f) {
                    if (null === a || a.nativeEvent !== f) return a = rc(b, c, d, e, f), null !== b && (b = Cb(b), null !== b && fc(b)), a;
                    a.eventSystemFlags |= d;
                    b = a.targetContainers;
                    null !== e && -1 === b.indexOf(e) && b.push(e);
                    return a;
                  }
                  function uc(a, b, c, d, e) {
                    switch (b) {
                      case "focusin":
                        return kc = tc(kc, a, b, c, d, e), true;
                      case "dragenter":
                        return lc = tc(lc, a, b, c, d, e), true;
                      case "mouseover":
                        return mc = tc(mc, a, b, c, d, e), true;
                      case "pointerover":
                        var f = e.pointerId;
                        nc.set(f, tc(nc.get(f) || null, a, b, c, d, e));
                        return true;
                      case "gotpointercapture":
                        return f = e.pointerId, oc.set(f, tc(oc.get(f) || null, a, b, c, d, e)), true;
                    }
                    return false;
                  }
                  function vc(a) {
                    var b = wc(a.target);
                    if (null !== b) {
                      var c = Zb(b);
                      if (null !== c) {
                        if (b = c.tag, 13 === b) {
                          if (b = $b(c), null !== b) {
                            a.blockedOn = b;
                            hc(a.lanePriority, function() {
                              r.unstable_runWithPriority(a.priority, function() {
                                gc(c);
                              });
                            });
                            return;
                          }
                        } else if (3 === b && c.stateNode.hydrate) {
                          a.blockedOn = 3 === c.tag ? c.stateNode.containerInfo : null;
                          return;
                        }
                      }
                    }
                    a.blockedOn = null;
                  }
                  function xc(a) {
                    if (null !== a.blockedOn) return false;
                    for (var b = a.targetContainers; 0 < b.length; ) {
                      var c = yc(a.domEventName, a.eventSystemFlags, b[0], a.nativeEvent);
                      if (null !== c) return b = Cb(c), null !== b && fc(b), a.blockedOn = c, false;
                      b.shift();
                    }
                    return true;
                  }
                  function zc(a, b, c) {
                    xc(a) && c.delete(b);
                  }
                  function Ac() {
                    for (ic = false; 0 < jc.length; ) {
                      var a = jc[0];
                      if (null !== a.blockedOn) {
                        a = Cb(a.blockedOn);
                        null !== a && ec(a);
                        break;
                      }
                      for (var b = a.targetContainers; 0 < b.length; ) {
                        var c = yc(a.domEventName, a.eventSystemFlags, b[0], a.nativeEvent);
                        if (null !== c) {
                          a.blockedOn = c;
                          break;
                        }
                        b.shift();
                      }
                      null === a.blockedOn && jc.shift();
                    }
                    null !== kc && xc(kc) && (kc = null);
                    null !== lc && xc(lc) && (lc = null);
                    null !== mc && xc(mc) && (mc = null);
                    nc.forEach(zc);
                    oc.forEach(zc);
                  }
                  function Bc(a, b) {
                    a.blockedOn === b && (a.blockedOn = null, ic || (ic = true, r.unstable_scheduleCallback(r.unstable_NormalPriority, Ac)));
                  }
                  function Cc(a) {
                    function b(b2) {
                      return Bc(b2, a);
                    }
                    if (0 < jc.length) {
                      Bc(jc[0], a);
                      for (var c = 1; c < jc.length; c++) {
                        var d = jc[c];
                        d.blockedOn === a && (d.blockedOn = null);
                      }
                    }
                    null !== kc && Bc(kc, a);
                    null !== lc && Bc(lc, a);
                    null !== mc && Bc(mc, a);
                    nc.forEach(b);
                    oc.forEach(b);
                    for (c = 0; c < pc.length; c++) d = pc[c], d.blockedOn === a && (d.blockedOn = null);
                    for (; 0 < pc.length && (c = pc[0], null === c.blockedOn); ) vc(c), null === c.blockedOn && pc.shift();
                  }
                  function Dc(a, b) {
                    var c = {};
                    c[a.toLowerCase()] = b.toLowerCase();
                    c["Webkit" + a] = "webkit" + b;
                    c["Moz" + a] = "moz" + b;
                    return c;
                  }
                  var Ec = { animationend: Dc("Animation", "AnimationEnd"), animationiteration: Dc("Animation", "AnimationIteration"), animationstart: Dc("Animation", "AnimationStart"), transitionend: Dc("Transition", "TransitionEnd") }, Fc = {}, Gc = {};
                  fa && (Gc = document.createElement("div").style, "AnimationEvent" in window || (delete Ec.animationend.animation, delete Ec.animationiteration.animation, delete Ec.animationstart.animation), "TransitionEvent" in window || delete Ec.transitionend.transition);
                  function Hc(a) {
                    if (Fc[a]) return Fc[a];
                    if (!Ec[a]) return a;
                    var b = Ec[a], c;
                    for (c in b) if (b.hasOwnProperty(c) && c in Gc) return Fc[a] = b[c];
                    return a;
                  }
                  var Ic = Hc("animationend"), Jc = Hc("animationiteration"), Kc = Hc("animationstart"), Lc = Hc("transitionend"), Mc = /* @__PURE__ */ new Map(), Nc = /* @__PURE__ */ new Map(), Oc = [
                    "abort",
                    "abort",
                    Ic,
                    "animationEnd",
                    Jc,
                    "animationIteration",
                    Kc,
                    "animationStart",
                    "canplay",
                    "canPlay",
                    "canplaythrough",
                    "canPlayThrough",
                    "durationchange",
                    "durationChange",
                    "emptied",
                    "emptied",
                    "encrypted",
                    "encrypted",
                    "ended",
                    "ended",
                    "error",
                    "error",
                    "gotpointercapture",
                    "gotPointerCapture",
                    "load",
                    "load",
                    "loadeddata",
                    "loadedData",
                    "loadedmetadata",
                    "loadedMetadata",
                    "loadstart",
                    "loadStart",
                    "lostpointercapture",
                    "lostPointerCapture",
                    "playing",
                    "playing",
                    "progress",
                    "progress",
                    "seeking",
                    "seeking",
                    "stalled",
                    "stalled",
                    "suspend",
                    "suspend",
                    "timeupdate",
                    "timeUpdate",
                    Lc,
                    "transitionEnd",
                    "waiting",
                    "waiting"
                  ];
                  function Pc(a, b) {
                    for (var c = 0; c < a.length; c += 2) {
                      var d = a[c], e = a[c + 1];
                      e = "on" + (e[0].toUpperCase() + e.slice(1));
                      Nc.set(d, b);
                      Mc.set(d, e);
                      da(e, [d]);
                    }
                  }
                  var Qc = r.unstable_now;
                  Qc();
                  var F = 8;
                  function Rc(a) {
                    if (0 !== (1 & a)) return F = 15, 1;
                    if (0 !== (2 & a)) return F = 14, 2;
                    if (0 !== (4 & a)) return F = 13, 4;
                    var b = 24 & a;
                    if (0 !== b) return F = 12, b;
                    if (0 !== (a & 32)) return F = 11, 32;
                    b = 192 & a;
                    if (0 !== b) return F = 10, b;
                    if (0 !== (a & 256)) return F = 9, 256;
                    b = 3584 & a;
                    if (0 !== b) return F = 8, b;
                    if (0 !== (a & 4096)) return F = 7, 4096;
                    b = 4186112 & a;
                    if (0 !== b) return F = 6, b;
                    b = 62914560 & a;
                    if (0 !== b) return F = 5, b;
                    if (a & 67108864) return F = 4, 67108864;
                    if (0 !== (a & 134217728)) return F = 3, 134217728;
                    b = 805306368 & a;
                    if (0 !== b) return F = 2, b;
                    if (0 !== (1073741824 & a)) return F = 1, 1073741824;
                    F = 8;
                    return a;
                  }
                  function Sc(a) {
                    switch (a) {
                      case 99:
                        return 15;
                      case 98:
                        return 10;
                      case 97:
                      case 96:
                        return 8;
                      case 95:
                        return 2;
                      default:
                        return 0;
                    }
                  }
                  function Tc(a) {
                    switch (a) {
                      case 15:
                      case 14:
                        return 99;
                      case 13:
                      case 12:
                      case 11:
                      case 10:
                        return 98;
                      case 9:
                      case 8:
                      case 7:
                      case 6:
                      case 4:
                      case 5:
                        return 97;
                      case 3:
                      case 2:
                      case 1:
                        return 95;
                      case 0:
                        return 90;
                      default:
                        throw Error(y2(358, a));
                    }
                  }
                  function Uc(a, b) {
                    var c = a.pendingLanes;
                    if (0 === c) return F = 0;
                    var d = 0, e = 0, f = a.expiredLanes, g = a.suspendedLanes, h = a.pingedLanes;
                    if (0 !== f) d = f, e = F = 15;
                    else if (f = c & 134217727, 0 !== f) {
                      var k = f & ~g;
                      0 !== k ? (d = Rc(k), e = F) : (h &= f, 0 !== h && (d = Rc(h), e = F));
                    } else f = c & ~g, 0 !== f ? (d = Rc(f), e = F) : 0 !== h && (d = Rc(h), e = F);
                    if (0 === d) return 0;
                    d = 31 - Vc(d);
                    d = c & ((0 > d ? 0 : 1 << d) << 1) - 1;
                    if (0 !== b && b !== d && 0 === (b & g)) {
                      Rc(b);
                      if (e <= F) return b;
                      F = e;
                    }
                    b = a.entangledLanes;
                    if (0 !== b) for (a = a.entanglements, b &= d; 0 < b; ) c = 31 - Vc(b), e = 1 << c, d |= a[c], b &= ~e;
                    return d;
                  }
                  function Wc(a) {
                    a = a.pendingLanes & -1073741825;
                    return 0 !== a ? a : a & 1073741824 ? 1073741824 : 0;
                  }
                  function Xc(a, b) {
                    switch (a) {
                      case 15:
                        return 1;
                      case 14:
                        return 2;
                      case 12:
                        return a = Yc(24 & ~b), 0 === a ? Xc(10, b) : a;
                      case 10:
                        return a = Yc(192 & ~b), 0 === a ? Xc(8, b) : a;
                      case 8:
                        return a = Yc(3584 & ~b), 0 === a && (a = Yc(4186112 & ~b), 0 === a && (a = 512)), a;
                      case 2:
                        return b = Yc(805306368 & ~b), 0 === b && (b = 268435456), b;
                    }
                    throw Error(y2(358, a));
                  }
                  function Yc(a) {
                    return a & -a;
                  }
                  function Zc(a) {
                    for (var b = [], c = 0; 31 > c; c++) b.push(a);
                    return b;
                  }
                  function $c(a, b, c) {
                    a.pendingLanes |= b;
                    var d = b - 1;
                    a.suspendedLanes &= d;
                    a.pingedLanes &= d;
                    a = a.eventTimes;
                    b = 31 - Vc(b);
                    a[b] = c;
                  }
                  var Vc = Math.clz32 ? Math.clz32 : ad, bd = Math.log, cd = Math.LN2;
                  function ad(a) {
                    return 0 === a ? 32 : 31 - (bd(a) / cd | 0) | 0;
                  }
                  var dd = r.unstable_UserBlockingPriority, ed = r.unstable_runWithPriority, fd = true;
                  function gd(a, b, c, d) {
                    Kb || Ib();
                    var e = hd, f = Kb;
                    Kb = true;
                    try {
                      Hb(e, a, b, c, d);
                    } finally {
                      (Kb = f) || Mb();
                    }
                  }
                  function id(a, b, c, d) {
                    ed(dd, hd.bind(null, a, b, c, d));
                  }
                  function hd(a, b, c, d) {
                    if (fd) {
                      var e;
                      if ((e = 0 === (b & 4)) && 0 < jc.length && -1 < qc.indexOf(a)) a = rc(null, a, b, c, d), jc.push(a);
                      else {
                        var f = yc(a, b, c, d);
                        if (null === f) e && sc(a, d);
                        else {
                          if (e) {
                            if (-1 < qc.indexOf(a)) {
                              a = rc(f, a, b, c, d);
                              jc.push(a);
                              return;
                            }
                            if (uc(f, a, b, c, d)) return;
                            sc(a, d);
                          }
                          jd(a, b, d, null, c);
                        }
                      }
                    }
                  }
                  function yc(a, b, c, d) {
                    var e = xb(d);
                    e = wc(e);
                    if (null !== e) {
                      var f = Zb(e);
                      if (null === f) e = null;
                      else {
                        var g = f.tag;
                        if (13 === g) {
                          e = $b(f);
                          if (null !== e) return e;
                          e = null;
                        } else if (3 === g) {
                          if (f.stateNode.hydrate) return 3 === f.tag ? f.stateNode.containerInfo : null;
                          e = null;
                        } else f !== e && (e = null);
                      }
                    }
                    jd(a, b, d, e, c);
                    return null;
                  }
                  var kd = null, ld = null, md = null;
                  function nd() {
                    if (md) return md;
                    var a, b = ld, c = b.length, d, e = "value" in kd ? kd.value : kd.textContent, f = e.length;
                    for (a = 0; a < c && b[a] === e[a]; a++) ;
                    var g = c - a;
                    for (d = 1; d <= g && b[c - d] === e[f - d]; d++) ;
                    return md = e.slice(a, 1 < d ? 1 - d : void 0);
                  }
                  function od(a) {
                    var b = a.keyCode;
                    "charCode" in a ? (a = a.charCode, 0 === a && 13 === b && (a = 13)) : a = b;
                    10 === a && (a = 13);
                    return 32 <= a || 13 === a ? a : 0;
                  }
                  function pd() {
                    return true;
                  }
                  function qd() {
                    return false;
                  }
                  function rd(a) {
                    function b(b2, d, e, f, g) {
                      this._reactName = b2;
                      this._targetInst = e;
                      this.type = d;
                      this.nativeEvent = f;
                      this.target = g;
                      this.currentTarget = null;
                      for (var c in a) a.hasOwnProperty(c) && (b2 = a[c], this[c] = b2 ? b2(f) : f[c]);
                      this.isDefaultPrevented = (null != f.defaultPrevented ? f.defaultPrevented : false === f.returnValue) ? pd : qd;
                      this.isPropagationStopped = qd;
                      return this;
                    }
                    m(b.prototype, { preventDefault: function() {
                      this.defaultPrevented = true;
                      var a2 = this.nativeEvent;
                      a2 && (a2.preventDefault ? a2.preventDefault() : "unknown" !== typeof a2.returnValue && (a2.returnValue = false), this.isDefaultPrevented = pd);
                    }, stopPropagation: function() {
                      var a2 = this.nativeEvent;
                      a2 && (a2.stopPropagation ? a2.stopPropagation() : "unknown" !== typeof a2.cancelBubble && (a2.cancelBubble = true), this.isPropagationStopped = pd);
                    }, persist: function() {
                    }, isPersistent: pd });
                    return b;
                  }
                  var sd = { eventPhase: 0, bubbles: 0, cancelable: 0, timeStamp: function(a) {
                    return a.timeStamp || Date.now();
                  }, defaultPrevented: 0, isTrusted: 0 }, td = rd(sd), ud = m({}, sd, { view: 0, detail: 0 }), vd = rd(ud), wd, xd, yd, Ad = m({}, ud, { screenX: 0, screenY: 0, clientX: 0, clientY: 0, pageX: 0, pageY: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, getModifierState: zd, button: 0, buttons: 0, relatedTarget: function(a) {
                    return void 0 === a.relatedTarget ? a.fromElement === a.srcElement ? a.toElement : a.fromElement : a.relatedTarget;
                  }, movementX: function(a) {
                    if ("movementX" in a) return a.movementX;
                    a !== yd && (yd && "mousemove" === a.type ? (wd = a.screenX - yd.screenX, xd = a.screenY - yd.screenY) : xd = wd = 0, yd = a);
                    return wd;
                  }, movementY: function(a) {
                    return "movementY" in a ? a.movementY : xd;
                  } }), Bd = rd(Ad), Cd = m({}, Ad, { dataTransfer: 0 }), Dd = rd(Cd), Ed = m({}, ud, { relatedTarget: 0 }), Fd = rd(Ed), Gd = m({}, sd, { animationName: 0, elapsedTime: 0, pseudoElement: 0 }), Hd = rd(Gd), Id = m({}, sd, { clipboardData: function(a) {
                    return "clipboardData" in a ? a.clipboardData : window.clipboardData;
                  } }), Jd = rd(Id), Kd = m({}, sd, { data: 0 }), Ld = rd(Kd), Md = {
                    Esc: "Escape",
                    Spacebar: " ",
                    Left: "ArrowLeft",
                    Up: "ArrowUp",
                    Right: "ArrowRight",
                    Down: "ArrowDown",
                    Del: "Delete",
                    Win: "OS",
                    Menu: "ContextMenu",
                    Apps: "ContextMenu",
                    Scroll: "ScrollLock",
                    MozPrintableKey: "Unidentified"
                  }, Nd = {
                    8: "Backspace",
                    9: "Tab",
                    12: "Clear",
                    13: "Enter",
                    16: "Shift",
                    17: "Control",
                    18: "Alt",
                    19: "Pause",
                    20: "CapsLock",
                    27: "Escape",
                    32: " ",
                    33: "PageUp",
                    34: "PageDown",
                    35: "End",
                    36: "Home",
                    37: "ArrowLeft",
                    38: "ArrowUp",
                    39: "ArrowRight",
                    40: "ArrowDown",
                    45: "Insert",
                    46: "Delete",
                    112: "F1",
                    113: "F2",
                    114: "F3",
                    115: "F4",
                    116: "F5",
                    117: "F6",
                    118: "F7",
                    119: "F8",
                    120: "F9",
                    121: "F10",
                    122: "F11",
                    123: "F12",
                    144: "NumLock",
                    145: "ScrollLock",
                    224: "Meta"
                  }, Od = { Alt: "altKey", Control: "ctrlKey", Meta: "metaKey", Shift: "shiftKey" };
                  function Pd(a) {
                    var b = this.nativeEvent;
                    return b.getModifierState ? b.getModifierState(a) : (a = Od[a]) ? !!b[a] : false;
                  }
                  function zd() {
                    return Pd;
                  }
                  var Qd = m({}, ud, { key: function(a) {
                    if (a.key) {
                      var b = Md[a.key] || a.key;
                      if ("Unidentified" !== b) return b;
                    }
                    return "keypress" === a.type ? (a = od(a), 13 === a ? "Enter" : String.fromCharCode(a)) : "keydown" === a.type || "keyup" === a.type ? Nd[a.keyCode] || "Unidentified" : "";
                  }, code: 0, location: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, repeat: 0, locale: 0, getModifierState: zd, charCode: function(a) {
                    return "keypress" === a.type ? od(a) : 0;
                  }, keyCode: function(a) {
                    return "keydown" === a.type || "keyup" === a.type ? a.keyCode : 0;
                  }, which: function(a) {
                    return "keypress" === a.type ? od(a) : "keydown" === a.type || "keyup" === a.type ? a.keyCode : 0;
                  } }), Rd = rd(Qd), Sd = m({}, Ad, { pointerId: 0, width: 0, height: 0, pressure: 0, tangentialPressure: 0, tiltX: 0, tiltY: 0, twist: 0, pointerType: 0, isPrimary: 0 }), Td = rd(Sd), Ud = m({}, ud, { touches: 0, targetTouches: 0, changedTouches: 0, altKey: 0, metaKey: 0, ctrlKey: 0, shiftKey: 0, getModifierState: zd }), Vd = rd(Ud), Wd = m({}, sd, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 }), Xd = rd(Wd), Yd = m({}, Ad, {
                    deltaX: function(a) {
                      return "deltaX" in a ? a.deltaX : "wheelDeltaX" in a ? -a.wheelDeltaX : 0;
                    },
                    deltaY: function(a) {
                      return "deltaY" in a ? a.deltaY : "wheelDeltaY" in a ? -a.wheelDeltaY : "wheelDelta" in a ? -a.wheelDelta : 0;
                    },
                    deltaZ: 0,
                    deltaMode: 0
                  }), Zd = rd(Yd), $d = [9, 13, 27, 32], ae = fa && "CompositionEvent" in window, be = null;
                  fa && "documentMode" in document && (be = document.documentMode);
                  var ce = fa && "TextEvent" in window && !be, de = fa && (!ae || be && 8 < be && 11 >= be), ee = String.fromCharCode(32), fe = false;
                  function ge(a, b) {
                    switch (a) {
                      case "keyup":
                        return -1 !== $d.indexOf(b.keyCode);
                      case "keydown":
                        return 229 !== b.keyCode;
                      case "keypress":
                      case "mousedown":
                      case "focusout":
                        return true;
                      default:
                        return false;
                    }
                  }
                  function he(a) {
                    a = a.detail;
                    return "object" === typeof a && "data" in a ? a.data : null;
                  }
                  var ie = false;
                  function je(a, b) {
                    switch (a) {
                      case "compositionend":
                        return he(b);
                      case "keypress":
                        if (32 !== b.which) return null;
                        fe = true;
                        return ee;
                      case "textInput":
                        return a = b.data, a === ee && fe ? null : a;
                      default:
                        return null;
                    }
                  }
                  function ke(a, b) {
                    if (ie) return "compositionend" === a || !ae && ge(a, b) ? (a = nd(), md = ld = kd = null, ie = false, a) : null;
                    switch (a) {
                      case "paste":
                        return null;
                      case "keypress":
                        if (!(b.ctrlKey || b.altKey || b.metaKey) || b.ctrlKey && b.altKey) {
                          if (b.char && 1 < b.char.length) return b.char;
                          if (b.which) return String.fromCharCode(b.which);
                        }
                        return null;
                      case "compositionend":
                        return de && "ko" !== b.locale ? null : b.data;
                      default:
                        return null;
                    }
                  }
                  var le = { color: true, date: true, datetime: true, "datetime-local": true, email: true, month: true, number: true, password: true, range: true, search: true, tel: true, text: true, time: true, url: true, week: true };
                  function me(a) {
                    var b = a && a.nodeName && a.nodeName.toLowerCase();
                    return "input" === b ? !!le[a.type] : "textarea" === b ? true : false;
                  }
                  function ne(a, b, c, d) {
                    Eb(d);
                    b = oe(b, "onChange");
                    0 < b.length && (c = new td("onChange", "change", null, c, d), a.push({ event: c, listeners: b }));
                  }
                  var pe = null, qe = null;
                  function re(a) {
                    se(a, 0);
                  }
                  function te(a) {
                    var b = ue(a);
                    if (Wa(b)) return a;
                  }
                  function ve(a, b) {
                    if ("change" === a) return b;
                  }
                  var we = false;
                  if (fa) {
                    var xe;
                    if (fa) {
                      var ye = "oninput" in document;
                      if (!ye) {
                        var ze = document.createElement("div");
                        ze.setAttribute("oninput", "return;");
                        ye = "function" === typeof ze.oninput;
                      }
                      xe = ye;
                    } else xe = false;
                    we = xe && (!document.documentMode || 9 < document.documentMode);
                  }
                  function Ae() {
                    pe && (pe.detachEvent("onpropertychange", Be), qe = pe = null);
                  }
                  function Be(a) {
                    if ("value" === a.propertyName && te(qe)) {
                      var b = [];
                      ne(b, qe, a, xb(a));
                      a = re;
                      if (Kb) a(b);
                      else {
                        Kb = true;
                        try {
                          Gb(a, b);
                        } finally {
                          Kb = false, Mb();
                        }
                      }
                    }
                  }
                  function Ce(a, b, c) {
                    "focusin" === a ? (Ae(), pe = b, qe = c, pe.attachEvent("onpropertychange", Be)) : "focusout" === a && Ae();
                  }
                  function De(a) {
                    if ("selectionchange" === a || "keyup" === a || "keydown" === a) return te(qe);
                  }
                  function Ee(a, b) {
                    if ("click" === a) return te(b);
                  }
                  function Fe(a, b) {
                    if ("input" === a || "change" === a) return te(b);
                  }
                  function Ge(a, b) {
                    return a === b && (0 !== a || 1 / a === 1 / b) || a !== a && b !== b;
                  }
                  var He = "function" === typeof Object.is ? Object.is : Ge, Ie = Object.prototype.hasOwnProperty;
                  function Je(a, b) {
                    if (He(a, b)) return true;
                    if ("object" !== typeof a || null === a || "object" !== typeof b || null === b) return false;
                    var c = Object.keys(a), d = Object.keys(b);
                    if (c.length !== d.length) return false;
                    for (d = 0; d < c.length; d++) if (!Ie.call(b, c[d]) || !He(a[c[d]], b[c[d]])) return false;
                    return true;
                  }
                  function Ke(a) {
                    for (; a && a.firstChild; ) a = a.firstChild;
                    return a;
                  }
                  function Le(a, b) {
                    var c = Ke(a);
                    a = 0;
                    for (var d; c; ) {
                      if (3 === c.nodeType) {
                        d = a + c.textContent.length;
                        if (a <= b && d >= b) return { node: c, offset: b - a };
                        a = d;
                      }
                      a: {
                        for (; c; ) {
                          if (c.nextSibling) {
                            c = c.nextSibling;
                            break a;
                          }
                          c = c.parentNode;
                        }
                        c = void 0;
                      }
                      c = Ke(c);
                    }
                  }
                  function Me(a, b) {
                    return a && b ? a === b ? true : a && 3 === a.nodeType ? false : b && 3 === b.nodeType ? Me(a, b.parentNode) : "contains" in a ? a.contains(b) : a.compareDocumentPosition ? !!(a.compareDocumentPosition(b) & 16) : false : false;
                  }
                  function Ne() {
                    for (var a = window, b = Xa(); b instanceof a.HTMLIFrameElement; ) {
                      try {
                        var c = "string" === typeof b.contentWindow.location.href;
                      } catch (d) {
                        c = false;
                      }
                      if (c) a = b.contentWindow;
                      else break;
                      b = Xa(a.document);
                    }
                    return b;
                  }
                  function Oe(a) {
                    var b = a && a.nodeName && a.nodeName.toLowerCase();
                    return b && ("input" === b && ("text" === a.type || "search" === a.type || "tel" === a.type || "url" === a.type || "password" === a.type) || "textarea" === b || "true" === a.contentEditable);
                  }
                  var Pe = fa && "documentMode" in document && 11 >= document.documentMode, Qe = null, Re = null, Se = null, Te = false;
                  function Ue(a, b, c) {
                    var d = c.window === c ? c.document : 9 === c.nodeType ? c : c.ownerDocument;
                    Te || null == Qe || Qe !== Xa(d) || (d = Qe, "selectionStart" in d && Oe(d) ? d = { start: d.selectionStart, end: d.selectionEnd } : (d = (d.ownerDocument && d.ownerDocument.defaultView || window).getSelection(), d = { anchorNode: d.anchorNode, anchorOffset: d.anchorOffset, focusNode: d.focusNode, focusOffset: d.focusOffset }), Se && Je(Se, d) || (Se = d, d = oe(Re, "onSelect"), 0 < d.length && (b = new td("onSelect", "select", null, b, c), a.push({ event: b, listeners: d }), b.target = Qe)));
                  }
                  Pc(
                    "cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
                    0
                  );
                  Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "), 1);
                  Pc(Oc, 2);
                  for (var Ve = "change selectionchange textInput compositionstart compositionend compositionupdate".split(" "), We = 0; We < Ve.length; We++) Nc.set(Ve[We], 0);
                  ea("onMouseEnter", ["mouseout", "mouseover"]);
                  ea("onMouseLeave", ["mouseout", "mouseover"]);
                  ea("onPointerEnter", ["pointerout", "pointerover"]);
                  ea("onPointerLeave", ["pointerout", "pointerover"]);
                  da("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" "));
                  da("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));
                  da("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]);
                  da("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" "));
                  da("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" "));
                  da("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" "));
                  var Xe = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), Ye = new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));
                  function Ze(a, b, c) {
                    var d = a.type || "unknown-event";
                    a.currentTarget = c;
                    Yb(d, b, void 0, a);
                    a.currentTarget = null;
                  }
                  function se(a, b) {
                    b = 0 !== (b & 4);
                    for (var c = 0; c < a.length; c++) {
                      var d = a[c], e = d.event;
                      d = d.listeners;
                      a: {
                        var f = void 0;
                        if (b) for (var g = d.length - 1; 0 <= g; g--) {
                          var h = d[g], k = h.instance, l = h.currentTarget;
                          h = h.listener;
                          if (k !== f && e.isPropagationStopped()) break a;
                          Ze(e, h, l);
                          f = k;
                        }
                        else for (g = 0; g < d.length; g++) {
                          h = d[g];
                          k = h.instance;
                          l = h.currentTarget;
                          h = h.listener;
                          if (k !== f && e.isPropagationStopped()) break a;
                          Ze(e, h, l);
                          f = k;
                        }
                      }
                    }
                    if (Ub) throw a = Vb, Ub = false, Vb = null, a;
                  }
                  function G(a, b) {
                    var c = $e(b), d = a + "__bubble";
                    c.has(d) || (af(b, a, 2, false), c.add(d));
                  }
                  var bf = "_reactListening" + Math.random().toString(36).slice(2);
                  function cf(a) {
                    a[bf] || (a[bf] = true, ba.forEach(function(b) {
                      Ye.has(b) || df(b, false, a, null);
                      df(b, true, a, null);
                    }));
                  }
                  function df(a, b, c, d) {
                    var e = 4 < arguments.length && void 0 !== arguments[4] ? arguments[4] : 0, f = c;
                    "selectionchange" === a && 9 !== c.nodeType && (f = c.ownerDocument);
                    if (null !== d && !b && Ye.has(a)) {
                      if ("scroll" !== a) return;
                      e |= 2;
                      f = d;
                    }
                    var g = $e(f), h = a + "__" + (b ? "capture" : "bubble");
                    g.has(h) || (b && (e |= 4), af(f, a, e, b), g.add(h));
                  }
                  function af(a, b, c, d) {
                    var e = Nc.get(b);
                    switch (void 0 === e ? 2 : e) {
                      case 0:
                        e = gd;
                        break;
                      case 1:
                        e = id;
                        break;
                      default:
                        e = hd;
                    }
                    c = e.bind(null, b, c, a);
                    e = void 0;
                    !Pb || "touchstart" !== b && "touchmove" !== b && "wheel" !== b || (e = true);
                    d ? void 0 !== e ? a.addEventListener(b, c, { capture: true, passive: e }) : a.addEventListener(b, c, true) : void 0 !== e ? a.addEventListener(b, c, { passive: e }) : a.addEventListener(b, c, false);
                  }
                  function jd(a, b, c, d, e) {
                    var f = d;
                    if (0 === (b & 1) && 0 === (b & 2) && null !== d) a: for (; ; ) {
                      if (null === d) return;
                      var g = d.tag;
                      if (3 === g || 4 === g) {
                        var h = d.stateNode.containerInfo;
                        if (h === e || 8 === h.nodeType && h.parentNode === e) break;
                        if (4 === g) for (g = d.return; null !== g; ) {
                          var k = g.tag;
                          if (3 === k || 4 === k) {
                            if (k = g.stateNode.containerInfo, k === e || 8 === k.nodeType && k.parentNode === e) return;
                          }
                          g = g.return;
                        }
                        for (; null !== h; ) {
                          g = wc(h);
                          if (null === g) return;
                          k = g.tag;
                          if (5 === k || 6 === k) {
                            d = f = g;
                            continue a;
                          }
                          h = h.parentNode;
                        }
                      }
                      d = d.return;
                    }
                    Nb(function() {
                      var d2 = f, e2 = xb(c), g2 = [];
                      a: {
                        var h2 = Mc.get(a);
                        if (void 0 !== h2) {
                          var k2 = td, x2 = a;
                          switch (a) {
                            case "keypress":
                              if (0 === od(c)) break a;
                            case "keydown":
                            case "keyup":
                              k2 = Rd;
                              break;
                            case "focusin":
                              x2 = "focus";
                              k2 = Fd;
                              break;
                            case "focusout":
                              x2 = "blur";
                              k2 = Fd;
                              break;
                            case "beforeblur":
                            case "afterblur":
                              k2 = Fd;
                              break;
                            case "click":
                              if (2 === c.button) break a;
                            case "auxclick":
                            case "dblclick":
                            case "mousedown":
                            case "mousemove":
                            case "mouseup":
                            case "mouseout":
                            case "mouseover":
                            case "contextmenu":
                              k2 = Bd;
                              break;
                            case "drag":
                            case "dragend":
                            case "dragenter":
                            case "dragexit":
                            case "dragleave":
                            case "dragover":
                            case "dragstart":
                            case "drop":
                              k2 = Dd;
                              break;
                            case "touchcancel":
                            case "touchend":
                            case "touchmove":
                            case "touchstart":
                              k2 = Vd;
                              break;
                            case Ic:
                            case Jc:
                            case Kc:
                              k2 = Hd;
                              break;
                            case Lc:
                              k2 = Xd;
                              break;
                            case "scroll":
                              k2 = vd;
                              break;
                            case "wheel":
                              k2 = Zd;
                              break;
                            case "copy":
                            case "cut":
                            case "paste":
                              k2 = Jd;
                              break;
                            case "gotpointercapture":
                            case "lostpointercapture":
                            case "pointercancel":
                            case "pointerdown":
                            case "pointermove":
                            case "pointerout":
                            case "pointerover":
                            case "pointerup":
                              k2 = Td;
                          }
                          var w = 0 !== (b & 4), z = !w && "scroll" === a, u = w ? null !== h2 ? h2 + "Capture" : null : h2;
                          w = [];
                          for (var t2 = d2, q; null !== t2; ) {
                            q = t2;
                            var v = q.stateNode;
                            5 === q.tag && null !== v && (q = v, null !== u && (v = Ob(t2, u), null != v && w.push(ef(t2, v, q))));
                            if (z) break;
                            t2 = t2.return;
                          }
                          0 < w.length && (h2 = new k2(h2, x2, null, c, e2), g2.push({ event: h2, listeners: w }));
                        }
                      }
                      if (0 === (b & 7)) {
                        a: {
                          h2 = "mouseover" === a || "pointerover" === a;
                          k2 = "mouseout" === a || "pointerout" === a;
                          if (h2 && 0 === (b & 16) && (x2 = c.relatedTarget || c.fromElement) && (wc(x2) || x2[ff])) break a;
                          if (k2 || h2) {
                            h2 = e2.window === e2 ? e2 : (h2 = e2.ownerDocument) ? h2.defaultView || h2.parentWindow : window;
                            if (k2) {
                              if (x2 = c.relatedTarget || c.toElement, k2 = d2, x2 = x2 ? wc(x2) : null, null !== x2 && (z = Zb(x2), x2 !== z || 5 !== x2.tag && 6 !== x2.tag)) x2 = null;
                            } else k2 = null, x2 = d2;
                            if (k2 !== x2) {
                              w = Bd;
                              v = "onMouseLeave";
                              u = "onMouseEnter";
                              t2 = "mouse";
                              if ("pointerout" === a || "pointerover" === a) w = Td, v = "onPointerLeave", u = "onPointerEnter", t2 = "pointer";
                              z = null == k2 ? h2 : ue(k2);
                              q = null == x2 ? h2 : ue(x2);
                              h2 = new w(v, t2 + "leave", k2, c, e2);
                              h2.target = z;
                              h2.relatedTarget = q;
                              v = null;
                              wc(e2) === d2 && (w = new w(u, t2 + "enter", x2, c, e2), w.target = q, w.relatedTarget = z, v = w);
                              z = v;
                              if (k2 && x2) b: {
                                w = k2;
                                u = x2;
                                t2 = 0;
                                for (q = w; q; q = gf(q)) t2++;
                                q = 0;
                                for (v = u; v; v = gf(v)) q++;
                                for (; 0 < t2 - q; ) w = gf(w), t2--;
                                for (; 0 < q - t2; ) u = gf(u), q--;
                                for (; t2--; ) {
                                  if (w === u || null !== u && w === u.alternate) break b;
                                  w = gf(w);
                                  u = gf(u);
                                }
                                w = null;
                              }
                              else w = null;
                              null !== k2 && hf(g2, h2, k2, w, false);
                              null !== x2 && null !== z && hf(g2, z, x2, w, true);
                            }
                          }
                        }
                        a: {
                          h2 = d2 ? ue(d2) : window;
                          k2 = h2.nodeName && h2.nodeName.toLowerCase();
                          if ("select" === k2 || "input" === k2 && "file" === h2.type) var J = ve;
                          else if (me(h2)) if (we) J = Fe;
                          else {
                            J = De;
                            var K = Ce;
                          }
                          else (k2 = h2.nodeName) && "input" === k2.toLowerCase() && ("checkbox" === h2.type || "radio" === h2.type) && (J = Ee);
                          if (J && (J = J(a, d2))) {
                            ne(g2, J, c, e2);
                            break a;
                          }
                          K && K(a, h2, d2);
                          "focusout" === a && (K = h2._wrapperState) && K.controlled && "number" === h2.type && bb(h2, "number", h2.value);
                        }
                        K = d2 ? ue(d2) : window;
                        switch (a) {
                          case "focusin":
                            if (me(K) || "true" === K.contentEditable) Qe = K, Re = d2, Se = null;
                            break;
                          case "focusout":
                            Se = Re = Qe = null;
                            break;
                          case "mousedown":
                            Te = true;
                            break;
                          case "contextmenu":
                          case "mouseup":
                          case "dragend":
                            Te = false;
                            Ue(g2, c, e2);
                            break;
                          case "selectionchange":
                            if (Pe) break;
                          case "keydown":
                          case "keyup":
                            Ue(g2, c, e2);
                        }
                        var Q;
                        if (ae) b: {
                          switch (a) {
                            case "compositionstart":
                              var L = "onCompositionStart";
                              break b;
                            case "compositionend":
                              L = "onCompositionEnd";
                              break b;
                            case "compositionupdate":
                              L = "onCompositionUpdate";
                              break b;
                          }
                          L = void 0;
                        }
                        else ie ? ge(a, c) && (L = "onCompositionEnd") : "keydown" === a && 229 === c.keyCode && (L = "onCompositionStart");
                        L && (de && "ko" !== c.locale && (ie || "onCompositionStart" !== L ? "onCompositionEnd" === L && ie && (Q = nd()) : (kd = e2, ld = "value" in kd ? kd.value : kd.textContent, ie = true)), K = oe(d2, L), 0 < K.length && (L = new Ld(L, a, null, c, e2), g2.push({ event: L, listeners: K }), Q ? L.data = Q : (Q = he(c), null !== Q && (L.data = Q))));
                        if (Q = ce ? je(a, c) : ke(a, c)) d2 = oe(d2, "onBeforeInput"), 0 < d2.length && (e2 = new Ld(
                          "onBeforeInput",
                          "beforeinput",
                          null,
                          c,
                          e2
                        ), g2.push({ event: e2, listeners: d2 }), e2.data = Q);
                      }
                      se(g2, b);
                    });
                  }
                  function ef(a, b, c) {
                    return { instance: a, listener: b, currentTarget: c };
                  }
                  function oe(a, b) {
                    for (var c = b + "Capture", d = []; null !== a; ) {
                      var e = a, f = e.stateNode;
                      5 === e.tag && null !== f && (e = f, f = Ob(a, c), null != f && d.unshift(ef(a, f, e)), f = Ob(a, b), null != f && d.push(ef(a, f, e)));
                      a = a.return;
                    }
                    return d;
                  }
                  function gf(a) {
                    if (null === a) return null;
                    do
                      a = a.return;
                    while (a && 5 !== a.tag);
                    return a ? a : null;
                  }
                  function hf(a, b, c, d, e) {
                    for (var f = b._reactName, g = []; null !== c && c !== d; ) {
                      var h = c, k = h.alternate, l = h.stateNode;
                      if (null !== k && k === d) break;
                      5 === h.tag && null !== l && (h = l, e ? (k = Ob(c, f), null != k && g.unshift(ef(c, k, h))) : e || (k = Ob(c, f), null != k && g.push(ef(c, k, h))));
                      c = c.return;
                    }
                    0 !== g.length && a.push({ event: b, listeners: g });
                  }
                  function jf() {
                  }
                  var kf = null, lf = null;
                  function mf(a, b) {
                    switch (a) {
                      case "button":
                      case "input":
                      case "select":
                      case "textarea":
                        return !!b.autoFocus;
                    }
                    return false;
                  }
                  function nf(a, b) {
                    return "textarea" === a || "option" === a || "noscript" === a || "string" === typeof b.children || "number" === typeof b.children || "object" === typeof b.dangerouslySetInnerHTML && null !== b.dangerouslySetInnerHTML && null != b.dangerouslySetInnerHTML.__html;
                  }
                  var of = "function" === typeof setTimeout ? setTimeout : void 0, pf = "function" === typeof clearTimeout ? clearTimeout : void 0;
                  function qf(a) {
                    1 === a.nodeType ? a.textContent = "" : 9 === a.nodeType && (a = a.body, null != a && (a.textContent = ""));
                  }
                  function rf(a) {
                    for (; null != a; a = a.nextSibling) {
                      var b = a.nodeType;
                      if (1 === b || 3 === b) break;
                    }
                    return a;
                  }
                  function sf(a) {
                    a = a.previousSibling;
                    for (var b = 0; a; ) {
                      if (8 === a.nodeType) {
                        var c = a.data;
                        if ("$" === c || "$!" === c || "$?" === c) {
                          if (0 === b) return a;
                          b--;
                        } else "/$" === c && b++;
                      }
                      a = a.previousSibling;
                    }
                    return null;
                  }
                  var tf = 0;
                  function uf(a) {
                    return { $$typeof: Ga, toString: a, valueOf: a };
                  }
                  var vf = Math.random().toString(36).slice(2), wf = "__reactFiber$" + vf, xf = "__reactProps$" + vf, ff = "__reactContainer$" + vf, yf = "__reactEvents$" + vf;
                  function wc(a) {
                    var b = a[wf];
                    if (b) return b;
                    for (var c = a.parentNode; c; ) {
                      if (b = c[ff] || c[wf]) {
                        c = b.alternate;
                        if (null !== b.child || null !== c && null !== c.child) for (a = sf(a); null !== a; ) {
                          if (c = a[wf]) return c;
                          a = sf(a);
                        }
                        return b;
                      }
                      a = c;
                      c = a.parentNode;
                    }
                    return null;
                  }
                  function Cb(a) {
                    a = a[wf] || a[ff];
                    return !a || 5 !== a.tag && 6 !== a.tag && 13 !== a.tag && 3 !== a.tag ? null : a;
                  }
                  function ue(a) {
                    if (5 === a.tag || 6 === a.tag) return a.stateNode;
                    throw Error(y2(33));
                  }
                  function Db(a) {
                    return a[xf] || null;
                  }
                  function $e(a) {
                    var b = a[yf];
                    void 0 === b && (b = a[yf] = /* @__PURE__ */ new Set());
                    return b;
                  }
                  var zf = [], Af = -1;
                  function Bf(a) {
                    return { current: a };
                  }
                  function H(a) {
                    0 > Af || (a.current = zf[Af], zf[Af] = null, Af--);
                  }
                  function I(a, b) {
                    Af++;
                    zf[Af] = a.current;
                    a.current = b;
                  }
                  var Cf = {}, M = Bf(Cf), N = Bf(false), Df = Cf;
                  function Ef(a, b) {
                    var c = a.type.contextTypes;
                    if (!c) return Cf;
                    var d = a.stateNode;
                    if (d && d.__reactInternalMemoizedUnmaskedChildContext === b) return d.__reactInternalMemoizedMaskedChildContext;
                    var e = {}, f;
                    for (f in c) e[f] = b[f];
                    d && (a = a.stateNode, a.__reactInternalMemoizedUnmaskedChildContext = b, a.__reactInternalMemoizedMaskedChildContext = e);
                    return e;
                  }
                  function Ff(a) {
                    a = a.childContextTypes;
                    return null !== a && void 0 !== a;
                  }
                  function Gf() {
                    H(N);
                    H(M);
                  }
                  function Hf(a, b, c) {
                    if (M.current !== Cf) throw Error(y2(168));
                    I(M, b);
                    I(N, c);
                  }
                  function If(a, b, c) {
                    var d = a.stateNode;
                    a = b.childContextTypes;
                    if ("function" !== typeof d.getChildContext) return c;
                    d = d.getChildContext();
                    for (var e in d) if (!(e in a)) throw Error(y2(108, Ra(b) || "Unknown", e));
                    return m({}, c, d);
                  }
                  function Jf(a) {
                    a = (a = a.stateNode) && a.__reactInternalMemoizedMergedChildContext || Cf;
                    Df = M.current;
                    I(M, a);
                    I(N, N.current);
                    return true;
                  }
                  function Kf(a, b, c) {
                    var d = a.stateNode;
                    if (!d) throw Error(y2(169));
                    c ? (a = If(a, b, Df), d.__reactInternalMemoizedMergedChildContext = a, H(N), H(M), I(M, a)) : H(N);
                    I(N, c);
                  }
                  var Lf = null, Mf = null, Nf = r.unstable_runWithPriority, Of = r.unstable_scheduleCallback, Pf = r.unstable_cancelCallback, Qf = r.unstable_shouldYield, Rf = r.unstable_requestPaint, Sf = r.unstable_now, Tf = r.unstable_getCurrentPriorityLevel, Uf = r.unstable_ImmediatePriority, Vf = r.unstable_UserBlockingPriority, Wf = r.unstable_NormalPriority, Xf = r.unstable_LowPriority, Yf = r.unstable_IdlePriority, Zf = {}, $f = void 0 !== Rf ? Rf : function() {
                  }, ag = null, bg = null, cg = false, dg = Sf(), O = 1e4 > dg ? Sf : function() {
                    return Sf() - dg;
                  };
                  function eg() {
                    switch (Tf()) {
                      case Uf:
                        return 99;
                      case Vf:
                        return 98;
                      case Wf:
                        return 97;
                      case Xf:
                        return 96;
                      case Yf:
                        return 95;
                      default:
                        throw Error(y2(332));
                    }
                  }
                  function fg(a) {
                    switch (a) {
                      case 99:
                        return Uf;
                      case 98:
                        return Vf;
                      case 97:
                        return Wf;
                      case 96:
                        return Xf;
                      case 95:
                        return Yf;
                      default:
                        throw Error(y2(332));
                    }
                  }
                  function gg(a, b) {
                    a = fg(a);
                    return Nf(a, b);
                  }
                  function hg(a, b, c) {
                    a = fg(a);
                    return Of(a, b, c);
                  }
                  function ig() {
                    if (null !== bg) {
                      var a = bg;
                      bg = null;
                      Pf(a);
                    }
                    jg();
                  }
                  function jg() {
                    if (!cg && null !== ag) {
                      cg = true;
                      var a = 0;
                      try {
                        var b = ag;
                        gg(99, function() {
                          for (; a < b.length; a++) {
                            var c = b[a];
                            do
                              c = c(true);
                            while (null !== c);
                          }
                        });
                        ag = null;
                      } catch (c) {
                        throw null !== ag && (ag = ag.slice(a + 1)), Of(Uf, ig), c;
                      } finally {
                        cg = false;
                      }
                    }
                  }
                  var kg = ra.ReactCurrentBatchConfig;
                  function lg(a, b) {
                    if (a && a.defaultProps) {
                      b = m({}, b);
                      a = a.defaultProps;
                      for (var c in a) void 0 === b[c] && (b[c] = a[c]);
                      return b;
                    }
                    return b;
                  }
                  var mg = Bf(null), ng = null, og = null, pg = null;
                  function qg() {
                    pg = og = ng = null;
                  }
                  function rg(a) {
                    var b = mg.current;
                    H(mg);
                    a.type._context._currentValue = b;
                  }
                  function sg(a, b) {
                    for (; null !== a; ) {
                      var c = a.alternate;
                      if ((a.childLanes & b) === b) if (null === c || (c.childLanes & b) === b) break;
                      else c.childLanes |= b;
                      else a.childLanes |= b, null !== c && (c.childLanes |= b);
                      a = a.return;
                    }
                  }
                  function tg(a, b) {
                    ng = a;
                    pg = og = null;
                    a = a.dependencies;
                    null !== a && null !== a.firstContext && (0 !== (a.lanes & b) && (ug = true), a.firstContext = null);
                  }
                  function vg(a, b) {
                    if (pg !== a && false !== b && 0 !== b) {
                      if ("number" !== typeof b || 1073741823 === b) pg = a, b = 1073741823;
                      b = { context: a, observedBits: b, next: null };
                      if (null === og) {
                        if (null === ng) throw Error(y2(308));
                        og = b;
                        ng.dependencies = { lanes: 0, firstContext: b, responders: null };
                      } else og = og.next = b;
                    }
                    return a._currentValue;
                  }
                  var wg = false;
                  function xg(a) {
                    a.updateQueue = { baseState: a.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null }, effects: null };
                  }
                  function yg(a, b) {
                    a = a.updateQueue;
                    b.updateQueue === a && (b.updateQueue = { baseState: a.baseState, firstBaseUpdate: a.firstBaseUpdate, lastBaseUpdate: a.lastBaseUpdate, shared: a.shared, effects: a.effects });
                  }
                  function zg(a, b) {
                    return { eventTime: a, lane: b, tag: 0, payload: null, callback: null, next: null };
                  }
                  function Ag(a, b) {
                    a = a.updateQueue;
                    if (null !== a) {
                      a = a.shared;
                      var c = a.pending;
                      null === c ? b.next = b : (b.next = c.next, c.next = b);
                      a.pending = b;
                    }
                  }
                  function Bg(a, b) {
                    var c = a.updateQueue, d = a.alternate;
                    if (null !== d && (d = d.updateQueue, c === d)) {
                      var e = null, f = null;
                      c = c.firstBaseUpdate;
                      if (null !== c) {
                        do {
                          var g = { eventTime: c.eventTime, lane: c.lane, tag: c.tag, payload: c.payload, callback: c.callback, next: null };
                          null === f ? e = f = g : f = f.next = g;
                          c = c.next;
                        } while (null !== c);
                        null === f ? e = f = b : f = f.next = b;
                      } else e = f = b;
                      c = { baseState: d.baseState, firstBaseUpdate: e, lastBaseUpdate: f, shared: d.shared, effects: d.effects };
                      a.updateQueue = c;
                      return;
                    }
                    a = c.lastBaseUpdate;
                    null === a ? c.firstBaseUpdate = b : a.next = b;
                    c.lastBaseUpdate = b;
                  }
                  function Cg(a, b, c, d) {
                    var e = a.updateQueue;
                    wg = false;
                    var f = e.firstBaseUpdate, g = e.lastBaseUpdate, h = e.shared.pending;
                    if (null !== h) {
                      e.shared.pending = null;
                      var k = h, l = k.next;
                      k.next = null;
                      null === g ? f = l : g.next = l;
                      g = k;
                      var n = a.alternate;
                      if (null !== n) {
                        n = n.updateQueue;
                        var A = n.lastBaseUpdate;
                        A !== g && (null === A ? n.firstBaseUpdate = l : A.next = l, n.lastBaseUpdate = k);
                      }
                    }
                    if (null !== f) {
                      A = e.baseState;
                      g = 0;
                      n = l = k = null;
                      do {
                        h = f.lane;
                        var p = f.eventTime;
                        if ((d & h) === h) {
                          null !== n && (n = n.next = {
                            eventTime: p,
                            lane: 0,
                            tag: f.tag,
                            payload: f.payload,
                            callback: f.callback,
                            next: null
                          });
                          a: {
                            var C = a, x2 = f;
                            h = b;
                            p = c;
                            switch (x2.tag) {
                              case 1:
                                C = x2.payload;
                                if ("function" === typeof C) {
                                  A = C.call(p, A, h);
                                  break a;
                                }
                                A = C;
                                break a;
                              case 3:
                                C.flags = C.flags & -4097 | 64;
                              case 0:
                                C = x2.payload;
                                h = "function" === typeof C ? C.call(p, A, h) : C;
                                if (null === h || void 0 === h) break a;
                                A = m({}, A, h);
                                break a;
                              case 2:
                                wg = true;
                            }
                          }
                          null !== f.callback && (a.flags |= 32, h = e.effects, null === h ? e.effects = [f] : h.push(f));
                        } else p = { eventTime: p, lane: h, tag: f.tag, payload: f.payload, callback: f.callback, next: null }, null === n ? (l = n = p, k = A) : n = n.next = p, g |= h;
                        f = f.next;
                        if (null === f) if (h = e.shared.pending, null === h) break;
                        else f = h.next, h.next = null, e.lastBaseUpdate = h, e.shared.pending = null;
                      } while (1);
                      null === n && (k = A);
                      e.baseState = k;
                      e.firstBaseUpdate = l;
                      e.lastBaseUpdate = n;
                      Dg |= g;
                      a.lanes = g;
                      a.memoizedState = A;
                    }
                  }
                  function Eg(a, b, c) {
                    a = b.effects;
                    b.effects = null;
                    if (null !== a) for (b = 0; b < a.length; b++) {
                      var d = a[b], e = d.callback;
                      if (null !== e) {
                        d.callback = null;
                        d = c;
                        if ("function" !== typeof e) throw Error(y2(191, e));
                        e.call(d);
                      }
                    }
                  }
                  var Fg = new aa.Component().refs;
                  function Gg(a, b, c, d) {
                    b = a.memoizedState;
                    c = c(d, b);
                    c = null === c || void 0 === c ? b : m({}, b, c);
                    a.memoizedState = c;
                    0 === a.lanes && (a.updateQueue.baseState = c);
                  }
                  var Kg = { isMounted: function(a) {
                    return (a = a._reactInternals) ? Zb(a) === a : false;
                  }, enqueueSetState: function(a, b, c) {
                    a = a._reactInternals;
                    var d = Hg(), e = Ig(a), f = zg(d, e);
                    f.payload = b;
                    void 0 !== c && null !== c && (f.callback = c);
                    Ag(a, f);
                    Jg(a, e, d);
                  }, enqueueReplaceState: function(a, b, c) {
                    a = a._reactInternals;
                    var d = Hg(), e = Ig(a), f = zg(d, e);
                    f.tag = 1;
                    f.payload = b;
                    void 0 !== c && null !== c && (f.callback = c);
                    Ag(a, f);
                    Jg(a, e, d);
                  }, enqueueForceUpdate: function(a, b) {
                    a = a._reactInternals;
                    var c = Hg(), d = Ig(a), e = zg(c, d);
                    e.tag = 2;
                    void 0 !== b && null !== b && (e.callback = b);
                    Ag(a, e);
                    Jg(a, d, c);
                  } };
                  function Lg(a, b, c, d, e, f, g) {
                    a = a.stateNode;
                    return "function" === typeof a.shouldComponentUpdate ? a.shouldComponentUpdate(d, f, g) : b.prototype && b.prototype.isPureReactComponent ? !Je(c, d) || !Je(e, f) : true;
                  }
                  function Mg(a, b, c) {
                    var d = false, e = Cf;
                    var f = b.contextType;
                    "object" === typeof f && null !== f ? f = vg(f) : (e = Ff(b) ? Df : M.current, d = b.contextTypes, f = (d = null !== d && void 0 !== d) ? Ef(a, e) : Cf);
                    b = new b(c, f);
                    a.memoizedState = null !== b.state && void 0 !== b.state ? b.state : null;
                    b.updater = Kg;
                    a.stateNode = b;
                    b._reactInternals = a;
                    d && (a = a.stateNode, a.__reactInternalMemoizedUnmaskedChildContext = e, a.__reactInternalMemoizedMaskedChildContext = f);
                    return b;
                  }
                  function Ng(a, b, c, d) {
                    a = b.state;
                    "function" === typeof b.componentWillReceiveProps && b.componentWillReceiveProps(c, d);
                    "function" === typeof b.UNSAFE_componentWillReceiveProps && b.UNSAFE_componentWillReceiveProps(c, d);
                    b.state !== a && Kg.enqueueReplaceState(b, b.state, null);
                  }
                  function Og(a, b, c, d) {
                    var e = a.stateNode;
                    e.props = c;
                    e.state = a.memoizedState;
                    e.refs = Fg;
                    xg(a);
                    var f = b.contextType;
                    "object" === typeof f && null !== f ? e.context = vg(f) : (f = Ff(b) ? Df : M.current, e.context = Ef(a, f));
                    Cg(a, c, e, d);
                    e.state = a.memoizedState;
                    f = b.getDerivedStateFromProps;
                    "function" === typeof f && (Gg(a, b, f, c), e.state = a.memoizedState);
                    "function" === typeof b.getDerivedStateFromProps || "function" === typeof e.getSnapshotBeforeUpdate || "function" !== typeof e.UNSAFE_componentWillMount && "function" !== typeof e.componentWillMount || (b = e.state, "function" === typeof e.componentWillMount && e.componentWillMount(), "function" === typeof e.UNSAFE_componentWillMount && e.UNSAFE_componentWillMount(), b !== e.state && Kg.enqueueReplaceState(e, e.state, null), Cg(a, c, e, d), e.state = a.memoizedState);
                    "function" === typeof e.componentDidMount && (a.flags |= 4);
                  }
                  var Pg = Array.isArray;
                  function Qg(a, b, c) {
                    a = c.ref;
                    if (null !== a && "function" !== typeof a && "object" !== typeof a) {
                      if (c._owner) {
                        c = c._owner;
                        if (c) {
                          if (1 !== c.tag) throw Error(y2(309));
                          var d = c.stateNode;
                        }
                        if (!d) throw Error(y2(147, a));
                        var e = "" + a;
                        if (null !== b && null !== b.ref && "function" === typeof b.ref && b.ref._stringRef === e) return b.ref;
                        b = function(a2) {
                          var b2 = d.refs;
                          b2 === Fg && (b2 = d.refs = {});
                          null === a2 ? delete b2[e] : b2[e] = a2;
                        };
                        b._stringRef = e;
                        return b;
                      }
                      if ("string" !== typeof a) throw Error(y2(284));
                      if (!c._owner) throw Error(y2(290, a));
                    }
                    return a;
                  }
                  function Rg(a, b) {
                    if ("textarea" !== a.type) throw Error(y2(31, "[object Object]" === Object.prototype.toString.call(b) ? "object with keys {" + Object.keys(b).join(", ") + "}" : b));
                  }
                  function Sg(a) {
                    function b(b2, c2) {
                      if (a) {
                        var d2 = b2.lastEffect;
                        null !== d2 ? (d2.nextEffect = c2, b2.lastEffect = c2) : b2.firstEffect = b2.lastEffect = c2;
                        c2.nextEffect = null;
                        c2.flags = 8;
                      }
                    }
                    function c(c2, d2) {
                      if (!a) return null;
                      for (; null !== d2; ) b(c2, d2), d2 = d2.sibling;
                      return null;
                    }
                    function d(a2, b2) {
                      for (a2 = /* @__PURE__ */ new Map(); null !== b2; ) null !== b2.key ? a2.set(b2.key, b2) : a2.set(b2.index, b2), b2 = b2.sibling;
                      return a2;
                    }
                    function e(a2, b2) {
                      a2 = Tg(a2, b2);
                      a2.index = 0;
                      a2.sibling = null;
                      return a2;
                    }
                    function f(b2, c2, d2) {
                      b2.index = d2;
                      if (!a) return c2;
                      d2 = b2.alternate;
                      if (null !== d2) return d2 = d2.index, d2 < c2 ? (b2.flags = 2, c2) : d2;
                      b2.flags = 2;
                      return c2;
                    }
                    function g(b2) {
                      a && null === b2.alternate && (b2.flags = 2);
                      return b2;
                    }
                    function h(a2, b2, c2, d2) {
                      if (null === b2 || 6 !== b2.tag) return b2 = Ug(c2, a2.mode, d2), b2.return = a2, b2;
                      b2 = e(b2, c2);
                      b2.return = a2;
                      return b2;
                    }
                    function k(a2, b2, c2, d2) {
                      if (null !== b2 && b2.elementType === c2.type) return d2 = e(b2, c2.props), d2.ref = Qg(a2, b2, c2), d2.return = a2, d2;
                      d2 = Vg(c2.type, c2.key, c2.props, null, a2.mode, d2);
                      d2.ref = Qg(a2, b2, c2);
                      d2.return = a2;
                      return d2;
                    }
                    function l(a2, b2, c2, d2) {
                      if (null === b2 || 4 !== b2.tag || b2.stateNode.containerInfo !== c2.containerInfo || b2.stateNode.implementation !== c2.implementation) return b2 = Wg(c2, a2.mode, d2), b2.return = a2, b2;
                      b2 = e(b2, c2.children || []);
                      b2.return = a2;
                      return b2;
                    }
                    function n(a2, b2, c2, d2, f2) {
                      if (null === b2 || 7 !== b2.tag) return b2 = Xg(c2, a2.mode, d2, f2), b2.return = a2, b2;
                      b2 = e(b2, c2);
                      b2.return = a2;
                      return b2;
                    }
                    function A(a2, b2, c2) {
                      if ("string" === typeof b2 || "number" === typeof b2) return b2 = Ug("" + b2, a2.mode, c2), b2.return = a2, b2;
                      if ("object" === typeof b2 && null !== b2) {
                        switch (b2.$$typeof) {
                          case sa:
                            return c2 = Vg(b2.type, b2.key, b2.props, null, a2.mode, c2), c2.ref = Qg(a2, null, b2), c2.return = a2, c2;
                          case ta:
                            return b2 = Wg(b2, a2.mode, c2), b2.return = a2, b2;
                        }
                        if (Pg(b2) || La(b2)) return b2 = Xg(
                          b2,
                          a2.mode,
                          c2,
                          null
                        ), b2.return = a2, b2;
                        Rg(a2, b2);
                      }
                      return null;
                    }
                    function p(a2, b2, c2, d2) {
                      var e2 = null !== b2 ? b2.key : null;
                      if ("string" === typeof c2 || "number" === typeof c2) return null !== e2 ? null : h(a2, b2, "" + c2, d2);
                      if ("object" === typeof c2 && null !== c2) {
                        switch (c2.$$typeof) {
                          case sa:
                            return c2.key === e2 ? c2.type === ua ? n(a2, b2, c2.props.children, d2, e2) : k(a2, b2, c2, d2) : null;
                          case ta:
                            return c2.key === e2 ? l(a2, b2, c2, d2) : null;
                        }
                        if (Pg(c2) || La(c2)) return null !== e2 ? null : n(a2, b2, c2, d2, null);
                        Rg(a2, c2);
                      }
                      return null;
                    }
                    function C(a2, b2, c2, d2, e2) {
                      if ("string" === typeof d2 || "number" === typeof d2) return a2 = a2.get(c2) || null, h(b2, a2, "" + d2, e2);
                      if ("object" === typeof d2 && null !== d2) {
                        switch (d2.$$typeof) {
                          case sa:
                            return a2 = a2.get(null === d2.key ? c2 : d2.key) || null, d2.type === ua ? n(b2, a2, d2.props.children, e2, d2.key) : k(b2, a2, d2, e2);
                          case ta:
                            return a2 = a2.get(null === d2.key ? c2 : d2.key) || null, l(b2, a2, d2, e2);
                        }
                        if (Pg(d2) || La(d2)) return a2 = a2.get(c2) || null, n(b2, a2, d2, e2, null);
                        Rg(b2, d2);
                      }
                      return null;
                    }
                    function x2(e2, g2, h2, k2) {
                      for (var l2 = null, t2 = null, u = g2, z = g2 = 0, q = null; null !== u && z < h2.length; z++) {
                        u.index > z ? (q = u, u = null) : q = u.sibling;
                        var n2 = p(e2, u, h2[z], k2);
                        if (null === n2) {
                          null === u && (u = q);
                          break;
                        }
                        a && u && null === n2.alternate && b(e2, u);
                        g2 = f(n2, g2, z);
                        null === t2 ? l2 = n2 : t2.sibling = n2;
                        t2 = n2;
                        u = q;
                      }
                      if (z === h2.length) return c(e2, u), l2;
                      if (null === u) {
                        for (; z < h2.length; z++) u = A(e2, h2[z], k2), null !== u && (g2 = f(u, g2, z), null === t2 ? l2 = u : t2.sibling = u, t2 = u);
                        return l2;
                      }
                      for (u = d(e2, u); z < h2.length; z++) q = C(u, e2, z, h2[z], k2), null !== q && (a && null !== q.alternate && u.delete(null === q.key ? z : q.key), g2 = f(q, g2, z), null === t2 ? l2 = q : t2.sibling = q, t2 = q);
                      a && u.forEach(function(a2) {
                        return b(e2, a2);
                      });
                      return l2;
                    }
                    function w(e2, g2, h2, k2) {
                      var l2 = La(h2);
                      if ("function" !== typeof l2) throw Error(y2(150));
                      h2 = l2.call(h2);
                      if (null == h2) throw Error(y2(151));
                      for (var t2 = l2 = null, u = g2, z = g2 = 0, q = null, n2 = h2.next(); null !== u && !n2.done; z++, n2 = h2.next()) {
                        u.index > z ? (q = u, u = null) : q = u.sibling;
                        var w2 = p(e2, u, n2.value, k2);
                        if (null === w2) {
                          null === u && (u = q);
                          break;
                        }
                        a && u && null === w2.alternate && b(e2, u);
                        g2 = f(w2, g2, z);
                        null === t2 ? l2 = w2 : t2.sibling = w2;
                        t2 = w2;
                        u = q;
                      }
                      if (n2.done) return c(e2, u), l2;
                      if (null === u) {
                        for (; !n2.done; z++, n2 = h2.next()) n2 = A(e2, n2.value, k2), null !== n2 && (g2 = f(n2, g2, z), null === t2 ? l2 = n2 : t2.sibling = n2, t2 = n2);
                        return l2;
                      }
                      for (u = d(e2, u); !n2.done; z++, n2 = h2.next()) n2 = C(u, e2, z, n2.value, k2), null !== n2 && (a && null !== n2.alternate && u.delete(null === n2.key ? z : n2.key), g2 = f(n2, g2, z), null === t2 ? l2 = n2 : t2.sibling = n2, t2 = n2);
                      a && u.forEach(function(a2) {
                        return b(e2, a2);
                      });
                      return l2;
                    }
                    return function(a2, d2, f2, h2) {
                      var k2 = "object" === typeof f2 && null !== f2 && f2.type === ua && null === f2.key;
                      k2 && (f2 = f2.props.children);
                      var l2 = "object" === typeof f2 && null !== f2;
                      if (l2) switch (f2.$$typeof) {
                        case sa:
                          a: {
                            l2 = f2.key;
                            for (k2 = d2; null !== k2; ) {
                              if (k2.key === l2) {
                                switch (k2.tag) {
                                  case 7:
                                    if (f2.type === ua) {
                                      c(a2, k2.sibling);
                                      d2 = e(k2, f2.props.children);
                                      d2.return = a2;
                                      a2 = d2;
                                      break a;
                                    }
                                    break;
                                  default:
                                    if (k2.elementType === f2.type) {
                                      c(a2, k2.sibling);
                                      d2 = e(k2, f2.props);
                                      d2.ref = Qg(a2, k2, f2);
                                      d2.return = a2;
                                      a2 = d2;
                                      break a;
                                    }
                                }
                                c(a2, k2);
                                break;
                              } else b(a2, k2);
                              k2 = k2.sibling;
                            }
                            f2.type === ua ? (d2 = Xg(f2.props.children, a2.mode, h2, f2.key), d2.return = a2, a2 = d2) : (h2 = Vg(f2.type, f2.key, f2.props, null, a2.mode, h2), h2.ref = Qg(a2, d2, f2), h2.return = a2, a2 = h2);
                          }
                          return g(a2);
                        case ta:
                          a: {
                            for (k2 = f2.key; null !== d2; ) {
                              if (d2.key === k2) if (4 === d2.tag && d2.stateNode.containerInfo === f2.containerInfo && d2.stateNode.implementation === f2.implementation) {
                                c(a2, d2.sibling);
                                d2 = e(d2, f2.children || []);
                                d2.return = a2;
                                a2 = d2;
                                break a;
                              } else {
                                c(a2, d2);
                                break;
                              }
                              else b(a2, d2);
                              d2 = d2.sibling;
                            }
                            d2 = Wg(f2, a2.mode, h2);
                            d2.return = a2;
                            a2 = d2;
                          }
                          return g(a2);
                      }
                      if ("string" === typeof f2 || "number" === typeof f2) return f2 = "" + f2, null !== d2 && 6 === d2.tag ? (c(a2, d2.sibling), d2 = e(d2, f2), d2.return = a2, a2 = d2) : (c(a2, d2), d2 = Ug(f2, a2.mode, h2), d2.return = a2, a2 = d2), g(a2);
                      if (Pg(f2)) return x2(a2, d2, f2, h2);
                      if (La(f2)) return w(a2, d2, f2, h2);
                      l2 && Rg(a2, f2);
                      if ("undefined" === typeof f2 && !k2) switch (a2.tag) {
                        case 1:
                        case 22:
                        case 0:
                        case 11:
                        case 15:
                          throw Error(y2(152, Ra(a2.type) || "Component"));
                      }
                      return c(a2, d2);
                    };
                  }
                  var Yg = Sg(true), Zg = Sg(false), $g = {}, ah = Bf($g), bh = Bf($g), ch = Bf($g);
                  function dh(a) {
                    if (a === $g) throw Error(y2(174));
                    return a;
                  }
                  function eh(a, b) {
                    I(ch, b);
                    I(bh, a);
                    I(ah, $g);
                    a = b.nodeType;
                    switch (a) {
                      case 9:
                      case 11:
                        b = (b = b.documentElement) ? b.namespaceURI : mb(null, "");
                        break;
                      default:
                        a = 8 === a ? b.parentNode : b, b = a.namespaceURI || null, a = a.tagName, b = mb(b, a);
                    }
                    H(ah);
                    I(ah, b);
                  }
                  function fh() {
                    H(ah);
                    H(bh);
                    H(ch);
                  }
                  function gh(a) {
                    dh(ch.current);
                    var b = dh(ah.current);
                    var c = mb(b, a.type);
                    b !== c && (I(bh, a), I(ah, c));
                  }
                  function hh(a) {
                    bh.current === a && (H(ah), H(bh));
                  }
                  var P = Bf(0);
                  function ih(a) {
                    for (var b = a; null !== b; ) {
                      if (13 === b.tag) {
                        var c = b.memoizedState;
                        if (null !== c && (c = c.dehydrated, null === c || "$?" === c.data || "$!" === c.data)) return b;
                      } else if (19 === b.tag && void 0 !== b.memoizedProps.revealOrder) {
                        if (0 !== (b.flags & 64)) return b;
                      } else if (null !== b.child) {
                        b.child.return = b;
                        b = b.child;
                        continue;
                      }
                      if (b === a) break;
                      for (; null === b.sibling; ) {
                        if (null === b.return || b.return === a) return null;
                        b = b.return;
                      }
                      b.sibling.return = b.return;
                      b = b.sibling;
                    }
                    return null;
                  }
                  var jh = null, kh = null, lh = false;
                  function mh(a, b) {
                    var c = nh(5, null, null, 0);
                    c.elementType = "DELETED";
                    c.type = "DELETED";
                    c.stateNode = b;
                    c.return = a;
                    c.flags = 8;
                    null !== a.lastEffect ? (a.lastEffect.nextEffect = c, a.lastEffect = c) : a.firstEffect = a.lastEffect = c;
                  }
                  function oh(a, b) {
                    switch (a.tag) {
                      case 5:
                        var c = a.type;
                        b = 1 !== b.nodeType || c.toLowerCase() !== b.nodeName.toLowerCase() ? null : b;
                        return null !== b ? (a.stateNode = b, true) : false;
                      case 6:
                        return b = "" === a.pendingProps || 3 !== b.nodeType ? null : b, null !== b ? (a.stateNode = b, true) : false;
                      case 13:
                        return false;
                      default:
                        return false;
                    }
                  }
                  function ph(a) {
                    if (lh) {
                      var b = kh;
                      if (b) {
                        var c = b;
                        if (!oh(a, b)) {
                          b = rf(c.nextSibling);
                          if (!b || !oh(a, b)) {
                            a.flags = a.flags & -1025 | 2;
                            lh = false;
                            jh = a;
                            return;
                          }
                          mh(jh, c);
                        }
                        jh = a;
                        kh = rf(b.firstChild);
                      } else a.flags = a.flags & -1025 | 2, lh = false, jh = a;
                    }
                  }
                  function qh(a) {
                    for (a = a.return; null !== a && 5 !== a.tag && 3 !== a.tag && 13 !== a.tag; ) a = a.return;
                    jh = a;
                  }
                  function rh(a) {
                    if (a !== jh) return false;
                    if (!lh) return qh(a), lh = true, false;
                    var b = a.type;
                    if (5 !== a.tag || "head" !== b && "body" !== b && !nf(b, a.memoizedProps)) for (b = kh; b; ) mh(a, b), b = rf(b.nextSibling);
                    qh(a);
                    if (13 === a.tag) {
                      a = a.memoizedState;
                      a = null !== a ? a.dehydrated : null;
                      if (!a) throw Error(y2(317));
                      a: {
                        a = a.nextSibling;
                        for (b = 0; a; ) {
                          if (8 === a.nodeType) {
                            var c = a.data;
                            if ("/$" === c) {
                              if (0 === b) {
                                kh = rf(a.nextSibling);
                                break a;
                              }
                              b--;
                            } else "$" !== c && "$!" !== c && "$?" !== c || b++;
                          }
                          a = a.nextSibling;
                        }
                        kh = null;
                      }
                    } else kh = jh ? rf(a.stateNode.nextSibling) : null;
                    return true;
                  }
                  function sh() {
                    kh = jh = null;
                    lh = false;
                  }
                  var th = [];
                  function uh() {
                    for (var a = 0; a < th.length; a++) th[a]._workInProgressVersionPrimary = null;
                    th.length = 0;
                  }
                  var vh = ra.ReactCurrentDispatcher, wh = ra.ReactCurrentBatchConfig, xh = 0, R = null, S = null, T = null, yh = false, zh = false;
                  function Ah() {
                    throw Error(y2(321));
                  }
                  function Bh(a, b) {
                    if (null === b) return false;
                    for (var c = 0; c < b.length && c < a.length; c++) if (!He(a[c], b[c])) return false;
                    return true;
                  }
                  function Ch(a, b, c, d, e, f) {
                    xh = f;
                    R = b;
                    b.memoizedState = null;
                    b.updateQueue = null;
                    b.lanes = 0;
                    vh.current = null === a || null === a.memoizedState ? Dh : Eh;
                    a = c(d, e);
                    if (zh) {
                      f = 0;
                      do {
                        zh = false;
                        if (!(25 > f)) throw Error(y2(301));
                        f += 1;
                        T = S = null;
                        b.updateQueue = null;
                        vh.current = Fh;
                        a = c(d, e);
                      } while (zh);
                    }
                    vh.current = Gh;
                    b = null !== S && null !== S.next;
                    xh = 0;
                    T = S = R = null;
                    yh = false;
                    if (b) throw Error(y2(300));
                    return a;
                  }
                  function Hh() {
                    var a = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null };
                    null === T ? R.memoizedState = T = a : T = T.next = a;
                    return T;
                  }
                  function Ih() {
                    if (null === S) {
                      var a = R.alternate;
                      a = null !== a ? a.memoizedState : null;
                    } else a = S.next;
                    var b = null === T ? R.memoizedState : T.next;
                    if (null !== b) T = b, S = a;
                    else {
                      if (null === a) throw Error(y2(310));
                      S = a;
                      a = { memoizedState: S.memoizedState, baseState: S.baseState, baseQueue: S.baseQueue, queue: S.queue, next: null };
                      null === T ? R.memoizedState = T = a : T = T.next = a;
                    }
                    return T;
                  }
                  function Jh(a, b) {
                    return "function" === typeof b ? b(a) : b;
                  }
                  function Kh(a) {
                    var b = Ih(), c = b.queue;
                    if (null === c) throw Error(y2(311));
                    c.lastRenderedReducer = a;
                    var d = S, e = d.baseQueue, f = c.pending;
                    if (null !== f) {
                      if (null !== e) {
                        var g = e.next;
                        e.next = f.next;
                        f.next = g;
                      }
                      d.baseQueue = e = f;
                      c.pending = null;
                    }
                    if (null !== e) {
                      e = e.next;
                      d = d.baseState;
                      var h = g = f = null, k = e;
                      do {
                        var l = k.lane;
                        if ((xh & l) === l) null !== h && (h = h.next = { lane: 0, action: k.action, eagerReducer: k.eagerReducer, eagerState: k.eagerState, next: null }), d = k.eagerReducer === a ? k.eagerState : a(d, k.action);
                        else {
                          var n = {
                            lane: l,
                            action: k.action,
                            eagerReducer: k.eagerReducer,
                            eagerState: k.eagerState,
                            next: null
                          };
                          null === h ? (g = h = n, f = d) : h = h.next = n;
                          R.lanes |= l;
                          Dg |= l;
                        }
                        k = k.next;
                      } while (null !== k && k !== e);
                      null === h ? f = d : h.next = g;
                      He(d, b.memoizedState) || (ug = true);
                      b.memoizedState = d;
                      b.baseState = f;
                      b.baseQueue = h;
                      c.lastRenderedState = d;
                    }
                    return [b.memoizedState, c.dispatch];
                  }
                  function Lh(a) {
                    var b = Ih(), c = b.queue;
                    if (null === c) throw Error(y2(311));
                    c.lastRenderedReducer = a;
                    var d = c.dispatch, e = c.pending, f = b.memoizedState;
                    if (null !== e) {
                      c.pending = null;
                      var g = e = e.next;
                      do
                        f = a(f, g.action), g = g.next;
                      while (g !== e);
                      He(f, b.memoizedState) || (ug = true);
                      b.memoizedState = f;
                      null === b.baseQueue && (b.baseState = f);
                      c.lastRenderedState = f;
                    }
                    return [f, d];
                  }
                  function Mh(a, b, c) {
                    var d = b._getVersion;
                    d = d(b._source);
                    var e = b._workInProgressVersionPrimary;
                    if (null !== e) a = e === d;
                    else if (a = a.mutableReadLanes, a = (xh & a) === a) b._workInProgressVersionPrimary = d, th.push(b);
                    if (a) return c(b._source);
                    th.push(b);
                    throw Error(y2(350));
                  }
                  function Nh(a, b, c, d) {
                    var e = U;
                    if (null === e) throw Error(y2(349));
                    var f = b._getVersion, g = f(b._source), h = vh.current, k = h.useState(function() {
                      return Mh(e, b, c);
                    }), l = k[1], n = k[0];
                    k = T;
                    var A = a.memoizedState, p = A.refs, C = p.getSnapshot, x2 = A.source;
                    A = A.subscribe;
                    var w = R;
                    a.memoizedState = { refs: p, source: b, subscribe: d };
                    h.useEffect(function() {
                      p.getSnapshot = c;
                      p.setSnapshot = l;
                      var a2 = f(b._source);
                      if (!He(g, a2)) {
                        a2 = c(b._source);
                        He(n, a2) || (l(a2), a2 = Ig(w), e.mutableReadLanes |= a2 & e.pendingLanes);
                        a2 = e.mutableReadLanes;
                        e.entangledLanes |= a2;
                        for (var d2 = e.entanglements, h2 = a2; 0 < h2; ) {
                          var k2 = 31 - Vc(h2), v = 1 << k2;
                          d2[k2] |= a2;
                          h2 &= ~v;
                        }
                      }
                    }, [c, b, d]);
                    h.useEffect(function() {
                      return d(b._source, function() {
                        var a2 = p.getSnapshot, c2 = p.setSnapshot;
                        try {
                          c2(a2(b._source));
                          var d2 = Ig(w);
                          e.mutableReadLanes |= d2 & e.pendingLanes;
                        } catch (q) {
                          c2(function() {
                            throw q;
                          });
                        }
                      });
                    }, [b, d]);
                    He(C, c) && He(x2, b) && He(A, d) || (a = { pending: null, dispatch: null, lastRenderedReducer: Jh, lastRenderedState: n }, a.dispatch = l = Oh.bind(null, R, a), k.queue = a, k.baseQueue = null, n = Mh(e, b, c), k.memoizedState = k.baseState = n);
                    return n;
                  }
                  function Ph(a, b, c) {
                    var d = Ih();
                    return Nh(d, a, b, c);
                  }
                  function Qh(a) {
                    var b = Hh();
                    "function" === typeof a && (a = a());
                    b.memoizedState = b.baseState = a;
                    a = b.queue = { pending: null, dispatch: null, lastRenderedReducer: Jh, lastRenderedState: a };
                    a = a.dispatch = Oh.bind(null, R, a);
                    return [b.memoizedState, a];
                  }
                  function Rh(a, b, c, d) {
                    a = { tag: a, create: b, destroy: c, deps: d, next: null };
                    b = R.updateQueue;
                    null === b ? (b = { lastEffect: null }, R.updateQueue = b, b.lastEffect = a.next = a) : (c = b.lastEffect, null === c ? b.lastEffect = a.next = a : (d = c.next, c.next = a, a.next = d, b.lastEffect = a));
                    return a;
                  }
                  function Sh(a) {
                    var b = Hh();
                    a = { current: a };
                    return b.memoizedState = a;
                  }
                  function Th() {
                    return Ih().memoizedState;
                  }
                  function Uh(a, b, c, d) {
                    var e = Hh();
                    R.flags |= a;
                    e.memoizedState = Rh(1 | b, c, void 0, void 0 === d ? null : d);
                  }
                  function Vh(a, b, c, d) {
                    var e = Ih();
                    d = void 0 === d ? null : d;
                    var f = void 0;
                    if (null !== S) {
                      var g = S.memoizedState;
                      f = g.destroy;
                      if (null !== d && Bh(d, g.deps)) {
                        Rh(b, c, f, d);
                        return;
                      }
                    }
                    R.flags |= a;
                    e.memoizedState = Rh(1 | b, c, f, d);
                  }
                  function Wh(a, b) {
                    return Uh(516, 4, a, b);
                  }
                  function Xh(a, b) {
                    return Vh(516, 4, a, b);
                  }
                  function Yh(a, b) {
                    return Vh(4, 2, a, b);
                  }
                  function Zh(a, b) {
                    if ("function" === typeof b) return a = a(), b(a), function() {
                      b(null);
                    };
                    if (null !== b && void 0 !== b) return a = a(), b.current = a, function() {
                      b.current = null;
                    };
                  }
                  function $h(a, b, c) {
                    c = null !== c && void 0 !== c ? c.concat([a]) : null;
                    return Vh(4, 2, Zh.bind(null, b, a), c);
                  }
                  function ai() {
                  }
                  function bi(a, b) {
                    var c = Ih();
                    b = void 0 === b ? null : b;
                    var d = c.memoizedState;
                    if (null !== d && null !== b && Bh(b, d[1])) return d[0];
                    c.memoizedState = [a, b];
                    return a;
                  }
                  function ci(a, b) {
                    var c = Ih();
                    b = void 0 === b ? null : b;
                    var d = c.memoizedState;
                    if (null !== d && null !== b && Bh(b, d[1])) return d[0];
                    a = a();
                    c.memoizedState = [a, b];
                    return a;
                  }
                  function di(a, b) {
                    var c = eg();
                    gg(98 > c ? 98 : c, function() {
                      a(true);
                    });
                    gg(97 < c ? 97 : c, function() {
                      var c2 = wh.transition;
                      wh.transition = 1;
                      try {
                        a(false), b();
                      } finally {
                        wh.transition = c2;
                      }
                    });
                  }
                  function Oh(a, b, c) {
                    var d = Hg(), e = Ig(a), f = { lane: e, action: c, eagerReducer: null, eagerState: null, next: null }, g = b.pending;
                    null === g ? f.next = f : (f.next = g.next, g.next = f);
                    b.pending = f;
                    g = a.alternate;
                    if (a === R || null !== g && g === R) zh = yh = true;
                    else {
                      if (0 === a.lanes && (null === g || 0 === g.lanes) && (g = b.lastRenderedReducer, null !== g)) try {
                        var h = b.lastRenderedState, k = g(h, c);
                        f.eagerReducer = g;
                        f.eagerState = k;
                        if (He(k, h)) return;
                      } catch (l) {
                      } finally {
                      }
                      Jg(a, e, d);
                    }
                  }
                  var Gh = { readContext: vg, useCallback: Ah, useContext: Ah, useEffect: Ah, useImperativeHandle: Ah, useLayoutEffect: Ah, useMemo: Ah, useReducer: Ah, useRef: Ah, useState: Ah, useDebugValue: Ah, useDeferredValue: Ah, useTransition: Ah, useMutableSource: Ah, useOpaqueIdentifier: Ah, unstable_isNewReconciler: false }, Dh = { readContext: vg, useCallback: function(a, b) {
                    Hh().memoizedState = [a, void 0 === b ? null : b];
                    return a;
                  }, useContext: vg, useEffect: Wh, useImperativeHandle: function(a, b, c) {
                    c = null !== c && void 0 !== c ? c.concat([a]) : null;
                    return Uh(4, 2, Zh.bind(
                      null,
                      b,
                      a
                    ), c);
                  }, useLayoutEffect: function(a, b) {
                    return Uh(4, 2, a, b);
                  }, useMemo: function(a, b) {
                    var c = Hh();
                    b = void 0 === b ? null : b;
                    a = a();
                    c.memoizedState = [a, b];
                    return a;
                  }, useReducer: function(a, b, c) {
                    var d = Hh();
                    b = void 0 !== c ? c(b) : b;
                    d.memoizedState = d.baseState = b;
                    a = d.queue = { pending: null, dispatch: null, lastRenderedReducer: a, lastRenderedState: b };
                    a = a.dispatch = Oh.bind(null, R, a);
                    return [d.memoizedState, a];
                  }, useRef: Sh, useState: Qh, useDebugValue: ai, useDeferredValue: function(a) {
                    var b = Qh(a), c = b[0], d = b[1];
                    Wh(function() {
                      var b2 = wh.transition;
                      wh.transition = 1;
                      try {
                        d(a);
                      } finally {
                        wh.transition = b2;
                      }
                    }, [a]);
                    return c;
                  }, useTransition: function() {
                    var a = Qh(false), b = a[0];
                    a = di.bind(null, a[1]);
                    Sh(a);
                    return [a, b];
                  }, useMutableSource: function(a, b, c) {
                    var d = Hh();
                    d.memoizedState = { refs: { getSnapshot: b, setSnapshot: null }, source: a, subscribe: c };
                    return Nh(d, a, b, c);
                  }, useOpaqueIdentifier: function() {
                    if (lh) {
                      var a = false, b = uf(function() {
                        a || (a = true, c("r:" + (tf++).toString(36)));
                        throw Error(y2(355));
                      }), c = Qh(b)[1];
                      0 === (R.mode & 2) && (R.flags |= 516, Rh(
                        5,
                        function() {
                          c("r:" + (tf++).toString(36));
                        },
                        void 0,
                        null
                      ));
                      return b;
                    }
                    b = "r:" + (tf++).toString(36);
                    Qh(b);
                    return b;
                  }, unstable_isNewReconciler: false }, Eh = { readContext: vg, useCallback: bi, useContext: vg, useEffect: Xh, useImperativeHandle: $h, useLayoutEffect: Yh, useMemo: ci, useReducer: Kh, useRef: Th, useState: function() {
                    return Kh(Jh);
                  }, useDebugValue: ai, useDeferredValue: function(a) {
                    var b = Kh(Jh), c = b[0], d = b[1];
                    Xh(function() {
                      var b2 = wh.transition;
                      wh.transition = 1;
                      try {
                        d(a);
                      } finally {
                        wh.transition = b2;
                      }
                    }, [a]);
                    return c;
                  }, useTransition: function() {
                    var a = Kh(Jh)[0];
                    return [
                      Th().current,
                      a
                    ];
                  }, useMutableSource: Ph, useOpaqueIdentifier: function() {
                    return Kh(Jh)[0];
                  }, unstable_isNewReconciler: false }, Fh = { readContext: vg, useCallback: bi, useContext: vg, useEffect: Xh, useImperativeHandle: $h, useLayoutEffect: Yh, useMemo: ci, useReducer: Lh, useRef: Th, useState: function() {
                    return Lh(Jh);
                  }, useDebugValue: ai, useDeferredValue: function(a) {
                    var b = Lh(Jh), c = b[0], d = b[1];
                    Xh(function() {
                      var b2 = wh.transition;
                      wh.transition = 1;
                      try {
                        d(a);
                      } finally {
                        wh.transition = b2;
                      }
                    }, [a]);
                    return c;
                  }, useTransition: function() {
                    var a = Lh(Jh)[0];
                    return [
                      Th().current,
                      a
                    ];
                  }, useMutableSource: Ph, useOpaqueIdentifier: function() {
                    return Lh(Jh)[0];
                  }, unstable_isNewReconciler: false }, ei = ra.ReactCurrentOwner, ug = false;
                  function fi(a, b, c, d) {
                    b.child = null === a ? Zg(b, null, c, d) : Yg(b, a.child, c, d);
                  }
                  function gi(a, b, c, d, e) {
                    c = c.render;
                    var f = b.ref;
                    tg(b, e);
                    d = Ch(a, b, c, d, f, e);
                    if (null !== a && !ug) return b.updateQueue = a.updateQueue, b.flags &= -517, a.lanes &= ~e, hi(a, b, e);
                    b.flags |= 1;
                    fi(a, b, d, e);
                    return b.child;
                  }
                  function ii(a, b, c, d, e, f) {
                    if (null === a) {
                      var g = c.type;
                      if ("function" === typeof g && !ji(g) && void 0 === g.defaultProps && null === c.compare && void 0 === c.defaultProps) return b.tag = 15, b.type = g, ki(a, b, g, d, e, f);
                      a = Vg(c.type, null, d, b, b.mode, f);
                      a.ref = b.ref;
                      a.return = b;
                      return b.child = a;
                    }
                    g = a.child;
                    if (0 === (e & f) && (e = g.memoizedProps, c = c.compare, c = null !== c ? c : Je, c(e, d) && a.ref === b.ref)) return hi(a, b, f);
                    b.flags |= 1;
                    a = Tg(g, d);
                    a.ref = b.ref;
                    a.return = b;
                    return b.child = a;
                  }
                  function ki(a, b, c, d, e, f) {
                    if (null !== a && Je(a.memoizedProps, d) && a.ref === b.ref) if (ug = false, 0 !== (f & e)) 0 !== (a.flags & 16384) && (ug = true);
                    else return b.lanes = a.lanes, hi(a, b, f);
                    return li(a, b, c, d, f);
                  }
                  function mi(a, b, c) {
                    var d = b.pendingProps, e = d.children, f = null !== a ? a.memoizedState : null;
                    if ("hidden" === d.mode || "unstable-defer-without-hiding" === d.mode) if (0 === (b.mode & 4)) b.memoizedState = { baseLanes: 0 }, ni(b, c);
                    else if (0 !== (c & 1073741824)) b.memoizedState = { baseLanes: 0 }, ni(b, null !== f ? f.baseLanes : c);
                    else return a = null !== f ? f.baseLanes | c : c, b.lanes = b.childLanes = 1073741824, b.memoizedState = { baseLanes: a }, ni(b, a), null;
                    else null !== f ? (d = f.baseLanes | c, b.memoizedState = null) : d = c, ni(b, d);
                    fi(a, b, e, c);
                    return b.child;
                  }
                  function oi(a, b) {
                    var c = b.ref;
                    if (null === a && null !== c || null !== a && a.ref !== c) b.flags |= 128;
                  }
                  function li(a, b, c, d, e) {
                    var f = Ff(c) ? Df : M.current;
                    f = Ef(b, f);
                    tg(b, e);
                    c = Ch(a, b, c, d, f, e);
                    if (null !== a && !ug) return b.updateQueue = a.updateQueue, b.flags &= -517, a.lanes &= ~e, hi(a, b, e);
                    b.flags |= 1;
                    fi(a, b, c, e);
                    return b.child;
                  }
                  function pi(a, b, c, d, e) {
                    if (Ff(c)) {
                      var f = true;
                      Jf(b);
                    } else f = false;
                    tg(b, e);
                    if (null === b.stateNode) null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2), Mg(b, c, d), Og(b, c, d, e), d = true;
                    else if (null === a) {
                      var g = b.stateNode, h = b.memoizedProps;
                      g.props = h;
                      var k = g.context, l = c.contextType;
                      "object" === typeof l && null !== l ? l = vg(l) : (l = Ff(c) ? Df : M.current, l = Ef(b, l));
                      var n = c.getDerivedStateFromProps, A = "function" === typeof n || "function" === typeof g.getSnapshotBeforeUpdate;
                      A || "function" !== typeof g.UNSAFE_componentWillReceiveProps && "function" !== typeof g.componentWillReceiveProps || (h !== d || k !== l) && Ng(b, g, d, l);
                      wg = false;
                      var p = b.memoizedState;
                      g.state = p;
                      Cg(b, d, g, e);
                      k = b.memoizedState;
                      h !== d || p !== k || N.current || wg ? ("function" === typeof n && (Gg(b, c, n, d), k = b.memoizedState), (h = wg || Lg(b, c, h, d, p, k, l)) ? (A || "function" !== typeof g.UNSAFE_componentWillMount && "function" !== typeof g.componentWillMount || ("function" === typeof g.componentWillMount && g.componentWillMount(), "function" === typeof g.UNSAFE_componentWillMount && g.UNSAFE_componentWillMount()), "function" === typeof g.componentDidMount && (b.flags |= 4)) : ("function" === typeof g.componentDidMount && (b.flags |= 4), b.memoizedProps = d, b.memoizedState = k), g.props = d, g.state = k, g.context = l, d = h) : ("function" === typeof g.componentDidMount && (b.flags |= 4), d = false);
                    } else {
                      g = b.stateNode;
                      yg(a, b);
                      h = b.memoizedProps;
                      l = b.type === b.elementType ? h : lg(b.type, h);
                      g.props = l;
                      A = b.pendingProps;
                      p = g.context;
                      k = c.contextType;
                      "object" === typeof k && null !== k ? k = vg(k) : (k = Ff(c) ? Df : M.current, k = Ef(b, k));
                      var C = c.getDerivedStateFromProps;
                      (n = "function" === typeof C || "function" === typeof g.getSnapshotBeforeUpdate) || "function" !== typeof g.UNSAFE_componentWillReceiveProps && "function" !== typeof g.componentWillReceiveProps || (h !== A || p !== k) && Ng(b, g, d, k);
                      wg = false;
                      p = b.memoizedState;
                      g.state = p;
                      Cg(b, d, g, e);
                      var x2 = b.memoizedState;
                      h !== A || p !== x2 || N.current || wg ? ("function" === typeof C && (Gg(b, c, C, d), x2 = b.memoizedState), (l = wg || Lg(b, c, l, d, p, x2, k)) ? (n || "function" !== typeof g.UNSAFE_componentWillUpdate && "function" !== typeof g.componentWillUpdate || ("function" === typeof g.componentWillUpdate && g.componentWillUpdate(
                        d,
                        x2,
                        k
                      ), "function" === typeof g.UNSAFE_componentWillUpdate && g.UNSAFE_componentWillUpdate(d, x2, k)), "function" === typeof g.componentDidUpdate && (b.flags |= 4), "function" === typeof g.getSnapshotBeforeUpdate && (b.flags |= 256)) : ("function" !== typeof g.componentDidUpdate || h === a.memoizedProps && p === a.memoizedState || (b.flags |= 4), "function" !== typeof g.getSnapshotBeforeUpdate || h === a.memoizedProps && p === a.memoizedState || (b.flags |= 256), b.memoizedProps = d, b.memoizedState = x2), g.props = d, g.state = x2, g.context = k, d = l) : ("function" !== typeof g.componentDidUpdate || h === a.memoizedProps && p === a.memoizedState || (b.flags |= 4), "function" !== typeof g.getSnapshotBeforeUpdate || h === a.memoizedProps && p === a.memoizedState || (b.flags |= 256), d = false);
                    }
                    return qi(a, b, c, d, f, e);
                  }
                  function qi(a, b, c, d, e, f) {
                    oi(a, b);
                    var g = 0 !== (b.flags & 64);
                    if (!d && !g) return e && Kf(b, c, false), hi(a, b, f);
                    d = b.stateNode;
                    ei.current = b;
                    var h = g && "function" !== typeof c.getDerivedStateFromError ? null : d.render();
                    b.flags |= 1;
                    null !== a && g ? (b.child = Yg(b, a.child, null, f), b.child = Yg(b, null, h, f)) : fi(a, b, h, f);
                    b.memoizedState = d.state;
                    e && Kf(b, c, true);
                    return b.child;
                  }
                  function ri(a) {
                    var b = a.stateNode;
                    b.pendingContext ? Hf(a, b.pendingContext, b.pendingContext !== b.context) : b.context && Hf(a, b.context, false);
                    eh(a, b.containerInfo);
                  }
                  var si = { dehydrated: null, retryLane: 0 };
                  function ti(a, b, c) {
                    var d = b.pendingProps, e = P.current, f = false, g;
                    (g = 0 !== (b.flags & 64)) || (g = null !== a && null === a.memoizedState ? false : 0 !== (e & 2));
                    g ? (f = true, b.flags &= -65) : null !== a && null === a.memoizedState || void 0 === d.fallback || true === d.unstable_avoidThisFallback || (e |= 1);
                    I(P, e & 1);
                    if (null === a) {
                      void 0 !== d.fallback && ph(b);
                      a = d.children;
                      e = d.fallback;
                      if (f) return a = ui(b, a, e, c), b.child.memoizedState = { baseLanes: c }, b.memoizedState = si, a;
                      if ("number" === typeof d.unstable_expectedLoadTime) return a = ui(b, a, e, c), b.child.memoizedState = { baseLanes: c }, b.memoizedState = si, b.lanes = 33554432, a;
                      c = vi({ mode: "visible", children: a }, b.mode, c, null);
                      c.return = b;
                      return b.child = c;
                    }
                    if (null !== a.memoizedState) {
                      if (f) return d = wi(a, b, d.children, d.fallback, c), f = b.child, e = a.child.memoizedState, f.memoizedState = null === e ? { baseLanes: c } : { baseLanes: e.baseLanes | c }, f.childLanes = a.childLanes & ~c, b.memoizedState = si, d;
                      c = xi(a, b, d.children, c);
                      b.memoizedState = null;
                      return c;
                    }
                    if (f) return d = wi(a, b, d.children, d.fallback, c), f = b.child, e = a.child.memoizedState, f.memoizedState = null === e ? { baseLanes: c } : { baseLanes: e.baseLanes | c }, f.childLanes = a.childLanes & ~c, b.memoizedState = si, d;
                    c = xi(a, b, d.children, c);
                    b.memoizedState = null;
                    return c;
                  }
                  function ui(a, b, c, d) {
                    var e = a.mode, f = a.child;
                    b = { mode: "hidden", children: b };
                    0 === (e & 2) && null !== f ? (f.childLanes = 0, f.pendingProps = b) : f = vi(b, e, 0, null);
                    c = Xg(c, e, d, null);
                    f.return = a;
                    c.return = a;
                    f.sibling = c;
                    a.child = f;
                    return c;
                  }
                  function xi(a, b, c, d) {
                    var e = a.child;
                    a = e.sibling;
                    c = Tg(e, { mode: "visible", children: c });
                    0 === (b.mode & 2) && (c.lanes = d);
                    c.return = b;
                    c.sibling = null;
                    null !== a && (a.nextEffect = null, a.flags = 8, b.firstEffect = b.lastEffect = a);
                    return b.child = c;
                  }
                  function wi(a, b, c, d, e) {
                    var f = b.mode, g = a.child;
                    a = g.sibling;
                    var h = { mode: "hidden", children: c };
                    0 === (f & 2) && b.child !== g ? (c = b.child, c.childLanes = 0, c.pendingProps = h, g = c.lastEffect, null !== g ? (b.firstEffect = c.firstEffect, b.lastEffect = g, g.nextEffect = null) : b.firstEffect = b.lastEffect = null) : c = Tg(g, h);
                    null !== a ? d = Tg(a, d) : (d = Xg(d, f, e, null), d.flags |= 2);
                    d.return = b;
                    c.return = b;
                    c.sibling = d;
                    b.child = c;
                    return d;
                  }
                  function yi(a, b) {
                    a.lanes |= b;
                    var c = a.alternate;
                    null !== c && (c.lanes |= b);
                    sg(a.return, b);
                  }
                  function zi(a, b, c, d, e, f) {
                    var g = a.memoizedState;
                    null === g ? a.memoizedState = { isBackwards: b, rendering: null, renderingStartTime: 0, last: d, tail: c, tailMode: e, lastEffect: f } : (g.isBackwards = b, g.rendering = null, g.renderingStartTime = 0, g.last = d, g.tail = c, g.tailMode = e, g.lastEffect = f);
                  }
                  function Ai(a, b, c) {
                    var d = b.pendingProps, e = d.revealOrder, f = d.tail;
                    fi(a, b, d.children, c);
                    d = P.current;
                    if (0 !== (d & 2)) d = d & 1 | 2, b.flags |= 64;
                    else {
                      if (null !== a && 0 !== (a.flags & 64)) a: for (a = b.child; null !== a; ) {
                        if (13 === a.tag) null !== a.memoizedState && yi(a, c);
                        else if (19 === a.tag) yi(a, c);
                        else if (null !== a.child) {
                          a.child.return = a;
                          a = a.child;
                          continue;
                        }
                        if (a === b) break a;
                        for (; null === a.sibling; ) {
                          if (null === a.return || a.return === b) break a;
                          a = a.return;
                        }
                        a.sibling.return = a.return;
                        a = a.sibling;
                      }
                      d &= 1;
                    }
                    I(P, d);
                    if (0 === (b.mode & 2)) b.memoizedState = null;
                    else switch (e) {
                      case "forwards":
                        c = b.child;
                        for (e = null; null !== c; ) a = c.alternate, null !== a && null === ih(a) && (e = c), c = c.sibling;
                        c = e;
                        null === c ? (e = b.child, b.child = null) : (e = c.sibling, c.sibling = null);
                        zi(b, false, e, c, f, b.lastEffect);
                        break;
                      case "backwards":
                        c = null;
                        e = b.child;
                        for (b.child = null; null !== e; ) {
                          a = e.alternate;
                          if (null !== a && null === ih(a)) {
                            b.child = e;
                            break;
                          }
                          a = e.sibling;
                          e.sibling = c;
                          c = e;
                          e = a;
                        }
                        zi(b, true, c, null, f, b.lastEffect);
                        break;
                      case "together":
                        zi(b, false, null, null, void 0, b.lastEffect);
                        break;
                      default:
                        b.memoizedState = null;
                    }
                    return b.child;
                  }
                  function hi(a, b, c) {
                    null !== a && (b.dependencies = a.dependencies);
                    Dg |= b.lanes;
                    if (0 !== (c & b.childLanes)) {
                      if (null !== a && b.child !== a.child) throw Error(y2(153));
                      if (null !== b.child) {
                        a = b.child;
                        c = Tg(a, a.pendingProps);
                        b.child = c;
                        for (c.return = b; null !== a.sibling; ) a = a.sibling, c = c.sibling = Tg(a, a.pendingProps), c.return = b;
                        c.sibling = null;
                      }
                      return b.child;
                    }
                    return null;
                  }
                  var Bi, Ci, Di, Ei;
                  Bi = function(a, b) {
                    for (var c = b.child; null !== c; ) {
                      if (5 === c.tag || 6 === c.tag) a.appendChild(c.stateNode);
                      else if (4 !== c.tag && null !== c.child) {
                        c.child.return = c;
                        c = c.child;
                        continue;
                      }
                      if (c === b) break;
                      for (; null === c.sibling; ) {
                        if (null === c.return || c.return === b) return;
                        c = c.return;
                      }
                      c.sibling.return = c.return;
                      c = c.sibling;
                    }
                  };
                  Ci = function() {
                  };
                  Di = function(a, b, c, d) {
                    var e = a.memoizedProps;
                    if (e !== d) {
                      a = b.stateNode;
                      dh(ah.current);
                      var f = null;
                      switch (c) {
                        case "input":
                          e = Ya(a, e);
                          d = Ya(a, d);
                          f = [];
                          break;
                        case "option":
                          e = eb(a, e);
                          d = eb(a, d);
                          f = [];
                          break;
                        case "select":
                          e = m({}, e, { value: void 0 });
                          d = m({}, d, { value: void 0 });
                          f = [];
                          break;
                        case "textarea":
                          e = gb(a, e);
                          d = gb(a, d);
                          f = [];
                          break;
                        default:
                          "function" !== typeof e.onClick && "function" === typeof d.onClick && (a.onclick = jf);
                      }
                      vb(c, d);
                      var g;
                      c = null;
                      for (l in e) if (!d.hasOwnProperty(l) && e.hasOwnProperty(l) && null != e[l]) if ("style" === l) {
                        var h = e[l];
                        for (g in h) h.hasOwnProperty(g) && (c || (c = {}), c[g] = "");
                      } else "dangerouslySetInnerHTML" !== l && "children" !== l && "suppressContentEditableWarning" !== l && "suppressHydrationWarning" !== l && "autoFocus" !== l && (ca.hasOwnProperty(l) ? f || (f = []) : (f = f || []).push(l, null));
                      for (l in d) {
                        var k = d[l];
                        h = null != e ? e[l] : void 0;
                        if (d.hasOwnProperty(l) && k !== h && (null != k || null != h)) if ("style" === l) if (h) {
                          for (g in h) !h.hasOwnProperty(g) || k && k.hasOwnProperty(g) || (c || (c = {}), c[g] = "");
                          for (g in k) k.hasOwnProperty(g) && h[g] !== k[g] && (c || (c = {}), c[g] = k[g]);
                        } else c || (f || (f = []), f.push(l, c)), c = k;
                        else "dangerouslySetInnerHTML" === l ? (k = k ? k.__html : void 0, h = h ? h.__html : void 0, null != k && h !== k && (f = f || []).push(l, k)) : "children" === l ? "string" !== typeof k && "number" !== typeof k || (f = f || []).push(l, "" + k) : "suppressContentEditableWarning" !== l && "suppressHydrationWarning" !== l && (ca.hasOwnProperty(l) ? (null != k && "onScroll" === l && G("scroll", a), f || h === k || (f = [])) : "object" === typeof k && null !== k && k.$$typeof === Ga ? k.toString() : (f = f || []).push(l, k));
                      }
                      c && (f = f || []).push(
                        "style",
                        c
                      );
                      var l = f;
                      if (b.updateQueue = l) b.flags |= 4;
                    }
                  };
                  Ei = function(a, b, c, d) {
                    c !== d && (b.flags |= 4);
                  };
                  function Fi(a, b) {
                    if (!lh) switch (a.tailMode) {
                      case "hidden":
                        b = a.tail;
                        for (var c = null; null !== b; ) null !== b.alternate && (c = b), b = b.sibling;
                        null === c ? a.tail = null : c.sibling = null;
                        break;
                      case "collapsed":
                        c = a.tail;
                        for (var d = null; null !== c; ) null !== c.alternate && (d = c), c = c.sibling;
                        null === d ? b || null === a.tail ? a.tail = null : a.tail.sibling = null : d.sibling = null;
                    }
                  }
                  function Gi(a, b, c) {
                    var d = b.pendingProps;
                    switch (b.tag) {
                      case 2:
                      case 16:
                      case 15:
                      case 0:
                      case 11:
                      case 7:
                      case 8:
                      case 12:
                      case 9:
                      case 14:
                        return null;
                      case 1:
                        return Ff(b.type) && Gf(), null;
                      case 3:
                        fh();
                        H(N);
                        H(M);
                        uh();
                        d = b.stateNode;
                        d.pendingContext && (d.context = d.pendingContext, d.pendingContext = null);
                        if (null === a || null === a.child) rh(b) ? b.flags |= 4 : d.hydrate || (b.flags |= 256);
                        Ci(b);
                        return null;
                      case 5:
                        hh(b);
                        var e = dh(ch.current);
                        c = b.type;
                        if (null !== a && null != b.stateNode) Di(a, b, c, d, e), a.ref !== b.ref && (b.flags |= 128);
                        else {
                          if (!d) {
                            if (null === b.stateNode) throw Error(y2(166));
                            return null;
                          }
                          a = dh(ah.current);
                          if (rh(b)) {
                            d = b.stateNode;
                            c = b.type;
                            var f = b.memoizedProps;
                            d[wf] = b;
                            d[xf] = f;
                            switch (c) {
                              case "dialog":
                                G("cancel", d);
                                G("close", d);
                                break;
                              case "iframe":
                              case "object":
                              case "embed":
                                G("load", d);
                                break;
                              case "video":
                              case "audio":
                                for (a = 0; a < Xe.length; a++) G(Xe[a], d);
                                break;
                              case "source":
                                G("error", d);
                                break;
                              case "img":
                              case "image":
                              case "link":
                                G("error", d);
                                G("load", d);
                                break;
                              case "details":
                                G("toggle", d);
                                break;
                              case "input":
                                Za(d, f);
                                G("invalid", d);
                                break;
                              case "select":
                                d._wrapperState = { wasMultiple: !!f.multiple };
                                G("invalid", d);
                                break;
                              case "textarea":
                                hb(d, f), G("invalid", d);
                            }
                            vb(c, f);
                            a = null;
                            for (var g in f) f.hasOwnProperty(g) && (e = f[g], "children" === g ? "string" === typeof e ? d.textContent !== e && (a = ["children", e]) : "number" === typeof e && d.textContent !== "" + e && (a = ["children", "" + e]) : ca.hasOwnProperty(g) && null != e && "onScroll" === g && G("scroll", d));
                            switch (c) {
                              case "input":
                                Va(d);
                                cb(d, f, true);
                                break;
                              case "textarea":
                                Va(d);
                                jb(d);
                                break;
                              case "select":
                              case "option":
                                break;
                              default:
                                "function" === typeof f.onClick && (d.onclick = jf);
                            }
                            d = a;
                            b.updateQueue = d;
                            null !== d && (b.flags |= 4);
                          } else {
                            g = 9 === e.nodeType ? e : e.ownerDocument;
                            a === kb.html && (a = lb(c));
                            a === kb.html ? "script" === c ? (a = g.createElement("div"), a.innerHTML = "<script><\/script>", a = a.removeChild(a.firstChild)) : "string" === typeof d.is ? a = g.createElement(c, { is: d.is }) : (a = g.createElement(c), "select" === c && (g = a, d.multiple ? g.multiple = true : d.size && (g.size = d.size))) : a = g.createElementNS(a, c);
                            a[wf] = b;
                            a[xf] = d;
                            Bi(a, b, false, false);
                            b.stateNode = a;
                            g = wb(c, d);
                            switch (c) {
                              case "dialog":
                                G("cancel", a);
                                G("close", a);
                                e = d;
                                break;
                              case "iframe":
                              case "object":
                              case "embed":
                                G("load", a);
                                e = d;
                                break;
                              case "video":
                              case "audio":
                                for (e = 0; e < Xe.length; e++) G(Xe[e], a);
                                e = d;
                                break;
                              case "source":
                                G("error", a);
                                e = d;
                                break;
                              case "img":
                              case "image":
                              case "link":
                                G("error", a);
                                G("load", a);
                                e = d;
                                break;
                              case "details":
                                G("toggle", a);
                                e = d;
                                break;
                              case "input":
                                Za(a, d);
                                e = Ya(a, d);
                                G("invalid", a);
                                break;
                              case "option":
                                e = eb(a, d);
                                break;
                              case "select":
                                a._wrapperState = { wasMultiple: !!d.multiple };
                                e = m({}, d, { value: void 0 });
                                G("invalid", a);
                                break;
                              case "textarea":
                                hb(a, d);
                                e = gb(a, d);
                                G("invalid", a);
                                break;
                              default:
                                e = d;
                            }
                            vb(c, e);
                            var h = e;
                            for (f in h) if (h.hasOwnProperty(f)) {
                              var k = h[f];
                              "style" === f ? tb(a, k) : "dangerouslySetInnerHTML" === f ? (k = k ? k.__html : void 0, null != k && ob(a, k)) : "children" === f ? "string" === typeof k ? ("textarea" !== c || "" !== k) && pb(a, k) : "number" === typeof k && pb(a, "" + k) : "suppressContentEditableWarning" !== f && "suppressHydrationWarning" !== f && "autoFocus" !== f && (ca.hasOwnProperty(f) ? null != k && "onScroll" === f && G("scroll", a) : null != k && qa(a, f, k, g));
                            }
                            switch (c) {
                              case "input":
                                Va(a);
                                cb(a, d, false);
                                break;
                              case "textarea":
                                Va(a);
                                jb(a);
                                break;
                              case "option":
                                null != d.value && a.setAttribute("value", "" + Sa(d.value));
                                break;
                              case "select":
                                a.multiple = !!d.multiple;
                                f = d.value;
                                null != f ? fb(a, !!d.multiple, f, false) : null != d.defaultValue && fb(a, !!d.multiple, d.defaultValue, true);
                                break;
                              default:
                                "function" === typeof e.onClick && (a.onclick = jf);
                            }
                            mf(c, d) && (b.flags |= 4);
                          }
                          null !== b.ref && (b.flags |= 128);
                        }
                        return null;
                      case 6:
                        if (a && null != b.stateNode) Ei(a, b, a.memoizedProps, d);
                        else {
                          if ("string" !== typeof d && null === b.stateNode) throw Error(y2(166));
                          c = dh(ch.current);
                          dh(ah.current);
                          rh(b) ? (d = b.stateNode, c = b.memoizedProps, d[wf] = b, d.nodeValue !== c && (b.flags |= 4)) : (d = (9 === c.nodeType ? c : c.ownerDocument).createTextNode(d), d[wf] = b, b.stateNode = d);
                        }
                        return null;
                      case 13:
                        H(P);
                        d = b.memoizedState;
                        if (0 !== (b.flags & 64)) return b.lanes = c, b;
                        d = null !== d;
                        c = false;
                        null === a ? void 0 !== b.memoizedProps.fallback && rh(b) : c = null !== a.memoizedState;
                        if (d && !c && 0 !== (b.mode & 2)) if (null === a && true !== b.memoizedProps.unstable_avoidThisFallback || 0 !== (P.current & 1)) 0 === V && (V = 3);
                        else {
                          if (0 === V || 3 === V) V = 4;
                          null === U || 0 === (Dg & 134217727) && 0 === (Hi & 134217727) || Ii(U, W);
                        }
                        if (d || c) b.flags |= 4;
                        return null;
                      case 4:
                        return fh(), Ci(b), null === a && cf(b.stateNode.containerInfo), null;
                      case 10:
                        return rg(b), null;
                      case 17:
                        return Ff(b.type) && Gf(), null;
                      case 19:
                        H(P);
                        d = b.memoizedState;
                        if (null === d) return null;
                        f = 0 !== (b.flags & 64);
                        g = d.rendering;
                        if (null === g) if (f) Fi(d, false);
                        else {
                          if (0 !== V || null !== a && 0 !== (a.flags & 64)) for (a = b.child; null !== a; ) {
                            g = ih(a);
                            if (null !== g) {
                              b.flags |= 64;
                              Fi(d, false);
                              f = g.updateQueue;
                              null !== f && (b.updateQueue = f, b.flags |= 4);
                              null === d.lastEffect && (b.firstEffect = null);
                              b.lastEffect = d.lastEffect;
                              d = c;
                              for (c = b.child; null !== c; ) f = c, a = d, f.flags &= 2, f.nextEffect = null, f.firstEffect = null, f.lastEffect = null, g = f.alternate, null === g ? (f.childLanes = 0, f.lanes = a, f.child = null, f.memoizedProps = null, f.memoizedState = null, f.updateQueue = null, f.dependencies = null, f.stateNode = null) : (f.childLanes = g.childLanes, f.lanes = g.lanes, f.child = g.child, f.memoizedProps = g.memoizedProps, f.memoizedState = g.memoizedState, f.updateQueue = g.updateQueue, f.type = g.type, a = g.dependencies, f.dependencies = null === a ? null : { lanes: a.lanes, firstContext: a.firstContext }), c = c.sibling;
                              I(P, P.current & 1 | 2);
                              return b.child;
                            }
                            a = a.sibling;
                          }
                          null !== d.tail && O() > Ji && (b.flags |= 64, f = true, Fi(d, false), b.lanes = 33554432);
                        }
                        else {
                          if (!f) if (a = ih(g), null !== a) {
                            if (b.flags |= 64, f = true, c = a.updateQueue, null !== c && (b.updateQueue = c, b.flags |= 4), Fi(d, true), null === d.tail && "hidden" === d.tailMode && !g.alternate && !lh) return b = b.lastEffect = d.lastEffect, null !== b && (b.nextEffect = null), null;
                          } else 2 * O() - d.renderingStartTime > Ji && 1073741824 !== c && (b.flags |= 64, f = true, Fi(d, false), b.lanes = 33554432);
                          d.isBackwards ? (g.sibling = b.child, b.child = g) : (c = d.last, null !== c ? c.sibling = g : b.child = g, d.last = g);
                        }
                        return null !== d.tail ? (c = d.tail, d.rendering = c, d.tail = c.sibling, d.lastEffect = b.lastEffect, d.renderingStartTime = O(), c.sibling = null, b = P.current, I(P, f ? b & 1 | 2 : b & 1), c) : null;
                      case 23:
                      case 24:
                        return Ki(), null !== a && null !== a.memoizedState !== (null !== b.memoizedState) && "unstable-defer-without-hiding" !== d.mode && (b.flags |= 4), null;
                    }
                    throw Error(y2(156, b.tag));
                  }
                  function Li(a) {
                    switch (a.tag) {
                      case 1:
                        Ff(a.type) && Gf();
                        var b = a.flags;
                        return b & 4096 ? (a.flags = b & -4097 | 64, a) : null;
                      case 3:
                        fh();
                        H(N);
                        H(M);
                        uh();
                        b = a.flags;
                        if (0 !== (b & 64)) throw Error(y2(285));
                        a.flags = b & -4097 | 64;
                        return a;
                      case 5:
                        return hh(a), null;
                      case 13:
                        return H(P), b = a.flags, b & 4096 ? (a.flags = b & -4097 | 64, a) : null;
                      case 19:
                        return H(P), null;
                      case 4:
                        return fh(), null;
                      case 10:
                        return rg(a), null;
                      case 23:
                      case 24:
                        return Ki(), null;
                      default:
                        return null;
                    }
                  }
                  function Mi(a, b) {
                    try {
                      var c = "", d = b;
                      do
                        c += Qa(d), d = d.return;
                      while (d);
                      var e = c;
                    } catch (f) {
                      e = "\nError generating stack: " + f.message + "\n" + f.stack;
                    }
                    return { value: a, source: b, stack: e };
                  }
                  function Ni(a, b) {
                    try {
                      console.error(b.value);
                    } catch (c) {
                      setTimeout(function() {
                        throw c;
                      });
                    }
                  }
                  var Oi = "function" === typeof WeakMap ? WeakMap : Map;
                  function Pi(a, b, c) {
                    c = zg(-1, c);
                    c.tag = 3;
                    c.payload = { element: null };
                    var d = b.value;
                    c.callback = function() {
                      Qi || (Qi = true, Ri = d);
                      Ni(a, b);
                    };
                    return c;
                  }
                  function Si(a, b, c) {
                    c = zg(-1, c);
                    c.tag = 3;
                    var d = a.type.getDerivedStateFromError;
                    if ("function" === typeof d) {
                      var e = b.value;
                      c.payload = function() {
                        Ni(a, b);
                        return d(e);
                      };
                    }
                    var f = a.stateNode;
                    null !== f && "function" === typeof f.componentDidCatch && (c.callback = function() {
                      "function" !== typeof d && (null === Ti ? Ti = /* @__PURE__ */ new Set([this]) : Ti.add(this), Ni(a, b));
                      var c2 = b.stack;
                      this.componentDidCatch(b.value, { componentStack: null !== c2 ? c2 : "" });
                    });
                    return c;
                  }
                  var Ui = "function" === typeof WeakSet ? WeakSet : Set;
                  function Vi(a) {
                    var b = a.ref;
                    if (null !== b) if ("function" === typeof b) try {
                      b(null);
                    } catch (c) {
                      Wi(a, c);
                    }
                    else b.current = null;
                  }
                  function Xi(a, b) {
                    switch (b.tag) {
                      case 0:
                      case 11:
                      case 15:
                      case 22:
                        return;
                      case 1:
                        if (b.flags & 256 && null !== a) {
                          var c = a.memoizedProps, d = a.memoizedState;
                          a = b.stateNode;
                          b = a.getSnapshotBeforeUpdate(b.elementType === b.type ? c : lg(b.type, c), d);
                          a.__reactInternalSnapshotBeforeUpdate = b;
                        }
                        return;
                      case 3:
                        b.flags & 256 && qf(b.stateNode.containerInfo);
                        return;
                      case 5:
                      case 6:
                      case 4:
                      case 17:
                        return;
                    }
                    throw Error(y2(163));
                  }
                  function Yi(a, b, c) {
                    switch (c.tag) {
                      case 0:
                      case 11:
                      case 15:
                      case 22:
                        b = c.updateQueue;
                        b = null !== b ? b.lastEffect : null;
                        if (null !== b) {
                          a = b = b.next;
                          do {
                            if (3 === (a.tag & 3)) {
                              var d = a.create;
                              a.destroy = d();
                            }
                            a = a.next;
                          } while (a !== b);
                        }
                        b = c.updateQueue;
                        b = null !== b ? b.lastEffect : null;
                        if (null !== b) {
                          a = b = b.next;
                          do {
                            var e = a;
                            d = e.next;
                            e = e.tag;
                            0 !== (e & 4) && 0 !== (e & 1) && (Zi(c, a), $i(c, a));
                            a = d;
                          } while (a !== b);
                        }
                        return;
                      case 1:
                        a = c.stateNode;
                        c.flags & 4 && (null === b ? a.componentDidMount() : (d = c.elementType === c.type ? b.memoizedProps : lg(c.type, b.memoizedProps), a.componentDidUpdate(
                          d,
                          b.memoizedState,
                          a.__reactInternalSnapshotBeforeUpdate
                        )));
                        b = c.updateQueue;
                        null !== b && Eg(c, b, a);
                        return;
                      case 3:
                        b = c.updateQueue;
                        if (null !== b) {
                          a = null;
                          if (null !== c.child) switch (c.child.tag) {
                            case 5:
                              a = c.child.stateNode;
                              break;
                            case 1:
                              a = c.child.stateNode;
                          }
                          Eg(c, b, a);
                        }
                        return;
                      case 5:
                        a = c.stateNode;
                        null === b && c.flags & 4 && mf(c.type, c.memoizedProps) && a.focus();
                        return;
                      case 6:
                        return;
                      case 4:
                        return;
                      case 12:
                        return;
                      case 13:
                        null === c.memoizedState && (c = c.alternate, null !== c && (c = c.memoizedState, null !== c && (c = c.dehydrated, null !== c && Cc(c))));
                        return;
                      case 19:
                      case 17:
                      case 20:
                      case 21:
                      case 23:
                      case 24:
                        return;
                    }
                    throw Error(y2(163));
                  }
                  function aj(a, b) {
                    for (var c = a; ; ) {
                      if (5 === c.tag) {
                        var d = c.stateNode;
                        if (b) d = d.style, "function" === typeof d.setProperty ? d.setProperty("display", "none", "important") : d.display = "none";
                        else {
                          d = c.stateNode;
                          var e = c.memoizedProps.style;
                          e = void 0 !== e && null !== e && e.hasOwnProperty("display") ? e.display : null;
                          d.style.display = sb("display", e);
                        }
                      } else if (6 === c.tag) c.stateNode.nodeValue = b ? "" : c.memoizedProps;
                      else if ((23 !== c.tag && 24 !== c.tag || null === c.memoizedState || c === a) && null !== c.child) {
                        c.child.return = c;
                        c = c.child;
                        continue;
                      }
                      if (c === a) break;
                      for (; null === c.sibling; ) {
                        if (null === c.return || c.return === a) return;
                        c = c.return;
                      }
                      c.sibling.return = c.return;
                      c = c.sibling;
                    }
                  }
                  function bj(a, b) {
                    if (Mf && "function" === typeof Mf.onCommitFiberUnmount) try {
                      Mf.onCommitFiberUnmount(Lf, b);
                    } catch (f) {
                    }
                    switch (b.tag) {
                      case 0:
                      case 11:
                      case 14:
                      case 15:
                      case 22:
                        a = b.updateQueue;
                        if (null !== a && (a = a.lastEffect, null !== a)) {
                          var c = a = a.next;
                          do {
                            var d = c, e = d.destroy;
                            d = d.tag;
                            if (void 0 !== e) if (0 !== (d & 4)) Zi(b, c);
                            else {
                              d = b;
                              try {
                                e();
                              } catch (f) {
                                Wi(d, f);
                              }
                            }
                            c = c.next;
                          } while (c !== a);
                        }
                        break;
                      case 1:
                        Vi(b);
                        a = b.stateNode;
                        if ("function" === typeof a.componentWillUnmount) try {
                          a.props = b.memoizedProps, a.state = b.memoizedState, a.componentWillUnmount();
                        } catch (f) {
                          Wi(
                            b,
                            f
                          );
                        }
                        break;
                      case 5:
                        Vi(b);
                        break;
                      case 4:
                        cj(a, b);
                    }
                  }
                  function dj(a) {
                    a.alternate = null;
                    a.child = null;
                    a.dependencies = null;
                    a.firstEffect = null;
                    a.lastEffect = null;
                    a.memoizedProps = null;
                    a.memoizedState = null;
                    a.pendingProps = null;
                    a.return = null;
                    a.updateQueue = null;
                  }
                  function ej(a) {
                    return 5 === a.tag || 3 === a.tag || 4 === a.tag;
                  }
                  function fj(a) {
                    a: {
                      for (var b = a.return; null !== b; ) {
                        if (ej(b)) break a;
                        b = b.return;
                      }
                      throw Error(y2(160));
                    }
                    var c = b;
                    b = c.stateNode;
                    switch (c.tag) {
                      case 5:
                        var d = false;
                        break;
                      case 3:
                        b = b.containerInfo;
                        d = true;
                        break;
                      case 4:
                        b = b.containerInfo;
                        d = true;
                        break;
                      default:
                        throw Error(y2(161));
                    }
                    c.flags & 16 && (pb(b, ""), c.flags &= -17);
                    a: b: for (c = a; ; ) {
                      for (; null === c.sibling; ) {
                        if (null === c.return || ej(c.return)) {
                          c = null;
                          break a;
                        }
                        c = c.return;
                      }
                      c.sibling.return = c.return;
                      for (c = c.sibling; 5 !== c.tag && 6 !== c.tag && 18 !== c.tag; ) {
                        if (c.flags & 2) continue b;
                        if (null === c.child || 4 === c.tag) continue b;
                        else c.child.return = c, c = c.child;
                      }
                      if (!(c.flags & 2)) {
                        c = c.stateNode;
                        break a;
                      }
                    }
                    d ? gj(a, c, b) : hj(a, c, b);
                  }
                  function gj(a, b, c) {
                    var d = a.tag, e = 5 === d || 6 === d;
                    if (e) a = e ? a.stateNode : a.stateNode.instance, b ? 8 === c.nodeType ? c.parentNode.insertBefore(a, b) : c.insertBefore(a, b) : (8 === c.nodeType ? (b = c.parentNode, b.insertBefore(a, c)) : (b = c, b.appendChild(a)), c = c._reactRootContainer, null !== c && void 0 !== c || null !== b.onclick || (b.onclick = jf));
                    else if (4 !== d && (a = a.child, null !== a)) for (gj(a, b, c), a = a.sibling; null !== a; ) gj(a, b, c), a = a.sibling;
                  }
                  function hj(a, b, c) {
                    var d = a.tag, e = 5 === d || 6 === d;
                    if (e) a = e ? a.stateNode : a.stateNode.instance, b ? c.insertBefore(a, b) : c.appendChild(a);
                    else if (4 !== d && (a = a.child, null !== a)) for (hj(a, b, c), a = a.sibling; null !== a; ) hj(a, b, c), a = a.sibling;
                  }
                  function cj(a, b) {
                    for (var c = b, d = false, e, f; ; ) {
                      if (!d) {
                        d = c.return;
                        a: for (; ; ) {
                          if (null === d) throw Error(y2(160));
                          e = d.stateNode;
                          switch (d.tag) {
                            case 5:
                              f = false;
                              break a;
                            case 3:
                              e = e.containerInfo;
                              f = true;
                              break a;
                            case 4:
                              e = e.containerInfo;
                              f = true;
                              break a;
                          }
                          d = d.return;
                        }
                        d = true;
                      }
                      if (5 === c.tag || 6 === c.tag) {
                        a: for (var g = a, h = c, k = h; ; ) if (bj(g, k), null !== k.child && 4 !== k.tag) k.child.return = k, k = k.child;
                        else {
                          if (k === h) break a;
                          for (; null === k.sibling; ) {
                            if (null === k.return || k.return === h) break a;
                            k = k.return;
                          }
                          k.sibling.return = k.return;
                          k = k.sibling;
                        }
                        f ? (g = e, h = c.stateNode, 8 === g.nodeType ? g.parentNode.removeChild(h) : g.removeChild(h)) : e.removeChild(c.stateNode);
                      } else if (4 === c.tag) {
                        if (null !== c.child) {
                          e = c.stateNode.containerInfo;
                          f = true;
                          c.child.return = c;
                          c = c.child;
                          continue;
                        }
                      } else if (bj(a, c), null !== c.child) {
                        c.child.return = c;
                        c = c.child;
                        continue;
                      }
                      if (c === b) break;
                      for (; null === c.sibling; ) {
                        if (null === c.return || c.return === b) return;
                        c = c.return;
                        4 === c.tag && (d = false);
                      }
                      c.sibling.return = c.return;
                      c = c.sibling;
                    }
                  }
                  function ij(a, b) {
                    switch (b.tag) {
                      case 0:
                      case 11:
                      case 14:
                      case 15:
                      case 22:
                        var c = b.updateQueue;
                        c = null !== c ? c.lastEffect : null;
                        if (null !== c) {
                          var d = c = c.next;
                          do
                            3 === (d.tag & 3) && (a = d.destroy, d.destroy = void 0, void 0 !== a && a()), d = d.next;
                          while (d !== c);
                        }
                        return;
                      case 1:
                        return;
                      case 5:
                        c = b.stateNode;
                        if (null != c) {
                          d = b.memoizedProps;
                          var e = null !== a ? a.memoizedProps : d;
                          a = b.type;
                          var f = b.updateQueue;
                          b.updateQueue = null;
                          if (null !== f) {
                            c[xf] = d;
                            "input" === a && "radio" === d.type && null != d.name && $a(c, d);
                            wb(a, e);
                            b = wb(a, d);
                            for (e = 0; e < f.length; e += 2) {
                              var g = f[e], h = f[e + 1];
                              "style" === g ? tb(c, h) : "dangerouslySetInnerHTML" === g ? ob(c, h) : "children" === g ? pb(c, h) : qa(c, g, h, b);
                            }
                            switch (a) {
                              case "input":
                                ab(c, d);
                                break;
                              case "textarea":
                                ib(c, d);
                                break;
                              case "select":
                                a = c._wrapperState.wasMultiple, c._wrapperState.wasMultiple = !!d.multiple, f = d.value, null != f ? fb(c, !!d.multiple, f, false) : a !== !!d.multiple && (null != d.defaultValue ? fb(c, !!d.multiple, d.defaultValue, true) : fb(c, !!d.multiple, d.multiple ? [] : "", false));
                            }
                          }
                        }
                        return;
                      case 6:
                        if (null === b.stateNode) throw Error(y2(162));
                        b.stateNode.nodeValue = b.memoizedProps;
                        return;
                      case 3:
                        c = b.stateNode;
                        c.hydrate && (c.hydrate = false, Cc(c.containerInfo));
                        return;
                      case 12:
                        return;
                      case 13:
                        null !== b.memoizedState && (jj = O(), aj(b.child, true));
                        kj(b);
                        return;
                      case 19:
                        kj(b);
                        return;
                      case 17:
                        return;
                      case 23:
                      case 24:
                        aj(b, null !== b.memoizedState);
                        return;
                    }
                    throw Error(y2(163));
                  }
                  function kj(a) {
                    var b = a.updateQueue;
                    if (null !== b) {
                      a.updateQueue = null;
                      var c = a.stateNode;
                      null === c && (c = a.stateNode = new Ui());
                      b.forEach(function(b2) {
                        var d = lj.bind(null, a, b2);
                        c.has(b2) || (c.add(b2), b2.then(d, d));
                      });
                    }
                  }
                  function mj(a, b) {
                    return null !== a && (a = a.memoizedState, null === a || null !== a.dehydrated) ? (b = b.memoizedState, null !== b && null === b.dehydrated) : false;
                  }
                  var nj = Math.ceil, oj = ra.ReactCurrentDispatcher, pj = ra.ReactCurrentOwner, X = 0, U = null, Y = null, W = 0, qj = 0, rj = Bf(0), V = 0, sj = null, tj = 0, Dg = 0, Hi = 0, uj = 0, vj = null, jj = 0, Ji = Infinity;
                  function wj() {
                    Ji = O() + 500;
                  }
                  var Z = null, Qi = false, Ri = null, Ti = null, xj = false, yj = null, zj = 90, Aj = [], Bj = [], Cj = null, Dj = 0, Ej = null, Fj = -1, Gj = 0, Hj = 0, Ij = null, Jj = false;
                  function Hg() {
                    return 0 !== (X & 48) ? O() : -1 !== Fj ? Fj : Fj = O();
                  }
                  function Ig(a) {
                    a = a.mode;
                    if (0 === (a & 2)) return 1;
                    if (0 === (a & 4)) return 99 === eg() ? 1 : 2;
                    0 === Gj && (Gj = tj);
                    if (0 !== kg.transition) {
                      0 !== Hj && (Hj = null !== vj ? vj.pendingLanes : 0);
                      a = Gj;
                      var b = 4186112 & ~Hj;
                      b &= -b;
                      0 === b && (a = 4186112 & ~a, b = a & -a, 0 === b && (b = 8192));
                      return b;
                    }
                    a = eg();
                    0 !== (X & 4) && 98 === a ? a = Xc(12, Gj) : (a = Sc(a), a = Xc(a, Gj));
                    return a;
                  }
                  function Jg(a, b, c) {
                    if (50 < Dj) throw Dj = 0, Ej = null, Error(y2(185));
                    a = Kj(a, b);
                    if (null === a) return null;
                    $c(a, b, c);
                    a === U && (Hi |= b, 4 === V && Ii(a, W));
                    var d = eg();
                    1 === b ? 0 !== (X & 8) && 0 === (X & 48) ? Lj(a) : (Mj(a, c), 0 === X && (wj(), ig())) : (0 === (X & 4) || 98 !== d && 99 !== d || (null === Cj ? Cj = /* @__PURE__ */ new Set([a]) : Cj.add(a)), Mj(a, c));
                    vj = a;
                  }
                  function Kj(a, b) {
                    a.lanes |= b;
                    var c = a.alternate;
                    null !== c && (c.lanes |= b);
                    c = a;
                    for (a = a.return; null !== a; ) a.childLanes |= b, c = a.alternate, null !== c && (c.childLanes |= b), c = a, a = a.return;
                    return 3 === c.tag ? c.stateNode : null;
                  }
                  function Mj(a, b) {
                    for (var c = a.callbackNode, d = a.suspendedLanes, e = a.pingedLanes, f = a.expirationTimes, g = a.pendingLanes; 0 < g; ) {
                      var h = 31 - Vc(g), k = 1 << h, l = f[h];
                      if (-1 === l) {
                        if (0 === (k & d) || 0 !== (k & e)) {
                          l = b;
                          Rc(k);
                          var n = F;
                          f[h] = 10 <= n ? l + 250 : 6 <= n ? l + 5e3 : -1;
                        }
                      } else l <= b && (a.expiredLanes |= k);
                      g &= ~k;
                    }
                    d = Uc(a, a === U ? W : 0);
                    b = F;
                    if (0 === d) null !== c && (c !== Zf && Pf(c), a.callbackNode = null, a.callbackPriority = 0);
                    else {
                      if (null !== c) {
                        if (a.callbackPriority === b) return;
                        c !== Zf && Pf(c);
                      }
                      15 === b ? (c = Lj.bind(null, a), null === ag ? (ag = [c], bg = Of(Uf, jg)) : ag.push(c), c = Zf) : 14 === b ? c = hg(99, Lj.bind(null, a)) : (c = Tc(b), c = hg(c, Nj.bind(null, a)));
                      a.callbackPriority = b;
                      a.callbackNode = c;
                    }
                  }
                  function Nj(a) {
                    Fj = -1;
                    Hj = Gj = 0;
                    if (0 !== (X & 48)) throw Error(y2(327));
                    var b = a.callbackNode;
                    if (Oj() && a.callbackNode !== b) return null;
                    var c = Uc(a, a === U ? W : 0);
                    if (0 === c) return null;
                    var d = c;
                    var e = X;
                    X |= 16;
                    var f = Pj();
                    if (U !== a || W !== d) wj(), Qj(a, d);
                    do
                      try {
                        Rj();
                        break;
                      } catch (h) {
                        Sj(a, h);
                      }
                    while (1);
                    qg();
                    oj.current = f;
                    X = e;
                    null !== Y ? d = 0 : (U = null, W = 0, d = V);
                    if (0 !== (tj & Hi)) Qj(a, 0);
                    else if (0 !== d) {
                      2 === d && (X |= 64, a.hydrate && (a.hydrate = false, qf(a.containerInfo)), c = Wc(a), 0 !== c && (d = Tj(a, c)));
                      if (1 === d) throw b = sj, Qj(a, 0), Ii(a, c), Mj(a, O()), b;
                      a.finishedWork = a.current.alternate;
                      a.finishedLanes = c;
                      switch (d) {
                        case 0:
                        case 1:
                          throw Error(y2(345));
                        case 2:
                          Uj(a);
                          break;
                        case 3:
                          Ii(a, c);
                          if ((c & 62914560) === c && (d = jj + 500 - O(), 10 < d)) {
                            if (0 !== Uc(a, 0)) break;
                            e = a.suspendedLanes;
                            if ((e & c) !== c) {
                              Hg();
                              a.pingedLanes |= a.suspendedLanes & e;
                              break;
                            }
                            a.timeoutHandle = of(Uj.bind(null, a), d);
                            break;
                          }
                          Uj(a);
                          break;
                        case 4:
                          Ii(a, c);
                          if ((c & 4186112) === c) break;
                          d = a.eventTimes;
                          for (e = -1; 0 < c; ) {
                            var g = 31 - Vc(c);
                            f = 1 << g;
                            g = d[g];
                            g > e && (e = g);
                            c &= ~f;
                          }
                          c = e;
                          c = O() - c;
                          c = (120 > c ? 120 : 480 > c ? 480 : 1080 > c ? 1080 : 1920 > c ? 1920 : 3e3 > c ? 3e3 : 4320 > c ? 4320 : 1960 * nj(c / 1960)) - c;
                          if (10 < c) {
                            a.timeoutHandle = of(Uj.bind(null, a), c);
                            break;
                          }
                          Uj(a);
                          break;
                        case 5:
                          Uj(a);
                          break;
                        default:
                          throw Error(y2(329));
                      }
                    }
                    Mj(a, O());
                    return a.callbackNode === b ? Nj.bind(null, a) : null;
                  }
                  function Ii(a, b) {
                    b &= ~uj;
                    b &= ~Hi;
                    a.suspendedLanes |= b;
                    a.pingedLanes &= ~b;
                    for (a = a.expirationTimes; 0 < b; ) {
                      var c = 31 - Vc(b), d = 1 << c;
                      a[c] = -1;
                      b &= ~d;
                    }
                  }
                  function Lj(a) {
                    if (0 !== (X & 48)) throw Error(y2(327));
                    Oj();
                    if (a === U && 0 !== (a.expiredLanes & W)) {
                      var b = W;
                      var c = Tj(a, b);
                      0 !== (tj & Hi) && (b = Uc(a, b), c = Tj(a, b));
                    } else b = Uc(a, 0), c = Tj(a, b);
                    0 !== a.tag && 2 === c && (X |= 64, a.hydrate && (a.hydrate = false, qf(a.containerInfo)), b = Wc(a), 0 !== b && (c = Tj(a, b)));
                    if (1 === c) throw c = sj, Qj(a, 0), Ii(a, b), Mj(a, O()), c;
                    a.finishedWork = a.current.alternate;
                    a.finishedLanes = b;
                    Uj(a);
                    Mj(a, O());
                    return null;
                  }
                  function Vj() {
                    if (null !== Cj) {
                      var a = Cj;
                      Cj = null;
                      a.forEach(function(a2) {
                        a2.expiredLanes |= 24 & a2.pendingLanes;
                        Mj(a2, O());
                      });
                    }
                    ig();
                  }
                  function Wj(a, b) {
                    var c = X;
                    X |= 1;
                    try {
                      return a(b);
                    } finally {
                      X = c, 0 === X && (wj(), ig());
                    }
                  }
                  function Xj(a, b) {
                    var c = X;
                    X &= -2;
                    X |= 8;
                    try {
                      return a(b);
                    } finally {
                      X = c, 0 === X && (wj(), ig());
                    }
                  }
                  function ni(a, b) {
                    I(rj, qj);
                    qj |= b;
                    tj |= b;
                  }
                  function Ki() {
                    qj = rj.current;
                    H(rj);
                  }
                  function Qj(a, b) {
                    a.finishedWork = null;
                    a.finishedLanes = 0;
                    var c = a.timeoutHandle;
                    -1 !== c && (a.timeoutHandle = -1, pf(c));
                    if (null !== Y) for (c = Y.return; null !== c; ) {
                      var d = c;
                      switch (d.tag) {
                        case 1:
                          d = d.type.childContextTypes;
                          null !== d && void 0 !== d && Gf();
                          break;
                        case 3:
                          fh();
                          H(N);
                          H(M);
                          uh();
                          break;
                        case 5:
                          hh(d);
                          break;
                        case 4:
                          fh();
                          break;
                        case 13:
                          H(P);
                          break;
                        case 19:
                          H(P);
                          break;
                        case 10:
                          rg(d);
                          break;
                        case 23:
                        case 24:
                          Ki();
                      }
                      c = c.return;
                    }
                    U = a;
                    Y = Tg(a.current, null);
                    W = qj = tj = b;
                    V = 0;
                    sj = null;
                    uj = Hi = Dg = 0;
                  }
                  function Sj(a, b) {
                    do {
                      var c = Y;
                      try {
                        qg();
                        vh.current = Gh;
                        if (yh) {
                          for (var d = R.memoizedState; null !== d; ) {
                            var e = d.queue;
                            null !== e && (e.pending = null);
                            d = d.next;
                          }
                          yh = false;
                        }
                        xh = 0;
                        T = S = R = null;
                        zh = false;
                        pj.current = null;
                        if (null === c || null === c.return) {
                          V = 1;
                          sj = b;
                          Y = null;
                          break;
                        }
                        a: {
                          var f = a, g = c.return, h = c, k = b;
                          b = W;
                          h.flags |= 2048;
                          h.firstEffect = h.lastEffect = null;
                          if (null !== k && "object" === typeof k && "function" === typeof k.then) {
                            var l = k;
                            if (0 === (h.mode & 2)) {
                              var n = h.alternate;
                              n ? (h.updateQueue = n.updateQueue, h.memoizedState = n.memoizedState, h.lanes = n.lanes) : (h.updateQueue = null, h.memoizedState = null);
                            }
                            var A = 0 !== (P.current & 1), p = g;
                            do {
                              var C;
                              if (C = 13 === p.tag) {
                                var x2 = p.memoizedState;
                                if (null !== x2) C = null !== x2.dehydrated ? true : false;
                                else {
                                  var w = p.memoizedProps;
                                  C = void 0 === w.fallback ? false : true !== w.unstable_avoidThisFallback ? true : A ? false : true;
                                }
                              }
                              if (C) {
                                var z = p.updateQueue;
                                if (null === z) {
                                  var u = /* @__PURE__ */ new Set();
                                  u.add(l);
                                  p.updateQueue = u;
                                } else z.add(l);
                                if (0 === (p.mode & 2)) {
                                  p.flags |= 64;
                                  h.flags |= 16384;
                                  h.flags &= -2981;
                                  if (1 === h.tag) if (null === h.alternate) h.tag = 17;
                                  else {
                                    var t2 = zg(-1, 1);
                                    t2.tag = 2;
                                    Ag(h, t2);
                                  }
                                  h.lanes |= 1;
                                  break a;
                                }
                                k = void 0;
                                h = b;
                                var q = f.pingCache;
                                null === q ? (q = f.pingCache = new Oi(), k = /* @__PURE__ */ new Set(), q.set(l, k)) : (k = q.get(l), void 0 === k && (k = /* @__PURE__ */ new Set(), q.set(l, k)));
                                if (!k.has(h)) {
                                  k.add(h);
                                  var v = Yj.bind(null, f, l, h);
                                  l.then(v, v);
                                }
                                p.flags |= 4096;
                                p.lanes = b;
                                break a;
                              }
                              p = p.return;
                            } while (null !== p);
                            k = Error((Ra(h.type) || "A React component") + " suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.");
                          }
                          5 !== V && (V = 2);
                          k = Mi(k, h);
                          p = g;
                          do {
                            switch (p.tag) {
                              case 3:
                                f = k;
                                p.flags |= 4096;
                                b &= -b;
                                p.lanes |= b;
                                var J = Pi(p, f, b);
                                Bg(p, J);
                                break a;
                              case 1:
                                f = k;
                                var K = p.type, Q = p.stateNode;
                                if (0 === (p.flags & 64) && ("function" === typeof K.getDerivedStateFromError || null !== Q && "function" === typeof Q.componentDidCatch && (null === Ti || !Ti.has(Q)))) {
                                  p.flags |= 4096;
                                  b &= -b;
                                  p.lanes |= b;
                                  var L = Si(p, f, b);
                                  Bg(p, L);
                                  break a;
                                }
                            }
                            p = p.return;
                          } while (null !== p);
                        }
                        Zj(c);
                      } catch (va) {
                        b = va;
                        Y === c && null !== c && (Y = c = c.return);
                        continue;
                      }
                      break;
                    } while (1);
                  }
                  function Pj() {
                    var a = oj.current;
                    oj.current = Gh;
                    return null === a ? Gh : a;
                  }
                  function Tj(a, b) {
                    var c = X;
                    X |= 16;
                    var d = Pj();
                    U === a && W === b || Qj(a, b);
                    do
                      try {
                        ak();
                        break;
                      } catch (e) {
                        Sj(a, e);
                      }
                    while (1);
                    qg();
                    X = c;
                    oj.current = d;
                    if (null !== Y) throw Error(y2(261));
                    U = null;
                    W = 0;
                    return V;
                  }
                  function ak() {
                    for (; null !== Y; ) bk(Y);
                  }
                  function Rj() {
                    for (; null !== Y && !Qf(); ) bk(Y);
                  }
                  function bk(a) {
                    var b = ck(a.alternate, a, qj);
                    a.memoizedProps = a.pendingProps;
                    null === b ? Zj(a) : Y = b;
                    pj.current = null;
                  }
                  function Zj(a) {
                    var b = a;
                    do {
                      var c = b.alternate;
                      a = b.return;
                      if (0 === (b.flags & 2048)) {
                        c = Gi(c, b, qj);
                        if (null !== c) {
                          Y = c;
                          return;
                        }
                        c = b;
                        if (24 !== c.tag && 23 !== c.tag || null === c.memoizedState || 0 !== (qj & 1073741824) || 0 === (c.mode & 4)) {
                          for (var d = 0, e = c.child; null !== e; ) d |= e.lanes | e.childLanes, e = e.sibling;
                          c.childLanes = d;
                        }
                        null !== a && 0 === (a.flags & 2048) && (null === a.firstEffect && (a.firstEffect = b.firstEffect), null !== b.lastEffect && (null !== a.lastEffect && (a.lastEffect.nextEffect = b.firstEffect), a.lastEffect = b.lastEffect), 1 < b.flags && (null !== a.lastEffect ? a.lastEffect.nextEffect = b : a.firstEffect = b, a.lastEffect = b));
                      } else {
                        c = Li(b);
                        if (null !== c) {
                          c.flags &= 2047;
                          Y = c;
                          return;
                        }
                        null !== a && (a.firstEffect = a.lastEffect = null, a.flags |= 2048);
                      }
                      b = b.sibling;
                      if (null !== b) {
                        Y = b;
                        return;
                      }
                      Y = b = a;
                    } while (null !== b);
                    0 === V && (V = 5);
                  }
                  function Uj(a) {
                    var b = eg();
                    gg(99, dk.bind(null, a, b));
                    return null;
                  }
                  function dk(a, b) {
                    do
                      Oj();
                    while (null !== yj);
                    if (0 !== (X & 48)) throw Error(y2(327));
                    var c = a.finishedWork;
                    if (null === c) return null;
                    a.finishedWork = null;
                    a.finishedLanes = 0;
                    if (c === a.current) throw Error(y2(177));
                    a.callbackNode = null;
                    var d = c.lanes | c.childLanes, e = d, f = a.pendingLanes & ~e;
                    a.pendingLanes = e;
                    a.suspendedLanes = 0;
                    a.pingedLanes = 0;
                    a.expiredLanes &= e;
                    a.mutableReadLanes &= e;
                    a.entangledLanes &= e;
                    e = a.entanglements;
                    for (var g = a.eventTimes, h = a.expirationTimes; 0 < f; ) {
                      var k = 31 - Vc(f), l = 1 << k;
                      e[k] = 0;
                      g[k] = -1;
                      h[k] = -1;
                      f &= ~l;
                    }
                    null !== Cj && 0 === (d & 24) && Cj.has(a) && Cj.delete(a);
                    a === U && (Y = U = null, W = 0);
                    1 < c.flags ? null !== c.lastEffect ? (c.lastEffect.nextEffect = c, d = c.firstEffect) : d = c : d = c.firstEffect;
                    if (null !== d) {
                      e = X;
                      X |= 32;
                      pj.current = null;
                      kf = fd;
                      g = Ne();
                      if (Oe(g)) {
                        if ("selectionStart" in g) h = { start: g.selectionStart, end: g.selectionEnd };
                        else a: if (h = (h = g.ownerDocument) && h.defaultView || window, (l = h.getSelection && h.getSelection()) && 0 !== l.rangeCount) {
                          h = l.anchorNode;
                          f = l.anchorOffset;
                          k = l.focusNode;
                          l = l.focusOffset;
                          try {
                            h.nodeType, k.nodeType;
                          } catch (va) {
                            h = null;
                            break a;
                          }
                          var n = 0, A = -1, p = -1, C = 0, x2 = 0, w = g, z = null;
                          b: for (; ; ) {
                            for (var u; ; ) {
                              w !== h || 0 !== f && 3 !== w.nodeType || (A = n + f);
                              w !== k || 0 !== l && 3 !== w.nodeType || (p = n + l);
                              3 === w.nodeType && (n += w.nodeValue.length);
                              if (null === (u = w.firstChild)) break;
                              z = w;
                              w = u;
                            }
                            for (; ; ) {
                              if (w === g) break b;
                              z === h && ++C === f && (A = n);
                              z === k && ++x2 === l && (p = n);
                              if (null !== (u = w.nextSibling)) break;
                              w = z;
                              z = w.parentNode;
                            }
                            w = u;
                          }
                          h = -1 === A || -1 === p ? null : { start: A, end: p };
                        } else h = null;
                        h = h || { start: 0, end: 0 };
                      } else h = null;
                      lf = { focusedElem: g, selectionRange: h };
                      fd = false;
                      Ij = null;
                      Jj = false;
                      Z = d;
                      do
                        try {
                          ek();
                        } catch (va) {
                          if (null === Z) throw Error(y2(330));
                          Wi(Z, va);
                          Z = Z.nextEffect;
                        }
                      while (null !== Z);
                      Ij = null;
                      Z = d;
                      do
                        try {
                          for (g = a; null !== Z; ) {
                            var t2 = Z.flags;
                            t2 & 16 && pb(Z.stateNode, "");
                            if (t2 & 128) {
                              var q = Z.alternate;
                              if (null !== q) {
                                var v = q.ref;
                                null !== v && ("function" === typeof v ? v(null) : v.current = null);
                              }
                            }
                            switch (t2 & 1038) {
                              case 2:
                                fj(Z);
                                Z.flags &= -3;
                                break;
                              case 6:
                                fj(Z);
                                Z.flags &= -3;
                                ij(Z.alternate, Z);
                                break;
                              case 1024:
                                Z.flags &= -1025;
                                break;
                              case 1028:
                                Z.flags &= -1025;
                                ij(Z.alternate, Z);
                                break;
                              case 4:
                                ij(Z.alternate, Z);
                                break;
                              case 8:
                                h = Z;
                                cj(g, h);
                                var J = h.alternate;
                                dj(h);
                                null !== J && dj(J);
                            }
                            Z = Z.nextEffect;
                          }
                        } catch (va) {
                          if (null === Z) throw Error(y2(330));
                          Wi(Z, va);
                          Z = Z.nextEffect;
                        }
                      while (null !== Z);
                      v = lf;
                      q = Ne();
                      t2 = v.focusedElem;
                      g = v.selectionRange;
                      if (q !== t2 && t2 && t2.ownerDocument && Me(t2.ownerDocument.documentElement, t2)) {
                        null !== g && Oe(t2) && (q = g.start, v = g.end, void 0 === v && (v = q), "selectionStart" in t2 ? (t2.selectionStart = q, t2.selectionEnd = Math.min(v, t2.value.length)) : (v = (q = t2.ownerDocument || document) && q.defaultView || window, v.getSelection && (v = v.getSelection(), h = t2.textContent.length, J = Math.min(g.start, h), g = void 0 === g.end ? J : Math.min(g.end, h), !v.extend && J > g && (h = g, g = J, J = h), h = Le(t2, J), f = Le(t2, g), h && f && (1 !== v.rangeCount || v.anchorNode !== h.node || v.anchorOffset !== h.offset || v.focusNode !== f.node || v.focusOffset !== f.offset) && (q = q.createRange(), q.setStart(h.node, h.offset), v.removeAllRanges(), J > g ? (v.addRange(q), v.extend(f.node, f.offset)) : (q.setEnd(f.node, f.offset), v.addRange(q))))));
                        q = [];
                        for (v = t2; v = v.parentNode; ) 1 === v.nodeType && q.push({ element: v, left: v.scrollLeft, top: v.scrollTop });
                        "function" === typeof t2.focus && t2.focus();
                        for (t2 = 0; t2 < q.length; t2++) v = q[t2], v.element.scrollLeft = v.left, v.element.scrollTop = v.top;
                      }
                      fd = !!kf;
                      lf = kf = null;
                      a.current = c;
                      Z = d;
                      do
                        try {
                          for (t2 = a; null !== Z; ) {
                            var K = Z.flags;
                            K & 36 && Yi(t2, Z.alternate, Z);
                            if (K & 128) {
                              q = void 0;
                              var Q = Z.ref;
                              if (null !== Q) {
                                var L = Z.stateNode;
                                switch (Z.tag) {
                                  case 5:
                                    q = L;
                                    break;
                                  default:
                                    q = L;
                                }
                                "function" === typeof Q ? Q(q) : Q.current = q;
                              }
                            }
                            Z = Z.nextEffect;
                          }
                        } catch (va) {
                          if (null === Z) throw Error(y2(330));
                          Wi(Z, va);
                          Z = Z.nextEffect;
                        }
                      while (null !== Z);
                      Z = null;
                      $f();
                      X = e;
                    } else a.current = c;
                    if (xj) xj = false, yj = a, zj = b;
                    else for (Z = d; null !== Z; ) b = Z.nextEffect, Z.nextEffect = null, Z.flags & 8 && (K = Z, K.sibling = null, K.stateNode = null), Z = b;
                    d = a.pendingLanes;
                    0 === d && (Ti = null);
                    1 === d ? a === Ej ? Dj++ : (Dj = 0, Ej = a) : Dj = 0;
                    c = c.stateNode;
                    if (Mf && "function" === typeof Mf.onCommitFiberRoot) try {
                      Mf.onCommitFiberRoot(Lf, c, void 0, 64 === (c.current.flags & 64));
                    } catch (va) {
                    }
                    Mj(a, O());
                    if (Qi) throw Qi = false, a = Ri, Ri = null, a;
                    if (0 !== (X & 8)) return null;
                    ig();
                    return null;
                  }
                  function ek() {
                    for (; null !== Z; ) {
                      var a = Z.alternate;
                      Jj || null === Ij || (0 !== (Z.flags & 8) ? dc(Z, Ij) && (Jj = true) : 13 === Z.tag && mj(a, Z) && dc(Z, Ij) && (Jj = true));
                      var b = Z.flags;
                      0 !== (b & 256) && Xi(a, Z);
                      0 === (b & 512) || xj || (xj = true, hg(97, function() {
                        Oj();
                        return null;
                      }));
                      Z = Z.nextEffect;
                    }
                  }
                  function Oj() {
                    if (90 !== zj) {
                      var a = 97 < zj ? 97 : zj;
                      zj = 90;
                      return gg(a, fk);
                    }
                    return false;
                  }
                  function $i(a, b) {
                    Aj.push(b, a);
                    xj || (xj = true, hg(97, function() {
                      Oj();
                      return null;
                    }));
                  }
                  function Zi(a, b) {
                    Bj.push(b, a);
                    xj || (xj = true, hg(97, function() {
                      Oj();
                      return null;
                    }));
                  }
                  function fk() {
                    if (null === yj) return false;
                    var a = yj;
                    yj = null;
                    if (0 !== (X & 48)) throw Error(y2(331));
                    var b = X;
                    X |= 32;
                    var c = Bj;
                    Bj = [];
                    for (var d = 0; d < c.length; d += 2) {
                      var e = c[d], f = c[d + 1], g = e.destroy;
                      e.destroy = void 0;
                      if ("function" === typeof g) try {
                        g();
                      } catch (k) {
                        if (null === f) throw Error(y2(330));
                        Wi(f, k);
                      }
                    }
                    c = Aj;
                    Aj = [];
                    for (d = 0; d < c.length; d += 2) {
                      e = c[d];
                      f = c[d + 1];
                      try {
                        var h = e.create;
                        e.destroy = h();
                      } catch (k) {
                        if (null === f) throw Error(y2(330));
                        Wi(f, k);
                      }
                    }
                    for (h = a.current.firstEffect; null !== h; ) a = h.nextEffect, h.nextEffect = null, h.flags & 8 && (h.sibling = null, h.stateNode = null), h = a;
                    X = b;
                    ig();
                    return true;
                  }
                  function gk(a, b, c) {
                    b = Mi(c, b);
                    b = Pi(a, b, 1);
                    Ag(a, b);
                    b = Hg();
                    a = Kj(a, 1);
                    null !== a && ($c(a, 1, b), Mj(a, b));
                  }
                  function Wi(a, b) {
                    if (3 === a.tag) gk(a, a, b);
                    else for (var c = a.return; null !== c; ) {
                      if (3 === c.tag) {
                        gk(c, a, b);
                        break;
                      } else if (1 === c.tag) {
                        var d = c.stateNode;
                        if ("function" === typeof c.type.getDerivedStateFromError || "function" === typeof d.componentDidCatch && (null === Ti || !Ti.has(d))) {
                          a = Mi(b, a);
                          var e = Si(c, a, 1);
                          Ag(c, e);
                          e = Hg();
                          c = Kj(c, 1);
                          if (null !== c) $c(c, 1, e), Mj(c, e);
                          else if ("function" === typeof d.componentDidCatch && (null === Ti || !Ti.has(d))) try {
                            d.componentDidCatch(b, a);
                          } catch (f) {
                          }
                          break;
                        }
                      }
                      c = c.return;
                    }
                  }
                  function Yj(a, b, c) {
                    var d = a.pingCache;
                    null !== d && d.delete(b);
                    b = Hg();
                    a.pingedLanes |= a.suspendedLanes & c;
                    U === a && (W & c) === c && (4 === V || 3 === V && (W & 62914560) === W && 500 > O() - jj ? Qj(a, 0) : uj |= c);
                    Mj(a, b);
                  }
                  function lj(a, b) {
                    var c = a.stateNode;
                    null !== c && c.delete(b);
                    b = 0;
                    0 === b && (b = a.mode, 0 === (b & 2) ? b = 1 : 0 === (b & 4) ? b = 99 === eg() ? 1 : 2 : (0 === Gj && (Gj = tj), b = Yc(62914560 & ~Gj), 0 === b && (b = 4194304)));
                    c = Hg();
                    a = Kj(a, b);
                    null !== a && ($c(a, b, c), Mj(a, c));
                  }
                  var ck;
                  ck = function(a, b, c) {
                    var d = b.lanes;
                    if (null !== a) if (a.memoizedProps !== b.pendingProps || N.current) ug = true;
                    else if (0 !== (c & d)) ug = 0 !== (a.flags & 16384) ? true : false;
                    else {
                      ug = false;
                      switch (b.tag) {
                        case 3:
                          ri(b);
                          sh();
                          break;
                        case 5:
                          gh(b);
                          break;
                        case 1:
                          Ff(b.type) && Jf(b);
                          break;
                        case 4:
                          eh(b, b.stateNode.containerInfo);
                          break;
                        case 10:
                          d = b.memoizedProps.value;
                          var e = b.type._context;
                          I(mg, e._currentValue);
                          e._currentValue = d;
                          break;
                        case 13:
                          if (null !== b.memoizedState) {
                            if (0 !== (c & b.child.childLanes)) return ti(a, b, c);
                            I(P, P.current & 1);
                            b = hi(a, b, c);
                            return null !== b ? b.sibling : null;
                          }
                          I(P, P.current & 1);
                          break;
                        case 19:
                          d = 0 !== (c & b.childLanes);
                          if (0 !== (a.flags & 64)) {
                            if (d) return Ai(a, b, c);
                            b.flags |= 64;
                          }
                          e = b.memoizedState;
                          null !== e && (e.rendering = null, e.tail = null, e.lastEffect = null);
                          I(P, P.current);
                          if (d) break;
                          else return null;
                        case 23:
                        case 24:
                          return b.lanes = 0, mi(a, b, c);
                      }
                      return hi(a, b, c);
                    }
                    else ug = false;
                    b.lanes = 0;
                    switch (b.tag) {
                      case 2:
                        d = b.type;
                        null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2);
                        a = b.pendingProps;
                        e = Ef(b, M.current);
                        tg(b, c);
                        e = Ch(null, b, d, a, e, c);
                        b.flags |= 1;
                        if ("object" === typeof e && null !== e && "function" === typeof e.render && void 0 === e.$$typeof) {
                          b.tag = 1;
                          b.memoizedState = null;
                          b.updateQueue = null;
                          if (Ff(d)) {
                            var f = true;
                            Jf(b);
                          } else f = false;
                          b.memoizedState = null !== e.state && void 0 !== e.state ? e.state : null;
                          xg(b);
                          var g = d.getDerivedStateFromProps;
                          "function" === typeof g && Gg(b, d, g, a);
                          e.updater = Kg;
                          b.stateNode = e;
                          e._reactInternals = b;
                          Og(b, d, a, c);
                          b = qi(null, b, d, true, f, c);
                        } else b.tag = 0, fi(null, b, e, c), b = b.child;
                        return b;
                      case 16:
                        e = b.elementType;
                        a: {
                          null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2);
                          a = b.pendingProps;
                          f = e._init;
                          e = f(e._payload);
                          b.type = e;
                          f = b.tag = hk(e);
                          a = lg(e, a);
                          switch (f) {
                            case 0:
                              b = li(null, b, e, a, c);
                              break a;
                            case 1:
                              b = pi(null, b, e, a, c);
                              break a;
                            case 11:
                              b = gi(null, b, e, a, c);
                              break a;
                            case 14:
                              b = ii(null, b, e, lg(e.type, a), d, c);
                              break a;
                          }
                          throw Error(y2(306, e, ""));
                        }
                        return b;
                      case 0:
                        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), li(a, b, d, e, c);
                      case 1:
                        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), pi(a, b, d, e, c);
                      case 3:
                        ri(b);
                        d = b.updateQueue;
                        if (null === a || null === d) throw Error(y2(282));
                        d = b.pendingProps;
                        e = b.memoizedState;
                        e = null !== e ? e.element : null;
                        yg(a, b);
                        Cg(b, d, null, c);
                        d = b.memoizedState.element;
                        if (d === e) sh(), b = hi(a, b, c);
                        else {
                          e = b.stateNode;
                          if (f = e.hydrate) kh = rf(b.stateNode.containerInfo.firstChild), jh = b, f = lh = true;
                          if (f) {
                            a = e.mutableSourceEagerHydrationData;
                            if (null != a) for (e = 0; e < a.length; e += 2) f = a[e], f._workInProgressVersionPrimary = a[e + 1], th.push(f);
                            c = Zg(b, null, d, c);
                            for (b.child = c; c; ) c.flags = c.flags & -3 | 1024, c = c.sibling;
                          } else fi(a, b, d, c), sh();
                          b = b.child;
                        }
                        return b;
                      case 5:
                        return gh(b), null === a && ph(b), d = b.type, e = b.pendingProps, f = null !== a ? a.memoizedProps : null, g = e.children, nf(d, e) ? g = null : null !== f && nf(d, f) && (b.flags |= 16), oi(a, b), fi(a, b, g, c), b.child;
                      case 6:
                        return null === a && ph(b), null;
                      case 13:
                        return ti(a, b, c);
                      case 4:
                        return eh(b, b.stateNode.containerInfo), d = b.pendingProps, null === a ? b.child = Yg(b, null, d, c) : fi(a, b, d, c), b.child;
                      case 11:
                        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), gi(a, b, d, e, c);
                      case 7:
                        return fi(a, b, b.pendingProps, c), b.child;
                      case 8:
                        return fi(
                          a,
                          b,
                          b.pendingProps.children,
                          c
                        ), b.child;
                      case 12:
                        return fi(a, b, b.pendingProps.children, c), b.child;
                      case 10:
                        a: {
                          d = b.type._context;
                          e = b.pendingProps;
                          g = b.memoizedProps;
                          f = e.value;
                          var h = b.type._context;
                          I(mg, h._currentValue);
                          h._currentValue = f;
                          if (null !== g) if (h = g.value, f = He(h, f) ? 0 : ("function" === typeof d._calculateChangedBits ? d._calculateChangedBits(h, f) : 1073741823) | 0, 0 === f) {
                            if (g.children === e.children && !N.current) {
                              b = hi(a, b, c);
                              break a;
                            }
                          } else for (h = b.child, null !== h && (h.return = b); null !== h; ) {
                            var k = h.dependencies;
                            if (null !== k) {
                              g = h.child;
                              for (var l = k.firstContext; null !== l; ) {
                                if (l.context === d && 0 !== (l.observedBits & f)) {
                                  1 === h.tag && (l = zg(-1, c & -c), l.tag = 2, Ag(h, l));
                                  h.lanes |= c;
                                  l = h.alternate;
                                  null !== l && (l.lanes |= c);
                                  sg(h.return, c);
                                  k.lanes |= c;
                                  break;
                                }
                                l = l.next;
                              }
                            } else g = 10 === h.tag ? h.type === b.type ? null : h.child : h.child;
                            if (null !== g) g.return = h;
                            else for (g = h; null !== g; ) {
                              if (g === b) {
                                g = null;
                                break;
                              }
                              h = g.sibling;
                              if (null !== h) {
                                h.return = g.return;
                                g = h;
                                break;
                              }
                              g = g.return;
                            }
                            h = g;
                          }
                          fi(a, b, e.children, c);
                          b = b.child;
                        }
                        return b;
                      case 9:
                        return e = b.type, f = b.pendingProps, d = f.children, tg(b, c), e = vg(
                          e,
                          f.unstable_observedBits
                        ), d = d(e), b.flags |= 1, fi(a, b, d, c), b.child;
                      case 14:
                        return e = b.type, f = lg(e, b.pendingProps), f = lg(e.type, f), ii(a, b, e, f, d, c);
                      case 15:
                        return ki(a, b, b.type, b.pendingProps, d, c);
                      case 17:
                        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2), b.tag = 1, Ff(d) ? (a = true, Jf(b)) : a = false, tg(b, c), Mg(b, d, e), Og(b, d, e, c), qi(null, b, d, true, a, c);
                      case 19:
                        return Ai(a, b, c);
                      case 23:
                        return mi(a, b, c);
                      case 24:
                        return mi(a, b, c);
                    }
                    throw Error(y2(156, b.tag));
                  };
                  function ik(a, b, c, d) {
                    this.tag = a;
                    this.key = c;
                    this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null;
                    this.index = 0;
                    this.ref = null;
                    this.pendingProps = b;
                    this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null;
                    this.mode = d;
                    this.flags = 0;
                    this.lastEffect = this.firstEffect = this.nextEffect = null;
                    this.childLanes = this.lanes = 0;
                    this.alternate = null;
                  }
                  function nh(a, b, c, d) {
                    return new ik(a, b, c, d);
                  }
                  function ji(a) {
                    a = a.prototype;
                    return !(!a || !a.isReactComponent);
                  }
                  function hk(a) {
                    if ("function" === typeof a) return ji(a) ? 1 : 0;
                    if (void 0 !== a && null !== a) {
                      a = a.$$typeof;
                      if (a === Aa) return 11;
                      if (a === Da) return 14;
                    }
                    return 2;
                  }
                  function Tg(a, b) {
                    var c = a.alternate;
                    null === c ? (c = nh(a.tag, b, a.key, a.mode), c.elementType = a.elementType, c.type = a.type, c.stateNode = a.stateNode, c.alternate = a, a.alternate = c) : (c.pendingProps = b, c.type = a.type, c.flags = 0, c.nextEffect = null, c.firstEffect = null, c.lastEffect = null);
                    c.childLanes = a.childLanes;
                    c.lanes = a.lanes;
                    c.child = a.child;
                    c.memoizedProps = a.memoizedProps;
                    c.memoizedState = a.memoizedState;
                    c.updateQueue = a.updateQueue;
                    b = a.dependencies;
                    c.dependencies = null === b ? null : { lanes: b.lanes, firstContext: b.firstContext };
                    c.sibling = a.sibling;
                    c.index = a.index;
                    c.ref = a.ref;
                    return c;
                  }
                  function Vg(a, b, c, d, e, f) {
                    var g = 2;
                    d = a;
                    if ("function" === typeof a) ji(a) && (g = 1);
                    else if ("string" === typeof a) g = 5;
                    else a: switch (a) {
                      case ua:
                        return Xg(c.children, e, f, b);
                      case Ha:
                        g = 8;
                        e |= 16;
                        break;
                      case wa:
                        g = 8;
                        e |= 1;
                        break;
                      case xa:
                        return a = nh(12, c, b, e | 8), a.elementType = xa, a.type = xa, a.lanes = f, a;
                      case Ba:
                        return a = nh(13, c, b, e), a.type = Ba, a.elementType = Ba, a.lanes = f, a;
                      case Ca:
                        return a = nh(19, c, b, e), a.elementType = Ca, a.lanes = f, a;
                      case Ia:
                        return vi(c, e, f, b);
                      case Ja:
                        return a = nh(24, c, b, e), a.elementType = Ja, a.lanes = f, a;
                      default:
                        if ("object" === typeof a && null !== a) switch (a.$$typeof) {
                          case ya:
                            g = 10;
                            break a;
                          case za:
                            g = 9;
                            break a;
                          case Aa:
                            g = 11;
                            break a;
                          case Da:
                            g = 14;
                            break a;
                          case Ea:
                            g = 16;
                            d = null;
                            break a;
                          case Fa:
                            g = 22;
                            break a;
                        }
                        throw Error(y2(130, null == a ? a : typeof a, ""));
                    }
                    b = nh(g, c, b, e);
                    b.elementType = a;
                    b.type = d;
                    b.lanes = f;
                    return b;
                  }
                  function Xg(a, b, c, d) {
                    a = nh(7, a, d, b);
                    a.lanes = c;
                    return a;
                  }
                  function vi(a, b, c, d) {
                    a = nh(23, a, d, b);
                    a.elementType = Ia;
                    a.lanes = c;
                    return a;
                  }
                  function Ug(a, b, c) {
                    a = nh(6, a, null, b);
                    a.lanes = c;
                    return a;
                  }
                  function Wg(a, b, c) {
                    b = nh(4, null !== a.children ? a.children : [], a.key, b);
                    b.lanes = c;
                    b.stateNode = { containerInfo: a.containerInfo, pendingChildren: null, implementation: a.implementation };
                    return b;
                  }
                  function jk(a, b, c) {
                    this.tag = b;
                    this.containerInfo = a;
                    this.finishedWork = this.pingCache = this.current = this.pendingChildren = null;
                    this.timeoutHandle = -1;
                    this.pendingContext = this.context = null;
                    this.hydrate = c;
                    this.callbackNode = null;
                    this.callbackPriority = 0;
                    this.eventTimes = Zc(0);
                    this.expirationTimes = Zc(-1);
                    this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0;
                    this.entanglements = Zc(0);
                    this.mutableSourceEagerHydrationData = null;
                  }
                  function kk(a, b, c) {
                    var d = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;
                    return { $$typeof: ta, key: null == d ? null : "" + d, children: a, containerInfo: b, implementation: c };
                  }
                  function lk(a, b, c, d) {
                    var e = b.current, f = Hg(), g = Ig(e);
                    a: if (c) {
                      c = c._reactInternals;
                      b: {
                        if (Zb(c) !== c || 1 !== c.tag) throw Error(y2(170));
                        var h = c;
                        do {
                          switch (h.tag) {
                            case 3:
                              h = h.stateNode.context;
                              break b;
                            case 1:
                              if (Ff(h.type)) {
                                h = h.stateNode.__reactInternalMemoizedMergedChildContext;
                                break b;
                              }
                          }
                          h = h.return;
                        } while (null !== h);
                        throw Error(y2(171));
                      }
                      if (1 === c.tag) {
                        var k = c.type;
                        if (Ff(k)) {
                          c = If(c, k, h);
                          break a;
                        }
                      }
                      c = h;
                    } else c = Cf;
                    null === b.context ? b.context = c : b.pendingContext = c;
                    b = zg(f, g);
                    b.payload = { element: a };
                    d = void 0 === d ? null : d;
                    null !== d && (b.callback = d);
                    Ag(e, b);
                    Jg(e, g, f);
                    return g;
                  }
                  function mk(a) {
                    a = a.current;
                    if (!a.child) return null;
                    switch (a.child.tag) {
                      case 5:
                        return a.child.stateNode;
                      default:
                        return a.child.stateNode;
                    }
                  }
                  function nk(a, b) {
                    a = a.memoizedState;
                    if (null !== a && null !== a.dehydrated) {
                      var c = a.retryLane;
                      a.retryLane = 0 !== c && c < b ? c : b;
                    }
                  }
                  function ok(a, b) {
                    nk(a, b);
                    (a = a.alternate) && nk(a, b);
                  }
                  function pk() {
                    return null;
                  }
                  function qk(a, b, c) {
                    var d = null != c && null != c.hydrationOptions && c.hydrationOptions.mutableSources || null;
                    c = new jk(a, b, null != c && true === c.hydrate);
                    b = nh(3, null, null, 2 === b ? 7 : 1 === b ? 3 : 0);
                    c.current = b;
                    b.stateNode = c;
                    xg(b);
                    a[ff] = c.current;
                    cf(8 === a.nodeType ? a.parentNode : a);
                    if (d) for (a = 0; a < d.length; a++) {
                      b = d[a];
                      var e = b._getVersion;
                      e = e(b._source);
                      null == c.mutableSourceEagerHydrationData ? c.mutableSourceEagerHydrationData = [b, e] : c.mutableSourceEagerHydrationData.push(b, e);
                    }
                    this._internalRoot = c;
                  }
                  qk.prototype.render = function(a) {
                    lk(a, this._internalRoot, null, null);
                  };
                  qk.prototype.unmount = function() {
                    var a = this._internalRoot, b = a.containerInfo;
                    lk(null, a, null, function() {
                      b[ff] = null;
                    });
                  };
                  function rk(a) {
                    return !(!a || 1 !== a.nodeType && 9 !== a.nodeType && 11 !== a.nodeType && (8 !== a.nodeType || " react-mount-point-unstable " !== a.nodeValue));
                  }
                  function sk(a, b) {
                    b || (b = a ? 9 === a.nodeType ? a.documentElement : a.firstChild : null, b = !(!b || 1 !== b.nodeType || !b.hasAttribute("data-reactroot")));
                    if (!b) for (var c; c = a.lastChild; ) a.removeChild(c);
                    return new qk(a, 0, b ? { hydrate: true } : void 0);
                  }
                  function tk(a, b, c, d, e) {
                    var f = c._reactRootContainer;
                    if (f) {
                      var g = f._internalRoot;
                      if ("function" === typeof e) {
                        var h = e;
                        e = function() {
                          var a2 = mk(g);
                          h.call(a2);
                        };
                      }
                      lk(b, g, a, e);
                    } else {
                      f = c._reactRootContainer = sk(c, d);
                      g = f._internalRoot;
                      if ("function" === typeof e) {
                        var k = e;
                        e = function() {
                          var a2 = mk(g);
                          k.call(a2);
                        };
                      }
                      Xj(function() {
                        lk(b, g, a, e);
                      });
                    }
                    return mk(g);
                  }
                  ec = function(a) {
                    if (13 === a.tag) {
                      var b = Hg();
                      Jg(a, 4, b);
                      ok(a, 4);
                    }
                  };
                  fc = function(a) {
                    if (13 === a.tag) {
                      var b = Hg();
                      Jg(a, 67108864, b);
                      ok(a, 67108864);
                    }
                  };
                  gc = function(a) {
                    if (13 === a.tag) {
                      var b = Hg(), c = Ig(a);
                      Jg(a, c, b);
                      ok(a, c);
                    }
                  };
                  hc = function(a, b) {
                    return b();
                  };
                  yb = function(a, b, c) {
                    switch (b) {
                      case "input":
                        ab(a, c);
                        b = c.name;
                        if ("radio" === c.type && null != b) {
                          for (c = a; c.parentNode; ) c = c.parentNode;
                          c = c.querySelectorAll("input[name=" + JSON.stringify("" + b) + '][type="radio"]');
                          for (b = 0; b < c.length; b++) {
                            var d = c[b];
                            if (d !== a && d.form === a.form) {
                              var e = Db(d);
                              if (!e) throw Error(y2(90));
                              Wa(d);
                              ab(d, e);
                            }
                          }
                        }
                        break;
                      case "textarea":
                        ib(a, c);
                        break;
                      case "select":
                        b = c.value, null != b && fb(a, !!c.multiple, b, false);
                    }
                  };
                  Gb = Wj;
                  Hb = function(a, b, c, d, e) {
                    var f = X;
                    X |= 4;
                    try {
                      return gg(98, a.bind(null, b, c, d, e));
                    } finally {
                      X = f, 0 === X && (wj(), ig());
                    }
                  };
                  Ib = function() {
                    0 === (X & 49) && (Vj(), Oj());
                  };
                  Jb = function(a, b) {
                    var c = X;
                    X |= 2;
                    try {
                      return a(b);
                    } finally {
                      X = c, 0 === X && (wj(), ig());
                    }
                  };
                  function uk(a, b) {
                    var c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;
                    if (!rk(b)) throw Error(y2(200));
                    return kk(a, b, null, c);
                  }
                  var vk = { Events: [Cb, ue, Db, Eb, Fb, Oj, { current: false }] }, wk = { findFiberByHostInstance: wc, bundleType: 0, version: "17.0.2", rendererPackageName: "react-dom" };
                  var xk = { bundleType: wk.bundleType, version: wk.version, rendererPackageName: wk.rendererPackageName, rendererConfig: wk.rendererConfig, overrideHookState: null, overrideHookStateDeletePath: null, overrideHookStateRenamePath: null, overrideProps: null, overridePropsDeletePath: null, overridePropsRenamePath: null, setSuspenseHandler: null, scheduleUpdate: null, currentDispatcherRef: ra.ReactCurrentDispatcher, findHostInstanceByFiber: function(a) {
                    a = cc(a);
                    return null === a ? null : a.stateNode;
                  }, findFiberByHostInstance: wk.findFiberByHostInstance || pk, findHostInstancesForRefresh: null, scheduleRefresh: null, scheduleRoot: null, setRefreshHandler: null, getCurrentFiber: null };
                  if ("undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {
                    var yk = __REACT_DEVTOOLS_GLOBAL_HOOK__;
                    if (!yk.isDisabled && yk.supportsFiber) try {
                      Lf = yk.inject(xk), Mf = yk;
                    } catch (a) {
                    }
                  }
                  exports3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = vk;
                  exports3.createPortal = uk;
                  exports3.findDOMNode = function(a) {
                    if (null == a) return null;
                    if (1 === a.nodeType) return a;
                    var b = a._reactInternals;
                    if (void 0 === b) {
                      if ("function" === typeof a.render) throw Error(y2(188));
                      throw Error(y2(268, Object.keys(a)));
                    }
                    a = cc(b);
                    a = null === a ? null : a.stateNode;
                    return a;
                  };
                  exports3.flushSync = function(a, b) {
                    var c = X;
                    if (0 !== (c & 48)) return a(b);
                    X |= 1;
                    try {
                      if (a) return gg(99, a.bind(null, b));
                    } finally {
                      X = c, ig();
                    }
                  };
                  exports3.hydrate = function(a, b, c) {
                    if (!rk(b)) throw Error(y2(200));
                    return tk(null, a, b, true, c);
                  };
                  exports3.render = function(a, b, c) {
                    if (!rk(b)) throw Error(y2(200));
                    return tk(null, a, b, false, c);
                  };
                  exports3.unmountComponentAtNode = function(a) {
                    if (!rk(a)) throw Error(y2(40));
                    return a._reactRootContainer ? (Xj(function() {
                      tk(null, null, a, false, function() {
                        a._reactRootContainer = null;
                        a[ff] = null;
                      });
                    }), true) : false;
                  };
                  exports3.unstable_batchedUpdates = Wj;
                  exports3.unstable_createPortal = function(a, b) {
                    return uk(a, b, 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null);
                  };
                  exports3.unstable_renderSubtreeIntoContainer = function(a, b, c, d) {
                    if (!rk(c)) throw Error(y2(200));
                    if (null == a || void 0 === a._reactInternals) throw Error(y2(38));
                    return tk(a, b, c, false, d);
                  };
                  exports3.version = "17.0.2";
                })
              ),
              /***/
              2483: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  function checkDCE() {
                    if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === "undefined" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== "function") {
                      return;
                    }
                    if (false) {
                    }
                    try {
                      __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);
                    } catch (err) {
                      console.error(err);
                    }
                  }
                  if (true) {
                    checkDCE();
                    module3.exports = __webpack_require__3(7045);
                  } else {
                  }
                })
              ),
              /***/
              7887: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__3(5432));
                  var _getPrototypeOf3 = _interopRequireDefault(__webpack_require__3(2132));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__3(7111));
                  var _inherits2 = _interopRequireDefault(__webpack_require__3(5075));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _react = _interopRequireDefault(__webpack_require__3(7810));
                  var _TemplateContainer = _interopRequireDefault(__webpack_require__3(9810));
                  var MoveContainer = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(MoveContainer2, _React$Component);
                    function MoveContainer2() {
                      var _getPrototypeOf2;
                      var _this;
                      (0, _classCallCheck2["default"])(this, MoveContainer2);
                      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                        args[_key] = arguments[_key];
                      }
                      _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(MoveContainer2)).call.apply(_getPrototypeOf2, [this].concat(args)));
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_templateContainer", void 0);
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_templateContainerSetter", function(cmp) {
                        if (cmp) _this._templateContainer = cmp;
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_el", void 0);
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_elSetter", function(el) {
                        if (el) _this._el = el;
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_dragHandleProps", _this.props.makeDragHandleProps(function() {
                        return _this.props.y;
                      }));
                      return _this;
                    }
                    (0, _createClass2["default"])(MoveContainer2, [{
                      key: "getDOMNode",
                      value: function getDOMNode() {
                        return this._el;
                      }
                    }, {
                      key: "getTemplate",
                      value: function getTemplate() {
                        return this._templateContainer.getTemplate();
                      }
                    }, {
                      key: "shouldComponentUpdate",
                      value: function shouldComponentUpdate(nextProps) {
                        return this.props.anySelected !== nextProps.anySelected || this.props.itemSelected !== nextProps.itemSelected || this.props.item !== nextProps.item || this.props.template !== nextProps.template || this.props.y !== nextProps.y || this.props.height !== nextProps.height || this.props.zIndex !== nextProps.zIndex || this.props.commonProps !== nextProps.commonProps;
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        var _this$props = this.props, item = _this$props.item, y2 = _this$props.y, padding = _this$props.padding, itemSelected = _this$props.itemSelected, anySelected = _this$props.anySelected, height = _this$props.height, zIndex = _this$props.zIndex, template = _this$props.template, commonProps = _this$props.commonProps;
                        return _react["default"].createElement("div", {
                          ref: this._elSetter,
                          style: {
                            position: y2 == null ? "relative" : "absolute",
                            boxSizing: "border-box",
                            left: "0px",
                            right: "0px",
                            top: y2 == null ? "0px" : "".concat(y2, "px"),
                            marginBottom: "".concat(padding, "px"),
                            height: y2 == null ? "auto" : "".concat(anySelected * (height.drag - height.natural) + height.natural, "px"),
                            zIndex
                          }
                        }, _react["default"].createElement(_TemplateContainer["default"], {
                          ref: this._templateContainerSetter,
                          item,
                          template,
                          itemSelected,
                          anySelected,
                          dragHandleProps: this._dragHandleProps,
                          commonProps
                        }));
                      }
                    }]);
                    return MoveContainer2;
                  })(_react["default"].Component);
                  exports3["default"] = MoveContainer;
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              8647: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__3(5432));
                  var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__3(2132));
                  var _inherits2 = _interopRequireDefault(__webpack_require__3(5075));
                  var _react = _interopRequireDefault(__webpack_require__3(7810));
                  var OnUpdate = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(OnUpdate2, _React$Component);
                    function OnUpdate2() {
                      (0, _classCallCheck2["default"])(this, OnUpdate2);
                      return (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(OnUpdate2).apply(this, arguments));
                    }
                    (0, _createClass2["default"])(OnUpdate2, [{
                      key: "componentDidUpdate",
                      value: function componentDidUpdate() {
                        this.props.cb();
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        return null;
                      }
                    }]);
                    return OnUpdate2;
                  })(_react["default"].Component);
                  exports3["default"] = OnUpdate;
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              9810: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__3(5432));
                  var _getPrototypeOf3 = _interopRequireDefault(__webpack_require__3(2132));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__3(7111));
                  var _inherits2 = _interopRequireDefault(__webpack_require__3(5075));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _react = _interopRequireDefault(__webpack_require__3(7810));
                  var TemplateContainer = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(TemplateContainer2, _React$Component);
                    function TemplateContainer2() {
                      var _getPrototypeOf2;
                      var _this;
                      (0, _classCallCheck2["default"])(this, TemplateContainer2);
                      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                        args[_key] = arguments[_key];
                      }
                      _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(TemplateContainer2)).call.apply(_getPrototypeOf2, [this].concat(args)));
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_template", void 0);
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_templateSetter", function(cmp) {
                        if (cmp) _this._template = cmp;
                      });
                      return _this;
                    }
                    (0, _createClass2["default"])(TemplateContainer2, [{
                      key: "shouldComponentUpdate",
                      value: function shouldComponentUpdate(nextProps) {
                        return this.props.anySelected !== nextProps.anySelected || this.props.itemSelected !== nextProps.itemSelected || this.props.item !== nextProps.item || this.props.template !== nextProps.template || this.props.commonProps !== nextProps.commonProps;
                      }
                    }, {
                      key: "getTemplate",
                      value: function getTemplate() {
                        return this._template;
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        var _this$props = this.props, item = _this$props.item, itemSelected = _this$props.itemSelected, anySelected = _this$props.anySelected, dragHandleProps = _this$props.dragHandleProps, commonProps = _this$props.commonProps;
                        var Template = this.props.template;
                        return _react["default"].createElement(Template, {
                          ref: this._templateSetter,
                          item,
                          itemSelected,
                          anySelected,
                          dragHandleProps,
                          commonProps
                        });
                      }
                    }]);
                    return TemplateContainer2;
                  })(_react["default"].Component);
                  exports3["default"] = TemplateContainer;
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              6931: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireWildcard = __webpack_require__3(9485);
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _objectSpread2 = _interopRequireDefault(__webpack_require__3(2595));
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__3(5432));
                  var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__3(2132));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__3(7111));
                  var _inherits2 = _interopRequireDefault(__webpack_require__3(5075));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var React = _interopRequireWildcard(__webpack_require__3(7810));
                  var _propTypes = _interopRequireDefault(__webpack_require__3(5826));
                  var _reactMotion = __webpack_require__3(2591);
                  var _immutabilityHelper = _interopRequireDefault(__webpack_require__3(2996));
                  var _reactMultiRef = _interopRequireDefault(__webpack_require__3(2608));
                  var _OnUpdate = _interopRequireDefault(__webpack_require__3(8647));
                  var _MoveContainer = _interopRequireDefault(__webpack_require__3(7887));
                  var DEFAULT_HEIGHT = {
                    natural: 200,
                    drag: 30
                  };
                  function getScrollSpeed(distance, speed, size) {
                    return Math.round(speed - speed / size * distance);
                  }
                  var DraggableList = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(DraggableList2, _React$Component);
                    function DraggableList2(props) {
                      var _this;
                      (0, _classCallCheck2["default"])(this, DraggableList2);
                      _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(DraggableList2).call(this, props));
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_itemRefs", new _reactMultiRef["default"]());
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_autoScrollerTimer", void 0);
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_listRef", React.createRef());
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_handleTouchMove", function(e) {
                        e.preventDefault();
                        _this._handleMouseMove(e.touches[0]);
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_handleMouseMove", function(_ref) {
                        var pageY = _ref.pageY, clientY = _ref.clientY;
                        var _this$props = _this.props, list = _this$props.list, autoScrollMaxSpeed = _this$props.autoScrollMaxSpeed, autoScrollRegionSize = _this$props.autoScrollRegionSize;
                        var _this$state = _this.state, dragging = _this$state.dragging, lastDrag = _this$state.lastDrag;
                        if (!dragging || !lastDrag) return;
                        var containerEl = _this._getContainer();
                        var dragVisualIndex = _this._getDragVisualIndex();
                        var keyFn = _this._getKeyFn();
                        clearInterval(_this._autoScrollerTimer);
                        if (dragVisualIndex !== 0 && dragVisualIndex !== list.length - 1) {
                          var scrollSpeed = 0;
                          var containerRect = containerEl && containerEl !== document.body && containerEl.getBoundingClientRect ? containerEl.getBoundingClientRect() : {
                            top: 0,
                            bottom: Infinity
                          };
                          var top = Math.max(0, containerRect.top);
                          var distanceFromTop = clientY - top;
                          if (distanceFromTop > 0 && distanceFromTop < autoScrollRegionSize) {
                            scrollSpeed = -1 * getScrollSpeed(distanceFromTop, autoScrollMaxSpeed, autoScrollRegionSize);
                          } else {
                            var bottom = Math.min(window.innerHeight, containerRect.bottom);
                            var distanceFromBottom = bottom - clientY;
                            if (distanceFromBottom > 0 && distanceFromBottom < autoScrollRegionSize) {
                              scrollSpeed = getScrollSpeed(distanceFromBottom, autoScrollMaxSpeed, autoScrollRegionSize);
                            }
                          }
                          if (scrollSpeed !== 0) {
                            _this._scrollContainer(scrollSpeed);
                            _this._autoScrollerTimer = setTimeout(function() {
                              _this._handleMouseMove({
                                pageY: pageY + (containerEl === document.body ? scrollSpeed : 0),
                                clientY
                              });
                            }, 16);
                          }
                        }
                        var containerScroll = !containerEl || containerEl === document.body ? 0 : containerEl.scrollTop;
                        var mouseY = pageY - lastDrag.mouseOffset + containerScroll;
                        if (_this.props.constrainDrag) {
                          var visualList = _this._getVisualListDuringDrag();
                          mouseY = Math.max(mouseY, _this._getDistanceFromTopDuringDrag(lastDrag, keyFn(visualList[0]), visualList));
                          mouseY = Math.min(mouseY, _this._getDistanceFromTopDuringDrag(lastDrag, keyFn(visualList[visualList.length - 1]), visualList));
                        }
                        _this.setState({
                          lastDrag: (0, _objectSpread2["default"])({}, lastDrag, {
                            mouseY
                          })
                        });
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_handleMouseUp", function() {
                        clearInterval(_this._autoScrollerTimer);
                        window.removeEventListener("mouseup", _this._handleMouseUp);
                        window.removeEventListener("touchend", _this._handleMouseUp);
                        window.removeEventListener("touchmove", _this._handleTouchMove);
                        window.removeEventListener("mousemove", _this._handleMouseMove);
                        if (document.documentElement) document.documentElement.style.cursor = "";
                        _this._lastScrollDelta = 0;
                        var _this$props2 = _this.props, list = _this$props2.list, onMoveEnd = _this$props2.onMoveEnd;
                        var _this$state2 = _this.state, dragging = _this$state2.dragging, lastDrag = _this$state2.lastDrag;
                        if (dragging && lastDrag && onMoveEnd) {
                          var dragIndex = _this._getDragListIndex();
                          var _newIndex = _this._getDragVisualIndex();
                          if (dragIndex !== _newIndex) {
                            var _newList = _this._getVisualListDuringDrag();
                            onMoveEnd(_newList, list[dragIndex], dragIndex, _newIndex);
                          }
                          _this.setState({
                            dragging: false
                          });
                        }
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_lastScrollDelta", 0);
                      _this.state = {
                        useAbsolutePositioning: false,
                        dragging: false,
                        lastDrag: null,
                        heights: null
                      };
                      return _this;
                    }
                    (0, _createClass2["default"])(DraggableList2, [{
                      key: "getItemInstance",
                      value: function getItemInstance(key) {
                        var ref = this._itemRefs.map.get(key);
                        if (!ref) throw new Error("key not found");
                        return ref.getTemplate();
                      }
                    }, {
                      key: "componentWillUnmount",
                      value: function componentWillUnmount() {
                        this._handleMouseUp();
                      }
                    }, {
                      key: "_handleTouchStart",
                      value: function _handleTouchStart(itemKey, pressY, event) {
                        event.stopPropagation();
                        this._handleStartDrag(itemKey, pressY, event.touches[0].pageY);
                      }
                    }, {
                      key: "_handleMouseDown",
                      value: function _handleMouseDown(itemKey, pressY, event) {
                        event.preventDefault();
                        this._handleStartDrag(itemKey, pressY, event.pageY);
                      }
                    }, {
                      key: "_handleStartDrag",
                      value: function _handleStartDrag(itemKey, pressY, pageY) {
                        var _this2 = this;
                        if (document.documentElement) document.documentElement.style.cursor = "move";
                        window.addEventListener("mouseup", this._handleMouseUp);
                        window.addEventListener("touchend", this._handleMouseUp);
                        window.addEventListener("touchmove", this._handleTouchMove);
                        window.addEventListener("mousemove", this._handleMouseMove);
                        {
                          var listEl = this._listRef.current;
                          if (!listEl) throw new Error("Should not happen");
                          if (listEl.contains && document.activeElement && listEl.contains(document.activeElement)) {
                            document.activeElement.blur();
                          }
                        }
                        var keyFn = this._getKeyFn();
                        var newHeights = null;
                        if (this.state.heights == null) {
                          var _newHeights = /* @__PURE__ */ Object.create(null);
                          this.props.list.forEach(function(item) {
                            var key = keyFn(item);
                            var containerRef = _this2._itemRefs.map.get(key);
                            var refEl = containerRef ? containerRef.getDOMNode().firstElementChild : null;
                            var ref = containerRef ? containerRef.getTemplate() : null;
                            var natural = refEl instanceof HTMLElement ? refEl.offsetHeight : DEFAULT_HEIGHT.natural;
                            var drag = ref && typeof ref.getDragHeight === "function" && ref.getDragHeight() || natural;
                            _newHeights[key] = {
                              natural,
                              drag
                            };
                          });
                          newHeights = _newHeights;
                        }
                        var afterHeights = function afterHeights2() {
                          var itemIndex = _this2.props.list.map(keyFn).indexOf(itemKey);
                          var startY = pressY == null ? _this2._getDistance(0, itemIndex, false) : pressY;
                          var containerEl = _this2._getContainer();
                          var containerScroll = !containerEl || containerEl === document.body ? 0 : containerEl.scrollTop;
                          _this2.setState({
                            useAbsolutePositioning: true,
                            dragging: true,
                            lastDrag: {
                              itemKey,
                              startY,
                              mouseY: startY,
                              mouseOffset: pageY - startY + containerScroll
                            }
                          });
                        };
                        if (newHeights) {
                          this.setState({
                            heights: newHeights
                          }, afterHeights);
                        } else {
                          afterHeights();
                        }
                      }
                    }, {
                      key: "_scrollContainer",
                      value: function _scrollContainer(delta) {
                        var containerEl = this._getContainer();
                        if (!containerEl) return;
                        if (window.scrollBy && containerEl === document.body) {
                          window.scrollBy(0, delta);
                        } else {
                          containerEl.scrollTop += delta;
                        }
                      }
                    }, {
                      key: "_adjustScrollAtEnd",
                      value: function _adjustScrollAtEnd(delta) {
                        var frameDelta = Math.round(delta - this._lastScrollDelta);
                        this._scrollContainer(frameDelta);
                        this._lastScrollDelta += frameDelta;
                      }
                    }, {
                      key: "_getDragListIndex",
                      value: function _getDragListIndex() {
                        var list = this.props.list;
                        var lastDrag = this.state.lastDrag;
                        if (!lastDrag) {
                          throw new Error("No drag happened");
                        }
                        var keyFn = this._getKeyFn();
                        return DraggableList2._getIndexOfItemWithKey(keyFn, list, lastDrag.itemKey);
                      }
                    }, {
                      key: "_getDragVisualIndex",
                      value: function _getDragVisualIndex() {
                        var _this$props3 = this.props, list = _this$props3.list, padding = _this$props3.padding;
                        var _this$state3 = this.state, dragging = _this$state3.dragging, lastDrag = _this$state3.lastDrag;
                        if (!dragging || !lastDrag) throw new Error("Should not happen");
                        var dragListIndex = this._getDragListIndex();
                        var mouseY = lastDrag.mouseY, startY = lastDrag.startY;
                        var movementFromNatural = mouseY - startY;
                        var direction = movementFromNatural > 0 ? 1 : movementFromNatural < 0 ? -1 : 0;
                        var newIndex = dragListIndex;
                        if (direction !== 0) {
                          var keyFn = this._getKeyFn();
                          var reach = Math.abs(movementFromNatural);
                          for (var i2 = dragListIndex + direction; i2 < list.length && i2 >= 0; i2 += direction) {
                            var iDragHeight = this._getItemHeight(keyFn(list[i2])).drag;
                            if (reach < iDragHeight / 2 + padding) break;
                            reach -= iDragHeight + padding;
                            newIndex = i2;
                          }
                        }
                        return newIndex;
                      }
                    }, {
                      key: "_getVisualListDuringDrag",
                      value: function _getVisualListDuringDrag() {
                        var list = this.props.list;
                        var _this$state4 = this.state, dragging = _this$state4.dragging, lastDrag = _this$state4.lastDrag;
                        if (!dragging || !lastDrag) throw new Error("Should not happen: _getVisualListDuringDrag called outside of drag");
                        var dragListIndex = this._getDragListIndex();
                        var dragVisualIndex = this._getDragVisualIndex();
                        return (0, _immutabilityHelper["default"])(list, {
                          $splice: [[dragListIndex, 1], [dragVisualIndex, 0, list[dragListIndex]]]
                        });
                      }
                    }, {
                      key: "_getItemHeight",
                      value: function _getItemHeight(key) {
                        return this.state.heights != null && key in this.state.heights ? this.state.heights[key] : DEFAULT_HEIGHT;
                      }
                      // Get the distance between the tops of two items in the list.
                      // Does not consider how the dragged item may be rendered in a different position
                      // unless you pass in the re-ordered list as a parameter.
                    }, {
                      key: "_getDistance",
                      value: function _getDistance(start, end, dragging) {
                        var list = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : this.props.list;
                        if (end < start) {
                          return -this._getDistance(end, start, dragging, list);
                        }
                        var padding = this.props.padding;
                        var keyFn = this._getKeyFn();
                        var distance = 0;
                        for (var i2 = start; i2 < end; i2++) {
                          var height = this._getItemHeight(keyFn(list[i2]));
                          distance += (dragging ? height.drag : height.natural) + padding;
                        }
                        return distance;
                      }
                    }, {
                      key: "_getDistanceFromTopDuringDrag",
                      value: function _getDistanceFromTopDuringDrag(lastDrag, itemKey, visualList) {
                        var keyFn = this._getKeyFn();
                        var index = DraggableList2._getIndexOfItemWithKey(keyFn, visualList, itemKey);
                        var dragListIndex = this._getDragListIndex();
                        var dragVisualIndex = DraggableList2._getIndexOfItemWithKey(keyFn, visualList, lastDrag.itemKey);
                        var offset = 0;
                        if (dragVisualIndex < dragListIndex) {
                          var dragItemHeight = this._getItemHeight(lastDrag.itemKey);
                          var newCenterHeight = this._getItemHeight(keyFn(visualList[dragListIndex]));
                          offset = dragItemHeight.drag - newCenterHeight.drag;
                        }
                        return lastDrag.startY + offset + this._getDistance(dragListIndex, index, true, visualList);
                      }
                    }, {
                      key: "_getContainer",
                      value: function _getContainer() {
                        var container = this.props.container;
                        return container ? container() : null;
                      }
                    }, {
                      key: "_getKeyFn",
                      value: function _getKeyFn() {
                        return DraggableList2._getKeyFn(this.props.itemKey);
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        var _this3 = this;
                        var _this$props4 = this.props, list = _this$props4.list, springConfig = _this$props4.springConfig, container = _this$props4.container, padding = _this$props4.padding, template = _this$props4.template, unsetZIndex = _this$props4.unsetZIndex, commonProps = _this$props4.commonProps;
                        var _this$state5 = this.state, dragging = _this$state5.dragging, lastDrag = _this$state5.lastDrag, useAbsolutePositioning = _this$state5.useAbsolutePositioning;
                        var keyFn = this._getKeyFn();
                        var anySelected = (0, _reactMotion.spring)(dragging ? 1 : 0, springConfig);
                        var visualList = dragging ? this._getVisualListDuringDrag() : list;
                        var children = list.map(function(item, i2) {
                          var key = keyFn(item);
                          var selectedStyle = dragging && lastDrag && lastDrag.itemKey === key ? {
                            itemSelected: (0, _reactMotion.spring)(1, springConfig),
                            y: lastDrag.mouseY
                          } : {
                            itemSelected: (0, _reactMotion.spring)(0, springConfig),
                            y: (useAbsolutePositioning ? _reactMotion.spring : function(x2, ignored) {
                              return x2;
                            })(dragging && lastDrag ? _this3._getDistanceFromTopDuringDrag(lastDrag, key, visualList) : _this3._getDistance(0, i2, false), springConfig)
                          };
                          var style = (0, _objectSpread2["default"])({
                            anySelected
                          }, selectedStyle);
                          var makeDragHandleProps = function makeDragHandleProps2(getY) {
                            return {
                              onMouseDown: function onMouseDown(e) {
                                return _this3._handleMouseDown(key, getY(), e);
                              },
                              onTouchStart: function onTouchStart(e) {
                                return _this3._handleTouchStart(key, getY(), e);
                              }
                            };
                          };
                          var height = _this3._getItemHeight(key);
                          return React.createElement(_reactMotion.Motion, {
                            style,
                            key,
                            children: function children2(_ref2) {
                              var itemSelected = _ref2.itemSelected, anySelected2 = _ref2.anySelected, y2 = _ref2.y;
                              return React.createElement(_MoveContainer["default"], {
                                ref: _this3._itemRefs.ref(key),
                                y: useAbsolutePositioning ? y2 : null,
                                template,
                                padding,
                                item,
                                itemSelected,
                                anySelected: anySelected2,
                                height,
                                zIndex: unsetZIndex && !useAbsolutePositioning ? "auto" : lastDrag && lastDrag.itemKey === key ? list.length : i2,
                                makeDragHandleProps,
                                commonProps
                              });
                            }
                          });
                        });
                        var adjustScroll = 0;
                        if (!dragging && lastDrag && useAbsolutePositioning) {
                          var dragListIndex = this._getDragListIndex();
                          adjustScroll = (0, _reactMotion.spring)(this._getDistance(0, dragListIndex, false) - lastDrag.mouseY, springConfig);
                        }
                        var heightReserverHeight = 0;
                        var heightReserverMarginBottom = 0;
                        if (list.length) {
                          heightReserverMarginBottom = padding;
                          if (useAbsolutePositioning) {
                            heightReserverHeight = this._getDistance(0, list.length, false) - padding;
                          }
                        }
                        return React.createElement("div", {
                          style: {
                            position: "relative"
                          },
                          ref: this._listRef
                        }, React.createElement(_reactMotion.Motion, {
                          style: {
                            adjustScroll,
                            anySelected
                          },
                          onRest: function onRest() {
                            if (!dragging) {
                              _this3.setState({
                                heights: null,
                                useAbsolutePositioning: false
                              });
                            }
                          },
                          children: function children2(_ref3) {
                            var adjustScroll2 = _ref3.adjustScroll;
                            return React.createElement("div", {
                              style: {
                                display: useAbsolutePositioning ? "block" : "none",
                                height: "".concat(heightReserverHeight, "px"),
                                marginBottom: "".concat(heightReserverMarginBottom, "px")
                              }
                            }, container && React.createElement(_OnUpdate["default"], {
                              cb: function cb() {
                                if (!dragging && lastDrag && useAbsolutePositioning) {
                                  _this3._adjustScrollAtEnd(adjustScroll2);
                                }
                              }
                            }));
                          }
                        }), children);
                      }
                    }], [{
                      key: "getDerivedStateFromProps",
                      value: function getDerivedStateFromProps(newProps, state) {
                        var list = newProps.list;
                        var lastDrag = state.lastDrag;
                        if (lastDrag) {
                          var keyFn = DraggableList2._getKeyFn(newProps.itemKey);
                          try {
                            DraggableList2._getIndexOfItemWithKey(keyFn, list, lastDrag.itemKey);
                          } catch (err) {
                            return {
                              dragging: false,
                              lastDrag: null
                            };
                          }
                        }
                        return null;
                      }
                    }, {
                      key: "_getIndexOfItemWithKey",
                      value: function _getIndexOfItemWithKey(keyFn, list, itemKey) {
                        for (var i2 = 0, len = list.length; i2 < len; i2++) {
                          if (keyFn(list[i2]) === itemKey) {
                            return i2;
                          }
                        }
                        throw new Error("Failed to find drag index");
                      }
                    }, {
                      key: "_getKeyFn",
                      value: function _getKeyFn(itemKey) {
                        return typeof itemKey === "function" ? itemKey : function(x2) {
                          return x2[itemKey];
                        };
                      }
                    }]);
                    return DraggableList2;
                  })(React.Component);
                  exports3["default"] = DraggableList;
                  (0, _defineProperty2["default"])(DraggableList, "propTypes", {
                    itemKey: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].func]).isRequired,
                    template: _propTypes["default"].func,
                    list: _propTypes["default"].array.isRequired,
                    onMoveEnd: _propTypes["default"].func,
                    container: _propTypes["default"].func,
                    springConfig: _propTypes["default"].object,
                    constrainDrag: _propTypes["default"].bool,
                    padding: _propTypes["default"].number,
                    unsetZIndex: _propTypes["default"].bool,
                    autoScrollMaxSpeed: _propTypes["default"].number.isRequired,
                    autoScrollRegionSize: _propTypes["default"].number.isRequired,
                    commonProps: _propTypes["default"].object
                  });
                  (0, _defineProperty2["default"])(DraggableList, "defaultProps", {
                    springConfig: {
                      stiffness: 300,
                      damping: 50
                    },
                    padding: 10,
                    unsetZIndex: false,
                    constrainDrag: false,
                    autoScrollMaxSpeed: 15,
                    autoScrollRegionSize: 30
                  });
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              2793: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  exports3.__esModule = true;
                  var _extends = Object.assign || function(target) {
                    for (var i2 = 1; i2 < arguments.length; i2++) {
                      var source = arguments[i2];
                      for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) {
                          target[key] = source[key];
                        }
                      }
                    }
                    return target;
                  };
                  var _createClass = /* @__PURE__ */ (function() {
                    function defineProperties(target, props) {
                      for (var i2 = 0; i2 < props.length; i2++) {
                        var descriptor = props[i2];
                        descriptor.enumerable = descriptor.enumerable || false;
                        descriptor.configurable = true;
                        if ("value" in descriptor) descriptor.writable = true;
                        Object.defineProperty(target, descriptor.key, descriptor);
                      }
                    }
                    return function(Constructor, protoProps, staticProps) {
                      if (protoProps) defineProperties(Constructor.prototype, protoProps);
                      if (staticProps) defineProperties(Constructor, staticProps);
                      return Constructor;
                    };
                  })();
                  function _interopRequireDefault(obj2) {
                    return obj2 && obj2.__esModule ? obj2 : { "default": obj2 };
                  }
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  function _inherits(subClass, superClass) {
                    if (typeof superClass !== "function" && superClass !== null) {
                      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
                    }
                    subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });
                    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
                  }
                  var _mapToZero = __webpack_require__3(5042);
                  var _mapToZero2 = _interopRequireDefault(_mapToZero);
                  var _stripStyle = __webpack_require__3(6148);
                  var _stripStyle2 = _interopRequireDefault(_stripStyle);
                  var _stepper3 = __webpack_require__3(1390);
                  var _stepper4 = _interopRequireDefault(_stepper3);
                  var _performanceNow = __webpack_require__3(1453);
                  var _performanceNow2 = _interopRequireDefault(_performanceNow);
                  var _raf = __webpack_require__3(1968);
                  var _raf2 = _interopRequireDefault(_raf);
                  var _shouldStopAnimation = __webpack_require__3(9988);
                  var _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);
                  var _react = __webpack_require__3(7810);
                  var _react2 = _interopRequireDefault(_react);
                  var _propTypes = __webpack_require__3(5826);
                  var _propTypes2 = _interopRequireDefault(_propTypes);
                  var msPerFrame = 1e3 / 60;
                  var Motion = (function(_React$Component) {
                    _inherits(Motion2, _React$Component);
                    _createClass(Motion2, null, [{
                      key: "propTypes",
                      value: {
                        // TOOD: warn against putting a config in here
                        defaultStyle: _propTypes2["default"].objectOf(_propTypes2["default"].number),
                        style: _propTypes2["default"].objectOf(_propTypes2["default"].oneOfType([_propTypes2["default"].number, _propTypes2["default"].object])).isRequired,
                        children: _propTypes2["default"].func.isRequired,
                        onRest: _propTypes2["default"].func
                      },
                      enumerable: true
                    }]);
                    function Motion2(props) {
                      var _this = this;
                      _classCallCheck(this, Motion2);
                      _React$Component.call(this, props);
                      this.wasAnimating = false;
                      this.animationID = null;
                      this.prevTime = 0;
                      this.accumulatedTime = 0;
                      this.unreadPropStyle = null;
                      this.clearUnreadPropStyle = function(destStyle) {
                        var dirty = false;
                        var _state = _this.state;
                        var currentStyle = _state.currentStyle;
                        var currentVelocity = _state.currentVelocity;
                        var lastIdealStyle = _state.lastIdealStyle;
                        var lastIdealVelocity = _state.lastIdealVelocity;
                        for (var key in destStyle) {
                          if (!Object.prototype.hasOwnProperty.call(destStyle, key)) {
                            continue;
                          }
                          var styleValue = destStyle[key];
                          if (typeof styleValue === "number") {
                            if (!dirty) {
                              dirty = true;
                              currentStyle = _extends({}, currentStyle);
                              currentVelocity = _extends({}, currentVelocity);
                              lastIdealStyle = _extends({}, lastIdealStyle);
                              lastIdealVelocity = _extends({}, lastIdealVelocity);
                            }
                            currentStyle[key] = styleValue;
                            currentVelocity[key] = 0;
                            lastIdealStyle[key] = styleValue;
                            lastIdealVelocity[key] = 0;
                          }
                        }
                        if (dirty) {
                          _this.setState({ currentStyle, currentVelocity, lastIdealStyle, lastIdealVelocity });
                        }
                      };
                      this.startAnimationIfNecessary = function() {
                        _this.animationID = _raf2["default"](function(timestamp) {
                          var propsStyle = _this.props.style;
                          if (_shouldStopAnimation2["default"](_this.state.currentStyle, propsStyle, _this.state.currentVelocity)) {
                            if (_this.wasAnimating && _this.props.onRest) {
                              _this.props.onRest();
                            }
                            _this.animationID = null;
                            _this.wasAnimating = false;
                            _this.accumulatedTime = 0;
                            return;
                          }
                          _this.wasAnimating = true;
                          var currentTime = timestamp || _performanceNow2["default"]();
                          var timeDelta = currentTime - _this.prevTime;
                          _this.prevTime = currentTime;
                          _this.accumulatedTime = _this.accumulatedTime + timeDelta;
                          if (_this.accumulatedTime > msPerFrame * 10) {
                            _this.accumulatedTime = 0;
                          }
                          if (_this.accumulatedTime === 0) {
                            _this.animationID = null;
                            _this.startAnimationIfNecessary();
                            return;
                          }
                          var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;
                          var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);
                          var newLastIdealStyle = {};
                          var newLastIdealVelocity = {};
                          var newCurrentStyle = {};
                          var newCurrentVelocity = {};
                          for (var key in propsStyle) {
                            if (!Object.prototype.hasOwnProperty.call(propsStyle, key)) {
                              continue;
                            }
                            var styleValue = propsStyle[key];
                            if (typeof styleValue === "number") {
                              newCurrentStyle[key] = styleValue;
                              newCurrentVelocity[key] = 0;
                              newLastIdealStyle[key] = styleValue;
                              newLastIdealVelocity[key] = 0;
                            } else {
                              var newLastIdealStyleValue = _this.state.lastIdealStyle[key];
                              var newLastIdealVelocityValue = _this.state.lastIdealVelocity[key];
                              for (var i2 = 0; i2 < framesToCatchUp; i2++) {
                                var _stepper = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                newLastIdealStyleValue = _stepper[0];
                                newLastIdealVelocityValue = _stepper[1];
                              }
                              var _stepper2 = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                              var nextIdealX = _stepper2[0];
                              var nextIdealV = _stepper2[1];
                              newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;
                              newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;
                              newLastIdealStyle[key] = newLastIdealStyleValue;
                              newLastIdealVelocity[key] = newLastIdealVelocityValue;
                            }
                          }
                          _this.animationID = null;
                          _this.accumulatedTime -= framesToCatchUp * msPerFrame;
                          _this.setState({
                            currentStyle: newCurrentStyle,
                            currentVelocity: newCurrentVelocity,
                            lastIdealStyle: newLastIdealStyle,
                            lastIdealVelocity: newLastIdealVelocity
                          });
                          _this.unreadPropStyle = null;
                          _this.startAnimationIfNecessary();
                        });
                      };
                      this.state = this.defaultState();
                    }
                    Motion2.prototype.defaultState = function defaultState() {
                      var _props = this.props;
                      var defaultStyle = _props.defaultStyle;
                      var style = _props.style;
                      var currentStyle = defaultStyle || _stripStyle2["default"](style);
                      var currentVelocity = _mapToZero2["default"](currentStyle);
                      return {
                        currentStyle,
                        currentVelocity,
                        lastIdealStyle: currentStyle,
                        lastIdealVelocity: currentVelocity
                      };
                    };
                    Motion2.prototype.componentDidMount = function componentDidMount() {
                      this.prevTime = _performanceNow2["default"]();
                      this.startAnimationIfNecessary();
                    };
                    Motion2.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {
                      if (this.unreadPropStyle != null) {
                        this.clearUnreadPropStyle(this.unreadPropStyle);
                      }
                      this.unreadPropStyle = props.style;
                      if (this.animationID == null) {
                        this.prevTime = _performanceNow2["default"]();
                        this.startAnimationIfNecessary();
                      }
                    };
                    Motion2.prototype.componentWillUnmount = function componentWillUnmount() {
                      if (this.animationID != null) {
                        _raf2["default"].cancel(this.animationID);
                        this.animationID = null;
                      }
                    };
                    Motion2.prototype.render = function render() {
                      var renderedChildren = this.props.children(this.state.currentStyle);
                      return renderedChildren && _react2["default"].Children.only(renderedChildren);
                    };
                    return Motion2;
                  })(_react2["default"].Component);
                  exports3["default"] = Motion;
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              9959: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  exports3.__esModule = true;
                  var _extends = Object.assign || function(target) {
                    for (var i2 = 1; i2 < arguments.length; i2++) {
                      var source = arguments[i2];
                      for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) {
                          target[key] = source[key];
                        }
                      }
                    }
                    return target;
                  };
                  var _createClass = /* @__PURE__ */ (function() {
                    function defineProperties(target, props) {
                      for (var i2 = 0; i2 < props.length; i2++) {
                        var descriptor = props[i2];
                        descriptor.enumerable = descriptor.enumerable || false;
                        descriptor.configurable = true;
                        if ("value" in descriptor) descriptor.writable = true;
                        Object.defineProperty(target, descriptor.key, descriptor);
                      }
                    }
                    return function(Constructor, protoProps, staticProps) {
                      if (protoProps) defineProperties(Constructor.prototype, protoProps);
                      if (staticProps) defineProperties(Constructor, staticProps);
                      return Constructor;
                    };
                  })();
                  function _interopRequireDefault(obj2) {
                    return obj2 && obj2.__esModule ? obj2 : { "default": obj2 };
                  }
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  function _inherits(subClass, superClass) {
                    if (typeof superClass !== "function" && superClass !== null) {
                      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
                    }
                    subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });
                    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
                  }
                  var _mapToZero = __webpack_require__3(5042);
                  var _mapToZero2 = _interopRequireDefault(_mapToZero);
                  var _stripStyle = __webpack_require__3(6148);
                  var _stripStyle2 = _interopRequireDefault(_stripStyle);
                  var _stepper3 = __webpack_require__3(1390);
                  var _stepper4 = _interopRequireDefault(_stepper3);
                  var _performanceNow = __webpack_require__3(1453);
                  var _performanceNow2 = _interopRequireDefault(_performanceNow);
                  var _raf = __webpack_require__3(1968);
                  var _raf2 = _interopRequireDefault(_raf);
                  var _shouldStopAnimation = __webpack_require__3(9988);
                  var _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);
                  var _react = __webpack_require__3(7810);
                  var _react2 = _interopRequireDefault(_react);
                  var _propTypes = __webpack_require__3(5826);
                  var _propTypes2 = _interopRequireDefault(_propTypes);
                  var msPerFrame = 1e3 / 60;
                  function shouldStopAnimationAll(currentStyles, styles, currentVelocities) {
                    for (var i2 = 0; i2 < currentStyles.length; i2++) {
                      if (!_shouldStopAnimation2["default"](currentStyles[i2], styles[i2], currentVelocities[i2])) {
                        return false;
                      }
                    }
                    return true;
                  }
                  var StaggeredMotion = (function(_React$Component) {
                    _inherits(StaggeredMotion2, _React$Component);
                    _createClass(StaggeredMotion2, null, [{
                      key: "propTypes",
                      value: {
                        // TOOD: warn against putting a config in here
                        defaultStyles: _propTypes2["default"].arrayOf(_propTypes2["default"].objectOf(_propTypes2["default"].number)),
                        styles: _propTypes2["default"].func.isRequired,
                        children: _propTypes2["default"].func.isRequired
                      },
                      enumerable: true
                    }]);
                    function StaggeredMotion2(props) {
                      var _this = this;
                      _classCallCheck(this, StaggeredMotion2);
                      _React$Component.call(this, props);
                      this.animationID = null;
                      this.prevTime = 0;
                      this.accumulatedTime = 0;
                      this.unreadPropStyles = null;
                      this.clearUnreadPropStyle = function(unreadPropStyles) {
                        var _state = _this.state;
                        var currentStyles = _state.currentStyles;
                        var currentVelocities = _state.currentVelocities;
                        var lastIdealStyles = _state.lastIdealStyles;
                        var lastIdealVelocities = _state.lastIdealVelocities;
                        var someDirty = false;
                        for (var i2 = 0; i2 < unreadPropStyles.length; i2++) {
                          var unreadPropStyle = unreadPropStyles[i2];
                          var dirty = false;
                          for (var key in unreadPropStyle) {
                            if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {
                              continue;
                            }
                            var styleValue = unreadPropStyle[key];
                            if (typeof styleValue === "number") {
                              if (!dirty) {
                                dirty = true;
                                someDirty = true;
                                currentStyles[i2] = _extends({}, currentStyles[i2]);
                                currentVelocities[i2] = _extends({}, currentVelocities[i2]);
                                lastIdealStyles[i2] = _extends({}, lastIdealStyles[i2]);
                                lastIdealVelocities[i2] = _extends({}, lastIdealVelocities[i2]);
                              }
                              currentStyles[i2][key] = styleValue;
                              currentVelocities[i2][key] = 0;
                              lastIdealStyles[i2][key] = styleValue;
                              lastIdealVelocities[i2][key] = 0;
                            }
                          }
                        }
                        if (someDirty) {
                          _this.setState({ currentStyles, currentVelocities, lastIdealStyles, lastIdealVelocities });
                        }
                      };
                      this.startAnimationIfNecessary = function() {
                        _this.animationID = _raf2["default"](function(timestamp) {
                          var destStyles = _this.props.styles(_this.state.lastIdealStyles);
                          if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities)) {
                            _this.animationID = null;
                            _this.accumulatedTime = 0;
                            return;
                          }
                          var currentTime = timestamp || _performanceNow2["default"]();
                          var timeDelta = currentTime - _this.prevTime;
                          _this.prevTime = currentTime;
                          _this.accumulatedTime = _this.accumulatedTime + timeDelta;
                          if (_this.accumulatedTime > msPerFrame * 10) {
                            _this.accumulatedTime = 0;
                          }
                          if (_this.accumulatedTime === 0) {
                            _this.animationID = null;
                            _this.startAnimationIfNecessary();
                            return;
                          }
                          var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;
                          var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);
                          var newLastIdealStyles = [];
                          var newLastIdealVelocities = [];
                          var newCurrentStyles = [];
                          var newCurrentVelocities = [];
                          for (var i2 = 0; i2 < destStyles.length; i2++) {
                            var destStyle = destStyles[i2];
                            var newCurrentStyle = {};
                            var newCurrentVelocity = {};
                            var newLastIdealStyle = {};
                            var newLastIdealVelocity = {};
                            for (var key in destStyle) {
                              if (!Object.prototype.hasOwnProperty.call(destStyle, key)) {
                                continue;
                              }
                              var styleValue = destStyle[key];
                              if (typeof styleValue === "number") {
                                newCurrentStyle[key] = styleValue;
                                newCurrentVelocity[key] = 0;
                                newLastIdealStyle[key] = styleValue;
                                newLastIdealVelocity[key] = 0;
                              } else {
                                var newLastIdealStyleValue = _this.state.lastIdealStyles[i2][key];
                                var newLastIdealVelocityValue = _this.state.lastIdealVelocities[i2][key];
                                for (var j = 0; j < framesToCatchUp; j++) {
                                  var _stepper = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                  newLastIdealStyleValue = _stepper[0];
                                  newLastIdealVelocityValue = _stepper[1];
                                }
                                var _stepper2 = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                var nextIdealX = _stepper2[0];
                                var nextIdealV = _stepper2[1];
                                newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;
                                newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;
                                newLastIdealStyle[key] = newLastIdealStyleValue;
                                newLastIdealVelocity[key] = newLastIdealVelocityValue;
                              }
                            }
                            newCurrentStyles[i2] = newCurrentStyle;
                            newCurrentVelocities[i2] = newCurrentVelocity;
                            newLastIdealStyles[i2] = newLastIdealStyle;
                            newLastIdealVelocities[i2] = newLastIdealVelocity;
                          }
                          _this.animationID = null;
                          _this.accumulatedTime -= framesToCatchUp * msPerFrame;
                          _this.setState({
                            currentStyles: newCurrentStyles,
                            currentVelocities: newCurrentVelocities,
                            lastIdealStyles: newLastIdealStyles,
                            lastIdealVelocities: newLastIdealVelocities
                          });
                          _this.unreadPropStyles = null;
                          _this.startAnimationIfNecessary();
                        });
                      };
                      this.state = this.defaultState();
                    }
                    StaggeredMotion2.prototype.defaultState = function defaultState() {
                      var _props = this.props;
                      var defaultStyles = _props.defaultStyles;
                      var styles = _props.styles;
                      var currentStyles = defaultStyles || styles().map(_stripStyle2["default"]);
                      var currentVelocities = currentStyles.map(function(currentStyle) {
                        return _mapToZero2["default"](currentStyle);
                      });
                      return {
                        currentStyles,
                        currentVelocities,
                        lastIdealStyles: currentStyles,
                        lastIdealVelocities: currentVelocities
                      };
                    };
                    StaggeredMotion2.prototype.componentDidMount = function componentDidMount() {
                      this.prevTime = _performanceNow2["default"]();
                      this.startAnimationIfNecessary();
                    };
                    StaggeredMotion2.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {
                      if (this.unreadPropStyles != null) {
                        this.clearUnreadPropStyle(this.unreadPropStyles);
                      }
                      this.unreadPropStyles = props.styles(this.state.lastIdealStyles);
                      if (this.animationID == null) {
                        this.prevTime = _performanceNow2["default"]();
                        this.startAnimationIfNecessary();
                      }
                    };
                    StaggeredMotion2.prototype.componentWillUnmount = function componentWillUnmount() {
                      if (this.animationID != null) {
                        _raf2["default"].cancel(this.animationID);
                        this.animationID = null;
                      }
                    };
                    StaggeredMotion2.prototype.render = function render() {
                      var renderedChildren = this.props.children(this.state.currentStyles);
                      return renderedChildren && _react2["default"].Children.only(renderedChildren);
                    };
                    return StaggeredMotion2;
                  })(_react2["default"].Component);
                  exports3["default"] = StaggeredMotion;
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              6126: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  exports3.__esModule = true;
                  var _extends = Object.assign || function(target) {
                    for (var i2 = 1; i2 < arguments.length; i2++) {
                      var source = arguments[i2];
                      for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) {
                          target[key] = source[key];
                        }
                      }
                    }
                    return target;
                  };
                  var _createClass = /* @__PURE__ */ (function() {
                    function defineProperties(target, props) {
                      for (var i2 = 0; i2 < props.length; i2++) {
                        var descriptor = props[i2];
                        descriptor.enumerable = descriptor.enumerable || false;
                        descriptor.configurable = true;
                        if ("value" in descriptor) descriptor.writable = true;
                        Object.defineProperty(target, descriptor.key, descriptor);
                      }
                    }
                    return function(Constructor, protoProps, staticProps) {
                      if (protoProps) defineProperties(Constructor.prototype, protoProps);
                      if (staticProps) defineProperties(Constructor, staticProps);
                      return Constructor;
                    };
                  })();
                  function _interopRequireDefault(obj2) {
                    return obj2 && obj2.__esModule ? obj2 : { "default": obj2 };
                  }
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  function _inherits(subClass, superClass) {
                    if (typeof superClass !== "function" && superClass !== null) {
                      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
                    }
                    subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });
                    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
                  }
                  var _mapToZero = __webpack_require__3(5042);
                  var _mapToZero2 = _interopRequireDefault(_mapToZero);
                  var _stripStyle = __webpack_require__3(6148);
                  var _stripStyle2 = _interopRequireDefault(_stripStyle);
                  var _stepper3 = __webpack_require__3(1390);
                  var _stepper4 = _interopRequireDefault(_stepper3);
                  var _mergeDiff = __webpack_require__3(3780);
                  var _mergeDiff2 = _interopRequireDefault(_mergeDiff);
                  var _performanceNow = __webpack_require__3(1453);
                  var _performanceNow2 = _interopRequireDefault(_performanceNow);
                  var _raf = __webpack_require__3(1968);
                  var _raf2 = _interopRequireDefault(_raf);
                  var _shouldStopAnimation = __webpack_require__3(9988);
                  var _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);
                  var _react = __webpack_require__3(7810);
                  var _react2 = _interopRequireDefault(_react);
                  var _propTypes = __webpack_require__3(5826);
                  var _propTypes2 = _interopRequireDefault(_propTypes);
                  var msPerFrame = 1e3 / 60;
                  function rehydrateStyles(mergedPropsStyles, unreadPropStyles, plainStyles) {
                    var cUnreadPropStyles = unreadPropStyles;
                    if (cUnreadPropStyles == null) {
                      return mergedPropsStyles.map(function(mergedPropsStyle, i2) {
                        return {
                          key: mergedPropsStyle.key,
                          data: mergedPropsStyle.data,
                          style: plainStyles[i2]
                        };
                      });
                    }
                    return mergedPropsStyles.map(function(mergedPropsStyle, i2) {
                      for (var j = 0; j < cUnreadPropStyles.length; j++) {
                        if (cUnreadPropStyles[j].key === mergedPropsStyle.key) {
                          return {
                            key: cUnreadPropStyles[j].key,
                            data: cUnreadPropStyles[j].data,
                            style: plainStyles[i2]
                          };
                        }
                      }
                      return { key: mergedPropsStyle.key, data: mergedPropsStyle.data, style: plainStyles[i2] };
                    });
                  }
                  function shouldStopAnimationAll(currentStyles, destStyles, currentVelocities, mergedPropsStyles) {
                    if (mergedPropsStyles.length !== destStyles.length) {
                      return false;
                    }
                    for (var i2 = 0; i2 < mergedPropsStyles.length; i2++) {
                      if (mergedPropsStyles[i2].key !== destStyles[i2].key) {
                        return false;
                      }
                    }
                    for (var i2 = 0; i2 < mergedPropsStyles.length; i2++) {
                      if (!_shouldStopAnimation2["default"](currentStyles[i2], destStyles[i2].style, currentVelocities[i2])) {
                        return false;
                      }
                    }
                    return true;
                  }
                  function mergeAndSync(willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldLastIdealStyles, oldLastIdealVelocities) {
                    var newMergedPropsStyles = _mergeDiff2["default"](oldMergedPropsStyles, destStyles, function(oldIndex, oldMergedPropsStyle) {
                      var leavingStyle = willLeave(oldMergedPropsStyle);
                      if (leavingStyle == null) {
                        didLeave({ key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data });
                        return null;
                      }
                      if (_shouldStopAnimation2["default"](oldCurrentStyles[oldIndex], leavingStyle, oldCurrentVelocities[oldIndex])) {
                        didLeave({ key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data });
                        return null;
                      }
                      return { key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data, style: leavingStyle };
                    });
                    var newCurrentStyles = [];
                    var newCurrentVelocities = [];
                    var newLastIdealStyles = [];
                    var newLastIdealVelocities = [];
                    for (var i2 = 0; i2 < newMergedPropsStyles.length; i2++) {
                      var newMergedPropsStyleCell = newMergedPropsStyles[i2];
                      var foundOldIndex = null;
                      for (var j = 0; j < oldMergedPropsStyles.length; j++) {
                        if (oldMergedPropsStyles[j].key === newMergedPropsStyleCell.key) {
                          foundOldIndex = j;
                          break;
                        }
                      }
                      if (foundOldIndex == null) {
                        var plainStyle = willEnter(newMergedPropsStyleCell);
                        newCurrentStyles[i2] = plainStyle;
                        newLastIdealStyles[i2] = plainStyle;
                        var velocity = _mapToZero2["default"](newMergedPropsStyleCell.style);
                        newCurrentVelocities[i2] = velocity;
                        newLastIdealVelocities[i2] = velocity;
                      } else {
                        newCurrentStyles[i2] = oldCurrentStyles[foundOldIndex];
                        newLastIdealStyles[i2] = oldLastIdealStyles[foundOldIndex];
                        newCurrentVelocities[i2] = oldCurrentVelocities[foundOldIndex];
                        newLastIdealVelocities[i2] = oldLastIdealVelocities[foundOldIndex];
                      }
                    }
                    return [newMergedPropsStyles, newCurrentStyles, newCurrentVelocities, newLastIdealStyles, newLastIdealVelocities];
                  }
                  var TransitionMotion = (function(_React$Component) {
                    _inherits(TransitionMotion2, _React$Component);
                    _createClass(TransitionMotion2, null, [{
                      key: "propTypes",
                      value: {
                        defaultStyles: _propTypes2["default"].arrayOf(_propTypes2["default"].shape({
                          key: _propTypes2["default"].string.isRequired,
                          data: _propTypes2["default"].any,
                          style: _propTypes2["default"].objectOf(_propTypes2["default"].number).isRequired
                        })),
                        styles: _propTypes2["default"].oneOfType([_propTypes2["default"].func, _propTypes2["default"].arrayOf(_propTypes2["default"].shape({
                          key: _propTypes2["default"].string.isRequired,
                          data: _propTypes2["default"].any,
                          style: _propTypes2["default"].objectOf(_propTypes2["default"].oneOfType([_propTypes2["default"].number, _propTypes2["default"].object])).isRequired
                        }))]).isRequired,
                        children: _propTypes2["default"].func.isRequired,
                        willEnter: _propTypes2["default"].func,
                        willLeave: _propTypes2["default"].func,
                        didLeave: _propTypes2["default"].func
                      },
                      enumerable: true
                    }, {
                      key: "defaultProps",
                      value: {
                        willEnter: function willEnter(styleThatEntered) {
                          return _stripStyle2["default"](styleThatEntered.style);
                        },
                        // recall: returning null makes the current unmounting TransitionStyle
                        // disappear immediately
                        willLeave: function willLeave() {
                          return null;
                        },
                        didLeave: function didLeave() {
                        }
                      },
                      enumerable: true
                    }]);
                    function TransitionMotion2(props) {
                      var _this = this;
                      _classCallCheck(this, TransitionMotion2);
                      _React$Component.call(this, props);
                      this.unmounting = false;
                      this.animationID = null;
                      this.prevTime = 0;
                      this.accumulatedTime = 0;
                      this.unreadPropStyles = null;
                      this.clearUnreadPropStyle = function(unreadPropStyles) {
                        var _mergeAndSync = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, unreadPropStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities);
                        var mergedPropsStyles = _mergeAndSync[0];
                        var currentStyles = _mergeAndSync[1];
                        var currentVelocities = _mergeAndSync[2];
                        var lastIdealStyles = _mergeAndSync[3];
                        var lastIdealVelocities = _mergeAndSync[4];
                        for (var i2 = 0; i2 < unreadPropStyles.length; i2++) {
                          var unreadPropStyle = unreadPropStyles[i2].style;
                          var dirty = false;
                          for (var key in unreadPropStyle) {
                            if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {
                              continue;
                            }
                            var styleValue = unreadPropStyle[key];
                            if (typeof styleValue === "number") {
                              if (!dirty) {
                                dirty = true;
                                currentStyles[i2] = _extends({}, currentStyles[i2]);
                                currentVelocities[i2] = _extends({}, currentVelocities[i2]);
                                lastIdealStyles[i2] = _extends({}, lastIdealStyles[i2]);
                                lastIdealVelocities[i2] = _extends({}, lastIdealVelocities[i2]);
                                mergedPropsStyles[i2] = {
                                  key: mergedPropsStyles[i2].key,
                                  data: mergedPropsStyles[i2].data,
                                  style: _extends({}, mergedPropsStyles[i2].style)
                                };
                              }
                              currentStyles[i2][key] = styleValue;
                              currentVelocities[i2][key] = 0;
                              lastIdealStyles[i2][key] = styleValue;
                              lastIdealVelocities[i2][key] = 0;
                              mergedPropsStyles[i2].style[key] = styleValue;
                            }
                          }
                        }
                        _this.setState({
                          currentStyles,
                          currentVelocities,
                          mergedPropsStyles,
                          lastIdealStyles,
                          lastIdealVelocities
                        });
                      };
                      this.startAnimationIfNecessary = function() {
                        if (_this.unmounting) {
                          return;
                        }
                        _this.animationID = _raf2["default"](function(timestamp) {
                          if (_this.unmounting) {
                            return;
                          }
                          var propStyles = _this.props.styles;
                          var destStyles = typeof propStyles === "function" ? propStyles(rehydrateStyles(_this.state.mergedPropsStyles, _this.unreadPropStyles, _this.state.lastIdealStyles)) : propStyles;
                          if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities, _this.state.mergedPropsStyles)) {
                            _this.animationID = null;
                            _this.accumulatedTime = 0;
                            return;
                          }
                          var currentTime = timestamp || _performanceNow2["default"]();
                          var timeDelta = currentTime - _this.prevTime;
                          _this.prevTime = currentTime;
                          _this.accumulatedTime = _this.accumulatedTime + timeDelta;
                          if (_this.accumulatedTime > msPerFrame * 10) {
                            _this.accumulatedTime = 0;
                          }
                          if (_this.accumulatedTime === 0) {
                            _this.animationID = null;
                            _this.startAnimationIfNecessary();
                            return;
                          }
                          var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;
                          var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);
                          var _mergeAndSync2 = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, destStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities);
                          var newMergedPropsStyles = _mergeAndSync2[0];
                          var newCurrentStyles = _mergeAndSync2[1];
                          var newCurrentVelocities = _mergeAndSync2[2];
                          var newLastIdealStyles = _mergeAndSync2[3];
                          var newLastIdealVelocities = _mergeAndSync2[4];
                          for (var i2 = 0; i2 < newMergedPropsStyles.length; i2++) {
                            var newMergedPropsStyle = newMergedPropsStyles[i2].style;
                            var newCurrentStyle = {};
                            var newCurrentVelocity = {};
                            var newLastIdealStyle = {};
                            var newLastIdealVelocity = {};
                            for (var key in newMergedPropsStyle) {
                              if (!Object.prototype.hasOwnProperty.call(newMergedPropsStyle, key)) {
                                continue;
                              }
                              var styleValue = newMergedPropsStyle[key];
                              if (typeof styleValue === "number") {
                                newCurrentStyle[key] = styleValue;
                                newCurrentVelocity[key] = 0;
                                newLastIdealStyle[key] = styleValue;
                                newLastIdealVelocity[key] = 0;
                              } else {
                                var newLastIdealStyleValue = newLastIdealStyles[i2][key];
                                var newLastIdealVelocityValue = newLastIdealVelocities[i2][key];
                                for (var j = 0; j < framesToCatchUp; j++) {
                                  var _stepper = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                  newLastIdealStyleValue = _stepper[0];
                                  newLastIdealVelocityValue = _stepper[1];
                                }
                                var _stepper2 = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                var nextIdealX = _stepper2[0];
                                var nextIdealV = _stepper2[1];
                                newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;
                                newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;
                                newLastIdealStyle[key] = newLastIdealStyleValue;
                                newLastIdealVelocity[key] = newLastIdealVelocityValue;
                              }
                            }
                            newLastIdealStyles[i2] = newLastIdealStyle;
                            newLastIdealVelocities[i2] = newLastIdealVelocity;
                            newCurrentStyles[i2] = newCurrentStyle;
                            newCurrentVelocities[i2] = newCurrentVelocity;
                          }
                          _this.animationID = null;
                          _this.accumulatedTime -= framesToCatchUp * msPerFrame;
                          _this.setState({
                            currentStyles: newCurrentStyles,
                            currentVelocities: newCurrentVelocities,
                            lastIdealStyles: newLastIdealStyles,
                            lastIdealVelocities: newLastIdealVelocities,
                            mergedPropsStyles: newMergedPropsStyles
                          });
                          _this.unreadPropStyles = null;
                          _this.startAnimationIfNecessary();
                        });
                      };
                      this.state = this.defaultState();
                    }
                    TransitionMotion2.prototype.defaultState = function defaultState() {
                      var _props = this.props;
                      var defaultStyles = _props.defaultStyles;
                      var styles = _props.styles;
                      var willEnter = _props.willEnter;
                      var willLeave = _props.willLeave;
                      var didLeave = _props.didLeave;
                      var destStyles = typeof styles === "function" ? styles(defaultStyles) : styles;
                      var oldMergedPropsStyles = void 0;
                      if (defaultStyles == null) {
                        oldMergedPropsStyles = destStyles;
                      } else {
                        oldMergedPropsStyles = defaultStyles.map(function(defaultStyleCell) {
                          for (var i2 = 0; i2 < destStyles.length; i2++) {
                            if (destStyles[i2].key === defaultStyleCell.key) {
                              return destStyles[i2];
                            }
                          }
                          return defaultStyleCell;
                        });
                      }
                      var oldCurrentStyles = defaultStyles == null ? destStyles.map(function(s) {
                        return _stripStyle2["default"](s.style);
                      }) : defaultStyles.map(function(s) {
                        return _stripStyle2["default"](s.style);
                      });
                      var oldCurrentVelocities = defaultStyles == null ? destStyles.map(function(s) {
                        return _mapToZero2["default"](s.style);
                      }) : defaultStyles.map(function(s) {
                        return _mapToZero2["default"](s.style);
                      });
                      var _mergeAndSync3 = mergeAndSync(
                        // Because this is an old-style createReactClass component, Flow doesn't
                        // understand that the willEnter and willLeave props have default values
                        // and will always be present.
                        willEnter,
                        willLeave,
                        didLeave,
                        oldMergedPropsStyles,
                        destStyles,
                        oldCurrentStyles,
                        oldCurrentVelocities,
                        oldCurrentStyles,
                        // oldLastIdealStyles really
                        oldCurrentVelocities
                      );
                      var mergedPropsStyles = _mergeAndSync3[0];
                      var currentStyles = _mergeAndSync3[1];
                      var currentVelocities = _mergeAndSync3[2];
                      var lastIdealStyles = _mergeAndSync3[3];
                      var lastIdealVelocities = _mergeAndSync3[4];
                      return {
                        currentStyles,
                        currentVelocities,
                        lastIdealStyles,
                        lastIdealVelocities,
                        mergedPropsStyles
                      };
                    };
                    TransitionMotion2.prototype.componentDidMount = function componentDidMount() {
                      this.prevTime = _performanceNow2["default"]();
                      this.startAnimationIfNecessary();
                    };
                    TransitionMotion2.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {
                      if (this.unreadPropStyles) {
                        this.clearUnreadPropStyle(this.unreadPropStyles);
                      }
                      var styles = props.styles;
                      if (typeof styles === "function") {
                        this.unreadPropStyles = styles(rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.lastIdealStyles));
                      } else {
                        this.unreadPropStyles = styles;
                      }
                      if (this.animationID == null) {
                        this.prevTime = _performanceNow2["default"]();
                        this.startAnimationIfNecessary();
                      }
                    };
                    TransitionMotion2.prototype.componentWillUnmount = function componentWillUnmount() {
                      this.unmounting = true;
                      if (this.animationID != null) {
                        _raf2["default"].cancel(this.animationID);
                        this.animationID = null;
                      }
                    };
                    TransitionMotion2.prototype.render = function render() {
                      var hydratedStyles = rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.currentStyles);
                      var renderedChildren = this.props.children(hydratedStyles);
                      return renderedChildren && _react2["default"].Children.only(renderedChildren);
                    };
                    return TransitionMotion2;
                  })(_react2["default"].Component);
                  exports3["default"] = TransitionMotion;
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              5042: (
                /***/
                ((module3, exports3) => {
                  "use strict";
                  exports3.__esModule = true;
                  exports3["default"] = mapToZero;
                  function mapToZero(obj2) {
                    var ret2 = {};
                    for (var key in obj2) {
                      if (Object.prototype.hasOwnProperty.call(obj2, key)) {
                        ret2[key] = 0;
                      }
                    }
                    return ret2;
                  }
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              3780: (
                /***/
                ((module3, exports3) => {
                  "use strict";
                  exports3.__esModule = true;
                  exports3["default"] = mergeDiff;
                  function mergeDiff(prev, next, onRemove) {
                    var prevKeyIndex = {};
                    for (var i2 = 0; i2 < prev.length; i2++) {
                      prevKeyIndex[prev[i2].key] = i2;
                    }
                    var nextKeyIndex = {};
                    for (var i2 = 0; i2 < next.length; i2++) {
                      nextKeyIndex[next[i2].key] = i2;
                    }
                    var ret2 = [];
                    for (var i2 = 0; i2 < next.length; i2++) {
                      ret2[i2] = next[i2];
                    }
                    for (var i2 = 0; i2 < prev.length; i2++) {
                      if (!Object.prototype.hasOwnProperty.call(nextKeyIndex, prev[i2].key)) {
                        var fill = onRemove(i2, prev[i2]);
                        if (fill != null) {
                          ret2.push(fill);
                        }
                      }
                    }
                    return ret2.sort(function(a, b) {
                      var nextOrderA = nextKeyIndex[a.key];
                      var nextOrderB = nextKeyIndex[b.key];
                      var prevOrderA = prevKeyIndex[a.key];
                      var prevOrderB = prevKeyIndex[b.key];
                      if (nextOrderA != null && nextOrderB != null) {
                        return nextKeyIndex[a.key] - nextKeyIndex[b.key];
                      } else if (prevOrderA != null && prevOrderB != null) {
                        return prevKeyIndex[a.key] - prevKeyIndex[b.key];
                      } else if (nextOrderA != null) {
                        for (var i3 = 0; i3 < next.length; i3++) {
                          var pivot = next[i3].key;
                          if (!Object.prototype.hasOwnProperty.call(prevKeyIndex, pivot)) {
                            continue;
                          }
                          if (nextOrderA < nextKeyIndex[pivot] && prevOrderB > prevKeyIndex[pivot]) {
                            return -1;
                          } else if (nextOrderA > nextKeyIndex[pivot] && prevOrderB < prevKeyIndex[pivot]) {
                            return 1;
                          }
                        }
                        return 1;
                      }
                      for (var i3 = 0; i3 < next.length; i3++) {
                        var pivot = next[i3].key;
                        if (!Object.prototype.hasOwnProperty.call(prevKeyIndex, pivot)) {
                          continue;
                        }
                        if (nextOrderB < nextKeyIndex[pivot] && prevOrderA > prevKeyIndex[pivot]) {
                          return 1;
                        } else if (nextOrderB > nextKeyIndex[pivot] && prevOrderA < prevKeyIndex[pivot]) {
                          return -1;
                        }
                      }
                      return -1;
                    });
                  }
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              1327: (
                /***/
                ((module3, exports3) => {
                  "use strict";
                  exports3.__esModule = true;
                  exports3["default"] = {
                    noWobble: { stiffness: 170, damping: 26 },
                    // the default, if nothing provided
                    gentle: { stiffness: 120, damping: 14 },
                    wobbly: { stiffness: 180, damping: 12 },
                    stiff: { stiffness: 210, damping: 20 }
                  };
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              2591: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  exports3.__esModule = true;
                  function _interopRequire(obj2) {
                    return obj2 && obj2.__esModule ? obj2["default"] : obj2;
                  }
                  var _Motion = __webpack_require__3(2793);
                  exports3.Motion = _interopRequire(_Motion);
                  var _StaggeredMotion = __webpack_require__3(9959);
                  exports3.StaggeredMotion = _interopRequire(_StaggeredMotion);
                  var _TransitionMotion = __webpack_require__3(6126);
                  exports3.TransitionMotion = _interopRequire(_TransitionMotion);
                  var _spring = __webpack_require__3(2658);
                  exports3.spring = _interopRequire(_spring);
                  var _presets = __webpack_require__3(1327);
                  exports3.presets = _interopRequire(_presets);
                  var _stripStyle = __webpack_require__3(6148);
                  exports3.stripStyle = _interopRequire(_stripStyle);
                  var _reorderKeys = __webpack_require__3(3308);
                  exports3.reorderKeys = _interopRequire(_reorderKeys);
                })
              ),
              /***/
              3308: (
                /***/
                ((module3, exports3) => {
                  "use strict";
                  exports3.__esModule = true;
                  exports3["default"] = reorderKeys;
                  var hasWarned = false;
                  function reorderKeys() {
                    if (false) {
                    }
                  }
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              9988: (
                /***/
                ((module3, exports3) => {
                  "use strict";
                  exports3.__esModule = true;
                  exports3["default"] = shouldStopAnimation;
                  function shouldStopAnimation(currentStyle, style, currentVelocity) {
                    for (var key in style) {
                      if (!Object.prototype.hasOwnProperty.call(style, key)) {
                        continue;
                      }
                      if (currentVelocity[key] !== 0) {
                        return false;
                      }
                      var styleValue = typeof style[key] === "number" ? style[key] : style[key].val;
                      if (currentStyle[key] !== styleValue) {
                        return false;
                      }
                    }
                    return true;
                  }
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              2658: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  exports3.__esModule = true;
                  var _extends = Object.assign || function(target) {
                    for (var i2 = 1; i2 < arguments.length; i2++) {
                      var source = arguments[i2];
                      for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) {
                          target[key] = source[key];
                        }
                      }
                    }
                    return target;
                  };
                  exports3["default"] = spring;
                  function _interopRequireDefault(obj2) {
                    return obj2 && obj2.__esModule ? obj2 : { "default": obj2 };
                  }
                  var _presets = __webpack_require__3(1327);
                  var _presets2 = _interopRequireDefault(_presets);
                  var defaultConfig = _extends({}, _presets2["default"].noWobble, {
                    precision: 0.01
                  });
                  function spring(val, config) {
                    return _extends({}, defaultConfig, config, { val });
                  }
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              1390: (
                /***/
                ((module3, exports3) => {
                  "use strict";
                  exports3.__esModule = true;
                  exports3["default"] = stepper;
                  var reusedTuple = [0, 0];
                  function stepper(secondPerFrame, x2, v, destX, k, b, precision) {
                    var Fspring = -k * (x2 - destX);
                    var Fdamper = -b * v;
                    var a = Fspring + Fdamper;
                    var newV = v + a * secondPerFrame;
                    var newX = x2 + newV * secondPerFrame;
                    if (Math.abs(newV) < precision && Math.abs(newX - destX) < precision) {
                      reusedTuple[0] = destX;
                      reusedTuple[1] = 0;
                      return reusedTuple;
                    }
                    reusedTuple[0] = newX;
                    reusedTuple[1] = newV;
                    return reusedTuple;
                  }
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              6148: (
                /***/
                ((module3, exports3) => {
                  "use strict";
                  exports3.__esModule = true;
                  exports3["default"] = stripStyle;
                  function stripStyle(style) {
                    var ret2 = {};
                    for (var key in style) {
                      if (!Object.prototype.hasOwnProperty.call(style, key)) {
                        continue;
                      }
                      ret2[key] = typeof style[key] === "number" ? style[key] : style[key].val;
                    }
                    return ret2;
                  }
                  module3.exports = exports3["default"];
                })
              ),
              /***/
              2608: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var MultiRef = /* @__PURE__ */ (function() {
                    function MultiRef2() {
                      (0, _classCallCheck2.default)(this, MultiRef2);
                      (0, _defineProperty2.default)(this, "map", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_refFns", /* @__PURE__ */ new Map());
                    }
                    (0, _createClass2.default)(MultiRef2, [{
                      key: "ref",
                      value: function ref(key) {
                        var _this = this;
                        var refFn = this._refFns.get(key);
                        if (!refFn) {
                          refFn = function refFn2(value) {
                            if (value == null) {
                              _this._refFns.delete(key);
                              _this.map.delete(key);
                            } else {
                              _this.map.set(key, value);
                            }
                          };
                          this._refFns.set(key, refFn);
                        }
                        return refFn;
                      }
                    }]);
                    return MultiRef2;
                  })();
                  exports3["default"] = MultiRef;
                })
              ),
              /***/
              1979: (
                /***/
                ((__unused_webpack_module2, exports3) => {
                  "use strict";
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = getTransitionTimeMs;
                  function getTransitionTimeMs(heightTransition) {
                    var m = /(\d+(?:\.\d+)?|\.\d+)(m?s)\b/i.exec(heightTransition);
                    if (!m) throw new Error("Could not parse time from transition value");
                    return Number(m[1]) * (m[2].length === 1 ? 1e3 : 1);
                  }
                })
              ),
              /***/
              4293: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  var __webpack_unused_export__;
                  var _interopRequireWildcard = __webpack_require__3(9485);
                  var _interopRequireDefault = __webpack_require__3(1654);
                  __webpack_unused_export__ = {
                    value: true
                  };
                  exports3.A = void 0;
                  var _extends2 = _interopRequireDefault(__webpack_require__3(4718));
                  var _objectWithoutProperties2 = _interopRequireDefault(__webpack_require__3(1059));
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__3(5432));
                  var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__3(2132));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__3(7111));
                  var _inherits2 = _interopRequireDefault(__webpack_require__3(5075));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var React = _interopRequireWildcard(__webpack_require__3(7810));
                  var _propTypes = _interopRequireDefault(__webpack_require__3(5826));
                  var _getTransitionTimeMs = _interopRequireDefault(__webpack_require__3(1979));
                  var SmoothCollapse = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(SmoothCollapse2, _React$Component);
                    function SmoothCollapse2(props) {
                      var _this;
                      (0, _classCallCheck2["default"])(this, SmoothCollapse2);
                      _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(SmoothCollapse2).call(this, props));
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_removeTransitionEndListener", function() {
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_main", React.createRef());
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_inner", React.createRef());
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onNextTransitionEnd", function(el, callback) {
                        _this._removeTransitionEndListener();
                        var listener = function listener2() {
                          _this._removeTransitionEndListener();
                          callback();
                        };
                        var timeout;
                        _this._removeTransitionEndListener = function() {
                          _this._removeTransitionEndListener = function() {
                          };
                          clearTimeout(timeout);
                          el.removeEventListener("transitionend", listener);
                        };
                        el.addEventListener("transitionend", listener);
                        var ms = (0, _getTransitionTimeMs["default"])(_this.props.heightTransition) * 1.1 + 500;
                        timeout = setTimeout(listener, ms);
                      });
                      _this.state = {
                        renderInner: props.expanded || SmoothCollapse2._visibleWhenClosed(props),
                        closing: false,
                        fullyClosed: !props.expanded,
                        height: props.expanded ? "auto" : props.collapsedHeight
                      };
                      return _this;
                    }
                    (0, _createClass2["default"])(SmoothCollapse2, [{
                      key: "componentWillUnmount",
                      value: function componentWillUnmount() {
                        this._removeTransitionEndListener();
                      }
                    }, {
                      key: "componentDidUpdate",
                      value: function componentDidUpdate(prevProps, prevState) {
                        var _this2 = this;
                        if (!prevProps.expanded && this.props.expanded) {
                          this._removeTransitionEndListener();
                          var mainEl = this._main.current;
                          var innerEl = this._inner.current;
                          if (!mainEl || !innerEl) throw new Error("Should not happen");
                          var targetHeight = "".concat(innerEl.clientHeight, "px");
                          this.setState({
                            height: targetHeight
                          });
                          this._onNextTransitionEnd(mainEl, function() {
                            _this2.setState({
                              height: "auto"
                            }, function() {
                              if (_this2.props.onChangeEnd) {
                                _this2.props.onChangeEnd();
                              }
                            });
                          });
                        } else if (prevProps.expanded && !this.props.expanded) {
                          this._removeTransitionEndListener();
                          if (!this._inner.current) throw new Error("Should not happen");
                          this.setState({
                            height: "".concat(this._inner.current.clientHeight, "px")
                          }, function() {
                            var mainEl2 = _this2._main.current;
                            if (!mainEl2) throw new Error("Should not happen");
                            mainEl2.clientHeight;
                            _this2.setState({
                              height: _this2.props.collapsedHeight,
                              closing: true
                            });
                            _this2._onNextTransitionEnd(mainEl2, function() {
                              _this2.setState({
                                closing: false,
                                fullyClosed: true
                              });
                              if (_this2.props.onChangeEnd) {
                                _this2.props.onChangeEnd();
                              }
                            });
                          });
                        }
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        var visibleWhenClosed = SmoothCollapse2._visibleWhenClosed(this.props);
                        var _this$props = this.props, allowOverflowWhenOpen = _this$props.allowOverflowWhenOpen, children = _this$props.children, collapsedHeight = _this$props.collapsedHeight, eagerRender = _this$props.eagerRender, expanded = _this$props.expanded, heightTransition = _this$props.heightTransition, onChangeEnd = _this$props.onChangeEnd, props = (0, _objectWithoutProperties2["default"])(_this$props, ["allowOverflowWhenOpen", "children", "collapsedHeight", "eagerRender", "expanded", "heightTransition", "onChangeEnd"]);
                        var _this$state = this.state, height = _this$state.height, fullyClosed = _this$state.fullyClosed, renderInner = _this$state.renderInner;
                        var innerEl = renderInner ? React.createElement("div", {
                          ref: this._inner,
                          style: {
                            overflow: allowOverflowWhenOpen && height === "auto" ? "visible" : "hidden"
                          }
                        }, children) : null;
                        return React.createElement("div", (0, _extends2["default"])({}, props, {
                          ref: this._main,
                          style: {
                            height,
                            overflow: allowOverflowWhenOpen && height === "auto" ? "visible" : "hidden",
                            display: fullyClosed && !visibleWhenClosed ? "none" : null,
                            transition: "height ".concat(heightTransition)
                          }
                        }), innerEl);
                      }
                    }], [{
                      key: "_visibleWhenClosed",
                      value: function _visibleWhenClosed(props) {
                        return props.eagerRender || parseFloat(props.collapsedHeight) !== 0;
                      }
                    }, {
                      key: "getDerivedStateFromProps",
                      value: function getDerivedStateFromProps(props, state) {
                        if (props.expanded && (state.closing || state.fullyClosed)) {
                          return {
                            closing: false,
                            fullyClosed: false,
                            renderInner: true
                          };
                        } else if (!props.expanded && (state.closing || state.fullyClosed) && state.height !== props.collapsedHeight) {
                          return {
                            height: props.collapsedHeight,
                            renderInner: state.renderInner || SmoothCollapse2._visibleWhenClosed(props)
                          };
                        }
                        return null;
                      }
                    }]);
                    return SmoothCollapse2;
                  })(React.Component);
                  exports3.A = SmoothCollapse;
                  (0, _defineProperty2["default"])(SmoothCollapse, "propTypes", {
                    expanded: _propTypes["default"].bool.isRequired,
                    onChangeEnd: _propTypes["default"].func,
                    collapsedHeight: _propTypes["default"].string,
                    heightTransition: _propTypes["default"].string,
                    className: _propTypes["default"].string,
                    allowOverflowWhenOpen: _propTypes["default"].bool,
                    eagerRender: _propTypes["default"].bool
                  });
                  (0, _defineProperty2["default"])(SmoothCollapse, "defaultProps", {
                    collapsedHeight: "0",
                    heightTransition: ".25s ease",
                    className: "",
                    allowOverflowWhenOpen: false,
                    eagerRender: false
                  });
                })
              ),
              /***/
              5677: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  var l = __webpack_require__3(5946), n = 60103, p = 60106;
                  exports3.Fragment = 60107;
                  exports3.StrictMode = 60108;
                  exports3.Profiler = 60114;
                  var q = 60109, r = 60110, t2 = 60112;
                  exports3.Suspense = 60113;
                  var u = 60115, v = 60116;
                  if ("function" === typeof Symbol && Symbol.for) {
                    var w = Symbol.for;
                    n = w("react.element");
                    p = w("react.portal");
                    exports3.Fragment = w("react.fragment");
                    exports3.StrictMode = w("react.strict_mode");
                    exports3.Profiler = w("react.profiler");
                    q = w("react.provider");
                    r = w("react.context");
                    t2 = w("react.forward_ref");
                    exports3.Suspense = w("react.suspense");
                    u = w("react.memo");
                    v = w("react.lazy");
                  }
                  var x2 = "function" === typeof Symbol && Symbol.iterator;
                  function y2(a) {
                    if (null === a || "object" !== typeof a) return null;
                    a = x2 && a[x2] || a["@@iterator"];
                    return "function" === typeof a ? a : null;
                  }
                  function z(a) {
                    for (var b = "https://reactjs.org/docs/error-decoder.html?invariant=" + a, c = 1; c < arguments.length; c++) b += "&args[]=" + encodeURIComponent(arguments[c]);
                    return "Minified React error #" + a + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
                  }
                  var A = { isMounted: function() {
                    return false;
                  }, enqueueForceUpdate: function() {
                  }, enqueueReplaceState: function() {
                  }, enqueueSetState: function() {
                  } }, B = {};
                  function C(a, b, c) {
                    this.props = a;
                    this.context = b;
                    this.refs = B;
                    this.updater = c || A;
                  }
                  C.prototype.isReactComponent = {};
                  C.prototype.setState = function(a, b) {
                    if ("object" !== typeof a && "function" !== typeof a && null != a) throw Error(z(85));
                    this.updater.enqueueSetState(this, a, b, "setState");
                  };
                  C.prototype.forceUpdate = function(a) {
                    this.updater.enqueueForceUpdate(this, a, "forceUpdate");
                  };
                  function D() {
                  }
                  D.prototype = C.prototype;
                  function E(a, b, c) {
                    this.props = a;
                    this.context = b;
                    this.refs = B;
                    this.updater = c || A;
                  }
                  var F = E.prototype = new D();
                  F.constructor = E;
                  l(F, C.prototype);
                  F.isPureReactComponent = true;
                  var G = { current: null }, H = Object.prototype.hasOwnProperty, I = { key: true, ref: true, __self: true, __source: true };
                  function J(a, b, c) {
                    var e, d = {}, k = null, h = null;
                    if (null != b) for (e in void 0 !== b.ref && (h = b.ref), void 0 !== b.key && (k = "" + b.key), b) H.call(b, e) && !I.hasOwnProperty(e) && (d[e] = b[e]);
                    var g = arguments.length - 2;
                    if (1 === g) d.children = c;
                    else if (1 < g) {
                      for (var f = Array(g), m = 0; m < g; m++) f[m] = arguments[m + 2];
                      d.children = f;
                    }
                    if (a && a.defaultProps) for (e in g = a.defaultProps, g) void 0 === d[e] && (d[e] = g[e]);
                    return { $$typeof: n, type: a, key: k, ref: h, props: d, _owner: G.current };
                  }
                  function K(a, b) {
                    return { $$typeof: n, type: a.type, key: b, ref: a.ref, props: a.props, _owner: a._owner };
                  }
                  function L(a) {
                    return "object" === typeof a && null !== a && a.$$typeof === n;
                  }
                  function escape(a) {
                    var b = { "=": "=0", ":": "=2" };
                    return "$" + a.replace(/[=:]/g, function(a2) {
                      return b[a2];
                    });
                  }
                  var M = /\/+/g;
                  function N(a, b) {
                    return "object" === typeof a && null !== a && null != a.key ? escape("" + a.key) : b.toString(36);
                  }
                  function O(a, b, c, e, d) {
                    var k = typeof a;
                    if ("undefined" === k || "boolean" === k) a = null;
                    var h = false;
                    if (null === a) h = true;
                    else switch (k) {
                      case "string":
                      case "number":
                        h = true;
                        break;
                      case "object":
                        switch (a.$$typeof) {
                          case n:
                          case p:
                            h = true;
                        }
                    }
                    if (h) return h = a, d = d(h), a = "" === e ? "." + N(h, 0) : e, Array.isArray(d) ? (c = "", null != a && (c = a.replace(M, "$&/") + "/"), O(d, b, c, "", function(a2) {
                      return a2;
                    })) : null != d && (L(d) && (d = K(d, c + (!d.key || h && h.key === d.key ? "" : ("" + d.key).replace(M, "$&/") + "/") + a)), b.push(d)), 1;
                    h = 0;
                    e = "" === e ? "." : e + ":";
                    if (Array.isArray(a)) for (var g = 0; g < a.length; g++) {
                      k = a[g];
                      var f = e + N(k, g);
                      h += O(k, b, c, f, d);
                    }
                    else if (f = y2(a), "function" === typeof f) for (a = f.call(a), g = 0; !(k = a.next()).done; ) k = k.value, f = e + N(k, g++), h += O(k, b, c, f, d);
                    else if ("object" === k) throw b = "" + a, Error(z(31, "[object Object]" === b ? "object with keys {" + Object.keys(a).join(", ") + "}" : b));
                    return h;
                  }
                  function P(a, b, c) {
                    if (null == a) return a;
                    var e = [], d = 0;
                    O(a, e, "", "", function(a2) {
                      return b.call(c, a2, d++);
                    });
                    return e;
                  }
                  function Q(a) {
                    if (-1 === a._status) {
                      var b = a._result;
                      b = b();
                      a._status = 0;
                      a._result = b;
                      b.then(function(b2) {
                        0 === a._status && (b2 = b2.default, a._status = 1, a._result = b2);
                      }, function(b2) {
                        0 === a._status && (a._status = 2, a._result = b2);
                      });
                    }
                    if (1 === a._status) return a._result;
                    throw a._result;
                  }
                  var R = { current: null };
                  function S() {
                    var a = R.current;
                    if (null === a) throw Error(z(321));
                    return a;
                  }
                  var T = { ReactCurrentDispatcher: R, ReactCurrentBatchConfig: { transition: 0 }, ReactCurrentOwner: G, IsSomeRendererActing: { current: false }, assign: l };
                  exports3.Children = { map: P, forEach: function(a, b, c) {
                    P(a, function() {
                      b.apply(this, arguments);
                    }, c);
                  }, count: function(a) {
                    var b = 0;
                    P(a, function() {
                      b++;
                    });
                    return b;
                  }, toArray: function(a) {
                    return P(a, function(a2) {
                      return a2;
                    }) || [];
                  }, only: function(a) {
                    if (!L(a)) throw Error(z(143));
                    return a;
                  } };
                  exports3.Component = C;
                  exports3.PureComponent = E;
                  exports3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = T;
                  exports3.cloneElement = function(a, b, c) {
                    if (null === a || void 0 === a) throw Error(z(267, a));
                    var e = l({}, a.props), d = a.key, k = a.ref, h = a._owner;
                    if (null != b) {
                      void 0 !== b.ref && (k = b.ref, h = G.current);
                      void 0 !== b.key && (d = "" + b.key);
                      if (a.type && a.type.defaultProps) var g = a.type.defaultProps;
                      for (f in b) H.call(b, f) && !I.hasOwnProperty(f) && (e[f] = void 0 === b[f] && void 0 !== g ? g[f] : b[f]);
                    }
                    var f = arguments.length - 2;
                    if (1 === f) e.children = c;
                    else if (1 < f) {
                      g = Array(f);
                      for (var m = 0; m < f; m++) g[m] = arguments[m + 2];
                      e.children = g;
                    }
                    return {
                      $$typeof: n,
                      type: a.type,
                      key: d,
                      ref: k,
                      props: e,
                      _owner: h
                    };
                  };
                  exports3.createContext = function(a, b) {
                    void 0 === b && (b = null);
                    a = { $$typeof: r, _calculateChangedBits: b, _currentValue: a, _currentValue2: a, _threadCount: 0, Provider: null, Consumer: null };
                    a.Provider = { $$typeof: q, _context: a };
                    return a.Consumer = a;
                  };
                  exports3.createElement = J;
                  exports3.createFactory = function(a) {
                    var b = J.bind(null, a);
                    b.type = a;
                    return b;
                  };
                  exports3.createRef = function() {
                    return { current: null };
                  };
                  exports3.forwardRef = function(a) {
                    return { $$typeof: t2, render: a };
                  };
                  exports3.isValidElement = L;
                  exports3.lazy = function(a) {
                    return { $$typeof: v, _payload: { _status: -1, _result: a }, _init: Q };
                  };
                  exports3.memo = function(a, b) {
                    return { $$typeof: u, type: a, compare: void 0 === b ? null : b };
                  };
                  exports3.useCallback = function(a, b) {
                    return S().useCallback(a, b);
                  };
                  exports3.useContext = function(a, b) {
                    return S().useContext(a, b);
                  };
                  exports3.useDebugValue = function() {
                  };
                  exports3.useEffect = function(a, b) {
                    return S().useEffect(a, b);
                  };
                  exports3.useImperativeHandle = function(a, b, c) {
                    return S().useImperativeHandle(a, b, c);
                  };
                  exports3.useLayoutEffect = function(a, b) {
                    return S().useLayoutEffect(a, b);
                  };
                  exports3.useMemo = function(a, b) {
                    return S().useMemo(a, b);
                  };
                  exports3.useReducer = function(a, b, c) {
                    return S().useReducer(a, b, c);
                  };
                  exports3.useRef = function(a) {
                    return S().useRef(a);
                  };
                  exports3.useState = function(a) {
                    return S().useState(a);
                  };
                  exports3.version = "17.0.2";
                })
              ),
              /***/
              7810: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  if (true) {
                    module3.exports = __webpack_require__3(5677);
                  } else {
                  }
                })
              ),
              /***/
              4891: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  var buffer = __webpack_require__3(2313);
                  var Buffer2 = buffer.Buffer;
                  function copyProps(src2, dst) {
                    for (var key in src2) {
                      dst[key] = src2[key];
                    }
                  }
                  if (Buffer2.from && Buffer2.alloc && Buffer2.allocUnsafe && Buffer2.allocUnsafeSlow) {
                    module3.exports = buffer;
                  } else {
                    copyProps(buffer, exports3);
                    exports3.Buffer = SafeBuffer;
                  }
                  function SafeBuffer(arg, encodingOrOffset, length) {
                    return Buffer2(arg, encodingOrOffset, length);
                  }
                  SafeBuffer.prototype = Object.create(Buffer2.prototype);
                  copyProps(Buffer2, SafeBuffer);
                  SafeBuffer.from = function(arg, encodingOrOffset, length) {
                    if (typeof arg === "number") {
                      throw new TypeError("Argument must not be a number");
                    }
                    return Buffer2(arg, encodingOrOffset, length);
                  };
                  SafeBuffer.alloc = function(size, fill, encoding) {
                    if (typeof size !== "number") {
                      throw new TypeError("Argument must be a number");
                    }
                    var buf = Buffer2(size);
                    if (fill !== void 0) {
                      if (typeof encoding === "string") {
                        buf.fill(fill, encoding);
                      } else {
                        buf.fill(fill);
                      }
                    } else {
                      buf.fill(0);
                    }
                    return buf;
                  };
                  SafeBuffer.allocUnsafe = function(size) {
                    if (typeof size !== "number") {
                      throw new TypeError("Argument must be a number");
                    }
                    return Buffer2(size);
                  };
                  SafeBuffer.allocUnsafeSlow = function(size) {
                    if (typeof size !== "number") {
                      throw new TypeError("Argument must be a number");
                    }
                    return buffer.SlowBuffer(size);
                  };
                })
              ),
              /***/
              1613: (
                /***/
                ((__unused_webpack_module2, exports3) => {
                  "use strict";
                  var f, g, h, k;
                  if ("object" === typeof performance && "function" === typeof performance.now) {
                    var l = performance;
                    exports3.unstable_now = function() {
                      return l.now();
                    };
                  } else {
                    var p = Date, q = p.now();
                    exports3.unstable_now = function() {
                      return p.now() - q;
                    };
                  }
                  if ("undefined" === typeof window || "function" !== typeof MessageChannel) {
                    var t2 = null, u = null, w = function() {
                      if (null !== t2) try {
                        var a = exports3.unstable_now();
                        t2(true, a);
                        t2 = null;
                      } catch (b) {
                        throw setTimeout(w, 0), b;
                      }
                    };
                    f = function(a) {
                      null !== t2 ? setTimeout(f, 0, a) : (t2 = a, setTimeout(w, 0));
                    };
                    g = function(a, b) {
                      u = setTimeout(a, b);
                    };
                    h = function() {
                      clearTimeout(u);
                    };
                    exports3.unstable_shouldYield = function() {
                      return false;
                    };
                    k = exports3.unstable_forceFrameRate = function() {
                    };
                  } else {
                    var x2 = window.setTimeout, y2 = window.clearTimeout;
                    if ("undefined" !== typeof console) {
                      var z = window.cancelAnimationFrame;
                      "function" !== typeof window.requestAnimationFrame && console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");
                      "function" !== typeof z && console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");
                    }
                    var A = false, B = null, C = -1, D = 5, E = 0;
                    exports3.unstable_shouldYield = function() {
                      return exports3.unstable_now() >= E;
                    };
                    k = function() {
                    };
                    exports3.unstable_forceFrameRate = function(a) {
                      0 > a || 125 < a ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : D = 0 < a ? Math.floor(1e3 / a) : 5;
                    };
                    var F = new MessageChannel(), G = F.port2;
                    F.port1.onmessage = function() {
                      if (null !== B) {
                        var a = exports3.unstable_now();
                        E = a + D;
                        try {
                          B(true, a) ? G.postMessage(null) : (A = false, B = null);
                        } catch (b) {
                          throw G.postMessage(null), b;
                        }
                      } else A = false;
                    };
                    f = function(a) {
                      B = a;
                      A || (A = true, G.postMessage(null));
                    };
                    g = function(a, b) {
                      C = x2(function() {
                        a(exports3.unstable_now());
                      }, b);
                    };
                    h = function() {
                      y2(C);
                      C = -1;
                    };
                  }
                  function H(a, b) {
                    var c = a.length;
                    a.push(b);
                    a: for (; ; ) {
                      var d = c - 1 >>> 1, e = a[d];
                      if (void 0 !== e && 0 < I(e, b)) a[d] = b, a[c] = e, c = d;
                      else break a;
                    }
                  }
                  function J(a) {
                    a = a[0];
                    return void 0 === a ? null : a;
                  }
                  function K(a) {
                    var b = a[0];
                    if (void 0 !== b) {
                      var c = a.pop();
                      if (c !== b) {
                        a[0] = c;
                        a: for (var d = 0, e = a.length; d < e; ) {
                          var m = 2 * (d + 1) - 1, n = a[m], v = m + 1, r = a[v];
                          if (void 0 !== n && 0 > I(n, c)) void 0 !== r && 0 > I(r, n) ? (a[d] = r, a[v] = c, d = v) : (a[d] = n, a[m] = c, d = m);
                          else if (void 0 !== r && 0 > I(r, c)) a[d] = r, a[v] = c, d = v;
                          else break a;
                        }
                      }
                      return b;
                    }
                    return null;
                  }
                  function I(a, b) {
                    var c = a.sortIndex - b.sortIndex;
                    return 0 !== c ? c : a.id - b.id;
                  }
                  var L = [], M = [], N = 1, O = null, P = 3, Q = false, R = false, S = false;
                  function T(a) {
                    for (var b = J(M); null !== b; ) {
                      if (null === b.callback) K(M);
                      else if (b.startTime <= a) K(M), b.sortIndex = b.expirationTime, H(L, b);
                      else break;
                      b = J(M);
                    }
                  }
                  function U(a) {
                    S = false;
                    T(a);
                    if (!R) if (null !== J(L)) R = true, f(V);
                    else {
                      var b = J(M);
                      null !== b && g(U, b.startTime - a);
                    }
                  }
                  function V(a, b) {
                    R = false;
                    S && (S = false, h());
                    Q = true;
                    var c = P;
                    try {
                      T(b);
                      for (O = J(L); null !== O && (!(O.expirationTime > b) || a && !exports3.unstable_shouldYield()); ) {
                        var d = O.callback;
                        if ("function" === typeof d) {
                          O.callback = null;
                          P = O.priorityLevel;
                          var e = d(O.expirationTime <= b);
                          b = exports3.unstable_now();
                          "function" === typeof e ? O.callback = e : O === J(L) && K(L);
                          T(b);
                        } else K(L);
                        O = J(L);
                      }
                      if (null !== O) var m = true;
                      else {
                        var n = J(M);
                        null !== n && g(U, n.startTime - b);
                        m = false;
                      }
                      return m;
                    } finally {
                      O = null, P = c, Q = false;
                    }
                  }
                  var W = k;
                  exports3.unstable_IdlePriority = 5;
                  exports3.unstable_ImmediatePriority = 1;
                  exports3.unstable_LowPriority = 4;
                  exports3.unstable_NormalPriority = 3;
                  exports3.unstable_Profiling = null;
                  exports3.unstable_UserBlockingPriority = 2;
                  exports3.unstable_cancelCallback = function(a) {
                    a.callback = null;
                  };
                  exports3.unstable_continueExecution = function() {
                    R || Q || (R = true, f(V));
                  };
                  exports3.unstable_getCurrentPriorityLevel = function() {
                    return P;
                  };
                  exports3.unstable_getFirstCallbackNode = function() {
                    return J(L);
                  };
                  exports3.unstable_next = function(a) {
                    switch (P) {
                      case 1:
                      case 2:
                      case 3:
                        var b = 3;
                        break;
                      default:
                        b = P;
                    }
                    var c = P;
                    P = b;
                    try {
                      return a();
                    } finally {
                      P = c;
                    }
                  };
                  exports3.unstable_pauseExecution = function() {
                  };
                  exports3.unstable_requestPaint = W;
                  exports3.unstable_runWithPriority = function(a, b) {
                    switch (a) {
                      case 1:
                      case 2:
                      case 3:
                      case 4:
                      case 5:
                        break;
                      default:
                        a = 3;
                    }
                    var c = P;
                    P = a;
                    try {
                      return b();
                    } finally {
                      P = c;
                    }
                  };
                  exports3.unstable_scheduleCallback = function(a, b, c) {
                    var d = exports3.unstable_now();
                    "object" === typeof c && null !== c ? (c = c.delay, c = "number" === typeof c && 0 < c ? d + c : d) : c = d;
                    switch (a) {
                      case 1:
                        var e = -1;
                        break;
                      case 2:
                        e = 250;
                        break;
                      case 5:
                        e = 1073741823;
                        break;
                      case 4:
                        e = 1e4;
                        break;
                      default:
                        e = 5e3;
                    }
                    e = c + e;
                    a = { id: N++, callback: b, priorityLevel: a, startTime: c, expirationTime: e, sortIndex: -1 };
                    c > d ? (a.sortIndex = c, H(M, a), null === J(L) && a === J(M) && (S ? h() : S = true, g(U, c - d))) : (a.sortIndex = e, H(L, a), R || Q || (R = true, f(V)));
                    return a;
                  };
                  exports3.unstable_wrapCallback = function(a) {
                    var b = P;
                    return function() {
                      var c = P;
                      P = b;
                      try {
                        return a.apply(this, arguments);
                      } finally {
                        P = c;
                      }
                    };
                  };
                })
              ),
              /***/
              2328: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  if (true) {
                    module3.exports = __webpack_require__3(1613);
                  } else {
                  }
                })
              ),
              /***/
              3678: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var Buffer2 = __webpack_require__3(4891).Buffer;
                  function Hash(blockSize, finalSize) {
                    this._block = Buffer2.alloc(blockSize);
                    this._finalSize = finalSize;
                    this._blockSize = blockSize;
                    this._len = 0;
                  }
                  Hash.prototype.update = function(data, enc) {
                    if (typeof data === "string") {
                      enc = enc || "utf8";
                      data = Buffer2.from(data, enc);
                    }
                    var block = this._block;
                    var blockSize = this._blockSize;
                    var length = data.length;
                    var accum = this._len;
                    for (var offset = 0; offset < length; ) {
                      var assigned = accum % blockSize;
                      var remainder = Math.min(length - offset, blockSize - assigned);
                      for (var i2 = 0; i2 < remainder; i2++) {
                        block[assigned + i2] = data[offset + i2];
                      }
                      accum += remainder;
                      offset += remainder;
                      if (accum % blockSize === 0) {
                        this._update(block);
                      }
                    }
                    this._len += length;
                    return this;
                  };
                  Hash.prototype.digest = function(enc) {
                    var rem = this._len % this._blockSize;
                    this._block[rem] = 128;
                    this._block.fill(0, rem + 1);
                    if (rem >= this._finalSize) {
                      this._update(this._block);
                      this._block.fill(0);
                    }
                    var bits = this._len * 8;
                    if (bits <= 4294967295) {
                      this._block.writeUInt32BE(bits, this._blockSize - 4);
                    } else {
                      var lowBits = (bits & 4294967295) >>> 0;
                      var highBits = (bits - lowBits) / 4294967296;
                      this._block.writeUInt32BE(highBits, this._blockSize - 8);
                      this._block.writeUInt32BE(lowBits, this._blockSize - 4);
                    }
                    this._update(this._block);
                    var hash = this._hash();
                    return enc ? hash.toString(enc) : hash;
                  };
                  Hash.prototype._update = function() {
                    throw new Error("_update must be implemented by subclass");
                  };
                  module3.exports = Hash;
                })
              ),
              /***/
              799: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var inherits = __webpack_require__3(9784);
                  var Hash = __webpack_require__3(3678);
                  var Buffer2 = __webpack_require__3(4891).Buffer;
                  var K = [
                    1518500249,
                    1859775393,
                    2400959708 | 0,
                    3395469782 | 0
                  ];
                  var W = new Array(80);
                  function Sha1() {
                    this.init();
                    this._w = W;
                    Hash.call(this, 64, 56);
                  }
                  inherits(Sha1, Hash);
                  Sha1.prototype.init = function() {
                    this._a = 1732584193;
                    this._b = 4023233417;
                    this._c = 2562383102;
                    this._d = 271733878;
                    this._e = 3285377520;
                    return this;
                  };
                  function rotl1(num) {
                    return num << 1 | num >>> 31;
                  }
                  function rotl5(num) {
                    return num << 5 | num >>> 27;
                  }
                  function rotl30(num) {
                    return num << 30 | num >>> 2;
                  }
                  function ft(s, b, c, d) {
                    if (s === 0) return b & c | ~b & d;
                    if (s === 2) return b & c | b & d | c & d;
                    return b ^ c ^ d;
                  }
                  Sha1.prototype._update = function(M) {
                    var W2 = this._w;
                    var a = this._a | 0;
                    var b = this._b | 0;
                    var c = this._c | 0;
                    var d = this._d | 0;
                    var e = this._e | 0;
                    for (var i2 = 0; i2 < 16; ++i2) W2[i2] = M.readInt32BE(i2 * 4);
                    for (; i2 < 80; ++i2) W2[i2] = rotl1(W2[i2 - 3] ^ W2[i2 - 8] ^ W2[i2 - 14] ^ W2[i2 - 16]);
                    for (var j = 0; j < 80; ++j) {
                      var s = ~~(j / 20);
                      var t2 = rotl5(a) + ft(s, b, c, d) + e + W2[j] + K[s] | 0;
                      e = d;
                      d = c;
                      c = rotl30(b);
                      b = a;
                      a = t2;
                    }
                    this._a = a + this._a | 0;
                    this._b = b + this._b | 0;
                    this._c = c + this._c | 0;
                    this._d = d + this._d | 0;
                    this._e = e + this._e | 0;
                  };
                  Sha1.prototype._hash = function() {
                    var H = Buffer2.allocUnsafe(20);
                    H.writeInt32BE(this._a | 0, 0);
                    H.writeInt32BE(this._b | 0, 4);
                    H.writeInt32BE(this._c | 0, 8);
                    H.writeInt32BE(this._d | 0, 12);
                    H.writeInt32BE(this._e | 0, 16);
                    return H;
                  };
                  module3.exports = Sha1;
                })
              ),
              /***/
              6049: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var inherits = __webpack_require__3(9784);
                  var Hash = __webpack_require__3(3678);
                  var Buffer2 = __webpack_require__3(4891).Buffer;
                  var K = [
                    1116352408,
                    1899447441,
                    3049323471,
                    3921009573,
                    961987163,
                    1508970993,
                    2453635748,
                    2870763221,
                    3624381080,
                    310598401,
                    607225278,
                    1426881987,
                    1925078388,
                    2162078206,
                    2614888103,
                    3248222580,
                    3835390401,
                    4022224774,
                    264347078,
                    604807628,
                    770255983,
                    1249150122,
                    1555081692,
                    1996064986,
                    2554220882,
                    2821834349,
                    2952996808,
                    3210313671,
                    3336571891,
                    3584528711,
                    113926993,
                    338241895,
                    666307205,
                    773529912,
                    1294757372,
                    1396182291,
                    1695183700,
                    1986661051,
                    2177026350,
                    2456956037,
                    2730485921,
                    2820302411,
                    3259730800,
                    3345764771,
                    3516065817,
                    3600352804,
                    4094571909,
                    275423344,
                    430227734,
                    506948616,
                    659060556,
                    883997877,
                    958139571,
                    1322822218,
                    1537002063,
                    1747873779,
                    1955562222,
                    2024104815,
                    2227730452,
                    2361852424,
                    2428436474,
                    2756734187,
                    3204031479,
                    3329325298
                  ];
                  var W = new Array(64);
                  function Sha256() {
                    this.init();
                    this._w = W;
                    Hash.call(this, 64, 56);
                  }
                  inherits(Sha256, Hash);
                  Sha256.prototype.init = function() {
                    this._a = 1779033703;
                    this._b = 3144134277;
                    this._c = 1013904242;
                    this._d = 2773480762;
                    this._e = 1359893119;
                    this._f = 2600822924;
                    this._g = 528734635;
                    this._h = 1541459225;
                    return this;
                  };
                  function ch(x2, y2, z) {
                    return z ^ x2 & (y2 ^ z);
                  }
                  function maj(x2, y2, z) {
                    return x2 & y2 | z & (x2 | y2);
                  }
                  function sigma0(x2) {
                    return (x2 >>> 2 | x2 << 30) ^ (x2 >>> 13 | x2 << 19) ^ (x2 >>> 22 | x2 << 10);
                  }
                  function sigma1(x2) {
                    return (x2 >>> 6 | x2 << 26) ^ (x2 >>> 11 | x2 << 21) ^ (x2 >>> 25 | x2 << 7);
                  }
                  function gamma0(x2) {
                    return (x2 >>> 7 | x2 << 25) ^ (x2 >>> 18 | x2 << 14) ^ x2 >>> 3;
                  }
                  function gamma1(x2) {
                    return (x2 >>> 17 | x2 << 15) ^ (x2 >>> 19 | x2 << 13) ^ x2 >>> 10;
                  }
                  Sha256.prototype._update = function(M) {
                    var W2 = this._w;
                    var a = this._a | 0;
                    var b = this._b | 0;
                    var c = this._c | 0;
                    var d = this._d | 0;
                    var e = this._e | 0;
                    var f = this._f | 0;
                    var g = this._g | 0;
                    var h = this._h | 0;
                    for (var i2 = 0; i2 < 16; ++i2) W2[i2] = M.readInt32BE(i2 * 4);
                    for (; i2 < 64; ++i2) W2[i2] = gamma1(W2[i2 - 2]) + W2[i2 - 7] + gamma0(W2[i2 - 15]) + W2[i2 - 16] | 0;
                    for (var j = 0; j < 64; ++j) {
                      var T1 = h + sigma1(e) + ch(e, f, g) + K[j] + W2[j] | 0;
                      var T2 = sigma0(a) + maj(a, b, c) | 0;
                      h = g;
                      g = f;
                      f = e;
                      e = d + T1 | 0;
                      d = c;
                      c = b;
                      b = a;
                      a = T1 + T2 | 0;
                    }
                    this._a = a + this._a | 0;
                    this._b = b + this._b | 0;
                    this._c = c + this._c | 0;
                    this._d = d + this._d | 0;
                    this._e = e + this._e | 0;
                    this._f = f + this._f | 0;
                    this._g = g + this._g | 0;
                    this._h = h + this._h | 0;
                  };
                  Sha256.prototype._hash = function() {
                    var H = Buffer2.allocUnsafe(32);
                    H.writeInt32BE(this._a, 0);
                    H.writeInt32BE(this._b, 4);
                    H.writeInt32BE(this._c, 8);
                    H.writeInt32BE(this._d, 12);
                    H.writeInt32BE(this._e, 16);
                    H.writeInt32BE(this._f, 20);
                    H.writeInt32BE(this._g, 24);
                    H.writeInt32BE(this._h, 28);
                    return H;
                  };
                  module3.exports = Sha256;
                })
              ),
              /***/
              6186: (
                /***/
                ((module3) => {
                  "use strict";
                  var stylesInDOM = [];
                  function getIndexByIdentifier(identifier) {
                    var result = -1;
                    for (var i2 = 0; i2 < stylesInDOM.length; i2++) {
                      if (stylesInDOM[i2].identifier === identifier) {
                        result = i2;
                        break;
                      }
                    }
                    return result;
                  }
                  function modulesToDom(list, options) {
                    var idCountMap = {};
                    var identifiers = [];
                    for (var i2 = 0; i2 < list.length; i2++) {
                      var item = list[i2];
                      var id = options.base ? item[0] + options.base : item[0];
                      var count = idCountMap[id] || 0;
                      var identifier = "".concat(id, " ").concat(count);
                      idCountMap[id] = count + 1;
                      var indexByIdentifier = getIndexByIdentifier(identifier);
                      var obj2 = {
                        css: item[1],
                        media: item[2],
                        sourceMap: item[3],
                        supports: item[4],
                        layer: item[5]
                      };
                      if (indexByIdentifier !== -1) {
                        stylesInDOM[indexByIdentifier].references++;
                        stylesInDOM[indexByIdentifier].updater(obj2);
                      } else {
                        var updater = addElementStyle(obj2, options);
                        options.byIndex = i2;
                        stylesInDOM.splice(i2, 0, {
                          identifier,
                          updater,
                          references: 1
                        });
                      }
                      identifiers.push(identifier);
                    }
                    return identifiers;
                  }
                  function addElementStyle(obj2, options) {
                    var api = options.domAPI(options);
                    api.update(obj2);
                    var updater = function updater2(newObj) {
                      if (newObj) {
                        if (newObj.css === obj2.css && newObj.media === obj2.media && newObj.sourceMap === obj2.sourceMap && newObj.supports === obj2.supports && newObj.layer === obj2.layer) {
                          return;
                        }
                        api.update(obj2 = newObj);
                      } else {
                        api.remove();
                      }
                    };
                    return updater;
                  }
                  module3.exports = function(list, options) {
                    options = options || {};
                    list = list || [];
                    var lastIdentifiers = modulesToDom(list, options);
                    return function update(newList) {
                      newList = newList || [];
                      for (var i2 = 0; i2 < lastIdentifiers.length; i2++) {
                        var identifier = lastIdentifiers[i2];
                        var index = getIndexByIdentifier(identifier);
                        stylesInDOM[index].references--;
                      }
                      var newLastIdentifiers = modulesToDom(newList, options);
                      for (var _i = 0; _i < lastIdentifiers.length; _i++) {
                        var _identifier = lastIdentifiers[_i];
                        var _index = getIndexByIdentifier(_identifier);
                        if (stylesInDOM[_index].references === 0) {
                          stylesInDOM[_index].updater();
                          stylesInDOM.splice(_index, 1);
                        }
                      }
                      lastIdentifiers = newLastIdentifiers;
                    };
                  };
                })
              ),
              /***/
              8990: (
                /***/
                ((module3) => {
                  "use strict";
                  function insertStyleElement(options) {
                    var element = document.createElement("style");
                    options.setAttributes(element, options.attributes);
                    options.insert(element, options.options);
                    return element;
                  }
                  module3.exports = insertStyleElement;
                })
              ),
              /***/
              8626: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  "use strict";
                  function setAttributesWithoutAttributes(styleElement) {
                    var nonce = true ? __webpack_require__3.nc : 0;
                    if (nonce) {
                      styleElement.setAttribute("nonce", nonce);
                    }
                  }
                  module3.exports = setAttributesWithoutAttributes;
                })
              ),
              /***/
              2155: (
                /***/
                ((module3) => {
                  "use strict";
                  function apply(styleElement, options, obj2) {
                    var css = "";
                    if (obj2.supports) {
                      css += "@supports (".concat(obj2.supports, ") {");
                    }
                    if (obj2.media) {
                      css += "@media ".concat(obj2.media, " {");
                    }
                    var needLayer = typeof obj2.layer !== "undefined";
                    if (needLayer) {
                      css += "@layer".concat(obj2.layer.length > 0 ? " ".concat(obj2.layer) : "", " {");
                    }
                    css += obj2.css;
                    if (needLayer) {
                      css += "}";
                    }
                    if (obj2.media) {
                      css += "}";
                    }
                    if (obj2.supports) {
                      css += "}";
                    }
                    var sourceMap = obj2.sourceMap;
                    if (sourceMap && typeof btoa !== "undefined") {
                      css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
                    }
                    options.styleTagTransform(css, styleElement, options.options);
                  }
                  function removeStyleElement(styleElement) {
                    if (styleElement.parentNode === null) {
                      return false;
                    }
                    styleElement.parentNode.removeChild(styleElement);
                  }
                  function domAPI(options) {
                    if (typeof document === "undefined") {
                      return {
                        update: function update() {
                        },
                        remove: function remove() {
                        }
                      };
                    }
                    var styleElement = options.insertStyleElement(options);
                    return {
                      update: function update(obj2) {
                        apply(styleElement, options, obj2);
                      },
                      remove: function remove() {
                        removeStyleElement(styleElement);
                      }
                    };
                  }
                  module3.exports = domAPI;
                })
              ),
              /***/
              9827: (
                /***/
                ((module3) => {
                  "use strict";
                  function styleTagTransform(css, styleElement) {
                    if (styleElement.styleSheet) {
                      styleElement.styleSheet.cssText = css;
                    } else {
                      while (styleElement.firstChild) {
                        styleElement.removeChild(styleElement.firstChild);
                      }
                      styleElement.appendChild(document.createTextNode(css));
                    }
                  }
                  module3.exports = styleTagTransform;
                })
              ),
              /***/
              8899: (
                /***/
                ((module3, __webpack_exports__3, __webpack_require__3) => {
                  "use strict";
                  __webpack_require__3.r(__webpack_exports__3);
                  __webpack_require__3.d(__webpack_exports__3, {
                    "default": () => (
                      /* binding */
                      es
                    )
                  });
                  ;
                  function symbolObservablePonyfill(root2) {
                    var result2;
                    var Symbol2 = root2.Symbol;
                    if (typeof Symbol2 === "function") {
                      if (Symbol2.observable) {
                        result2 = Symbol2.observable;
                      } else {
                        result2 = Symbol2("observable");
                        Symbol2.observable = result2;
                      }
                    } else {
                      result2 = "@@observable";
                    }
                    return result2;
                  }
                  ;
                  ;
                  module3 = __webpack_require__3.hmd(module3);
                  var root;
                  if (typeof self !== "undefined") {
                    root = self;
                  } else if (typeof window !== "undefined") {
                    root = window;
                  } else if (typeof __webpack_require__3.g !== "undefined") {
                    root = __webpack_require__3.g;
                  } else if (true) {
                    root = module3;
                  } else {
                  }
                  var result = symbolObservablePonyfill(root);
                  const es = result;
                })
              ),
              /***/
              5746: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__3(5432));
                  var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__3(2132));
                  var _inherits2 = _interopRequireDefault(__webpack_require__3(5075));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__3(7111));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _liveSet = _interopRequireDefault(__webpack_require__3(2436));
                  var _TagTreeNode2 = _interopRequireDefault(__webpack_require__3(8410));
                  var EMPTY_ARRAY = Object.freeze([]);
                  var TagTree = /* @__PURE__ */ (function(_TagTreeNode) {
                    (0, _inherits2.default)(TagTree2, _TagTreeNode);
                    function TagTree2(init) {
                      var _this;
                      (0, _classCallCheck2.default)(this, TagTree2);
                      var rootNodeController;
                      _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(TagTree2).call(this, {
                        value: init.root,
                        parent: null,
                        ownedTags: new Set(init.tags.map(function(_ref) {
                          var tag = _ref.tag;
                          return tag;
                        })),
                        executor: function executor(controller2) {
                          rootNodeController = controller2;
                        }
                      }));
                      (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), "_nodeControllers", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), "_lookupTable", void 0);
                      (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), "_allByTag", void 0);
                      if (!rootNodeController) throw new Error();
                      _this._nodeControllers.set((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), rootNodeController);
                      _this._lookupTable = /* @__PURE__ */ new Map([[init.root, [(0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this))]]]);
                      _this._allByTag = /* @__PURE__ */ new Map();
                      init.tags.forEach(function(_ref2) {
                        var tag = _ref2.tag;
                        var _LiveSet$active = _liveSet.default.active(), liveSet = _LiveSet$active.liveSet, controller2 = _LiveSet$active.controller;
                        if (_this._allByTag.has(tag)) throw new Error("Tag specified twice: " + tag);
                        _this._allByTag.set(tag, {
                          ownedTags: /* @__PURE__ */ new Set(),
                          liveSet,
                          controller: controller2
                        });
                      });
                      init.tags.forEach(function(_ref3) {
                        var tag = _ref3.tag, ownedBy = _ref3.ownedBy;
                        if (!ownedBy) return;
                        ownedBy.forEach(function(owningTag) {
                          var entry = _this._allByTag.get(owningTag);
                          if (!entry) throw new Error("unknown ownedBy value for ".concat(tag, ": ").concat(owningTag));
                          entry.ownedTags.add(tag);
                        });
                      });
                      var controller = {
                        tree: (0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)),
                        addTaggedValue: function addTaggedValue(parent, tag, value) {
                          var tagEntry = _this._allByTag.get(tag);
                          if (!tagEntry) throw new Error("unknown tag: ".concat(tag));
                          var controller2;
                          var node = new _TagTreeNode2.default({
                            value,
                            parent,
                            ownedTags: tagEntry.ownedTags,
                            executor: function executor(_controller) {
                              controller2 = _controller;
                            }
                          });
                          if (!controller2) throw new Error();
                          _this._nodeControllers.set(node, controller2);
                          tagEntry.controller.add(node);
                          var valueNodes = _this._lookupTable.get(value);
                          if (valueNodes) {
                            valueNodes.push(node);
                          } else {
                            _this._lookupTable.set(value, [node]);
                          }
                          var parentController = _this._nodeControllers.get(parent);
                          if (!parentController) throw new Error("parent is not part of TagTree");
                          parentController.addOwnedNode(tag, node);
                          return node;
                        },
                        removeTaggedNode: function removeTaggedNode(parent, tag, node) {
                          var tagEntry = _this._allByTag.get(tag);
                          if (!tagEntry) throw new Error("unknown tag: ".concat(tag));
                          var parentController = _this._nodeControllers.get(parent);
                          if (!parentController) throw new Error("parent is not part of TagTree");
                          var value = node.getValue();
                          var nodes = _this._lookupTable.get(value);
                          if (!nodes) throw new Error("node was missing from lookup table before removal");
                          if (nodes.length > 1) {
                            var ix = nodes.indexOf(node);
                            if (ix < 0) throw new Error("node was missing from list in lookup table before removal");
                            nodes.splice(ix, 1);
                          } else {
                            _this._lookupTable.delete(value);
                          }
                          node.getOwned().forEach(function(liveSet, tag2) {
                            liveSet.values().forEach(function(childNode) {
                              controller.removeTaggedNode(node, tag2, childNode);
                            });
                          });
                          tagEntry.controller.remove(node);
                          parentController.removeOwnedNode(tag, node);
                          _this._nodeControllers.delete(node);
                        },
                        end: function end() {
                          _this._nodeControllers.forEach(function(controller2) {
                            controller2.end();
                          });
                          _this._allByTag.forEach(function(_ref4) {
                            var controller2 = _ref4.controller;
                            controller2.end();
                          });
                        }
                      };
                      init.executor(controller);
                      init.executor = function() {
                      };
                      return _this;
                    }
                    (0, _createClass2.default)(TagTree2, [{
                      key: "getNodesForValue",
                      value: function getNodesForValue(value) {
                        var l = this._lookupTable.get(value);
                        return l ? Object.freeze(l.slice()) : EMPTY_ARRAY;
                      }
                    }, {
                      key: "getAllByTag",
                      value: function getAllByTag(tag) {
                        var entry = this._allByTag.get(tag);
                        if (!entry) throw new Error("tag does not exist in TagTree: ".concat(tag));
                        return entry.liveSet;
                      }
                    }, {
                      key: "getAll",
                      value: function getAll() {
                        var m = /* @__PURE__ */ new Map();
                        this._allByTag.forEach(function(_ref5, tag) {
                          var liveSet = _ref5.liveSet;
                          m.set(tag, liveSet);
                        });
                        return m;
                      }
                    }]);
                    return TagTree2;
                  })(_TagTreeNode2.default);
                  exports3["default"] = TagTree;
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              8410: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__3(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__3(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__3(5985));
                  var _liveSet = _interopRequireDefault(__webpack_require__3(2436));
                  var TagTreeNode = /* @__PURE__ */ (function() {
                    function TagTreeNode2(init) {
                      var _this = this;
                      (0, _classCallCheck2.default)(this, TagTreeNode2);
                      (0, _defineProperty2.default)(this, "_init", void 0);
                      (0, _defineProperty2.default)(this, "_ownedNodes", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_ownedByTag", /* @__PURE__ */ new Map());
                      this._init = init;
                      this._init.executor({
                        node: this,
                        addOwnedNode: function addOwnedNode(tag, node) {
                          _this._ownedNodes.set(node, tag);
                          var entry = _this._ownedByTag.get(tag);
                          if (!entry) {
                            entry = _this._createTagEntry();
                            _this._ownedByTag.set(tag, entry);
                          }
                          var _entry = entry, controller = _entry.controller;
                          controller.add(node);
                        },
                        removeOwnedNode: function removeOwnedNode(tag, node) {
                          _this._ownedNodes.delete(node);
                          var entry = _this._ownedByTag.get(tag);
                          if (!entry) throw new Error("tag not owned");
                          var controller = entry.controller;
                          controller.remove(node);
                        },
                        end: function end() {
                          _this._ownedByTag.forEach(function(_ref) {
                            var controller = _ref.controller;
                            controller.end();
                          });
                        }
                      });
                      this._init.executor = function() {
                      };
                    }
                    (0, _createClass2.default)(TagTreeNode2, [{
                      key: "_createTagEntry",
                      value: function _createTagEntry() {
                        return _liveSet.default.active();
                      }
                    }, {
                      key: "getValue",
                      value: function getValue2() {
                        return this._init.value;
                      }
                    }, {
                      key: "getParent",
                      value: function getParent() {
                        return this._init.parent || null;
                      }
                    }, {
                      key: "getOwnedByTag",
                      value: function getOwnedByTag(tag) {
                        var entry = this._ownedByTag.get(tag);
                        if (!entry) {
                          if (!this._init.ownedTags.has(tag)) {
                            throw new Error("tag not owned: ".concat(tag));
                          }
                          entry = this._createTagEntry();
                          this._ownedByTag.set(tag, entry);
                        }
                        return entry.liveSet;
                      }
                    }, {
                      key: "getOwned",
                      value: function getOwned() {
                        var m = /* @__PURE__ */ new Map();
                        this._ownedByTag.forEach(function(_ref2, tag) {
                          var liveSet = _ref2.liveSet;
                          m.set(tag, liveSet);
                        });
                        return m;
                      }
                    }, {
                      key: "getTag",
                      value: function getTag() {
                        var parent = this._init.parent;
                        return parent ? parent.getTagOfOwnedNode(this) : null;
                      }
                    }, {
                      key: "ownsNode",
                      value: function ownsNode(node) {
                        return this._ownedNodes.has(node);
                      }
                    }, {
                      key: "getTagOfOwnedNode",
                      value: function getTagOfOwnedNode(node) {
                        var tag = this._ownedNodes.get(node);
                        if (tag == null) throw new Error("node not owned");
                        return tag;
                      }
                    }]);
                    return TagTreeNode2;
                  })();
                  exports3["default"] = TagTreeNode;
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              7138: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__3(1654);
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  Object.defineProperty(exports3, "TagTree", {
                    enumerable: true,
                    get: function get() {
                      return _TagTree.default;
                    }
                  });
                  Object.defineProperty(exports3, "TagTreeNode", {
                    enumerable: true,
                    get: function get() {
                      return _TagTreeNode.default;
                    }
                  });
                  var _TagTree = _interopRequireDefault(__webpack_require__3(5746));
                  var _TagTreeNode = _interopRequireDefault(__webpack_require__3(8410));
                })
              ),
              /***/
              6046: (
                /***/
                ((module3) => {
                  var symbolExists = typeof Symbol !== "undefined";
                  var protocols = {
                    iterator: symbolExists ? Symbol.iterator : "@@iterator"
                  };
                  function throwProtocolError(name, coll) {
                    throw new Error("don't know how to " + name + " collection: " + coll);
                  }
                  function fulfillsProtocol(obj2, name) {
                    if (name === "iterator") {
                      return obj2[protocols.iterator] || obj2.next;
                    }
                    return obj2[protocols[name]];
                  }
                  function getProtocolProperty(obj2, name) {
                    return obj2[protocols[name]];
                  }
                  function iterator(coll) {
                    var iter = getProtocolProperty(coll, "iterator");
                    if (iter) {
                      return iter.call(coll);
                    } else if (coll.next) {
                      return coll;
                    } else if (isArray(coll)) {
                      return new ArrayIterator(coll);
                    } else if (isObject(coll)) {
                      return new ObjectIterator(coll);
                    }
                  }
                  function ArrayIterator(arr) {
                    this.arr = arr;
                    this.index = 0;
                  }
                  ArrayIterator.prototype.next = function() {
                    if (this.index < this.arr.length) {
                      return {
                        value: this.arr[this.index++],
                        done: false
                      };
                    }
                    return {
                      done: true
                    };
                  };
                  function ObjectIterator(obj2) {
                    this.obj = obj2;
                    this.keys = Object.keys(obj2);
                    this.index = 0;
                  }
                  ObjectIterator.prototype.next = function() {
                    if (this.index < this.keys.length) {
                      var k = this.keys[this.index++];
                      return {
                        value: [k, this.obj[k]],
                        done: false
                      };
                    }
                    return {
                      done: true
                    };
                  };
                  var toString = Object.prototype.toString;
                  var isArray = typeof Array.isArray === "function" ? Array.isArray : function(obj2) {
                    return toString.call(obj2) == "[object Array]";
                  };
                  function isFunction(x2) {
                    return typeof x2 === "function";
                  }
                  function isObject(x2) {
                    return x2 instanceof Object && Object.getPrototypeOf(x2) === Object.getPrototypeOf({});
                  }
                  function isNumber(x2) {
                    return typeof x2 === "number";
                  }
                  function Reduced(value) {
                    this["@@transducer/reduced"] = true;
                    this["@@transducer/value"] = value;
                  }
                  function isReduced(x2) {
                    return x2 instanceof Reduced || x2 && x2["@@transducer/reduced"];
                  }
                  function deref(x2) {
                    return x2["@@transducer/value"];
                  }
                  function ensureReduced(val) {
                    if (isReduced(val)) {
                      return val;
                    } else {
                      return new Reduced(val);
                    }
                  }
                  function ensureUnreduced(v) {
                    if (isReduced(v)) {
                      return deref(v);
                    } else {
                      return v;
                    }
                  }
                  function reduce(coll, xform, init) {
                    if (isArray(coll)) {
                      var result = init;
                      var index = -1;
                      var len = coll.length;
                      while (++index < len) {
                        result = xform["@@transducer/step"](result, coll[index]);
                        if (isReduced(result)) {
                          result = deref(result);
                          break;
                        }
                      }
                      return xform["@@transducer/result"](result);
                    } else if (isObject(coll) || fulfillsProtocol(coll, "iterator")) {
                      var result = init;
                      var iter = iterator(coll);
                      var val = iter.next();
                      while (!val.done) {
                        result = xform["@@transducer/step"](result, val.value);
                        if (isReduced(result)) {
                          result = deref(result);
                          break;
                        }
                        val = iter.next();
                      }
                      return xform["@@transducer/result"](result);
                    }
                    throwProtocolError("iterate", coll);
                  }
                  function transduce(coll, xform, reducer, init) {
                    xform = xform(reducer);
                    if (init === void 0) {
                      init = xform["@@transducer/init"]();
                    }
                    return reduce(coll, xform, init);
                  }
                  function compose() {
                    var funcs = Array.prototype.slice.call(arguments);
                    return function(r) {
                      var value = r;
                      for (var i2 = funcs.length - 1; i2 >= 0; i2--) {
                        value = funcs[i2](value);
                      }
                      return value;
                    };
                  }
                  function transformer(f) {
                    var t2 = {};
                    t2["@@transducer/init"] = function() {
                      throw new Error("init value unavailable");
                    };
                    t2["@@transducer/result"] = function(v) {
                      return v;
                    };
                    t2["@@transducer/step"] = f;
                    return t2;
                  }
                  function bound(f, ctx, count) {
                    count = count != null ? count : 1;
                    if (!ctx) {
                      return f;
                    } else {
                      switch (count) {
                        case 1:
                          return function(x2) {
                            return f.call(ctx, x2);
                          };
                        case 2:
                          return function(x2, y2) {
                            return f.call(ctx, x2, y2);
                          };
                        default:
                          return f.bind(ctx);
                      }
                    }
                  }
                  function arrayMap(arr, f, ctx) {
                    var index = -1;
                    var length = arr.length;
                    var result = Array(length);
                    f = bound(f, ctx, 2);
                    while (++index < length) {
                      result[index] = f(arr[index], index);
                    }
                    return result;
                  }
                  function arrayFilter(arr, f, ctx) {
                    var len = arr.length;
                    var result = [];
                    f = bound(f, ctx, 2);
                    for (var i2 = 0; i2 < len; i2++) {
                      if (f(arr[i2], i2)) {
                        result.push(arr[i2]);
                      }
                    }
                    return result;
                  }
                  function Map2(f, xform) {
                    this.xform = xform;
                    this.f = f;
                  }
                  Map2.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Map2.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Map2.prototype["@@transducer/step"] = function(res2, input) {
                    return this.xform["@@transducer/step"](res2, this.f(input));
                  };
                  function map(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      if (isArray(coll)) {
                        return arrayMap(coll, f, ctx);
                      }
                      return seq(coll, map(f));
                    }
                    return function(xform) {
                      return new Map2(f, xform);
                    };
                  }
                  function Filter(f, xform) {
                    this.xform = xform;
                    this.f = f;
                  }
                  Filter.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Filter.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Filter.prototype["@@transducer/step"] = function(res2, input) {
                    if (this.f(input)) {
                      return this.xform["@@transducer/step"](res2, input);
                    }
                    return res2;
                  };
                  function filter2(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      if (isArray(coll)) {
                        return arrayFilter(coll, f, ctx);
                      }
                      return seq(coll, filter2(f));
                    }
                    return function(xform) {
                      return new Filter(f, xform);
                    };
                  }
                  function remove(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    return filter2(coll, function(x2) {
                      return !f(x2);
                    });
                  }
                  function keep(coll) {
                    return filter2(coll, function(x2) {
                      return x2 != null;
                    });
                  }
                  function Dedupe(xform) {
                    this.xform = xform;
                    this.last = void 0;
                  }
                  Dedupe.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Dedupe.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Dedupe.prototype["@@transducer/step"] = function(result, input) {
                    if (input !== this.last) {
                      this.last = input;
                      return this.xform["@@transducer/step"](result, input);
                    }
                    return result;
                  };
                  function dedupe(coll) {
                    if (coll) {
                      return seq(coll, dedupe());
                    }
                    return function(xform) {
                      return new Dedupe(xform);
                    };
                  }
                  function TakeWhile(f, xform) {
                    this.xform = xform;
                    this.f = f;
                  }
                  TakeWhile.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  TakeWhile.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  TakeWhile.prototype["@@transducer/step"] = function(result, input) {
                    if (this.f(input)) {
                      return this.xform["@@transducer/step"](result, input);
                    }
                    return new Reduced(result);
                  };
                  function takeWhile(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      return seq(coll, takeWhile(f));
                    }
                    return function(xform) {
                      return new TakeWhile(f, xform);
                    };
                  }
                  function Take(n, xform) {
                    this.n = n;
                    this.i = 0;
                    this.xform = xform;
                  }
                  Take.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Take.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Take.prototype["@@transducer/step"] = function(result, input) {
                    if (this.i < this.n) {
                      result = this.xform["@@transducer/step"](result, input);
                      if (this.i + 1 >= this.n) {
                        result = ensureReduced(result);
                      }
                    }
                    this.i++;
                    return result;
                  };
                  function take(coll, n) {
                    if (isNumber(coll)) {
                      n = coll;
                      coll = null;
                    }
                    if (coll) {
                      return seq(coll, take(n));
                    }
                    return function(xform) {
                      return new Take(n, xform);
                    };
                  }
                  function Drop(n, xform) {
                    this.n = n;
                    this.i = 0;
                    this.xform = xform;
                  }
                  Drop.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Drop.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Drop.prototype["@@transducer/step"] = function(result, input) {
                    if (this.i++ < this.n) {
                      return result;
                    }
                    return this.xform["@@transducer/step"](result, input);
                  };
                  function drop(coll, n) {
                    if (isNumber(coll)) {
                      n = coll;
                      coll = null;
                    }
                    if (coll) {
                      return seq(coll, drop(n));
                    }
                    return function(xform) {
                      return new Drop(n, xform);
                    };
                  }
                  function DropWhile(f, xform) {
                    this.xform = xform;
                    this.f = f;
                    this.dropping = true;
                  }
                  DropWhile.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  DropWhile.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  DropWhile.prototype["@@transducer/step"] = function(result, input) {
                    if (this.dropping) {
                      if (this.f(input)) {
                        return result;
                      } else {
                        this.dropping = false;
                      }
                    }
                    return this.xform["@@transducer/step"](result, input);
                  };
                  function dropWhile(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      return seq(coll, dropWhile(f));
                    }
                    return function(xform) {
                      return new DropWhile(f, xform);
                    };
                  }
                  function Partition(n, xform) {
                    this.n = n;
                    this.i = 0;
                    this.xform = xform;
                    this.part = new Array(n);
                  }
                  Partition.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Partition.prototype["@@transducer/result"] = function(v) {
                    if (this.i > 0) {
                      return ensureUnreduced(this.xform["@@transducer/step"](v, this.part.slice(0, this.i)));
                    }
                    return this.xform["@@transducer/result"](v);
                  };
                  Partition.prototype["@@transducer/step"] = function(result, input) {
                    this.part[this.i] = input;
                    this.i += 1;
                    if (this.i === this.n) {
                      var out = this.part.slice(0, this.n);
                      this.part = new Array(this.n);
                      this.i = 0;
                      return this.xform["@@transducer/step"](result, out);
                    }
                    return result;
                  };
                  function partition(coll, n) {
                    if (isNumber(coll)) {
                      n = coll;
                      coll = null;
                    }
                    if (coll) {
                      return seq(coll, partition(n));
                    }
                    return function(xform) {
                      return new Partition(n, xform);
                    };
                  }
                  var NOTHING = {};
                  function PartitionBy(f, xform) {
                    this.f = f;
                    this.xform = xform;
                    this.part = [];
                    this.last = NOTHING;
                  }
                  PartitionBy.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  PartitionBy.prototype["@@transducer/result"] = function(v) {
                    var l = this.part.length;
                    if (l > 0) {
                      return ensureUnreduced(this.xform["@@transducer/step"](v, this.part.slice(0, l)));
                    }
                    return this.xform["@@transducer/result"](v);
                  };
                  PartitionBy.prototype["@@transducer/step"] = function(result, input) {
                    var current = this.f(input);
                    if (current === this.last || this.last === NOTHING) {
                      this.part.push(input);
                    } else {
                      result = this.xform["@@transducer/step"](result, this.part);
                      this.part = [input];
                    }
                    this.last = current;
                    return result;
                  };
                  function partitionBy(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      return seq(coll, partitionBy(f));
                    }
                    return function(xform) {
                      return new PartitionBy(f, xform);
                    };
                  }
                  function Interpose(sep, xform) {
                    this.sep = sep;
                    this.xform = xform;
                    this.started = false;
                  }
                  Interpose.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Interpose.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Interpose.prototype["@@transducer/step"] = function(result, input) {
                    if (this.started) {
                      var withSep = this.xform["@@transducer/step"](result, this.sep);
                      if (isReduced(withSep)) {
                        return withSep;
                      } else {
                        return this.xform["@@transducer/step"](withSep, input);
                      }
                    } else {
                      this.started = true;
                      return this.xform["@@transducer/step"](result, input);
                    }
                  };
                  function interpose(coll, separator) {
                    if (arguments.length === 1) {
                      separator = coll;
                      return function(xform) {
                        return new Interpose(separator, xform);
                      };
                    }
                    return seq(coll, interpose(separator));
                  }
                  function Repeat(n, xform) {
                    this.xform = xform;
                    this.n = n;
                  }
                  Repeat.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Repeat.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Repeat.prototype["@@transducer/step"] = function(result, input) {
                    var n = this.n;
                    var r = result;
                    for (var i2 = 0; i2 < n; i2++) {
                      r = this.xform["@@transducer/step"](r, input);
                      if (isReduced(r)) {
                        break;
                      }
                    }
                    return r;
                  };
                  function repeat(coll, n) {
                    if (arguments.length === 1) {
                      n = coll;
                      return function(xform) {
                        return new Repeat(n, xform);
                      };
                    }
                    return seq(coll, repeat(n));
                  }
                  function TakeNth(n, xform) {
                    this.xform = xform;
                    this.n = n;
                    this.i = -1;
                  }
                  TakeNth.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  TakeNth.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  TakeNth.prototype["@@transducer/step"] = function(result, input) {
                    this.i += 1;
                    if (this.i % this.n === 0) {
                      return this.xform["@@transducer/step"](result, input);
                    }
                    return result;
                  };
                  function takeNth(coll, nth) {
                    if (arguments.length === 1) {
                      nth = coll;
                      return function(xform) {
                        return new TakeNth(nth, xform);
                      };
                    }
                    return seq(coll, takeNth(nth));
                  }
                  function Cat(xform) {
                    this.xform = xform;
                  }
                  Cat.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Cat.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Cat.prototype["@@transducer/step"] = function(result, input) {
                    var xform = this.xform;
                    var newxform = {};
                    newxform["@@transducer/init"] = function() {
                      return xform["@@transducer/init"]();
                    };
                    newxform["@@transducer/result"] = function(v) {
                      return v;
                    };
                    newxform["@@transducer/step"] = function(result2, input2) {
                      var val = xform["@@transducer/step"](result2, input2);
                      return isReduced(val) ? deref(val) : val;
                    };
                    return reduce(input, newxform, result);
                  };
                  function cat(xform) {
                    return new Cat(xform);
                  }
                  function mapcat(f, ctx) {
                    f = bound(f, ctx);
                    return compose(map(f), cat);
                  }
                  function push(arr, x2) {
                    arr.push(x2);
                    return arr;
                  }
                  function merge(obj2, x2) {
                    if (isArray(x2) && x2.length === 2) {
                      obj2[x2[0]] = x2[1];
                    } else {
                      var keys = Object.keys(x2);
                      var len = keys.length;
                      for (var i2 = 0; i2 < len; i2++) {
                        obj2[keys[i2]] = x2[keys[i2]];
                      }
                    }
                    return obj2;
                  }
                  var arrayReducer = {};
                  arrayReducer["@@transducer/init"] = function() {
                    return [];
                  };
                  arrayReducer["@@transducer/result"] = function(v) {
                    return v;
                  };
                  arrayReducer["@@transducer/step"] = push;
                  var objReducer = {};
                  objReducer["@@transducer/init"] = function() {
                    return {};
                  };
                  objReducer["@@transducer/result"] = function(v) {
                    return v;
                  };
                  objReducer["@@transducer/step"] = merge;
                  function toArray(coll, xform) {
                    if (!xform) {
                      return reduce(coll, arrayReducer, []);
                    }
                    return transduce(coll, xform, arrayReducer, []);
                  }
                  function toObj(coll, xform) {
                    if (!xform) {
                      return reduce(coll, objReducer, {});
                    }
                    return transduce(coll, xform, objReducer, {});
                  }
                  function toIter(coll, xform) {
                    if (!xform) {
                      return iterator(coll);
                    }
                    return new LazyTransformer(xform, coll);
                  }
                  function seq(coll, xform) {
                    if (isArray(coll)) {
                      return transduce(coll, xform, arrayReducer, []);
                    } else if (isObject(coll)) {
                      return transduce(coll, xform, objReducer, {});
                    } else if (coll["@@transducer/step"]) {
                      var init;
                      if (coll["@@transducer/init"]) {
                        init = coll["@@transducer/init"]();
                      } else {
                        init = new coll.constructor();
                      }
                      return transduce(coll, xform, coll, init);
                    } else if (fulfillsProtocol(coll, "iterator")) {
                      return new LazyTransformer(xform, coll);
                    }
                    throwProtocolError("sequence", coll);
                  }
                  function into(to, xform, from) {
                    if (isArray(to)) {
                      return transduce(from, xform, arrayReducer, to);
                    } else if (isObject(to)) {
                      return transduce(from, xform, objReducer, to);
                    } else if (to["@@transducer/step"]) {
                      return transduce(
                        from,
                        xform,
                        to,
                        to
                      );
                    }
                    throwProtocolError("into", to);
                  }
                  var stepper = {};
                  stepper["@@transducer/result"] = function(v) {
                    return isReduced(v) ? deref(v) : v;
                  };
                  stepper["@@transducer/step"] = function(lt, x2) {
                    lt.items.push(x2);
                    return lt.rest;
                  };
                  function Stepper(xform, iter) {
                    this.xform = xform(stepper);
                    this.iter = iter;
                  }
                  Stepper.prototype["@@transducer/step"] = function(lt) {
                    var len = lt.items.length;
                    while (lt.items.length === len) {
                      var n = this.iter.next();
                      if (n.done || isReduced(n.value)) {
                        this.xform["@@transducer/result"](this);
                        break;
                      }
                      this.xform["@@transducer/step"](lt, n.value);
                    }
                  };
                  function LazyTransformer(xform, coll) {
                    this.iter = iterator(coll);
                    this.items = [];
                    this.stepper = new Stepper(xform, iterator(coll));
                  }
                  LazyTransformer.prototype[protocols.iterator] = function() {
                    return this;
                  };
                  LazyTransformer.prototype.next = function() {
                    this["@@transducer/step"]();
                    if (this.items.length) {
                      return {
                        value: this.items.pop(),
                        done: false
                      };
                    } else {
                      return { done: true };
                    }
                  };
                  LazyTransformer.prototype["@@transducer/step"] = function() {
                    if (!this.items.length) {
                      this.stepper["@@transducer/step"](this);
                    }
                  };
                  function range(n) {
                    var arr = new Array(n);
                    for (var i2 = 0; i2 < arr.length; i2++) {
                      arr[i2] = i2;
                    }
                    return arr;
                  }
                  module3.exports = {
                    reduce,
                    transformer,
                    Reduced,
                    isReduced,
                    iterator,
                    push,
                    merge,
                    transduce,
                    seq,
                    toArray,
                    toObj,
                    toIter,
                    into,
                    compose,
                    map,
                    filter: filter2,
                    remove,
                    cat,
                    mapcat,
                    keep,
                    dedupe,
                    take,
                    takeWhile,
                    takeNth,
                    drop,
                    dropWhile,
                    partition,
                    partitionBy,
                    interpose,
                    repeat,
                    range,
                    LazyTransformer
                  };
                })
              ),
              /***/
              616: (
                /***/
                ((module3, exports3, __webpack_require__3) => {
                  "use strict";
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3["default"] = udKefir;
                  var _ud = __webpack_require__3(7332);
                  var Kefir = __webpack_require__3(7249);
                  function udKefir(module4, value) {
                    var key = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
                    var sharedObject = (0, _ud.defonce)(module4, function() {
                      var maybeEmitter;
                      var stream = Kefir.stream(function(_emitter) {
                        maybeEmitter = _emitter;
                      });
                      var property = stream.toProperty();
                      property.onValue(function() {
                      });
                      if (!maybeEmitter) throw new Error("Should not happen, emitter was not set");
                      var emitter = maybeEmitter;
                      return {
                        property,
                        emit: function emit(x2) {
                          emitter.emit(x2);
                        }
                      };
                    }, "--udkefir-" + key);
                    sharedObject.emit(value);
                    return sharedObject.property;
                  }
                  module3.exports = exports3.default;
                  module3.exports["default"] = exports3.default;
                })
              ),
              /***/
              7332: (
                /***/
                ((__unused_webpack_module2, exports3, __webpack_require__3) => {
                  "use strict";
                  Object.defineProperty(exports3, "__esModule", {
                    value: true
                  });
                  exports3.defn = defn;
                  exports3.defobj = defobj;
                  exports3.defonce = defonce;
                  exports3.markReloadable = markReloadable;
                  var range = __webpack_require__3(9060);
                  var zipObject = __webpack_require__3(2118);
                  var moduleUsedUdKeys = /* @__PURE__ */ new WeakMap();
                  function markReloadable(module3) {
                    if (module3.hot) {
                      module3.hot.accept();
                    }
                  }
                  function defonce(module3, fn) {
                    var key = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
                    markReloadable(module3);
                    var usedKeys = moduleUsedUdKeys.get(module3);
                    if (!usedKeys) {
                      usedKeys = /* @__PURE__ */ new Set();
                      moduleUsedUdKeys.set(module3, usedKeys);
                    }
                    if (usedKeys.has(key)) {
                      throw new Error("ud functions can only be used once per module with a given key");
                    }
                    usedKeys.add(key);
                    var valueWasSet = false;
                    var value = void 0;
                    if (module3.hot) {
                      if (module3.hot.data && module3.hot.data.__ud__ && Object.prototype.hasOwnProperty.call(module3.hot.data.__ud__, key)) {
                        value = module3.hot.data.__ud__[key];
                        valueWasSet = true;
                      }
                      module3.hot.dispose(function(data) {
                        if (!data.__ud__) data.__ud__ = {};
                        data.__ud__[key] = value;
                      });
                    }
                    if (!valueWasSet) value = fn();
                    return value;
                  }
                  function defobj(module3, object) {
                    var key = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
                    var sharedObject = defonce(module3, function() {
                      return object;
                    }, "--defobj-" + key);
                    if (sharedObject !== object) {
                      cloneOntoTarget(sharedObject, object);
                    }
                    return sharedObject;
                  }
                  function cloneOntoTarget(target, object) {
                    Object.getOwnPropertyNames(target).filter(function(name) {
                      return !Object.prototype.hasOwnProperty.call(object, name);
                    }).forEach(function(name) {
                      delete target[name];
                    });
                    var newPropsChain = Object.getOwnPropertyNames(object);
                    Object.defineProperties(target, zipObject(newPropsChain, newPropsChain.map(function(name) {
                      return Object.getOwnPropertyDescriptor(object, name);
                    }).filter(Boolean).map(function(_ref) {
                      var value = _ref.value, enumerable = _ref.enumerable;
                      return {
                        value,
                        enumerable,
                        writable: true,
                        configurable: true
                      };
                    })));
                    return target;
                  }
                  function defn(module3, fn) {
                    var key = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
                    var shared = defonce(module3, function() {
                      if (!module3.hot) {
                        return {
                          fn: null,
                          wrapper: fn
                        };
                      }
                      var shared2 = {
                        fn: null,
                        wrapper: null
                      };
                      var paramsList = range(fn.length).map(function(x2) {
                        return "a" + x2;
                      }).join(",");
                      shared2.wrapper = new Function("shared", "\n      'use strict';\n      return function ".concat(fn.name, "__ud_wrapper(").concat(paramsList, ") {\n        if (new.target) {\n          return Reflect.construct(shared.fn, arguments, new.target);\n        } else {\n          return shared.fn.apply(this, arguments);\n        }\n      };\n      "))(shared2);
                      if (fn.prototype) {
                        shared2.wrapper.prototype = Object.create(fn.prototype);
                        shared2.wrapper.prototype.constructor = shared2.wrapper;
                      } else {
                        shared2.wrapper.prototype = fn.prototype;
                      }
                      return shared2;
                    }, "--defn-shared-" + key);
                    shared.fn = fn;
                    if (module3.hot) {
                      if (fn.prototype && shared.wrapper.prototype && Object.getPrototypeOf(shared.wrapper.prototype) !== fn.prototype) {
                        Object.setPrototypeOf(shared.wrapper.prototype, fn.prototype);
                      }
                      Object.setPrototypeOf(shared.wrapper, fn);
                    }
                    return shared.wrapper;
                  }
                })
              ),
              /***/
              1442: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  module3.exports = __webpack_require__3(8453).Observable;
                })
              ),
              /***/
              8453: (
                /***/
                ((__unused_webpack_module2, exports3) => {
                  "use strict";
                  var __webpack_unused_export__;
                  __webpack_unused_export__ = {
                    value: true
                  };
                  exports3.Observable = void 0;
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  function _defineProperties(target, props) {
                    for (var i2 = 0; i2 < props.length; i2++) {
                      var descriptor = props[i2];
                      descriptor.enumerable = descriptor.enumerable || false;
                      descriptor.configurable = true;
                      if ("value" in descriptor) descriptor.writable = true;
                      Object.defineProperty(target, descriptor.key, descriptor);
                    }
                  }
                  function _createClass(Constructor, protoProps, staticProps) {
                    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
                    if (staticProps) _defineProperties(Constructor, staticProps);
                    return Constructor;
                  }
                  var hasSymbols = function() {
                    return typeof Symbol === "function";
                  };
                  var hasSymbol = function(name) {
                    return hasSymbols() && Boolean(Symbol[name]);
                  };
                  var getSymbol = function(name) {
                    return hasSymbol(name) ? Symbol[name] : "@@" + name;
                  };
                  if (hasSymbols() && !hasSymbol("observable")) {
                    Symbol.observable = Symbol("observable");
                  }
                  var SymbolIterator = getSymbol("iterator");
                  var SymbolObservable = getSymbol("observable");
                  var SymbolSpecies = getSymbol("species");
                  function getMethod(obj2, key) {
                    var value = obj2[key];
                    if (value == null) return void 0;
                    if (typeof value !== "function") throw new TypeError(value + " is not a function");
                    return value;
                  }
                  function getSpecies(obj2) {
                    var ctor = obj2.constructor;
                    if (ctor !== void 0) {
                      ctor = ctor[SymbolSpecies];
                      if (ctor === null) {
                        ctor = void 0;
                      }
                    }
                    return ctor !== void 0 ? ctor : Observable;
                  }
                  function isObservable(x2) {
                    return x2 instanceof Observable;
                  }
                  function hostReportError(e) {
                    if (hostReportError.log) {
                      hostReportError.log(e);
                    } else {
                      setTimeout(function() {
                        throw e;
                      });
                    }
                  }
                  function enqueue(fn) {
                    Promise.resolve().then(function() {
                      try {
                        fn();
                      } catch (e) {
                        hostReportError(e);
                      }
                    });
                  }
                  function cleanupSubscription(subscription) {
                    var cleanup = subscription._cleanup;
                    if (cleanup === void 0) return;
                    subscription._cleanup = void 0;
                    if (!cleanup) {
                      return;
                    }
                    try {
                      if (typeof cleanup === "function") {
                        cleanup();
                      } else {
                        var unsubscribe = getMethod(cleanup, "unsubscribe");
                        if (unsubscribe) {
                          unsubscribe.call(cleanup);
                        }
                      }
                    } catch (e) {
                      hostReportError(e);
                    }
                  }
                  function closeSubscription(subscription) {
                    subscription._observer = void 0;
                    subscription._queue = void 0;
                    subscription._state = "closed";
                  }
                  function flushSubscription(subscription) {
                    var queue = subscription._queue;
                    if (!queue) {
                      return;
                    }
                    subscription._queue = void 0;
                    subscription._state = "ready";
                    for (var i2 = 0; i2 < queue.length; ++i2) {
                      notifySubscription(subscription, queue[i2].type, queue[i2].value);
                      if (subscription._state === "closed") break;
                    }
                  }
                  function notifySubscription(subscription, type, value) {
                    subscription._state = "running";
                    var observer = subscription._observer;
                    try {
                      var m = getMethod(observer, type);
                      switch (type) {
                        case "next":
                          if (m) m.call(observer, value);
                          break;
                        case "error":
                          closeSubscription(subscription);
                          if (m) m.call(observer, value);
                          else throw value;
                          break;
                        case "complete":
                          closeSubscription(subscription);
                          if (m) m.call(observer);
                          break;
                      }
                    } catch (e) {
                      hostReportError(e);
                    }
                    if (subscription._state === "closed") cleanupSubscription(subscription);
                    else if (subscription._state === "running") subscription._state = "ready";
                  }
                  function onNotify(subscription, type, value) {
                    if (subscription._state === "closed") return;
                    if (subscription._state === "buffering") {
                      subscription._queue.push({
                        type,
                        value
                      });
                      return;
                    }
                    if (subscription._state !== "ready") {
                      subscription._state = "buffering";
                      subscription._queue = [{
                        type,
                        value
                      }];
                      enqueue(function() {
                        return flushSubscription(subscription);
                      });
                      return;
                    }
                    notifySubscription(subscription, type, value);
                  }
                  var Subscription = /* @__PURE__ */ (function() {
                    function Subscription2(observer, subscriber) {
                      _classCallCheck(this, Subscription2);
                      this._cleanup = void 0;
                      this._observer = observer;
                      this._queue = void 0;
                      this._state = "initializing";
                      var subscriptionObserver = new SubscriptionObserver(this);
                      try {
                        this._cleanup = subscriber.call(void 0, subscriptionObserver);
                      } catch (e) {
                        subscriptionObserver.error(e);
                      }
                      if (this._state === "initializing") this._state = "ready";
                    }
                    _createClass(Subscription2, [{
                      key: "unsubscribe",
                      value: function unsubscribe() {
                        if (this._state !== "closed") {
                          closeSubscription(this);
                          cleanupSubscription(this);
                        }
                      }
                    }, {
                      key: "closed",
                      get: function() {
                        return this._state === "closed";
                      }
                    }]);
                    return Subscription2;
                  })();
                  var SubscriptionObserver = /* @__PURE__ */ (function() {
                    function SubscriptionObserver2(subscription) {
                      _classCallCheck(this, SubscriptionObserver2);
                      this._subscription = subscription;
                    }
                    _createClass(SubscriptionObserver2, [{
                      key: "next",
                      value: function next(value) {
                        onNotify(this._subscription, "next", value);
                      }
                    }, {
                      key: "error",
                      value: function error(value) {
                        onNotify(this._subscription, "error", value);
                      }
                    }, {
                      key: "complete",
                      value: function complete() {
                        onNotify(this._subscription, "complete");
                      }
                    }, {
                      key: "closed",
                      get: function() {
                        return this._subscription._state === "closed";
                      }
                    }]);
                    return SubscriptionObserver2;
                  })();
                  var Observable = /* @__PURE__ */ (function() {
                    function Observable2(subscriber) {
                      _classCallCheck(this, Observable2);
                      if (!(this instanceof Observable2)) throw new TypeError("Observable cannot be called as a function");
                      if (typeof subscriber !== "function") throw new TypeError("Observable initializer must be a function");
                      this._subscriber = subscriber;
                    }
                    _createClass(Observable2, [{
                      key: "subscribe",
                      value: function subscribe(observer) {
                        if (typeof observer !== "object" || observer === null) {
                          observer = {
                            next: observer,
                            error: arguments[1],
                            complete: arguments[2]
                          };
                        }
                        return new Subscription(observer, this._subscriber);
                      }
                    }, {
                      key: "forEach",
                      value: function forEach(fn) {
                        var _this = this;
                        return new Promise(function(resolve, reject) {
                          if (typeof fn !== "function") {
                            reject(new TypeError(fn + " is not a function"));
                            return;
                          }
                          function done() {
                            subscription.unsubscribe();
                            resolve();
                          }
                          var subscription = _this.subscribe({
                            next: function(value) {
                              try {
                                fn(value, done);
                              } catch (e) {
                                reject(e);
                                subscription.unsubscribe();
                              }
                            },
                            error: reject,
                            complete: resolve
                          });
                        });
                      }
                    }, {
                      key: "map",
                      value: function map(fn) {
                        var _this2 = this;
                        if (typeof fn !== "function") throw new TypeError(fn + " is not a function");
                        var C = getSpecies(this);
                        return new C(function(observer) {
                          return _this2.subscribe({
                            next: function(value) {
                              try {
                                value = fn(value);
                              } catch (e) {
                                return observer.error(e);
                              }
                              observer.next(value);
                            },
                            error: function(e) {
                              observer.error(e);
                            },
                            complete: function() {
                              observer.complete();
                            }
                          });
                        });
                      }
                    }, {
                      key: "filter",
                      value: function filter2(fn) {
                        var _this3 = this;
                        if (typeof fn !== "function") throw new TypeError(fn + " is not a function");
                        var C = getSpecies(this);
                        return new C(function(observer) {
                          return _this3.subscribe({
                            next: function(value) {
                              try {
                                if (!fn(value)) return;
                              } catch (e) {
                                return observer.error(e);
                              }
                              observer.next(value);
                            },
                            error: function(e) {
                              observer.error(e);
                            },
                            complete: function() {
                              observer.complete();
                            }
                          });
                        });
                      }
                    }, {
                      key: "reduce",
                      value: function reduce(fn) {
                        var _this4 = this;
                        if (typeof fn !== "function") throw new TypeError(fn + " is not a function");
                        var C = getSpecies(this);
                        var hasSeed = arguments.length > 1;
                        var hasValue = false;
                        var seed = arguments[1];
                        var acc = seed;
                        return new C(function(observer) {
                          return _this4.subscribe({
                            next: function(value) {
                              var first2 = !hasValue;
                              hasValue = true;
                              if (!first2 || hasSeed) {
                                try {
                                  acc = fn(acc, value);
                                } catch (e) {
                                  return observer.error(e);
                                }
                              } else {
                                acc = value;
                              }
                            },
                            error: function(e) {
                              observer.error(e);
                            },
                            complete: function() {
                              if (!hasValue && !hasSeed) return observer.error(new TypeError("Cannot reduce an empty sequence"));
                              observer.next(acc);
                              observer.complete();
                            }
                          });
                        });
                      }
                    }, {
                      key: "concat",
                      value: function concat() {
                        var _this5 = this;
                        for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {
                          sources[_key] = arguments[_key];
                        }
                        var C = getSpecies(this);
                        return new C(function(observer) {
                          var subscription;
                          var index = 0;
                          function startNext(next) {
                            subscription = next.subscribe({
                              next: function(v) {
                                observer.next(v);
                              },
                              error: function(e) {
                                observer.error(e);
                              },
                              complete: function() {
                                if (index === sources.length) {
                                  subscription = void 0;
                                  observer.complete();
                                } else {
                                  startNext(C.from(sources[index++]));
                                }
                              }
                            });
                          }
                          startNext(_this5);
                          return function() {
                            if (subscription) {
                              subscription.unsubscribe();
                              subscription = void 0;
                            }
                          };
                        });
                      }
                    }, {
                      key: "flatMap",
                      value: function flatMap(fn) {
                        var _this6 = this;
                        if (typeof fn !== "function") throw new TypeError(fn + " is not a function");
                        var C = getSpecies(this);
                        return new C(function(observer) {
                          var subscriptions = [];
                          var outer = _this6.subscribe({
                            next: function(value) {
                              if (fn) {
                                try {
                                  value = fn(value);
                                } catch (e) {
                                  return observer.error(e);
                                }
                              }
                              var inner = C.from(value).subscribe({
                                next: function(value2) {
                                  observer.next(value2);
                                },
                                error: function(e) {
                                  observer.error(e);
                                },
                                complete: function() {
                                  var i2 = subscriptions.indexOf(inner);
                                  if (i2 >= 0) subscriptions.splice(i2, 1);
                                  completeIfDone();
                                }
                              });
                              subscriptions.push(inner);
                            },
                            error: function(e) {
                              observer.error(e);
                            },
                            complete: function() {
                              completeIfDone();
                            }
                          });
                          function completeIfDone() {
                            if (outer.closed && subscriptions.length === 0) observer.complete();
                          }
                          return function() {
                            subscriptions.forEach(function(s) {
                              return s.unsubscribe();
                            });
                            outer.unsubscribe();
                          };
                        });
                      }
                    }, {
                      key: SymbolObservable,
                      value: function() {
                        return this;
                      }
                    }], [{
                      key: "from",
                      value: function from(x2) {
                        var C = typeof this === "function" ? this : Observable2;
                        if (x2 == null) throw new TypeError(x2 + " is not an object");
                        var method = getMethod(x2, SymbolObservable);
                        if (method) {
                          var observable = method.call(x2);
                          if (Object(observable) !== observable) throw new TypeError(observable + " is not an object");
                          if (isObservable(observable) && observable.constructor === C) return observable;
                          return new C(function(observer) {
                            return observable.subscribe(observer);
                          });
                        }
                        if (hasSymbol("iterator")) {
                          method = getMethod(x2, SymbolIterator);
                          if (method) {
                            return new C(function(observer) {
                              enqueue(function() {
                                if (observer.closed) return;
                                var _iteratorNormalCompletion = true;
                                var _didIteratorError = false;
                                var _iteratorError = void 0;
                                try {
                                  for (var _iterator = method.call(x2)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                                    var _item = _step.value;
                                    observer.next(_item);
                                    if (observer.closed) return;
                                  }
                                } catch (err) {
                                  _didIteratorError = true;
                                  _iteratorError = err;
                                } finally {
                                  try {
                                    if (!_iteratorNormalCompletion && _iterator.return != null) {
                                      _iterator.return();
                                    }
                                  } finally {
                                    if (_didIteratorError) {
                                      throw _iteratorError;
                                    }
                                  }
                                }
                                observer.complete();
                              });
                            });
                          }
                        }
                        if (Array.isArray(x2)) {
                          return new C(function(observer) {
                            enqueue(function() {
                              if (observer.closed) return;
                              for (var i2 = 0; i2 < x2.length; ++i2) {
                                observer.next(x2[i2]);
                                if (observer.closed) return;
                              }
                              observer.complete();
                            });
                          });
                        }
                        throw new TypeError(x2 + " is not observable");
                      }
                    }, {
                      key: "of",
                      value: function of() {
                        for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                          items[_key2] = arguments[_key2];
                        }
                        var C = typeof this === "function" ? this : Observable2;
                        return new C(function(observer) {
                          enqueue(function() {
                            if (observer.closed) return;
                            for (var i2 = 0; i2 < items.length; ++i2) {
                              observer.next(items[i2]);
                              if (observer.closed) return;
                            }
                            observer.complete();
                          });
                        });
                      }
                    }, {
                      key: SymbolSpecies,
                      get: function() {
                        return this;
                      }
                    }]);
                    return Observable2;
                  })();
                  exports3.Observable = Observable;
                  if (hasSymbols()) {
                    Object.defineProperty(Observable, Symbol("extensions"), {
                      value: {
                        symbol: SymbolObservable,
                        hostReportError
                      },
                      configurable: true
                    });
                  }
                })
              ),
              /***/
              2118: (
                /***/
                ((module3) => {
                  var zipObject = function(keys, values) {
                    if (arguments.length == 1) {
                      values = keys[1];
                      keys = keys[0];
                    }
                    var result = {};
                    var i2 = 0;
                    for (i2; i2 < keys.length; i2 += 1) {
                      result[keys[i2]] = values[i2];
                    }
                    return result;
                  };
                  module3.exports = zipObject;
                })
              ),
              /***/
              6332: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/dpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzMjIxMUU0REM1MTExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1QzhERjZDREM1MDExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIElsbHVzdHJhdG9yIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzliZDBjZTYtYWVjMy00NWZkLThkOTktMzJhOTNhMTkxZGM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmQ4ZGVjMWJhLTk5NGEtNGViMC04NzE4LTdhMGJkN2FlOGY4OCIvPiA8ZGM6dGl0bGU+IDxyZGY6QWx0PiA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPmdseXBoaWNvbnM8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvfrd2cAAANXSURBVHja5JrPaxNBFMe72wj1lFM8pNUcelLaQFLJRYptDgVBBe9F/BdyzV8h6bWQq0iKQQWhl1psL14VPPQUtErbS3owpIhdv6Mvsl1m3rz9FZv1wZeBdHbmfTozb2fejuN53lSS5jhOCcVNSJUFaJr+9BM6gXrQJ/TbS7LfXAKO51E8gB5Cd6FrwueOUexCL6FXADuN5YgakSiClaE2NFDNxNSA2ipH9icCwDy0BZ0nABDUObU9nxoITcMmNEwBIKgh9ZVLFARWhPbHABCU6rOYCAhsCfr2DyBGUn0v2fx0uPCLyLKK4gWUF8aOr9Ab+k9+hD7TNFE2A81Bi9Ad6B6NtMRURHsEX3dCRy0aib5wgXahOuSGWHMuPdMVBo4+NzLcmpBMp3dQJWrI9PVXgfaE06woAqHoZFvYZ1BDzb64EL5+HWrzTBAAchKQpmCIl5MC0PS/LJjSTRaEXnZDC8RCWhA+PxYsMMPgSzPYwJZlOi0za6oFVUM4W4WeGuf8n5HhpllHC0J7Jy56NAwdzkIHvhGrCSBqvv+4enbWUK9hiZZlHUjbEp0cC4QngQlAeBwMBQAumrUvgNALb8CQV4QQLIwBwgZTYWaK8jnvB1lnqLuGNXEgiG41IYQfpqjpr8s8s+4Hec5UrGsabgn3SX0CqAl3CUobmv7qTP1nfpAjQ6VD3baDIk4/BEyYurcN25lDwzNHo/1iiWl4M+SijSNbkNhkni25lCgw2T6z2XyPYo12pnFNtbFGbYb2RTG4NCIm+2A57ycBI4Gw+fJ7RApMhS+C5EUcGCmEzZeCArnCVBgKMzFRYMJA2HyZdullY/RxajLMdSkDaLKrwmSbimDbIY7Eo93ENj0rsRnmbz9cSmOabC4liCgwnC8nLuViTbaYIkRYGM6XXmZeiJdxi1KNskVxaWjeGoZM7XJXNL8/Fk6nUwrL0tCs2nyi+X2FyYHt/M1rZWkbP6kHq+8XDlaCo+7eRBx1M5V8iJkOUjAbukORJR3USjwdlKkEXWZSpplKYmfms8KkfugZ16c3j84212khj+/T26R9DP1/Pk9n6sKA5qXZSfEKRyfVKxyX/VKNE/e+lu+a031oVXrNCXZMh6LXSVxzclK4eHYDxa1xXzz7JcAA2eNXdJTLzjAAAAAASUVORK5CYII=";
                })
              ),
              /***/
              6948: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAA30lEQVR4Ae3RO04EMRgE4Q45hlkuxWMPCwdBLNxjZQJPNBkq4U7qm9x/lyb6A0mSJEmSJEmS9NB/iXjKV57DJdd8ZmSzS34yc+cJueaemVvG/vnzSODz596ES77XUZxwzN+b8HjM5wlva/7uhI91DCes+efvPf9u5AYSTvMbfwAm9OfzhNf2fJbQn48S+vNRQn8+SujPRwn9+SjhpT+fJPTno4T+fJTQnw8T+PxyAp/fT+Dz+wl8fj+Bz28n8PnVBD6/msDnVxP4/GoCn99MYPP7xmm+JEmSJEmSJEmSfgG9E96X0mx7vAAAAABJRU5ErkJggg==";
                })
              ),
              /***/
              6306: (
                /***/
                ((module3) => {
                  "use strict";
                  module3.exports = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI2cHgiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDYgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Q29tYmluZWQgU2hhcGU8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iRkluYWxzLSoqSmFuLTkqKiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iU2lkZWJhci1jbG9zZWQtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIC0xNC4wMDAwMDApIiBmaWxsPSIjQUFBQUFBIj4gICAgICAgICAgICA8ZyBpZD0iU2lkZWJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgPGcgaWQ9IkJveC1pbmZvLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcmlwcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxNC41MDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC42NjY2NjY2NjcsNS40MTY2NjY2NyBDMC42NjY2NjY2NjcsNC44NjQzODE5MiAxLjExMDUzMTQ5LDQuNDE2NjY2NjcgMS42NjY2NjY2Nyw0LjQxNjY2NjY3IEMyLjIxODk1MTQyLDQuNDE2NjY2NjcgMi42NjY2NjY2Nyw0Ljg2MDUzMTQ5IDIuNjY2NjY2NjcsNS40MTY2NjY2NyBDMi42NjY2NjY2Nyw1Ljk2ODk1MTQyIDIuMjIyODAxODQsNi40MTY2NjY2NyAxLjY2NjY2NjY3LDYuNDE2NjY2NjcgQzEuMTE0MzgxOTIsNi40MTY2NjY2NyAwLjY2NjY2NjY2Nyw1Ljk3MjgwMTg0IDAuNjY2NjY2NjY3LDUuNDE2NjY2NjcgWiBNMC42NjY2NjY2NjcsMS4yNSBDMC42NjY2NjY2NjcsMC42OTc3MTUyNSAxLjExMDUzMTQ5LDAuMjUgMS42NjY2NjY2NywwLjI1IEMyLjIxODk1MTQyLDAuMjUgMi42NjY2NjY2NywwLjY5Mzg2NDgyMiAyLjY2NjY2NjY3LDEuMjUgQzIuNjY2NjY2NjcsMS44MDIyODQ3NSAyLjIyMjgwMTg0LDIuMjUgMS42NjY2NjY2NywyLjI1IEMxLjExNDM4MTkyLDIuMjUgMC42NjY2NjY2NjcsMS44MDYxMzUxOCAwLjY2NjY2NjY2NywxLjI1IFogTTAuNjY2NjY2NjY3LDkuNTgzMzMzMzMgQzAuNjY2NjY2NjY3LDkuMDMxMDQ4NTggMS4xMTA1MzE0OSw4LjU4MzMzMzMzIDEuNjY2NjY2NjcsOC41ODMzMzMzMyBDMi4yMTg5NTE0Miw4LjU4MzMzMzMzIDIuNjY2NjY2NjcsOS4wMjcxOTgxNiAyLjY2NjY2NjY3LDkuNTgzMzMzMzMgQzIuNjY2NjY2NjcsMTAuMTM1NjE4MSAyLjIyMjgwMTg0LDEwLjU4MzMzMzMgMS42NjY2NjY2NywxMC41ODMzMzMzIEMxLjExNDM4MTkyLDEwLjU4MzMzMzMgMC42NjY2NjY2NjcsMTAuMTM5NDY4NSAwLjY2NjY2NjY2Nyw5LjU4MzMzMzMzIFogTTMuMzAwMDAwMTksMS4yNSBDMy4zMDAwMDAxOSwwLjY5NzcxNTI1IDMuNzQzODY1MDEsMC4yNSA0LjMwMDAwMDE5LDAuMjUgQzQuODUyMjg0OTQsMC4yNSA1LjMwMDAwMDE5LDAuNjkzODY0ODIyIDUuMzAwMDAwMTksMS4yNSBDNS4zMDAwMDAxOSwxLjgwMjI4NDc1IDQuODU2MTM1MzcsMi4yNSA0LjMwMDAwMDE5LDIuMjUgQzMuNzQ3NzE1NDQsMi4yNSAzLjMwMDAwMDE5LDEuODA2MTM1MTggMy4zMDAwMDAxOSwxLjI1IFogTTMuMzAwMDAwMTksNS40MTY2NjY2NyBDMy4zMDAwMDAxOSw0Ljg2NDM4MTkyIDMuNzQzODY1MDEsNC40MTY2NjY2NyA0LjMwMDAwMDE5LDQuNDE2NjY2NjcgQzQuODUyMjg0OTQsNC40MTY2NjY2NyA1LjMwMDAwMDE5LDQuODYwNTMxNDkgNS4zMDAwMDAxOSw1LjQxNjY2NjY3IEM1LjMwMDAwMDE5LDUuOTY4OTUxNDIgNC44NTYxMzUzNyw2LjQxNjY2NjY3IDQuMzAwMDAwMTksNi40MTY2NjY2NyBDMy43NDc3MTU0NCw2LjQxNjY2NjY3IDMuMzAwMDAwMTksNS45NzI4MDE4NCAzLjMwMDAwMDE5LDUuNDE2NjY2NjcgWiBNMy4zMDAwMDAxOSw5LjU4MzMzMzMzIEMzLjMwMDAwMDE5LDkuMDMxMDQ4NTggMy43NDM4NjUwMSw4LjU4MzMzMzMzIDQuMzAwMDAwMTksOC41ODMzMzMzMyBDNC44NTIyODQ5NCw4LjU4MzMzMzMzIDUuMzAwMDAwMTksOS4wMjcxOTgxNiA1LjMwMDAwMDE5LDkuNTgzMzMzMzMgQzUuMzAwMDAwMTksMTAuMTM1NjE4MSA0Ljg1NjEzNTM3LDEwLjU4MzMzMzMgNC4zMDAwMDAxOSwxMC41ODMzMzMzIEMzLjc0NzcxNTQ0LDEwLjU4MzMzMzMgMy4zMDAwMDAxOSwxMC4xMzk0Njg1IDMuMzAwMDAwMTksOS41ODMzMzMzMyBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==";
                })
              ),
              /***/
              8915: (
                /***/
                ((module3) => {
                  function _arrayLikeToArray(arr, len) {
                    if (len == null || len > arr.length) len = arr.length;
                    for (var i2 = 0, arr2 = new Array(len); i2 < len; i2++) arr2[i2] = arr[i2];
                    return arr2;
                  }
                  module3.exports = _arrayLikeToArray, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              3783: (
                /***/
                ((module3) => {
                  function _arrayWithHoles(arr) {
                    if (Array.isArray(arr)) return arr;
                  }
                  module3.exports = _arrayWithHoles, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              7111: (
                /***/
                ((module3) => {
                  function _assertThisInitialized(self2) {
                    if (self2 === void 0) {
                      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    }
                    return self2;
                  }
                  module3.exports = _assertThisInitialized, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              9131: (
                /***/
                ((module3) => {
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  module3.exports = _classCallCheck, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              8463: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var toPropertyKey = __webpack_require__3(4676);
                  function _defineProperties(target, props) {
                    for (var i2 = 0; i2 < props.length; i2++) {
                      var descriptor = props[i2];
                      descriptor.enumerable = descriptor.enumerable || false;
                      descriptor.configurable = true;
                      if ("value" in descriptor) descriptor.writable = true;
                      Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);
                    }
                  }
                  function _createClass(Constructor, protoProps, staticProps) {
                    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
                    if (staticProps) _defineProperties(Constructor, staticProps);
                    Object.defineProperty(Constructor, "prototype", {
                      writable: false
                    });
                    return Constructor;
                  }
                  module3.exports = _createClass, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              5985: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var toPropertyKey = __webpack_require__3(4676);
                  function _defineProperty(obj2, key, value) {
                    key = toPropertyKey(key);
                    if (key in obj2) {
                      Object.defineProperty(obj2, key, {
                        value,
                        enumerable: true,
                        configurable: true,
                        writable: true
                      });
                    } else {
                      obj2[key] = value;
                    }
                    return obj2;
                  }
                  module3.exports = _defineProperty, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              4718: (
                /***/
                ((module3) => {
                  function _extends() {
                    module3.exports = _extends = Object.assign ? Object.assign.bind() : function(target) {
                      for (var i2 = 1; i2 < arguments.length; i2++) {
                        var source = arguments[i2];
                        for (var key in source) {
                          if (Object.prototype.hasOwnProperty.call(source, key)) {
                            target[key] = source[key];
                          }
                        }
                      }
                      return target;
                    }, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                    return _extends.apply(this, arguments);
                  }
                  module3.exports = _extends, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              2132: (
                /***/
                ((module3) => {
                  function _getPrototypeOf(o) {
                    module3.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf2(o2) {
                      return o2.__proto__ || Object.getPrototypeOf(o2);
                    }, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                    return _getPrototypeOf(o);
                  }
                  module3.exports = _getPrototypeOf, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              5075: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var setPrototypeOf = __webpack_require__3(5344);
                  function _inherits(subClass, superClass) {
                    if (typeof superClass !== "function" && superClass !== null) {
                      throw new TypeError("Super expression must either be null or a function");
                    }
                    subClass.prototype = Object.create(superClass && superClass.prototype, {
                      constructor: {
                        value: subClass,
                        writable: true,
                        configurable: true
                      }
                    });
                    Object.defineProperty(subClass, "prototype", {
                      writable: false
                    });
                    if (superClass) setPrototypeOf(subClass, superClass);
                  }
                  module3.exports = _inherits, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              1654: (
                /***/
                ((module3) => {
                  function _interopRequireDefault(obj2) {
                    return obj2 && obj2.__esModule ? obj2 : {
                      "default": obj2
                    };
                  }
                  module3.exports = _interopRequireDefault, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              9485: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var _typeof = __webpack_require__3(2990)["default"];
                  function _getRequireWildcardCache(nodeInterop) {
                    if (typeof WeakMap !== "function") return null;
                    var cacheBabelInterop = /* @__PURE__ */ new WeakMap();
                    var cacheNodeInterop = /* @__PURE__ */ new WeakMap();
                    return (_getRequireWildcardCache = function _getRequireWildcardCache2(nodeInterop2) {
                      return nodeInterop2 ? cacheNodeInterop : cacheBabelInterop;
                    })(nodeInterop);
                  }
                  function _interopRequireWildcard(obj2, nodeInterop) {
                    if (!nodeInterop && obj2 && obj2.__esModule) {
                      return obj2;
                    }
                    if (obj2 === null || _typeof(obj2) !== "object" && typeof obj2 !== "function") {
                      return {
                        "default": obj2
                      };
                    }
                    var cache = _getRequireWildcardCache(nodeInterop);
                    if (cache && cache.has(obj2)) {
                      return cache.get(obj2);
                    }
                    var newObj = {};
                    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var key in obj2) {
                      if (key !== "default" && Object.prototype.hasOwnProperty.call(obj2, key)) {
                        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj2, key) : null;
                        if (desc && (desc.get || desc.set)) {
                          Object.defineProperty(newObj, key, desc);
                        } else {
                          newObj[key] = obj2[key];
                        }
                      }
                    }
                    newObj["default"] = obj2;
                    if (cache) {
                      cache.set(obj2, newObj);
                    }
                    return newObj;
                  }
                  module3.exports = _interopRequireWildcard, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              4067: (
                /***/
                ((module3) => {
                  function _iterableToArrayLimit(r, l) {
                    var t2 = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"];
                    if (null != t2) {
                      var e, n, i2, u, a = [], f = true, o = false;
                      try {
                        if (i2 = (t2 = t2.call(r)).next, 0 === l) {
                          if (Object(t2) !== t2) return;
                          f = false;
                        } else for (; !(f = (e = i2.call(t2)).done) && (a.push(e.value), a.length !== l); f = true) ;
                      } catch (r2) {
                        o = true, n = r2;
                      } finally {
                        try {
                          if (!f && null != t2["return"] && (u = t2["return"](), Object(u) !== u)) return;
                        } finally {
                          if (o) throw n;
                        }
                      }
                      return a;
                    }
                  }
                  module3.exports = _iterableToArrayLimit, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              9340: (
                /***/
                ((module3) => {
                  function _nonIterableRest() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                  }
                  module3.exports = _nonIterableRest, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              2595: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var defineProperty = __webpack_require__3(5985);
                  function _objectSpread(target) {
                    for (var i2 = 1; i2 < arguments.length; i2++) {
                      var source = arguments[i2] != null ? Object(arguments[i2]) : {};
                      var ownKeys = Object.keys(source);
                      if (typeof Object.getOwnPropertySymbols === "function") {
                        ownKeys.push.apply(ownKeys, Object.getOwnPropertySymbols(source).filter(function(sym) {
                          return Object.getOwnPropertyDescriptor(source, sym).enumerable;
                        }));
                      }
                      ownKeys.forEach(function(key) {
                        defineProperty(target, key, source[key]);
                      });
                    }
                    return target;
                  }
                  module3.exports = _objectSpread, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              1059: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var objectWithoutPropertiesLoose = __webpack_require__3(5537);
                  function _objectWithoutProperties(source, excluded) {
                    if (source == null) return {};
                    var target = objectWithoutPropertiesLoose(source, excluded);
                    var key, i2;
                    if (Object.getOwnPropertySymbols) {
                      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
                      for (i2 = 0; i2 < sourceSymbolKeys.length; i2++) {
                        key = sourceSymbolKeys[i2];
                        if (excluded.indexOf(key) >= 0) continue;
                        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
                        target[key] = source[key];
                      }
                    }
                    return target;
                  }
                  module3.exports = _objectWithoutProperties, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              5537: (
                /***/
                ((module3) => {
                  function _objectWithoutPropertiesLoose(source, excluded) {
                    if (source == null) return {};
                    var target = {};
                    var sourceKeys = Object.keys(source);
                    var key, i2;
                    for (i2 = 0; i2 < sourceKeys.length; i2++) {
                      key = sourceKeys[i2];
                      if (excluded.indexOf(key) >= 0) continue;
                      target[key] = source[key];
                    }
                    return target;
                  }
                  module3.exports = _objectWithoutPropertiesLoose, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              5432: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var _typeof = __webpack_require__3(2990)["default"];
                  var assertThisInitialized = __webpack_require__3(7111);
                  function _possibleConstructorReturn(self2, call) {
                    if (call && (_typeof(call) === "object" || typeof call === "function")) {
                      return call;
                    } else if (call !== void 0) {
                      throw new TypeError("Derived constructors may only return object or undefined");
                    }
                    return assertThisInitialized(self2);
                  }
                  module3.exports = _possibleConstructorReturn, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              5344: (
                /***/
                ((module3) => {
                  function _setPrototypeOf(o, p) {
                    module3.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf2(o2, p2) {
                      o2.__proto__ = p2;
                      return o2;
                    }, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                    return _setPrototypeOf(o, p);
                  }
                  module3.exports = _setPrototypeOf, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              6583: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayWithHoles = __webpack_require__3(3783);
                  var iterableToArrayLimit = __webpack_require__3(4067);
                  var unsupportedIterableToArray = __webpack_require__3(6030);
                  var nonIterableRest = __webpack_require__3(9340);
                  function _slicedToArray(arr, i2) {
                    return arrayWithHoles(arr) || iterableToArrayLimit(arr, i2) || unsupportedIterableToArray(arr, i2) || nonIterableRest();
                  }
                  module3.exports = _slicedToArray, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              8705: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var _typeof = __webpack_require__3(2990)["default"];
                  function _toPrimitive(input, hint) {
                    if (_typeof(input) !== "object" || input === null) return input;
                    var prim = input[Symbol.toPrimitive];
                    if (prim !== void 0) {
                      var res2 = prim.call(input, hint || "default");
                      if (_typeof(res2) !== "object") return res2;
                      throw new TypeError("@@toPrimitive must return a primitive value.");
                    }
                    return (hint === "string" ? String : Number)(input);
                  }
                  module3.exports = _toPrimitive, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              4676: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var _typeof = __webpack_require__3(2990)["default"];
                  var toPrimitive = __webpack_require__3(8705);
                  function _toPropertyKey(arg) {
                    var key = toPrimitive(arg, "string");
                    return _typeof(key) === "symbol" ? key : String(key);
                  }
                  module3.exports = _toPropertyKey, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              2990: (
                /***/
                ((module3) => {
                  function _typeof(o) {
                    "@babel/helpers - typeof";
                    return module3.exports = _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o2) {
                      return typeof o2;
                    } : function(o2) {
                      return o2 && "function" == typeof Symbol && o2.constructor === Symbol && o2 !== Symbol.prototype ? "symbol" : typeof o2;
                    }, module3.exports.__esModule = true, module3.exports["default"] = module3.exports, _typeof(o);
                  }
                  module3.exports = _typeof, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              ),
              /***/
              6030: (
                /***/
                ((module3, __unused_webpack_exports, __webpack_require__3) => {
                  var arrayLikeToArray = __webpack_require__3(8915);
                  function _unsupportedIterableToArray(o, minLen) {
                    if (!o) return;
                    if (typeof o === "string") return arrayLikeToArray(o, minLen);
                    var n = Object.prototype.toString.call(o).slice(8, -1);
                    if (n === "Object" && o.constructor) n = o.constructor.name;
                    if (n === "Map" || n === "Set") return Array.from(o);
                    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);
                  }
                  module3.exports = _unsupportedIterableToArray, module3.exports.__esModule = true, module3.exports["default"] = module3.exports;
                })
              )
              /******/
            };
            var __webpack_module_cache__2 = {};
            function __webpack_require__2(moduleId) {
              var cachedModule = __webpack_module_cache__2[moduleId];
              if (cachedModule !== void 0) {
                return cachedModule.exports;
              }
              var module3 = __webpack_module_cache__2[moduleId] = {
                /******/
                id: moduleId,
                /******/
                loaded: false,
                /******/
                exports: {}
                /******/
              };
              __webpack_modules__2[moduleId].call(module3.exports, module3, module3.exports, __webpack_require__2);
              module3.loaded = true;
              return module3.exports;
            }
            __webpack_require__2.m = __webpack_modules__2;
            (() => {
              __webpack_require__2.n = (module3) => {
                var getter = module3 && module3.__esModule ? (
                  /******/
                  () => module3["default"]
                ) : (
                  /******/
                  () => module3
                );
                __webpack_require__2.d(getter, { a: getter });
                return getter;
              };
            })();
            (() => {
              __webpack_require__2.d = (exports3, definition) => {
                for (var key in definition) {
                  if (__webpack_require__2.o(definition, key) && !__webpack_require__2.o(exports3, key)) {
                    Object.defineProperty(exports3, key, { enumerable: true, get: definition[key] });
                  }
                }
              };
            })();
            (() => {
              __webpack_require__2.g = (function() {
                if (typeof globalThis === "object") return globalThis;
                try {
                  return this || new Function("return this")();
                } catch (e) {
                  if (typeof window === "object") return window;
                }
              })();
            })();
            (() => {
              __webpack_require__2.hmd = (module3) => {
                module3 = Object.create(module3);
                if (!module3.children) module3.children = [];
                Object.defineProperty(module3, "exports", {
                  /******/
                  enumerable: true,
                  /******/
                  set: () => {
                    throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: " + module3.id);
                  }
                  /******/
                });
                return module3;
              };
            })();
            (() => {
              __webpack_require__2.o = (obj2, prop) => Object.prototype.hasOwnProperty.call(obj2, prop);
            })();
            (() => {
              __webpack_require__2.r = (exports3) => {
                if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
                  Object.defineProperty(exports3, Symbol.toStringTag, { value: "Module" });
                }
                Object.defineProperty(exports3, "__esModule", { value: true });
              };
            })();
            (() => {
              __webpack_require__2.nmd = (module3) => {
                module3.paths = [];
                if (!module3.children) module3.children = [];
                return module3;
              };
            })();
            (() => {
              __webpack_require__2.b = document.baseURI || self.location.href;
              var installedChunks = {
                /******/
                551: 0
                /******/
              };
            })();
            (() => {
              __webpack_require__2.nc = void 0;
            })();
            var __webpack_exports__2 = {};
            (() => {
              "use strict";
              __webpack_require__2.d(__webpack_exports__2, {
                "default": () => (
                  /* binding */
                  inboxsdk_NONREMOTE
                )
              });
              var inboxsdk_namespaceObject = {};
              __webpack_require__2.r(inboxsdk_namespaceObject);
              __webpack_require__2.d(inboxsdk_namespaceObject, {
                LOADER_VERSION: () => LOADER_VERSION,
                load: () => load,
                loadScript: () => inboxsdk_loadScript
              });
              var once = __webpack_require__2(8921);
              var once_default = /* @__PURE__ */ __webpack_require__2.n(once);
              ;
              function loadPi(delay) {
                return once_default()(() => new Promise((resolve, reject) => {
                  setTimeout(() => {
                    try {
                      Promise.resolve(
                        /* import() eager */
                      ).then(__webpack_require__2.bind(__webpack_require__2, 130)).then(() => resolve()).catch(reject);
                    } catch (e) {
                      reject(e);
                    }
                  }, delay);
                }));
              }
              ;
              class PlatformImplementationLoader {
                /**
                 * This must be overridden by the entrypoint to the InboxSDK.
                 * This is done so the npm (non-remote) build doesn't contain code for dynamically
                 * loading the remote build, which may set off the Chrome Web Store review process
                 * scanning for that.
                 */
                static loadScript = () => {
                  throw new Error("Unexpected error: This function must be overridden");
                };
                static async load(appId, opts) {
                  if (!globalThis.__InboxSDKImpLoader) {
                    await this.loadScript();
                    if (!globalThis.__InboxSDKImpLoader) {
                      throw new Error("Implementation file did not load correctly");
                    }
                  }
                  return globalThis.__InboxSDKImpLoader.load("0.1", appId, opts);
                }
                static async preload() {
                  this.loadScript();
                }
              }
              ;
              PlatformImplementationLoader.loadScript = loadPi(500);
              var version2 = __webpack_require__2(4782);
              ;
              let loadScript = () => {
                throw new Error("This function is not usable in Chrome MV3 extensions");
              };
              function setLoadScript(fn) {
                loadScript = fn;
              }
              ;
              const LOADER_VERSION = version2.Q;
              function inboxsdk_loadScript(url, opts) {
                return loadScript(url, opts);
              }
              function load(version3, appId, opts) {
                opts = Object.assign({
                  // defaults
                  globalErrorLogging: true
                }, opts, {
                  // stuff that can't be overridden, such as extra stuff this file passes to
                  // the implementation script.
                  VERSION: LOADER_VERSION,
                  REQUESTED_API_VERSION: version3
                });
                return PlatformImplementationLoader.load(appId, opts);
              }
              const pageOrigin = document.location.origin;
              if ("https://mail.google.com" === pageOrigin) {
                PlatformImplementationLoader.preload();
              }
              ;
              const inboxsdk_NONREMOTE = inboxsdk_namespaceObject;
            })();
            __webpack_exports__2 = __webpack_exports__2["default"];
            return __webpack_exports__2;
          })()
        );
      });
    }
  });

  // node_modules/jsuites/dist/jsuites.js
  var require_jsuites = __commonJS({
    "node_modules/jsuites/dist/jsuites.js"(exports2, module2) {
      (function(global, factory2) {
        typeof exports2 === "object" && typeof module2 !== "undefined" ? module2.exports = factory2() : typeof define === "function" && define.amd ? define(factory2) : global.jSuites = factory2();
      })(exports2, (function() {
        var jSuites2;
        (function() {
          var __webpack_modules__2 = {
            /***/
            195: (
              /***/
              (function(module3) {
                ;
                (function(global, factory2) {
                  true ? module3.exports = factory2() : 0;
                })(this, (function() {
                  return (function(str) {
                    function int64(msint_32, lsint_32) {
                      this.highOrder = msint_32;
                      this.lowOrder = lsint_32;
                    }
                    var H = [
                      new int64(1779033703, 4089235720),
                      new int64(3144134277, 2227873595),
                      new int64(1013904242, 4271175723),
                      new int64(2773480762, 1595750129),
                      new int64(1359893119, 2917565137),
                      new int64(2600822924, 725511199),
                      new int64(528734635, 4215389547),
                      new int64(1541459225, 327033209)
                    ];
                    var K = [
                      new int64(1116352408, 3609767458),
                      new int64(1899447441, 602891725),
                      new int64(3049323471, 3964484399),
                      new int64(3921009573, 2173295548),
                      new int64(961987163, 4081628472),
                      new int64(1508970993, 3053834265),
                      new int64(2453635748, 2937671579),
                      new int64(2870763221, 3664609560),
                      new int64(3624381080, 2734883394),
                      new int64(310598401, 1164996542),
                      new int64(607225278, 1323610764),
                      new int64(1426881987, 3590304994),
                      new int64(1925078388, 4068182383),
                      new int64(2162078206, 991336113),
                      new int64(2614888103, 633803317),
                      new int64(3248222580, 3479774868),
                      new int64(3835390401, 2666613458),
                      new int64(4022224774, 944711139),
                      new int64(264347078, 2341262773),
                      new int64(604807628, 2007800933),
                      new int64(770255983, 1495990901),
                      new int64(1249150122, 1856431235),
                      new int64(1555081692, 3175218132),
                      new int64(1996064986, 2198950837),
                      new int64(2554220882, 3999719339),
                      new int64(2821834349, 766784016),
                      new int64(2952996808, 2566594879),
                      new int64(3210313671, 3203337956),
                      new int64(3336571891, 1034457026),
                      new int64(3584528711, 2466948901),
                      new int64(113926993, 3758326383),
                      new int64(338241895, 168717936),
                      new int64(666307205, 1188179964),
                      new int64(773529912, 1546045734),
                      new int64(1294757372, 1522805485),
                      new int64(1396182291, 2643833823),
                      new int64(1695183700, 2343527390),
                      new int64(1986661051, 1014477480),
                      new int64(2177026350, 1206759142),
                      new int64(2456956037, 344077627),
                      new int64(2730485921, 1290863460),
                      new int64(2820302411, 3158454273),
                      new int64(3259730800, 3505952657),
                      new int64(3345764771, 106217008),
                      new int64(3516065817, 3606008344),
                      new int64(3600352804, 1432725776),
                      new int64(4094571909, 1467031594),
                      new int64(275423344, 851169720),
                      new int64(430227734, 3100823752),
                      new int64(506948616, 1363258195),
                      new int64(659060556, 3750685593),
                      new int64(883997877, 3785050280),
                      new int64(958139571, 3318307427),
                      new int64(1322822218, 3812723403),
                      new int64(1537002063, 2003034995),
                      new int64(1747873779, 3602036899),
                      new int64(1955562222, 1575990012),
                      new int64(2024104815, 1125592928),
                      new int64(2227730452, 2716904306),
                      new int64(2361852424, 442776044),
                      new int64(2428436474, 593698344),
                      new int64(2756734187, 3733110249),
                      new int64(3204031479, 2999351573),
                      new int64(3329325298, 3815920427),
                      new int64(3391569614, 3928383900),
                      new int64(3515267271, 566280711),
                      new int64(3940187606, 3454069534),
                      new int64(4118630271, 4000239992),
                      new int64(116418474, 1914138554),
                      new int64(174292421, 2731055270),
                      new int64(289380356, 3203993006),
                      new int64(460393269, 320620315),
                      new int64(685471733, 587496836),
                      new int64(852142971, 1086792851),
                      new int64(1017036298, 365543100),
                      new int64(1126000580, 2618297676),
                      new int64(1288033470, 3409855158),
                      new int64(1501505948, 4234509866),
                      new int64(1607167915, 987167468),
                      new int64(1816402316, 1246189591)
                    ];
                    var W = new Array(64);
                    var a, b, c, d, e, f, g, h, i2, j;
                    var T1, T2;
                    var charsize = 8;
                    function utf8_encode(str2) {
                      return unescape(encodeURIComponent(str2));
                    }
                    function str2binb(str2) {
                      var bin = [];
                      var mask = (1 << charsize) - 1;
                      var len = str2.length * charsize;
                      for (var i3 = 0; i3 < len; i3 += charsize) {
                        bin[i3 >> 5] |= (str2.charCodeAt(i3 / charsize) & mask) << 32 - charsize - i3 % 32;
                      }
                      return bin;
                    }
                    function binb2hex(binarray2) {
                      var hex_tab = "0123456789abcdef";
                      var str2 = "";
                      var length = binarray2.length * 4;
                      var srcByte;
                      for (var i3 = 0; i3 < length; i3 += 1) {
                        srcByte = binarray2[i3 >> 2] >> (3 - i3 % 4) * 8;
                        str2 += hex_tab.charAt(srcByte >> 4 & 15) + hex_tab.charAt(srcByte & 15);
                      }
                      return str2;
                    }
                    function safe_add_2(x2, y2) {
                      var lsw, msw, lowOrder, highOrder;
                      lsw = (x2.lowOrder & 65535) + (y2.lowOrder & 65535);
                      msw = (x2.lowOrder >>> 16) + (y2.lowOrder >>> 16) + (lsw >>> 16);
                      lowOrder = (msw & 65535) << 16 | lsw & 65535;
                      lsw = (x2.highOrder & 65535) + (y2.highOrder & 65535) + (msw >>> 16);
                      msw = (x2.highOrder >>> 16) + (y2.highOrder >>> 16) + (lsw >>> 16);
                      highOrder = (msw & 65535) << 16 | lsw & 65535;
                      return new int64(highOrder, lowOrder);
                    }
                    function safe_add_4(a2, b2, c2, d2) {
                      var lsw, msw, lowOrder, highOrder;
                      lsw = (a2.lowOrder & 65535) + (b2.lowOrder & 65535) + (c2.lowOrder & 65535) + (d2.lowOrder & 65535);
                      msw = (a2.lowOrder >>> 16) + (b2.lowOrder >>> 16) + (c2.lowOrder >>> 16) + (d2.lowOrder >>> 16) + (lsw >>> 16);
                      lowOrder = (msw & 65535) << 16 | lsw & 65535;
                      lsw = (a2.highOrder & 65535) + (b2.highOrder & 65535) + (c2.highOrder & 65535) + (d2.highOrder & 65535) + (msw >>> 16);
                      msw = (a2.highOrder >>> 16) + (b2.highOrder >>> 16) + (c2.highOrder >>> 16) + (d2.highOrder >>> 16) + (lsw >>> 16);
                      highOrder = (msw & 65535) << 16 | lsw & 65535;
                      return new int64(highOrder, lowOrder);
                    }
                    function safe_add_5(a2, b2, c2, d2, e2) {
                      var lsw, msw, lowOrder, highOrder;
                      lsw = (a2.lowOrder & 65535) + (b2.lowOrder & 65535) + (c2.lowOrder & 65535) + (d2.lowOrder & 65535) + (e2.lowOrder & 65535);
                      msw = (a2.lowOrder >>> 16) + (b2.lowOrder >>> 16) + (c2.lowOrder >>> 16) + (d2.lowOrder >>> 16) + (e2.lowOrder >>> 16) + (lsw >>> 16);
                      lowOrder = (msw & 65535) << 16 | lsw & 65535;
                      lsw = (a2.highOrder & 65535) + (b2.highOrder & 65535) + (c2.highOrder & 65535) + (d2.highOrder & 65535) + (e2.highOrder & 65535) + (msw >>> 16);
                      msw = (a2.highOrder >>> 16) + (b2.highOrder >>> 16) + (c2.highOrder >>> 16) + (d2.highOrder >>> 16) + (e2.highOrder >>> 16) + (lsw >>> 16);
                      highOrder = (msw & 65535) << 16 | lsw & 65535;
                      return new int64(highOrder, lowOrder);
                    }
                    function maj(x2, y2, z) {
                      return new int64(
                        x2.highOrder & y2.highOrder ^ x2.highOrder & z.highOrder ^ y2.highOrder & z.highOrder,
                        x2.lowOrder & y2.lowOrder ^ x2.lowOrder & z.lowOrder ^ y2.lowOrder & z.lowOrder
                      );
                    }
                    function ch(x2, y2, z) {
                      return new int64(
                        x2.highOrder & y2.highOrder ^ ~x2.highOrder & z.highOrder,
                        x2.lowOrder & y2.lowOrder ^ ~x2.lowOrder & z.lowOrder
                      );
                    }
                    function rotr(x2, n) {
                      if (n <= 32) {
                        return new int64(
                          x2.highOrder >>> n | x2.lowOrder << 32 - n,
                          x2.lowOrder >>> n | x2.highOrder << 32 - n
                        );
                      } else {
                        return new int64(
                          x2.lowOrder >>> n | x2.highOrder << 32 - n,
                          x2.highOrder >>> n | x2.lowOrder << 32 - n
                        );
                      }
                    }
                    function sigma0(x2) {
                      var rotr28 = rotr(x2, 28);
                      var rotr34 = rotr(x2, 34);
                      var rotr39 = rotr(x2, 39);
                      return new int64(
                        rotr28.highOrder ^ rotr34.highOrder ^ rotr39.highOrder,
                        rotr28.lowOrder ^ rotr34.lowOrder ^ rotr39.lowOrder
                      );
                    }
                    function sigma1(x2) {
                      var rotr14 = rotr(x2, 14);
                      var rotr18 = rotr(x2, 18);
                      var rotr41 = rotr(x2, 41);
                      return new int64(
                        rotr14.highOrder ^ rotr18.highOrder ^ rotr41.highOrder,
                        rotr14.lowOrder ^ rotr18.lowOrder ^ rotr41.lowOrder
                      );
                    }
                    function gamma0(x2) {
                      var rotr1 = rotr(x2, 1), rotr8 = rotr(x2, 8), shr7 = shr(x2, 7);
                      return new int64(
                        rotr1.highOrder ^ rotr8.highOrder ^ shr7.highOrder,
                        rotr1.lowOrder ^ rotr8.lowOrder ^ shr7.lowOrder
                      );
                    }
                    function gamma1(x2) {
                      var rotr19 = rotr(x2, 19);
                      var rotr61 = rotr(x2, 61);
                      var shr6 = shr(x2, 6);
                      return new int64(
                        rotr19.highOrder ^ rotr61.highOrder ^ shr6.highOrder,
                        rotr19.lowOrder ^ rotr61.lowOrder ^ shr6.lowOrder
                      );
                    }
                    function shr(x2, n) {
                      if (n <= 32) {
                        return new int64(
                          x2.highOrder >>> n,
                          x2.lowOrder >>> n | x2.highOrder << 32 - n
                        );
                      } else {
                        return new int64(
                          0,
                          x2.highOrder << 32 - n
                        );
                      }
                    }
                    var str = utf8_encode(str);
                    var strlen = str.length * charsize;
                    str = str2binb(str);
                    str[strlen >> 5] |= 128 << 24 - strlen % 32;
                    str[(strlen + 128 >> 10 << 5) + 31] = strlen;
                    for (var i2 = 0; i2 < str.length; i2 += 32) {
                      a = H[0];
                      b = H[1];
                      c = H[2];
                      d = H[3];
                      e = H[4];
                      f = H[5];
                      g = H[6];
                      h = H[7];
                      for (var j = 0; j < 80; j++) {
                        if (j < 16) {
                          W[j] = new int64(str[j * 2 + i2], str[j * 2 + i2 + 1]);
                        } else {
                          W[j] = safe_add_4(gamma1(W[j - 2]), W[j - 7], gamma0(W[j - 15]), W[j - 16]);
                        }
                        T1 = safe_add_5(h, sigma1(e), ch(e, f, g), K[j], W[j]);
                        T2 = safe_add_2(sigma0(a), maj(a, b, c));
                        h = g;
                        g = f;
                        f = e;
                        e = safe_add_2(d, T1);
                        d = c;
                        c = b;
                        b = a;
                        a = safe_add_2(T1, T2);
                      }
                      H[0] = safe_add_2(a, H[0]);
                      H[1] = safe_add_2(b, H[1]);
                      H[2] = safe_add_2(c, H[2]);
                      H[3] = safe_add_2(d, H[3]);
                      H[4] = safe_add_2(e, H[4]);
                      H[5] = safe_add_2(f, H[5]);
                      H[6] = safe_add_2(g, H[6]);
                      H[7] = safe_add_2(h, H[7]);
                    }
                    var binarray = [];
                    for (var i2 = 0; i2 < H.length; i2++) {
                      binarray.push(H[i2].highOrder);
                      binarray.push(H[i2].lowOrder);
                    }
                    return binb2hex(binarray);
                  });
                }));
              })
            )
            /******/
          };
          var __webpack_module_cache__2 = {};
          function __webpack_require__2(moduleId) {
            var cachedModule = __webpack_module_cache__2[moduleId];
            if (cachedModule !== void 0) {
              return cachedModule.exports;
            }
            var module3 = __webpack_module_cache__2[moduleId] = {
              /******/
              // no module.id needed
              /******/
              // no module.loaded needed
              /******/
              exports: {}
              /******/
            };
            __webpack_modules__2[moduleId].call(module3.exports, module3, module3.exports, __webpack_require__2);
            return module3.exports;
          }
          !(function() {
            __webpack_require__2.n = function(module3) {
              var getter = module3 && module3.__esModule ? (
                /******/
                function() {
                  return module3["default"];
                }
              ) : (
                /******/
                function() {
                  return module3;
                }
              );
              __webpack_require__2.d(getter, { a: getter });
              return getter;
            };
          })();
          !(function() {
            __webpack_require__2.d = function(exports3, definition) {
              for (var key in definition) {
                if (__webpack_require__2.o(definition, key) && !__webpack_require__2.o(exports3, key)) {
                  Object.defineProperty(exports3, key, { enumerable: true, get: definition[key] });
                }
              }
            };
          })();
          !(function() {
            __webpack_require__2.o = function(obj2, prop) {
              return Object.prototype.hasOwnProperty.call(obj2, prop);
            };
          })();
          var __webpack_exports__2 = {};
          !(function() {
            "use strict";
            __webpack_require__2.d(__webpack_exports__2, {
              "default": function() {
                return (
                  /* binding */
                  jsuites2
                );
              }
            });
            ;
            var setDictionary = function(d) {
              if (!document.dictionary) {
                document.dictionary = {};
              }
              var t2 = null;
              var i2 = null;
              var k = Object.keys(d);
              for (i2 = 0; i2 < k.length; i2++) {
                document.dictionary[k[i2]] = d[k[i2]];
              }
            };
            var translate = function(t2) {
              if (typeof document !== "undefined" && document.dictionary) {
                return document.dictionary[t2] || t2;
              } else {
                return t2;
              }
            };
            var dictionary = { setDictionary, translate };
            ;
            const Tracking = function(component, state) {
              if (state === true) {
                window["jSuitesStateControl"] = window["jSuitesStateControl"].filter(function(v) {
                  return v !== null;
                });
                setTimeout(function() {
                  window["jSuitesStateControl"].push(component);
                }, 0);
              } else {
                var index = window["jSuitesStateControl"].indexOf(component);
                if (index >= 0) {
                  window["jSuitesStateControl"].splice(index, 1);
                }
              }
            };
            var tracking = Tracking;
            ;
            var Helpers2 = {};
            Helpers2.two = function(value) {
              value = "" + value;
              if (value.length == 1) {
                value = "0" + value;
              }
              return value;
            };
            Helpers2.focus = function(el) {
              if (el.textContent.length) {
                const range = document.createRange();
                const sel = window.getSelection();
                let node = el;
                while (node.lastChild) node = node.lastChild;
                if (node.nodeType === Node.TEXT_NODE) {
                  range.setStart(node, node.length);
                } else {
                  range.setStart(node, node.childNodes.length);
                }
                range.collapse(true);
                sel.removeAllRanges();
                sel.addRange(range);
                el.scrollLeft = el.scrollWidth;
              }
            };
            Helpers2.isNumeric = (function(num) {
              if (typeof num === "string") {
                num = num.trim();
              }
              return !isNaN(num) && num !== null && num !== "";
            });
            Helpers2.guid = function() {
              return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0, v = c == "x" ? r : r & 3 | 8;
                return v.toString(16);
              });
            };
            Helpers2.getNode = function() {
              var node = document.getSelection().anchorNode;
              if (node) {
                return node.nodeType == 3 ? node.parentNode : node;
              } else {
                return null;
              }
            };
            Helpers2.hash = function(str) {
              var hash = 0, i2, chr;
              if (str.length === 0) {
                return hash;
              } else {
                for (i2 = 0; i2 < str.length; i2++) {
                  chr = str.charCodeAt(i2);
                  if (chr > 32) {
                    hash = (hash << 5) - hash + chr;
                    hash |= 0;
                  }
                }
              }
              return hash;
            };
            Helpers2.randomColor = function(h) {
              var lum = -0.25;
              var hex = String("#" + Math.random().toString(16).slice(2, 8).toUpperCase()).replace(/[^0-9a-f]/gi, "");
              if (hex.length < 6) {
                hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
              }
              var rgb = [], c, i2;
              for (i2 = 0; i2 < 3; i2++) {
                c = parseInt(hex.substr(i2 * 2, 2), 16);
                c = Math.round(Math.min(Math.max(0, c + c * lum), 255)).toString(16);
                rgb.push(("00" + c).substr(c.length));
              }
              if (h == true) {
                return "#" + Helpers2.two(rgb[0].toString(16)) + Helpers2.two(rgb[1].toString(16)) + Helpers2.two(rgb[2].toString(16));
              }
              return rgb;
            };
            Helpers2.getWindowWidth = function() {
              var w = window, d = document, e = d.documentElement, g = d.getElementsByTagName("body")[0], x2 = w.innerWidth || e.clientWidth || g.clientWidth;
              return x2;
            };
            Helpers2.getWindowHeight = function() {
              var w = window, d = document, e = d.documentElement, g = d.getElementsByTagName("body")[0], y2 = w.innerHeight || e.clientHeight || g.clientHeight;
              return y2;
            };
            Helpers2.getPosition = function(e) {
              if (e.changedTouches && e.changedTouches[0]) {
                var x2 = e.changedTouches[0].pageX;
                var y2 = e.changedTouches[0].pageY;
              } else {
                var x2 = window.Event ? e.pageX : e.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
                var y2 = window.Event ? e.pageY : e.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
              }
              return [x2, y2];
            };
            Helpers2.click = function(el) {
              if (el.click) {
                el.click();
              } else {
                var evt = new MouseEvent("click", {
                  bubbles: true,
                  cancelable: true,
                  view: window
                });
                el.dispatchEvent(evt);
              }
            };
            Helpers2.findElement = function(element, condition) {
              var foundElement = false;
              function path(element2) {
                if (element2 && !foundElement) {
                  if (typeof condition == "function") {
                    foundElement = condition(element2);
                  } else if (typeof condition == "string") {
                    if (element2.classList && element2.classList.contains(condition)) {
                      foundElement = element2;
                    }
                  }
                }
                if (element2.parentNode && !foundElement) {
                  path(element2.parentNode);
                }
              }
              path(element);
              return foundElement;
            };
            var helpers2 = Helpers2;
            ;
            const isValidPathObj = function(o) {
              return typeof o === "object" || typeof o === "function";
            };
            function Path(pathString, value, remove) {
              if (typeof pathString !== "string" || pathString.length === 0) {
                return void 0;
              }
              const keys = pathString.split(".");
              if (keys.length === 0) {
                return void 0;
              }
              let currentObject = this;
              if (typeof value === "undefined" && typeof remove === "undefined") {
                for (let i2 = 0; i2 < keys.length; i2++) {
                  const key = keys[i2];
                  if (currentObject != null && isValidPathObj(currentObject) && Object.prototype.hasOwnProperty.call(currentObject, key)) {
                    currentObject = currentObject[key];
                  } else {
                    return void 0;
                  }
                }
                return currentObject;
              }
              for (let i2 = 0; i2 < keys.length - 1; i2++) {
                const key = keys[i2];
                if (currentObject == null || !isValidPathObj(currentObject)) {
                  console.warn(`Cannot set value: path '${pathString}' blocked by invalid object at '${key}'`);
                  return false;
                }
                if (Object.prototype.hasOwnProperty.call(currentObject, key) && (currentObject[key] == null || !isValidPathObj(currentObject[key]))) {
                  currentObject[key] = {};
                } else if (!Object.prototype.hasOwnProperty.call(currentObject, key)) {
                  currentObject[key] = {};
                }
                currentObject = currentObject[key];
              }
              const finalKey = keys[keys.length - 1];
              if (currentObject == null || !isValidPathObj(currentObject)) {
                return false;
              }
              if (remove === true) {
                if (Object.prototype.hasOwnProperty.call(currentObject, finalKey)) {
                  delete currentObject[finalKey];
                  return true;
                }
                return false;
              }
              currentObject[finalKey] = value;
              return true;
            }
            ;
            function Sorting(el, options) {
              var obj2 = {};
              obj2.options = {};
              var defaults = {
                pointer: null,
                direction: null,
                ondragstart: null,
                ondragend: null,
                ondrop: null
              };
              var dragElement = null;
              for (var property in defaults) {
                if (options && options.hasOwnProperty(property)) {
                  obj2.options[property] = options[property];
                } else {
                  obj2.options[property] = defaults[property];
                }
              }
              el.classList.add("jsorting");
              el.addEventListener("dragstart", function(e) {
                let target = e.target;
                if (target.nodeType === 3) {
                  if (target.parentNode.getAttribute("draggable") === "true") {
                    target = target.parentNode;
                  } else {
                    e.preventDefault();
                    e.stopPropagation();
                    return;
                  }
                }
                if (target.getAttribute("draggable") === "true") {
                  let position = Array.prototype.indexOf.call(target.parentNode.children, target);
                  dragElement = {
                    element: target,
                    o: position,
                    d: position
                  };
                  target.style.opacity = "0.25";
                  if (typeof obj2.options.ondragstart == "function") {
                    obj2.options.ondragstart(el, target, e);
                  }
                  e.dataTransfer.setDragImage(target, 0, 0);
                }
              });
              el.addEventListener("dragover", function(e) {
                e.preventDefault();
                if (dragElement) {
                  if (getElement2(e.target)) {
                    if (e.target.getAttribute("draggable") == "true" && dragElement.element != e.target) {
                      if (!obj2.options.direction) {
                        var condition = e.target.clientHeight / 2 > e.offsetY;
                      } else {
                        var condition = e.target.clientWidth / 2 > e.offsetX;
                      }
                      if (condition) {
                        e.target.parentNode.insertBefore(dragElement.element, e.target);
                      } else {
                        e.target.parentNode.insertBefore(dragElement.element, e.target.nextSibling);
                      }
                      dragElement.d = Array.prototype.indexOf.call(e.target.parentNode.children, dragElement.element);
                    }
                  }
                }
              });
              el.addEventListener("dragleave", function(e) {
                e.preventDefault();
              });
              el.addEventListener("dragend", function(e) {
                e.preventDefault();
                if (dragElement) {
                  if (typeof obj2.options.ondragend == "function") {
                    obj2.options.ondragend(el, dragElement.element, e);
                  }
                  if (dragElement.o < dragElement.d) {
                    e.target.parentNode.insertBefore(dragElement.element, e.target.parentNode.children[dragElement.o]);
                  } else {
                    e.target.parentNode.insertBefore(dragElement.element, e.target.parentNode.children[dragElement.o].nextSibling);
                  }
                  dragElement.element.style.opacity = "";
                  dragElement = null;
                }
              });
              el.addEventListener("drop", function(e) {
                e.preventDefault();
                if (dragElement) {
                  if (dragElement.o !== dragElement.d) {
                    if (typeof obj2.options.ondrop == "function") {
                      obj2.options.ondrop(el, dragElement.o, dragElement.d, dragElement.element, e.target, e);
                    }
                  }
                  dragElement.element.style.opacity = "";
                  dragElement = null;
                }
              });
              var getElement2 = function(element) {
                var sorting = false;
                function path(element2) {
                  if (element2.className) {
                    if (element2.classList.contains("jsorting")) {
                      sorting = true;
                    }
                  }
                  if (!sorting) {
                    path(element2.parentNode);
                  }
                }
                path(element);
                return sorting;
              };
              for (var i2 = 0; i2 < el.children.length; i2++) {
                if (!el.children[i2].hasAttribute("draggable")) {
                  el.children[i2].setAttribute("draggable", "true");
                }
              }
              el.val = function() {
                var id = null;
                var data = [];
                for (var i3 = 0; i3 < el.children.length; i3++) {
                  if (id = el.children[i3].getAttribute("data-id")) {
                    data.push(id);
                  }
                }
                return data;
              };
              return el;
            }
            ;
            function LazyLoading(el, options) {
              var obj2 = {};
              if (!options.loadUp || typeof options.loadUp != "function") {
                options.loadUp = function() {
                  return false;
                };
              }
              if (!options.loadDown || typeof options.loadDown != "function") {
                options.loadDown = function() {
                  return false;
                };
              }
              if (!options.timer) {
                options.timer = 100;
              }
              var timeControlLoading = null;
              var scrollControls2 = function(e) {
                if (timeControlLoading == null) {
                  var event = false;
                  var scrollTop = el.scrollTop;
                  if (el.scrollTop + el.clientHeight * 2 >= el.scrollHeight) {
                    if (options.loadDown()) {
                      if (scrollTop == el.scrollTop) {
                        el.scrollTop = el.scrollTop - el.clientHeight;
                      }
                      event = true;
                    }
                  } else if (el.scrollTop <= el.clientHeight) {
                    if (options.loadUp()) {
                      if (scrollTop == el.scrollTop) {
                        el.scrollTop = el.scrollTop + el.clientHeight;
                      }
                      event = true;
                    }
                  }
                  timeControlLoading = setTimeout(function() {
                    timeControlLoading = null;
                  }, options.timer);
                  if (event) {
                    if (typeof options.onupdate == "function") {
                      options.onupdate();
                    }
                  }
                }
              };
              el.onscroll = function(e) {
                scrollControls2(e);
              };
              el.onwheel = function(e) {
                scrollControls2(e);
              };
              return obj2;
            }
            ;
            function Ajax() {
              var Component = (function(options, complete) {
                if (Array.isArray(options)) {
                  var multiple = {
                    instance: [],
                    complete
                  };
                  if (options.length > 0) {
                    for (var i2 = 0; i2 < options.length; i2++) {
                      options[i2].multiple = multiple;
                      multiple.instance.push(Component(options[i2]));
                    }
                  }
                  return multiple;
                }
                if (!options.data) {
                  options.data = {};
                }
                if (options.type) {
                  options.method = options.type;
                }
                if (!options.method) {
                  options.method = "GET";
                }
                if (!options.dataType) {
                  options.dataType = "json";
                }
                if (options.data) {
                  var parseData = function(value, key) {
                    var vars2 = [];
                    if (value) {
                      var keys = Object.keys(value);
                      if (keys.length) {
                        for (var i3 = 0; i3 < keys.length; i3++) {
                          if (key) {
                            var k2 = key + "[" + keys[i3] + "]";
                          } else {
                            var k2 = keys[i3];
                          }
                          if (value[k2] instanceof FileList) {
                            vars2[k2] = value[keys[i3]];
                          } else if (value[keys[i3]] === null || value[keys[i3]] === void 0) {
                            vars2[k2] = "";
                          } else if (typeof value[keys[i3]] == "object") {
                            var r = parseData(value[keys[i3]], k2);
                            var o = Object.keys(r);
                            for (var j2 = 0; j2 < o.length; j2++) {
                              vars2[o[j2]] = r[o[j2]];
                            }
                          } else {
                            vars2[k2] = value[keys[i3]];
                          }
                        }
                      }
                    }
                    return vars2;
                  };
                  var d = parseData(options.data);
                  var k = Object.keys(d);
                  if (options.method == "GET") {
                    if (k.length) {
                      var data = [];
                      for (var i2 = 0; i2 < k.length; i2++) {
                        data.push(k[i2] + "=" + encodeURIComponent(d[k[i2]]));
                      }
                      if (options.url.indexOf("?") < 0) {
                        options.url += "?";
                      }
                      options.url += data.join("&");
                    }
                  } else {
                    var data = new FormData();
                    for (var i2 = 0; i2 < k.length; i2++) {
                      if (d[k[i2]] instanceof FileList) {
                        if (d[k[i2]].length) {
                          for (var j = 0; j < d[k[i2]].length; j++) {
                            data.append(k[i2], d[k[i2]][j], d[k[i2]][j].name);
                          }
                        }
                      } else {
                        data.append(k[i2], d[k[i2]]);
                      }
                    }
                  }
                }
                var httpRequest = new XMLHttpRequest();
                httpRequest.open(options.method, options.url, true);
                if (options.requestedWith) {
                  httpRequest.setRequestHeader("X-Requested-With", options.requestedWith);
                } else {
                  if (options.requestedWith !== false) {
                    httpRequest.setRequestHeader("X-Requested-With", "XMLHttpRequest");
                  }
                }
                if (options.contentType) {
                  httpRequest.setRequestHeader("Content-Type", options.contentType);
                }
                if (options.method === "POST") {
                  httpRequest.setRequestHeader("Accept", "application/json");
                } else {
                  if (options.dataType === "blob") {
                    httpRequest.responseType = "blob";
                  } else {
                    if (!options.contentType) {
                      if (options.dataType === "json") {
                        httpRequest.setRequestHeader("Content-Type", "text/json");
                      } else if (options.dataType === "html") {
                        httpRequest.setRequestHeader("Content-Type", "text/html");
                      }
                    }
                  }
                }
                if (options.cache !== true) {
                  httpRequest.setRequestHeader("pragma", "no-cache");
                  httpRequest.setRequestHeader("cache-control", "no-cache");
                }
                if (options.withCredentials === true) {
                  httpRequest.withCredentials = true;
                }
                if (typeof options.beforeSend == "function") {
                  options.beforeSend(httpRequest);
                }
                if (typeof Component.beforeSend == "function") {
                  Component.beforeSend(httpRequest);
                }
                if (document.ajax && typeof document.ajax.beforeSend == "function") {
                  document.ajax.beforeSend(httpRequest);
                }
                httpRequest.onerror = function() {
                  if (options.error && typeof options.error == "function") {
                    options.error({
                      message: "Network error: Unable to reach the server.",
                      status: 0
                    });
                  }
                };
                httpRequest.ontimeout = function() {
                  if (options.error && typeof options.error == "function") {
                    options.error({
                      message: "Request timed out after " + httpRequest.timeout + "ms.",
                      status: 0
                    });
                  }
                };
                httpRequest.onload = function() {
                  if (httpRequest.status >= 200 && httpRequest.status < 300) {
                    if (options.dataType === "json") {
                      try {
                        var result = JSON.parse(httpRequest.responseText);
                        if (options.success && typeof options.success == "function") {
                          options.success(result);
                        }
                      } catch (err) {
                        if (options.error && typeof options.error == "function") {
                          options.error(err, result);
                        }
                      }
                    } else {
                      if (options.dataType === "blob") {
                        var result = httpRequest.response;
                      } else {
                        var result = httpRequest.responseText;
                      }
                      if (options.success && typeof options.success == "function") {
                        options.success(result);
                      }
                    }
                  } else {
                    if (options.error && typeof options.error == "function") {
                      options.error(httpRequest.responseText, httpRequest.status);
                    }
                  }
                  if (Component.queue && Component.queue.length > 0) {
                    Component.send(Component.queue.shift());
                  }
                  if (Component.requests && Component.requests.length) {
                    var index = Component.requests.indexOf(httpRequest);
                    Component.requests.splice(index, 1);
                    if (!Component.requests.length) {
                      if (options.complete && typeof options.complete == "function") {
                        options.complete(result);
                      }
                    }
                    if (options.group) {
                      if (Component.oncomplete && typeof Component.oncomplete[options.group] == "function") {
                        if (!Component.pending(options.group)) {
                          Component.oncomplete[options.group]();
                          Component.oncomplete[options.group] = null;
                        }
                      }
                    }
                    if (options.multiple && options.multiple.instance) {
                      var index = options.multiple.instance.indexOf(httpRequest);
                      options.multiple.instance.splice(index, 1);
                      if (!options.multiple.instance.length) {
                        if (options.multiple.complete && typeof options.multiple.complete == "function") {
                          options.multiple.complete(result);
                        }
                      }
                    }
                  }
                };
                httpRequest.options = options;
                httpRequest.data = data;
                if (options.queue === true && Component.requests.length > 0) {
                  Component.queue.push(httpRequest);
                } else {
                  Component.send(httpRequest);
                }
                return httpRequest;
              });
              Component.send = function(httpRequest) {
                if (httpRequest.data) {
                  if (Array.isArray(httpRequest.data)) {
                    httpRequest.send(httpRequest.data.join("&"));
                  } else {
                    httpRequest.send(httpRequest.data);
                  }
                } else {
                  httpRequest.send();
                }
                Component.requests.push(httpRequest);
              };
              Component.exists = function(url, __callback) {
                var http = new XMLHttpRequest();
                http.open("HEAD", url, false);
                http.send();
                if (http.status) {
                  __callback(http.status);
                }
              };
              Component.pending = function(group) {
                var n = 0;
                var o = Component.requests;
                if (o && o.length) {
                  for (var i2 = 0; i2 < o.length; i2++) {
                    if (!group || group == o[i2].options.group) {
                      n++;
                    }
                  }
                }
                return n;
              };
              Component.oncomplete = {};
              Component.requests = [];
              Component.queue = [];
              return Component;
            }
            var ajax = Ajax();
            ;
            function Animation() {
              const Component = {
                loading: {}
              };
              Component.loading.show = function(timeout) {
                if (!Component.loading.element) {
                  Component.loading.element = document.createElement("div");
                  Component.loading.element.className = "jloading";
                }
                document.body.appendChild(Component.loading.element);
                if (timeout > 0) {
                  setTimeout(function() {
                    Component.loading.hide();
                  }, timeout * 1e3);
                }
              };
              Component.loading.hide = function() {
                if (Component.loading.element && Component.loading.element.parentNode) {
                  document.body.removeChild(Component.loading.element);
                }
              };
              Component.slideLeft = function(element, direction, done) {
                if (direction == true) {
                  element.classList.add("jslide-left-in");
                  setTimeout(function() {
                    element.classList.remove("jslide-left-in");
                    if (typeof done == "function") {
                      done();
                    }
                  }, 400);
                } else {
                  element.classList.add("jslide-left-out");
                  setTimeout(function() {
                    element.classList.remove("jslide-left-out");
                    if (typeof done == "function") {
                      done();
                    }
                  }, 400);
                }
              };
              Component.slideRight = function(element, direction, done) {
                if (direction === true) {
                  element.classList.add("jslide-right-in");
                  setTimeout(function() {
                    element.classList.remove("jslide-right-in");
                    if (typeof done == "function") {
                      done();
                    }
                  }, 400);
                } else {
                  element.classList.add("jslide-right-out");
                  setTimeout(function() {
                    element.classList.remove("jslide-right-out");
                    if (typeof done == "function") {
                      done();
                    }
                  }, 400);
                }
              };
              Component.slideTop = function(element, direction, done) {
                if (direction === true) {
                  element.classList.add("jslide-top-in");
                  setTimeout(function() {
                    element.classList.remove("jslide-top-in");
                    if (typeof done == "function") {
                      done();
                    }
                  }, 400);
                } else {
                  element.classList.add("jslide-top-out");
                  setTimeout(function() {
                    element.classList.remove("jslide-top-out");
                    if (typeof done == "function") {
                      done();
                    }
                  }, 400);
                }
              };
              Component.slideBottom = function(element, direction, done) {
                if (direction === true) {
                  element.classList.add("jslide-bottom-in");
                  setTimeout(function() {
                    element.classList.remove("jslide-bottom-in");
                    if (typeof done == "function") {
                      done();
                    }
                  }, 400);
                } else {
                  element.classList.add("jslide-bottom-out");
                  setTimeout(function() {
                    element.classList.remove("jslide-bottom-out");
                    if (typeof done == "function") {
                      done();
                    }
                  }, 100);
                }
              };
              Component.fadeIn = function(element, done) {
                element.style.display = "";
                element.classList.add("jfade-in");
                setTimeout(function() {
                  element.classList.remove("jfade-in");
                  if (typeof done == "function") {
                    done();
                  }
                }, 2e3);
              };
              Component.fadeOut = function(element, done) {
                element.classList.add("jfade-out");
                setTimeout(function() {
                  element.style.display = "none";
                  element.classList.remove("jfade-out");
                  if (typeof done == "function") {
                    done();
                  }
                }, 1e3);
              };
              return Component;
            }
            var animation = Animation();
            ;
            function HelpersDate() {
              var Component = {};
              Component.now = function(date, dateOnly) {
                var y2 = null;
                var m = null;
                var d = null;
                var h = null;
                var i2 = null;
                var s = null;
                if (Array.isArray(date)) {
                  y2 = date[0];
                  m = date[1];
                  d = date[2];
                  h = date[3];
                  i2 = date[4];
                  s = date[5];
                } else {
                  if (!date) {
                    date = /* @__PURE__ */ new Date();
                  }
                  y2 = date.getFullYear();
                  m = date.getMonth() + 1;
                  d = date.getDate();
                  h = date.getHours();
                  i2 = date.getMinutes();
                  s = date.getSeconds();
                }
                if (dateOnly == true) {
                  return helpers2.two(y2) + "-" + helpers2.two(m) + "-" + helpers2.two(d);
                } else {
                  return helpers2.two(y2) + "-" + helpers2.two(m) + "-" + helpers2.two(d) + " " + helpers2.two(h) + ":" + helpers2.two(i2) + ":" + helpers2.two(s);
                }
              };
              Component.toArray = function(value) {
                var date = value.split(value.indexOf("T") !== -1 ? "T" : " ");
                var time = date[1];
                var date = date[0].split("-");
                var y2 = parseInt(date[0]);
                var m = parseInt(date[1]);
                var d = parseInt(date[2]);
                var h = 0;
                var i2 = 0;
                if (time) {
                  time = time.split(":");
                  h = parseInt(time[0]);
                  i2 = parseInt(time[1]);
                }
                return [y2, m, d, h, i2, 0];
              };
              var excelInitialTime = Date.UTC(1900, 0, 0);
              var excelLeapYearBug = Date.UTC(1900, 1, 29);
              var millisecondsPerDay = 864e5;
              Component.dateToNum = function(jsDate) {
                if (typeof jsDate === "string") {
                  jsDate = /* @__PURE__ */ new Date(jsDate + "  GMT+0");
                }
                var jsDateInMilliseconds = jsDate.getTime();
                if (jsDateInMilliseconds >= excelLeapYearBug) {
                  jsDateInMilliseconds += millisecondsPerDay;
                }
                jsDateInMilliseconds -= excelInitialTime;
                return jsDateInMilliseconds / millisecondsPerDay;
              };
              Component.numToDate = function(excelSerialNumber) {
                var jsDateInMilliseconds = excelInitialTime + excelSerialNumber * millisecondsPerDay;
                if (jsDateInMilliseconds >= excelLeapYearBug) {
                  jsDateInMilliseconds -= millisecondsPerDay;
                }
                const d = new Date(jsDateInMilliseconds);
                var date = [
                  d.getUTCFullYear(),
                  d.getUTCMonth() + 1,
                  d.getUTCDate(),
                  d.getUTCHours(),
                  d.getUTCMinutes(),
                  d.getUTCSeconds()
                ];
                return Component.now(date);
              };
              let weekdays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
              let months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
              Object.defineProperty(Component, "weekdays", {
                get: function() {
                  return weekdays.map(function(v) {
                    return dictionary.translate(v);
                  });
                }
              });
              Object.defineProperty(Component, "weekdaysShort", {
                get: function() {
                  return weekdays.map(function(v) {
                    return dictionary.translate(v).substring(0, 3);
                  });
                }
              });
              Object.defineProperty(Component, "months", {
                get: function() {
                  return months.map(function(v) {
                    return dictionary.translate(v);
                  });
                }
              });
              Object.defineProperty(Component, "monthsShort", {
                get: function() {
                  return months.map(function(v) {
                    return dictionary.translate(v).substring(0, 3);
                  });
                }
              });
              return Component;
            }
            var helpers_date = HelpersDate();
            ;
            function Mask() {
              var tokens2 = {
                // Text
                text: ["@"],
                // Currency tokens
                currency: ["#(.{1})##0?(.{1}0+)?( ?;(.*)?)?", "#"],
                // Scientific
                scientific: ["0{1}(.{1}0+)?E{1}\\+0+"],
                // Percentage
                percentage: ["0{1}(.{1}0+)?%"],
                // Number
                numeric: ["0{1}(.{1}0+)?"],
                // Data tokens
                datetime: ["YYYY", "YYY", "YY", "MMMMM", "MMMM", "MMM", "MM", "DDDDD", "DDDD", "DDD", "DD", "DY", "DAY", "WD", "D", "Q", "MONTH", "MON", "HH24", "HH12", "HH", "\\[H\\]", "H", "AM/PM", "MI", "SS", "MS", "Y", "M"],
                // Other
                general: ["A", "0", "[0-9a-zA-Z$]+", "."]
              };
              var getDate = function() {
                if (this.mask.toLowerCase().indexOf("[h]") !== -1) {
                  var m = 0;
                  if (this.date[4]) {
                    m = parseFloat(this.date[4] / 60);
                  }
                  var v = parseInt(this.date[3]) + m;
                  v /= 24;
                } else if (!(this.date[0] && this.date[1] && this.date[2]) && (this.date[3] || this.date[4])) {
                  v = helpers2.two(this.date[3]) + ":" + helpers2.two(this.date[4]) + ":" + helpers2.two(this.date[5]);
                } else {
                  if (this.date[0] && this.date[1] && !this.date[2]) {
                    this.date[2] = 1;
                  }
                  v = helpers2.two(this.date[0]) + "-" + helpers2.two(this.date[1]) + "-" + helpers2.two(this.date[2]);
                  if (this.date[3] || this.date[4] || this.date[5]) {
                    v += " " + helpers2.two(this.date[3]) + ":" + helpers2.two(this.date[4]) + ":" + helpers2.two(this.date[5]);
                  }
                }
                return v;
              };
              var extractDate = function() {
                var v = "";
                if (!(this.date[0] && this.date[1] && this.date[2]) && (this.date[3] || this.date[4])) {
                  if (this.mask.toLowerCase().indexOf("[h]") !== -1) {
                    v = parseInt(this.date[3]);
                  } else {
                    let h = parseInt(this.date[3]);
                    if (h < 13 && this.values.indexOf("PM") !== -1) {
                      v = (h + 12) % 24;
                    } else {
                      v = h % 24;
                    }
                  }
                  if (this.date[4]) {
                    v += parseFloat(this.date[4] / 60);
                  }
                  if (this.date[5]) {
                    v += parseFloat(this.date[5] / 3600);
                  }
                  v /= 24;
                } else if (this.date[0] || this.date[1] || this.date[2] || this.date[3] || this.date[4] || this.date[5]) {
                  if (this.date[0] && this.date[1] && !this.date[2]) {
                    this.date[2] = 1;
                  }
                  var t2 = helpers_date.now(this.date);
                  v = helpers_date.dateToNum(t2);
                }
                if (isNaN(v)) {
                  v = "";
                }
                return v;
              };
              var isBlank = function(v) {
                return v === null || v === "" || v === void 0 ? true : false;
              };
              var isFormula2 = function(value) {
                var v = ("" + value)[0];
                return v == "=" ? true : false;
              };
              var isNumeric = function(t2) {
                return t2 === "currency" || t2 === "percentage" || t2 === "scientific" || t2 === "numeric" ? true : false;
              };
              var getDecimal = function(v) {
                if (v && Number(v) == v) {
                  return ".";
                } else {
                  if (this.options.decimal) {
                    return this.options.decimal;
                  } else {
                    if (this.locale) {
                      var t2 = Intl.NumberFormat(this.locale).format(1.1);
                      return this.options.decimal = t2[1];
                    } else {
                      if (!v) {
                        v = this.mask;
                      }
                      var e = new RegExp("0{1}(.{1})0+", "ig");
                      var t2 = e.exec(v);
                      if (t2 && t2[1] && t2[1].length == 1) {
                        this.options.decimal = t2[1];
                        return t2[1];
                      } else {
                        var e = new RegExp("#{1}(.{1})#+", "ig");
                        var t2 = e.exec(v);
                        if (t2 && t2[1] && t2[1].length == 1) {
                          if (t2[1] === ",") {
                            this.options.decimal = ".";
                          } else {
                            this.options.decimal = ",";
                          }
                        } else {
                          this.options.decimal = "1.1".toLocaleString().substring(1, 2);
                        }
                      }
                    }
                  }
                }
                if (this.options.decimal) {
                  return this.options.decimal;
                } else {
                  return null;
                }
              };
              var ParseValue = function(v, decimal) {
                if (v == "") {
                  return "";
                }
                if (!decimal) {
                  decimal = getDecimal.call(this);
                }
                v = ("" + v).split(decimal);
                var signal = v[0].match(/[-]+/g);
                if (signal && signal.length) {
                  signal = true;
                } else {
                  signal = false;
                }
                v[0] = v[0].match(/[0-9]+/g);
                if (v[0]) {
                  if (signal) {
                    v[0].unshift("-");
                  }
                  v[0] = v[0].join("");
                } else {
                  if (signal) {
                    v[0] = "-";
                  }
                }
                if (v[0] || v[1]) {
                  if (v[1] !== void 0) {
                    v[1] = v[1].match(/[0-9]+/g);
                    if (v[1]) {
                      v[1] = v[1].join("");
                    } else {
                      v[1] = "";
                    }
                  }
                } else {
                  return "";
                }
                return v;
              };
              var FormatValue = function(v, event) {
                if (v === "") {
                  return "";
                }
                var d = getDecimal.call(this);
                var o = this.options;
                v = ParseValue.call(this, v);
                if (v === "") {
                  return "";
                }
                var t2 = null;
                if (v[0]) {
                  if (o.style === "percent") {
                    t2 = parseFloat(v[0]) / 100;
                  } else {
                    t2 = parseFloat(v[0] + ".1");
                  }
                }
                if ((v[0] === "-" || v[0] === "-00") && !v[1] && (event && event.inputType == "deleteContentBackward")) {
                  return "";
                }
                var n = new Intl.NumberFormat(this.locale, o).format(t2);
                n = n.split(d);
                if (o.style === "percent") {
                  if (n[0].indexOf("%") !== -1) {
                    n[0] = n[0].replace("%", "");
                    n[2] = "%";
                  }
                }
                if (typeof n[1] !== "undefined") {
                  var s = n[1].replace(/[0-9]*/g, "");
                  if (s) {
                    n[2] = s;
                  }
                }
                if (v[1] !== void 0) {
                  n[1] = d + v[1];
                } else {
                  n[1] = "";
                }
                return n.join("");
              };
              var Format = function(e, event) {
                var v = Value.call(e);
                if (!v) {
                  return;
                }
                var n = FormatValue.call(this, v, event);
                var t2 = n.length - v.length;
                var index = Caret.call(e) + t2;
                Value.call(e, n, index, true);
              };
              var Extract = function(v) {
                var current = ParseValue.call(this, v);
                if (current) {
                  if (current[0] === "-") {
                    current[0] = "-0";
                  }
                  return parseFloat(current.join("."));
                }
                return null;
              };
              var Caret = function(index, adjustNumeric) {
                if (index === void 0) {
                  if (this.tagName == "DIV") {
                    var pos = 0;
                    var s = window.getSelection();
                    if (s) {
                      if (s.rangeCount !== 0) {
                        var r = s.getRangeAt(0);
                        var p = r.cloneRange();
                        p.selectNodeContents(this);
                        p.setEnd(r.endContainer, r.endOffset);
                        pos = p.toString().length;
                      }
                    }
                    return pos;
                  } else {
                    return this.selectionStart;
                  }
                } else {
                  var n = Value.call(this);
                  if (adjustNumeric) {
                    var p = null;
                    for (var i2 = 0; i2 < n.length; i2++) {
                      if (n[i2].match(/[\-0-9]/g) || n[i2] === "." || n[i2] === ",") {
                        p = i2;
                      }
                    }
                    if (p === null) {
                      p = n.indexOf(" ");
                    }
                    if (index >= p) {
                      index = p + 1;
                    }
                  }
                  if (index > n.length) {
                    index = n.length;
                  }
                  if (index) {
                    if (this.tagName == "DIV") {
                      var s = window.getSelection();
                      var r = document.createRange();
                      if (this.childNodes[0]) {
                        r.setStart(this.childNodes[0], index);
                        s.removeAllRanges();
                        s.addRange(r);
                      }
                    } else {
                      this.selectionStart = index;
                      this.selectionEnd = index;
                    }
                  }
                }
              };
              var Value = function(v, updateCaret, adjustNumeric) {
                if (this.tagName == "DIV") {
                  if (v === void 0) {
                    var v = this.innerText;
                    if (this.value && this.value.length > v.length) {
                      v = this.value;
                    }
                    return v;
                  } else {
                    if (this.innerText !== v) {
                      this.innerText = v;
                      if (updateCaret) {
                        Caret.call(this, updateCaret, adjustNumeric);
                      }
                    }
                  }
                } else {
                  if (v === void 0) {
                    return this.value;
                  } else {
                    if (this.value !== v) {
                      this.value = v;
                      if (updateCaret) {
                        Caret.call(this, updateCaret, adjustNumeric);
                      }
                    }
                  }
                }
              };
              var weekDaysFull = helpers_date.weekdays;
              var weekDays = helpers_date.weekdaysShort;
              var monthsFull = helpers_date.months;
              var months = helpers_date.monthsShort;
              var parser = {
                "YEAR": function(v, s) {
                  var y2 = "" + (/* @__PURE__ */ new Date()).getFullYear();
                  if (typeof this.values[this.index] === "undefined") {
                    this.values[this.index] = "";
                  }
                  if (parseInt(v) >= 0 && parseInt(v) <= 10) {
                    if (this.values[this.index].length < s) {
                      this.values[this.index] += v;
                    }
                  }
                  if (this.values[this.index].length == s) {
                    if (s == 2) {
                      var y2 = y2.substr(0, 2) + this.values[this.index];
                    } else if (s == 3) {
                      var y2 = y2.substr(0, 1) + this.values[this.index];
                    } else if (s == 4) {
                      var y2 = this.values[this.index];
                    }
                    this.date[0] = y2;
                    this.index++;
                  }
                },
                "YYYY": function(v) {
                  parser.YEAR.call(this, v, 4);
                },
                "YYY": function(v) {
                  parser.YEAR.call(this, v, 3);
                },
                "YY": function(v) {
                  parser.YEAR.call(this, v, 2);
                },
                "FIND": function(v, a) {
                  if (isBlank(this.values[this.index])) {
                    this.values[this.index] = "";
                  }
                  if (this.event && this.event.inputType && this.event.inputType.indexOf("delete") > -1) {
                    this.values[this.index] += v;
                    return;
                  }
                  var pos = 0;
                  var count = 0;
                  var value = (this.values[this.index] + v).toLowerCase();
                  for (var i2 = 0; i2 < a.length; i2++) {
                    if (a[i2].toLowerCase().indexOf(value) == 0) {
                      pos = i2;
                      count++;
                    }
                  }
                  if (count > 1) {
                    this.values[this.index] += v;
                  } else if (count == 1) {
                    var t2 = a[pos].length - this.values[this.index].length - 1;
                    this.position += t2;
                    this.values[this.index] = a[pos];
                    this.index++;
                    return pos;
                  }
                },
                "MMM": function(v) {
                  var ret2 = parser.FIND.call(this, v, months);
                  if (ret2 !== void 0) {
                    this.date[1] = ret2 + 1;
                  }
                },
                "MON": function(v) {
                  parser["MMM"].call(this, v);
                },
                "MMMM": function(v) {
                  var ret2 = parser.FIND.call(this, v, monthsFull);
                  if (ret2 !== void 0) {
                    this.date[1] = ret2 + 1;
                  }
                },
                "MONTH": function(v) {
                  parser["MMMM"].call(this, v);
                },
                "MMMMM": function(v) {
                  if (isBlank(this.values[this.index])) {
                    this.values[this.index] = "";
                  }
                  var pos = 0;
                  var count = 0;
                  var value = (this.values[this.index] + v).toLowerCase();
                  for (var i2 = 0; i2 < monthsFull.length; i2++) {
                    if (monthsFull[i2][0].toLowerCase().indexOf(value) == 0) {
                      this.values[this.index] = monthsFull[i2][0];
                      this.date[1] = i2 + 1;
                      this.index++;
                      break;
                    }
                  }
                },
                "MM": function(v) {
                  if (isBlank(this.values[this.index])) {
                    if (parseInt(v) > 1 && parseInt(v) < 10) {
                      this.date[1] = this.values[this.index] = "0" + v;
                      this.index++;
                    } else if (parseInt(v) < 2) {
                      this.values[this.index] = v;
                    }
                  } else {
                    if (this.values[this.index] == 1 && parseInt(v) < 3) {
                      this.date[1] = this.values[this.index] += v;
                      this.index++;
                    } else if (this.values[this.index] == 0 && parseInt(v) > 0 && parseInt(v) < 10) {
                      this.date[1] = this.values[this.index] += v;
                      this.index++;
                    }
                  }
                },
                "M": function(v) {
                  var test = false;
                  if (parseInt(v) >= 0 && parseInt(v) < 10) {
                    if (isBlank(this.values[this.index])) {
                      this.values[this.index] = v;
                      if (v > 1) {
                        this.date[1] = this.values[this.index];
                        this.index++;
                      }
                    } else {
                      if (this.values[this.index] == 1 && parseInt(v) < 3) {
                        this.date[1] = this.values[this.index] += v;
                        this.index++;
                      } else if (this.values[this.index] == 0 && parseInt(v) > 0) {
                        this.date[1] = this.values[this.index] += v;
                        this.index++;
                      } else {
                        var test = true;
                      }
                    }
                  } else {
                    var test = true;
                  }
                  if (test == true) {
                    var t2 = parseInt(this.values[this.index]);
                    if (t2 > 0 && t2 < 12) {
                      this.date[1] = this.values[this.index];
                      this.index++;
                      this.position--;
                    }
                  }
                },
                "D": function(v) {
                  var test = false;
                  if (parseInt(v) >= 0 && parseInt(v) < 10) {
                    if (isBlank(this.values[this.index])) {
                      this.values[this.index] = v;
                      if (parseInt(v) > 3) {
                        this.date[2] = this.values[this.index];
                        this.index++;
                      }
                    } else {
                      if (this.values[this.index] == 3 && parseInt(v) < 2) {
                        this.date[2] = this.values[this.index] += v;
                        this.index++;
                      } else if (this.values[this.index] == 1 || this.values[this.index] == 2) {
                        this.date[2] = this.values[this.index] += v;
                        this.index++;
                      } else if (this.values[this.index] == 0 && parseInt(v) > 0) {
                        this.date[2] = this.values[this.index] += v;
                        this.index++;
                      } else {
                        var test = true;
                      }
                    }
                  } else {
                    var test = true;
                  }
                  if (test == true) {
                    var t2 = parseInt(this.values[this.index]);
                    if (t2 > 0 && t2 < 32) {
                      this.date[2] = this.values[this.index];
                      this.index++;
                      this.position--;
                    }
                  }
                },
                "DD": function(v) {
                  if (isBlank(this.values[this.index])) {
                    if (parseInt(v) > 3 && parseInt(v) < 10) {
                      this.date[2] = this.values[this.index] = "0" + v;
                      this.index++;
                    } else if (parseInt(v) < 10) {
                      this.values[this.index] = v;
                    }
                  } else {
                    if (this.values[this.index] == 3 && parseInt(v) < 2) {
                      this.date[2] = this.values[this.index] += v;
                      this.index++;
                    } else if ((this.values[this.index] == 1 || this.values[this.index] == 2) && parseInt(v) < 10) {
                      this.date[2] = this.values[this.index] += v;
                      this.index++;
                    } else if (this.values[this.index] == 0 && parseInt(v) > 0 && parseInt(v) < 10) {
                      this.date[2] = this.values[this.index] += v;
                      this.index++;
                    }
                  }
                },
                "DDD": function(v) {
                  parser.FIND.call(this, v, weekDays);
                },
                "DY": function(v) {
                  parser["DDD"].call(this, v);
                },
                "DDDD": function(v) {
                  parser.FIND.call(this, v, weekDaysFull);
                },
                "DAY": function(v) {
                  parser["DDDD"].call(this, v);
                },
                "HH12": function(v, two) {
                  var test = false;
                  if (parseInt(v) >= 0 && parseInt(v) < 10) {
                    if (isBlank(this.values[this.index])) {
                      if (parseInt(v) > 1 && parseInt(v) < 10) {
                        if (two) {
                          v = 0 + v;
                        }
                        this.date[3] = this.values[this.index] = v;
                        this.index++;
                      } else if (parseInt(v) < 10) {
                        this.values[this.index] = v;
                      }
                    } else {
                      if (this.values[this.index] == 1 && parseInt(v) < 3) {
                        this.date[3] = this.values[this.index] += v;
                        this.index++;
                      } else if (this.values[this.index] < 1 && parseInt(v) < 10) {
                        this.date[3] = this.values[this.index] += v;
                        this.index++;
                      } else {
                        var test = true;
                      }
                    }
                  } else {
                    var test = true;
                  }
                  if (test == true) {
                    var t2 = parseInt(this.values[this.index]);
                    if (t2 >= 0 && t2 <= 12) {
                      this.date[3] = this.values[this.index];
                      this.index++;
                      this.position--;
                    }
                  }
                },
                "HH24": function(v, two) {
                  var test = false;
                  if (parseInt(v) >= 0 && parseInt(v) < 10) {
                    if (this.values[this.index] == null || this.values[this.index] == "") {
                      if (parseInt(v) > 2 && parseInt(v) < 10) {
                        if (two) {
                          v = 0 + v;
                        }
                        this.date[3] = this.values[this.index] = v;
                        this.index++;
                      } else if (parseInt(v) < 10) {
                        this.values[this.index] = v;
                      }
                    } else {
                      if (this.values[this.index] == 2 && parseInt(v) < 4) {
                        if (!two && this.values[this.index] === "0") {
                          this.values[this.index] = "";
                        }
                        this.date[3] = this.values[this.index] += v;
                        this.index++;
                      } else if (this.values[this.index] < 2 && parseInt(v) < 10) {
                        if (!two && this.values[this.index] === "0") {
                          this.values[this.index] = "";
                        }
                        this.date[3] = this.values[this.index] += v;
                        this.index++;
                      } else {
                        var test = true;
                      }
                    }
                  } else {
                    var test = true;
                  }
                  if (test == true) {
                    var t2 = parseInt(this.values[this.index]);
                    if (t2 >= 0 && t2 < 24) {
                      this.date[3] = this.values[this.index];
                      this.index++;
                      this.position--;
                    }
                  }
                },
                "HH": function(v) {
                  parser["HH24"].call(this, v, 1);
                },
                "H": function(v) {
                  parser["HH24"].call(this, v, 0);
                },
                "\\[H\\]": function(v) {
                  if (this.values[this.index] == void 0) {
                    this.values[this.index] = "";
                  }
                  if (v.match(/[0-9]/g)) {
                    this.date[3] = this.values[this.index] += v;
                  } else {
                    if (this.values[this.index].match(/[0-9]/g)) {
                      this.date[3] = this.values[this.index];
                      this.index++;
                      this.position--;
                    }
                  }
                },
                "N60": function(v, i2) {
                  if (this.values[this.index] == null || this.values[this.index] == "") {
                    if (parseInt(v) > 5 && parseInt(v) < 10) {
                      this.date[i2] = this.values[this.index] = "0" + v;
                      this.index++;
                    } else if (parseInt(v) < 10) {
                      this.values[this.index] = v;
                    }
                  } else {
                    if (parseInt(v) < 10) {
                      this.date[i2] = this.values[this.index] += v;
                      this.index++;
                    }
                  }
                },
                "MI": function(v) {
                  parser.N60.call(this, v, 4);
                },
                "SS": function(v) {
                  parser.N60.call(this, v, 5);
                },
                "AM/PM": function(v) {
                  if (typeof this.values[this.index] === "undefined") {
                    this.values[this.index] = "";
                  }
                  if (this.values[this.index] === "") {
                    if (v.match(/a/i) && this.date[3] < 13) {
                      this.values[this.index] += "A";
                    } else if (v.match(/p/i)) {
                      this.values[this.index] += "P";
                    }
                  } else if (this.values[this.index] === "A" || this.values[this.index] === "P") {
                    this.values[this.index] += "M";
                    this.index++;
                  }
                },
                "WD": function(v) {
                  if (typeof this.values[this.index] === "undefined") {
                    this.values[this.index] = "";
                  }
                  if (parseInt(v) >= 0 && parseInt(v) < 7) {
                    this.values[this.index] = v;
                  }
                  if (this.values[this.index].length == 1) {
                    this.index++;
                  }
                },
                "0{1}(.{1}0+)?": function(v) {
                  var decimal = getDecimal.call(this);
                  var neg = false;
                  if (isBlank(this.values[this.index])) {
                    this.values[this.index] = "";
                  } else {
                    if (this.values[this.index] == "-") {
                      neg = true;
                    }
                  }
                  var current = ParseValue.call(this, this.values[this.index], decimal);
                  if (current) {
                    this.values[this.index] = current.join(decimal);
                  }
                  if (parseInt(v) >= 0 && parseInt(v) < 10) {
                    if (this.values[this.index] == "0" && v > 0) {
                      this.values[this.index] = "";
                    } else if (this.values[this.index] == "-0" && v > 0) {
                      this.values[this.index] = "-";
                    }
                    if (this.values[this.index] != "0" && this.values[this.index] != "-0" || v == decimal) {
                      this.values[this.index] += v;
                    }
                  } else if (decimal && v == decimal) {
                    if (this.values[this.index].indexOf(decimal) == -1) {
                      if (!this.values[this.index]) {
                        this.values[this.index] = "0";
                      }
                      this.values[this.index] += v;
                    }
                  } else if (v == "-") {
                    neg = true;
                  }
                  if (neg === true && this.values[this.index][0] !== "-") {
                    this.values[this.index] = "-" + this.values[this.index];
                  }
                },
                "0{1}(.{1}0+)?E{1}\\+0+": function(v) {
                  parser["0{1}(.{1}0+)?"].call(this, v);
                },
                "0{1}(.{1}0+)?%": function(v) {
                  parser["0{1}(.{1}0+)?"].call(this, v);
                  if (this.values[this.index].match(/[\-0-9]/g)) {
                    if (this.values[this.index] && this.values[this.index].indexOf("%") == -1) {
                      this.values[this.index] += "%";
                    }
                  } else {
                    this.values[this.index] = "";
                  }
                },
                "#(.{1})##0?(.{1}0+)?( ?;(.*)?)?": function(v) {
                  parser["0{1}(.{1}0+)?"].call(this, v);
                  var decimal = getDecimal.call(this);
                  var separator = this.tokens[this.index].substr(1, 1);
                  var negative = this.values[this.index][0] === "-" ? true : false;
                  var current = ParseValue.call(this, this.values[this.index], decimal);
                  if (current !== "") {
                    var n = current[0].match(/[0-9]/g);
                    if (n) {
                      n = n.join("");
                      var t2 = [];
                      var s = 0;
                      for (var j = n.length - 1; j >= 0; j--) {
                        t2.push(n[j]);
                        s++;
                        if (!(s % 3)) {
                          t2.push(separator);
                        }
                      }
                      t2 = t2.reverse();
                      current[0] = t2.join("");
                      if (current[0].substr(0, 1) == separator) {
                        current[0] = current[0].substr(1);
                      }
                    } else {
                      current[0] = "";
                    }
                    this.values[this.index] = current.join(decimal);
                    if (negative) {
                      this.values[this.index] = "-" + this.values[this.index];
                    }
                  }
                },
                "0": function(v) {
                  if (v.match(/[0-9]/g)) {
                    this.values[this.index] = v;
                    this.index++;
                  }
                },
                "[0-9a-zA-Z$]+": function(v) {
                  if (isBlank(this.values[this.index])) {
                    this.values[this.index] = "";
                  }
                  var t2 = this.tokens[this.index];
                  var s = this.values[this.index];
                  var i2 = s.length;
                  if (t2[i2] == v) {
                    this.values[this.index] += v;
                    if (this.values[this.index] == t2) {
                      this.index++;
                    }
                  } else {
                    this.values[this.index] = t2;
                    this.index++;
                    if (v.match(/[\-0-9]/g)) {
                      this.position--;
                    }
                  }
                },
                "A": function(v) {
                  if (v.match(/[a-zA-Z]/gi)) {
                    this.values[this.index] = v;
                    this.index++;
                  }
                },
                ".": function(v) {
                  parser["[0-9a-zA-Z$]+"].call(this, v);
                },
                "@": function(v) {
                  if (isBlank(this.values[this.index])) {
                    this.values[this.index] = "";
                  }
                  this.values[this.index] += v;
                }
              };
              var getTokens = function(str) {
                if (this.type == "general") {
                  var t2 = [].concat(tokens2.general);
                } else {
                  var t2 = [].concat(tokens2.currency, tokens2.datetime, tokens2.percentage, tokens2.scientific, tokens2.numeric, tokens2.text, tokens2.general);
                }
                var e = new RegExp(t2.join("|"), "gi");
                return str.match(e);
              };
              var getMethod = function(str) {
                if (!this.type) {
                  var types = Object.keys(tokens2);
                } else if (this.type == "text") {
                  var types = ["text"];
                } else if (this.type == "general") {
                  var types = ["general"];
                } else if (this.type == "datetime") {
                  var types = ["numeric", "datetime", "general"];
                } else {
                  var types = ["currency", "percentage", "scientific", "numeric", "general"];
                }
                for (var i2 = 0; i2 < types.length; i2++) {
                  var type = types[i2];
                  for (var j = 0; j < tokens2[type].length; j++) {
                    var e = new RegExp(tokens2[type][j], "gi");
                    var r = str.match(e);
                    if (r) {
                      return { type, method: tokens2[type][j] };
                    }
                  }
                }
              };
              var getMethods = function(t2) {
                var result = [];
                for (var i2 = 0; i2 < t2.length; i2++) {
                  var m = getMethod.call(this, t2[i2]);
                  if (m) {
                    result.push(m.method);
                  } else {
                    result.push(null);
                  }
                }
                for (var i2 = 0; i2 < result.length; i2++) {
                  if (result[i2] == "MM") {
                    if (result[i2 - 1] && result[i2 - 1].indexOf("H") >= 0) {
                      result[i2] = "MI";
                    } else if (result[i2 - 2] && result[i2 - 2].indexOf("H") >= 0) {
                      result[i2] = "MI";
                    } else if (result[i2 + 1] && result[i2 + 1].indexOf("S") >= 0) {
                      result[i2] = "MI";
                    } else if (result[i2 + 2] && result[i2 + 2].indexOf("S") >= 0) {
                      result[i2] = "MI";
                    }
                  }
                }
                return result;
              };
              var getType = function(str) {
                var m = getMethod.call(this, str);
                if (m) {
                  var type = m.type;
                }
                if (type) {
                  var numeric = 0;
                  var t2 = getTokens.call(this, str);
                  for (var i2 = 0; i2 < t2.length; i2++) {
                    m = getMethod.call(this, t2[i2]);
                    if (m && isNumeric(m.type)) {
                      numeric++;
                    }
                  }
                  if (numeric > 1) {
                    type = "general";
                  }
                }
                return type;
              };
              var parse = function() {
                if (typeof parser[this.methods[this.index]] == "function") {
                  parser[this.methods[this.index]].call(this, this.value[this.position]);
                  this.position++;
                } else {
                  this.values[this.index] = this.tokens[this.index];
                  this.index++;
                }
              };
              var toPlainString = function(num) {
                return ("" + +num).replace(
                  /(-?)(\d*)\.?(\d*)e([+-]\d+)/,
                  function(a, b, c, d, e) {
                    return e < 0 ? b + "0." + Array(1 - e - c.length).join(0) + c + d : b + c + d + Array(e - d.length + 1).join(0);
                  }
                );
              };
              var obj2 = function(e, config, returnObject) {
                var r = null;
                var t2 = null;
                var o = {
                  // Element
                  input: null,
                  // Current value
                  value: null,
                  // Mask options
                  options: {},
                  // New values for each token found
                  values: [],
                  // Token position
                  index: 0,
                  // Character position
                  position: 0,
                  // Date raw values
                  date: [0, 0, 0, 0, 0, 0],
                  // Raw number for the numeric values
                  number: 0
                };
                if (typeof e == "object") {
                  o.input = e.target;
                  o.value = Value.call(e.target);
                  o.caret = Caret.call(e.target);
                  if (t2 = e.target.getAttribute("data-mask")) {
                    o.mask = t2;
                  }
                  if (t2 = e.target.getAttribute("data-type")) {
                    o.type = t2;
                  }
                  if (e.target.mask) {
                    if (e.target.mask.options) {
                      o.options = e.target.mask.options;
                    }
                    if (e.target.mask.locale) {
                      o.locale = e.target.mask.locale;
                    }
                  } else {
                    if (t2 = e.target.getAttribute("data-locale")) {
                      o.locale = t2;
                      if (o.mask) {
                        o.options.style = o.mask;
                      }
                    }
                  }
                  if (e.target.attributes && e.target.attributes.length) {
                    for (var i2 = 0; i2 < e.target.attributes.length; i2++) {
                      var k = e.target.attributes[i2].name;
                      var v = e.target.attributes[i2].value;
                      if (k.substr(0, 4) == "data") {
                        o.options[k.substr(5)] = v;
                      }
                    }
                  }
                } else {
                  if (typeof config == "string") {
                    o.mask = config;
                  } else {
                    var k = Object.keys(config);
                    for (var i2 = 0; i2 < k.length; i2++) {
                      o[k[i2]] = config[k[i2]];
                    }
                  }
                  if (typeof e === "number") {
                    getDecimal.call(o, o.mask);
                    e = ("" + e).replace(".", o.options.decimal);
                  }
                  o.value = e;
                  if (o.input) {
                    Value.call(o.input, e);
                    helpers2.focus(o.input);
                    o.caret = Caret.call(o.input);
                  }
                }
                if (!isFormula2(o.value) && (o.mask || o.locale)) {
                  if (o.mask) {
                    o.mask = o.mask.replace(new RegExp(/\[h]/), "|h|");
                    o.mask = o.mask.replace(new RegExp(/\[.*?\]/), "");
                    o.mask = o.mask.replace(new RegExp(/\|h\|/), "[h]");
                    if (o.mask.indexOf(";") !== -1) {
                      var t2 = o.mask.split(";");
                      o.mask = t2[0];
                    }
                    if (o.mask.indexOf("##") !== -1) {
                      var d = o.mask.split(";");
                      if (d[0]) {
                        if (typeof e == "object") {
                          d[0] = d[0].replace(new RegExp(/_\)/g), "");
                          d[0] = d[0].replace(new RegExp(/_\(/g), "");
                        }
                        d[0] = d[0].replace("*", "	");
                        d[0] = d[0].replace(new RegExp(/_-/g), "");
                        d[0] = d[0].replace(new RegExp(/_/g), "");
                        d[0] = d[0].replace(new RegExp(/"/g), "");
                        d[0] = d[0].replace("##0.###", "##0.000");
                        d[0] = d[0].replace("##0.##", "##0.00");
                        d[0] = d[0].replace("##0.#", "##0.0");
                        d[0] = d[0].replace("##0,###", "##0,000");
                        d[0] = d[0].replace("##0,##", "##0,00");
                        d[0] = d[0].replace("##0,#", "##0,0");
                      }
                      o.mask = d[0];
                    }
                    if (o.mask.indexOf("\\") !== -1) {
                      var d = o.mask.split(";");
                      d[0] = d[0].replace(new RegExp(/\\/g), "");
                      o.mask = d[0];
                    }
                    if (!o.type) {
                      o.type = getType.call(o, o.mask);
                    }
                    o.tokens = getTokens.call(o, o.mask);
                  }
                  if (typeof e !== "object" || !e.inputType || !e.inputType.indexOf("insert") || !e.inputType.indexOf("delete")) {
                    if (o.locale) {
                      if (o.input) {
                        Format.call(o, o.input, e);
                      } else {
                        var newValue = FormatValue.call(o, o.value);
                      }
                    } else {
                      o.methods = getMethods.call(o, o.tokens);
                      o.event = e;
                      while (o.position < o.value.length && typeof o.tokens[o.index] !== "undefined") {
                        parse.call(o);
                      }
                      var newValue = o.values.join("");
                      if (isNumeric(o.type) && newValue !== "") {
                        while (typeof o.tokens[o.index] !== "undefined") {
                          var t2 = getMethod.call(o, o.tokens[o.index]);
                          if (t2 && t2.type == "general") {
                            o.values[o.index] = o.tokens[o.index];
                          }
                          o.index++;
                        }
                        var adjustNumeric = true;
                      } else {
                        var adjustNumeric = false;
                      }
                      newValue = o.values.join("");
                      if (o.input) {
                        t2 = newValue.length - o.value.length;
                        if (t2 > 0) {
                          var caret = o.caret + t2;
                        } else {
                          var caret = o.caret;
                        }
                        Value.call(o.input, newValue, caret, adjustNumeric);
                      }
                    }
                  }
                  if (o.input) {
                    var label = null;
                    if (isNumeric(o.type)) {
                      let v2 = Value.call(o.input);
                      o.number = Extract.call(o, v2);
                      if (o.type == "percentage" && ("" + v2).indexOf("%") !== -1) {
                        label = obj2.adjustPrecision(o.number / 100);
                      } else {
                        label = o.number;
                      }
                    } else if (o.type == "datetime") {
                      label = getDate.call(o);
                      if (o.date[0] && o.date[1] && o.date[2]) {
                        o.input.setAttribute("data-completed", true);
                      }
                    }
                    if (label) {
                      o.input.setAttribute("data-value", label);
                    }
                  }
                  if (newValue !== void 0) {
                    if (returnObject) {
                      return o;
                    } else {
                      return newValue;
                    }
                  }
                }
              };
              obj2.adjustPrecision = function(num) {
                if (typeof num === "number" && !Number.isInteger(num)) {
                  const v = num.toString().split(".");
                  if (v[1] && v[1].length > 10) {
                    let t0 = 0;
                    const t1 = v[1][v[1].length - 2];
                    if (t1 == 0 || t1 == 9) {
                      for (let i2 = v[1].length - 2; i2 > 0; i2--) {
                        if (t0 >= 0 && v[1][i2] == t1) {
                          t0++;
                          if (t0 > 6) {
                            break;
                          }
                        } else {
                          t0 = 0;
                          break;
                        }
                      }
                      if (t0) {
                        return parseFloat(parseFloat(num).toFixed(v[1].length - 1));
                      }
                    }
                  }
                }
                return num;
              };
              obj2.getType = getType;
              obj2.prepare = function(str, o) {
                if (!o) {
                  o = {};
                }
                return getTokens.call(o, str);
              };
              obj2.apply = function(e) {
                var v = Value.call(e.target);
                if (e.key.length == 1) {
                  v += e.key;
                }
                Value.call(e.target, obj2(v, e.target.getAttribute("data-mask")));
              };
              obj2.run = function(value, mask2, decimal) {
                return obj2(value, { mask: mask2, decimal });
              };
              obj2.extract = function(v, options, returnObject) {
                if (isBlank(v)) {
                  return v;
                }
                if (typeof options != "object") {
                  return v;
                } else {
                  options = Object.assign({}, options);
                  if (!options.options) {
                    options.options = {};
                  }
                }
                if (!options.mask && options.format) {
                  options.mask = options.format;
                }
                if (options.mask) {
                  if (options.mask.indexOf(";") !== -1) {
                    var t2 = options.mask.split(";");
                    options.mask = t2[0];
                  }
                  options.mask = options.mask.replace(new RegExp(/\[h]/), "|h|");
                  options.mask = options.mask.replace(new RegExp(/\[.*?\]/), "");
                  options.mask = options.mask.replace(new RegExp(/\|h\|/), "[h]");
                }
                getDecimal.call(options, options.mask);
                var type = null;
                var value = null;
                if (options.type == "percent" || options.options.style == "percent") {
                  type = "percentage";
                } else if (options.mask) {
                  type = getType.call(options, options.mask);
                }
                if (type === "text") {
                  var o = {};
                  value = v;
                } else if (type === "general") {
                  var o = obj2(v, options, true);
                  value = v;
                } else if (type === "datetime") {
                  if (v instanceof Date) {
                    v = obj2.getDateString(v, options.mask);
                  }
                  var o = obj2(v, options, true);
                  if (helpers2.isNumeric(v)) {
                    value = v;
                  } else {
                    value = extractDate.call(o);
                  }
                } else if (type === "scientific") {
                  value = v;
                  if (typeof v === "string") {
                    value = Number(value);
                  }
                  var o = options;
                } else {
                  value = Extract.call(options, v);
                  if (type === "percentage" && ("" + v).indexOf("%") !== -1) {
                    value /= 100;
                  }
                  var o = options;
                }
                o.value = value;
                if (!o.type && type) {
                  o.type = type;
                }
                if (returnObject) {
                  return o;
                } else {
                  return value;
                }
              };
              obj2.render = function(value, options, fullMask, strict) {
                if (isBlank(value)) {
                  return value;
                }
                if (typeof options != "object") {
                  return value;
                } else {
                  options = Object.assign({}, options);
                  if (!options.options) {
                    options.options = {};
                  }
                }
                if (!options.mask && options.format) {
                  options.mask = options.format;
                }
                if (options.mask) {
                  if (options.mask.indexOf(";") !== -1) {
                    var t2 = options.mask.split(";");
                    if (!fullMask) {
                      t2[0] = t2[0].replace(new RegExp(/_\)/g), "");
                      t2[0] = t2[0].replace(new RegExp(/_\(/g), "");
                    }
                    options.mask = t2[0];
                  }
                  options.mask = options.mask.replace(new RegExp(/\[h]/), "|h|");
                  options.mask = options.mask.replace(new RegExp(/\[.*?\]/), "");
                  options.mask = options.mask.replace(new RegExp(/\|h\|/), "[h]");
                }
                var type = null;
                if (options.type == "percent" || options.options.style == "percent") {
                  type = "percentage";
                } else if (options.mask) {
                  type = getType.call(options, options.mask);
                } else if (value instanceof Date) {
                  type = "datetime";
                }
                var fillWithBlanks = false;
                if (type == "datetime" || options.type == "calendar") {
                  var t2 = obj2.getDateString(value, options.mask);
                  if (t2) {
                    value = t2;
                  }
                  if (options.mask && fullMask) {
                    fillWithBlanks = true;
                  }
                } else if (type === "text") {
                  if (typeof value === "number") {
                    value = value.toString();
                  }
                } else {
                  if (typeof value === "string" && jSuites2.isNumeric(value)) {
                    value = Number(value);
                  }
                  if (type === "percentage") {
                    value = obj2.adjustPrecision(value * 100);
                  }
                  if (typeof value === "number") {
                    var t2 = null;
                    if (options.mask && fullMask) {
                      var d = getDecimal.call(options, options.mask);
                      if (type === "scientific") {
                        if (options.mask.indexOf(d) !== -1) {
                          let exp = options.mask.split("E");
                          exp = exp[0].split(d);
                          exp = "" + exp[1].match(/[0-9]+/g);
                          exp = exp.length;
                          t2 = value.toExponential(exp);
                        } else {
                          t2 = value.toExponential(0);
                        }
                      } else {
                        if (options.mask.indexOf(d) !== -1) {
                          d = options.mask.split(d);
                          d = "" + d[1].match(/[0-9]+/g);
                          d = d.length;
                          t2 = value.toFixed(d);
                          let n = value.toString().split(".");
                          let fraction = n[1];
                          if (fraction && fraction.length > d && fraction[fraction.length - 1] === "5") {
                            t2 = parseFloat(n[0] + "." + fraction + "1").toFixed(d);
                          }
                        } else {
                          t2 = value.toFixed(0);
                        }
                        if (("" + t2).indexOf("e") !== -1) {
                          t2 = toPlainString(t2);
                        }
                      }
                    } else if (options.locale && fullMask) {
                      var d = ("" + value).split(".");
                      if (options.options) {
                        if (typeof d[1] === "undefined") {
                          d[1] = "";
                        }
                        var len = d[1].length;
                        if (options.options.minimumFractionDigits > len) {
                          for (var i2 = 0; i2 < options.options.minimumFractionDigits - len; i2++) {
                            d[1] += "0";
                          }
                        }
                      }
                      if (!d[1].length) {
                        t2 = d[0];
                      } else {
                        t2 = d.join(".");
                      }
                      var len = d[1].length;
                      if (options.options && options.options.maximumFractionDigits < len) {
                        t2 = parseFloat(t2).toFixed(options.options.maximumFractionDigits);
                      }
                    } else {
                      t2 = toPlainString(value);
                    }
                    if (t2 !== null) {
                      value = t2;
                      getDecimal.call(options, options.mask);
                      if (options.options.decimal) {
                        value = value.replace(".", options.options.decimal);
                      }
                    }
                  } else {
                    if (options.mask && fullMask) {
                      fillWithBlanks = true;
                    }
                  }
                }
                if (fillWithBlanks) {
                  var s = options.mask.length - value.length;
                  if (s > 0) {
                    for (var i2 = 0; i2 < s; i2++) {
                      value += " ";
                    }
                  }
                }
                if (type === "scientific") {
                  if (!fullMask) {
                    value = toPlainString(value);
                  } else {
                    return value;
                  }
                }
                if (type === "numeric" && strict === false && typeof value === "string") {
                  return value;
                }
                value = obj2(value, options);
                if (fullMask && type === "numeric") {
                  var maskZeros = options.mask.match(new RegExp(/^[0]+$/gm));
                  if (maskZeros && maskZeros.length === 1) {
                    var maskLength = maskZeros[0].length;
                    if (maskLength > 3) {
                      value = "" + value;
                      while (value.length < maskLength) {
                        value = "0" + value;
                      }
                    }
                  }
                }
                return value;
              };
              obj2.set = function(e, m) {
                if (m) {
                  e.setAttribute("data-mask", m);
                  var event = new Event("input", {
                    bubbles: true,
                    cancelable: true
                  });
                  e.dispatchEvent(event);
                }
              };
              obj2.extractDateFromString = function(date, format) {
                var o = obj2(date, { mask: format }, true);
                if (date > 0 && Number(date) == date && (o.values.join("") !== o.value || o.type == "numeric")) {
                  var d = new Date(Math.round((date - 25569) * 86400 * 1e3));
                  return d.getFullYear() + "-" + helpers2.two(d.getMonth()) + "-" + helpers2.two(d.getDate()) + " 00:00:00";
                }
                var complete = false;
                if (o.values && o.values.length === o.tokens.length && o.values[o.values.length - 1].length >= o.tokens[o.tokens.length - 1].length) {
                  complete = true;
                }
                if (o.date[0] && o.date[1] && (o.date[2] || complete)) {
                  if (!o.date[2]) {
                    o.date[2] = 1;
                  }
                  return o.date[0] + "-" + helpers2.two(o.date[1]) + "-" + helpers2.two(o.date[2]) + " " + helpers2.two(o.date[3]) + ":" + helpers2.two(o.date[4]) + ":" + helpers2.two(o.date[5]);
                }
                return "";
              };
              obj2.getDateString = function(value, options) {
                if (!options) {
                  var options = {};
                }
                if (options && typeof options == "object") {
                  if (options.format) {
                    var format = options.format;
                  } else if (options.mask) {
                    var format = options.mask;
                  }
                } else {
                  var format = options;
                }
                if (!format) {
                  format = "YYYY-MM-DD";
                }
                if (format.indexOf("[h]") >= 0) {
                  var result = 0;
                  if (value && helpers2.isNumeric(value)) {
                    result = parseFloat(24 * Number(value));
                    if (format.indexOf("mm") >= 0) {
                      var h = ("" + result).split(".");
                      if (h[1]) {
                        var d = 60 * parseFloat("0." + h[1]);
                        d = parseFloat(d.toFixed(2));
                      } else {
                        var d = 0;
                      }
                      result = parseInt(h[0]) + ":" + helpers2.two(d);
                    }
                  }
                  return result;
                }
                if (value instanceof Date) {
                  value = helpers_date.now(value);
                } else if (value && helpers2.isNumeric(value)) {
                  value = helpers_date.numToDate(value);
                }
                var tokens3 = ["DAY", "WD", "DDDD", "DDD", "DD", "D", "Q", "HH24", "HH12", "HH", "H", "AM/PM", "MI", "SS", "MS", "YYYY", "YYY", "YY", "Y", "MONTH", "MON", "MMMMM", "MMMM", "MMM", "MM", "M", "."];
                var e = new RegExp(tokens3.join("|"), "gi");
                var t2 = format.match(e);
                for (var i2 = 0; i2 < t2.length; i2++) {
                  if (t2[i2].toUpperCase() == "MM") {
                    if (t2[i2 - 1] && t2[i2 - 1].toUpperCase().indexOf("H") >= 0) {
                      t2[i2] = "mi";
                    } else if (t2[i2 - 2] && t2[i2 - 2].toUpperCase().indexOf("H") >= 0) {
                      t2[i2] = "mi";
                    } else if (t2[i2 + 1] && t2[i2 + 1].toUpperCase().indexOf("S") >= 0) {
                      t2[i2] = "mi";
                    } else if (t2[i2 + 2] && t2[i2 + 2].toUpperCase().indexOf("S") >= 0) {
                      t2[i2] = "mi";
                    }
                  }
                }
                var o = {
                  tokens: t2
                };
                if (value) {
                  var d = "" + value;
                  var splitStr = d.indexOf("T") !== -1 ? "T" : " ";
                  d = d.split(splitStr);
                  var h = 0;
                  var m = 0;
                  var s = 0;
                  if (d[1]) {
                    h = d[1].split(":");
                    m = h[1] ? h[1] : 0;
                    s = h[2] ? h[2] : 0;
                    h = h[0] ? h[0] : 0;
                  }
                  d = d[0].split("-");
                  let day = new Date(d[0], d[1], 0).getDate();
                  if (d[0] && d[1] && d[2] && d[0] > 0 && d[1] > 0 && d[1] < 13 && d[2] > 0 && d[2] <= day) {
                    o.data = [d[0], d[1], d[2], h, m, s];
                    o.value = [];
                    var calendar2 = new Date(o.data[0], o.data[1] - 1, o.data[2], o.data[3], o.data[4], o.data[5]);
                    var get = function(i3) {
                      var t3 = this.tokens[i3];
                      var s2 = t3.toUpperCase();
                      var v = null;
                      if (s2 === "YYYY") {
                        v = this.data[0];
                      } else if (s2 === "YYY") {
                        v = this.data[0].substring(1, 4);
                      } else if (s2 === "YY") {
                        v = this.data[0].substring(2, 4);
                      } else if (s2 === "Y") {
                        v = this.data[0].substring(3, 4);
                      } else if (t3 === "MON") {
                        v = helpers_date.months[calendar2.getMonth()].substr(0, 3).toUpperCase();
                      } else if (t3 === "mon") {
                        v = helpers_date.months[calendar2.getMonth()].substr(0, 3).toLowerCase();
                      } else if (t3 === "MONTH") {
                        v = helpers_date.months[calendar2.getMonth()].toUpperCase();
                      } else if (t3 === "month") {
                        v = helpers_date.months[calendar2.getMonth()].toLowerCase();
                      } else if (s2 === "MMMMM") {
                        v = helpers_date.months[calendar2.getMonth()].substr(0, 1);
                      } else if (s2 === "MMMM" || t3 === "Month") {
                        v = helpers_date.months[calendar2.getMonth()];
                      } else if (s2 === "MMM" || t3 == "Mon") {
                        v = helpers_date.months[calendar2.getMonth()].substr(0, 3);
                      } else if (s2 === "MM") {
                        v = helpers2.two(this.data[1]);
                      } else if (s2 === "M") {
                        v = calendar2.getMonth() + 1;
                      } else if (t3 === "DAY") {
                        v = helpers_date.weekdays[calendar2.getDay()].toUpperCase();
                      } else if (t3 === "day") {
                        v = helpers_date.weekdays[calendar2.getDay()].toLowerCase();
                      } else if (s2 === "DDDD" || t3 == "Day") {
                        v = helpers_date.weekdays[calendar2.getDay()];
                      } else if (s2 === "DDD") {
                        v = helpers_date.weekdays[calendar2.getDay()].substr(0, 3);
                      } else if (s2 === "DD") {
                        v = helpers2.two(this.data[2]);
                      } else if (s2 === "D") {
                        v = parseInt(this.data[2]);
                      } else if (s2 === "Q") {
                        v = Math.floor((calendar2.getMonth() + 3) / 3);
                      } else if (s2 === "HH24" || s2 === "HH") {
                        v = this.data[3];
                        if (v > 12 && this.tokens.indexOf("am/pm") !== -1) {
                          v -= 12;
                        }
                        v = helpers2.two(v);
                      } else if (s2 === "HH12") {
                        if (this.data[3] > 12) {
                          v = helpers2.two(this.data[3] - 12);
                        } else {
                          v = helpers2.two(this.data[3]);
                        }
                      } else if (s2 === "H") {
                        v = this.data[3];
                        if (v > 12 && this.tokens.indexOf("am/pm") !== -1) {
                          v -= 12;
                          v = helpers2.two(v);
                        }
                      } else if (s2 === "MI") {
                        v = helpers2.two(this.data[4]);
                      } else if (s2 === "SS") {
                        v = helpers2.two(this.data[5]);
                      } else if (s2 === "MS") {
                        v = calendar2.getMilliseconds();
                      } else if (s2 === "AM/PM") {
                        if (this.data[3] >= 12) {
                          v = "PM";
                        } else {
                          v = "AM";
                        }
                      } else if (s2 === "WD") {
                        v = helpers_date.weekdays[calendar2.getDay()];
                      }
                      if (v === null) {
                        this.value[i3] = this.tokens[i3];
                      } else {
                        this.value[i3] = v;
                      }
                    };
                    for (var i2 = 0; i2 < o.tokens.length; i2++) {
                      get.call(o, i2);
                    }
                    value = o.value.join("");
                  } else {
                    value = "";
                  }
                }
                return value;
              };
              return obj2;
            }
            var mask = Mask();
            ;
            function Calendar() {
              var Component = (function(el, options) {
                if (el.calendar) {
                  return el.calendar.setOptions(options, true);
                }
                var obj2 = { type: "calendar" };
                obj2.options = {};
                obj2.date = null;
                obj2.setOptions = function(options2, reset) {
                  var defaults = {
                    // Render type: [ default | year-month-picker ]
                    type: "default",
                    // Restrictions
                    validRange: null,
                    // Starting weekday - 0 for sunday, 6 for saturday
                    startingDay: null,
                    // Date format
                    format: "DD/MM/YYYY",
                    // Allow keyboard date entry
                    readonly: true,
                    // Today is default
                    today: false,
                    // Show timepicker
                    time: false,
                    // Show the reset button
                    resetButton: true,
                    // Placeholder
                    placeholder: "",
                    // Translations can be done here
                    months: helpers_date.monthsShort,
                    monthsFull: helpers_date.months,
                    weekdays: helpers_date.weekdays,
                    textDone: dictionary.translate("Done"),
                    textReset: dictionary.translate("Reset"),
                    textUpdate: dictionary.translate("Update"),
                    // Value
                    value: null,
                    // Fullscreen (this is automatic set for screensize < 800)
                    fullscreen: false,
                    // Create the calendar closed as default
                    opened: false,
                    // Events
                    onopen: null,
                    onclose: null,
                    onchange: null,
                    onupdate: null,
                    // Internal mode controller
                    mode: null,
                    position: null,
                    // Data type
                    dataType: null,
                    // Controls
                    controls: true,
                    // Auto select
                    autoSelect: true
                  };
                  for (var property in defaults) {
                    if (options2 && options2.hasOwnProperty(property)) {
                      obj2.options[property] = options2[property];
                    } else {
                      if (typeof obj2.options[property] == "undefined" || reset === true) {
                        obj2.options[property] = defaults[property];
                      }
                    }
                  }
                  if (obj2.options.resetButton == false) {
                    calendarReset.style.display = "none";
                  } else {
                    calendarReset.style.display = "";
                  }
                  if (obj2.options.readonly) {
                    el.setAttribute("readonly", "readonly");
                  } else {
                    el.removeAttribute("readonly");
                  }
                  if (obj2.options.placeholder) {
                    el.setAttribute("placeholder", obj2.options.placeholder);
                  } else {
                    el.removeAttribute("placeholder");
                  }
                  if (helpers2.isNumeric(obj2.options.value) && obj2.options.value > 0) {
                    obj2.options.value = Component.numToDate(obj2.options.value);
                    obj2.options.dataType = "numeric";
                  }
                  calendarReset.innerHTML = obj2.options.textReset;
                  calendarConfirm.innerHTML = obj2.options.textDone;
                  calendarControlsUpdateButton.innerHTML = obj2.options.textUpdate;
                  if (obj2.options.format) {
                    el.setAttribute("data-mask", obj2.options.format.toLowerCase());
                  }
                  if (!obj2.options.value && obj2.options.today) {
                    var value = Component.now();
                  } else {
                    var value = obj2.options.value;
                  }
                  if (value) {
                    obj2.options.value = null;
                    obj2.setValue(value);
                  }
                  return obj2;
                };
                obj2.open = function(value) {
                  if (!calendar2.classList.contains("jcalendar-focus")) {
                    if (!calendar2.classList.contains("jcalendar-inline")) {
                      Component.current = obj2;
                      tracking(obj2, true);
                      obj2.getDays();
                      if (obj2.options.type == "year-month-picker") {
                        obj2.getMonths();
                      }
                      if (obj2.options.time) {
                        calendarSelectHour.value = obj2.date[3];
                        calendarSelectMin.value = obj2.date[4];
                      }
                      calendar2.classList.add("jcalendar-focus");
                      if (helpers2.getWindowWidth() < 800 || obj2.options.fullscreen) {
                        calendar2.classList.add("jcalendar-fullsize");
                        animation.slideBottom(calendarContent, 1);
                      } else {
                        calendar2.classList.remove("jcalendar-fullsize");
                        var rect = el.getBoundingClientRect();
                        var rectContent = calendarContent.getBoundingClientRect();
                        if (obj2.options.position) {
                          calendarContainer.style.position = "fixed";
                          if (window.innerHeight < rect.bottom + rectContent.height) {
                            calendarContainer.style.top = rect.top - (rectContent.height + 2) + "px";
                          } else {
                            calendarContainer.style.top = rect.top + rect.height + 2 + "px";
                          }
                          calendarContainer.style.left = rect.left + "px";
                        } else {
                          if (window.innerHeight < rect.bottom + rectContent.height) {
                            var d = -1 * (rect.height + rectContent.height + 2);
                            if (d + rect.top < 0) {
                              d = -1 * (rect.top + rect.height);
                            }
                            calendarContainer.style.top = d + "px";
                          } else {
                            calendarContainer.style.top = "2px";
                          }
                          if (window.innerWidth < rect.left + rectContent.width) {
                            var d = window.innerWidth - (rect.left + rectContent.width + 20);
                            calendarContainer.style.left = d + "px";
                          } else {
                            calendarContainer.style.left = "0px";
                          }
                        }
                      }
                      if (typeof obj2.options.onopen == "function") {
                        obj2.options.onopen(el);
                      }
                    }
                  }
                };
                obj2.close = function(ignoreEvents, update) {
                  if (obj2.options.autoSelect !== true && typeof update === "undefined") {
                    update = false;
                  }
                  if (calendar2.classList.contains("jcalendar-focus")) {
                    if (update !== false) {
                      var element = calendar2.querySelector(".jcalendar-selected");
                      if (typeof update == "string") {
                        var value = update;
                      } else if (!element || element.classList.contains("jcalendar-disabled")) {
                        var value = obj2.options.value;
                      } else {
                        var value = obj2.getValue();
                      }
                      obj2.setValue(value);
                    } else {
                      let value2 = obj2.options.value || "";
                      obj2.options.value = null;
                      obj2.setValue(value2);
                    }
                    if (!ignoreEvents && typeof obj2.options.onclose == "function") {
                      obj2.options.onclose(el);
                    }
                    calendar2.classList.remove("jcalendar-focus");
                    tracking(obj2, false);
                    Component.current = null;
                  }
                  return obj2.options.value;
                };
                obj2.prev = function() {
                  if (obj2.options.mode == "years") {
                    obj2.date[0] = obj2.date[0] - 12;
                    obj2.getYears();
                  } else if (obj2.options.mode == "months") {
                    obj2.date[0] = parseInt(obj2.date[0]) - 1;
                    obj2.getMonths();
                  } else {
                    if (obj2.date[1] < 2) {
                      obj2.date[0] = obj2.date[0] - 1;
                      obj2.date[1] = 12;
                    } else {
                      obj2.date[1] = obj2.date[1] - 1;
                    }
                    obj2.getDays();
                  }
                };
                obj2.next = function() {
                  if (obj2.options.mode == "years") {
                    obj2.date[0] = parseInt(obj2.date[0]) + 12;
                    obj2.getYears();
                  } else if (obj2.options.mode == "months") {
                    obj2.date[0] = parseInt(obj2.date[0]) + 1;
                    obj2.getMonths();
                  } else {
                    if (obj2.date[1] > 11) {
                      obj2.date[0] = parseInt(obj2.date[0]) + 1;
                      obj2.date[1] = 1;
                    } else {
                      obj2.date[1] = parseInt(obj2.date[1]) + 1;
                    }
                    obj2.getDays();
                  }
                };
                obj2.setToday = function() {
                  var value = (/* @__PURE__ */ new Date()).toISOString().substr(0, 10);
                  obj2.setValue(value);
                  return value;
                };
                obj2.setValue = function(val) {
                  if (!val) {
                    val = "" + val;
                  }
                  var newValue = val;
                  var oldValue = obj2.options.value;
                  if (oldValue != newValue) {
                    if (!newValue) {
                      obj2.date = null;
                      var val = "";
                      el.classList.remove("jcalendar_warning");
                      el.title = "";
                    } else {
                      var value = obj2.setLabel(newValue, obj2.options);
                      var date = newValue.split(" ");
                      if (!date[1]) {
                        date[1] = "00:00:00";
                      }
                      var time = date[1].split(":");
                      var date = date[0].split("-");
                      var y2 = parseInt(date[0]);
                      var m = parseInt(date[1]);
                      var d = parseInt(date[2]);
                      var h = parseInt(time[0]);
                      var i2 = parseInt(time[1]);
                      obj2.date = [y2, m, d, h, i2, 0];
                      var val = obj2.setLabel(newValue, obj2.options);
                      var current = Component.now(new Date(y2, m - 1, d), true);
                      if (obj2.options.validRange) {
                        if (!obj2.options.validRange[0] || current >= obj2.options.validRange[0]) {
                          var test1 = true;
                        } else {
                          var test1 = false;
                        }
                        if (!obj2.options.validRange[1] || current <= obj2.options.validRange[1]) {
                          var test2 = true;
                        } else {
                          var test2 = false;
                        }
                        if (!(test1 && test2)) {
                          el.classList.add("jcalendar_warning");
                          el.title = dictionary.translate("Date outside the valid range");
                        } else {
                          el.classList.remove("jcalendar_warning");
                          el.title = "";
                        }
                      } else {
                        el.classList.remove("jcalendar_warning");
                        el.title = "";
                      }
                    }
                    obj2.options.value = newValue;
                    if (typeof obj2.options.onchange == "function") {
                      obj2.options.onchange(el, newValue, oldValue);
                    }
                    if (el.value != val) {
                      el.value = val;
                      if (typeof el.oninput == "function") {
                        el.oninput({
                          type: "input",
                          target: el,
                          value: el.value
                        });
                      }
                    }
                  }
                  if (obj2.date) {
                    obj2.getDays();
                    if (obj2.options.type == "year-month-picker") {
                      obj2.getMonths();
                    }
                  }
                };
                obj2.getValue = function() {
                  if (obj2.date) {
                    if (obj2.options.time) {
                      return helpers2.two(obj2.date[0]) + "-" + helpers2.two(obj2.date[1]) + "-" + helpers2.two(obj2.date[2]) + " " + helpers2.two(obj2.date[3]) + ":" + helpers2.two(obj2.date[4]) + ":" + helpers2.two(0);
                    } else {
                      return helpers2.two(obj2.date[0]) + "-" + helpers2.two(obj2.date[1]) + "-" + helpers2.two(obj2.date[2]) + " " + helpers2.two(0) + ":" + helpers2.two(0) + ":" + helpers2.two(0);
                    }
                  } else {
                    return "";
                  }
                };
                obj2.update = function(element, v) {
                  if (element.classList.contains("jcalendar-disabled")) {
                  } else {
                    var elements = calendar2.querySelector(".jcalendar-selected");
                    if (elements) {
                      elements.classList.remove("jcalendar-selected");
                    }
                    element.classList.add("jcalendar-selected");
                    if (element.classList.contains("jcalendar-set-month")) {
                      obj2.date[1] = v;
                      obj2.date[2] = 1;
                    } else {
                      obj2.date[2] = element.innerText;
                    }
                    if (!obj2.options.time) {
                      obj2.close(null, true);
                    } else {
                      obj2.date[3] = calendarSelectHour.value;
                      obj2.date[4] = calendarSelectMin.value;
                    }
                  }
                  updateActions();
                };
                obj2.reset = function() {
                  obj2.setValue("");
                  obj2.date = null;
                  obj2.close(false, false);
                };
                obj2.getDays = function() {
                  obj2.options.mode = "days";
                  var date = /* @__PURE__ */ new Date();
                  var year = obj2.date && helpers2.isNumeric(obj2.date[0]) ? obj2.date[0] : parseInt(date.getFullYear());
                  var month = obj2.date && helpers2.isNumeric(obj2.date[1]) ? obj2.date[1] : parseInt(date.getMonth()) + 1;
                  var day = obj2.date && helpers2.isNumeric(obj2.date[2]) ? obj2.date[2] : parseInt(date.getDate());
                  var hour = obj2.date && helpers2.isNumeric(obj2.date[3]) ? obj2.date[3] : parseInt(date.getHours());
                  var min = obj2.date && helpers2.isNumeric(obj2.date[4]) ? obj2.date[4] : parseInt(date.getMinutes());
                  obj2.date = [year, month, day, hour, min, 0];
                  calendarLabelYear.innerHTML = year;
                  calendarLabelMonth.innerHTML = obj2.options.months[month - 1];
                  var isCurrentMonthAndYear = date.getMonth() == month - 1 && date.getFullYear() == year ? true : false;
                  var currentDay = date.getDate();
                  var date = new Date(year, month, 0, 0, 0);
                  var numberOfDays = date.getDate();
                  var date = new Date(year, month - 1, 0, 0, 0);
                  var firstDay = date.getDay() + 1;
                  var index = obj2.options.startingDay || 0;
                  firstDay = firstDay - index;
                  calendarBody.innerHTML = "";
                  var row = document.createElement("tr");
                  row.setAttribute("align", "center");
                  calendarBody.appendChild(row);
                  for (var i2 = 0; i2 < 7; i2++) {
                    var cell = document.createElement("td");
                    cell.classList.add("jcalendar-weekday");
                    cell.innerHTML = obj2.options.weekdays[index].substr(0, 1);
                    row.appendChild(cell);
                    index++;
                    if (index > 6) {
                      index = 0;
                    }
                  }
                  var index = 0;
                  var d = 0;
                  for (var j = 0; j < 6; j++) {
                    var row = document.createElement("tr");
                    row.setAttribute("align", "center");
                    row.style.height = "34px";
                    for (var i2 = 0; i2 < 7; i2++) {
                      var cell = document.createElement("td");
                      cell.classList.add("jcalendar-set-day");
                      if (index >= firstDay && index < firstDay + numberOfDays) {
                        d++;
                        cell.innerHTML = d;
                        if (d == day) {
                          cell.classList.add("jcalendar-selected");
                        }
                        if (isCurrentMonthAndYear && currentDay == d) {
                          cell.style.fontWeight = "bold";
                        }
                        var current = Component.now(new Date(year, month - 1, d), true);
                        if (obj2.options.validRange) {
                          if (!obj2.options.validRange[0] || current >= obj2.options.validRange[0]) {
                            var test1 = true;
                          } else {
                            var test1 = false;
                          }
                          if (!obj2.options.validRange[1] || current <= obj2.options.validRange[1]) {
                            var test2 = true;
                          } else {
                            var test2 = false;
                          }
                          if (!(test1 && test2)) {
                            cell.classList.add("jcalendar-disabled");
                          }
                        }
                      }
                      row.appendChild(cell);
                      index++;
                    }
                    calendarBody.appendChild(row);
                  }
                  if (obj2.options.time) {
                    calendarControlsTime.style.display = "";
                  } else {
                    calendarControlsTime.style.display = "none";
                  }
                  updateActions();
                };
                obj2.getMonths = function() {
                  obj2.options.mode = "months";
                  var months = obj2.options.months;
                  var value = obj2.options.value;
                  var date = /* @__PURE__ */ new Date();
                  var currentYear = parseInt(date.getFullYear());
                  var currentMonth = parseInt(date.getMonth()) + 1;
                  var selectedYear = obj2.date && helpers2.isNumeric(obj2.date[0]) ? obj2.date[0] : currentYear;
                  var selectedMonth = obj2.date && helpers2.isNumeric(obj2.date[1]) ? obj2.date[1] : currentMonth;
                  calendarLabelYear.innerHTML = obj2.date[0];
                  calendarLabelMonth.innerHTML = months[selectedMonth - 1];
                  var table = document.createElement("table");
                  table.setAttribute("width", "100%");
                  var row = null;
                  for (var i2 = 0; i2 < 12; i2++) {
                    if (!(i2 % 4)) {
                      var row = document.createElement("tr");
                      row.setAttribute("align", "center");
                      table.appendChild(row);
                    }
                    var cell = document.createElement("td");
                    cell.classList.add("jcalendar-set-month");
                    cell.setAttribute("data-value", i2 + 1);
                    cell.innerText = months[i2];
                    if (obj2.options.validRange) {
                      var current = selectedYear + "-" + helpers2.two(i2 + 1);
                      if (!obj2.options.validRange[0] || current >= obj2.options.validRange[0].substr(0, 7)) {
                        var test1 = true;
                      } else {
                        var test1 = false;
                      }
                      if (!obj2.options.validRange[1] || current <= obj2.options.validRange[1].substr(0, 7)) {
                        var test2 = true;
                      } else {
                        var test2 = false;
                      }
                      if (!(test1 && test2)) {
                        cell.classList.add("jcalendar-disabled");
                      }
                    }
                    if (i2 + 1 == selectedMonth) {
                      cell.classList.add("jcalendar-selected");
                    }
                    if (currentYear == selectedYear && i2 + 1 == currentMonth) {
                      cell.style.fontWeight = "bold";
                    }
                    row.appendChild(cell);
                  }
                  calendarBody.innerHTML = '<tr><td colspan="7"></td></tr>';
                  calendarBody.children[0].children[0].appendChild(table);
                  updateActions();
                };
                obj2.getYears = function() {
                  obj2.options.mode = "years";
                  var date = /* @__PURE__ */ new Date();
                  var currentYear = date.getFullYear();
                  var selectedYear = obj2.date && helpers2.isNumeric(obj2.date[0]) ? obj2.date[0] : parseInt(date.getFullYear());
                  var y2 = [];
                  for (var i2 = 0; i2 < 25; i2++) {
                    y2[i2] = parseInt(obj2.date[0]) + (i2 - 12);
                  }
                  var table = document.createElement("table");
                  table.setAttribute("width", "100%");
                  for (var i2 = 0; i2 < 25; i2++) {
                    if (!(i2 % 5)) {
                      var row = document.createElement("tr");
                      row.setAttribute("align", "center");
                      table.appendChild(row);
                    }
                    var cell = document.createElement("td");
                    cell.classList.add("jcalendar-set-year");
                    cell.innerText = y2[i2];
                    if (selectedYear == y2[i2]) {
                      cell.classList.add("jcalendar-selected");
                    }
                    if (currentYear == y2[i2]) {
                      cell.style.fontWeight = "bold";
                    }
                    row.appendChild(cell);
                  }
                  calendarBody.innerHTML = '<tr><td colspan="7"></td></tr>';
                  calendarBody.firstChild.firstChild.appendChild(table);
                  updateActions();
                };
                obj2.setLabel = function(value, mixed) {
                  return Component.getDateString(value, mixed);
                };
                obj2.fromFormatted = function(value, format) {
                  return Component.extractDateFromString(value, format);
                };
                var mouseUpControls2 = function(e) {
                  var element = helpers2.findElement(e.target, "jcalendar-container");
                  if (element) {
                    var action = e.target.className;
                    if (action == "jcalendar-prev") {
                      obj2.prev();
                    } else if (action == "jcalendar-next") {
                      obj2.next();
                    } else if (action == "jcalendar-month") {
                      obj2.getMonths();
                    } else if (action == "jcalendar-year") {
                      obj2.getYears();
                    } else if (action == "jcalendar-set-year") {
                      obj2.date[0] = e.target.innerText;
                      if (obj2.options.type == "year-month-picker") {
                        obj2.getMonths();
                      } else {
                        obj2.getDays();
                      }
                    } else if (e.target.classList.contains("jcalendar-set-month")) {
                      var month = parseInt(e.target.getAttribute("data-value"));
                      if (obj2.options.type == "year-month-picker") {
                        obj2.update(e.target, month);
                      } else {
                        obj2.date[1] = month;
                        obj2.getDays();
                      }
                    } else if (action == "jcalendar-confirm" || action == "jcalendar-update" || action == "jcalendar-close") {
                      obj2.close(null, true);
                    } else if (action == "jcalendar-backdrop") {
                      obj2.close(false, false);
                    } else if (action == "jcalendar-reset") {
                      obj2.reset();
                    } else if (e.target.classList.contains("jcalendar-set-day") && e.target.innerText) {
                      obj2.update(e.target);
                    }
                  } else {
                    obj2.close(false, false);
                  }
                };
                var keyUpControls = function(e) {
                  if (e.target.value && e.target.value.length > 3) {
                    var test = Component.extractDateFromString(e.target.value, obj2.options.format);
                    if (test) {
                      obj2.setValue(test);
                    }
                  }
                };
                var updateActions = function() {
                  var currentDay = calendar2.querySelector(".jcalendar-selected");
                  if (currentDay && currentDay.classList.contains("jcalendar-disabled")) {
                    calendarControlsUpdateButton.setAttribute("disabled", "disabled");
                    calendarSelectHour.setAttribute("disabled", "disabled");
                    calendarSelectMin.setAttribute("disabled", "disabled");
                  } else {
                    calendarControlsUpdateButton.removeAttribute("disabled");
                    calendarSelectHour.removeAttribute("disabled");
                    calendarSelectMin.removeAttribute("disabled");
                  }
                  if (typeof obj2.options.onupdate == "function") {
                    obj2.options.onupdate(el, obj2.getValue());
                  }
                };
                var calendar2 = null;
                var calendarReset = null;
                var calendarConfirm = null;
                var calendarContainer = null;
                var calendarContent = null;
                var calendarLabelYear = null;
                var calendarLabelMonth = null;
                var calendarTable = null;
                var calendarBody = null;
                var calendarControls = null;
                var calendarControlsTime = null;
                var calendarControlsUpdate = null;
                var calendarControlsUpdateButton = null;
                var calendarSelectHour = null;
                var calendarSelectMin = null;
                var init = function() {
                  if (el.tagName == "INPUT" && el.value) {
                    options.value = el.value;
                  }
                  calendarReset = document.createElement("div");
                  calendarReset.className = "jcalendar-reset";
                  calendarConfirm = document.createElement("div");
                  calendarConfirm.className = "jcalendar-confirm";
                  calendarControls = document.createElement("div");
                  calendarControls.className = "jcalendar-controls";
                  calendarControls.style.borderBottom = "1px solid #ddd";
                  calendarControls.appendChild(calendarReset);
                  calendarControls.appendChild(calendarConfirm);
                  calendarContainer = document.createElement("div");
                  calendarContainer.className = "jcalendar-container";
                  calendarContent = document.createElement("div");
                  calendarContent.className = "jcalendar-content";
                  calendarContainer.appendChild(calendarContent);
                  if (el.tagName == "DIV") {
                    calendar2 = el;
                    calendar2.classList.add("jcalendar-inline");
                  } else {
                    calendarContent.appendChild(calendarControls);
                    calendar2 = document.createElement("div");
                    calendar2.className = "jcalendar";
                  }
                  calendar2.classList.add("jcalendar-container");
                  calendar2.appendChild(calendarContainer);
                  var calendarTableContainer = document.createElement("div");
                  calendarTableContainer.className = "jcalendar-table";
                  calendarContent.appendChild(calendarTableContainer);
                  var calendarHeaderPrev = document.createElement("td");
                  calendarHeaderPrev.setAttribute("colspan", "2");
                  calendarHeaderPrev.className = "jcalendar-prev";
                  calendarLabelYear = document.createElement("span");
                  calendarLabelYear.className = "jcalendar-year";
                  calendarLabelMonth = document.createElement("span");
                  calendarLabelMonth.className = "jcalendar-month";
                  var calendarHeaderTitle = document.createElement("td");
                  calendarHeaderTitle.className = "jcalendar-header";
                  calendarHeaderTitle.setAttribute("colspan", "3");
                  calendarHeaderTitle.appendChild(calendarLabelMonth);
                  calendarHeaderTitle.appendChild(calendarLabelYear);
                  var calendarHeaderNext = document.createElement("td");
                  calendarHeaderNext.setAttribute("colspan", "2");
                  calendarHeaderNext.className = "jcalendar-next";
                  var calendarHeader = document.createElement("thead");
                  var calendarHeaderRow = document.createElement("tr");
                  calendarHeaderRow.appendChild(calendarHeaderPrev);
                  calendarHeaderRow.appendChild(calendarHeaderTitle);
                  calendarHeaderRow.appendChild(calendarHeaderNext);
                  calendarHeader.appendChild(calendarHeaderRow);
                  calendarTable = document.createElement("table");
                  calendarBody = document.createElement("tbody");
                  calendarTable.setAttribute("cellpadding", "0");
                  calendarTable.setAttribute("cellspacing", "0");
                  calendarTable.appendChild(calendarHeader);
                  calendarTable.appendChild(calendarBody);
                  calendarTableContainer.appendChild(calendarTable);
                  calendarSelectHour = document.createElement("select");
                  calendarSelectHour.className = "jcalendar-select";
                  calendarSelectHour.onchange = function() {
                    obj2.date[3] = this.value;
                    if (typeof obj2.options.onupdate == "function") {
                      obj2.options.onupdate(el, obj2.getValue());
                    }
                  };
                  for (var i2 = 0; i2 < 24; i2++) {
                    var element = document.createElement("option");
                    element.value = i2;
                    element.innerHTML = helpers2.two(i2);
                    calendarSelectHour.appendChild(element);
                  }
                  calendarSelectMin = document.createElement("select");
                  calendarSelectMin.className = "jcalendar-select";
                  calendarSelectMin.onchange = function() {
                    obj2.date[4] = this.value;
                    if (typeof obj2.options.onupdate == "function") {
                      obj2.options.onupdate(el, obj2.getValue());
                    }
                  };
                  for (var i2 = 0; i2 < 60; i2++) {
                    var element = document.createElement("option");
                    element.value = i2;
                    element.innerHTML = helpers2.two(i2);
                    calendarSelectMin.appendChild(element);
                  }
                  var calendarControlsFooter = document.createElement("div");
                  calendarControlsFooter.className = "jcalendar-controls";
                  calendarControlsTime = document.createElement("div");
                  calendarControlsTime.className = "jcalendar-time";
                  calendarControlsTime.style.maxWidth = "140px";
                  calendarControlsTime.appendChild(calendarSelectHour);
                  calendarControlsTime.appendChild(calendarSelectMin);
                  calendarControlsUpdateButton = document.createElement("button");
                  calendarControlsUpdateButton.setAttribute("type", "button");
                  calendarControlsUpdateButton.className = "jcalendar-update";
                  calendarControlsUpdate = document.createElement("div");
                  calendarControlsUpdate.style.flexGrow = "10";
                  calendarControlsUpdate.appendChild(calendarControlsUpdateButton);
                  calendarControlsFooter.appendChild(calendarControlsTime);
                  if (el.tagName == "INPUT") {
                    calendarControlsFooter.appendChild(calendarControlsUpdate);
                  }
                  calendarContent.appendChild(calendarControlsFooter);
                  var calendarBackdrop = document.createElement("div");
                  calendarBackdrop.className = "jcalendar-backdrop";
                  calendar2.appendChild(calendarBackdrop);
                  el.addEventListener("keyup", keyUpControls);
                  calendar2.addEventListener("swipeleft", function(e) {
                    animation.slideLeft(calendarTable, 0, function() {
                      obj2.next();
                      animation.slideRight(calendarTable, 1);
                    });
                    e.preventDefault();
                    e.stopPropagation();
                  });
                  calendar2.addEventListener("swiperight", function(e) {
                    animation.slideRight(calendarTable, 0, function() {
                      obj2.prev();
                      animation.slideLeft(calendarTable, 1);
                    });
                    e.preventDefault();
                    e.stopPropagation();
                  });
                  if ("ontouchend" in document.documentElement === true) {
                    calendar2.addEventListener("touchend", mouseUpControls2);
                    el.addEventListener("touchend", obj2.open);
                  } else {
                    calendar2.addEventListener("mouseup", mouseUpControls2);
                    el.addEventListener("mouseup", obj2.open);
                  }
                  if (!Component.hasEvents) {
                    Component.hasEvents = true;
                    document.addEventListener("keydown", Component.keydown);
                  }
                  obj2.setOptions(options);
                  if (el.tagName == "INPUT") {
                    el.parentNode.insertBefore(calendar2, el.nextSibling);
                    el.setAttribute("autocomplete", "off");
                    el.classList.add("jcalendar-input");
                    el.value = obj2.setLabel(obj2.getValue(), obj2.options);
                  } else {
                    obj2.getDays();
                    if (obj2.options.time) {
                      calendarSelectHour.value = obj2.date[3];
                      calendarSelectMin.value = obj2.date[4];
                    }
                  }
                  if (obj2.options.opened == true) {
                    obj2.open();
                  }
                  if (obj2.options.controls == false) {
                    calendarContainer.classList.add("jcalendar-hide-controls");
                  }
                  el.change = obj2.setValue;
                  el.val = function(val) {
                    if (val === void 0) {
                      return obj2.getValue();
                    } else {
                      obj2.setValue(val);
                    }
                  };
                  el.calendar = calendar2.calendar = obj2;
                };
                init();
                return obj2;
              });
              Component.keydown = function(e) {
                var calendar2 = null;
                if (calendar2 = Component.current) {
                  if (e.which == 13) {
                    calendar2.close(false, true);
                  } else if (e.which == 27) {
                    calendar2.close(false, false);
                  }
                }
              };
              Component.prettify = function(d, texts) {
                if (!texts) {
                  var texts = {
                    justNow: "Just now",
                    xMinutesAgo: "{0}m ago",
                    xHoursAgo: "{0}h ago",
                    xDaysAgo: "{0}d ago",
                    xWeeksAgo: "{0}w ago",
                    xMonthsAgo: "{0} mon ago",
                    xYearsAgo: "{0}y ago"
                  };
                }
                if (d.indexOf("GMT") === -1 && d.indexOf("Z") === -1) {
                  d += " GMT";
                }
                var d1 = /* @__PURE__ */ new Date();
                var d2 = new Date(d);
                var total = parseInt((d1 - d2) / 1e3 / 60);
                String.prototype.format = function(o) {
                  return this.replace("{0}", o);
                };
                if (total == 0) {
                  var text = texts.justNow;
                } else if (total < 90) {
                  var text = texts.xMinutesAgo.format(total);
                } else if (total < 1440) {
                  var text = texts.xHoursAgo.format(Math.round(total / 60));
                } else if (total < 20160) {
                  var text = texts.xDaysAgo.format(Math.round(total / 1440));
                } else if (total < 43200) {
                  var text = texts.xWeeksAgo.format(Math.round(total / 10080));
                } else if (total < 1036800) {
                  var text = texts.xMonthsAgo.format(Math.round(total / 43200));
                } else {
                  var text = texts.xYearsAgo.format(Math.round(total / 525600));
                }
                return text;
              };
              Component.prettifyAll = function() {
                var elements = document.querySelectorAll(".prettydate");
                for (var i2 = 0; i2 < elements.length; i2++) {
                  if (elements[i2].getAttribute("data-date")) {
                    elements[i2].innerHTML = Component.prettify(elements[i2].getAttribute("data-date"));
                  } else {
                    if (elements[i2].innerHTML) {
                      elements[i2].setAttribute("title", elements[i2].innerHTML);
                      elements[i2].setAttribute("data-date", elements[i2].innerHTML);
                      elements[i2].innerHTML = Component.prettify(elements[i2].innerHTML);
                    }
                  }
                }
              };
              Component.now = helpers_date.now;
              Component.toArray = helpers_date.toArray;
              Component.dateToNum = helpers_date.dateToNum;
              Component.numToDate = helpers_date.numToDate;
              Component.weekdays = helpers_date.weekdays;
              Component.months = helpers_date.months;
              Component.weekdaysShort = helpers_date.weekdaysShort;
              Component.monthsShort = helpers_date.monthsShort;
              Component.extractDateFromString = mask.extractDateFromString;
              Component.getDateString = mask.getDateString;
              return Component;
            }
            var calendar = Calendar();
            ;
            function Palette() {
              var palette2 = {
                material: [
                  ["#ffebee", "#fce4ec", "#f3e5f5", "#e8eaf6", "#e3f2fd", "#e0f7fa", "#e0f2f1", "#e8f5e9", "#f1f8e9", "#f9fbe7", "#fffde7", "#fff8e1", "#fff3e0", "#fbe9e7", "#efebe9", "#fafafa", "#eceff1"],
                  ["#ffcdd2", "#f8bbd0", "#e1bee7", "#c5cae9", "#bbdefb", "#b2ebf2", "#b2dfdb", "#c8e6c9", "#dcedc8", "#f0f4c3", "#fff9c4", "#ffecb3", "#ffe0b2", "#ffccbc", "#d7ccc8", "#f5f5f5", "#cfd8dc"],
                  ["#ef9a9a", "#f48fb1", "#ce93d8", "#9fa8da", "#90caf9", "#80deea", "#80cbc4", "#a5d6a7", "#c5e1a5", "#e6ee9c", "#fff59d", "#ffe082", "#ffcc80", "#ffab91", "#bcaaa4", "#eeeeee", "#b0bec5"],
                  ["#e57373", "#f06292", "#ba68c8", "#7986cb", "#64b5f6", "#4dd0e1", "#4db6ac", "#81c784", "#aed581", "#dce775", "#fff176", "#ffd54f", "#ffb74d", "#ff8a65", "#a1887f", "#e0e0e0", "#90a4ae"],
                  ["#ef5350", "#ec407a", "#ab47bc", "#5c6bc0", "#42a5f5", "#26c6da", "#26a69a", "#66bb6a", "#9ccc65", "#d4e157", "#ffee58", "#ffca28", "#ffa726", "#ff7043", "#8d6e63", "#bdbdbd", "#78909c"],
                  ["#f44336", "#e91e63", "#9c27b0", "#3f51b5", "#2196f3", "#00bcd4", "#009688", "#4caf50", "#8bc34a", "#cddc39", "#ffeb3b", "#ffc107", "#ff9800", "#ff5722", "#795548", "#9e9e9e", "#607d8b"],
                  ["#e53935", "#d81b60", "#8e24aa", "#3949ab", "#1e88e5", "#00acc1", "#00897b", "#43a047", "#7cb342", "#c0ca33", "#fdd835", "#ffb300", "#fb8c00", "#f4511e", "#6d4c41", "#757575", "#546e7a"],
                  ["#d32f2f", "#c2185b", "#7b1fa2", "#303f9f", "#1976d2", "#0097a7", "#00796b", "#388e3c", "#689f38", "#afb42b", "#fbc02d", "#ffa000", "#f57c00", "#e64a19", "#5d4037", "#616161", "#455a64"],
                  ["#c62828", "#ad1457", "#6a1b9a", "#283593", "#1565c0", "#00838f", "#00695c", "#2e7d32", "#558b2f", "#9e9d24", "#f9a825", "#ff8f00", "#ef6c00", "#d84315", "#4e342e", "#424242", "#37474f"],
                  ["#b71c1c", "#880e4f", "#4a148c", "#1a237e", "#0d47a1", "#006064", "#004d40", "#1b5e20", "#33691e", "#827717", "#f57f17", "#ff6f00", "#e65100", "#bf360c", "#3e2723", "#212121", "#263238"]
                ],
                fire: [
                  ["0b1a6d", "840f38", "b60718", "de030b", "ff0c0c", "fd491c", "fc7521", "faa331", "fbb535", "ffc73a"],
                  ["071147", "5f0b28", "930513", "be0309", "ef0000", "fa3403", "fb670b", "f9991b", "faad1e", "ffc123"],
                  ["03071e", "370617", "6a040f", "9d0208", "d00000", "dc2f02", "e85d04", "f48c06", "faa307", "ffba08"],
                  ["020619", "320615", "61040d", "8c0207", "bc0000", "c82a02", "d05203", "db7f06", "e19405", "efab00"],
                  ["020515", "2d0513", "58040c", "7f0206", "aa0000", "b62602", "b94903", "c57205", "ca8504", "d89b00"]
                ],
                baby: [
                  ["eddcd2", "fff1e6", "fde2e4", "fad2e1", "c5dedd", "dbe7e4", "f0efeb", "d6e2e9", "bcd4e6", "99c1de"],
                  ["e1c4b3", "ffd5b5", "fab6ba", "f5a8c4", "aacecd", "bfd5cf", "dbd9d0", "baceda", "9dc0db", "7eb1d5"],
                  ["daa990", "ffb787", "f88e95", "f282a9", "8fc4c3", "a3c8be", "cec9b3", "9dbcce", "82acd2", "649dcb"],
                  ["d69070", "ff9c5e", "f66770", "f05f8f", "74bbb9", "87bfae", "c5b993", "83aac3", "699bca", "4d89c2"],
                  ["c97d5d", "f58443", "eb4d57", "e54a7b", "66a9a7", "78ae9c", "b5a67e", "7599b1", "5c88b7", "4978aa"]
                ],
                chart: [
                  ["#C1D37F", "#4C5454", "#FFD275", "#66586F", "#D05D5B", "#C96480", "#95BF8F", "#6EA240", "#0F0F0E", "#EB8258", "#95A3B3", "#995D81"]
                ]
              };
              var Component = function(o) {
                if (palette2[o]) {
                  return palette2[o];
                } else {
                  return palette2.material;
                }
              };
              Component.get = function(o) {
                if (palette2[o]) {
                  return palette2[o];
                } else {
                  return palette2;
                }
              };
              Component.set = function(o, v) {
                palette2[o] = v;
              };
              return Component;
            }
            var palette = Palette();
            ;
            function Tabs(el, options) {
              var obj2 = {};
              obj2.options = {};
              var defaults = {
                data: [],
                position: null,
                allowCreate: false,
                allowChangePosition: false,
                onclick: null,
                onload: null,
                onchange: null,
                oncreate: null,
                ondelete: null,
                onbeforecreate: null,
                onchangeposition: null,
                animation: false,
                hideHeaders: false,
                padding: null,
                palette: null,
                maxWidth: null
              };
              for (var property in defaults) {
                if (options && options.hasOwnProperty(property)) {
                  obj2.options[property] = options[property];
                } else {
                  obj2.options[property] = defaults[property];
                }
              }
              el.classList.add("jtabs");
              var prev = null;
              var next = null;
              var border = null;
              const setBorder = function(index) {
                if (obj2.options.animation) {
                  setTimeout(function() {
                    let rect = obj2.headers.children[index].getBoundingClientRect();
                    if (obj2.options.palette === "modern") {
                      border.style.width = rect.width - 4 + "px";
                      border.style.left = obj2.headers.children[index].offsetLeft + 2 + "px";
                    } else {
                      border.style.width = rect.width + "px";
                      border.style.left = obj2.headers.children[index].offsetLeft + "px";
                    }
                    if (obj2.options.position === "bottom") {
                      border.style.top = "0px";
                    } else {
                      border.style.bottom = "0px";
                    }
                  }, 50);
                }
              };
              var updateControls = function(x2) {
                if (typeof obj2.headers.scrollTo == "function") {
                  obj2.headers.scrollTo({
                    left: x2,
                    behavior: "smooth"
                  });
                } else {
                  obj2.headers.scrollLeft = x2;
                }
                if (x2 <= 1) {
                  prev.classList.add("disabled");
                } else {
                  prev.classList.remove("disabled");
                }
                if (x2 >= obj2.headers.scrollWidth - obj2.headers.offsetWidth) {
                  next.classList.add("disabled");
                } else {
                  next.classList.remove("disabled");
                }
                if (obj2.headers.scrollWidth <= obj2.headers.offsetWidth) {
                  prev.style.display = "none";
                  next.style.display = "none";
                } else {
                  prev.style.display = "";
                  next.style.display = "";
                }
              };
              obj2.setBorder = setBorder;
              obj2.open = function(index) {
                const items = Array.from(obj2.content.children);
                if (!obj2.content.children[index]) {
                  return;
                }
                var previous = null;
                for (var i3 = 0; i3 < obj2.headers.children.length; i3++) {
                  if (obj2.headers.children[i3].classList.contains("jtabs-selected")) {
                    previous = i3;
                  }
                  obj2.headers.children[i3].classList.remove("jtabs-selected");
                  obj2.headers.children[i3].removeAttribute("aria-selected");
                  if (obj2.content.children[i3]) {
                    obj2.content.children[i3].classList.remove("jtabs-selected");
                  }
                }
                obj2.headers.children[index].classList.add("jtabs-selected");
                obj2.headers.children[index].setAttribute("aria-selected", "true");
                if (obj2.content.children[index]) {
                  obj2.content.children[index].classList.add("jtabs-selected");
                }
                if (previous != index && typeof obj2.options.onchange == "function") {
                  if (obj2.content.children[index]) {
                    obj2.options.onchange(el, obj2, index, obj2.headers.children[index], obj2.content.children[index]);
                  }
                }
                if (obj2.options.hideHeaders == true && (obj2.headers.children.length < 3 && obj2.options.allowCreate == false)) {
                  obj2.headers.parentNode.style.display = "none";
                } else {
                  obj2.headers.parentNode.style.display = "";
                  var x1 = obj2.headers.children[index].offsetLeft;
                  var x2 = x1 + obj2.headers.children[index].offsetWidth;
                  var r1 = obj2.headers.scrollLeft;
                  var r2 = r1 + obj2.headers.offsetWidth;
                  if (!(r1 <= x1 && r2 >= x2)) {
                    updateControls(x1 - 1);
                  }
                  setBorder(index);
                }
              };
              obj2.selectIndex = function(a) {
                var index = Array.prototype.indexOf.call(obj2.headers.children, a);
                if (index >= 0) {
                  obj2.open(index);
                }
                return index;
              };
              obj2.rename = function(i3, title) {
                if (!title) {
                  title = prompt("New title", obj2.headers.children[i3].innerText);
                }
                obj2.headers.children[i3].innerText = title;
                setBorder(obj2.getActive());
              };
              obj2.create = function(title, url) {
                if (typeof obj2.options.onbeforecreate == "function") {
                  var ret2 = obj2.options.onbeforecreate(el, title);
                  if (ret2 === false) {
                    return false;
                  } else {
                    title = ret2;
                  }
                }
                var div = obj2.appendElement(title);
                if (typeof obj2.options.oncreate == "function") {
                  obj2.options.oncreate(el, div);
                }
                setBorder(obj2.getActive());
                return div;
              };
              obj2.remove = function(index) {
                return obj2.deleteElement(index);
              };
              obj2.nextNumber = function() {
                var num = 0;
                for (var i3 = 0; i3 < obj2.headers.children.length; i3++) {
                  var tmp = obj2.headers.children[i3].innerText.match(/[0-9].*/);
                  if (tmp > num) {
                    num = parseInt(tmp);
                  }
                }
                if (!num) {
                  num = 1;
                } else {
                  num++;
                }
                return num;
              };
              obj2.deleteElement = function(index) {
                let current = obj2.getActive();
                if (!obj2.headers.children[index]) {
                  return false;
                } else {
                  obj2.headers.removeChild(obj2.headers.children[index]);
                  obj2.content.removeChild(obj2.content.children[index]);
                }
                if (current === index) {
                  obj2.open(0);
                } else {
                  let current2 = obj2.getActive() || 0;
                  setBorder(current2);
                }
                if (typeof obj2.options.ondelete == "function") {
                  obj2.options.ondelete(el, index);
                }
              };
              obj2.appendElement = function(title, cb, openTab, position) {
                if (!title) {
                  var title = prompt("Title?", "");
                }
                if (title) {
                  let headerId = helpers2.guid();
                  let contentId = helpers2.guid();
                  var div = document.createElement("div");
                  div.setAttribute("id", contentId);
                  div.setAttribute("role", "tabpanel");
                  div.setAttribute("aria-labelledby", headerId);
                  var h = document.createElement("div");
                  h.setAttribute("id", headerId);
                  h.setAttribute("role", "tab");
                  h.setAttribute("aria-controls", contentId);
                  h.innerHTML = title;
                  h.content = div;
                  if (typeof position === "undefined") {
                    obj2.content.appendChild(div);
                    obj2.headers.insertBefore(h, obj2.headers.lastChild);
                  } else {
                    let r = obj2.content.children[position];
                    if (r) {
                      obj2.content.insertBefore(div, r);
                    } else {
                      obj2.content.appendChild(div);
                    }
                    r = obj2.headers.children[position] || obj2.headers.lastChild;
                    obj2.headers.insertBefore(h, r);
                  }
                  if (obj2.options.allowChangePosition) {
                    h.setAttribute("draggable", "true");
                  }
                  if (openTab !== false) {
                    obj2.selectIndex(h);
                  }
                  if (typeof cb == "function") {
                    cb(div, h);
                  }
                  return div;
                }
              };
              obj2.getActive = function() {
                for (var i3 = 0; i3 < obj2.headers.children.length; i3++) {
                  if (obj2.headers.children[i3].classList.contains("jtabs-selected")) {
                    return i3;
                  }
                }
                return false;
              };
              obj2.updateContent = function(position, newContent) {
                if (typeof newContent !== "string") {
                  var contentItem = newContent;
                } else {
                  var contentItem = document.createElement("div");
                  contentItem.innerHTML = newContent;
                }
                if (obj2.content.children[position].classList.contains("jtabs-selected")) {
                  newContent.classList.add("jtabs-selected");
                }
                obj2.content.replaceChild(newContent, obj2.content.children[position]);
                setBorder();
              };
              obj2.updatePosition = function(f, t2, ignoreEvents, openTab) {
                if (f > t2) {
                  obj2.content.insertBefore(obj2.content.children[f], obj2.content.children[t2]);
                } else {
                  obj2.content.insertBefore(obj2.content.children[f], obj2.content.children[t2].nextSibling);
                }
                if (openTab !== false) {
                  obj2.open(t2);
                } else {
                  const activeIndex = obj2.getActive();
                  if (t2 < activeIndex) {
                    obj2.setBorder(activeIndex);
                  }
                }
                if (!ignoreEvents && typeof obj2.options.onchangeposition == "function") {
                  obj2.options.onchangeposition(obj2.headers, f, t2);
                }
              };
              obj2.move = function(f, t2, ignoreEvents, openTab) {
                if (f > t2) {
                  obj2.headers.insertBefore(obj2.headers.children[f], obj2.headers.children[t2]);
                } else {
                  obj2.headers.insertBefore(obj2.headers.children[f], obj2.headers.children[t2].nextSibling);
                }
                obj2.updatePosition(f, t2, ignoreEvents, openTab);
              };
              obj2.setBorder = setBorder;
              obj2.init = function() {
                el.innerHTML = "";
                obj2.headers = document.createElement("div");
                obj2.content = document.createElement("div");
                obj2.headers.classList.add("jtabs-headers");
                obj2.headers.setAttribute("role", "tablist");
                obj2.content.classList.add("jtabs-content");
                obj2.content.setAttribute("role", "region");
                obj2.content.setAttribute("aria-label", "Tab Panels");
                if (obj2.options.palette) {
                  el.classList.add("jtabs-modern");
                } else {
                  el.classList.remove("jtabs-modern");
                }
                if (obj2.options.padding) {
                  obj2.content.style.padding = parseInt(obj2.options.padding) + "px";
                }
                var header = document.createElement("div");
                header.className = "jtabs-headers-container";
                header.appendChild(obj2.headers);
                if (obj2.options.maxWidth) {
                  header.style.maxWidth = parseInt(obj2.options.maxWidth) + "px";
                }
                var controls = document.createElement("div");
                controls.className = "jtabs-controls";
                controls.setAttribute("draggable", "false");
                header.appendChild(controls);
                if (obj2.options.position == "bottom") {
                  el.appendChild(obj2.content);
                  el.appendChild(header);
                } else {
                  el.appendChild(header);
                  el.appendChild(obj2.content);
                }
                if (obj2.options.allowCreate == true) {
                  var add = document.createElement("div");
                  add.className = "jtabs-add";
                  add.onclick = function() {
                    obj2.create();
                  };
                  controls.appendChild(add);
                }
                prev = document.createElement("div");
                prev.className = "jtabs-prev";
                prev.onclick = function() {
                  updateControls(obj2.headers.scrollLeft - obj2.headers.offsetWidth);
                };
                controls.appendChild(prev);
                next = document.createElement("div");
                next.className = "jtabs-next";
                next.onclick = function() {
                  updateControls(obj2.headers.scrollLeft + obj2.headers.offsetWidth);
                };
                controls.appendChild(next);
                for (var i3 = 0; i3 < obj2.options.data.length; i3++) {
                  if (obj2.options.data[i3].titleElement) {
                    var headerItem = obj2.options.data[i3].titleElement;
                  } else {
                    var headerItem = document.createElement("div");
                  }
                  if (obj2.options.data[i3].icon) {
                    var iconContainer = document.createElement("div");
                    var icon = document.createElement("i");
                    icon.classList.add("material-icons");
                    icon.innerHTML = obj2.options.data[i3].icon;
                    iconContainer.appendChild(icon);
                    headerItem.appendChild(iconContainer);
                  }
                  if (obj2.options.data[i3].title) {
                    var title = document.createTextNode(obj2.options.data[i3].title);
                    headerItem.appendChild(title);
                  }
                  if (obj2.options.data[i3].width) {
                    headerItem.style.width = obj2.options.data[i3].width;
                  }
                  if (obj2.options.data[i3].contentElement) {
                    var contentItem = obj2.options.data[i3].contentElement;
                  } else {
                    var contentItem = document.createElement("div");
                    contentItem.innerHTML = obj2.options.data[i3].content;
                  }
                  obj2.headers.appendChild(headerItem);
                  obj2.content.appendChild(contentItem);
                }
                border = document.createElement("div");
                border.className = "jtabs-border";
                obj2.headers.appendChild(border);
                if (obj2.options.animation) {
                  el.classList.add("jtabs-animation");
                }
                obj2.headers.addEventListener("click", function(e) {
                  if (e.target.parentNode.classList.contains("jtabs-headers")) {
                    var target = e.target;
                  } else {
                    if (e.target.tagName == "I") {
                      var target = e.target.parentNode.parentNode;
                    } else {
                      var target = e.target.parentNode;
                    }
                  }
                  var index = obj2.selectIndex(target);
                  if (typeof obj2.options.onclick == "function") {
                    obj2.options.onclick(el, obj2, index, obj2.headers.children[index], obj2.content.children[index]);
                  }
                });
                obj2.headers.addEventListener("contextmenu", function(e) {
                  obj2.selectIndex(e.target);
                });
                if (obj2.headers.children.length) {
                  obj2.open(0);
                }
                updateControls(0);
                if (obj2.options.allowChangePosition == true) {
                  Sorting(obj2.headers, {
                    direction: 1,
                    ondrop: function(a, b, c) {
                      obj2.updatePosition(b, c);
                    }
                  });
                }
                if (typeof obj2.options.onload == "function") {
                  obj2.options.onload(el, obj2);
                }
              };
              if (el.children[0] && el.children[0].children.length) {
                for (var i2 = 0; i2 < el.children[0].children.length; i2++) {
                  var item = obj2.options.data && obj2.options.data[i2] ? obj2.options.data[i2] : {};
                  if (el.children[1] && el.children[1].children[i2]) {
                    item.titleElement = el.children[0].children[i2];
                    item.contentElement = el.children[1].children[i2];
                  } else {
                    item.contentElement = el.children[0].children[i2];
                  }
                  obj2.options.data[i2] = item;
                }
              }
              var loadingRemoteData = false;
              if (obj2.options.data) {
                for (var i2 = 0; i2 < obj2.options.data.length; i2++) {
                  if (obj2.options.data[i2].url) {
                    ajax({
                      url: obj2.options.data[i2].url,
                      type: "GET",
                      dataType: "text/html",
                      index: i2,
                      success: function(result) {
                        obj2.options.data[this.index].content = result;
                      },
                      complete: function() {
                        obj2.init();
                      }
                    });
                    loadingRemoteData = true;
                  }
                }
              }
              if (!loadingRemoteData) {
                obj2.init();
              }
              el.tabs = obj2;
              return obj2;
            }
            ;
            function Color(el, options) {
              if (el.color) {
                return el.color.setOptions(options, true);
              }
              var obj2 = { type: "color" };
              obj2.options = {};
              var container = null;
              var backdrop = null;
              var content = null;
              var resetButton = null;
              var closeButton = null;
              var tabs = null;
              var jsuitesTabs = null;
              obj2.setOptions = function(options2, reset) {
                var defaults = {
                  placeholder: "",
                  value: null,
                  onopen: null,
                  onclose: null,
                  onchange: null,
                  closeOnChange: true,
                  palette: null,
                  position: null,
                  doneLabel: "Done",
                  resetLabel: "Reset",
                  fullscreen: false,
                  opened: false
                };
                if (!options2) {
                  options2 = {};
                }
                if (options2 && !options2.palette) {
                  options2.palette = palette();
                }
                for (var property in defaults) {
                  if (options2 && options2.hasOwnProperty(property)) {
                    obj2.options[property] = options2[property];
                  } else {
                    if (typeof obj2.options[property] == "undefined" || reset === true) {
                      obj2.options[property] = defaults[property];
                    }
                  }
                }
                if (resetButton) {
                  resetButton.innerHTML = obj2.options.resetLabel;
                }
                if (closeButton) {
                  closeButton.innerHTML = obj2.options.doneLabel;
                }
                if (obj2.options.palette && jsuitesTabs) {
                  jsuitesTabs.updateContent(0, table());
                }
                if (typeof obj2.options.value === "string") {
                  el.value = obj2.options.value;
                  if (el.tagName === "INPUT") {
                    el.style.color = el.value;
                    el.style.backgroundColor = el.value;
                  }
                }
                if (obj2.options.placeholder) {
                  el.setAttribute("placeholder", obj2.options.placeholder);
                } else {
                  if (el.getAttribute("placeholder")) {
                    el.removeAttribute("placeholder");
                  }
                }
                return obj2;
              };
              obj2.select = function(color) {
                var selected = container.querySelector(".jcolor-selected");
                if (selected) {
                  selected.classList.remove("jcolor-selected");
                }
                if (obj2.values[color]) {
                  obj2.values[color].classList.add("jcolor-selected");
                }
                obj2.options.value = color;
              };
              obj2.open = function() {
                if (!container.classList.contains("jcolor-focus")) {
                  tracking(obj2, true);
                  container.classList.add("jcolor-focus");
                  if (obj2.options.value) {
                    obj2.select(obj2.options.value);
                  }
                  content.style.marginTop = "";
                  content.style.marginLeft = "";
                  var rectContent = content.getBoundingClientRect();
                  var availableWidth = helpers2.getWindowWidth();
                  var availableHeight = helpers2.getWindowHeight();
                  if (availableWidth < 800 || obj2.options.fullscreen == true) {
                    content.classList.add("jcolor-fullscreen");
                    animation.slideBottom(content, 1);
                    backdrop.style.display = "block";
                  } else {
                    if (content.classList.contains("jcolor-fullscreen")) {
                      content.classList.remove("jcolor-fullscreen");
                      backdrop.style.display = "";
                    }
                    if (obj2.options.position) {
                      content.style.position = "fixed";
                    } else {
                      content.style.position = "";
                    }
                    if (rectContent.left + rectContent.width > availableWidth) {
                      content.style.marginLeft = -1 * (rectContent.left + rectContent.width - (availableWidth - 20)) + "px";
                    }
                    if (rectContent.top + rectContent.height > availableHeight) {
                      content.style.marginTop = -1 * (rectContent.top + rectContent.height - (availableHeight - 20)) + "px";
                    }
                  }
                  if (typeof obj2.options.onopen == "function") {
                    obj2.options.onopen(el, obj2);
                  }
                  jsuitesTabs.setBorder(jsuitesTabs.getActive());
                  if (obj2.options.value) {
                    var rgb = HexToRgb(obj2.options.value);
                    rgbInputs.forEach(function(rgbInput, index) {
                      rgbInput.value = rgb[index];
                      rgbInput.dispatchEvent(new Event("input"));
                    });
                  }
                }
              };
              obj2.close = function(ignoreEvents) {
                if (container.classList.contains("jcolor-focus")) {
                  container.classList.remove("jcolor-focus");
                  backdrop.style.display = "";
                  if (!ignoreEvents && typeof obj2.options.onclose == "function") {
                    obj2.options.onclose(el, obj2);
                  }
                  tracking(obj2, false);
                }
                return obj2.options.value;
              };
              obj2.setValue = function(color) {
                if (!color) {
                  color = "";
                }
                if (color != obj2.options.value) {
                  obj2.options.value = color;
                  slidersResult = color;
                  obj2.select(color);
                  if (typeof obj2.options.onchange == "function") {
                    obj2.options.onchange(el, color, obj2);
                  }
                  if (el.value != obj2.options.value) {
                    el.value = obj2.options.value;
                    if (el.tagName === "INPUT") {
                      el.style.color = el.value;
                      el.style.backgroundColor = el.value;
                    }
                    if (typeof el.oninput == "function") {
                      el.oninput({
                        type: "input",
                        target: el,
                        value: el.value
                      });
                    }
                  }
                  if (obj2.options.closeOnChange == true) {
                    obj2.close();
                  }
                }
              };
              obj2.getValue = function() {
                return obj2.options.value;
              };
              var backdropClickControl = false;
              var decToHex = function(num) {
                var hex = num.toString(16);
                return hex.length === 1 ? "0" + hex : hex;
              };
              var rgbToHex = function(r, g, b) {
                return "#" + decToHex(r) + decToHex(g) + decToHex(b);
              };
              var hexToDec = function(hex) {
                return parseInt("0x" + hex);
              };
              var HexToRgb = function(hex) {
                return [hexToDec(hex.substr(1, 2)), hexToDec(hex.substr(3, 2)), hexToDec(hex.substr(5, 2))];
              };
              var table = function() {
                var tableContainer = document.createElement("div");
                tableContainer.className = "jcolor-grid";
                obj2.values = [];
                var t2 = document.createElement("table");
                t2.setAttribute("cellpadding", "7");
                t2.setAttribute("cellspacing", "0");
                for (var j = 0; j < obj2.options.palette.length; j++) {
                  var tr = document.createElement("tr");
                  for (var i2 = 0; i2 < obj2.options.palette[j].length; i2++) {
                    var td = document.createElement("td");
                    var color = obj2.options.palette[j][i2];
                    if (color.length < 7 && color.substr(0, 1) !== "#") {
                      color = "#" + color;
                    }
                    td.style.backgroundColor = color;
                    td.setAttribute("data-value", color);
                    td.innerHTML = "";
                    tr.appendChild(td);
                    if (obj2.options.value == color) {
                      td.classList.add("jcolor-selected");
                    }
                    obj2.values[color] = td;
                  }
                  t2.appendChild(tr);
                }
                tableContainer.appendChild(t2);
                return tableContainer;
              };
              var canvas = document.createElement("canvas");
              canvas.width = 200;
              canvas.height = 160;
              var context = canvas.getContext("2d");
              var resizeCanvas = function() {
                var m = tabs.firstChild.getBoundingClientRect();
                canvas.width = m.width - 14;
                gradient();
              };
              var gradient = function() {
                var g = context.createLinearGradient(0, 0, canvas.width, 0);
                g.addColorStop(0, "rgb(255,0,0)");
                g.addColorStop(0.15, "rgb(255,0,255)");
                g.addColorStop(0.33, "rgb(0,0,255)");
                g.addColorStop(0.49, "rgb(0,255,255)");
                g.addColorStop(0.67, "rgb(0,255,0)");
                g.addColorStop(0.84, "rgb(255,255,0)");
                g.addColorStop(1, "rgb(255,0,0)");
                context.fillStyle = g;
                context.fillRect(0, 0, canvas.width, canvas.height);
                g = context.createLinearGradient(0, 0, 0, canvas.height);
                g.addColorStop(0, "rgba(255,255,255,1)");
                g.addColorStop(0.5, "rgba(255,255,255,0)");
                g.addColorStop(0.5, "rgba(0,0,0,0)");
                g.addColorStop(1, "rgba(0,0,0,1)");
                context.fillStyle = g;
                context.fillRect(0, 0, canvas.width, canvas.height);
              };
              var hsl = function() {
                var element = document.createElement("div");
                element.className = "jcolor-hsl";
                var point = document.createElement("div");
                point.className = "jcolor-point";
                var div = document.createElement("div");
                div.appendChild(canvas);
                div.appendChild(point);
                element.appendChild(div);
                var update = function(buttons, x2, y2) {
                  if (buttons === 1) {
                    var rect = element.getBoundingClientRect();
                    var left2 = x2 - rect.left;
                    var top = y2 - rect.top;
                    if (left2 < 0) {
                      left2 = 0;
                    }
                    if (top < 0) {
                      top = 0;
                    }
                    if (left2 > rect.width) {
                      left2 = rect.width;
                    }
                    if (top > rect.height) {
                      top = rect.height;
                    }
                    point.style.left = left2 + "px";
                    point.style.top = top + "px";
                    var pixel = context.getImageData(left2, top, 1, 1).data;
                    slidersResult = rgbToHex(pixel[0], pixel[1], pixel[2]);
                  }
                };
                element.addEventListener("mousedown", function(e) {
                  update(e.buttons, e.clientX, e.clientY);
                });
                element.addEventListener("mousemove", function(e) {
                  update(e.buttons, e.clientX, e.clientY);
                });
                element.addEventListener("touchmove", function(e) {
                  update(1, e.changedTouches[0].clientX, e.changedTouches[0].clientY);
                });
                return element;
              };
              var slidersResult = "";
              var rgbInputs = [];
              var changeInputColors = function() {
                if (slidersResult !== "") {
                  for (var j = 0; j < rgbInputs.length; j++) {
                    var currentColor = HexToRgb(slidersResult);
                    currentColor[j] = 0;
                    var newGradient = "linear-gradient(90deg, rgb(";
                    newGradient += currentColor.join(", ");
                    newGradient += "), rgb(";
                    currentColor[j] = 255;
                    newGradient += currentColor.join(", ");
                    newGradient += "))";
                    rgbInputs[j].style.backgroundImage = newGradient;
                  }
                }
              };
              var sliders = function() {
                var slidersElement = document.createElement("div");
                slidersElement.className = "jcolor-sliders";
                var slidersBody = document.createElement("div");
                var createSliderInput = function(name) {
                  var inputContainer = document.createElement("div");
                  inputContainer.className = "jcolor-sliders-input-container";
                  var label = document.createElement("label");
                  label.innerText = name;
                  var subContainer = document.createElement("div");
                  subContainer.className = "jcolor-sliders-input-subcontainer";
                  var input = document.createElement("input");
                  input.type = "range";
                  input.min = 0;
                  input.max = 255;
                  input.value = 0;
                  input.setAttribute("aria-label", "Color value");
                  input.setAttribute("aria-valuemin", "0");
                  input.setAttribute("aria-valuemax", "255");
                  input.setAttribute("aria-valuenow", "0");
                  inputContainer.appendChild(label);
                  subContainer.appendChild(input);
                  var value = document.createElement("div");
                  value.innerText = input.value;
                  input.addEventListener("input", function() {
                    value.innerText = input.value;
                  });
                  subContainer.appendChild(value);
                  inputContainer.appendChild(subContainer);
                  slidersBody.appendChild(inputContainer);
                  return input;
                };
                rgbInputs = [
                  createSliderInput("Red"),
                  createSliderInput("Green"),
                  createSliderInput("Blue")
                ];
                slidersElement.appendChild(slidersBody);
                var slidersResultColor = document.createElement("div");
                slidersResultColor.className = "jcolor-sliders-final-color";
                var resultElement = document.createElement("div");
                resultElement.style.visibility = "hidden";
                resultElement.innerText = "a";
                slidersResultColor.appendChild(resultElement);
                var updateResult2 = function() {
                  var resultColor = rgbToHex(parseInt(rgbInputs[0].value), parseInt(rgbInputs[1].value), parseInt(rgbInputs[2].value));
                  resultElement.innerText = resultColor;
                  resultElement.style.color = resultColor;
                  resultElement.style.removeProperty("visibility");
                  slidersResult = resultColor;
                };
                rgbInputs.forEach(function(rgbInput) {
                  rgbInput.addEventListener("input", function() {
                    updateResult2();
                    changeInputColors();
                  });
                });
                slidersElement.appendChild(slidersResultColor);
                return slidersElement;
              };
              var init = function() {
                obj2.setOptions(options);
                if (el.tagName == "INPUT") {
                  el.classList.add("jcolor-input");
                  el.readOnly = true;
                }
                container = document.createElement("div");
                container.className = "jcolor";
                backdrop = document.createElement("div");
                backdrop.className = "jcolor-backdrop";
                container.appendChild(backdrop);
                content = document.createElement("div");
                content.className = "jcolor-content";
                var controls = document.createElement("div");
                controls.className = "jcolor-controls";
                content.appendChild(controls);
                resetButton = document.createElement("div");
                resetButton.className = "jcolor-reset";
                resetButton.innerHTML = obj2.options.resetLabel;
                controls.appendChild(resetButton);
                closeButton = document.createElement("div");
                closeButton.className = "jcolor-close";
                closeButton.innerHTML = obj2.options.doneLabel;
                controls.appendChild(closeButton);
                tabs = document.createElement("div");
                content.appendChild(tabs);
                jsuitesTabs = Tabs(tabs, {
                  animation: true,
                  data: [
                    {
                      title: "Grid",
                      contentElement: table()
                    },
                    {
                      title: "Spectrum",
                      contentElement: hsl()
                    },
                    {
                      title: "Sliders",
                      contentElement: sliders()
                    }
                  ],
                  onchange: function(element, instance, index) {
                    if (index === 1) {
                      resizeCanvas();
                    } else {
                      var color = slidersResult !== "" ? slidersResult : obj2.getValue();
                      if (index === 2 && color) {
                        var rgb = HexToRgb(color);
                        rgbInputs.forEach(function(rgbInput, index2) {
                          rgbInput.value = rgb[index2];
                          rgbInput.dispatchEvent(new Event("input"));
                        });
                      }
                    }
                  },
                  palette: "modern"
                });
                container.appendChild(content);
                if (el.tagName == "INPUT") {
                  el.parentNode.insertBefore(container, el.nextSibling);
                } else {
                  el.appendChild(container);
                }
                container.addEventListener("click", function(e) {
                  if (e.target.tagName == "TD") {
                    var value = e.target.getAttribute("data-value");
                    if (value) {
                      obj2.setValue(value);
                    }
                  } else if (e.target.classList.contains("jcolor-reset")) {
                    obj2.setValue("");
                    obj2.close();
                  } else if (e.target.classList.contains("jcolor-close")) {
                    if (jsuitesTabs.getActive() > 0) {
                      obj2.setValue(slidersResult);
                    }
                    obj2.close();
                  } else if (e.target.classList.contains("jcolor-backdrop")) {
                    obj2.close();
                  } else {
                    obj2.open();
                  }
                });
                el.addEventListener("mouseup", function(e) {
                  obj2.open();
                });
                window.addEventListener("resize", function() {
                  if (container.classList.contains("jcolor-focus") && jsuitesTabs.getActive() == 1) {
                    resizeCanvas();
                  }
                });
                if (obj2.options.opened == true) {
                  obj2.open();
                }
                el.change = obj2.setValue;
                el.val = function(val) {
                  if (val === void 0) {
                    return obj2.getValue();
                  } else {
                    obj2.setValue(val);
                  }
                };
                el.color = obj2;
                container.color = obj2;
              };
              obj2.toHex = function(rgb) {
                var hex = function(x2) {
                  return ("0" + parseInt(x2).toString(16)).slice(-2);
                };
                if (rgb) {
                  if (/^#[0-9A-F]{6}$/i.test(rgb)) {
                    return rgb;
                  } else {
                    rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
                    if (rgb && rgb.length) {
                      return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
                    } else {
                      return "";
                    }
                  }
                }
              };
              init();
              return obj2;
            }
            ;
            function Contextmenu() {
              var Component = function(el, options) {
                var obj2 = { type: "contextmenu" };
                obj2.options = {};
                var defaults = {
                  items: null,
                  onclick: null
                };
                for (var property in defaults) {
                  if (options && options.hasOwnProperty(property)) {
                    obj2.options[property] = options[property];
                  } else {
                    obj2.options[property] = defaults[property];
                  }
                }
                el.classList.add("jcontextmenu");
                obj2.open = function(e, items) {
                  if (items) {
                    obj2.options.items = items;
                    obj2.create(items);
                  }
                  if (Component.current) {
                    Component.current.close();
                  }
                  tracking(obj2, true);
                  el.classList.add("jcontextmenu-focus");
                  Component.current = obj2;
                  if (obj2.options.items && obj2.options.items.length > 0 || el.children.length) {
                    if (e.target) {
                      if (e.changedTouches && e.changedTouches[0]) {
                        x2 = e.changedTouches[0].clientX;
                        y2 = e.changedTouches[0].clientY;
                      } else {
                        var x2 = e.clientX;
                        var y2 = e.clientY;
                      }
                    } else {
                      var x2 = e.x;
                      var y2 = e.y;
                    }
                    var rect = el.getBoundingClientRect();
                    if (window.innerHeight < y2 + rect.height) {
                      var h = y2 - rect.height;
                      if (h < 0) {
                        h = 0;
                      }
                      el.style.top = h + "px";
                    } else {
                      el.style.top = y2 + "px";
                    }
                    if (window.innerWidth < x2 + rect.width) {
                      if (x2 - rect.width > 0) {
                        el.style.left = x2 - rect.width + "px";
                      } else {
                        el.style.left = "10px";
                      }
                    } else {
                      el.style.left = x2 + "px";
                    }
                  }
                };
                obj2.isOpened = function() {
                  return el.classList.contains("jcontextmenu-focus") ? true : false;
                };
                obj2.close = function() {
                  if (el.classList.contains("jcontextmenu-focus")) {
                    el.classList.remove("jcontextmenu-focus");
                  }
                  tracking(obj2, false);
                };
                obj2.create = function(items) {
                  el.innerHTML = "";
                  var itemHeader = createHeader();
                  el.appendChild(itemHeader);
                  for (var i2 = 0; i2 < items.length; i2++) {
                    var itemContainer = createItemElement(items[i2]);
                    el.appendChild(itemContainer);
                  }
                };
                function createHeader() {
                  var header = document.createElement("div");
                  header.classList.add("header");
                  header.addEventListener("click", function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                  });
                  var title = document.createElement("a");
                  title.classList.add("title");
                  title.innerHTML = dictionary.translate("Menu");
                  header.appendChild(title);
                  var closeButton = document.createElement("a");
                  closeButton.classList.add("close");
                  closeButton.innerHTML = dictionary.translate("close");
                  closeButton.addEventListener("click", function(e) {
                    obj2.close();
                  });
                  header.appendChild(closeButton);
                  return header;
                }
                function createItemElement(item) {
                  if (item.type && (item.type == "line" || item.type == "divisor")) {
                    var itemContainer = document.createElement("hr");
                  } else {
                    var itemContainer = document.createElement("div");
                    var itemText = document.createElement("a");
                    itemText.innerHTML = item.title;
                    if (item.tooltip) {
                      itemContainer.setAttribute("title", item.tooltip);
                    }
                    if (item.icon) {
                      itemContainer.setAttribute("data-icon", item.icon);
                    }
                    if (item.id) {
                      itemContainer.id = item.id;
                    }
                    if (item.disabled) {
                      itemContainer.className = "jcontextmenu-disabled";
                    } else if (item.onclick) {
                      itemContainer.method = item.onclick;
                      itemContainer.addEventListener("mousedown", function(e) {
                        e.preventDefault();
                      });
                      itemContainer.addEventListener("mouseup", function(e) {
                        this.method(this, e);
                      });
                    }
                    itemContainer.appendChild(itemText);
                    if (item.submenu) {
                      var itemIconSubmenu = document.createElement("span");
                      itemIconSubmenu.innerHTML = "&#9658;";
                      itemContainer.appendChild(itemIconSubmenu);
                      itemContainer.classList.add("jcontexthassubmenu");
                      var el_submenu = document.createElement("div");
                      el_submenu.classList.add("jcontextmenu");
                      el_submenu.setAttribute("tabindex", "900");
                      var submenu = item.submenu;
                      for (var i2 = 0; i2 < submenu.length; i2++) {
                        var itemContainerSubMenu = createItemElement(submenu[i2]);
                        el_submenu.appendChild(itemContainerSubMenu);
                      }
                      itemContainer.appendChild(el_submenu);
                    } else if (item.shortcut) {
                      var itemShortCut = document.createElement("span");
                      itemShortCut.innerHTML = item.shortcut;
                      itemContainer.appendChild(itemShortCut);
                    }
                  }
                  return itemContainer;
                }
                if (typeof obj2.options.onclick == "function") {
                  el.addEventListener("click", function(e) {
                    obj2.options.onclick(obj2, e);
                  });
                }
                if (obj2.options.items) {
                  obj2.create(obj2.options.items);
                }
                window.addEventListener("mousewheel", function() {
                  obj2.close();
                });
                el.contextmenu = obj2;
                return obj2;
              };
              return Component;
            }
            var contextmenu = Contextmenu();
            ;
            function Dropdown() {
              var Component = (function(el, options) {
                if (el.dropdown) {
                  return el.dropdown.setOptions(options, true);
                }
                var obj2 = { type: "dropdown" };
                obj2.options = {};
                var success = function(data, val) {
                  if (data && data.length) {
                    if (obj2.options.sortResults !== false) {
                      if (typeof obj2.options.sortResults == "function") {
                        data.sort(obj2.options.sortResults);
                      } else {
                        data.sort(sortData);
                      }
                    }
                    obj2.setData(data);
                  }
                  if (typeof obj2.options.onload == "function") {
                    obj2.options.onload(el, obj2, data, val);
                  }
                  if (val) {
                    applyValue(val);
                  }
                  if (val === void 0 || val === null) {
                    obj2.options.value = "";
                  }
                  el.value = obj2.options.value;
                  if (obj2.options.opened == true) {
                    obj2.open();
                  }
                };
                var sortData = function(itemA, itemB) {
                  var testA, testB;
                  if (typeof itemA == "string") {
                    testA = itemA;
                  } else {
                    if (itemA.text) {
                      testA = itemA.text;
                    } else if (itemA.name) {
                      testA = itemA.name;
                    }
                  }
                  if (typeof itemB == "string") {
                    testB = itemB;
                  } else {
                    if (itemB.text) {
                      testB = itemB.text;
                    } else if (itemB.name) {
                      testB = itemB.name;
                    }
                  }
                  if (typeof testA == "string" || typeof testB == "string") {
                    if (typeof testA != "string") {
                      testA = "" + testA;
                    }
                    if (typeof testB != "string") {
                      testB = "" + testB;
                    }
                    return testA.localeCompare(testB);
                  } else {
                    return testA - testB;
                  }
                };
                var resetValue = function() {
                  obj2.value = {};
                  for (var i2 = 0; i2 < obj2.items.length; i2++) {
                    if (obj2.items[i2].selected == true) {
                      if (obj2.items[i2].element) {
                        obj2.items[i2].element.classList.remove("jdropdown-selected");
                      }
                      obj2.items[i2].selected = null;
                    }
                  }
                  obj2.options.value = "";
                  el.value = "";
                };
                var applyValue = function(values) {
                  resetValue();
                  if (values !== null) {
                    if (!values) {
                      if (typeof obj2.value[""] !== "undefined") {
                        obj2.value[""] = "";
                      }
                    } else {
                      if (!Array.isArray(values)) {
                        values = ("" + values).split(";");
                      }
                      for (var i2 = 0; i2 < values.length; i2++) {
                        obj2.value[values[i2]] = "";
                      }
                    }
                  }
                  for (var i2 = 0; i2 < obj2.items.length; i2++) {
                    if (typeof obj2.value[Value(i2)] !== "undefined") {
                      if (obj2.items[i2].element) {
                        obj2.items[i2].element.classList.add("jdropdown-selected");
                      }
                      obj2.items[i2].selected = true;
                      obj2.value[Value(i2)] = Text2(i2);
                    }
                  }
                  obj2.options.value = Object.keys(obj2.value).join(";");
                  obj2.header.value = obj2.getText();
                };
                var Value = function(k, v) {
                  if (!obj2.options.format) {
                    var property = "value";
                  } else {
                    var property = "id";
                  }
                  if (obj2.items[k]) {
                    if (v !== void 0) {
                      return obj2.items[k].data[property] = v;
                    } else {
                      return obj2.items[k].data[property];
                    }
                  }
                  return "";
                };
                var Text2 = function(k, v) {
                  if (!obj2.options.format) {
                    var property = "text";
                  } else {
                    var property = "name";
                  }
                  if (obj2.items[k]) {
                    if (v !== void 0) {
                      return obj2.items[k].data[property] = v;
                    } else {
                      return obj2.items[k].data[property];
                    }
                  }
                  return "";
                };
                var getValue2 = function() {
                  return Object.keys(obj2.value);
                };
                var getText = function() {
                  var data = [];
                  var k = Object.keys(obj2.value);
                  for (var i2 = 0; i2 < k.length; i2++) {
                    data.push(obj2.value[k[i2]]);
                  }
                  return data;
                };
                obj2.setOptions = function(options2, reset) {
                  if (!options2) {
                    options2 = {};
                  }
                  var defaults = {
                    url: null,
                    data: [],
                    format: 0,
                    multiple: false,
                    autocomplete: false,
                    remoteSearch: false,
                    lazyLoading: false,
                    type: null,
                    width: null,
                    maxWidth: null,
                    opened: false,
                    value: null,
                    placeholder: "",
                    newOptions: false,
                    position: false,
                    onchange: null,
                    onload: null,
                    onopen: null,
                    onclose: null,
                    onfocus: null,
                    onblur: null,
                    oninsert: null,
                    onbeforeinsert: null,
                    onsearch: null,
                    onbeforesearch: null,
                    sortResults: false,
                    autofocus: false,
                    prompt: null,
                    allowEmpty: true
                  };
                  for (var property in defaults) {
                    if (options2 && options2.hasOwnProperty(property)) {
                      obj2.options[property] = options2[property];
                    } else {
                      if (typeof obj2.options[property] == "undefined" || reset === true) {
                        obj2.options[property] = defaults[property];
                      }
                    }
                  }
                  if (obj2.options.remoteSearch == true || obj2.options.type === "searchbar") {
                    obj2.options.autocomplete = true;
                  }
                  if (obj2.options.newOptions == true) {
                    obj2.header.classList.add("jdropdown-add");
                  } else {
                    obj2.header.classList.remove("jdropdown-add");
                  }
                  if (obj2.options.autocomplete == true) {
                    obj2.header.removeAttribute("readonly");
                  } else {
                    obj2.header.setAttribute("readonly", "readonly");
                  }
                  if (obj2.options.placeholder) {
                    obj2.header.setAttribute("placeholder", obj2.options.placeholder);
                  } else {
                    obj2.header.removeAttribute("placeholder");
                  }
                  el.classList.remove("jdropdown-searchbar");
                  el.classList.remove("jdropdown-picker");
                  el.classList.remove("jdropdown-list");
                  if (obj2.options.type == "searchbar") {
                    el.classList.add("jdropdown-searchbar");
                  } else if (obj2.options.type == "list") {
                    el.classList.add("jdropdown-list");
                  } else if (obj2.options.type == "picker") {
                    el.classList.add("jdropdown-picker");
                  } else {
                    if (helpers2.getWindowWidth() < 800) {
                      if (obj2.options.autocomplete) {
                        el.classList.add("jdropdown-searchbar");
                        obj2.options.type = "searchbar";
                      } else {
                        el.classList.add("jdropdown-picker");
                        obj2.options.type = "picker";
                      }
                    } else {
                      if (obj2.options.width) {
                        el.style.width = obj2.options.width;
                        el.style.minWidth = obj2.options.width;
                      } else {
                        el.style.removeProperty("width");
                        el.style.removeProperty("min-width");
                      }
                      el.classList.add("jdropdown-default");
                      obj2.options.type = "default";
                    }
                  }
                  if (obj2.options.type == "searchbar") {
                    containerHeader.appendChild(closeButton);
                  } else {
                    container.insertBefore(closeButton, container.firstChild);
                  }
                  if (obj2.options.url && !options2.data) {
                    ajax({
                      url: obj2.options.url,
                      method: "GET",
                      dataType: "json",
                      success: function(data) {
                        if (data) {
                          success(data, obj2.options.value);
                        }
                      }
                    });
                  } else {
                    success(obj2.options.data, obj2.options.value);
                  }
                  return obj2;
                };
                var containerHeader = null;
                var container = null;
                var content = null;
                var closeButton = null;
                var resetButton = null;
                var backdrop = null;
                var keyTimer = null;
                var init = function() {
                  if (!options) {
                    options = {};
                  }
                  if (el.tagName == "SELECT") {
                    var ret2 = Component.extractFromDom(el, options);
                    el = ret2.el;
                    options = ret2.options;
                  }
                  if (!options.placeholder && el.getAttribute("placeholder")) {
                    options.placeholder = el.getAttribute("placeholder");
                  }
                  obj2.value = {};
                  obj2.items = [];
                  obj2.groups = [];
                  obj2.search = "";
                  obj2.results = null;
                  el.classList.add("jdropdown");
                  containerHeader = document.createElement("div");
                  containerHeader.className = "jdropdown-container-header";
                  obj2.header = document.createElement("input");
                  obj2.header.className = "jdropdown-header jss_object";
                  obj2.header.type = "text";
                  obj2.header.setAttribute("autocomplete", "off");
                  obj2.header.onfocus = function() {
                    if (typeof obj2.options.onfocus == "function") {
                      obj2.options.onfocus(el);
                    }
                  };
                  obj2.header.onblur = function() {
                    if (typeof obj2.options.onblur == "function") {
                      obj2.options.onblur(el);
                    }
                  };
                  obj2.header.onkeyup = function(e) {
                    if (obj2.options.autocomplete == true && !keyTimer) {
                      if (obj2.search != obj2.header.value.trim()) {
                        keyTimer = setTimeout(function() {
                          obj2.find(obj2.header.value.trim());
                          keyTimer = null;
                        }, 400);
                      }
                      if (!el.classList.contains("jdropdown-focus")) {
                        obj2.open();
                      }
                    } else {
                      if (!obj2.options.autocomplete) {
                        obj2.next(e.key);
                      }
                    }
                  };
                  if (!Component.hasEvents) {
                    Component.hasEvents = true;
                    document.addEventListener("keydown", Component.keydown);
                  }
                  container = document.createElement("div");
                  container.className = "jdropdown-container";
                  content = document.createElement("div");
                  content.className = "jdropdown-content";
                  closeButton = document.createElement("div");
                  closeButton.className = "jdropdown-close";
                  closeButton.textContent = "Done";
                  resetButton = document.createElement("div");
                  resetButton.className = "jdropdown-reset";
                  resetButton.textContent = "x";
                  resetButton.onclick = function() {
                    obj2.reset();
                    obj2.close();
                  };
                  backdrop = document.createElement("div");
                  backdrop.className = "jdropdown-backdrop";
                  containerHeader.appendChild(obj2.header);
                  container.appendChild(content);
                  el.appendChild(containerHeader);
                  el.appendChild(container);
                  el.appendChild(backdrop);
                  obj2.setOptions(options);
                  if ("ontouchsend" in document.documentElement === true) {
                    el.addEventListener("touchsend", Component.mouseup);
                  } else {
                    el.addEventListener("mouseup", Component.mouseup);
                  }
                  if (obj2.options.lazyLoading == true) {
                    LazyLoading(content, {
                      loadUp: obj2.loadUp,
                      loadDown: obj2.loadDown
                    });
                  }
                  content.onwheel = function(e) {
                    e.stopPropagation();
                  };
                  el.change = obj2.setValue;
                  el.val = function(val) {
                    if (val === void 0) {
                      return obj2.getValue(obj2.options.multiple ? true : false);
                    } else {
                      obj2.setValue(val);
                    }
                  };
                  el.dropdown = obj2;
                };
                obj2.getUrl = function() {
                  return obj2.options.url;
                };
                obj2.setUrl = function(url, callback) {
                  obj2.options.url = url;
                  ajax({
                    url: obj2.options.url,
                    method: "GET",
                    dataType: "json",
                    success: function(data) {
                      obj2.setData(data);
                      if (typeof callback == "function") {
                        callback(obj2);
                      }
                    }
                  });
                };
                obj2.setId = function(item, v) {
                  if (!obj2.options.format) {
                    var property = "value";
                  } else {
                    var property = "id";
                  }
                  if (typeof item == "object") {
                    item[property] = v;
                  } else {
                    obj2.items[item].data[property] = v;
                  }
                };
                const add = function(title, id) {
                  if (!title) {
                    let current = obj2.options.autocomplete == true ? obj2.header.value : "";
                    title = prompt(dictionary.translate("Add A New Option"), current);
                    if (!title) {
                      return false;
                    }
                  }
                  if (!id) {
                    id = helpers2.guid();
                  }
                  if (!obj2.options.format) {
                    var item = {
                      value: id,
                      text: title
                    };
                  } else {
                    var item = {
                      id,
                      name: title
                    };
                  }
                  if (typeof obj2.options.onbeforeinsert == "function") {
                    let ret2 = obj2.options.onbeforeinsert(obj2, item);
                    if (ret2 === false) {
                      return false;
                    } else if (ret2) {
                      item = ret2;
                    }
                  }
                  obj2.options.data.push(item);
                  var newItem = obj2.createItem(item);
                  content.appendChild(newItem.element);
                  if (typeof obj2.options.oninsert == "function") {
                    obj2.options.oninsert(obj2, item, newItem);
                  }
                  if (content.style.display == "none") {
                    content.style.display = "";
                  }
                  if (obj2.results) {
                    obj2.results.push(newItem);
                  }
                  return item;
                };
                obj2.add = function(title, id) {
                  if (typeof obj2.options.prompt == "function") {
                    return obj2.options.prompt.call(obj2, add);
                  }
                  return add(title, id);
                };
                obj2.createItem = function(data, group, groupName) {
                  if (!obj2.options.format) {
                    if (!data.value && data.id !== void 0) {
                      data.value = data.id;
                    }
                    if (!data.text && data.name !== void 0) {
                      data.text = data.name;
                    }
                  } else {
                    if (!data.id && data.value !== void 0) {
                      data.id = data.value;
                    }
                    if (!data.name && data.text !== void 0) {
                      data.name = data.text;
                    }
                  }
                  var item = {};
                  item.element = document.createElement("div");
                  item.element.className = "jdropdown-item";
                  item.element.indexValue = obj2.items.length;
                  item.data = data;
                  if (group) {
                    item.group = group;
                  }
                  if (data.id) {
                    item.element.setAttribute("id", data.id);
                  }
                  if (data.disabled == true) {
                    item.element.setAttribute("data-disabled", true);
                  }
                  if (data.tooltip) {
                    item.element.setAttribute("title", data.tooltip);
                  }
                  if (data.image) {
                    var image = document.createElement("img");
                    image.className = "jdropdown-image";
                    image.src = data.image;
                    if (!data.title) {
                      image.classList.add("jdropdown-image-small");
                    }
                    item.element.appendChild(image);
                  } else if (data.icon) {
                    var icon = document.createElement("span");
                    icon.className = "jdropdown-icon material-icons";
                    icon.innerText = data.icon;
                    if (!data.title) {
                      icon.classList.add("jdropdown-icon-small");
                    }
                    if (data.color) {
                      icon.style.color = data.color;
                    }
                    item.element.appendChild(icon);
                  } else if (data.color) {
                    var color = document.createElement("div");
                    color.className = "jdropdown-color";
                    color.style.backgroundColor = data.color;
                    item.element.appendChild(color);
                  }
                  if (!obj2.options.format) {
                    var text = data.text;
                  } else {
                    var text = data.name;
                  }
                  var node = document.createElement("div");
                  node.className = "jdropdown-description";
                  node.textContent = text || "&nbsp;";
                  if (data.title) {
                    var title = document.createElement("div");
                    title.className = "jdropdown-title";
                    title.innerText = data.title;
                    node.appendChild(title);
                  }
                  if (!obj2.options.format) {
                    var val = data.value;
                  } else {
                    var val = data.id;
                  }
                  if (obj2.value[val]) {
                    item.element.classList.add("jdropdown-selected");
                    item.selected = true;
                  }
                  obj2.items.push(item);
                  item.element.appendChild(node);
                  return item;
                };
                obj2.appendData = function(data) {
                  if (data.length) {
                    var items = [];
                    var groups = [];
                    for (var i2 = 0; i2 < data.length; i2++) {
                      if (data[i2].group) {
                        if (!groups[data[i2].group]) {
                          groups[data[i2].group] = [];
                        }
                        groups[data[i2].group].push(i2);
                      } else {
                        items.push(i2);
                      }
                    }
                    var counter = 0;
                    var groupNames = Object.keys(groups);
                    if (groupNames.length > 0) {
                      for (var i2 = 0; i2 < groupNames.length; i2++) {
                        var group = document.createElement("div");
                        group.className = "jdropdown-group";
                        var groupName = document.createElement("div");
                        groupName.className = "jdropdown-group-name";
                        groupName.textContent = groupNames[i2];
                        var groupArrow = document.createElement("i");
                        groupArrow.className = "jdropdown-group-arrow jdropdown-group-arrow-down";
                        groupName.appendChild(groupArrow);
                        var groupContent = document.createElement("div");
                        groupContent.className = "jdropdown-group-items";
                        for (var j = 0; j < groups[groupNames[i2]].length; j++) {
                          var item = obj2.createItem(data[groups[groupNames[i2]][j]], group, groupNames[i2]);
                          if (obj2.options.lazyLoading == false || counter < 200) {
                            groupContent.appendChild(item.element);
                            counter++;
                          }
                        }
                        group.appendChild(groupName);
                        group.appendChild(groupContent);
                        obj2.groups.push(group);
                        if (groupContent.children.length > 0) {
                          content.appendChild(group);
                        }
                      }
                    }
                    if (items.length) {
                      for (var i2 = 0; i2 < items.length; i2++) {
                        var item = obj2.createItem(data[items[i2]]);
                        if (obj2.options.lazyLoading == false || counter < 200) {
                          content.appendChild(item.element);
                          counter++;
                        }
                      }
                    }
                  }
                };
                obj2.setData = function(data) {
                  resetValue();
                  content.textContent = "";
                  obj2.header.value = "";
                  obj2.items = [];
                  if (data && data.length) {
                    for (var i2 = 0; i2 < data.length; i2++) {
                      if (typeof data[i2] != "object") {
                        if (!obj2.options.format) {
                          data[i2] = {
                            value: data[i2],
                            text: data[i2]
                          };
                        } else {
                          data[i2] = {
                            id: data[i2],
                            name: data[i2]
                          };
                        }
                      }
                    }
                    obj2.appendData(data);
                    obj2.options.data = data;
                  } else {
                    obj2.options.data = [];
                  }
                  obj2.close();
                };
                obj2.getData = function() {
                  return obj2.options.data;
                };
                obj2.getPosition = function(val) {
                  for (var i2 = 0; i2 < obj2.items.length; i2++) {
                    if (Value(i2) == val) {
                      return i2;
                    }
                  }
                  return false;
                };
                obj2.getText = function(asArray) {
                  var v = getText();
                  if (asArray) {
                    return v;
                  } else {
                    return v.join("; ");
                  }
                };
                obj2.getValue = function(asArray) {
                  var v = getValue2();
                  if (asArray) {
                    return v;
                  } else {
                    return v.join(";");
                  }
                };
                var change = function(oldValue) {
                  if (el.value != obj2.options.value) {
                    el.value = obj2.options.value;
                    if (typeof el.oninput == "function") {
                      el.oninput({
                        type: "input",
                        target: el,
                        value: el.value
                      });
                    }
                  }
                  if (typeof obj2.options.onchange == "function") {
                    obj2.options.onchange(el, obj2, oldValue, obj2.options.value);
                  }
                };
                obj2.setValue = function(newValue) {
                  var oldValue = obj2.getValue();
                  if (Array.isArray(newValue)) {
                    newValue = newValue.join(";");
                  }
                  if (oldValue !== newValue) {
                    applyValue(newValue);
                    change(oldValue);
                  }
                };
                obj2.resetSelected = function() {
                  obj2.setValue(null);
                };
                obj2.selectIndex = function(index, force) {
                  var index = parseInt(index);
                  if (obj2.items && obj2.items[index] && (force === true || obj2.items[index].data.disabled !== true)) {
                    obj2.setCursor(index, false);
                    if (!obj2.options.multiple) {
                      if (obj2.items[index].selected) {
                        if (obj2.options.allowEmpty !== false) {
                          obj2.setValue(null);
                        }
                      } else {
                        obj2.setValue(Value(index));
                      }
                      obj2.close();
                    } else {
                      var oldValue = obj2.options.value;
                      if (obj2.items[index].selected) {
                        obj2.items[index].element.classList.remove("jdropdown-selected");
                        obj2.items[index].selected = false;
                        delete obj2.value[Value(index)];
                      } else {
                        obj2.items[index].element.classList.add("jdropdown-selected");
                        obj2.items[index].selected = true;
                        obj2.value[Value(index)] = Text2(index);
                      }
                      obj2.options.value = Object.keys(obj2.value).join(";");
                      if (obj2.options.autocomplete == false) {
                        obj2.header.value = getText().join("; ");
                      }
                      change(oldValue);
                    }
                  }
                };
                obj2.selectItem = function(item) {
                  obj2.selectIndex(item.indexValue);
                };
                var exists = function(k, result) {
                  for (var j = 0; j < result.length; j++) {
                    if (!obj2.options.format) {
                      if (result[j].value == k) {
                        return true;
                      }
                    } else {
                      if (result[j].id == k) {
                        return true;
                      }
                    }
                  }
                  return false;
                };
                obj2.find = function(str) {
                  if (obj2.search == str.trim()) {
                    return false;
                  }
                  obj2.search = str;
                  obj2.setCursor();
                  if (obj2.groups.length) {
                    for (var i2 = 0; i2 < obj2.groups.length; i2++) {
                      obj2.groups[i2].lastChild.textContent = "";
                    }
                  }
                  content.textContent = "";
                  if (obj2.options.remoteSearch == true) {
                    obj2.results = null;
                    var url = obj2.options.url;
                    let o = {
                      url,
                      method: "GET",
                      data: { q: str },
                      dataType: "json",
                      success: function(result) {
                        obj2.items = [];
                        var current = Object.keys(obj2.value);
                        if (current.length) {
                          for (var i3 = 0; i3 < current.length; i3++) {
                            if (!exists(current[i3], result)) {
                              if (!obj2.options.format) {
                                result.unshift({ value: current[i3], text: obj2.value[current[i3]] });
                              } else {
                                result.unshift({ id: current[i3], name: obj2.value[current[i3]] });
                              }
                            }
                          }
                        }
                        obj2.appendData(result);
                        if (!result.length) {
                          content.style.display = "none";
                        } else {
                          content.style.display = "";
                        }
                        if (typeof obj2.options.onsearch === "function") {
                          obj2.options.onsearch(obj2, result);
                        }
                      }
                    };
                    if (typeof obj2.options.onbeforesearch === "function") {
                      let ret2 = obj2.options.onbeforesearch(obj2, o);
                      if (ret2 === false) {
                        return;
                      } else if (typeof ret2 === "object") {
                        o = ret2;
                      }
                    }
                    ajax(o);
                  } else {
                    str = new RegExp(str, "gi");
                    var results = [];
                    for (var i2 = 0; i2 < obj2.items.length; i2++) {
                      var label = Text2(i2);
                      var title = obj2.items[i2].data.title || "";
                      var groupName = obj2.items[i2].data.group || "";
                      var synonym = obj2.items[i2].data.synonym || "";
                      if (synonym) {
                        synonym = synonym.join(" ");
                      }
                      if (str == null || obj2.items[i2].selected == true || label.toString().match(str) || title.match(str) || groupName.match(str) || synonym.match(str)) {
                        results.push(obj2.items[i2]);
                      }
                    }
                    if (!results.length) {
                      content.style.display = "none";
                      obj2.results = null;
                    } else {
                      content.style.display = "";
                      obj2.results = results;
                      var number = results.length || 0;
                      if (obj2.options.lazyLoading == true && number > 200) {
                        number = 200;
                      }
                      for (var i2 = 0; i2 < number; i2++) {
                        if (obj2.results[i2].group) {
                          if (!obj2.results[i2].group.parentNode) {
                            content.appendChild(obj2.results[i2].group);
                          }
                          obj2.results[i2].group.lastChild.appendChild(obj2.results[i2].element);
                        } else {
                          content.appendChild(obj2.results[i2].element);
                        }
                      }
                    }
                  }
                  if (obj2.options.autofocus == true) {
                    obj2.first();
                  }
                };
                obj2.open = function() {
                  if (!el.classList.contains("jdropdown-focus")) {
                    Component.current = obj2;
                    tracking(obj2, true);
                    el.classList.add("jdropdown-focus");
                    if (helpers2.getWindowWidth() < 800) {
                      if (obj2.options.type == null || obj2.options.type == "picker") {
                        animation.slideBottom(container, 1);
                      }
                    }
                    if (obj2.options.autocomplete == true) {
                      obj2.header.value = obj2.search;
                      obj2.header.focus();
                    }
                    var k = getValue2();
                    if (k[0]) {
                      var cursor = obj2.getPosition(k[0]);
                      if (cursor !== false) {
                        obj2.setCursor(cursor);
                      }
                    }
                    if (!obj2.options.type || obj2.options.type == "default") {
                      var rect = el.getBoundingClientRect();
                      var rectContainer = container.getBoundingClientRect();
                      if (obj2.options.position) {
                        container.style.position = "fixed";
                        if (window.innerHeight < rect.bottom + rectContainer.height) {
                          container.style.top = "";
                          container.style.bottom = window.innerHeight - rect.top + 1 + "px";
                        } else {
                          container.style.top = rect.bottom + "px";
                          container.style.bottom = "";
                        }
                        container.style.left = rect.left + "px";
                      } else {
                        if (window.innerHeight < rect.bottom + rectContainer.height) {
                          container.style.top = "";
                          container.style.bottom = rect.height + 1 + "px";
                        } else {
                          container.style.top = "";
                          container.style.bottom = "";
                        }
                      }
                      container.style.minWidth = rect.width + "px";
                      if (obj2.options.maxWidth) {
                        container.style.maxWidth = obj2.options.maxWidth;
                      }
                      if (!obj2.items.length && obj2.options.autocomplete == true) {
                        content.style.display = "none";
                      } else {
                        content.style.display = "";
                      }
                    }
                  }
                  if (typeof obj2.options.onopen == "function") {
                    obj2.options.onopen(el);
                  }
                };
                obj2.close = function(ignoreEvents) {
                  if (el.classList.contains("jdropdown-focus")) {
                    obj2.header.value = obj2.getText();
                    obj2.setCursor();
                    if (!ignoreEvents && typeof obj2.options.onclose == "function") {
                      obj2.options.onclose(el);
                    }
                    if (obj2.header.blur) {
                      obj2.header.blur();
                    }
                    el.classList.remove("jdropdown-focus");
                    tracking(obj2, false);
                    Component.current = null;
                  }
                  return obj2.getValue();
                };
                obj2.setCursor = function(index, setPosition) {
                  if (obj2.currentIndex != null) {
                    if (obj2.items && obj2.items[obj2.currentIndex]) {
                      obj2.items[obj2.currentIndex].element.classList.remove("jdropdown-cursor");
                    }
                  }
                  if (index == void 0) {
                    obj2.currentIndex = null;
                  } else {
                    index = parseInt(index);
                    if (obj2.items[index].element.parentNode) {
                      obj2.items[index].element.classList.add("jdropdown-cursor");
                      obj2.currentIndex = index;
                      if (setPosition !== false && obj2.items[obj2.currentIndex].element) {
                        var container2 = content.scrollTop;
                        var element = obj2.items[obj2.currentIndex].element;
                        content.scrollTop = element.offsetTop - element.scrollTop + element.clientTop - 95;
                      }
                    }
                  }
                };
                obj2.resetCursor = obj2.setCursor;
                obj2.updateCursor = obj2.setCursor;
                obj2.reset = function() {
                  obj2.setCursor();
                  obj2.setValue(null);
                };
                obj2.first = function() {
                  if (obj2.options.lazyLoading === true) {
                    obj2.loadFirst();
                  }
                  var items = content.querySelectorAll(".jdropdown-item");
                  if (items.length) {
                    var newIndex = items[0].indexValue;
                    obj2.setCursor(newIndex);
                  }
                };
                obj2.last = function() {
                  if (obj2.options.lazyLoading === true) {
                    obj2.loadLast();
                  }
                  var items = content.querySelectorAll(".jdropdown-item");
                  if (items.length) {
                    var newIndex = items[items.length - 1].indexValue;
                    obj2.setCursor(newIndex);
                  }
                };
                obj2.next = function(letter) {
                  var newIndex = null;
                  if (letter) {
                    if (letter.length == 1) {
                      var current = obj2.currentIndex || -1;
                      letter = letter.toLowerCase();
                      var e = null;
                      var l = null;
                      var items = content.querySelectorAll(".jdropdown-item");
                      if (items.length) {
                        for (var i2 = 0; i2 < items.length; i2++) {
                          if (items[i2].indexValue > current) {
                            if (e = obj2.items[items[i2].indexValue]) {
                              if (l = e.element.innerText[0]) {
                                l = l.toLowerCase();
                                if (letter == l) {
                                  newIndex = items[i2].indexValue;
                                  break;
                                }
                              }
                            }
                          }
                        }
                        obj2.setCursor(newIndex);
                      }
                    }
                  } else {
                    if (obj2.currentIndex == void 0 || obj2.currentIndex == null) {
                      obj2.first();
                    } else {
                      var element = obj2.items[obj2.currentIndex].element;
                      var next = element.nextElementSibling;
                      if (next) {
                        if (next.classList.contains("jdropdown-group")) {
                          next = next.lastChild.firstChild;
                        }
                        newIndex = next.indexValue;
                      } else {
                        if (element.parentNode.classList.contains("jdropdown-group-items")) {
                          if (next = element.parentNode.parentNode.nextElementSibling) {
                            if (next.classList.contains("jdropdown-group")) {
                              next = next.lastChild.firstChild;
                            } else if (next.classList.contains("jdropdown-item")) {
                              newIndex = next.indexValue;
                            } else {
                              next = null;
                            }
                          }
                          if (next) {
                            newIndex = next.indexValue;
                          }
                        }
                      }
                      if (newIndex !== null) {
                        obj2.setCursor(newIndex);
                      }
                    }
                  }
                };
                obj2.prev = function() {
                  var newIndex = null;
                  if (obj2.currentIndex === null) {
                    obj2.first();
                  } else {
                    var element = obj2.items[obj2.currentIndex].element;
                    var prev = element.previousElementSibling;
                    if (prev) {
                      if (prev.classList.contains("jdropdown-group")) {
                        prev = prev.lastChild.lastChild;
                      }
                      newIndex = prev.indexValue;
                    } else {
                      if (element.parentNode.classList.contains("jdropdown-group-items")) {
                        if (prev = element.parentNode.parentNode.previousElementSibling) {
                          if (prev.classList.contains("jdropdown-group")) {
                            prev = prev.lastChild.lastChild;
                          } else if (prev.classList.contains("jdropdown-item")) {
                            newIndex = prev.indexValue;
                          } else {
                            prev = null;
                          }
                        }
                        if (prev) {
                          newIndex = prev.indexValue;
                        }
                      }
                    }
                  }
                  if (newIndex !== null) {
                    obj2.setCursor(newIndex);
                  }
                };
                obj2.loadFirst = function() {
                  if (obj2.results) {
                    var results = obj2.results;
                  } else {
                    var results = obj2.items;
                  }
                  var number = results.length || 0;
                  if (obj2.options.lazyLoading == true && number > 200) {
                    number = 200;
                  }
                  content.textContent = "";
                  for (var i2 = 0; i2 < number; i2++) {
                    if (results[i2].group) {
                      if (!results[i2].group.parentNode) {
                        content.appendChild(results[i2].group);
                      }
                      results[i2].group.lastChild.appendChild(results[i2].element);
                    } else {
                      content.appendChild(results[i2].element);
                    }
                  }
                  content.scrollTop = 0;
                };
                obj2.loadLast = function() {
                  if (obj2.results) {
                    var results = obj2.results;
                  } else {
                    var results = obj2.items;
                  }
                  var number = results.length;
                  if (number > 200) {
                    number = number - 200;
                    content.textContent = "";
                    for (var i2 = number; i2 < results.length; i2++) {
                      if (results[i2].group) {
                        if (!results[i2].group.parentNode) {
                          content.appendChild(results[i2].group);
                        }
                        results[i2].group.lastChild.appendChild(results[i2].element);
                      } else {
                        content.appendChild(results[i2].element);
                      }
                    }
                    content.scrollTop = content.scrollHeight;
                  }
                };
                obj2.loadUp = function() {
                  var test = false;
                  if (obj2.results) {
                    var results = obj2.results;
                  } else {
                    var results = obj2.items;
                  }
                  var items = content.querySelectorAll(".jdropdown-item");
                  var fistItem = items[0].indexValue;
                  fistItem = obj2.items[fistItem];
                  var index = results.indexOf(fistItem) - 1;
                  if (index > 0) {
                    var number = 0;
                    while (index > 0 && results[index] && number < 200) {
                      if (results[index].group) {
                        if (!results[index].group.parentNode) {
                          content.insertBefore(results[index].group, content.firstChild);
                        }
                        results[index].group.lastChild.insertBefore(results[index].element, results[index].group.lastChild.firstChild);
                      } else {
                        content.insertBefore(results[index].element, content.firstChild);
                      }
                      index--;
                      number++;
                    }
                    test = true;
                  }
                  return test;
                };
                obj2.loadDown = function() {
                  var test = false;
                  if (obj2.results) {
                    var results = obj2.results;
                  } else {
                    var results = obj2.items;
                  }
                  var items = content.querySelectorAll(".jdropdown-item");
                  var lastItem = items[items.length - 1].indexValue;
                  lastItem = obj2.items[lastItem];
                  var index = results.indexOf(lastItem) + 1;
                  if (index < results.length) {
                    var number = 0;
                    while (index < results.length && results[index] && number < 200) {
                      if (results[index].group) {
                        if (!results[index].group.parentNode) {
                          content.appendChild(results[index].group);
                        }
                        results[index].group.lastChild.appendChild(results[index].element);
                      } else {
                        content.appendChild(results[index].element);
                      }
                      index++;
                      number++;
                    }
                    test = true;
                  }
                  return test;
                };
                init();
                return obj2;
              });
              Component.keydown = function(e) {
                var dropdown2 = null;
                if (dropdown2 = Component.current) {
                  if (e.which == 13 || e.which == 9) {
                    if (dropdown2.header.value && dropdown2.currentIndex == null && dropdown2.options.newOptions) {
                      dropdown2.add();
                    } else {
                      if (dropdown2.currentIndex == null && dropdown2.options.autocomplete == true && dropdown2.header.value != "") {
                        dropdown2.find(dropdown2.header.value);
                      }
                      dropdown2.selectIndex(dropdown2.currentIndex);
                    }
                  } else if (e.which == 38) {
                    if (dropdown2.currentIndex == null) {
                      dropdown2.first();
                    } else if (dropdown2.currentIndex > 0) {
                      dropdown2.prev();
                    }
                    e.preventDefault();
                  } else if (e.which == 40) {
                    if (dropdown2.currentIndex == null) {
                      dropdown2.first();
                    } else if (dropdown2.currentIndex + 1 < dropdown2.items.length) {
                      dropdown2.next();
                    }
                    e.preventDefault();
                  } else if (e.which == 36) {
                    dropdown2.first();
                    if (!e.target.classList.contains("jdropdown-header")) {
                      e.preventDefault();
                    }
                  } else if (e.which == 35) {
                    dropdown2.last();
                    if (!e.target.classList.contains("jdropdown-header")) {
                      e.preventDefault();
                    }
                  } else if (e.which == 27) {
                    dropdown2.close();
                  } else if (e.which == 33) {
                    if (dropdown2.currentIndex == null) {
                      dropdown2.first();
                    } else if (dropdown2.currentIndex > 0) {
                      for (var i2 = 0; i2 < 7; i2++) {
                        dropdown2.prev();
                      }
                    }
                    e.preventDefault();
                  } else if (e.which == 34) {
                    if (dropdown2.currentIndex == null) {
                      dropdown2.first();
                    } else if (dropdown2.currentIndex + 1 < dropdown2.items.length) {
                      for (var i2 = 0; i2 < 7; i2++) {
                        dropdown2.next();
                      }
                    }
                    e.preventDefault();
                  }
                }
              };
              Component.mouseup = function(e) {
                var element = helpers2.findElement(e.target, "jdropdown");
                if (element) {
                  var dropdown2 = element.dropdown;
                  if (e.target.classList.contains("jdropdown-header")) {
                    if (element.classList.contains("jdropdown-focus") && element.classList.contains("jdropdown-default")) {
                      var rect = element.getBoundingClientRect();
                      if (e.changedTouches && e.changedTouches[0]) {
                        var x2 = e.changedTouches[0].clientX;
                        var y2 = e.changedTouches[0].clientY;
                      } else {
                        var x2 = e.clientX;
                        var y2 = e.clientY;
                      }
                      if (rect.width - (x2 - rect.left) < 30) {
                        if (e.target.classList.contains("jdropdown-add")) {
                          dropdown2.add();
                        } else {
                          dropdown2.close();
                        }
                      } else {
                        if (dropdown2.options.autocomplete == false) {
                          dropdown2.close();
                        }
                      }
                    } else {
                      dropdown2.open();
                    }
                  } else if (e.target.classList.contains("jdropdown-group-name")) {
                    var items = e.target.nextSibling.children;
                    if (e.target.nextSibling.style.display != "none") {
                      for (var i2 = 0; i2 < items.length; i2++) {
                        if (items[i2].style.display != "none") {
                          dropdown2.selectItem(items[i2]);
                        }
                      }
                    }
                  } else if (e.target.classList.contains("jdropdown-group-arrow")) {
                    if (e.target.classList.contains("jdropdown-group-arrow-down")) {
                      e.target.classList.remove("jdropdown-group-arrow-down");
                      e.target.classList.add("jdropdown-group-arrow-up");
                      e.target.parentNode.nextSibling.style.display = "none";
                    } else {
                      e.target.classList.remove("jdropdown-group-arrow-up");
                      e.target.classList.add("jdropdown-group-arrow-down");
                      e.target.parentNode.nextSibling.style.display = "";
                    }
                  } else if (e.target.classList.contains("jdropdown-item")) {
                    dropdown2.selectItem(e.target);
                  } else if (e.target.classList.contains("jdropdown-image")) {
                    dropdown2.selectItem(e.target.parentNode);
                  } else if (e.target.classList.contains("jdropdown-description")) {
                    dropdown2.selectItem(e.target.parentNode);
                  } else if (e.target.classList.contains("jdropdown-title")) {
                    dropdown2.selectItem(e.target.parentNode.parentNode);
                  } else if (e.target.classList.contains("jdropdown-close") || e.target.classList.contains("jdropdown-backdrop")) {
                    dropdown2.close();
                  }
                }
              };
              Component.extractFromDom = function(el, options) {
                var select = el;
                if (!options) {
                  options = {};
                }
                if (el.getAttribute("multiple") && (!options || options.multiple == void 0)) {
                  options.multiple = true;
                }
                if (el.getAttribute("placeholder") && (!options || options.placeholder == void 0)) {
                  options.placeholder = el.getAttribute("placeholder");
                }
                if (el.getAttribute("data-autocomplete") && (!options || options.autocomplete == void 0)) {
                  options.autocomplete = true;
                }
                if (!options || options.width == void 0) {
                  options.width = el.offsetWidth;
                }
                if (el.value && (!options || options.value == void 0)) {
                  options.value = el.value;
                }
                if (!options || options.data == void 0) {
                  options.data = [];
                  for (var j = 0; j < el.children.length; j++) {
                    if (el.children[j].tagName == "OPTGROUP") {
                      for (var i2 = 0; i2 < el.children[j].children.length; i2++) {
                        options.data.push({
                          value: el.children[j].children[i2].value,
                          text: el.children[j].children[i2].textContent,
                          group: el.children[j].getAttribute("label")
                        });
                      }
                    } else {
                      options.data.push({
                        value: el.children[j].value,
                        text: el.children[j].textContent
                      });
                    }
                  }
                }
                if (!options || options.onchange == void 0) {
                  options.onchange = function(a, b, c, d) {
                    if (options.multiple == true) {
                      if (obj.items[b].classList.contains("jdropdown-selected")) {
                        select.options[b].setAttribute("selected", "selected");
                      } else {
                        select.options[b].removeAttribute("selected");
                      }
                    } else {
                      select.value = d;
                    }
                  };
                }
                var div = document.createElement("div");
                el.parentNode.insertBefore(div, el);
                el.style.display = "none";
                el = div;
                return { el, options };
              };
              return Component;
            }
            var dropdown = Dropdown();
            ;
            function Picker(el, options) {
              if (el.picker) {
                return el.picker.setOptions(options, true);
              }
              var obj2 = { type: "picker" };
              obj2.options = {};
              var dropdownHeader = null;
              var dropdownContent = null;
              var isDOM = function(o) {
                return o instanceof Element || o instanceof HTMLDocument;
              };
              var createContent = function() {
                dropdownContent.innerHTML = "";
                var keys = Object.keys(obj2.options.data);
                for (var i2 = 0; i2 < keys.length; i2++) {
                  var dropdownItem = document.createElement("div");
                  dropdownItem.classList.add("jpicker-item");
                  dropdownItem.setAttribute("role", "option");
                  dropdownItem.k = keys[i2];
                  dropdownItem.v = obj2.options.data[keys[i2]];
                  var item = obj2.getLabel(keys[i2], dropdownItem);
                  if (isDOM(item)) {
                    dropdownItem.appendChild(item);
                  } else {
                    dropdownItem.innerHTML = item;
                  }
                  dropdownContent.appendChild(dropdownItem);
                }
              };
              obj2.setOptions = function(options2, reset) {
                var defaults = {
                  value: 0,
                  data: null,
                  render: null,
                  onchange: null,
                  onmouseover: null,
                  onselect: null,
                  onopen: null,
                  onclose: null,
                  onload: null,
                  width: null,
                  header: true,
                  right: false,
                  bottom: false,
                  content: false,
                  columns: null,
                  grid: null,
                  height: null
                };
                if (options2 && options2.options) {
                  options2.data = options2.options;
                }
                for (var property in defaults) {
                  if (options2 && options2.hasOwnProperty(property)) {
                    obj2.options[property] = options2[property];
                  } else {
                    if (typeof obj2.options[property] == "undefined" || reset === true) {
                      obj2.options[property] = defaults[property];
                    }
                  }
                }
                if (obj2.options.header === false) {
                  dropdownHeader.style.display = "none";
                } else {
                  dropdownHeader.style.display = "";
                }
                if (obj2.options.width) {
                  dropdownHeader.style.width = parseInt(obj2.options.width) + "px";
                } else {
                  dropdownHeader.style.width = "";
                }
                if (obj2.options.height) {
                  dropdownContent.style.maxHeight = obj2.options.height + "px";
                  dropdownContent.style.overflow = "scroll";
                } else {
                  dropdownContent.style.overflow = "";
                }
                if (obj2.options.columns > 0) {
                  if (!obj2.options.grid) {
                    dropdownContent.classList.add("jpicker-columns");
                    dropdownContent.style.width = obj2.options.width ? obj2.options.width : 36 * obj2.options.columns + "px";
                  } else {
                    dropdownContent.classList.add("jpicker-grid");
                    dropdownContent.style.gridTemplateColumns = "repeat(" + obj2.options.grid + ", 1fr)";
                  }
                }
                if (isNaN(parseInt(obj2.options.value))) {
                  obj2.options.value = 0;
                }
                createContent();
                obj2.setValue(obj2.options.value);
                return obj2;
              };
              obj2.getValue = function() {
                return obj2.options.value;
              };
              obj2.setValue = function(k, e) {
                obj2.setLabel(k);
                obj2.options.value = String(k);
                if (el.value != obj2.options.value) {
                  el.value = obj2.options.value;
                  if (typeof el.oninput == "function") {
                    el.oninput({
                      type: "input",
                      target: el,
                      value: el.value
                    });
                  }
                }
                if (dropdownContent.children[k] && dropdownContent.children[k].getAttribute("type") !== "generic") {
                  obj2.close();
                }
                if (e) {
                  if (typeof obj2.options.onchange == "function") {
                    var v = obj2.options.data[k];
                    obj2.options.onchange(el, obj2, v, v, k, e);
                  }
                }
              };
              obj2.getLabel = function(v, item) {
                var label = obj2.options.data[v] || null;
                if (typeof obj2.options.render == "function") {
                  label = obj2.options.render(label, item);
                }
                return label;
              };
              obj2.setLabel = function(v) {
                var item;
                if (obj2.options.content) {
                  item = '<i class="material-icons">' + obj2.options.content + "</i>";
                } else {
                  item = obj2.getLabel(v, null);
                }
                if (isDOM(item)) {
                  dropdownHeader.innerHTML = "";
                  dropdownHeader.appendChild(item);
                } else {
                  dropdownHeader.innerHTML = item;
                }
              };
              obj2.open = function() {
                if (!el.classList.contains("jpicker-focus")) {
                  tracking(obj2, true);
                  el.classList.add("jpicker-focus");
                  el.focus();
                  var top = 0;
                  var left2 = 0;
                  dropdownContent.style.marginLeft = "";
                  var rectHeader = dropdownHeader.getBoundingClientRect();
                  var rectContent = dropdownContent.getBoundingClientRect();
                  if (window.innerHeight < rectHeader.bottom + rectContent.height || obj2.options.bottom) {
                    top = -1 * (rectContent.height + 4);
                  } else {
                    top = rectHeader.height + 4;
                  }
                  if (obj2.options.right === true) {
                    left2 = -1 * rectContent.width + rectHeader.width;
                  }
                  if (rectContent.left + left2 < 0) {
                    left2 = left2 + rectContent.left + 10;
                  }
                  if (rectContent.left + rectContent.width > window.innerWidth) {
                    left2 = -1 * (10 + rectContent.left + rectContent.width - window.innerWidth);
                  }
                  dropdownContent.style.marginTop = parseInt(top) + "px";
                  dropdownContent.style.marginLeft = parseInt(left2) + "px";
                  if (typeof obj2.options.onopen == "function") {
                    obj2.options.onopen(el, obj2);
                  }
                }
              };
              obj2.close = function() {
                if (el.classList.contains("jpicker-focus")) {
                  el.classList.remove("jpicker-focus");
                  tracking(obj2, false);
                  if (typeof obj2.options.onclose == "function") {
                    obj2.options.onclose(el, obj2);
                  }
                }
              };
              var init = function() {
                let id = helpers2.guid();
                el.classList.add("jpicker");
                el.setAttribute("role", "combobox");
                el.setAttribute("aria-haspopup", "listbox");
                el.setAttribute("aria-expanded", "false");
                el.setAttribute("aria-controls", id);
                el.setAttribute("tabindex", "0");
                el.onmousedown = function(e) {
                  if (!el.classList.contains("jpicker-focus")) {
                    obj2.open();
                  }
                };
                dropdownHeader = document.createElement("div");
                dropdownHeader.classList.add("jpicker-header");
                dropdownContent = document.createElement("div");
                dropdownContent.setAttribute("id", id);
                dropdownContent.setAttribute("role", "listbox");
                dropdownContent.classList.add("jpicker-content");
                dropdownContent.onclick = function(e) {
                  var item = helpers2.findElement(e.target, "jpicker-item");
                  if (item) {
                    if (item.parentNode === dropdownContent) {
                      obj2.setValue(item.k, e);
                    }
                  }
                };
                el.appendChild(dropdownHeader);
                el.appendChild(dropdownContent);
                el.value = options.value || 0;
                obj2.setOptions(options);
                if (typeof obj2.options.onload == "function") {
                  obj2.options.onload(el, obj2);
                }
                el.change = obj2.setValue;
                el.val = function(val) {
                  if (val === void 0) {
                    return obj2.getValue();
                  } else {
                    obj2.setValue(val);
                  }
                };
                el.picker = obj2;
              };
              init();
              return obj2;
            }
            ;
            function Toolbar(el, options) {
              var obj2 = { type: "toolbar" };
              obj2.options = {};
              var defaults = {
                app: null,
                container: false,
                badge: false,
                title: false,
                responsive: false,
                maxWidth: null,
                bottom: true,
                items: []
              };
              for (var property in defaults) {
                if (options && options.hasOwnProperty(property)) {
                  obj2.options[property] = options[property];
                } else {
                  obj2.options[property] = defaults[property];
                }
              }
              if (!el && options.app && options.app.el) {
                el = document.createElement("div");
                options.app.el.appendChild(el);
              }
              var toolbarArrow = document.createElement("div");
              toolbarArrow.classList.add("jtoolbar-item");
              toolbarArrow.classList.add("jtoolbar-arrow");
              var toolbarFloating = document.createElement("div");
              toolbarFloating.classList.add("jtoolbar-floating");
              toolbarArrow.appendChild(toolbarFloating);
              obj2.selectItem = function(element) {
                var elements = toolbarContent.children;
                for (var i2 = 0; i2 < elements.length; i2++) {
                  if (element != elements[i2]) {
                    elements[i2].classList.remove("jtoolbar-selected");
                  }
                }
                element.classList.add("jtoolbar-selected");
              };
              obj2.hide = function() {
                animation.slideBottom(el, 0, function() {
                  el.style.display = "none";
                });
              };
              obj2.show = function() {
                el.style.display = "";
                animation.slideBottom(el, 1);
              };
              obj2.get = function() {
                return el;
              };
              obj2.setBadge = function(index, value) {
                toolbarContent.children[index].children[1].firstChild.innerHTML = value;
              };
              obj2.destroy = function() {
                toolbar.remove();
                el.innerHTML = "";
              };
              obj2.update = function(a, b) {
                for (var i2 = 0; i2 < toolbarContent.children.length; i2++) {
                  var toolbarItem = toolbarContent.children[i2];
                  if (typeof toolbarItem.updateState == "function") {
                    toolbarItem.updateState(el, obj2, toolbarItem, a, b);
                  }
                }
                for (var i2 = 0; i2 < toolbarFloating.children.length; i2++) {
                  var toolbarItem = toolbarFloating.children[i2];
                  if (typeof toolbarItem.updateState == "function") {
                    toolbarItem.updateState(el, obj2, toolbarItem, a, b);
                  }
                }
              };
              obj2.create = function(items) {
                toolbarContent.innerHTML = "";
                for (var i2 = 0; i2 < items.length; i2++) {
                  var toolbarItem = document.createElement("div");
                  toolbarItem.classList.add("jtoolbar-item");
                  if (items[i2].width) {
                    toolbarItem.style.width = parseInt(items[i2].width) + "px";
                  }
                  if (items[i2].k) {
                    toolbarItem.k = items[i2].k;
                  }
                  if (items[i2].tooltip) {
                    toolbarItem.setAttribute("title", items[i2].tooltip);
                    toolbarItem.setAttribute("aria-label", items[i2].tooltip);
                  }
                  if (items[i2].id) {
                    toolbarItem.setAttribute("id", items[i2].id);
                  }
                  if (items[i2].updateState) {
                    toolbarItem.updateState = items[i2].updateState;
                  }
                  if (items[i2].active) {
                    toolbarItem.classList.add("jtoolbar-active");
                  }
                  if (items[i2].disabled) {
                    toolbarItem.classList.add("jtoolbar-disabled");
                  }
                  if (items[i2].type == "select" || items[i2].type == "dropdown") {
                    Picker(toolbarItem, items[i2]);
                  } else if (items[i2].type == "divisor") {
                    toolbarItem.classList.add("jtoolbar-divisor");
                  } else if (items[i2].type == "label") {
                    toolbarItem.classList.add("jtoolbar-label");
                    toolbarItem.innerHTML = items[i2].content;
                  } else {
                    var toolbarIcon = document.createElement("i");
                    if (typeof items[i2].class === "undefined") {
                      toolbarIcon.classList.add("material-icons");
                    } else {
                      var c = items[i2].class.split(" ");
                      for (var j = 0; j < c.length; j++) {
                        toolbarIcon.classList.add(c[j]);
                      }
                    }
                    toolbarIcon.innerHTML = items[i2].content ? items[i2].content : "";
                    toolbarItem.setAttribute("role", "button");
                    toolbarItem.appendChild(toolbarIcon);
                    if (obj2.options.badge == true) {
                      var toolbarBadge = document.createElement("div");
                      toolbarBadge.classList.add("jbadge");
                      var toolbarBadgeContent = document.createElement("div");
                      toolbarBadgeContent.innerHTML = items[i2].badge ? items[i2].badge : "";
                      toolbarBadge.appendChild(toolbarBadgeContent);
                      toolbarItem.appendChild(toolbarBadge);
                    }
                    if (items[i2].title) {
                      if (obj2.options.title == true) {
                        var toolbarTitle = document.createElement("span");
                        toolbarTitle.innerHTML = items[i2].title;
                        toolbarItem.appendChild(toolbarTitle);
                      } else {
                        toolbarItem.setAttribute("title", items[i2].title);
                      }
                    }
                    if (obj2.options.app && items[i2].route) {
                      toolbarItem.route = items[i2].route;
                      toolbarItem.onclick = function() {
                        obj2.options.app.pages(this.route);
                      };
                      obj2.options.app.pages(items[i2].route, {
                        toolbarItem,
                        closed: true
                      });
                    }
                    if (typeof items[i2].render === "function") {
                      items[i2].render(toolbarItem, items[i2]);
                    }
                  }
                  if (items[i2].onclick) {
                    toolbarItem.onclick = items[i2].onclick.bind(items[i2], el, obj2, toolbarItem);
                  }
                  toolbarContent.appendChild(toolbarItem);
                }
                setTimeout(function() {
                  obj2.refresh();
                }, 0);
              };
              obj2.open = function() {
                toolbarArrow.classList.add("jtoolbar-arrow-selected");
                var rectElement = el.getBoundingClientRect();
                var rect = toolbarFloating.getBoundingClientRect();
                if (rect.bottom > window.innerHeight || obj2.options.bottom) {
                  toolbarFloating.style.bottom = "0";
                } else {
                  toolbarFloating.style.removeProperty("bottom");
                }
                toolbarFloating.style.right = "0";
                toolbarArrow.children[0].focus();
                tracking(obj2, true);
              };
              obj2.close = function() {
                toolbarArrow.classList.remove("jtoolbar-arrow-selected");
                tracking(obj2, false);
              };
              obj2.refresh = function() {
                if (obj2.options.responsive == true) {
                  var rect = el.parentNode.getBoundingClientRect();
                  if (!obj2.options.maxWidth) {
                    obj2.options.maxWidth = rect.width;
                  }
                  var available = parseInt(obj2.options.maxWidth);
                  if (toolbarArrow.parentNode) {
                    toolbarArrow.parentNode.removeChild(toolbarArrow);
                  }
                  while (toolbarFloating.firstChild) {
                    toolbarContent.appendChild(toolbarFloating.firstChild);
                  }
                  if (available < toolbarContent.offsetWidth) {
                    available -= 50;
                    while (toolbarContent.lastChild && available < toolbarContent.offsetWidth) {
                      toolbarFloating.insertBefore(toolbarContent.lastChild, toolbarFloating.firstChild);
                    }
                  }
                  if (toolbarFloating.children.length > 0) {
                    toolbarContent.appendChild(toolbarArrow);
                  }
                }
              };
              obj2.setReadonly = function(state) {
                state = state ? "add" : "remove";
                el.classList[state]("jtoolbar-disabled");
              };
              el.onclick = function(e) {
                var element = helpers2.findElement(e.target, "jtoolbar-item");
                if (element) {
                  obj2.selectItem(element);
                }
                if (e.target.classList.contains("jtoolbar-arrow")) {
                  obj2.open();
                }
              };
              window.addEventListener("resize", function() {
                obj2.refresh();
              });
              el.classList.add("jtoolbar");
              el.innerHTML = "";
              if (obj2.options.container == true) {
                el.classList.add("jtoolbar-container");
              }
              var toolbarContent = document.createElement("div");
              el.appendChild(toolbarContent);
              if (obj2.options.app) {
                el.classList.add("jtoolbar-mobile");
              }
              obj2.create(obj2.options.items);
              el.toolbar = obj2;
              return obj2;
            }
            ;
            function Editor() {
              var Component = (function(el, options) {
                var obj2 = { type: "editor" };
                obj2.options = {};
                var defaults = {
                  // Load data from a remove location
                  url: null,
                  // Initial HTML content
                  value: "",
                  // Initial snippet
                  snippet: null,
                  // Add toolbar
                  toolbar: true,
                  toolbarOnTop: false,
                  // Website parser is to read websites and images from cross domain
                  remoteParser: null,
                  // Placeholder
                  placeholder: null,
                  // Parse URL
                  filterPaste: true,
                  // Accept drop files
                  dropZone: true,
                  dropAsSnippet: false,
                  acceptImages: true,
                  acceptFiles: false,
                  maxFileSize: 5e6,
                  allowImageResize: true,
                  // Style
                  maxHeight: null,
                  height: null,
                  focus: false,
                  // Events
                  onclick: null,
                  onfocus: null,
                  onblur: null,
                  onload: null,
                  onkeyup: null,
                  onkeydown: null,
                  onchange: null,
                  extensions: null,
                  type: null
                };
                for (var property in defaults) {
                  if (options && options.hasOwnProperty(property)) {
                    obj2.options[property] = options[property];
                  } else {
                    obj2.options[property] = defaults[property];
                  }
                }
                var editorTimer = null;
                var editorAction = null;
                var files = [];
                obj2.el = el;
                if (typeof obj2.options.onclick == "function") {
                  el.onclick = function(e) {
                    obj2.options.onclick(el, obj2, e);
                  };
                }
                el.classList.add("jeditor-container");
                var snippet = document.createElement("div");
                snippet.className = "jsnippet";
                snippet.setAttribute("contenteditable", false);
                var toolbar2 = document.createElement("div");
                toolbar2.className = "jeditor-toolbar";
                obj2.editor = document.createElement("div");
                obj2.editor.setAttribute("contenteditable", true);
                obj2.editor.setAttribute("spellcheck", false);
                obj2.editor.classList.add("jeditor");
                if (obj2.options.placeholder) {
                  obj2.editor.setAttribute("data-placeholder", obj2.options.placeholder);
                }
                if (obj2.options.maxHeight || obj2.options.height) {
                  obj2.editor.style.overflowY = "auto";
                  if (obj2.options.maxHeight) {
                    obj2.editor.style.maxHeight = obj2.options.maxHeight;
                  }
                  if (obj2.options.height) {
                    obj2.editor.style.height = obj2.options.height;
                  }
                }
                if (obj2.options.url) {
                  ajax({
                    url: obj2.options.url,
                    dataType: "html",
                    success: function(result) {
                      obj2.editor.innerHTML = result;
                      Component.setCursor(obj2.editor, obj2.options.focus == "initial" ? true : false);
                    }
                  });
                } else {
                  if (obj2.options.value) {
                    obj2.editor.innerHTML = obj2.options.value;
                  } else {
                    for (var i2 = 0; i2 < el.children.length; i2++) {
                      obj2.editor.appendChild(el.children[i2]);
                    }
                  }
                }
                el.innerHTML = "";
                var change = function(e) {
                  if (typeof obj2.options.onchange == "function") {
                    obj2.options.onchange(el, obj2, e);
                  }
                  obj2.options.value = obj2.getData();
                  if (el.value != obj2.options.value) {
                    el.value = obj2.options.value;
                    if (typeof el.oninput == "function") {
                      el.oninput({
                        type: "input",
                        target: el,
                        value: el.value
                      });
                    }
                  }
                };
                var extractImageFromHtml = function(html) {
                  var div = document.createElement("div");
                  div.innerHTML = html;
                  var img = div.querySelectorAll("img");
                  if (img.length) {
                    for (var i3 = 0; i3 < img.length; i3++) {
                      obj2.addImage(img[i3].src);
                    }
                  }
                };
                var insertNodeAtCaret = function(newNode) {
                  var sel, range;
                  if (window.getSelection) {
                    sel = window.getSelection();
                    if (sel.rangeCount) {
                      range = sel.getRangeAt(0);
                      var selectedText = range.toString();
                      range.deleteContents();
                      range.insertNode(newNode);
                      range.setStartAfter(newNode);
                      range.setEndAfter(newNode);
                      sel.removeAllRanges();
                      sel.addRange(range);
                    }
                  }
                };
                var updateTotalImages = function() {
                  var o = null;
                  if (o = snippet.children[0]) {
                    if (!o.classList.contains("jslider-grid")) {
                      o.classList.add("jslider-grid");
                    }
                    var number = o.children.length;
                    o.setAttribute("data-number", number > 4 ? 4 : number);
                    if (number > 4) {
                      o.setAttribute("data-total", number - 4);
                    } else {
                      o.removeAttribute("data-total");
                    }
                  }
                };
                var appendImage = function(image) {
                  if (!snippet.innerHTML) {
                    obj2.appendSnippet({});
                  }
                  snippet.children[0].appendChild(image);
                  updateTotalImages();
                };
                obj2.appendSnippet = function(data) {
                  snippet.innerHTML = "";
                  var a = ["image", "title", "description", "host", "url"];
                  for (var i3 = 0; i3 < a.length; i3++) {
                    var div = document.createElement("div");
                    div.className = "jsnippet-" + a[i3];
                    div.setAttribute("data-k", a[i3]);
                    snippet.appendChild(div);
                    if (data[a[i3]]) {
                      if (a[i3] == "image") {
                        if (!Array.isArray(data.image)) {
                          data.image = [data.image];
                        }
                        for (var j = 0; j < data.image.length; j++) {
                          var img = document.createElement("img");
                          img.src = data.image[j];
                          div.appendChild(img);
                        }
                      } else {
                        div.innerHTML = data[a[i3]];
                      }
                    }
                  }
                  obj2.editor.appendChild(document.createElement("br"));
                  obj2.editor.appendChild(snippet);
                };
                obj2.setData = function(o) {
                  if (typeof o == "object") {
                    obj2.editor.innerHTML = o.content;
                  } else {
                    obj2.editor.innerHTML = o;
                  }
                  if (obj2.options.focus) {
                    Component.setCursor(obj2.editor, true);
                  }
                  files = [];
                };
                obj2.getFiles = function() {
                  var f = obj2.editor.querySelectorAll(".jfile");
                  var d = [];
                  for (var i3 = 0; i3 < f.length; i3++) {
                    if (files[f[i3].src]) {
                      d.push(files[f[i3].src]);
                    }
                  }
                  return d;
                };
                obj2.getText = function() {
                  return obj2.editor.innerText;
                };
                obj2.getData = function(json) {
                  if (!json) {
                    var data = obj2.editor.innerHTML;
                  } else {
                    var data = {
                      content: ""
                    };
                    if (snippet.innerHTML) {
                      var index = 0;
                      data.snippet = {};
                      for (var i3 = 0; i3 < snippet.children.length; i3++) {
                        var key = snippet.children[i3].getAttribute("data-k");
                        if (key) {
                          if (key == "image") {
                            if (!data.snippet.image) {
                              data.snippet.image = [];
                            }
                            for (var j = 0; j < snippet.children[i3].children.length; j++) {
                              data.snippet.image.push(snippet.children[i3].children[j].getAttribute("src"));
                            }
                          } else {
                            data.snippet[key] = snippet.children[i3].innerHTML;
                          }
                        }
                      }
                    }
                    var f = Object.keys(files);
                    if (f.length) {
                      data.files = [];
                      for (var i3 = 0; i3 < f.length; i3++) {
                        data.files.push(files[f[i3]]);
                      }
                    }
                    var d = document.createElement("div");
                    d.innerHTML = obj2.editor.innerHTML;
                    var s = d.querySelector(".jsnippet");
                    if (s) {
                      s.remove();
                    }
                    var text = d.innerHTML;
                    text = text.replace(/<br>/g, "\n");
                    text = text.replace(/<\/div>/g, "</div>\n");
                    text = text.replace(/<(?:.|\n)*?>/gm, "");
                    data.content = text.trim();
                    processExtensions("getData", data);
                  }
                  return data;
                };
                obj2.reset = function() {
                  obj2.editor.innerHTML = "";
                  snippet.innerHTML = "";
                  files = [];
                };
                obj2.addPdf = function(data) {
                  if (data.result.substr(0, 4) != "data") {
                    console.error("Invalid source");
                  } else {
                    var canvas = document.createElement("canvas");
                    canvas.width = 60;
                    canvas.height = 60;
                    var img = new Image();
                    var ctx = canvas.getContext("2d");
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    canvas.toBlob(function(blob2) {
                      var newImage = document.createElement("img");
                      newImage.src = window.URL.createObjectURL(blob2);
                      newImage.title = data.name;
                      newImage.className = "jfile pdf";
                      files[newImage.src] = {
                        file: newImage.src,
                        extension: "pdf",
                        content: data.result
                      };
                      document.execCommand("insertHtml", false, newImage.outerHTML);
                    });
                  }
                };
                obj2.addImage = function(src2, asSnippet) {
                  if (!obj2.options.acceptImages) {
                    return;
                  }
                  if (!src2) {
                    src2 = "";
                  }
                  if (src2.substr(0, 4) != "data" && !obj2.options.remoteParser) {
                    console.error("remoteParser not defined in your initialization");
                  } else {
                    if (src2.substr(0, 4) == "data") {
                      var extension = src2.split(";");
                      extension = extension[0].split("/");
                      extension = extension[1];
                    } else {
                      var extension = src2.substr(src2.lastIndexOf(".") + 1);
                      src2 = obj2.options.remoteParser + src2;
                    }
                    var img = new Image();
                    img.onload = function onload() {
                      var canvas = document.createElement("canvas");
                      canvas.width = img.width;
                      canvas.height = img.height;
                      var ctx = canvas.getContext("2d");
                      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                      canvas.toBlob(function(blob2) {
                        var newImage = document.createElement("img");
                        newImage.src = window.URL.createObjectURL(blob2);
                        newImage.classList.add("jfile");
                        newImage.setAttribute("tabindex", "900");
                        newImage.setAttribute("width", img.width);
                        newImage.setAttribute("height", img.height);
                        files[newImage.src] = {
                          file: newImage.src,
                          extension,
                          content: canvas.toDataURL()
                        };
                        if (obj2.options.dropAsSnippet || asSnippet) {
                          appendImage(newImage);
                          files[newImage.src].snippet = true;
                        } else {
                          document.execCommand("insertHtml", false, newImage.outerHTML);
                        }
                        change();
                      });
                    };
                    img.src = src2;
                  }
                };
                obj2.addFile = function(files2) {
                  var reader2 = [];
                  for (var i3 = 0; i3 < files2.length; i3++) {
                    if (files2[i3].size > obj2.options.maxFileSize) {
                      alert("The file is too big");
                    } else {
                      var type = files2[i3].type.split("/");
                      if (type[0] == "image") {
                        type = 1;
                      } else if (type[1] == "pdf") {
                        type = 2;
                      } else {
                        type = 0;
                      }
                      if (type) {
                        reader2[i3] = new FileReader();
                        reader2[i3].index = i3;
                        reader2[i3].type = type;
                        reader2[i3].name = files2[i3].name;
                        reader2[i3].date = files2[i3].lastModified;
                        reader2[i3].size = files2[i3].size;
                        reader2[i3].addEventListener("load", function(data) {
                          if (data.target.type == 2) {
                            if (obj2.options.acceptFiles == true) {
                              obj2.addPdf(data.target);
                            }
                          } else {
                            obj2.addImage(data.target.result);
                          }
                        }, false);
                        reader2[i3].readAsDataURL(files2[i3]);
                      } else {
                        alert("The extension is not allowed");
                      }
                    }
                  }
                };
                obj2.destroy = function() {
                  obj2.editor.removeEventListener("mouseup", editorMouseUp);
                  obj2.editor.removeEventListener("mousedown", editorMouseDown);
                  obj2.editor.removeEventListener("mousemove", editorMouseMove);
                  obj2.editor.removeEventListener("keyup", editorKeyUp);
                  obj2.editor.removeEventListener("keydown", editorKeyDown);
                  obj2.editor.removeEventListener("dragstart", editorDragStart);
                  obj2.editor.removeEventListener("dragenter", editorDragEnter);
                  obj2.editor.removeEventListener("dragover", editorDragOver);
                  obj2.editor.removeEventListener("drop", editorDrop);
                  obj2.editor.removeEventListener("paste", editorPaste);
                  obj2.editor.removeEventListener("blur", editorBlur);
                  obj2.editor.removeEventListener("focus", editorFocus);
                  el.editor = null;
                  el.classList.remove("jeditor-container");
                  toolbar2.remove();
                  snippet.remove();
                  obj2.editor.remove();
                };
                obj2.upload = function() {
                  helpers2.click(obj2.file);
                };
                const validTags = [
                  "html",
                  "body",
                  "address",
                  "span",
                  "div",
                  "h1",
                  "h2",
                  "h3",
                  "h4",
                  "h5",
                  "h6",
                  "p",
                  "b",
                  "i",
                  "blockquote",
                  "strong",
                  "em",
                  "ul",
                  "ol",
                  "li",
                  "a",
                  "code",
                  "pre",
                  "hr",
                  "br",
                  "img",
                  "figure",
                  "picture",
                  "figcaption",
                  "iframe",
                  "table",
                  "thead",
                  "tbody",
                  "tfoot",
                  "tr",
                  "th",
                  "td",
                  "caption",
                  "u",
                  "del",
                  "ins",
                  "sub",
                  "sup",
                  "small",
                  "mark",
                  "input",
                  "textarea",
                  "select",
                  "option",
                  "button",
                  "label",
                  "fieldset",
                  "legend",
                  "audio",
                  "video",
                  "abbr",
                  "cite",
                  "kbd",
                  "section",
                  "article",
                  "nav",
                  "aside",
                  "header",
                  "footer",
                  "main",
                  "details",
                  "summary",
                  "svg",
                  "line",
                  "source"
                ];
                const validProperty = ["width", "height", "align", "border", "src", "tabindex"];
                const validStyle = ["color", "font-weight", "font-size", "background", "background-color", "margin"];
                const parse = function(element) {
                  if (element.tagName && validTags.indexOf(element.tagName.toLowerCase()) === -1) {
                    if (element.innerText) {
                      element.innerHTML = element.innerText;
                    }
                  }
                  if (element.attributes && element.attributes.length) {
                    let style = null;
                    let elementStyle = element.getAttribute("style");
                    if (elementStyle) {
                      style = [];
                      let t2 = elementStyle.split(";");
                      for (let j = 0; j < t2.length; j++) {
                        let v = t2[j].trim().split(":");
                        if (validStyle.indexOf(v[0].trim()) >= 0) {
                          let k = v.shift();
                          v = v.join(":");
                          style.push(k + ":" + v);
                        }
                      }
                    }
                    if (element.tagName.toUpperCase() === "IMG") {
                      if (!obj2.options.acceptImages || !element.src) {
                        element.parentNode.removeChild(element);
                      } else {
                        element.setAttribute("tabindex", "900");
                        obj2.addImage(element.src);
                      }
                    }
                    let attr = [];
                    for (let i3 = 0; i3 < element.attributes.length; i3++) {
                      attr.push(element.attributes[i3].name);
                    }
                    if (attr.length) {
                      attr.forEach(function(v) {
                        if (validProperty.indexOf(v) === -1) {
                          element.removeAttribute(v);
                        } else {
                          if (element.attributes && element.attributes[i2] && element.attributes[i2].value.indexOf("<") !== -1) {
                            element.attributes[i2].value.replace("<", "&#60;");
                          }
                        }
                      });
                    }
                    element.style = "";
                    if (style && style.length) {
                      element.setAttribute("style", style.join(";"));
                    }
                  }
                  if (element.children.length) {
                    for (let i3 = element.children.length; i3 > 0; i3--) {
                      parse(element.children[i3 - 1]);
                    }
                  }
                };
                var select = function(e) {
                  var s = window.getSelection();
                  var r = document.createRange();
                  r.selectNode(e);
                  s.addRange(r);
                };
                var filter2 = function(data) {
                  if (data) {
                    data = data.replace(new RegExp("<!--(.*?)-->", "gsi"), "");
                  }
                  var parser = new DOMParser();
                  var d = parser.parseFromString(data, "text/html");
                  parse(d);
                  var div = document.createElement("div");
                  div.innerHTML = d.firstChild.innerHTML;
                  return div;
                };
                var editorPaste = function(e) {
                  if (obj2.options.filterPaste == true) {
                    if (e.clipboardData || e.originalEvent.clipboardData) {
                      var html = (e.originalEvent || e).clipboardData.getData("text/html");
                      var text = (e.originalEvent || e).clipboardData.getData("text/plain");
                      var file = (e.originalEvent || e).clipboardData.files;
                    } else if (window.clipboardData) {
                      var html = window.clipboardData.getData("Html");
                      var text = window.clipboardData.getData("Text");
                      var file = window.clipboardData.files;
                    }
                    if (file.length) {
                      obj2.addFile(file);
                    } else {
                      if (!html) {
                        html = text.split("\r\n");
                        if (!e.target.innerText) {
                          html.map(function(v) {
                            var d2 = document.createElement("div");
                            d2.innerText = v;
                            obj2.editor.appendChild(d2);
                          });
                        } else {
                          html = html.map(function(v) {
                            return "<div>" + v + "</div>";
                          });
                          document.execCommand("insertText", false, html.join(""));
                        }
                      } else {
                        var d = filter2(html);
                        document.execCommand("insertHtml", false, d.innerHTML);
                      }
                    }
                    e.preventDefault();
                  }
                };
                var editorDragStart = function(e) {
                  if (editorAction && editorAction.e) {
                    e.preventDefault();
                  }
                };
                var editorDragEnter = function(e) {
                  if (editorAction || obj2.options.dropZone == false) {
                  } else {
                    el.classList.add("jeditor-dragging");
                    e.preventDefault();
                  }
                };
                var editorDragOver = function(e) {
                  if (editorAction || obj2.options.dropZone == false) {
                  } else {
                    if (editorTimer) {
                      clearTimeout(editorTimer);
                    }
                    editorTimer = setTimeout(function() {
                      el.classList.remove("jeditor-dragging");
                    }, 100);
                    e.preventDefault();
                  }
                };
                var editorDrop = function(e) {
                  if (editorAction || obj2.options.dropZone == false) {
                  } else {
                    var range = null;
                    if (document.caretRangeFromPoint) {
                      range = document.caretRangeFromPoint(e.clientX, e.clientY);
                    } else if (e.rangeParent) {
                      range = document.createRange();
                      range.setStart(e.rangeParent, e.rangeOffset);
                    }
                    var sel = window.getSelection();
                    sel.removeAllRanges();
                    sel.addRange(range);
                    sel.anchorNode.parentNode.focus();
                    var html = (e.originalEvent || e).dataTransfer.getData("text/html");
                    var text = (e.originalEvent || e).dataTransfer.getData("text/plain");
                    var file = (e.originalEvent || e).dataTransfer.files;
                    if (file.length) {
                      obj2.addFile(file);
                    } else if (text) {
                      extractImageFromHtml(html);
                    }
                    el.classList.remove("jeditor-dragging");
                    e.preventDefault();
                  }
                };
                var editorBlur = function(e) {
                  processExtensions("onevent", e);
                  change(e);
                  if (typeof obj2.options.onblur == "function") {
                    obj2.options.onblur(el, obj2, e);
                  }
                };
                var editorFocus = function(e) {
                  if (typeof obj2.options.onfocus == "function") {
                    obj2.options.onfocus(el, obj2, e);
                  }
                };
                var editorKeyUp = function(e) {
                  if (!obj2.editor.innerHTML) {
                    obj2.editor.innerHTML = "<div><br></div>";
                  }
                  if (typeof obj2.options.onkeyup == "function") {
                    obj2.options.onkeyup(el, obj2, e);
                  }
                };
                var editorKeyDown = function(e) {
                  processExtensions("onevent", e);
                  if (e.key == "Delete") {
                    if (e.target.tagName == "IMG") {
                      var parent = e.target.parentNode;
                      select(e.target);
                      if (parent.classList.contains("jsnippet-image")) {
                        updateTotalImages();
                      }
                    }
                  }
                  if (typeof obj2.options.onkeydown == "function") {
                    obj2.options.onkeydown(el, obj2, e);
                  }
                };
                var editorMouseUp = function(e) {
                  if (editorAction && editorAction.e) {
                    editorAction.e.classList.remove("resizing");
                    if (editorAction.e.changed == true) {
                      var image = editorAction.e.cloneNode();
                      image.width = parseInt(editorAction.e.style.width) || editorAction.e.getAttribute("width");
                      image.height = parseInt(editorAction.e.style.height) || editorAction.e.getAttribute("height");
                      editorAction.e.style.width = "";
                      editorAction.e.style.height = "";
                      select(editorAction.e);
                      document.execCommand("insertHtml", false, image.outerHTML);
                    }
                  }
                  editorAction = false;
                };
                var editorMouseDown = function(e) {
                  var close = function(snippet2) {
                    var rect2 = snippet2.getBoundingClientRect();
                    if (rect2.width - (e.clientX - rect2.left) < 40 && e.clientY - rect2.top < 40) {
                      snippet2.innerHTML = "";
                      snippet2.remove();
                    }
                  };
                  if (e.target.tagName == "IMG") {
                    if (e.target.style.cursor) {
                      var rect = e.target.getBoundingClientRect();
                      editorAction = {
                        e: e.target,
                        x: e.clientX,
                        y: e.clientY,
                        w: rect.width,
                        h: rect.height,
                        d: e.target.style.cursor
                      };
                      if (!e.target.getAttribute("width")) {
                        e.target.setAttribute("width", rect.width);
                      }
                      if (!e.target.getAttribute("height")) {
                        e.target.setAttribute("height", rect.height);
                      }
                      var s = window.getSelection();
                      if (s.rangeCount) {
                        for (var i3 = 0; i3 < s.rangeCount; i3++) {
                          s.removeRange(s.getRangeAt(i3));
                        }
                      }
                      e.target.classList.add("resizing");
                    } else {
                      editorAction = true;
                    }
                  } else {
                    if (e.target.classList.contains("jsnippet")) {
                      close(e.target);
                    } else if (e.target.parentNode.classList.contains("jsnippet")) {
                      close(e.target.parentNode);
                    }
                    editorAction = true;
                  }
                };
                var editorMouseMove = function(e) {
                  if (e.target.tagName == "IMG" && !e.target.parentNode.classList.contains("jsnippet-image") && obj2.options.allowImageResize == true) {
                    if (e.target.getAttribute("tabindex")) {
                      var rect = e.target.getBoundingClientRect();
                      if (e.clientY - rect.top < 5) {
                        if (rect.width - (e.clientX - rect.left) < 5) {
                          e.target.style.cursor = "ne-resize";
                        } else if (e.clientX - rect.left < 5) {
                          e.target.style.cursor = "nw-resize";
                        } else {
                          e.target.style.cursor = "n-resize";
                        }
                      } else if (rect.height - (e.clientY - rect.top) < 5) {
                        if (rect.width - (e.clientX - rect.left) < 5) {
                          e.target.style.cursor = "se-resize";
                        } else if (e.clientX - rect.left < 5) {
                          e.target.style.cursor = "sw-resize";
                        } else {
                          e.target.style.cursor = "s-resize";
                        }
                      } else if (rect.width - (e.clientX - rect.left) < 5) {
                        e.target.style.cursor = "e-resize";
                      } else if (e.clientX - rect.left < 5) {
                        e.target.style.cursor = "w-resize";
                      } else {
                        e.target.style.cursor = "";
                      }
                    }
                  }
                  if (e.which == 1 && editorAction && editorAction.d) {
                    if (editorAction.d == "e-resize" || editorAction.d == "ne-resize" || editorAction.d == "se-resize") {
                      editorAction.e.style.width = editorAction.w + (e.clientX - editorAction.x);
                      if (e.shiftKey) {
                        var newHeight = (e.clientX - editorAction.x) * (editorAction.h / editorAction.w);
                        editorAction.e.style.height = editorAction.h + newHeight;
                      } else {
                        var newHeight = null;
                      }
                    }
                    if (!newHeight) {
                      if (editorAction.d == "s-resize" || editorAction.d == "se-resize" || editorAction.d == "sw-resize") {
                        if (!e.shiftKey) {
                          editorAction.e.style.height = editorAction.h + (e.clientY - editorAction.y);
                        }
                      }
                    }
                    editorAction.e.changed = true;
                  }
                };
                var processExtensions = function(method, data) {
                  if (obj2.options.extensions) {
                    var ext = Object.keys(obj2.options.extensions);
                    if (ext.length) {
                      for (var i3 = 0; i3 < ext.length; i3++)
                        if (obj2.options.extensions[ext[i3]] && typeof obj2.options.extensions[ext[i3]][method] == "function") {
                          obj2.options.extensions[ext[i3]][method].call(obj2, data);
                        }
                    }
                  }
                };
                var loadExtensions = function() {
                  if (obj2.options.extensions) {
                    var ext = Object.keys(obj2.options.extensions);
                    if (ext.length) {
                      for (var i3 = 0; i3 < ext.length; i3++) {
                        if (obj2.options.extensions[ext[i3]] && typeof obj2.options.extensions[ext[i3]] == "function") {
                          obj2.options.extensions[ext[i3]] = obj2.options.extensions[ext[i3]](el, obj2);
                        }
                      }
                    }
                  }
                };
                document.addEventListener("mouseup", editorMouseUp);
                document.addEventListener("mousemove", editorMouseMove);
                obj2.editor.addEventListener("mousedown", editorMouseDown);
                obj2.editor.addEventListener("keyup", editorKeyUp);
                obj2.editor.addEventListener("keydown", editorKeyDown);
                obj2.editor.addEventListener("dragstart", editorDragStart);
                obj2.editor.addEventListener("dragenter", editorDragEnter);
                obj2.editor.addEventListener("dragover", editorDragOver);
                obj2.editor.addEventListener("drop", editorDrop);
                obj2.editor.addEventListener("paste", editorPaste);
                obj2.editor.addEventListener("focus", editorFocus);
                obj2.editor.addEventListener("blur", editorBlur);
                el.appendChild(obj2.editor);
                if (obj2.options.snippet) {
                  obj2.appendSnippet(obj2.options.snippet);
                }
                if (obj2.options.toolbar) {
                  if (Array.isArray(obj2.options.toolbar)) {
                    var toolbarOptions = {
                      container: true,
                      responsive: true,
                      items: obj2.options.toolbar
                    };
                  } else if (obj2.options.toolbar === true) {
                    var toolbarOptions = {
                      container: true,
                      responsive: true,
                      items: []
                    };
                  } else {
                    var toolbarOptions = obj2.options.toolbar;
                  }
                  if (!(toolbarOptions.items && toolbarOptions.items.length)) {
                    toolbarOptions.items = Component.getDefaultToolbar(obj2);
                  }
                  if (obj2.options.toolbarOnTop) {
                    el.classList.add("toolbar-on-top");
                    el.insertBefore(toolbar2, el.firstChild);
                  } else {
                    obj2.editor.style.padding = "15px";
                    el.appendChild(toolbar2);
                  }
                  Toolbar(toolbar2, toolbarOptions);
                  toolbar2.addEventListener("click", function() {
                    obj2.editor.focus();
                  });
                }
                obj2.file = document.createElement("input");
                obj2.file.style.display = "none";
                obj2.file.type = "file";
                obj2.file.setAttribute("accept", "image/*");
                obj2.file.onchange = function() {
                  obj2.addFile(this.files);
                };
                el.appendChild(obj2.file);
                if (obj2.options.focus) {
                  Component.setCursor(obj2.editor, obj2.options.focus == "initial" ? true : false);
                }
                el.change = obj2.setData;
                el.val = function(val) {
                  if (val === void 0) {
                    var o = el.getAttribute("data-html") === "true" ? false : true;
                    return obj2.getData(o);
                  } else {
                    obj2.setData(val);
                  }
                };
                loadExtensions();
                el.editor = obj2;
                if (typeof obj2.options.onload == "function") {
                  obj2.options.onload(el, obj2, obj2.editor);
                }
                return obj2;
              });
              Component.setCursor = function(element, first2) {
                element.focus();
                document.execCommand("selectAll");
                var sel = window.getSelection();
                var range = sel.getRangeAt(0);
                if (first2 == true) {
                  var node = range.startContainer;
                  var size = 0;
                } else {
                  var node = range.endContainer;
                  var size = node.length;
                }
                range.setStart(node, size);
                range.setEnd(node, size);
                sel.removeAllRanges();
                sel.addRange(range);
              };
              Component.getDefaultToolbar = function(obj2) {
                var color = function(a, b, c) {
                  if (!c.color) {
                    var t2 = null;
                    var colorPicker = Color(c, {
                      onchange: function(o, v) {
                        if (c.k === "color") {
                          document.execCommand("foreColor", false, v);
                        } else {
                          document.execCommand("backColor", false, v);
                        }
                      }
                    });
                    c.color.open();
                  }
                };
                var items = [];
                items.push({
                  content: "undo",
                  onclick: function() {
                    document.execCommand("undo");
                  }
                });
                items.push({
                  content: "redo",
                  onclick: function() {
                    document.execCommand("redo");
                  }
                });
                items.push({
                  type: "divisor"
                });
                if (obj2.options.toolbarOnTop) {
                  items.push({
                    type: "select",
                    width: "140px",
                    options: ["Default", "Verdana", "Arial", "Courier New"],
                    render: function(e) {
                      return '<span style="font-family:' + e + '">' + e + "</span>";
                    },
                    onchange: function(a, b, c, d, e) {
                      document.execCommand("fontName", false, d);
                    }
                  });
                  items.push({
                    type: "select",
                    content: "format_size",
                    options: ["x-small", "small", "medium", "large", "x-large"],
                    render: function(e) {
                      return '<span style="font-size:' + e + '">' + e + "</span>";
                    },
                    onchange: function(a, b, c, d, e) {
                      document.execCommand("fontSize", false, parseInt(e) + 1);
                    }
                  });
                  items.push({
                    type: "select",
                    options: ["format_align_left", "format_align_center", "format_align_right", "format_align_justify"],
                    render: function(e) {
                      return '<i class="material-icons">' + e + "</i>";
                    },
                    onchange: function(a, b, c, d, e) {
                      var options = ["JustifyLeft", "justifyCenter", "justifyRight", "justifyFull"];
                      document.execCommand(options[e]);
                    }
                  });
                  items.push({
                    type: "divisor"
                  });
                  items.push({
                    content: "format_color_text",
                    k: "color",
                    onclick: color
                  });
                  items.push({
                    content: "format_color_fill",
                    k: "background-color",
                    onclick: color
                  });
                }
                items.push({
                  content: "format_bold",
                  onclick: function(a, b, c) {
                    document.execCommand("bold");
                    if (document.queryCommandState("bold")) {
                      c.classList.add("selected");
                    } else {
                      c.classList.remove("selected");
                    }
                  }
                });
                items.push({
                  content: "format_italic",
                  onclick: function(a, b, c) {
                    document.execCommand("italic");
                    if (document.queryCommandState("italic")) {
                      c.classList.add("selected");
                    } else {
                      c.classList.remove("selected");
                    }
                  }
                });
                items.push({
                  content: "format_underline",
                  onclick: function(a, b, c) {
                    document.execCommand("underline");
                    if (document.queryCommandState("underline")) {
                      c.classList.add("selected");
                    } else {
                      c.classList.remove("selected");
                    }
                  }
                });
                items.push({
                  type: "divisor"
                });
                items.push({
                  content: "format_list_bulleted",
                  onclick: function(a, b, c) {
                    document.execCommand("insertUnorderedList");
                    if (document.queryCommandState("insertUnorderedList")) {
                      c.classList.add("selected");
                    } else {
                      c.classList.remove("selected");
                    }
                  }
                });
                items.push({
                  content: "format_list_numbered",
                  onclick: function(a, b, c) {
                    document.execCommand("insertOrderedList");
                    if (document.queryCommandState("insertOrderedList")) {
                      c.classList.add("selected");
                    } else {
                      c.classList.remove("selected");
                    }
                  }
                });
                items.push({
                  content: "format_indent_increase",
                  onclick: function(a, b, c) {
                    document.execCommand("indent", true, null);
                    if (document.queryCommandState("indent")) {
                      c.classList.add("selected");
                    } else {
                      c.classList.remove("selected");
                    }
                  }
                });
                items.push({
                  content: "format_indent_decrease",
                  onclick: function() {
                    document.execCommand("outdent");
                    if (document.queryCommandState("outdent")) {
                      this.classList.add("selected");
                    } else {
                      this.classList.remove("selected");
                    }
                  }
                });
                if (obj2.options.toolbarOnTop) {
                  items.push({
                    type: "divisor"
                  });
                  items.push({
                    content: "photo",
                    onclick: function() {
                      obj2.upload();
                    }
                  });
                  items.push({
                    type: "select",
                    content: "table_view",
                    columns: 8,
                    grid: 8,
                    right: true,
                    options: [
                      "0x0",
                      "1x0",
                      "2x0",
                      "3x0",
                      "4x0",
                      "5x0",
                      "6x0",
                      "7x0",
                      "0x1",
                      "1x1",
                      "2x1",
                      "3x1",
                      "4x1",
                      "5x1",
                      "6x1",
                      "7x1",
                      "0x2",
                      "1x2",
                      "2x2",
                      "3x2",
                      "4x2",
                      "5x2",
                      "6x2",
                      "7x2",
                      "0x3",
                      "1x3",
                      "2x3",
                      "3x3",
                      "4x3",
                      "5x3",
                      "6x3",
                      "7x3",
                      "0x4",
                      "1x4",
                      "2x4",
                      "3x4",
                      "4x4",
                      "5x4",
                      "6x4",
                      "7x4",
                      "0x5",
                      "1x5",
                      "2x5",
                      "3x5",
                      "4x5",
                      "5x5",
                      "6x5",
                      "7x5",
                      "0x6",
                      "1x6",
                      "2x6",
                      "3x6",
                      "4x6",
                      "5x6",
                      "6x6",
                      "7x6",
                      "0x7",
                      "1x7",
                      "2x7",
                      "3x7",
                      "4x7",
                      "5x7",
                      "6x7",
                      "7x7"
                    ],
                    render: function(e, item) {
                      if (item) {
                        item.onmouseover = this.onmouseover;
                        e = e.split("x");
                        item.setAttribute("data-x", e[0]);
                        item.setAttribute("data-y", e[1]);
                      }
                      var element = document.createElement("div");
                      item.style.margin = "1px";
                      item.style.border = "1px solid #ddd";
                      return element;
                    },
                    onmouseover: function(e) {
                      var x2 = parseInt(e.target.getAttribute("data-x"));
                      var y2 = parseInt(e.target.getAttribute("data-y"));
                      for (var i2 = 0; i2 < e.target.parentNode.children.length; i2++) {
                        var element = e.target.parentNode.children[i2];
                        var ex = parseInt(element.getAttribute("data-x"));
                        var ey = parseInt(element.getAttribute("data-y"));
                        if (ex <= x2 && ey <= y2) {
                          element.style.backgroundColor = "#cae1fc";
                          element.style.borderColor = "#2977ff";
                        } else {
                          element.style.backgroundColor = "";
                          element.style.borderColor = "#ddd";
                        }
                      }
                    },
                    onchange: function(a, b, c) {
                      c = c.split("x");
                      var table = document.createElement("table");
                      var tbody = document.createElement("tbody");
                      for (var y2 = 0; y2 <= c[1]; y2++) {
                        var tr = document.createElement("tr");
                        for (var x2 = 0; x2 <= c[0]; x2++) {
                          var td = document.createElement("td");
                          td.innerHTML = "";
                          tr.appendChild(td);
                        }
                        tbody.appendChild(tr);
                      }
                      table.appendChild(tbody);
                      table.setAttribute("width", "100%");
                      table.setAttribute("cellpadding", "6");
                      table.setAttribute("cellspacing", "0");
                      document.execCommand("insertHTML", false, table.outerHTML);
                    }
                  });
                }
                return items;
              };
              return Component;
            }
            var editor = Editor();
            ;
            function Floating() {
              var Component = (function(el, options) {
                var obj2 = {};
                obj2.options = {};
                var defaults = {
                  type: "big",
                  title: "Untitled",
                  width: 510,
                  height: 472
                };
                for (var property in defaults) {
                  if (options && options.hasOwnProperty(property)) {
                    obj2.options[property] = options[property];
                  } else {
                    obj2.options[property] = defaults[property];
                  }
                }
                var setContent = function() {
                  var temp = document.createElement("div");
                  while (el.children[0]) {
                    temp.appendChild(el.children[0]);
                  }
                  obj2.content = document.createElement("div");
                  obj2.content.className = "jfloating_content";
                  obj2.content.innerHTML = el.innerHTML;
                  while (temp.children[0]) {
                    obj2.content.appendChild(temp.children[0]);
                  }
                  obj2.container = document.createElement("div");
                  obj2.container.className = "jfloating";
                  obj2.container.appendChild(obj2.content);
                  if (obj2.options.title) {
                    obj2.container.setAttribute("title", obj2.options.title);
                  } else {
                    obj2.container.classList.add("no-title");
                  }
                  if (obj2.options.width) {
                    obj2.container.style.width = parseInt(obj2.options.width) + "px";
                  }
                  if (obj2.options.height) {
                    obj2.container.style.height = parseInt(obj2.options.height) + "px";
                  }
                  el.innerHTML = "";
                  el.appendChild(obj2.container);
                };
                var setEvents2 = function() {
                  if (obj2.container) {
                    obj2.container.addEventListener("click", function(e) {
                      var rect = e.target.getBoundingClientRect();
                      if (e.target.classList.contains("jfloating")) {
                        if (e.changedTouches && e.changedTouches[0]) {
                          var x2 = e.changedTouches[0].clientX;
                          var y2 = e.changedTouches[0].clientY;
                        } else {
                          var x2 = e.clientX;
                          var y2 = e.clientY;
                        }
                        if (rect.width - (x2 - rect.left) < 50 && y2 - rect.top < 50) {
                          setTimeout(function() {
                            obj2.close();
                          }, 100);
                        } else {
                          obj2.setState();
                        }
                      }
                    });
                  }
                };
                var setType = function() {
                  obj2.container.classList.add("jfloating-" + obj2.options.type);
                };
                obj2.state = {
                  isMinized: false
                };
                obj2.setState = function() {
                  if (obj2.state.isMinized) {
                    obj2.container.classList.remove("jfloating-minimized");
                  } else {
                    obj2.container.classList.add("jfloating-minimized");
                  }
                  obj2.state.isMinized = !obj2.state.isMinized;
                };
                obj2.close = function() {
                  Components.elements.splice(Component.elements.indexOf(obj2.container), 1);
                  obj2.updatePosition();
                  el.remove();
                };
                obj2.updatePosition = function() {
                  for (var i2 = 0; i2 < Component.elements.length; i2++) {
                    var floating2 = Component.elements[i2];
                    var prevFloating = Component.elements[i2 - 1];
                    floating2.style.right = i2 * (prevFloating ? prevFloating.offsetWidth : floating2.offsetWidth) * 1.01 + "px";
                  }
                };
                obj2.init = function() {
                  setContent();
                  setEvents2();
                  setType();
                  Component.elements.push(obj2.container);
                  obj2.updatePosition();
                  el.floating = obj2;
                };
                obj2.init();
                return obj2;
              });
              Component.elements = [];
              return Component;
            }
            var floating = Floating();
            ;
            function Validations() {
              const isNumeric = function(num) {
                return !isNaN(num) && num !== null && (typeof num !== "string" || num.trim() !== "");
              };
              const numberCriterias = {
                "between": function(value, range) {
                  return value >= range[0] && value <= range[1];
                },
                "not between": function(value, range) {
                  return value < range[0] || value > range[1];
                },
                "<": function(value, range) {
                  return value < range[0];
                },
                "<=": function(value, range) {
                  return value <= range[0];
                },
                ">": function(value, range) {
                  return value > range[0];
                },
                ">=": function(value, range) {
                  return value >= range[0];
                },
                "=": function(value, range) {
                  return value == range[0];
                },
                "!=": function(value, range) {
                  return value != range[0];
                }
              };
              const dateCriterias = {
                "valid date": function() {
                  return true;
                },
                "=": function(value, range) {
                  return value === range[0];
                },
                "!=": function(value, range) {
                  return value !== range[0];
                },
                "<": function(value, range) {
                  return value < range[0];
                },
                "<=": function(value, range) {
                  return value <= range[0];
                },
                ">": function(value, range) {
                  return value > range[0];
                },
                ">=": function(value, range) {
                  return value >= range[0];
                },
                "between": function(value, range) {
                  return value >= range[0] && value <= range[1];
                },
                "not between": function(value, range) {
                  return value < range[0] || value > range[1];
                }
              };
              const textCriterias = {
                "contains": function(value, range) {
                  return value.includes(range[0]);
                },
                "not contains": function(value, range) {
                  return !value.includes(range[0]);
                },
                "begins with": function(value, range) {
                  return value.startsWith(range[0]);
                },
                "ends with": function(value, range) {
                  return value.endsWith(range[0]);
                },
                "=": function(value, range) {
                  return value === range[0];
                },
                "!=": function(value, range) {
                  return value !== range[0];
                },
                "valid email": function(value) {
                  var pattern = new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);
                  return pattern.test(value);
                },
                "valid url": function(value) {
                  var pattern = new RegExp(/(((https?:\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]+)/ig);
                  return pattern.test(value);
                }
              };
              const component = function(value, options) {
                if (typeof component[options.type] === "function") {
                  if (options.allowBlank && (typeof value === "undefined" || value === "" || value === null)) {
                    return true;
                  }
                  return component[options.type].call(this, value, options);
                }
                return null;
              };
              component.url = function(data) {
                var pattern = new RegExp(/(((https?:\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]+)/ig);
                return pattern.test(data) ? true : false;
              };
              component.email = function(data) {
                var pattern = new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);
                return data && pattern.test(data) ? true : false;
              };
              component.required = function(data) {
                return data && data.trim() ? true : false;
              };
              component.empty = function(data) {
                return typeof data === "undefined" || data === null || typeof data === "string" && !data.toString().trim();
              };
              component["not exist"] = component.empty;
              component.notEmpty = function(data) {
                return !component.empty(data);
              };
              component.exist = component.notEmpty;
              component.number = function(data, options) {
                if (!isNumeric(data)) {
                  return false;
                }
                if (!options || !options.criteria) {
                  return true;
                }
                if (!numberCriterias[options.criteria]) {
                  return false;
                }
                let values = options.value.map(function(num) {
                  return parseFloat(num);
                });
                return numberCriterias[options.criteria](data, values);
              };
              component.login = function(data) {
                let pattern = new RegExp(/^[a-zA-Z0-9._-]+$/);
                return data && pattern.test(data) ? true : false;
              };
              component.list = function(data, options) {
                let dataType = typeof data;
                if (dataType !== "string" && dataType !== "number") {
                  return false;
                }
                let list;
                if (typeof options.value[0] === "string") {
                  if (options.source) {
                    list = options.source;
                  } else {
                    list = options.value[0].split(",");
                  }
                } else {
                  list = options.value[0];
                }
                if (!Array.isArray(list)) {
                  return false;
                } else {
                  let validOption = list.findIndex(function(item) {
                    return item == data;
                  });
                  return validOption > -1;
                }
              };
              const getCurrentDateWithoutTime = function() {
                let date = /* @__PURE__ */ new Date();
                date.setHours(0, 0, 0, 0);
                return date;
              };
              const relativeDates = {
                "one year ago": function() {
                  let date = getCurrentDateWithoutTime();
                  date.setFullYear(date.getFullYear() - 1);
                  return date;
                },
                "one month ago": function() {
                  let date = getCurrentDateWithoutTime();
                  date.setMonth(date.getMonth() - 1);
                  return date;
                },
                "one week ago": function() {
                  let date = getCurrentDateWithoutTime();
                  date.setDate(date.getDate() - 7);
                  return date;
                },
                yesterday: function() {
                  let date = getCurrentDateWithoutTime();
                  date.setDate(date.getDate() - 1);
                  return date;
                },
                today: getCurrentDateWithoutTime,
                tomorrow: function() {
                  let date = getCurrentDateWithoutTime();
                  date.setDate(date.getDate() + 1);
                  return date;
                }
              };
              component.date = function(data, options) {
                if (isNumeric(data) && data > 0 && data < 1e6) {
                  data = helpers_date.numToDate(data);
                }
                if (new Date(data) == "Invalid Date") {
                  return false;
                }
                if (!options || !options.criteria) {
                  return true;
                }
                if (!dateCriterias[options.criteria]) {
                  return false;
                }
                let values = options.value.map(function(date) {
                  if (typeof date === "string" && relativeDates[date]) {
                    return relativeDates[date]().getTime();
                  }
                  return new Date(date).getTime();
                });
                return dateCriterias[options.criteria](new Date(data).getTime(), values);
              };
              component.text = function(data, options) {
                if (typeof data === "undefined" || data === null) {
                  data = "";
                } else if (typeof data !== "string") {
                  return false;
                }
                if (!options || !options.criteria) {
                  return true;
                }
                if (!textCriterias[options.criteria]) {
                  return false;
                }
                return textCriterias[options.criteria](data, options.value);
              };
              component.textLength = function(data, options) {
                let textLength;
                if (typeof data === "string") {
                  textLength = data.length;
                } else if (typeof data !== "undefined" && data !== null && typeof data.toString === "function") {
                  textLength = data.toString().length;
                } else {
                  textLength = 0;
                }
                return component.number(textLength, options);
              };
              component.time = function(data, options) {
                if (!isNumeric(data)) {
                  return false;
                }
                if (!options || !options.criteria) {
                  return true;
                }
                if (!numberCriterias[options.criteria]) {
                  return false;
                }
                let values = options.value.map(function(num) {
                  return parseInt(parseFloat(num) * 10 ** 17) / 10 ** 17;
                });
                return numberCriterias[options.criteria](parseInt(parseFloat(data) * 10 ** 17) / 10 ** 17, values);
              };
              return component;
            }
            var validations = Validations();
            ;
            function Form() {
              var Component = (function(el, options) {
                var obj2 = {};
                obj2.options = {};
                var defaults = {
                  url: null,
                  message: "Are you sure? There are unsaved information in your form",
                  ignore: false,
                  currentHash: null,
                  submitButton: null,
                  validations: null,
                  onbeforeload: null,
                  onload: null,
                  onbeforesave: null,
                  onsave: null,
                  onbeforeremove: null,
                  onremove: null,
                  onerror: function(el2, message) {
                    alert(message);
                  }
                };
                for (var property in defaults) {
                  if (options && options.hasOwnProperty(property)) {
                    obj2.options[property] = options[property];
                  } else {
                    obj2.options[property] = defaults[property];
                  }
                }
                if (!obj2.options.validations) {
                  obj2.options.validations = {};
                }
                if (!obj2.options.submitButton) {
                  obj2.options.submitButton = el.querySelector("input[type=submit]");
                }
                if (obj2.options.submitButton && obj2.options.url) {
                  obj2.options.submitButton.onclick = function() {
                    obj2.save();
                  };
                }
                if (!obj2.options.validations.email) {
                  obj2.options.validations.email = validations.email;
                }
                if (!obj2.options.validations.length) {
                  obj2.options.validations.length = validations.length;
                }
                if (!obj2.options.validations.required) {
                  obj2.options.validations.required = validations.required;
                }
                obj2.setUrl = function(url) {
                  obj2.options.url = url;
                };
                obj2.load = function() {
                  ajax({
                    url: obj2.options.url,
                    method: "GET",
                    dataType: "json",
                    queue: true,
                    success: function(data) {
                      if (typeof obj2.options.onbeforeload == "function") {
                        var ret2 = obj2.options.onbeforeload(el, data);
                        if (ret2) {
                          data = ret2;
                        }
                      }
                      Component.setElements(el, data);
                      if (typeof obj2.options.onload == "function") {
                        obj2.options.onload(el, data);
                      }
                    }
                  });
                };
                obj2.save = function() {
                  var test = obj2.validate();
                  if (test) {
                    obj2.options.onerror(el, test);
                  } else {
                    var data = Component.getElements(el, true);
                    if (typeof obj2.options.onbeforesave == "function") {
                      var data = obj2.options.onbeforesave(el, data);
                      if (data === false) {
                        return;
                      }
                    }
                    ajax({
                      url: obj2.options.url,
                      method: "POST",
                      dataType: "json",
                      data,
                      success: function(result) {
                        if (typeof obj2.options.onsave == "function") {
                          obj2.options.onsave(el, data, result);
                        }
                      }
                    });
                  }
                };
                obj2.remove = function() {
                  if (typeof obj2.options.onbeforeremove == "function") {
                    var ret2 = obj2.options.onbeforeremove(el, obj2);
                    if (ret2 === false) {
                      return false;
                    }
                  }
                  ajax({
                    url: obj2.options.url,
                    method: "DELETE",
                    dataType: "json",
                    success: function(result) {
                      if (typeof obj2.options.onremove == "function") {
                        obj2.options.onremove(el, obj2, result);
                      }
                      obj2.reset();
                    }
                  });
                };
                var addError = function(element) {
                  element.classList.add("error");
                  if (obj2.options.submitButton) {
                    obj2.options.submitButton.setAttribute("disabled", true);
                  }
                  var error = element.getAttribute("data-error") || "There is an error in the form";
                  element.setAttribute("title", error);
                  return error;
                };
                var delError = function(element) {
                  var error = false;
                  element.classList.remove("error");
                  element.removeAttribute("title");
                  var elements = el.querySelectorAll("input, select, textarea, div[name]");
                  for (var i2 = 0; i2 < elements.length; i2++) {
                    if (elements[i2].getAttribute("data-validation")) {
                      if (elements[i2].classList.contains("error")) {
                        error = true;
                      }
                    }
                  }
                  if (obj2.options.submitButton) {
                    if (error) {
                      obj2.options.submitButton.setAttribute("disabled", true);
                    } else {
                      obj2.options.submitButton.removeAttribute("disabled");
                    }
                  }
                };
                obj2.validateElement = function(element) {
                  var test = false;
                  var value = Component.getValue(element);
                  var validation = element.getAttribute("data-validation");
                  if (typeof obj2.options.validations[validation] == "function" && !obj2.options.validations[validation](value, element)) {
                    test = addError(element);
                  } else {
                    if (element.classList.contains("error")) {
                      delError(element);
                    }
                  }
                  return test;
                };
                obj2.reset = function() {
                  var name = null;
                  var elements = el.querySelectorAll("input, select, textarea, div[name]");
                  for (var i2 = 0; i2 < elements.length; i2++) {
                    if (name = elements[i2].getAttribute("name")) {
                      if (elements[i2].type == "checkbox" || elements[i2].type == "radio") {
                        elements[i2].checked = false;
                      } else {
                        if (typeof elements[i2].val == "function") {
                          elements[i2].val("");
                        } else {
                          elements[i2].value = "";
                        }
                      }
                    }
                  }
                };
                obj2.validate = function() {
                  var test = [];
                  var elements = el.querySelectorAll("input, select, textarea, div[name]");
                  for (var i2 = 0; i2 < elements.length; i2++) {
                    if (elements[i2].getAttribute("data-validation")) {
                      var res2 = obj2.validateElement(elements[i2]);
                      if (res2) {
                        test.push(res2);
                      }
                    }
                  }
                  if (test.length > 0) {
                    return test.join("<br>");
                  } else {
                    return false;
                  }
                };
                obj2.getError = function() {
                  return obj2.validation() ? true : false;
                };
                obj2.setHash = function() {
                  return obj2.getHash(Component.getElements(el));
                };
                obj2.getHash = function(str) {
                  var hash = 0, i2, chr;
                  if (str.length === 0) {
                    return hash;
                  } else {
                    for (i2 = 0; i2 < str.length; i2++) {
                      chr = str.charCodeAt(i2);
                      hash = (hash << 5) - hash + chr;
                      hash |= 0;
                    }
                  }
                  return hash;
                };
                obj2.isChanged = function() {
                  var hash = obj2.setHash();
                  return obj2.options.currentHash != hash;
                };
                obj2.resetTracker = function() {
                  obj2.options.currentHash = obj2.setHash();
                  obj2.options.ignore = false;
                };
                obj2.setIgnore = function(ignoreFlag) {
                  obj2.options.ignore = ignoreFlag ? true : false;
                };
                setTimeout(function() {
                  obj2.options.currentHash = obj2.setHash();
                }, 1e3);
                el.addEventListener("keyup", function(e) {
                  if (e.target.getAttribute("data-validation")) {
                    obj2.validateElement(e.target);
                  }
                });
                if (!Component.hasEvents) {
                  window.addEventListener("beforeunload", function(e) {
                    if (obj2.isChanged() && obj2.options.ignore == false) {
                      var confirmationMessage = obj2.options.message ? obj2.options.message : "o/";
                      if (confirmationMessage) {
                        if (typeof e == "undefined") {
                          e = window.event;
                        }
                        if (e) {
                          e.returnValue = confirmationMessage;
                        }
                        return confirmationMessage;
                      } else {
                        return void 0;
                      }
                    }
                  });
                  Component.hasEvents = true;
                }
                el.form = obj2;
                return obj2;
              });
              Component.getValue = function(element) {
                var value = null;
                if (element.type == "checkbox") {
                  if (element.checked == true) {
                    value = element.value || true;
                  }
                } else if (element.type == "radio") {
                  if (element.checked == true) {
                    value = element.value;
                  }
                } else if (element.type == "file") {
                  value = element.files;
                } else if (element.tagName == "select" && element.multiple == true) {
                  value = [];
                  var options = element.querySelectorAll("options[selected]");
                  for (var j = 0; j < options.length; j++) {
                    value.push(options[j].value);
                  }
                } else if (typeof element.val == "function") {
                  value = element.val();
                } else {
                  value = element.value || "";
                }
                return value;
              };
              Component.getElements = function(el, asArray) {
                var data = {};
                var name = null;
                var elements = el.querySelectorAll("input, select, textarea, div[name]");
                for (var i2 = 0; i2 < elements.length; i2++) {
                  if (name = elements[i2].getAttribute("name")) {
                    data[name] = Component.getValue(elements[i2]) || "";
                  }
                }
                return asArray == true ? data : JSON.stringify(data);
              };
              Component.setElements = function(el, data) {
                var name = null;
                var value = null;
                var elements = el.querySelectorAll("input, select, textarea, div[name]");
                for (var i2 = 0; i2 < elements.length; i2++) {
                  var type = elements[i2].getAttribute("type");
                  if (name = elements[i2].getAttribute("name")) {
                    name = name.replace(new RegExp(/\[(.*?)\]/ig), ".$1");
                    value = null;
                    if (name.match(/\./)) {
                      var tmp = Path.call(data, name) || "";
                      if (typeof tmp !== "undefined") {
                        value = tmp;
                      }
                    } else {
                      if (typeof data[name] !== "undefined") {
                        value = data[name];
                      }
                    }
                    if (value !== null) {
                      if (type == "checkbox" || type == "radio") {
                        elements[i2].checked = value ? true : false;
                      } else if (type == "file") {
                      } else {
                        if (typeof elements[i2].val == "function") {
                          elements[i2].val(value);
                        } else {
                          elements[i2].value = value;
                        }
                      }
                    }
                  }
                }
              };
              return Component;
            }
            var plugins_form = Form();
            ;
            function Modal() {
              var Events2 = function() {
                var tracker = null;
                var keyDown = function(e) {
                  if (e.which == 27) {
                    var modals = document.querySelectorAll(".jmodal");
                    for (var i2 = 0; i2 < modals.length; i2++) {
                      modals[i2].parentNode.modal.close();
                    }
                  }
                };
                var mouseUp = function(e) {
                  let element = e.composedPath();
                  var item = helpers2.findElement(element[0], "jmodal");
                  if (item) {
                    var rect = item.getBoundingClientRect();
                    if (e.changedTouches && e.changedTouches[0]) {
                      var x2 = e.changedTouches[0].clientX;
                      var y2 = e.changedTouches[0].clientY;
                    } else {
                      var x2 = e.clientX;
                      var y2 = e.clientY;
                    }
                    if (rect.width - (x2 - rect.left) < 50 && y2 - rect.top < 50) {
                      item.parentNode.modal.close();
                    }
                  }
                  if (tracker) {
                    tracker.element.style.cursor = "auto";
                    tracker = null;
                  }
                };
                var mouseDown = function(e) {
                  let element = e.composedPath();
                  var item = helpers2.findElement(element[0], "jmodal");
                  if (item) {
                    var rect = item.getBoundingClientRect();
                    if (e.changedTouches && e.changedTouches[0]) {
                      var x2 = e.changedTouches[0].clientX;
                      var y2 = e.changedTouches[0].clientY;
                    } else {
                      var x2 = e.clientX;
                      var y2 = e.clientY;
                    }
                    if (rect.width - (x2 - rect.left) < 50 && y2 - rect.top < 50) {
                    } else {
                      if (y2 - rect.top < 50) {
                        if (document.selection) {
                          document.selection.empty();
                        } else if (window.getSelection) {
                          window.getSelection().removeAllRanges();
                        }
                        tracker = {
                          left: rect.left,
                          top: rect.top,
                          x: e.clientX,
                          y: e.clientY,
                          width: rect.width,
                          height: rect.height,
                          element: item
                        };
                      }
                    }
                  }
                };
                var mouseMove = function(e) {
                  if (tracker) {
                    e = e || window.event;
                    if (e.buttons) {
                      var mouseButton = e.buttons;
                    } else if (e.button) {
                      var mouseButton = e.button;
                    } else {
                      var mouseButton = e.which;
                    }
                    if (mouseButton) {
                      tracker.element.style.top = tracker.top + (e.clientY - tracker.y) + tracker.height / 2 + "px";
                      tracker.element.style.left = tracker.left + (e.clientX - tracker.x) + tracker.width / 2 + "px";
                      tracker.element.style.cursor = "move";
                    } else {
                      tracker.element.style.cursor = "auto";
                    }
                  }
                };
                document.addEventListener("keydown", keyDown);
                document.addEventListener("mouseup", mouseUp);
                document.addEventListener("mousedown", mouseDown);
                document.addEventListener("mousemove", mouseMove);
              };
              var Component = (function(el, options) {
                var obj2 = {};
                obj2.options = {};
                var defaults = {
                  url: null,
                  onopen: null,
                  onclose: null,
                  onload: null,
                  closed: false,
                  width: null,
                  height: null,
                  title: null,
                  padding: null,
                  backdrop: true,
                  icon: null
                };
                for (var property in defaults) {
                  if (options && options.hasOwnProperty(property)) {
                    obj2.options[property] = options[property];
                  } else {
                    obj2.options[property] = defaults[property];
                  }
                }
                if (!obj2.options.title && el.getAttribute("title")) {
                  obj2.options.title = el.getAttribute("title");
                }
                var temp = document.createElement("div");
                while (el.children[0]) {
                  temp.appendChild(el.children[0]);
                }
                obj2.title = document.createElement("div");
                obj2.title.className = "jmodal_title";
                if (obj2.options.icon) {
                  obj2.title.setAttribute("data-icon", obj2.options.icon);
                }
                obj2.content = document.createElement("div");
                obj2.content.className = "jmodal_content";
                obj2.content.innerHTML = el.innerHTML;
                while (temp.children[0]) {
                  obj2.content.appendChild(temp.children[0]);
                }
                obj2.container = document.createElement("div");
                obj2.container.className = "jmodal";
                obj2.container.appendChild(obj2.title);
                obj2.container.appendChild(obj2.content);
                if (obj2.options.padding) {
                  obj2.content.style.padding = obj2.options.padding;
                }
                if (obj2.options.width) {
                  obj2.container.style.width = obj2.options.width;
                }
                if (obj2.options.height) {
                  obj2.container.style.height = obj2.options.height;
                }
                if (obj2.options.title) {
                  var title = document.createElement("h4");
                  title.innerText = obj2.options.title;
                  obj2.title.appendChild(title);
                }
                el.innerHTML = "";
                el.style.display = "none";
                el.appendChild(obj2.container);
                if (obj2.options.backdrop) {
                  var backdrop = document.createElement("div");
                  backdrop.className = "jmodal_backdrop";
                  backdrop.onclick = function() {
                    obj2.close();
                  };
                  el.appendChild(backdrop);
                }
                obj2.open = function() {
                  el.style.display = "block";
                  var rect = obj2.container.getBoundingClientRect();
                  if (helpers2.getWindowWidth() < rect.width) {
                    obj2.container.style.top = "";
                    obj2.container.style.left = "";
                    obj2.container.classList.add("jmodal_fullscreen");
                    animation.slideBottom(obj2.container, 1);
                  } else {
                    if (obj2.options.backdrop) {
                      backdrop.style.display = "block";
                    }
                  }
                  if (typeof obj2.options.onopen == "function") {
                    obj2.options.onopen(el, obj2);
                  }
                };
                obj2.resetPosition = function() {
                  obj2.container.style.top = "";
                  obj2.container.style.left = "";
                };
                obj2.isOpen = function() {
                  return el.style.display != "none" ? true : false;
                };
                obj2.close = function() {
                  if (obj2.isOpen()) {
                    el.style.display = "none";
                    if (obj2.options.backdrop) {
                      backdrop.style.display = "";
                    }
                    obj2.container.classList.remove("jmodal_fullscreen");
                    if (typeof obj2.options.onclose == "function") {
                      obj2.options.onclose(el, obj2);
                    }
                  }
                };
                if (obj2.options.url) {
                  ajax({
                    url: obj2.options.url,
                    method: "GET",
                    dataType: "text/html",
                    success: function(data) {
                      obj2.content.innerHTML = data;
                      if (!obj2.options.closed) {
                        obj2.open();
                      }
                      if (typeof obj2.options.onload === "function") {
                        obj2.options.onload(obj2);
                      }
                    }
                  });
                } else {
                  if (!obj2.options.closed) {
                    obj2.open();
                  }
                  if (typeof obj2.options.onload === "function") {
                    obj2.options.onload(obj2);
                  }
                }
                el.modal = obj2;
                Events2();
                Events2 = function() {
                };
                return obj2;
              });
              return Component;
            }
            var modal = Modal();
            ;
            function Notification() {
              var Component = function(options) {
                var obj2 = {};
                obj2.options = {};
                var defaults = {
                  icon: null,
                  name: "Notification",
                  date: null,
                  error: null,
                  title: null,
                  message: null,
                  timeout: 4e3,
                  autoHide: true,
                  closeable: true
                };
                for (var property in defaults) {
                  if (options && options.hasOwnProperty(property)) {
                    obj2.options[property] = options[property];
                  } else {
                    obj2.options[property] = defaults[property];
                  }
                }
                var notification2 = document.createElement("div");
                notification2.className = "jnotification";
                if (obj2.options.error) {
                  notification2.classList.add("jnotification-error");
                }
                var notificationContainer = document.createElement("div");
                notificationContainer.className = "jnotification-container";
                notification2.appendChild(notificationContainer);
                var notificationHeader = document.createElement("div");
                notificationHeader.className = "jnotification-header";
                notificationContainer.appendChild(notificationHeader);
                var notificationImage = document.createElement("div");
                notificationImage.className = "jnotification-image";
                notificationHeader.appendChild(notificationImage);
                if (obj2.options.icon) {
                  var notificationIcon = document.createElement("img");
                  notificationIcon.src = obj2.options.icon;
                  notificationImage.appendChild(notificationIcon);
                }
                var notificationName = document.createElement("div");
                notificationName.className = "jnotification-name";
                notificationName.innerHTML = obj2.options.name;
                notificationHeader.appendChild(notificationName);
                if (obj2.options.closeable == true) {
                  var notificationClose = document.createElement("div");
                  notificationClose.className = "jnotification-close";
                  notificationClose.onclick = function() {
                    obj2.hide();
                  };
                  notificationHeader.appendChild(notificationClose);
                }
                var notificationDate = document.createElement("div");
                notificationDate.className = "jnotification-date";
                notificationHeader.appendChild(notificationDate);
                var notificationContent = document.createElement("div");
                notificationContent.className = "jnotification-content";
                notificationContainer.appendChild(notificationContent);
                if (obj2.options.title) {
                  var notificationTitle = document.createElement("div");
                  notificationTitle.className = "jnotification-title";
                  notificationTitle.innerHTML = obj2.options.title;
                  notificationContent.appendChild(notificationTitle);
                }
                var notificationMessage = document.createElement("div");
                notificationMessage.className = "jnotification-message";
                notificationMessage.innerHTML = obj2.options.message;
                notificationContent.appendChild(notificationMessage);
                obj2.show = function() {
                  document.body.appendChild(notification2);
                  if (helpers2.getWindowWidth() > 800) {
                    animation.fadeIn(notification2);
                  } else {
                    animation.slideTop(notification2, 1);
                  }
                };
                obj2.hide = function() {
                  if (helpers2.getWindowWidth() > 800) {
                    animation.fadeOut(notification2, function() {
                      if (notification2.parentNode) {
                        notification2.parentNode.removeChild(notification2);
                        if (notificationTimeout) {
                          clearTimeout(notificationTimeout);
                        }
                      }
                    });
                  } else {
                    animation.slideTop(notification2, 0, function() {
                      if (notification2.parentNode) {
                        notification2.parentNode.removeChild(notification2);
                        if (notificationTimeout) {
                          clearTimeout(notificationTimeout);
                        }
                      }
                    });
                  }
                };
                obj2.show();
                if (obj2.options.autoHide == true) {
                  var notificationTimeout = setTimeout(function() {
                    obj2.hide();
                  }, obj2.options.timeout);
                }
                if (helpers2.getWindowWidth() < 800) {
                  notification2.addEventListener("swipeup", function(e) {
                    obj2.hide();
                    e.preventDefault();
                    e.stopPropagation();
                  });
                }
                return obj2;
              };
              Component.isVisible = function() {
                var j = document.querySelector(".jnotification");
                return j && j.parentNode ? true : false;
              };
              return Component;
            }
            var notification = Notification();
            ;
            function Progressbar(el, options) {
              var obj2 = {};
              obj2.options = {};
              var defaults = {
                value: 0,
                onchange: null,
                width: null
              };
              for (var property in defaults) {
                if (options && options.hasOwnProperty(property)) {
                  obj2.options[property] = options[property];
                } else {
                  obj2.options[property] = defaults[property];
                }
              }
              el.classList.add("jprogressbar");
              el.setAttribute("tabindex", 1);
              el.setAttribute("data-value", obj2.options.value);
              var bar = document.createElement("div");
              bar.style.width = obj2.options.value + "%";
              bar.style.color = "#fff";
              el.appendChild(bar);
              if (obj2.options.width) {
                el.style.width = obj2.options.width;
              }
              obj2.setValue = function(value) {
                value = parseInt(value);
                obj2.options.value = value;
                bar.style.width = value + "%";
                el.setAttribute("data-value", value + "%");
                if (value < 6) {
                  el.style.color = "#000";
                } else {
                  el.style.color = "#fff";
                }
                obj2.options.value = value;
                if (typeof obj2.options.onchange == "function") {
                  obj2.options.onchange(el, value);
                }
                if (el.value != obj2.options.value) {
                  el.value = obj2.options.value;
                  if (typeof el.oninput == "function") {
                    el.oninput({
                      type: "input",
                      target: el,
                      value: el.value
                    });
                  }
                }
              };
              obj2.getValue = function() {
                return obj2.options.value;
              };
              var action = function(e) {
                if (e.which) {
                  var rect = el.getBoundingClientRect();
                  if (e.changedTouches && e.changedTouches[0]) {
                    var x2 = e.changedTouches[0].clientX;
                    var y2 = e.changedTouches[0].clientY;
                  } else {
                    var x2 = e.clientX;
                    var y2 = e.clientY;
                  }
                  obj2.setValue(Math.round((x2 - rect.left) / rect.width * 100));
                }
              };
              if ("touchstart" in document.documentElement === true) {
                el.addEventListener("touchstart", action);
                el.addEventListener("touchend", action);
              } else {
                el.addEventListener("mousedown", action);
                el.addEventListener("mousemove", action);
              }
              el.change = obj2.setValue;
              el.val = function(val) {
                if (val === void 0) {
                  return obj2.getValue();
                } else {
                  obj2.setValue(val);
                }
              };
              el.progressbar = obj2;
              return obj2;
            }
            ;
            function Rating(el, options) {
              if (el.rating) {
                return el.rating.setOptions(options, true);
              }
              var obj2 = {};
              obj2.options = {};
              obj2.setOptions = function(options2, reset) {
                var defaults = {
                  number: 5,
                  value: 0,
                  tooltip: ["Very bad", "Bad", "Average", "Good", "Very good"],
                  onchange: null
                };
                for (var property in defaults) {
                  if (options2 && options2.hasOwnProperty(property)) {
                    obj2.options[property] = options2[property];
                  } else {
                    if (typeof obj2.options[property] == "undefined" || reset === true) {
                      obj2.options[property] = defaults[property];
                    }
                  }
                }
                el.innerHTML = "";
                for (var i2 = 0; i2 < obj2.options.number; i2++) {
                  var div = document.createElement("div");
                  div.setAttribute("data-index", i2 + 1);
                  div.setAttribute("title", obj2.options.tooltip[i2]);
                  el.appendChild(div);
                }
                if (obj2.options.value) {
                  for (var i2 = 0; i2 < obj2.options.number; i2++) {
                    if (i2 < obj2.options.value) {
                      el.children[i2].classList.add("jrating-selected");
                    }
                  }
                }
                return obj2;
              };
              obj2.setValue = function(index) {
                for (var i2 = 0; i2 < obj2.options.number; i2++) {
                  if (i2 < index) {
                    el.children[i2].classList.add("jrating-selected");
                  } else {
                    el.children[i2].classList.remove("jrating-over");
                    el.children[i2].classList.remove("jrating-selected");
                  }
                }
                obj2.options.value = index;
                if (typeof obj2.options.onchange == "function") {
                  obj2.options.onchange(el, index);
                }
                if (el.value != obj2.options.value) {
                  el.value = obj2.options.value;
                  if (typeof el.oninput == "function") {
                    el.oninput({
                      type: "input",
                      target: el,
                      value: el.value
                    });
                  }
                }
              };
              obj2.getValue = function() {
                return obj2.options.value;
              };
              var init = function() {
                obj2.setOptions(options);
                el.classList.add("jrating");
                el.addEventListener("click", function(e) {
                  var index = e.target.getAttribute("data-index");
                  if (index != void 0) {
                    if (index == obj2.options.value) {
                      obj2.setValue(0);
                    } else {
                      obj2.setValue(index);
                    }
                  }
                });
                el.addEventListener("mouseover", function(e) {
                  var index = e.target.getAttribute("data-index");
                  for (var i2 = 0; i2 < obj2.options.number; i2++) {
                    if (i2 < index) {
                      el.children[i2].classList.add("jrating-over");
                    } else {
                      el.children[i2].classList.remove("jrating-over");
                    }
                  }
                });
                el.addEventListener("mouseout", function(e) {
                  for (var i2 = 0; i2 < obj2.options.number; i2++) {
                    el.children[i2].classList.remove("jrating-over");
                  }
                });
                el.change = obj2.setValue;
                el.val = function(val) {
                  if (val === void 0) {
                    return obj2.getValue();
                  } else {
                    obj2.setValue(val);
                  }
                };
                el.rating = obj2;
              };
              init();
              return obj2;
            }
            ;
            function Search(el, options) {
              if (el.search) {
                return el.search;
              }
              var index = null;
              var select = function(e) {
                if (e.target.classList.contains("jsearch_item")) {
                  var element = e.target;
                } else {
                  var element = e.target.parentNode;
                }
                obj2.selectIndex(element);
                e.preventDefault();
              };
              var createList = function(data) {
                if (typeof obj2.options.onsearch == "function") {
                  var ret2 = obj2.options.onsearch(obj2, data);
                  if (ret2) {
                    data = ret2;
                  }
                }
                container.innerHTML = "";
                if (!data.length) {
                  el.style.display = "";
                } else {
                  el.style.display = "block";
                  var len = data.length < 11 ? data.length : 10;
                  for (var i2 = 0; i2 < len; i2++) {
                    if (typeof data[i2] == "string") {
                      var text = data[i2];
                      var value = data[i2];
                    } else {
                      var text = data[i2].text;
                      if (!text && data[i2].name) {
                        text = data[i2].name;
                      }
                      var value = data[i2].value;
                      if (!value && data[i2].id) {
                        value = data[i2].id;
                      }
                    }
                    var div = document.createElement("div");
                    div.setAttribute("data-value", value);
                    div.setAttribute("data-text", text);
                    div.className = "jsearch_item";
                    if (data[i2].id) {
                      div.setAttribute("id", data[i2].id);
                    }
                    if (obj2.options.forceSelect && i2 == 0) {
                      div.classList.add("selected");
                    }
                    var img = document.createElement("img");
                    if (data[i2].image) {
                      img.src = data[i2].image;
                    } else {
                      img.style.display = "none";
                    }
                    div.appendChild(img);
                    var item = document.createElement("div");
                    item.innerHTML = text;
                    div.appendChild(item);
                    container.appendChild(div);
                  }
                }
              };
              var execute2 = function(str) {
                if (str != obj2.terms) {
                  obj2.terms = str;
                  if (obj2.options.forceSelect) {
                    index = 0;
                  } else {
                    index = null;
                  }
                  if (Array.isArray(obj2.options.data)) {
                    var test = function(o) {
                      if (typeof o == "string") {
                        if (("" + o).toLowerCase().search(str.toLowerCase()) >= 0) {
                          return true;
                        }
                      } else {
                        for (var key in o) {
                          var value = o[key];
                          if (("" + value).toLowerCase().search(str.toLowerCase()) >= 0) {
                            return true;
                          }
                        }
                      }
                      return false;
                    };
                    var results = obj2.options.data.filter(function(item) {
                      return test(item);
                    });
                    createList(results);
                  } else {
                    ajax({
                      url: obj2.options.data + str,
                      method: "GET",
                      dataType: "json",
                      success: function(data) {
                        createList(data);
                      }
                    });
                  }
                }
              };
              var timer = null;
              var obj2 = function(str) {
                if (timer) {
                  clearTimeout(timer);
                }
                timer = setTimeout(function() {
                  execute2(str);
                }, 500);
              };
              if (options.forceSelect === null) {
                options.forceSelect = true;
              }
              obj2.options = {
                data: options.data || null,
                input: options.input || null,
                searchByNode: options.searchByNode || null,
                onselect: options.onselect || null,
                forceSelect: options.forceSelect,
                onsearch: options.onsearch || null,
                onbeforesearch: options.onbeforesearch || null
              };
              obj2.selectIndex = function(item) {
                var id = item.getAttribute("id");
                var text = item.getAttribute("data-text");
                var value = item.getAttribute("data-value");
                var image = item.children[0].src || "";
                if (typeof obj2.options.onselect == "function") {
                  obj2.options.onselect(obj2, text, value, id, image);
                }
                obj2.close();
              };
              obj2.open = function() {
                el.style.display = "block";
              };
              obj2.close = function() {
                if (timer) {
                  clearTimeout(timer);
                }
                obj2.terms = "";
                container.innerHTML = "";
                el.style.display = "";
              };
              obj2.isOpened = function() {
                return el.style.display ? true : false;
              };
              obj2.keydown = function(e) {
                if (obj2.isOpened()) {
                  if (e.key == "Enter") {
                    if (index !== null && container.children[index]) {
                      obj2.selectIndex(container.children[index]);
                      e.preventDefault();
                    } else {
                      obj2.close();
                    }
                  } else if (e.key === "ArrowUp") {
                    if (index !== null && container.children[0]) {
                      container.children[index].classList.remove("selected");
                      if (!obj2.options.forceSelect && index === 0) {
                        index = null;
                      } else {
                        index = Math.max(0, index - 1);
                        container.children[index].classList.add("selected");
                      }
                    }
                    e.preventDefault();
                  } else if (e.key === "ArrowDown") {
                    if (index == null) {
                      index = -1;
                    } else {
                      container.children[index].classList.remove("selected");
                    }
                    if (index < 9 && container.children[index + 1]) {
                      index++;
                    }
                    container.children[index].classList.add("selected");
                    e.preventDefault();
                  }
                }
              };
              obj2.keyup = function(e) {
                if (!obj2.options.searchByNode && obj2.options.input) {
                  if (obj2.options.input.tagName === "DIV") {
                    var terms = obj2.options.input.innerText;
                  } else {
                    var terms = obj2.options.input.value;
                  }
                } else {
                  var node = helpers2.getNode();
                  if (node) {
                    var terms = node.innerText;
                  }
                }
                if (typeof obj2.options.onbeforesearch == "function") {
                  var ret2 = obj2.options.onbeforesearch(obj2, terms);
                  if (ret2) {
                    terms = ret2;
                  } else {
                    if (ret2 === false) {
                      return;
                    }
                  }
                }
                obj2(terms);
              };
              obj2.blur = function(e) {
                obj2.close();
              };
              if (obj2.options.input) {
                obj2.options.input.addEventListener("keyup", obj2.keyup);
                obj2.options.input.addEventListener("keydown", obj2.keydown);
                obj2.options.input.addEventListener("blur", obj2.blur);
              }
              var container = document.createElement("div");
              container.classList.add("jsearch_container");
              container.onmousedown = select;
              el.appendChild(container);
              el.classList.add("jsearch");
              el.search = obj2;
              return obj2;
            }
            ;
            function Slider(el, options) {
              var obj2 = {};
              obj2.options = {};
              obj2.currentImage = null;
              if (options) {
                obj2.options = options;
              }
              el.setAttribute("tabindex", "900");
              obj2.options.items = [];
              if (!el.classList.contains("jslider")) {
                el.classList.add("jslider");
                el.classList.add("unselectable");
                if (obj2.options.height) {
                  el.style.minHeight = parseInt(obj2.options.height) + "px";
                }
                if (obj2.options.width) {
                  el.style.width = parseInt(obj2.options.width) + "px";
                }
                if (obj2.options.grid) {
                  el.classList.add("jslider-grid");
                  var number = el.children.length;
                  if (number > 4) {
                    el.setAttribute("data-total", number - 4);
                  }
                  el.setAttribute("data-number", number > 4 ? 4 : number);
                }
                var counter = document.createElement("div");
                counter.classList.add("jslider-counter");
                if (el.children.length > 0) {
                  for (var i2 = 0; i2 < el.children.length; i2++) {
                    obj2.options.items.push(el.children[i2]);
                    var item = document.createElement("div");
                    item.onclick = function() {
                      var index = Array.prototype.slice.call(counter.children).indexOf(this);
                      obj2.show(obj2.currentImage = obj2.options.items[index]);
                    };
                    counter.appendChild(item);
                  }
                }
                var caption = document.createElement("div");
                caption.className = "jslider-caption";
                var controls = document.createElement("div");
                var close = document.createElement("div");
                close.className = "jslider-close";
                close.innerHTML = "";
                close.onclick = function() {
                  obj2.close();
                };
                controls.appendChild(caption);
                controls.appendChild(close);
              }
              obj2.updateCounter = function(index) {
                for (var i3 = 0; i3 < counter.children.length; i3++) {
                  if (counter.children[i3].classList.contains("jslider-counter-focus")) {
                    counter.children[i3].classList.remove("jslider-counter-focus");
                    break;
                  }
                }
                counter.children[index].classList.add("jslider-counter-focus");
              };
              obj2.show = function(target) {
                if (!target) {
                  var target = el.children[0];
                }
                el.classList.add("jslider-focus");
                el.classList.remove("jslider-grid");
                el.appendChild(controls);
                el.appendChild(counter);
                var index = obj2.options.items.indexOf(target);
                obj2.updateCounter(index);
                for (var i3 = 0; i3 < el.children.length; i3++) {
                  el.children[i3].style.display = "";
                }
                target.style.display = "block";
                if (target.previousElementSibling) {
                  el.classList.add("jslider-left");
                } else {
                  el.classList.remove("jslider-left");
                }
                if (target.nextElementSibling && target.nextElementSibling.tagName == "IMG") {
                  el.classList.add("jslider-right");
                } else {
                  el.classList.remove("jslider-right");
                }
                obj2.currentImage = target;
                if (obj2.currentImage.offsetHeight > obj2.currentImage.offsetWidth) {
                  obj2.currentImage.classList.add("jslider-vertical");
                }
                controls.children[0].innerText = obj2.currentImage.getAttribute("title");
              };
              obj2.open = function() {
                obj2.show();
                if (typeof obj2.options.onopen == "function") {
                  obj2.options.onopen(el);
                }
              };
              obj2.close = function() {
                el.classList.remove("jslider-focus");
                el.classList.remove("jslider-left");
                el.classList.remove("jslider-right");
                if (obj2.options.grid) {
                  el.classList.add("jslider-grid");
                }
                for (var i3 = 0; i3 < el.children.length; i3++) {
                  el.children[i3].style.display = "";
                }
                counter.remove();
                controls.remove();
                obj2.currentImage = null;
                if (typeof obj2.options.onclose == "function") {
                  obj2.options.onclose(el);
                }
              };
              obj2.reset = function() {
                el.innerHTML = "";
              };
              obj2.next = function() {
                var nextImage = obj2.currentImage.nextElementSibling;
                if (nextImage && nextImage.tagName === "IMG") {
                  obj2.show(obj2.currentImage.nextElementSibling);
                }
              };
              obj2.prev = function() {
                if (obj2.currentImage.previousElementSibling) {
                  obj2.show(obj2.currentImage.previousElementSibling);
                }
              };
              var mouseUp = function(e) {
                if (e.target.tagName == "IMG") {
                  obj2.show(e.target);
                } else if (!e.target.classList.contains("jslider-close") && !(e.target.parentNode.classList.contains("jslider-counter") || e.target.classList.contains("jslider-counter"))) {
                  var offsetX = e.offsetX || e.changedTouches[0].clientX;
                  if (e.target.clientWidth - offsetX < 40) {
                    obj2.next();
                  } else if (offsetX < 40) {
                    obj2.prev();
                  }
                }
              };
              if ("ontouchend" in document.documentElement === true) {
                el.addEventListener("touchend", mouseUp);
              } else {
                el.addEventListener("mouseup", mouseUp);
              }
              el.addEventListener("swipeleft", function(e) {
                obj2.next();
                e.preventDefault();
                e.stopPropagation();
              });
              el.addEventListener("swiperight", function(e) {
                obj2.prev();
                e.preventDefault();
                e.stopPropagation();
              });
              el.addEventListener("keydown", function(e) {
                if (e.which == 27) {
                  obj2.close();
                }
              });
              el.slider = obj2;
              return obj2;
            }
            ;
            function Tags(el, options) {
              if (el.tags) {
                return el.tags.setOptions(options, true);
              }
              var obj2 = { type: "tags" };
              obj2.options = {};
              var limit = function() {
                return obj2.options.limit && el.children.length >= obj2.options.limit ? true : false;
              };
              var search2 = null;
              var searchContainer = null;
              obj2.setOptions = function(options2, reset) {
                var defaults = {
                  value: "",
                  limit: null,
                  search: null,
                  placeholder: null,
                  validation: null,
                  onbeforepaste: null,
                  onbeforechange: null,
                  onremoveitem: null,
                  onlimit: null,
                  onchange: null,
                  onfocus: null,
                  onblur: null,
                  onload: null
                };
                for (var property in defaults) {
                  if (options2 && options2.hasOwnProperty(property)) {
                    obj2.options[property] = options2[property];
                  } else {
                    if (typeof obj2.options[property] == "undefined" || reset === true) {
                      obj2.options[property] = defaults[property];
                    }
                  }
                }
                if (obj2.options.placeholder) {
                  el.setAttribute("data-placeholder", obj2.options.placeholder);
                } else {
                  el.removeAttribute("data-placeholder");
                }
                el.placeholder = obj2.options.placeholder;
                obj2.setValue(obj2.options.value);
                filter2();
                if (obj2.options.search) {
                  if (!searchContainer) {
                    searchContainer = document.createElement("div");
                    el.parentNode.insertBefore(searchContainer, el.nextSibling);
                    search2 = Search(searchContainer, {
                      data: obj2.options.search,
                      onselect: function(a, b, c) {
                        obj2.selectIndex(b, c);
                      }
                    });
                  }
                } else {
                  if (searchContainer) {
                    search2 = null;
                    searchContainer.remove();
                    searchContainer = null;
                  }
                }
                return obj2;
              };
              obj2.add = function(value, focus) {
                if (typeof obj2.options.onbeforechange == "function") {
                  var ret2 = obj2.options.onbeforechange(el, obj2, obj2.options.value, value);
                  if (ret2 === false) {
                    return false;
                  } else {
                    if (ret2 != null) {
                      value = ret2;
                    }
                  }
                }
                if (search2) {
                  search2.close();
                }
                if (limit()) {
                  if (typeof obj2.options.onlimit == "function") {
                    obj2.options.onlimit(obj2, obj2.options.limit);
                  } else {
                    alert(dictionary.translate("You reach the limit number of entries") + " " + obj2.options.limit);
                  }
                } else {
                  var node = helpers2.getNode();
                  if (node && node.parentNode && node.parentNode.classList.contains("jtags") && node.nextSibling && !(node.nextSibling.innerText && node.nextSibling.innerText.trim())) {
                    div = node.nextSibling;
                  } else {
                    if (el.lastChild) {
                      if (!el.lastChild.innerText.trim()) {
                        el.removeChild(el.lastChild);
                      }
                    }
                    if (!value || typeof value == "string") {
                      var div = createElement(value, value, node);
                    } else {
                      for (var i2 = 0; i2 <= value.length; i2++) {
                        if (!limit()) {
                          if (!value[i2] || typeof value[i2] == "string") {
                            var t2 = value[i2] || "";
                            var v = null;
                          } else {
                            var t2 = value[i2].text;
                            var v = value[i2].value;
                          }
                          var div = createElement(t2, v);
                        }
                      }
                    }
                    change();
                  }
                  if (focus) {
                    setFocus(div);
                  }
                }
              };
              obj2.setLimit = function(limit2) {
                obj2.options.limit = limit2;
                var n = el.children.length - limit2;
                while (el.children.length > limit2) {
                  el.removeChild(el.lastChild);
                }
              };
              obj2.remove = function(node) {
                node.parentNode.removeChild(node);
                if (!el.children.length) {
                  obj2.add("", true);
                } else {
                  change();
                }
                if (typeof obj2.options.onremoveitem == "function") {
                  obj2.options.onremoveitem(el, obj2, node);
                }
              };
              obj2.getData = function() {
                var data = [];
                for (var i2 = 0; i2 < el.children.length; i2++) {
                  var text = el.children[i2].innerText.replace("\n", "");
                  var value = el.children[i2].getAttribute("data-value");
                  if (!value) {
                    value = text;
                  }
                  if (text || value) {
                    data.push({ text, value });
                  }
                }
                return data;
              };
              obj2.getValue = function(index) {
                var value = null;
                if (index != null) {
                  value = el.children[index].getAttribute("data-value");
                  if (!value) {
                    value = el.children[index].innerText.replace("\n", "");
                  }
                } else {
                  var data = [];
                  for (var i2 = 0; i2 < el.children.length; i2++) {
                    value = el.children[i2].innerText.replace("\n", "");
                    if (value) {
                      data.push(obj2.getValue(i2));
                    }
                  }
                  value = data.join(",");
                }
                return value;
              };
              obj2.setValue = function(mixed) {
                if (!mixed) {
                  obj2.reset();
                } else {
                  if (el.value != mixed) {
                    if (Array.isArray(mixed)) {
                      obj2.add(mixed);
                    } else {
                      var text = ("" + mixed).trim();
                      var data = extractTags(text);
                      el.innerHTML = "";
                      obj2.add(data);
                    }
                  }
                }
              };
              obj2.reset = function() {
                el.classList.add("jtags-empty");
                el.innerHTML = "<div></div>";
                change();
              };
              obj2.isValid = function() {
                var test = 0;
                for (var i2 = 0; i2 < el.children.length; i2++) {
                  if (el.children[i2].classList.contains("jtags_error")) {
                    test++;
                  }
                }
                return test == 0 ? true : false;
              };
              obj2.selectIndex = function(text, value) {
                var node = helpers2.getNode();
                if (node) {
                  node.innerText = text;
                  if (value) {
                    node.setAttribute("data-value", value);
                  }
                  node.classList.remove("jtags_error");
                  if (!limit()) {
                    obj2.add("", true);
                  }
                }
              };
              obj2.search = function(node) {
                var terms = node.innerText;
              };
              obj2.destroy = function() {
                el.removeEventListener("mouseup", tagsMouseUp);
                el.removeEventListener("keydown", tagsKeyDown);
                el.removeEventListener("keyup", tagsKeyUp);
                el.removeEventListener("paste", tagsPaste);
                el.removeEventListener("focus", tagsFocus);
                el.removeEventListener("blur", tagsBlur);
                el.parentNode.removeChild(el);
              };
              var setFocus = function(node) {
                if (el.children.length) {
                  var range = document.createRange();
                  var sel = window.getSelection();
                  if (!node) {
                    var node = el.childNodes[el.childNodes.length - 1];
                  }
                  range.setStart(node, node.length);
                  range.collapse(true);
                  sel.removeAllRanges();
                  sel.addRange(range);
                  el.scrollLeft = el.scrollWidth;
                }
              };
              var createElement = function(label, value, node) {
                var div = document.createElement("div");
                div.textContent = label ? label : "";
                if (value) {
                  div.setAttribute("data-value", value);
                }
                if (node && node.parentNode.classList.contains("jtags")) {
                  el.insertBefore(div, node.nextSibling);
                } else {
                  el.appendChild(div);
                }
                return div;
              };
              var change = function() {
                var value = obj2.getValue();
                if (value != obj2.options.value) {
                  obj2.options.value = value;
                  if (typeof obj2.options.onchange == "function") {
                    obj2.options.onchange(el, obj2, obj2.options.value);
                  }
                  if (el.value != obj2.options.value) {
                    el.value = obj2.options.value;
                    if (typeof el.oninput == "function") {
                      el.oninput({
                        type: "input",
                        target: el,
                        value: el.value
                      });
                    }
                  }
                }
                filter2();
              };
              var filter2 = function() {
                for (var i2 = 0; i2 < el.children.length; i2++) {
                  if (el.children[i2].tagName === "DIV") {
                    if (!obj2.getValue(i2)) {
                      el.children[i2].classList.remove("jtags_label");
                    } else {
                      el.children[i2].classList.add("jtags_label");
                      if (typeof obj2.options.validation == "function") {
                        if (obj2.getValue(i2)) {
                          if (!obj2.options.validation(el.children[i2], el.children[i2].innerText, el.children[i2].getAttribute("data-value"))) {
                            el.children[i2].classList.add("jtags_error");
                          } else {
                            el.children[i2].classList.remove("jtags_error");
                          }
                        } else {
                          el.children[i2].classList.remove("jtags_error");
                        }
                      } else {
                        el.children[i2].classList.remove("jtags_error");
                      }
                    }
                  }
                }
                isEmpty();
              };
              var isEmpty = function() {
                if (!el.innerText.trim()) {
                  if (!el.children.length || el.children[0].tagName === "BR") {
                    el.innerHTML = "";
                    setFocus(createElement());
                  }
                } else {
                  el.classList.remove("jtags-empty");
                }
              };
              var extractTags = function(text) {
                var data = [];
                var word = "";
                text = text.trim();
                if (text) {
                  for (var i2 = 0; i2 < text.length; i2++) {
                    if (text[i2] == "," || text[i2] == ";" || text[i2] == "\n") {
                      if (word) {
                        data.push(word.trim());
                        word = "";
                      }
                    } else {
                      word += text[i2];
                    }
                  }
                  if (word) {
                    data.push(word);
                  }
                }
                return data;
              };
              var anchorOffset = 0;
              var tagsKeyDown = function(e) {
                anchorOffset = window.getSelection().anchorOffset;
                isEmpty();
                if (e.key === "Tab" || e.key === ";" || e.key === ",") {
                  var n = window.getSelection().anchorOffset;
                  if (n > 1) {
                    if (limit()) {
                      if (typeof obj2.options.onlimit == "function") {
                        obj2.options.onlimit(obj2, obj2.options.limit);
                      }
                    } else {
                      obj2.add("", true);
                    }
                  }
                  e.preventDefault();
                } else if (e.key == "Enter") {
                  if (!search2 || !search2.isOpened()) {
                    var n = window.getSelection().anchorOffset;
                    if (n > 1) {
                      if (!limit()) {
                        obj2.add("", true);
                      }
                    }
                    e.preventDefault();
                  }
                } else if (e.key == "Backspace") {
                  if (el.children.length == 1 && window.getSelection().anchorOffset < 1) {
                    e.preventDefault();
                  }
                }
                if (search2) {
                  search2.keydown(e);
                }
                isEmpty();
              };
              var tagsKeyUp = function(e) {
                if (e.which == 39) {
                  var n = window.getSelection().anchorOffset;
                  if (n > 1 && n == anchorOffset) {
                    obj2.add("", true);
                  }
                } else if (e.which == 13 || e.which == 38 || e.which == 40) {
                  e.preventDefault();
                } else {
                  if (search2) {
                    search2.keyup(e);
                  }
                }
                filter2();
              };
              var tagsPaste = function(e) {
                if (e.clipboardData || e.originalEvent.clipboardData) {
                  var text = (e.originalEvent || e).clipboardData.getData("text/plain");
                } else if (window.clipboardData) {
                  var text = window.clipboardData.getData("Text");
                }
                var data = extractTags(text);
                if (typeof obj2.options.onbeforepaste == "function") {
                  var ret2 = obj2.options.onbeforepaste(el, obj2, data);
                  if (ret2 === false) {
                    e.preventDefault();
                    return false;
                  } else {
                    if (ret2) {
                      data = ret2;
                    }
                  }
                }
                if (data.length > 1) {
                  obj2.add(data, true);
                  e.preventDefault();
                } else if (data[0]) {
                  document.execCommand("insertText", false, data[0]);
                  e.preventDefault();
                }
              };
              var tagsMouseUp = function(e) {
                if (e.target.parentNode && e.target.parentNode.classList.contains("jtags")) {
                  if (e.target.classList.contains("jtags_label") || e.target.classList.contains("jtags_error")) {
                    var rect = e.target.getBoundingClientRect();
                    if (rect.width - (e.clientX - rect.left) < 16) {
                      obj2.remove(e.target);
                    }
                  }
                }
                if (e.target == el) {
                  setFocus();
                }
              };
              var tagsFocus = function() {
                if (!el.classList.contains("jtags-focus")) {
                  if (!el.children.length || obj2.getValue(el.children.length - 1)) {
                    if (!limit()) {
                      createElement("");
                    }
                  }
                  if (typeof obj2.options.onfocus == "function") {
                    obj2.options.onfocus(el, obj2, obj2.getValue());
                  }
                  el.classList.add("jtags-focus");
                }
              };
              var tagsBlur = function() {
                if (el.classList.contains("jtags-focus")) {
                  if (search2) {
                    search2.close();
                  }
                  for (var i2 = 0; i2 < el.children.length - 1; i2++) {
                    if (!obj2.getValue(i2)) {
                      el.removeChild(el.children[i2]);
                    }
                  }
                  change();
                  el.classList.remove("jtags-focus");
                  if (typeof obj2.options.onblur == "function") {
                    obj2.options.onblur(el, obj2, obj2.getValue());
                  }
                }
              };
              var init = function() {
                if ("touchend" in document.documentElement === true) {
                  el.addEventListener("touchend", tagsMouseUp);
                } else {
                  el.addEventListener("mouseup", tagsMouseUp);
                }
                el.addEventListener("keydown", tagsKeyDown);
                el.addEventListener("keyup", tagsKeyUp);
                el.addEventListener("paste", tagsPaste);
                el.addEventListener("focus", tagsFocus);
                el.addEventListener("blur", tagsBlur);
                el.setAttribute("contenteditable", true);
                el.classList.add("jtags");
                obj2.setOptions(options);
                if (typeof obj2.options.onload == "function") {
                  obj2.options.onload(el, obj2);
                }
                el.change = obj2.setValue;
                el.val = function(val) {
                  if (val === void 0) {
                    return obj2.getValue();
                  } else {
                    obj2.setValue(val);
                  }
                };
                el.tags = obj2;
              };
              init();
              return obj2;
            }
            ;
            function Upload(el, options) {
              var obj2 = {};
              obj2.options = {};
              var defaults = {
                type: "image",
                extension: "*",
                input: false,
                minWidth: false,
                maxWidth: null,
                maxHeight: null,
                maxJpegSizeBytes: null,
                // For example, 350Kb would be 350000
                onchange: null,
                multiple: false,
                remoteParser: null
              };
              for (var property in defaults) {
                if (options && options.hasOwnProperty(property)) {
                  obj2.options[property] = options[property];
                } else {
                  obj2.options[property] = defaults[property];
                }
              }
              if (obj2.options.multiple == true) {
                el.setAttribute("data-multiple", true);
              }
              el.content = [];
              el.classList.add("jupload");
              if (obj2.options.input == true) {
                el.classList.add("input");
              }
              obj2.add = function(data) {
                if (obj2.options.multiple == false) {
                  el.content = [];
                  el.innerText = "";
                }
                if (obj2.options.type == "image") {
                  var img = document.createElement("img");
                  img.setAttribute("src", data.file);
                  img.setAttribute("tabindex", -1);
                  if (!el.getAttribute("name")) {
                    img.className = "jfile";
                    img.content = data;
                  }
                  el.appendChild(img);
                } else {
                  if (data.name) {
                    var name = data.name;
                  } else {
                    var name = data.file;
                  }
                  var div = document.createElement("div");
                  div.innerText = name || obj2.options.type;
                  div.classList.add("jupload-item");
                  div.setAttribute("tabindex", -1);
                  el.appendChild(div);
                }
                if (data.content) {
                  data.file = helpers2.guid();
                }
                el.content.push(data);
                if (typeof obj2.options.onchange == "function") {
                  obj2.options.onchange(el, data);
                }
              };
              obj2.addFromFile = function(file) {
                var type = file.type.split("/");
                if (type[0] == obj2.options.type) {
                  var readFile = new FileReader();
                  readFile.addEventListener("load", function(v) {
                    var data = {
                      file: v.srcElement.result,
                      extension: file.name.substr(file.name.lastIndexOf(".") + 1),
                      name: file.name,
                      size: file.size,
                      lastmodified: file.lastModified,
                      content: v.srcElement.result
                    };
                    obj2.add(data);
                  });
                  readFile.readAsDataURL(file);
                } else {
                  alert(dictionary.translate("This extension is not allowed"));
                }
              };
              obj2.addFromUrl = function(src2) {
                if (src2.substr(0, 4) != "data" && !obj2.options.remoteParser) {
                  console.error("remoteParser not defined in your initialization");
                } else {
                  if (src2.substr(0, 4) == "data") {
                    var extension = src2.split(";");
                    extension = extension[0].split("/");
                    var type = extension[0].replace("data:", "");
                    if (type == obj2.options.type) {
                      var data = {
                        file: src2,
                        name: "",
                        extension: extension[1],
                        content: src2
                      };
                      obj2.add(data);
                    } else {
                      alert(obj2.options.text.extensionNotAllowed);
                    }
                  } else {
                    var extension = src2.substr(src2.lastIndexOf(".") + 1);
                    src2 = obj2.options.remoteParser + src2;
                    ajax({
                      url: src2,
                      type: "GET",
                      dataType: "blob",
                      success: function(data2) {
                      }
                    });
                  }
                }
              };
              var getDataURL = function(canvas, type) {
                var compression = 0.92;
                var lastContentLength = null;
                var content = canvas.toDataURL(type, compression);
                while (obj2.options.maxJpegSizeBytes && type === "image/jpeg" && content.length > obj2.options.maxJpegSizeBytes && content.length !== lastContentLength) {
                  compression *= 0.9;
                  lastContentLength = content.length;
                  content = canvas.toDataURL(type, compression);
                }
                return content;
              };
              var mime = obj2.options.type + "/" + obj2.options.extension;
              var input = document.createElement("input");
              input.type = "file";
              input.setAttribute("accept", mime);
              input.onchange = function() {
                for (var i2 = 0; i2 < this.files.length; i2++) {
                  obj2.addFromFile(this.files[i2]);
                }
              };
              if (obj2.options.multiple == true) {
                input.setAttribute("multiple", true);
              }
              var current = null;
              el.addEventListener("click", function(e) {
                current = null;
                if (!el.children.length || e.target === el) {
                  helpers2.click(input);
                } else {
                  if (e.target.parentNode == el) {
                    current = e.target;
                  }
                }
              });
              el.addEventListener("dblclick", function(e) {
                helpers2.click(input);
              });
              el.addEventListener("dragenter", function(e) {
                el.style.border = "1px dashed #000";
              });
              el.addEventListener("dragleave", function(e) {
                el.style.border = "1px solid #eee";
              });
              el.addEventListener("dragstop", function(e) {
                el.style.border = "1px solid #eee";
              });
              el.addEventListener("dragover", function(e) {
                e.preventDefault();
              });
              el.addEventListener("keydown", function(e) {
                if (current && e.which == 46) {
                  var index = Array.prototype.indexOf.call(el.children, current);
                  if (index >= 0) {
                    el.content.splice(index, 1);
                    current.remove();
                    current = null;
                  }
                }
              });
              el.addEventListener("drop", function(e) {
                e.preventDefault();
                e.stopPropagation();
                var html = (e.originalEvent || e).dataTransfer.getData("text/html");
                var file = (e.originalEvent || e).dataTransfer.files;
                if (file.length) {
                  for (var i2 = 0; i2 < e.dataTransfer.files.length; i2++) {
                    obj2.addFromFile(e.dataTransfer.files[i2]);
                  }
                } else if (html) {
                  if (obj2.options.multiple == false) {
                    el.innerText = "";
                  }
                  var div = document.createElement("div");
                  div.innerHTML = html;
                  var img = div.querySelectorAll("img");
                  if (img.length) {
                    for (var i2 = 0; i2 < img.length; i2++) {
                      obj2.addFromUrl(img[i2].src);
                    }
                  }
                }
                el.style.border = "1px solid #eee";
                return false;
              });
              el.val = function(val) {
                if (val === void 0) {
                  return el.content && el.content.length ? el.content : null;
                } else {
                  el.innerText = "";
                  el.content = [];
                  if (val) {
                    if (Array.isArray(val)) {
                      for (var i2 = 0; i2 < val.length; i2++) {
                        if (typeof val[i2] == "string") {
                          obj2.add({ file: val[i2] });
                        } else {
                          obj2.add(val[i2]);
                        }
                      }
                    } else if (typeof val == "string") {
                      obj2.add({ file: val });
                    }
                  }
                }
              };
              el.upload = el.image = obj2;
              return obj2;
            }
            var sha512 = __webpack_require__2(195);
            var sha512_default = /* @__PURE__ */ __webpack_require__2.n(sha512);
            ;
            var jsuites_jSuites = {
              // Helpers
              ...dictionary,
              ...helpers2,
              /** Current version */
              version: "5.12.0",
              /** Bind new extensions to Jsuites */
              setExtensions: function(o) {
                if (typeof o == "object") {
                  var k = Object.keys(o);
                  for (var i2 = 0; i2 < k.length; i2++) {
                    jsuites_jSuites[k[i2]] = o[k[i2]];
                  }
                }
              },
              tracking,
              path: Path,
              sorting: Sorting,
              lazyLoading: LazyLoading,
              // Plugins
              ajax,
              animation,
              calendar,
              color: Color,
              contextmenu,
              dropdown,
              editor,
              floating,
              form: plugins_form,
              mask,
              modal,
              notification,
              palette,
              picker: Picker,
              progressbar: Progressbar,
              rating: Rating,
              search: Search,
              slider: Slider,
              tabs: Tabs,
              tags: Tags,
              toolbar: Toolbar,
              upload: Upload,
              validations
            };
            jsuites_jSuites.image = Upload;
            jsuites_jSuites.image.create = function(data) {
              var img = document.createElement("img");
              img.setAttribute("src", data.file);
              img.className = "jfile";
              img.setAttribute("tabindex", -1);
              img.content = data;
              return img;
            };
            jsuites_jSuites.tracker = plugins_form;
            jsuites_jSuites.loading = animation.loading;
            jsuites_jSuites.sha512 = sha512_default();
            const Events = function() {
              if (typeof window["jSuitesStateControl"] === "undefined") {
                window["jSuitesStateControl"] = [];
              } else {
                return;
              }
              const find = function(DOMElement, component) {
                if (DOMElement[component.type] && DOMElement[component.type] == component) {
                  return true;
                }
                if (DOMElement.component && DOMElement.component == component) {
                  return true;
                }
                if (DOMElement.parentNode) {
                  return find(DOMElement.parentNode, component);
                }
                return false;
              };
              const isOpened = function(e) {
                let state2 = window["jSuitesStateControl"];
                if (state2 && state2.length > 0) {
                  for (let i2 = 0; i2 < state2.length; i2++) {
                    if (state2[i2] && !find(e, state2[i2])) {
                      state2[i2].close();
                    }
                  }
                }
              };
              let cornerSize = 15;
              let element = null;
              let editorAction = false;
              let state = {
                x: null,
                y: null
              };
              let tooltip = document.createElement("div");
              tooltip.classList.add("jtooltip");
              const isWebcomponent = function(e) {
                return e && (e.shadowRoot || e.tagName && e.tagName.includes("-"));
              };
              const getElement2 = function(e) {
                let d;
                let element2;
                let path = e.path || e.composedPath && e.composedPath();
                if (path) {
                  element2 = path[0];
                  if (element2 && isWebcomponent(element2) && !element2.shadowRoot && e.toElement) {
                    element2 = e.toElement;
                  }
                } else {
                  if (e.target && isWebcomponent(e.target)) {
                    d = e.target.shadowRoot;
                  } else {
                    d = document;
                  }
                  element2 = d.elementFromPoint(x, y);
                }
                return element2;
              };
              const mouseDown = function(e) {
                if (e.changedTouches && e.changedTouches[0]) {
                  var x2 = e.changedTouches[0].clientX;
                  var y2 = e.changedTouches[0].clientY;
                } else {
                  var x2 = e.clientX;
                  var y2 = e.clientY;
                }
                let element2 = getElement2(e);
                let editable = element2 && element2.tagName === "DIV" && element2.getAttribute("contentEditable");
                let item = jsuites_jSuites.findElement(element2, "jpanel");
                if (item && !item.classList.contains("readonly") && !editable) {
                  let rect = item.getBoundingClientRect();
                  let angle = 0;
                  if (item.style.rotate) {
                    angle = parseFloat(item.style.rotate);
                  }
                  let action = "move";
                  if (element2.getAttribute("data-action")) {
                    action = element2.getAttribute("data-action");
                  } else {
                    if (item.style.cursor) {
                      action = "resize";
                    } else {
                      item.style.cursor = "move";
                    }
                  }
                  editorAction = {
                    action,
                    a: angle,
                    e: item,
                    x: x2,
                    y: y2,
                    l: rect.left,
                    t: rect.top,
                    b: rect.bottom,
                    r: rect.right,
                    w: rect.width,
                    h: rect.height,
                    d: item.style.cursor,
                    actioned: false
                  };
                  if (!item.style.width) {
                    item.style.width = rect.width + "px";
                  }
                  if (!item.style.height) {
                    item.style.height = rect.height + "px";
                  }
                } else {
                  editorAction = false;
                }
                isOpened(element2);
                focus(e);
              };
              const calculateAngle = function(x1, y1, x2, y2, x3, y3) {
                const dx1 = x2 - x1;
                const dy1 = y2 - y1;
                const dx2 = x3 - x1;
                const dy2 = y3 - y1;
                let angle1 = Math.atan2(dy1, dx1);
                let angle2 = Math.atan2(dy2, dx2);
                let angleDifference = angle2 - angle1;
                angleDifference = angleDifference * (180 / Math.PI);
                if (angleDifference < 0) {
                  angleDifference += 360;
                }
                return angleDifference;
              };
              const mouseUp = function(e) {
                if (editorAction && editorAction.e) {
                  if (typeof editorAction.e.refresh == "function" && state.actioned) {
                    editorAction.e.refresh();
                  }
                  editorAction.e.style.cursor = "";
                }
                state = {
                  x: null,
                  y: null
                };
                editorAction = false;
              };
              const mouseMove = function(e) {
                if (editorAction) {
                  let x2 = e.clientX || e.pageX;
                  let y2 = e.clientY || e.pageY;
                  if (state.x == null && state.y == null) {
                    state.x = x2;
                    state.y = y2;
                  }
                  if (editorAction.action === "move") {
                    var dx = x2 - state.x;
                    var dy = y2 - state.y;
                    var top = editorAction.e.offsetTop + dy;
                    var left2 = editorAction.e.offsetLeft + dx;
                    editorAction.e.style.top = top + "px";
                    editorAction.e.style.left = left2 + "px";
                    if (typeof editorAction.e.refresh == "function") {
                      state.actioned = true;
                      editorAction.e.refresh("position", top, left2);
                    }
                  } else if (editorAction.action === "rotate") {
                    let ox = editorAction.l + editorAction.w / 2;
                    let oy = editorAction.t + editorAction.h / 2;
                    let angle = calculateAngle(ox, oy, editorAction.x, editorAction.y, x2, y2);
                    angle = angle + editorAction.a % 360;
                    angle = Math.round(angle / 2) * 2;
                    editorAction.e.style.rotate = `${angle}deg`;
                    if (typeof editorAction.e.refresh == "function") {
                      state.actioned = true;
                      editorAction.e.refresh("rotate", angle);
                    }
                  } else if (editorAction.action === "resize") {
                    let top2 = null;
                    let left3 = null;
                    let width = null;
                    let height = null;
                    if (editorAction.d == "e-resize" || editorAction.d == "ne-resize" || editorAction.d == "se-resize") {
                      width = editorAction.e.offsetWidth + (x2 - state.x);
                      if (e.shiftKey) {
                        height = editorAction.e.offsetHeight + (x2 - state.x) * (editorAction.e.offsetHeight / editorAction.e.offsetWidth);
                      }
                    } else if (editorAction.d === "w-resize" || editorAction.d == "nw-resize" || editorAction.d == "sw-resize") {
                      left3 = editorAction.e.offsetLeft + (x2 - state.x);
                      width = editorAction.e.offsetLeft + editorAction.e.offsetWidth - left3;
                      if (e.shiftKey) {
                        height = editorAction.e.offsetHeight - (x2 - state.x) * (editorAction.e.offsetHeight / editorAction.e.offsetWidth);
                      }
                    }
                    if (editorAction.d == "s-resize" || editorAction.d == "se-resize" || editorAction.d == "sw-resize") {
                      if (!height) {
                        height = editorAction.e.offsetHeight + (y2 - state.y);
                      }
                    } else if (editorAction.d === "n-resize" || editorAction.d == "ne-resize" || editorAction.d == "nw-resize") {
                      top2 = editorAction.e.offsetTop + (y2 - state.y);
                      height = editorAction.e.offsetTop + editorAction.e.offsetHeight - top2;
                    }
                    if (top2) {
                      editorAction.e.style.top = top2 + "px";
                    }
                    if (left3) {
                      editorAction.e.style.left = left3 + "px";
                    }
                    if (width) {
                      editorAction.e.style.width = width + "px";
                    }
                    if (height) {
                      editorAction.e.style.height = height + "px";
                    }
                    if (typeof editorAction.e.refresh == "function") {
                      state.actioned = true;
                      editorAction.e.refresh("dimensions", width, height);
                    }
                  }
                  state.x = x2;
                  state.y = y2;
                } else {
                  let element2 = getElement2(e);
                  let item = jsuites_jSuites.findElement(element2, "jpanel");
                  if (item) {
                    let controls = item.classList.contains("jpanel-controls");
                    if (controls) {
                      let position2 = element2.getAttribute("data-position");
                      if (position2) {
                        item.style.cursor = position2;
                      } else {
                        item.style.cursor = "";
                      }
                    } else if (item.getAttribute("tabindex")) {
                      let rect = item.getBoundingClientRect();
                      if (e.clientY - rect.top < cornerSize) {
                        if (rect.width - (e.clientX - rect.left) < cornerSize) {
                          item.style.cursor = "ne-resize";
                        } else if (e.clientX - rect.left < cornerSize) {
                          item.style.cursor = "nw-resize";
                        } else {
                          item.style.cursor = "n-resize";
                        }
                      } else if (rect.height - (e.clientY - rect.top) < cornerSize) {
                        if (rect.width - (e.clientX - rect.left) < cornerSize) {
                          item.style.cursor = "se-resize";
                        } else if (e.clientX - rect.left < cornerSize) {
                          item.style.cursor = "sw-resize";
                        } else {
                          item.style.cursor = "s-resize";
                        }
                      } else if (rect.width - (e.clientX - rect.left) < cornerSize) {
                        item.style.cursor = "e-resize";
                      } else if (e.clientX - rect.left < cornerSize) {
                        item.style.cursor = "w-resize";
                      } else {
                        item.style.cursor = "";
                      }
                    }
                  }
                }
              };
              let position = ["n", "ne", "e", "se", "s", "sw", "w", "nw", "rotate"];
              position.forEach(function(v, k) {
                position[k] = document.createElement("div");
                position[k].classList.add("jpanel-action");
                if (v === "rotate") {
                  position[k].setAttribute("data-action", "rotate");
                } else {
                  position[k].setAttribute("data-action", "resize");
                  position[k].setAttribute("data-position", v + "-resize");
                }
              });
              let currentElement;
              const focus = function(e) {
                let element2 = getElement2(e);
                let item = jsuites_jSuites.findElement(element2, "jpanel");
                if (item && !item.classList.contains("readonly") && item.classList.contains("jpanel-controls")) {
                  item.append(...position);
                  if (!item.classList.contains("jpanel-rotate")) {
                    position[position.length - 1].remove();
                  }
                  currentElement = item;
                } else {
                  blur(e);
                }
              };
              const blur = function(e) {
                if (currentElement) {
                  position.forEach(function(v) {
                    v.remove();
                  });
                  currentElement = null;
                }
              };
              const mouseOver = function(e) {
                let element2 = getElement2(e);
                var message = element2.getAttribute("data-tooltip");
                if (message) {
                  tooltip.innerText = message;
                  if (e.changedTouches && e.changedTouches[0]) {
                    var x2 = e.changedTouches[0].clientX;
                    var y2 = e.changedTouches[0].clientY;
                  } else {
                    var x2 = e.clientX;
                    var y2 = e.clientY;
                  }
                  tooltip.style.top = y2 + "px";
                  tooltip.style.left = x2 + "px";
                  document.body.appendChild(tooltip);
                } else if (tooltip.innerText) {
                  tooltip.innerText = "";
                  document.body.removeChild(tooltip);
                }
              };
              const contextMenu = function(e) {
                var item = document.activeElement;
                if (item && typeof item.contextmenu == "function") {
                  item.contextmenu(e);
                  e.preventDefault();
                  e.stopImmediatePropagation();
                } else {
                  item = jsuites_jSuites.findElement(e.target, function(o2) {
                    return o2.tagName && o2.getAttribute("aria-contextmenu-id");
                  });
                  if (item) {
                    var o = document.querySelector("#" + item);
                    if (!o) {
                      console.error("JSUITES: contextmenu id not found: " + item);
                    } else {
                      o.contextmenu.open(e);
                      e.preventDefault();
                      e.stopImmediatePropagation();
                    }
                  }
                }
              };
              const keyDown = function(e) {
                let item = document.activeElement;
                if (item) {
                  if (e.key === "Delete" && typeof item.delete == "function") {
                    item.delete();
                    e.preventDefault();
                    e.stopImmediatePropagation();
                  }
                }
                let state2 = window["jSuitesStateControl"];
                if (state2 && state2.length > 0) {
                  item = state2[state2.length - 1];
                  if (item) {
                    if (e.key === "Escape" && typeof item.isOpened == "function" && typeof item.close == "function") {
                      if (item.isOpened()) {
                        item.close();
                        e.preventDefault();
                        e.stopImmediatePropagation();
                      }
                    }
                  }
                }
              };
              const input = function(e) {
                if (e.target.getAttribute("data-mask") || e.target.mask) {
                  jsuites_jSuites.mask(e);
                }
              };
              document.addEventListener("focusin", focus);
              document.addEventListener("mouseup", mouseUp);
              document.addEventListener("mousedown", mouseDown);
              document.addEventListener("mousemove", mouseMove);
              document.addEventListener("mouseover", mouseOver);
              document.addEventListener("keydown", keyDown);
              document.addEventListener("contextmenu", contextMenu);
              document.addEventListener("input", input);
            };
            if (typeof document !== "undefined") {
              Events();
            }
            var jsuites2 = jsuites_jSuites;
          })();
          jSuites2 = __webpack_exports__2["default"];
        })();
        return jSuites2;
      }));
    }
  });

  // node_modules/@jspreadsheet/formula/dist/index.js
  var require_dist = __commonJS({
    "node_modules/@jspreadsheet/formula/dist/index.js"(exports2, module2) {
      (function(global, factory2) {
        typeof exports2 === "object" && typeof module2 !== "undefined" ? module2.exports = factory2() : typeof define === "function" && define.amd ? define(factory2) : global.formula = factory2();
      })(exports2, (function() {
        var Formula;
        !(function() {
          var n = { 765: function(n2, t3) {
            var r2;
            r2 = function(n3) {
              n3.version = "1.0.2";
              var t4 = Math;
              function r3(n4, t5) {
                for (var r4 = 0, e3 = 0; r4 < n4.length; ++r4) e3 = t5 * e3 + n4[r4];
                return e3;
              }
              function e2(n4, t5, r4, e3, o2) {
                if (0 === t5) return r4;
                if (1 === t5) return e3;
                for (var i3 = 2 / n4, u2 = e3, a2 = 1; a2 < t5; ++a2) u2 = e3 * a2 * i3 + o2 * r4, r4 = e3, e3 = u2;
                return u2;
              }
              function o(n4, t5, r4, o2, i3) {
                return function(r5, u2) {
                  if (o2) {
                    if (0 === r5) return 1 == o2 ? -1 / 0 : 1 / 0;
                    if (r5 < 0) return NaN;
                  }
                  return 0 === u2 ? n4(r5) : 1 === u2 ? t5(r5) : u2 < 0 ? NaN : e2(r5, u2 |= 0, n4(r5), t5(r5), i3);
                };
              }
              var i2, u, a, f, l, c, s, h, g, p, m, d, v, E = (function() {
                var n4 = 0.636619772, o2 = [57568490574, -13362590354, 6516196407e-1, -1121442418e-2, 77392.33017, -184.9052456].reverse(), i3 = [57568490411, 1029532985, 9494680718e-3, 59272.64853, 267.8532712, 1].reverse(), u2 = [1, -0.001098628627, 2734510407e-14, -2073370639e-15, 2093887211e-16].reverse(), a2 = [-0.01562499995, 1430488765e-13, -6911147651e-15, 7621095161e-16, -934935152e-16].reverse();
                function f2(e3) {
                  var f3 = 0, l3 = 0, c3 = 0, s3 = e3 * e3;
                  if (e3 < 8) f3 = (l3 = r3(o2, s3)) / (c3 = r3(i3, s3));
                  else {
                    var h3 = e3 - 0.785398164;
                    l3 = r3(u2, s3 = 64 / s3), c3 = r3(a2, s3), f3 = t4.sqrt(n4 / e3) * (t4.cos(h3) * l3 - t4.sin(h3) * c3 * 8 / e3);
                  }
                  return f3;
                }
                var l2 = [72362614232, -7895059235, 2423968531e-1, -2972611439e-3, 15704.4826, -30.16036606].reverse(), c2 = [144725228442, 2300535178, 1858330474e-2, 99447.43394, 376.9991397, 1].reverse(), s2 = [1, 183105e-8, -3516396496e-14, 2457520174e-15, -240337019e-15].reverse(), h2 = [0.04687499995, -2002690873e-13, 8449199096e-15, -88228987e-14, 105787412e-15].reverse();
                function g2(e3) {
                  var o3 = 0, i4 = 0, u3 = 0, a3 = e3 * e3, f3 = t4.abs(e3) - 2.356194491;
                  return Math.abs(e3) < 8 ? o3 = (i4 = e3 * r3(l2, a3)) / (u3 = r3(c2, a3)) : (i4 = r3(s2, a3 = 64 / a3), u3 = r3(h2, a3), o3 = t4.sqrt(n4 / t4.abs(e3)) * (t4.cos(f3) * i4 - t4.sin(f3) * u3 * 8 / t4.abs(e3)), e3 < 0 && (o3 = -o3)), o3;
                }
                return function n5(r4, o3) {
                  if (o3 = Math.round(o3), !isFinite(r4)) return isNaN(r4) ? r4 : 0;
                  if (o3 < 0) return (o3 % 2 ? -1 : 1) * n5(r4, -o3);
                  if (r4 < 0) return (o3 % 2 ? -1 : 1) * n5(-r4, o3);
                  if (0 === o3) return f2(r4);
                  if (1 === o3) return g2(r4);
                  if (0 === r4) return 0;
                  var i4 = 0;
                  if (r4 > o3) i4 = e2(r4, o3, f2(r4), g2(r4), -1);
                  else {
                    for (var u3 = false, a3 = 0, l3 = 0, c3 = 1, s3 = 0, h3 = 2 / r4, p2 = 2 * t4.floor((o3 + t4.floor(t4.sqrt(40 * o3))) / 2); p2 > 0; p2--) s3 = p2 * h3 * c3 - a3, a3 = c3, c3 = s3, t4.abs(c3) > 1e10 && (c3 *= 1e-10, a3 *= 1e-10, i4 *= 1e-10, l3 *= 1e-10), u3 && (l3 += c3), u3 = !u3, p2 == o3 && (i4 = a3);
                    i4 /= l3 = 2 * l3 - c3;
                  }
                  return i4;
                };
              })(), M = (i2 = 0.636619772, u = [-2957821389, 7062834065, -5123598036e-1, 1087988129e-2, -86327.92757, 228.4622733].reverse(), a = [40076544269, 7452499648e-1, 7189466438e-3, 47447.2647, 226.1030244, 1].reverse(), f = [1, -0.001098628627, 2734510407e-14, -2073370639e-15, 2093887211e-16].reverse(), l = [-0.01562499995, 1430488765e-13, -6911147651e-15, 7621095161e-16, -934945152e-16].reverse(), c = [-4900604943e3, 127527439e4, -51534381390, 7349264551e-1, -4237922726e-3, 8511.937935].reverse(), s = [249958057e5, 424441966400, 3733650367, 2245904002e-2, 102042.605, 354.9632885, 1].reverse(), h = [1, 183105e-8, -3516396496e-14, 2457520174e-15, -240337019e-15].reverse(), g = [0.04687499995, -2002690873e-13, 8449199096e-15, -88228987e-14, 105787412e-15].reverse(), o((function(n4) {
                var e3 = 0, o2 = 0, c2 = 0, s2 = n4 * n4, h2 = n4 - 0.785398164;
                return n4 < 8 ? e3 = (o2 = r3(u, s2)) / (c2 = r3(a, s2)) + i2 * E(n4, 0) * t4.log(n4) : (o2 = r3(f, s2 = 64 / s2), c2 = r3(l, s2), e3 = t4.sqrt(i2 / n4) * (t4.sin(h2) * o2 + t4.cos(h2) * c2 * 8 / n4)), e3;
              }), (function(n4) {
                var e3 = 0, o2 = 0, u2 = 0, a2 = n4 * n4, f2 = n4 - 2.356194491;
                return n4 < 8 ? e3 = (o2 = n4 * r3(c, a2)) / (u2 = r3(s, a2)) + i2 * (E(n4, 1) * t4.log(n4) - 1 / n4) : (o2 = r3(h, a2 = 64 / a2), u2 = r3(g, a2), e3 = t4.sqrt(i2 / n4) * (t4.sin(f2) * o2 + t4.cos(f2) * u2 * 8 / n4)), e3;
              }), 0, 1, -1)), N = (p = [1, 3.5156229, 3.0899424, 1.2067492, 0.2659732, 0.0360768, 45813e-7].reverse(), m = [0.39894228, 0.01328592, 225319e-8, -157565e-8, 916281e-8, -0.02057706, 0.02635537, -0.01647633, 392377e-8].reverse(), d = [0.5, 0.87890594, 0.51498869, 0.15084934, 0.02658733, 301532e-8, 32411e-8].reverse(), v = [0.39894228, -0.03988024, -362018e-8, 163801e-8, -0.01031555, 0.02282967, -0.02895312, 0.01787654, -420059e-8].reverse(), function n4(e3, o2) {
                if (0 === (o2 = Math.round(o2))) return (function(n5) {
                  return n5 <= 3.75 ? r3(p, n5 * n5 / 14.0625) : t4.exp(t4.abs(n5)) / t4.sqrt(t4.abs(n5)) * r3(m, 3.75 / t4.abs(n5));
                })(e3);
                if (1 === o2) return (function(n5) {
                  return n5 < 3.75 ? n5 * r3(d, n5 * n5 / 14.0625) : (n5 < 0 ? -1 : 1) * t4.exp(t4.abs(n5)) / t4.sqrt(t4.abs(n5)) * r3(v, 3.75 / t4.abs(n5));
                })(e3);
                if (o2 < 0) return NaN;
                if (0 === t4.abs(e3)) return 0;
                if (e3 == 1 / 0) return 1 / 0;
                var i3, u2 = 0, a2 = 2 / t4.abs(e3), f2 = 0, l2 = 1, c2 = 0;
                for (i3 = 2 * t4.round((o2 + t4.round(t4.sqrt(40 * o2))) / 2); i3 > 0; i3--) c2 = i3 * a2 * l2 + f2, f2 = l2, l2 = c2, t4.abs(l2) > 1e10 && (l2 *= 1e-10, f2 *= 1e-10, u2 *= 1e-10), i3 == o2 && (u2 = f2);
                return u2 *= n4(e3, 0) / l2, e3 < 0 && o2 % 2 ? -u2 : u2;
              }), w = (function() {
                var n4 = [-0.57721566, 0.4227842, 0.23069756, 0.0348859, 262698e-8, 1075e-7, 74e-7].reverse(), e3 = [1.25331414, -0.07832358, 0.02189568, -0.01062446, 587872e-8, -25154e-7, 53208e-8].reverse(), i3 = [1, 0.15443144, -0.67278579, -0.18156897, -0.01919402, -110404e-8, -4686e-8].reverse(), u2 = [1.25331414, 0.23498619, -0.0365562, 0.01504268, -780353e-8, 325614e-8, -68245e-8].reverse();
                return o((function(o2) {
                  return o2 <= 2 ? -t4.log(o2 / 2) * N(o2, 0) + r3(n4, o2 * o2 / 4) : t4.exp(-o2) / t4.sqrt(o2) * r3(e3, 2 / o2);
                }), (function(n5) {
                  return n5 <= 2 ? t4.log(n5 / 2) * N(n5, 1) + 1 / n5 * r3(i3, n5 * n5 / 4) : t4.exp(-n5) / t4.sqrt(n5) * r3(u2, 2 / n5);
                }), 0, 2, 1);
              })();
              n3.besselj = E, n3.bessely = M, n3.besseli = N, n3.besselk = w;
            }, "undefined" == typeof DO_NOT_EXPORT_BESSEL ? r2(t3) : r2({});
          }, 162: function(n2) {
            var t3;
            n2.exports = (t3 = (function(n3, t4) {
              var r2 = Array.prototype.concat, e2 = Array.prototype.slice, o = Object.prototype.toString;
              function i2(t5, r3) {
                var e3 = t5 > r3 ? t5 : r3;
                return n3.pow(10, 17 - ~~(n3.log(e3 > 0 ? e3 : -e3) * n3.LOG10E));
              }
              var u = Array.isArray || function(n4) {
                return "[object Array]" === o.call(n4);
              };
              function a(n4) {
                return "[object Function]" === o.call(n4);
              }
              function f(n4) {
                return "number" == typeof n4 && n4 - n4 == 0;
              }
              function l() {
                return new l._init(arguments);
              }
              function c() {
                return 0;
              }
              function s() {
                return 1;
              }
              function h(n4, t5) {
                return n4 === t5 ? 1 : 0;
              }
              l.fn = l.prototype, l._init = function(n4) {
                if (u(n4[0])) if (u(n4[0][0])) {
                  a(n4[1]) && (n4[0] = l.map(n4[0], n4[1]));
                  for (var t5 = 0; t5 < n4[0].length; t5++) this[t5] = n4[0][t5];
                  this.length = n4[0].length;
                } else this[0] = a(n4[1]) ? l.map(n4[0], n4[1]) : n4[0], this.length = 1;
                else if (f(n4[0])) this[0] = l.seq.apply(null, n4), this.length = 1;
                else {
                  if (n4[0] instanceof l) return l(n4[0].toArray());
                  this[0] = [], this.length = 1;
                }
                return this;
              }, l._init.prototype = l.prototype, l._init.constructor = l, l.utils = { calcRdx: i2, isArray: u, isFunction: a, isNumber: f, toVector: function(n4) {
                return r2.apply([], n4);
              } }, l._random_fn = n3.random, l.setRandom = function(n4) {
                if ("function" != typeof n4) throw new TypeError("fn is not a function");
                l._random_fn = n4;
              }, l.extend = function(n4) {
                var t5, r3;
                if (1 === arguments.length) {
                  for (r3 in n4) l[r3] = n4[r3];
                  return this;
                }
                for (t5 = 1; t5 < arguments.length; t5++) for (r3 in arguments[t5]) n4[r3] = arguments[t5][r3];
                return n4;
              }, l.rows = function(n4) {
                return n4.length || 1;
              }, l.cols = function(n4) {
                return n4[0].length || 1;
              }, l.dimensions = function(n4) {
                return { rows: l.rows(n4), cols: l.cols(n4) };
              }, l.row = function(n4, t5) {
                return u(t5) ? t5.map((function(t6) {
                  return l.row(n4, t6);
                })) : n4[t5];
              }, l.rowa = function(n4, t5) {
                return l.row(n4, t5);
              }, l.col = function(n4, t5) {
                if (u(t5)) {
                  var r3 = l.arange(n4.length).map((function() {
                    return new Array(t5.length);
                  }));
                  return t5.forEach((function(t6, e4) {
                    l.arange(n4.length).forEach((function(o3) {
                      r3[o3][e4] = n4[o3][t6];
                    }));
                  })), r3;
                }
                for (var e3 = new Array(n4.length), o2 = 0; o2 < n4.length; o2++) e3[o2] = [n4[o2][t5]];
                return e3;
              }, l.cola = function(n4, t5) {
                return l.col(n4, t5).map((function(n5) {
                  return n5[0];
                }));
              }, l.diag = function(n4) {
                for (var t5 = l.rows(n4), r3 = new Array(t5), e3 = 0; e3 < t5; e3++) r3[e3] = [n4[e3][e3]];
                return r3;
              }, l.antidiag = function(n4) {
                for (var t5 = l.rows(n4) - 1, r3 = new Array(t5), e3 = 0; t5 >= 0; t5--, e3++) r3[e3] = [n4[e3][t5]];
                return r3;
              }, l.transpose = function(n4) {
                var t5, r3, e3, o2, i3, a2 = [];
                for (u(n4[0]) || (n4 = [n4]), r3 = n4.length, e3 = n4[0].length, i3 = 0; i3 < e3; i3++) {
                  for (t5 = new Array(r3), o2 = 0; o2 < r3; o2++) t5[o2] = n4[o2][i3];
                  a2.push(t5);
                }
                return 1 === a2.length ? a2[0] : a2;
              }, l.map = function(n4, t5, r3) {
                var e3, o2, i3, a2, f2;
                for (u(n4[0]) || (n4 = [n4]), o2 = n4.length, i3 = n4[0].length, a2 = r3 ? n4 : new Array(o2), e3 = 0; e3 < o2; e3++) for (a2[e3] || (a2[e3] = new Array(i3)), f2 = 0; f2 < i3; f2++) a2[e3][f2] = t5(n4[e3][f2], e3, f2);
                return 1 === a2.length ? a2[0] : a2;
              }, l.cumreduce = function(n4, t5, r3) {
                var e3, o2, i3, a2, f2;
                for (u(n4[0]) || (n4 = [n4]), o2 = n4.length, i3 = n4[0].length, a2 = r3 ? n4 : new Array(o2), e3 = 0; e3 < o2; e3++) for (a2[e3] || (a2[e3] = new Array(i3)), i3 > 0 && (a2[e3][0] = n4[e3][0]), f2 = 1; f2 < i3; f2++) a2[e3][f2] = t5(a2[e3][f2 - 1], n4[e3][f2]);
                return 1 === a2.length ? a2[0] : a2;
              }, l.alter = function(n4, t5) {
                return l.map(n4, t5, true);
              }, l.create = function(n4, t5, r3) {
                var e3, o2, i3 = new Array(n4);
                for (a(t5) && (r3 = t5, t5 = n4), e3 = 0; e3 < n4; e3++) for (i3[e3] = new Array(t5), o2 = 0; o2 < t5; o2++) i3[e3][o2] = r3(e3, o2);
                return i3;
              }, l.zeros = function(n4, t5) {
                return f(t5) || (t5 = n4), l.create(n4, t5, c);
              }, l.ones = function(n4, t5) {
                return f(t5) || (t5 = n4), l.create(n4, t5, s);
              }, l.rand = function(n4, t5) {
                return f(t5) || (t5 = n4), l.create(n4, t5, l._random_fn);
              }, l.identity = function(n4, t5) {
                return f(t5) || (t5 = n4), l.create(n4, t5, h);
              }, l.symmetric = function(n4) {
                var t5, r3, e3 = n4.length;
                if (n4.length !== n4[0].length) return false;
                for (t5 = 0; t5 < e3; t5++) for (r3 = 0; r3 < e3; r3++) if (n4[r3][t5] !== n4[t5][r3]) return false;
                return true;
              }, l.clear = function(n4) {
                return l.alter(n4, c);
              }, l.seq = function(n4, t5, r3, e3) {
                a(e3) || (e3 = false);
                var o2, u2 = [], f2 = i2(n4, t5), l2 = (t5 * f2 - n4 * f2) / ((r3 - 1) * f2), c2 = n4;
                for (o2 = 0; c2 <= t5 && o2 < r3; c2 = (n4 * f2 + l2 * f2 * ++o2) / f2) u2.push(e3 ? e3(c2, o2) : c2);
                return u2;
              }, l.arange = function(n4, r3, e3) {
                var o2, i3 = [];
                if (e3 = e3 || 1, r3 === t4 && (r3 = n4, n4 = 0), n4 === r3 || 0 === e3) return [];
                if (n4 < r3 && e3 < 0) return [];
                if (n4 > r3 && e3 > 0) return [];
                if (e3 > 0) for (o2 = n4; o2 < r3; o2 += e3) i3.push(o2);
                else for (o2 = n4; o2 > r3; o2 += e3) i3.push(o2);
                return i3;
              }, l.slice = /* @__PURE__ */ (function() {
                function n4(n5, r3, e3, o2) {
                  var i3, u2 = [], a2 = n5.length;
                  if (r3 === t4 && e3 === t4 && o2 === t4) return l.copy(n5);
                  if (o2 = o2 || 1, (r3 = (r3 = r3 || 0) >= 0 ? r3 : a2 + r3) === (e3 = (e3 = e3 || n5.length) >= 0 ? e3 : a2 + e3) || 0 === o2) return [];
                  if (r3 < e3 && o2 < 0) return [];
                  if (r3 > e3 && o2 > 0) return [];
                  if (o2 > 0) for (i3 = r3; i3 < e3; i3 += o2) u2.push(n5[i3]);
                  else for (i3 = r3; i3 > e3; i3 += o2) u2.push(n5[i3]);
                  return u2;
                }
                return function(t5, r3) {
                  var e3, o2;
                  return f((r3 = r3 || {}).row) ? f(r3.col) ? t5[r3.row][r3.col] : n4(l.rowa(t5, r3.row), (e3 = r3.col || {}).start, e3.end, e3.step) : f(r3.col) ? n4(l.cola(t5, r3.col), (o2 = r3.row || {}).start, o2.end, o2.step) : (o2 = r3.row || {}, e3 = r3.col || {}, n4(t5, o2.start, o2.end, o2.step).map((function(t6) {
                    return n4(t6, e3.start, e3.end, e3.step);
                  })));
                };
              })(), l.sliceAssign = function(r3, e3, o2) {
                var i3, u2;
                if (f(e3.row)) {
                  if (f(e3.col)) return r3[e3.row][e3.col] = o2;
                  e3.col = e3.col || {}, e3.col.start = e3.col.start || 0, e3.col.end = e3.col.end || r3[0].length, e3.col.step = e3.col.step || 1, i3 = l.arange(e3.col.start, n3.min(r3.length, e3.col.end), e3.col.step);
                  var a2 = e3.row;
                  return i3.forEach((function(n4, t5) {
                    r3[a2][n4] = o2[t5];
                  })), r3;
                }
                if (f(e3.col)) {
                  e3.row = e3.row || {}, e3.row.start = e3.row.start || 0, e3.row.end = e3.row.end || r3.length, e3.row.step = e3.row.step || 1, u2 = l.arange(e3.row.start, n3.min(r3[0].length, e3.row.end), e3.row.step);
                  var c2 = e3.col;
                  return u2.forEach((function(n4, t5) {
                    r3[n4][c2] = o2[t5];
                  })), r3;
                }
                return o2[0].length === t4 && (o2 = [o2]), e3.row.start = e3.row.start || 0, e3.row.end = e3.row.end || r3.length, e3.row.step = e3.row.step || 1, e3.col.start = e3.col.start || 0, e3.col.end = e3.col.end || r3[0].length, e3.col.step = e3.col.step || 1, u2 = l.arange(e3.row.start, n3.min(r3.length, e3.row.end), e3.row.step), i3 = l.arange(e3.col.start, n3.min(r3[0].length, e3.col.end), e3.col.step), u2.forEach((function(n4, t5) {
                  i3.forEach((function(e4, i4) {
                    r3[n4][e4] = o2[t5][i4];
                  }));
                })), r3;
              }, l.diagonal = function(n4) {
                var t5 = l.zeros(n4.length, n4.length);
                return n4.forEach((function(n5, r3) {
                  t5[r3][r3] = n5;
                })), t5;
              }, l.copy = function(n4) {
                return n4.map((function(n5) {
                  return f(n5) ? n5 : n5.map((function(n6) {
                    return n6;
                  }));
                }));
              };
              var g = l.prototype;
              return g.length = 0, g.push = Array.prototype.push, g.sort = Array.prototype.sort, g.splice = Array.prototype.splice, g.slice = Array.prototype.slice, g.toArray = function() {
                return this.length > 1 ? e2.call(this) : e2.call(this)[0];
              }, g.map = function(n4, t5) {
                return l(l.map(this, n4, t5));
              }, g.cumreduce = function(n4, t5) {
                return l(l.cumreduce(this, n4, t5));
              }, g.alter = function(n4) {
                return l.alter(this, n4), this;
              }, (function(n4) {
                for (var t5 = 0; t5 < n4.length; t5++) !(function(n5) {
                  g[n5] = function(t6) {
                    var r3, e3 = this;
                    return t6 ? (setTimeout((function() {
                      t6.call(e3, g[n5].call(e3));
                    })), this) : (r3 = l[n5](this), u(r3) ? l(r3) : r3);
                  };
                })(n4[t5]);
              })("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")), (function(n4) {
                for (var t5 = 0; t5 < n4.length; t5++) !(function(n5) {
                  g[n5] = function(t6, r3) {
                    var e3 = this;
                    return r3 ? (setTimeout((function() {
                      r3.call(e3, g[n5].call(e3, t6));
                    })), this) : l(l[n5](this, t6));
                  };
                })(n4[t5]);
              })("row col".split(" ")), (function(n4) {
                for (var t5 = 0; t5 < n4.length; t5++) !(function(n5) {
                  g[n5] = function() {
                    return l(l[n5].apply(null, arguments));
                  };
                })(n4[t5]);
              })("create zeros ones rand identity".split(" ")), l;
            })(Math), (function(n3, t4) {
              var r2 = n3.utils.isFunction;
              function e2(n4, t5) {
                return n4 - t5;
              }
              function o(n4, r3, e3) {
                return t4.max(r3, t4.min(n4, e3));
              }
              n3.sum = function(n4) {
                for (var t5 = 0, r3 = n4.length; --r3 >= 0; ) t5 += n4[r3];
                return t5;
              }, n3.sumsqrd = function(n4) {
                for (var t5 = 0, r3 = n4.length; --r3 >= 0; ) t5 += n4[r3] * n4[r3];
                return t5;
              }, n3.sumsqerr = function(t5) {
                for (var r3, e3 = n3.mean(t5), o2 = 0, i3 = t5.length; --i3 >= 0; ) o2 += (r3 = t5[i3] - e3) * r3;
                return o2;
              }, n3.sumrow = function(n4) {
                for (var t5 = 0, r3 = n4.length; --r3 >= 0; ) t5 += n4[r3];
                return t5;
              }, n3.product = function(n4) {
                for (var t5 = 1, r3 = n4.length; --r3 >= 0; ) t5 *= n4[r3];
                return t5;
              }, n3.min = function(n4) {
                for (var t5 = n4[0], r3 = 0; ++r3 < n4.length; ) n4[r3] < t5 && (t5 = n4[r3]);
                return t5;
              }, n3.max = function(n4) {
                for (var t5 = n4[0], r3 = 0; ++r3 < n4.length; ) n4[r3] > t5 && (t5 = n4[r3]);
                return t5;
              }, n3.unique = function(n4) {
                for (var t5 = {}, r3 = [], e3 = 0; e3 < n4.length; e3++) t5[n4[e3]] || (t5[n4[e3]] = true, r3.push(n4[e3]));
                return r3;
              }, n3.mean = function(t5) {
                return n3.sum(t5) / t5.length;
              }, n3.meansqerr = function(t5) {
                return n3.sumsqerr(t5) / t5.length;
              }, n3.geomean = function(r3) {
                var e3 = r3.map(t4.log), o2 = n3.mean(e3);
                return t4.exp(o2);
              }, n3.median = function(n4) {
                var t5 = n4.length, r3 = n4.slice().sort(e2);
                return 1 & t5 ? r3[t5 / 2 | 0] : (r3[t5 / 2 - 1] + r3[t5 / 2]) / 2;
              }, n3.cumsum = function(t5) {
                return n3.cumreduce(t5, (function(n4, t6) {
                  return n4 + t6;
                }));
              }, n3.cumprod = function(t5) {
                return n3.cumreduce(t5, (function(n4, t6) {
                  return n4 * t6;
                }));
              }, n3.diff = function(n4) {
                var t5, r3 = [], e3 = n4.length;
                for (t5 = 1; t5 < e3; t5++) r3.push(n4[t5] - n4[t5 - 1]);
                return r3;
              }, n3.rank = function(n4) {
                var t5, r3 = [], o2 = {};
                for (t5 = 0; t5 < n4.length; t5++) o2[f = n4[t5]] ? o2[f]++ : (o2[f] = 1, r3.push(f));
                var i3 = r3.sort(e2), u = {}, a = 1;
                for (t5 = 0; t5 < i3.length; t5++) {
                  var f, l = o2[f = i3[t5]], c = (a + (a + l - 1)) / 2;
                  u[f] = c, a += l;
                }
                return n4.map((function(n5) {
                  return u[n5];
                }));
              }, n3.mode = function(n4) {
                var t5, r3 = n4.length, o2 = n4.slice().sort(e2), i3 = 1, u = 0, a = 0, f = [];
                for (t5 = 0; t5 < r3; t5++) o2[t5] === o2[t5 + 1] ? i3++ : (i3 > u ? (f = [o2[t5]], u = i3, a = 0) : i3 === u && (f.push(o2[t5]), a++), i3 = 1);
                return 0 === a ? f[0] : f;
              }, n3.range = function(t5) {
                return n3.max(t5) - n3.min(t5);
              }, n3.variance = function(t5, r3) {
                return n3.sumsqerr(t5) / (t5.length - (r3 ? 1 : 0));
              }, n3.pooledvariance = function(t5) {
                return t5.reduce((function(t6, r3) {
                  return t6 + n3.sumsqerr(r3);
                }), 0) / (t5.reduce((function(n4, t6) {
                  return n4 + t6.length;
                }), 0) - t5.length);
              }, n3.deviation = function(t5) {
                for (var r3 = n3.mean(t5), e3 = t5.length, o2 = new Array(e3), i3 = 0; i3 < e3; i3++) o2[i3] = t5[i3] - r3;
                return o2;
              }, n3.stdev = function(r3, e3) {
                return t4.sqrt(n3.variance(r3, e3));
              }, n3.pooledstdev = function(r3) {
                return t4.sqrt(n3.pooledvariance(r3));
              }, n3.meandev = function(r3) {
                for (var e3 = n3.mean(r3), o2 = [], i3 = r3.length - 1; i3 >= 0; i3--) o2.push(t4.abs(r3[i3] - e3));
                return n3.mean(o2);
              }, n3.meddev = function(r3) {
                for (var e3 = n3.median(r3), o2 = [], i3 = r3.length - 1; i3 >= 0; i3--) o2.push(t4.abs(r3[i3] - e3));
                return n3.median(o2);
              }, n3.coeffvar = function(t5) {
                return n3.stdev(t5) / n3.mean(t5);
              }, n3.quartiles = function(n4) {
                var r3 = n4.length, o2 = n4.slice().sort(e2);
                return [o2[t4.round(r3 / 4) - 1], o2[t4.round(r3 / 2) - 1], o2[t4.round(3 * r3 / 4) - 1]];
              }, n3.quantiles = function(n4, r3, i3, u) {
                var a, f, l, c, s, h = n4.slice().sort(e2), g = [r3.length], p = n4.length;
                for (void 0 === i3 && (i3 = 3 / 8), void 0 === u && (u = 3 / 8), a = 0; a < r3.length; a++) l = p * (f = r3[a]) + (i3 + f * (1 - i3 - u)), c = t4.floor(o(l, 1, p - 1)), s = o(l - c, 0, 1), g[a] = (1 - s) * h[c - 1] + s * h[c];
                return g;
              }, n3.percentile = function(n4, t5, r3) {
                var o2 = n4.slice().sort(e2), i3 = t5 * (o2.length + (r3 ? 1 : -1)) + (r3 ? 0 : 1), u = parseInt(i3), a = i3 - u;
                return u + 1 < o2.length ? o2[u - 1] + a * (o2[u] - o2[u - 1]) : o2[u - 1];
              }, n3.percentileOfScore = function(n4, t5, r3) {
                var e3, o2, i3 = 0, u = n4.length, a = false;
                for ("strict" === r3 && (a = true), o2 = 0; o2 < u; o2++) e3 = n4[o2], (a && e3 < t5 || !a && e3 <= t5) && i3++;
                return i3 / u;
              }, n3.histogram = function(r3, e3) {
                e3 = e3 || 4;
                var o2, i3 = n3.min(r3), u = (n3.max(r3) - i3) / e3, a = r3.length, f = [];
                for (o2 = 0; o2 < e3; o2++) f[o2] = 0;
                for (o2 = 0; o2 < a; o2++) f[t4.min(t4.floor((r3[o2] - i3) / u), e3 - 1)] += 1;
                return f;
              }, n3.covariance = function(t5, r3) {
                var e3, o2 = n3.mean(t5), i3 = n3.mean(r3), u = t5.length, a = new Array(u);
                for (e3 = 0; e3 < u; e3++) a[e3] = (t5[e3] - o2) * (r3[e3] - i3);
                return n3.sum(a) / (u - 1);
              }, n3.corrcoeff = function(t5, r3) {
                return n3.covariance(t5, r3) / n3.stdev(t5, 1) / n3.stdev(r3, 1);
              }, n3.spearmancoeff = function(t5, r3) {
                return t5 = n3.rank(t5), r3 = n3.rank(r3), n3.corrcoeff(t5, r3);
              }, n3.stanMoment = function(r3, e3) {
                for (var o2 = n3.mean(r3), i3 = n3.stdev(r3), u = r3.length, a = 0, f = 0; f < u; f++) a += t4.pow((r3[f] - o2) / i3, e3);
                return a / r3.length;
              }, n3.skewness = function(t5) {
                return n3.stanMoment(t5, 3);
              }, n3.kurtosis = function(t5) {
                return n3.stanMoment(t5, 4) - 3;
              };
              var i2 = n3.prototype;
              !(function(t5) {
                for (var e3 = 0; e3 < t5.length; e3++) !(function(t6) {
                  i2[t6] = function(e4, o2) {
                    var u = [], a = 0, f = this;
                    if (r2(e4) && (o2 = e4, e4 = false), o2) return setTimeout((function() {
                      o2.call(f, i2[t6].call(f, e4));
                    })), this;
                    if (this.length > 1) {
                      for (f = true === e4 ? this : this.transpose(); a < f.length; a++) u[a] = n3[t6](f[a]);
                      return u;
                    }
                    return n3[t6](this[0], e4);
                  };
                })(t5[e3]);
              })("cumsum cumprod".split(" ")), (function(t5) {
                for (var e3 = 0; e3 < t5.length; e3++) !(function(t6) {
                  i2[t6] = function(e4, o2) {
                    var u = [], a = 0, f = this;
                    if (r2(e4) && (o2 = e4, e4 = false), o2) return setTimeout((function() {
                      o2.call(f, i2[t6].call(f, e4));
                    })), this;
                    if (this.length > 1) {
                      for ("sumrow" !== t6 && (f = true === e4 ? this : this.transpose()); a < f.length; a++) u[a] = n3[t6](f[a]);
                      return true === e4 ? n3[t6](n3.utils.toVector(u)) : u;
                    }
                    return n3[t6](this[0], e4);
                  };
                })(t5[e3]);
              })("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")), (function(t5) {
                for (var e3 = 0; e3 < t5.length; e3++) !(function(t6) {
                  i2[t6] = function() {
                    var e4, o2 = [], u = 0, a = this, f = Array.prototype.slice.call(arguments);
                    if (r2(f[f.length - 1])) {
                      e4 = f[f.length - 1];
                      var l = f.slice(0, f.length - 1);
                      return setTimeout((function() {
                        e4.call(a, i2[t6].apply(a, l));
                      })), this;
                    }
                    e4 = void 0;
                    var c = function(r3) {
                      return n3[t6].apply(a, [r3].concat(f));
                    };
                    if (this.length > 1) {
                      for (a = a.transpose(); u < a.length; u++) o2[u] = c(a[u]);
                      return o2;
                    }
                    return c(this[0]);
                  };
                })(t5[e3]);
              })("quantiles percentileOfScore".split(" "));
            })(t3, Math), (function(n3, t4) {
              n3.gammaln = function(n4) {
                var r2, e2, o, i2 = 0, u = [76.18009172947146, -86.50532032941678, 24.01409824083091, -1.231739572450155, 0.001208650973866179, -5395239384953e-18], a = 1.000000000190015;
                for (o = (e2 = r2 = n4) + 5.5, o -= (r2 + 0.5) * t4.log(o); i2 < 6; i2++) a += u[i2] / ++e2;
                return t4.log(2.5066282746310007 * a / r2) - o;
              }, n3.loggam = function(n4) {
                var r2, e2, o, i2, u, a, f, l = [0.08333333333333333, -0.002777777777777778, 7936507936507937e-19, -5952380952380952e-19, 8417508417508418e-19, -0.001917526917526918, 0.00641025641025641, -0.02955065359477124, 0.1796443723688307, -1.3924322169059];
                if (r2 = n4, f = 0, 1 == n4 || 2 == n4) return 0;
                for (n4 <= 7 && (r2 = n4 + (f = t4.floor(7 - n4))), e2 = 1 / (r2 * r2), o = 2 * t4.PI, u = l[9], a = 8; a >= 0; a--) u *= e2, u += l[a];
                if (i2 = u / r2 + 0.5 * t4.log(o) + (r2 - 0.5) * t4.log(r2) - r2, n4 <= 7) for (a = 1; a <= f; a++) i2 -= t4.log(r2 - 1), r2 -= 1;
                return i2;
              }, n3.gammafn = function(n4) {
                var r2, e2, o, i2, u = [-1.716185138865495, 24.76565080557592, -379.80425647094563, 629.3311553128184, 866.9662027904133, -31451.272968848367, -36144.413418691176, 66456.14382024054], a = [-30.8402300119739, 315.35062697960416, -1015.1563674902192, -3107.771671572311, 22538.11842098015, 4755.846277527881, -134659.9598649693, -115132.2596755535], f = false, l = 0, c = 0, s = 0, h = n4;
                if (n4 > 171.6243769536076) return 1 / 0;
                if (h <= 0) {
                  if (!(i2 = h % 1 + 36e-17)) return 1 / 0;
                  f = (1 & h ? -1 : 1) * t4.PI / t4.sin(t4.PI * i2), h = 1 - h;
                }
                for (o = h, e2 = h < 1 ? h++ : (h -= l = (0 | h) - 1) - 1, r2 = 0; r2 < 8; ++r2) s = (s + u[r2]) * e2, c = c * e2 + a[r2];
                if (i2 = s / c + 1, o < h) i2 /= o;
                else if (o > h) for (r2 = 0; r2 < l; ++r2) i2 *= h, h++;
                return f && (i2 = f / i2), i2;
              }, n3.gammap = function(t5, r2) {
                return n3.lowRegGamma(t5, r2) * n3.gammafn(t5);
              }, n3.lowRegGamma = function(r2, e2) {
                var o, i2 = n3.gammaln(r2), u = r2, a = 1 / r2, f = a, l = e2 + 1 - r2, c = 1 / 1e-30, s = 1 / l, h = s, g = 1, p = -~(8.5 * t4.log(r2 >= 1 ? r2 : 1 / r2) + 0.4 * r2 + 17);
                if (e2 < 0 || r2 <= 0) return NaN;
                if (e2 < r2 + 1) {
                  for (; g <= p; g++) a += f *= e2 / ++u;
                  return a * t4.exp(-e2 + r2 * t4.log(e2) - i2);
                }
                for (; g <= p; g++) h *= (s = 1 / (s = (o = -g * (g - r2)) * s + (l += 2))) * (c = l + o / c);
                return 1 - h * t4.exp(-e2 + r2 * t4.log(e2) - i2);
              }, n3.factorialln = function(t5) {
                return t5 < 0 ? NaN : n3.gammaln(t5 + 1);
              }, n3.factorial = function(t5) {
                return t5 < 0 ? NaN : n3.gammafn(t5 + 1);
              }, n3.combination = function(r2, e2) {
                return r2 > 170 || e2 > 170 ? t4.exp(n3.combinationln(r2, e2)) : n3.factorial(r2) / n3.factorial(e2) / n3.factorial(r2 - e2);
              }, n3.combinationln = function(t5, r2) {
                return n3.factorialln(t5) - n3.factorialln(r2) - n3.factorialln(t5 - r2);
              }, n3.permutation = function(t5, r2) {
                return n3.factorial(t5) / n3.factorial(t5 - r2);
              }, n3.betafn = function(r2, e2) {
                if (!(r2 <= 0 || e2 <= 0)) return r2 + e2 > 170 ? t4.exp(n3.betaln(r2, e2)) : n3.gammafn(r2) * n3.gammafn(e2) / n3.gammafn(r2 + e2);
              }, n3.betaln = function(t5, r2) {
                return n3.gammaln(t5) + n3.gammaln(r2) - n3.gammaln(t5 + r2);
              }, n3.betacf = function(n4, r2, e2) {
                var o, i2, u, a, f = 1e-30, l = 1, c = r2 + e2, s = r2 + 1, h = r2 - 1, g = 1, p = 1 - c * n4 / s;
                for (t4.abs(p) < f && (p = f), a = p = 1 / p; l <= 100 && (p = 1 + (i2 = l * (e2 - l) * n4 / ((h + (o = 2 * l)) * (r2 + o))) * p, t4.abs(p) < f && (p = f), g = 1 + i2 / g, t4.abs(g) < f && (g = f), a *= (p = 1 / p) * g, p = 1 + (i2 = -(r2 + l) * (c + l) * n4 / ((r2 + o) * (s + o))) * p, t4.abs(p) < f && (p = f), g = 1 + i2 / g, t4.abs(g) < f && (g = f), a *= u = (p = 1 / p) * g, !(t4.abs(u - 1) < 3e-7)); l++) ;
                return a;
              }, n3.gammapinv = function(r2, e2) {
                var o, i2, u, a, f, l, c = 0, s = e2 - 1, h = n3.gammaln(e2);
                if (r2 >= 1) return t4.max(100, e2 + 100 * t4.sqrt(e2));
                if (r2 <= 0) return 0;
                for (e2 > 1 ? (f = t4.log(s), l = t4.exp(s * (f - 1) - h), a = r2 < 0.5 ? r2 : 1 - r2, o = (2.30753 + 0.27061 * (i2 = t4.sqrt(-2 * t4.log(a)))) / (1 + i2 * (0.99229 + 0.04481 * i2)) - i2, r2 < 0.5 && (o = -o), o = t4.max(1e-3, e2 * t4.pow(1 - 1 / (9 * e2) - o / (3 * t4.sqrt(e2)), 3))) : o = r2 < (i2 = 1 - e2 * (0.253 + 0.12 * e2)) ? t4.pow(r2 / i2, 1 / e2) : 1 - t4.log(1 - (r2 - i2) / (1 - i2)); c < 12; c++) {
                  if (o <= 0) return 0;
                  if ((o -= i2 = (u = (n3.lowRegGamma(e2, o) - r2) / (i2 = e2 > 1 ? l * t4.exp(-(o - s) + s * (t4.log(o) - f)) : t4.exp(-o + s * t4.log(o) - h))) / (1 - 0.5 * t4.min(1, u * ((e2 - 1) / o - 1)))) <= 0 && (o = 0.5 * (o + i2)), t4.abs(i2) < 1e-8 * o) break;
                }
                return o;
              }, n3.erf = function(n4) {
                var r2, e2, o, i2, u = [-1.3026537197817094, 0.6419697923564902, 0.019476473204185836, -0.00956151478680863, -946595344482036e-18, 366839497852761e-18, 42523324806907e-18, -20278578112534e-18, -1624290004647e-18, 130365583558e-17, 15626441722e-18, -85238095915e-18, 6529054439e-18, 5059343495e-18, -991364156e-18, -227365122e-18, 96467911e-18, 2394038e-18, -6886027e-18, 894487e-18, 313092e-18, -112708e-18, 381e-18, 7106e-18, -1523e-18, -94e-18, 121e-18, -28e-18], a = u.length - 1, f = false, l = 0, c = 0;
                for (n4 < 0 && (n4 = -n4, f = true), e2 = 4 * (r2 = 2 / (2 + n4)) - 2; a > 0; a--) o = l, l = e2 * l - c + u[a], c = o;
                return i2 = r2 * t4.exp(-n4 * n4 + 0.5 * (u[0] + e2 * l) - c), f ? i2 - 1 : 1 - i2;
              }, n3.erfc = function(t5) {
                return 1 - n3.erf(t5);
              }, n3.erfcinv = function(r2) {
                var e2, o, i2, u, a = 0;
                if (r2 >= 2) return -100;
                if (r2 <= 0) return 100;
                for (u = r2 < 1 ? r2 : 2 - r2, e2 = -0.70711 * ((2.30753 + 0.27061 * (i2 = t4.sqrt(-2 * t4.log(u / 2)))) / (1 + i2 * (0.99229 + 0.04481 * i2)) - i2); a < 2; a++) e2 += (o = n3.erfc(e2) - u) / (1.1283791670955126 * t4.exp(-e2 * e2) - e2 * o);
                return r2 < 1 ? e2 : -e2;
              }, n3.ibetainv = function(r2, e2, o) {
                var i2, u, a, f, l, c, s, h, g, p, m = e2 - 1, d = o - 1, v = 0;
                if (r2 <= 0) return 0;
                if (r2 >= 1) return 1;
                for (e2 >= 1 && o >= 1 ? (a = r2 < 0.5 ? r2 : 1 - r2, c = (2.30753 + 0.27061 * (f = t4.sqrt(-2 * t4.log(a)))) / (1 + f * (0.99229 + 0.04481 * f)) - f, r2 < 0.5 && (c = -c), s = (c * c - 3) / 6, h = 2 / (1 / (2 * e2 - 1) + 1 / (2 * o - 1)), g = c * t4.sqrt(s + h) / h - (1 / (2 * o - 1) - 1 / (2 * e2 - 1)) * (s + 5 / 6 - 2 / (3 * h)), c = e2 / (e2 + o * t4.exp(2 * g))) : (i2 = t4.log(e2 / (e2 + o)), u = t4.log(o / (e2 + o)), c = r2 < (f = t4.exp(e2 * i2) / e2) / (g = f + (l = t4.exp(o * u) / o)) ? t4.pow(e2 * g * r2, 1 / e2) : 1 - t4.pow(o * g * (1 - r2), 1 / o)), p = -n3.gammaln(e2) - n3.gammaln(o) + n3.gammaln(e2 + o); v < 10; v++) {
                  if (0 === c || 1 === c) return c;
                  if ((c -= f = (l = (n3.ibeta(c, e2, o) - r2) / (f = t4.exp(m * t4.log(c) + d * t4.log(1 - c) + p))) / (1 - 0.5 * t4.min(1, l * (m / c - d / (1 - c))))) <= 0 && (c = 0.5 * (c + f)), c >= 1 && (c = 0.5 * (c + f + 1)), t4.abs(f) < 1e-8 * c && v > 0) break;
                }
                return c;
              }, n3.ibeta = function(r2, e2, o) {
                var i2 = 0 === r2 || 1 === r2 ? 0 : t4.exp(n3.gammaln(e2 + o) - n3.gammaln(e2) - n3.gammaln(o) + e2 * t4.log(r2) + o * t4.log(1 - r2));
                return !(r2 < 0 || r2 > 1) && (r2 < (e2 + 1) / (e2 + o + 2) ? i2 * n3.betacf(r2, e2, o) / e2 : 1 - i2 * n3.betacf(1 - r2, o, e2) / o);
              }, n3.randn = function(r2, e2) {
                var o, i2, u, a, f;
                if (e2 || (e2 = r2), r2) return n3.create(r2, e2, (function() {
                  return n3.randn();
                }));
                do {
                  o = n3._random_fn(), i2 = 1.7156 * (n3._random_fn() - 0.5), f = (u = o - 0.449871) * u + (a = t4.abs(i2) + 0.386595) * (0.196 * a - 0.25472 * u);
                } while (f > 0.27597 && (f > 0.27846 || i2 * i2 > -4 * t4.log(o) * o * o));
                return i2 / o;
              }, n3.randg = function(r2, e2, o) {
                var i2, u, a, f, l, c, s = r2;
                if (o || (o = e2), r2 || (r2 = 1), e2) return (c = n3.zeros(e2, o)).alter((function() {
                  return n3.randg(r2);
                })), c;
                r2 < 1 && (r2 += 1), i2 = r2 - 1 / 3, u = 1 / t4.sqrt(9 * i2);
                do {
                  do {
                    f = 1 + u * (l = n3.randn());
                  } while (f <= 0);
                  f *= f * f, a = n3._random_fn();
                } while (a > 1 - 0.331 * t4.pow(l, 4) && t4.log(a) > 0.5 * l * l + i2 * (1 - f + t4.log(f)));
                if (r2 == s) return i2 * f;
                do {
                  a = n3._random_fn();
                } while (0 === a);
                return t4.pow(a, 1 / s) * i2 * f;
              }, (function(t5) {
                for (var r2 = 0; r2 < t5.length; r2++) !(function(t6) {
                  n3.fn[t6] = function() {
                    return n3(n3.map(this, (function(r3) {
                      return n3[t6](r3);
                    })));
                  };
                })(t5[r2]);
              })("gammaln gammafn factorial factorialln".split(" ")), (function(t5) {
                for (var r2 = 0; r2 < t5.length; r2++) !(function(t6) {
                  n3.fn[t6] = function() {
                    return n3(n3[t6].apply(null, arguments));
                  };
                })(t5[r2]);
              })("randn".split(" "));
            })(t3, Math), (function(n3, t4) {
              function r2(n4, r3, e3, o) {
                for (var i2, u = 0, a = 1, f = 1, l = 1, c = 0, s = 0; t4.abs((f - s) / f) > o; ) s = f, a = l + (i2 = -(r3 + c) * (r3 + e3 + c) * n4 / (r3 + 2 * c) / (r3 + 2 * c + 1)) * a, f = (u = f + i2 * u) + (i2 = (c += 1) * (e3 - c) * n4 / (r3 + 2 * c - 1) / (r3 + 2 * c)) * f, u /= l = a + i2 * l, a /= l, f /= l, l = 1;
                return f / r3;
              }
              function e2(r3, e3, o) {
                var i2 = [0.9815606342467192, 0.9041172563704749, 0.7699026741943047, 0.5873179542866175, 0.3678314989981802, 0.1252334085114689], u = [0.04717533638651183, 0.10693932599531843, 0.16007832854334622, 0.20316742672306592, 0.2334925365383548, 0.24914704581340277], a = 0.5 * r3;
                if (a >= 8) return 1;
                var f, l = 2 * n3.normal.cdf(a, 0, 1, 1, 0) - 1;
                l = l >= t4.exp(-50 / o) ? t4.pow(l, o) : 0;
                for (var c = a, s = (8 - a) / (f = r3 > 3 ? 2 : 3), h = c + s, g = 0, p = o - 1, m = 1; m <= f; m++) {
                  for (var d = 0, v = 0.5 * (h + c), E = 0.5 * (h - c), M = 1; M <= 12; M++) {
                    var N, w = v + E * (6 < M ? i2[(N = 12 - M + 1) - 1] : -i2[(N = M) - 1]), y2 = w * w;
                    if (y2 > 60) break;
                    var I = 2 * n3.normal.cdf(w, 0, 1, 1, 0) * 0.5 - 2 * n3.normal.cdf(w, r3, 1, 1, 0) * 0.5;
                    I >= t4.exp(-30 / p) && (d += I = u[N - 1] * t4.exp(-0.5 * y2) * t4.pow(I, p));
                  }
                  g += d *= 2 * E * o / t4.sqrt(2 * t4.PI), c = h, h += s;
                }
                return (l += g) <= t4.exp(-30 / e3) ? 0 : (l = t4.pow(l, e3)) >= 1 ? 1 : l;
              }
              !(function(t5) {
                for (var r3 = 0; r3 < t5.length; r3++) !(function(t6) {
                  n3[t6] = function n4(t7, r4, e3) {
                    return this instanceof n4 ? (this._a = t7, this._b = r4, this._c = e3, this) : new n4(t7, r4, e3);
                  }, n3.fn[t6] = function(r4, e3, o) {
                    var i2 = n3[t6](r4, e3, o);
                    return i2.data = this, i2;
                  }, n3[t6].prototype.sample = function(r4) {
                    var e3 = this._a, o = this._b, i2 = this._c;
                    return r4 ? n3.alter(r4, (function() {
                      return n3[t6].sample(e3, o, i2);
                    })) : n3[t6].sample(e3, o, i2);
                  }, (function(r4) {
                    for (var e3 = 0; e3 < r4.length; e3++) !(function(r5) {
                      n3[t6].prototype[r5] = function(e4) {
                        var o = this._a, i2 = this._b, u = this._c;
                        return e4 || 0 === e4 || (e4 = this.data), "number" != typeof e4 ? n3.fn.map.call(e4, (function(e5) {
                          return n3[t6][r5](e5, o, i2, u);
                        })) : n3[t6][r5](e4, o, i2, u);
                      };
                    })(r4[e3]);
                  })("pdf cdf inv".split(" ")), (function(r4) {
                    for (var e3 = 0; e3 < r4.length; e3++) !(function(r5) {
                      n3[t6].prototype[r5] = function() {
                        return n3[t6][r5](this._a, this._b, this._c);
                      };
                    })(r4[e3]);
                  })("mean median mode variance".split(" "));
                })(t5[r3]);
              })("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")), n3.extend(n3.beta, { pdf: function(r3, e3, o) {
                return r3 > 1 || r3 < 0 ? 0 : 1 == e3 && 1 == o ? 1 : e3 < 512 && o < 512 ? t4.pow(r3, e3 - 1) * t4.pow(1 - r3, o - 1) / n3.betafn(e3, o) : t4.exp((e3 - 1) * t4.log(r3) + (o - 1) * t4.log(1 - r3) - n3.betaln(e3, o));
              }, cdf: function(t5, r3, e3) {
                return t5 > 1 || t5 < 0 ? 1 * (t5 > 1) : n3.ibeta(t5, r3, e3);
              }, inv: function(t5, r3, e3) {
                return n3.ibetainv(t5, r3, e3);
              }, mean: function(n4, t5) {
                return n4 / (n4 + t5);
              }, median: function(t5, r3) {
                return n3.ibetainv(0.5, t5, r3);
              }, mode: function(n4, t5) {
                return (n4 - 1) / (n4 + t5 - 2);
              }, sample: function(t5, r3) {
                var e3 = n3.randg(t5);
                return e3 / (e3 + n3.randg(r3));
              }, variance: function(n4, r3) {
                return n4 * r3 / (t4.pow(n4 + r3, 2) * (n4 + r3 + 1));
              } }), n3.extend(n3.centralF, { pdf: function(r3, e3, o) {
                var i2;
                return r3 < 0 ? 0 : e3 <= 2 ? 0 === r3 && e3 < 2 ? 1 / 0 : 0 === r3 && 2 === e3 ? 1 : 1 / n3.betafn(e3 / 2, o / 2) * t4.pow(e3 / o, e3 / 2) * t4.pow(r3, e3 / 2 - 1) * t4.pow(1 + e3 / o * r3, -(e3 + o) / 2) : (i2 = e3 * r3 / (o + r3 * e3), e3 * (o / (o + r3 * e3)) / 2 * n3.binomial.pdf((e3 - 2) / 2, (e3 + o - 2) / 2, i2));
              }, cdf: function(t5, r3, e3) {
                return t5 < 0 ? 0 : n3.ibeta(r3 * t5 / (r3 * t5 + e3), r3 / 2, e3 / 2);
              }, inv: function(t5, r3, e3) {
                return e3 / (r3 * (1 / n3.ibetainv(t5, r3 / 2, e3 / 2) - 1));
              }, mean: function(n4, t5) {
                return t5 > 2 ? t5 / (t5 - 2) : void 0;
              }, mode: function(n4, t5) {
                return n4 > 2 ? t5 * (n4 - 2) / (n4 * (t5 + 2)) : void 0;
              }, sample: function(t5, r3) {
                return 2 * n3.randg(t5 / 2) / t5 / (2 * n3.randg(r3 / 2) / r3);
              }, variance: function(n4, t5) {
                if (!(t5 <= 4)) return 2 * t5 * t5 * (n4 + t5 - 2) / (n4 * (t5 - 2) * (t5 - 2) * (t5 - 4));
              } }), n3.extend(n3.cauchy, { pdf: function(n4, r3, e3) {
                return e3 < 0 ? 0 : e3 / (t4.pow(n4 - r3, 2) + t4.pow(e3, 2)) / t4.PI;
              }, cdf: function(n4, r3, e3) {
                return t4.atan((n4 - r3) / e3) / t4.PI + 0.5;
              }, inv: function(n4, r3, e3) {
                return r3 + e3 * t4.tan(t4.PI * (n4 - 0.5));
              }, median: function(n4) {
                return n4;
              }, mode: function(n4) {
                return n4;
              }, sample: function(r3, e3) {
                return n3.randn() * t4.sqrt(1 / (2 * n3.randg(0.5))) * e3 + r3;
              } }), n3.extend(n3.chisquare, { pdf: function(r3, e3) {
                return r3 < 0 ? 0 : 0 === r3 && 2 === e3 ? 0.5 : t4.exp((e3 / 2 - 1) * t4.log(r3) - r3 / 2 - e3 / 2 * t4.log(2) - n3.gammaln(e3 / 2));
              }, cdf: function(t5, r3) {
                return t5 < 0 ? 0 : n3.lowRegGamma(r3 / 2, t5 / 2);
              }, inv: function(t5, r3) {
                return 2 * n3.gammapinv(t5, 0.5 * r3);
              }, mean: function(n4) {
                return n4;
              }, median: function(n4) {
                return n4 * t4.pow(1 - 2 / (9 * n4), 3);
              }, mode: function(n4) {
                return n4 - 2 > 0 ? n4 - 2 : 0;
              }, sample: function(t5) {
                return 2 * n3.randg(t5 / 2);
              }, variance: function(n4) {
                return 2 * n4;
              } }), n3.extend(n3.exponential, { pdf: function(n4, r3) {
                return n4 < 0 ? 0 : r3 * t4.exp(-r3 * n4);
              }, cdf: function(n4, r3) {
                return n4 < 0 ? 0 : 1 - t4.exp(-r3 * n4);
              }, inv: function(n4, r3) {
                return -t4.log(1 - n4) / r3;
              }, mean: function(n4) {
                return 1 / n4;
              }, median: function(n4) {
                return 1 / n4 * t4.log(2);
              }, mode: function() {
                return 0;
              }, sample: function(r3) {
                return -1 / r3 * t4.log(n3._random_fn());
              }, variance: function(n4) {
                return t4.pow(n4, -2);
              } }), n3.extend(n3.gamma, { pdf: function(r3, e3, o) {
                return r3 < 0 ? 0 : 0 === r3 && 1 === e3 ? 1 / o : t4.exp((e3 - 1) * t4.log(r3) - r3 / o - n3.gammaln(e3) - e3 * t4.log(o));
              }, cdf: function(t5, r3, e3) {
                return t5 < 0 ? 0 : n3.lowRegGamma(r3, t5 / e3);
              }, inv: function(t5, r3, e3) {
                return n3.gammapinv(t5, r3) * e3;
              }, mean: function(n4, t5) {
                return n4 * t5;
              }, mode: function(n4, t5) {
                if (n4 > 1) return (n4 - 1) * t5;
              }, sample: function(t5, r3) {
                return n3.randg(t5) * r3;
              }, variance: function(n4, t5) {
                return n4 * t5 * t5;
              } }), n3.extend(n3.invgamma, { pdf: function(r3, e3, o) {
                return r3 <= 0 ? 0 : t4.exp(-(e3 + 1) * t4.log(r3) - o / r3 - n3.gammaln(e3) + e3 * t4.log(o));
              }, cdf: function(t5, r3, e3) {
                return t5 <= 0 ? 0 : 1 - n3.lowRegGamma(r3, e3 / t5);
              }, inv: function(t5, r3, e3) {
                return e3 / n3.gammapinv(1 - t5, r3);
              }, mean: function(n4, t5) {
                return n4 > 1 ? t5 / (n4 - 1) : void 0;
              }, mode: function(n4, t5) {
                return t5 / (n4 + 1);
              }, sample: function(t5, r3) {
                return r3 / n3.randg(t5);
              }, variance: function(n4, t5) {
                if (!(n4 <= 2)) return t5 * t5 / ((n4 - 1) * (n4 - 1) * (n4 - 2));
              } }), n3.extend(n3.kumaraswamy, { pdf: function(n4, r3, e3) {
                return 0 === n4 && 1 === r3 ? e3 : 1 === n4 && 1 === e3 ? r3 : t4.exp(t4.log(r3) + t4.log(e3) + (r3 - 1) * t4.log(n4) + (e3 - 1) * t4.log(1 - t4.pow(n4, r3)));
              }, cdf: function(n4, r3, e3) {
                return n4 < 0 ? 0 : n4 > 1 ? 1 : 1 - t4.pow(1 - t4.pow(n4, r3), e3);
              }, inv: function(n4, r3, e3) {
                return t4.pow(1 - t4.pow(1 - n4, 1 / e3), 1 / r3);
              }, mean: function(t5, r3) {
                return r3 * n3.gammafn(1 + 1 / t5) * n3.gammafn(r3) / n3.gammafn(1 + 1 / t5 + r3);
              }, median: function(n4, r3) {
                return t4.pow(1 - t4.pow(2, -1 / r3), 1 / n4);
              }, mode: function(n4, r3) {
                if (n4 >= 1 && r3 >= 1 && 1 !== n4 && 1 !== r3) return t4.pow((n4 - 1) / (n4 * r3 - 1), 1 / n4);
              }, variance: function() {
                throw new Error("variance not yet implemented");
              } }), n3.extend(n3.lognormal, { pdf: function(n4, r3, e3) {
                return n4 <= 0 ? 0 : t4.exp(-t4.log(n4) - 0.5 * t4.log(2 * t4.PI) - t4.log(e3) - t4.pow(t4.log(n4) - r3, 2) / (2 * e3 * e3));
              }, cdf: function(r3, e3, o) {
                return r3 < 0 ? 0 : 0.5 + 0.5 * n3.erf((t4.log(r3) - e3) / t4.sqrt(2 * o * o));
              }, inv: function(r3, e3, o) {
                return t4.exp(-1.4142135623730951 * o * n3.erfcinv(2 * r3) + e3);
              }, mean: function(n4, r3) {
                return t4.exp(n4 + r3 * r3 / 2);
              }, median: function(n4) {
                return t4.exp(n4);
              }, mode: function(n4, r3) {
                return t4.exp(n4 - r3 * r3);
              }, sample: function(r3, e3) {
                return t4.exp(n3.randn() * e3 + r3);
              }, variance: function(n4, r3) {
                return (t4.exp(r3 * r3) - 1) * t4.exp(2 * n4 + r3 * r3);
              } }), n3.extend(n3.noncentralt, { pdf: function(r3, e3, o) {
                return t4.abs(o) < 1e-14 ? n3.studentt.pdf(r3, e3) : t4.abs(r3) < 1e-14 ? t4.exp(n3.gammaln((e3 + 1) / 2) - o * o / 2 - 0.5 * t4.log(t4.PI * e3) - n3.gammaln(e3 / 2)) : e3 / r3 * (n3.noncentralt.cdf(r3 * t4.sqrt(1 + 2 / e3), e3 + 2, o) - n3.noncentralt.cdf(r3, e3, o));
              }, cdf: function(r3, e3, o) {
                var i2 = 1e-14;
                if (t4.abs(o) < i2) return n3.studentt.cdf(r3, e3);
                var u = false;
                r3 < 0 && (u = true, o = -o);
                for (var a = n3.normal.cdf(-o, 0, 1), f = i2 + 1, l = f, c = r3 * r3 / (r3 * r3 + e3), s = 0, h = t4.exp(-o * o / 2), g = t4.exp(-o * o / 2 - 0.5 * t4.log(2) - n3.gammaln(1.5)) * o; s < 200 || l > i2 || f > i2; ) l = f, s > 0 && (h *= o * o / (2 * s), g *= o * o / (2 * (s + 0.5))), a += 0.5 * (f = h * n3.beta.cdf(c, s + 0.5, e3 / 2) + g * n3.beta.cdf(c, s + 1, e3 / 2)), s++;
                return u ? 1 - a : a;
              } }), n3.extend(n3.normal, { pdf: function(n4, r3, e3) {
                return t4.exp(-0.5 * t4.log(2 * t4.PI) - t4.log(e3) - t4.pow(n4 - r3, 2) / (2 * e3 * e3));
              }, cdf: function(r3, e3, o) {
                return 0.5 * (1 + n3.erf((r3 - e3) / t4.sqrt(2 * o * o)));
              }, inv: function(t5, r3, e3) {
                return -1.4142135623730951 * e3 * n3.erfcinv(2 * t5) + r3;
              }, mean: function(n4) {
                return n4;
              }, median: function(n4) {
                return n4;
              }, mode: function(n4) {
                return n4;
              }, sample: function(t5, r3) {
                return n3.randn() * r3 + t5;
              }, variance: function(n4, t5) {
                return t5 * t5;
              } }), n3.extend(n3.pareto, { pdf: function(n4, r3, e3) {
                return n4 < r3 ? 0 : e3 * t4.pow(r3, e3) / t4.pow(n4, e3 + 1);
              }, cdf: function(n4, r3, e3) {
                return n4 < r3 ? 0 : 1 - t4.pow(r3 / n4, e3);
              }, inv: function(n4, r3, e3) {
                return r3 / t4.pow(1 - n4, 1 / e3);
              }, mean: function(n4, r3) {
                if (!(r3 <= 1)) return r3 * t4.pow(n4, r3) / (r3 - 1);
              }, median: function(n4, r3) {
                return n4 * (r3 * t4.SQRT2);
              }, mode: function(n4) {
                return n4;
              }, variance: function(n4, r3) {
                if (!(r3 <= 2)) return n4 * n4 * r3 / (t4.pow(r3 - 1, 2) * (r3 - 2));
              } }), n3.extend(n3.studentt, { pdf: function(r3, e3) {
                return e3 = e3 > 1e100 ? 1e100 : e3, 1 / (t4.sqrt(e3) * n3.betafn(0.5, e3 / 2)) * t4.pow(1 + r3 * r3 / e3, -(e3 + 1) / 2);
              }, cdf: function(r3, e3) {
                var o = e3 / 2;
                return n3.ibeta((r3 + t4.sqrt(r3 * r3 + e3)) / (2 * t4.sqrt(r3 * r3 + e3)), o, o);
              }, inv: function(r3, e3) {
                var o = n3.ibetainv(2 * t4.min(r3, 1 - r3), 0.5 * e3, 0.5);
                return o = t4.sqrt(e3 * (1 - o) / o), r3 > 0.5 ? o : -o;
              }, mean: function(n4) {
                return n4 > 1 ? 0 : void 0;
              }, median: function() {
                return 0;
              }, mode: function() {
                return 0;
              }, sample: function(r3) {
                return n3.randn() * t4.sqrt(r3 / (2 * n3.randg(r3 / 2)));
              }, variance: function(n4) {
                return n4 > 2 ? n4 / (n4 - 2) : n4 > 1 ? 1 / 0 : void 0;
              } }), n3.extend(n3.weibull, { pdf: function(n4, r3, e3) {
                return n4 < 0 || r3 < 0 || e3 < 0 ? 0 : e3 / r3 * t4.pow(n4 / r3, e3 - 1) * t4.exp(-t4.pow(n4 / r3, e3));
              }, cdf: function(n4, r3, e3) {
                return n4 < 0 ? 0 : 1 - t4.exp(-t4.pow(n4 / r3, e3));
              }, inv: function(n4, r3, e3) {
                return r3 * t4.pow(-t4.log(1 - n4), 1 / e3);
              }, mean: function(t5, r3) {
                return t5 * n3.gammafn(1 + 1 / r3);
              }, median: function(n4, r3) {
                return n4 * t4.pow(t4.log(2), 1 / r3);
              }, mode: function(n4, r3) {
                return r3 <= 1 ? 0 : n4 * t4.pow((r3 - 1) / r3, 1 / r3);
              }, sample: function(r3, e3) {
                return r3 * t4.pow(-t4.log(n3._random_fn()), 1 / e3);
              }, variance: function(r3, e3) {
                return r3 * r3 * n3.gammafn(1 + 2 / e3) - t4.pow(n3.weibull.mean(r3, e3), 2);
              } }), n3.extend(n3.uniform, { pdf: function(n4, t5, r3) {
                return n4 < t5 || n4 > r3 ? 0 : 1 / (r3 - t5);
              }, cdf: function(n4, t5, r3) {
                return n4 < t5 ? 0 : n4 < r3 ? (n4 - t5) / (r3 - t5) : 1;
              }, inv: function(n4, t5, r3) {
                return t5 + n4 * (r3 - t5);
              }, mean: function(n4, t5) {
                return 0.5 * (n4 + t5);
              }, median: function(t5, r3) {
                return n3.mean(t5, r3);
              }, mode: function() {
                throw new Error("mode is not yet implemented");
              }, sample: function(t5, r3) {
                return t5 / 2 + r3 / 2 + (r3 / 2 - t5 / 2) * (2 * n3._random_fn() - 1);
              }, variance: function(n4, r3) {
                return t4.pow(r3 - n4, 2) / 12;
              } }), n3.extend(n3.binomial, { pdf: function(r3, e3, o) {
                return 0 === o || 1 === o ? e3 * o === r3 ? 1 : 0 : n3.combination(e3, r3) * t4.pow(o, r3) * t4.pow(1 - o, e3 - r3);
              }, cdf: function(e3, o, i2) {
                var u, a = 1e-10;
                if (e3 < 0) return 0;
                if (e3 >= o) return 1;
                if (i2 < 0 || i2 > 1 || o <= 0) return NaN;
                var f = i2, l = (e3 = t4.floor(e3)) + 1, c = o - e3, s = l + c, h = t4.exp(n3.gammaln(s) - n3.gammaln(c) - n3.gammaln(l) + l * t4.log(f) + c * t4.log(1 - f));
                return u = f < (l + 1) / (s + 2) ? h * r2(f, l, c, a) : 1 - h * r2(1 - f, c, l, a), t4.round(1 / a * (1 - u)) / (1 / a);
              } }), n3.extend(n3.negbin, { pdf: function(r3, e3, o) {
                return r3 === r3 >>> 0 && (r3 < 0 ? 0 : n3.combination(r3 + e3 - 1, e3 - 1) * t4.pow(1 - o, r3) * t4.pow(o, e3));
              }, cdf: function(t5, r3, e3) {
                var o = 0, i2 = 0;
                if (t5 < 0) return 0;
                for (; i2 <= t5; i2++) o += n3.negbin.pdf(i2, r3, e3);
                return o;
              } }), n3.extend(n3.hypgeom, { pdf: function(r3, e3, o, i2) {
                if (r3 != r3 | 0) return false;
                if (r3 < 0 || r3 < o - (e3 - i2)) return 0;
                if (r3 > i2 || r3 > o) return 0;
                if (2 * o > e3) return 2 * i2 > e3 ? n3.hypgeom.pdf(e3 - o - i2 + r3, e3, e3 - o, e3 - i2) : n3.hypgeom.pdf(i2 - r3, e3, e3 - o, i2);
                if (2 * i2 > e3) return n3.hypgeom.pdf(o - r3, e3, o, e3 - i2);
                if (o < i2) return n3.hypgeom.pdf(r3, e3, i2, o);
                for (var u = 1, a = 0, f = 0; f < r3; f++) {
                  for (; u > 1 && a < i2; ) u *= 1 - o / (e3 - a), a++;
                  u *= (i2 - f) * (o - f) / ((f + 1) * (e3 - o - i2 + f + 1));
                }
                for (; a < i2; a++) u *= 1 - o / (e3 - a);
                return t4.min(1, t4.max(0, u));
              }, cdf: function(r3, e3, o, i2) {
                if (r3 < 0 || r3 < o - (e3 - i2)) return 0;
                if (r3 >= i2 || r3 >= o) return 1;
                if (2 * o > e3) return 2 * i2 > e3 ? n3.hypgeom.cdf(e3 - o - i2 + r3, e3, e3 - o, e3 - i2) : 1 - n3.hypgeom.cdf(i2 - r3 - 1, e3, e3 - o, i2);
                if (2 * i2 > e3) return 1 - n3.hypgeom.cdf(o - r3 - 1, e3, o, e3 - i2);
                if (o < i2) return n3.hypgeom.cdf(r3, e3, i2, o);
                for (var u = 1, a = 1, f = 0, l = 0; l < r3; l++) {
                  for (; u > 1 && f < i2; ) {
                    var c = 1 - o / (e3 - f);
                    a *= c, u *= c, f++;
                  }
                  u += a *= (i2 - l) * (o - l) / ((l + 1) * (e3 - o - i2 + l + 1));
                }
                for (; f < i2; f++) u *= 1 - o / (e3 - f);
                return t4.min(1, t4.max(0, u));
              } }), n3.extend(n3.poisson, { pdf: function(r3, e3) {
                return e3 < 0 || r3 % 1 != 0 || r3 < 0 ? 0 : t4.pow(e3, r3) * t4.exp(-e3) / n3.factorial(r3);
              }, cdf: function(t5, r3) {
                var e3 = [], o = 0;
                if (t5 < 0) return 0;
                for (; o <= t5; o++) e3.push(n3.poisson.pdf(o, r3));
                return n3.sum(e3);
              }, mean: function(n4) {
                return n4;
              }, variance: function(n4) {
                return n4;
              }, sampleSmall: function(r3) {
                var e3 = 1, o = 0, i2 = t4.exp(-r3);
                do {
                  o++, e3 *= n3._random_fn();
                } while (e3 > i2);
                return o - 1;
              }, sampleLarge: function(r3) {
                var e3, o, i2, u, a, f, l, c, s, h, g = r3;
                for (u = t4.sqrt(g), a = t4.log(g), f = 0.02483 * (l = 0.931 + 2.53 * u) - 0.059, c = 1.1239 + 1.1328 / (l - 3.4), s = 0.9277 - 3.6224 / (l - 2); ; ) {
                  if (o = t4.random() - 0.5, i2 = t4.random(), h = 0.5 - t4.abs(o), e3 = t4.floor((2 * f / h + l) * o + g + 0.43), h >= 0.07 && i2 <= s) return e3;
                  if (!(e3 < 0 || h < 0.013 && i2 > h) && t4.log(i2) + t4.log(c) - t4.log(f / (h * h) + l) <= e3 * a - g - n3.loggam(e3 + 1)) return e3;
                }
              }, sample: function(n4) {
                return n4 < 10 ? this.sampleSmall(n4) : this.sampleLarge(n4);
              } }), n3.extend(n3.triangular, { pdf: function(n4, t5, r3, e3) {
                return r3 <= t5 || e3 < t5 || e3 > r3 ? NaN : n4 < t5 || n4 > r3 ? 0 : n4 < e3 ? 2 * (n4 - t5) / ((r3 - t5) * (e3 - t5)) : n4 === e3 ? 2 / (r3 - t5) : 2 * (r3 - n4) / ((r3 - t5) * (r3 - e3));
              }, cdf: function(n4, r3, e3, o) {
                return e3 <= r3 || o < r3 || o > e3 ? NaN : n4 <= r3 ? 0 : n4 >= e3 ? 1 : n4 <= o ? t4.pow(n4 - r3, 2) / ((e3 - r3) * (o - r3)) : 1 - t4.pow(e3 - n4, 2) / ((e3 - r3) * (e3 - o));
              }, inv: function(n4, r3, e3, o) {
                return e3 <= r3 || o < r3 || o > e3 ? NaN : n4 <= (o - r3) / (e3 - r3) ? r3 + (e3 - r3) * t4.sqrt(n4 * ((o - r3) / (e3 - r3))) : r3 + (e3 - r3) * (1 - t4.sqrt((1 - n4) * (1 - (o - r3) / (e3 - r3))));
              }, mean: function(n4, t5, r3) {
                return (n4 + t5 + r3) / 3;
              }, median: function(n4, r3, e3) {
                return e3 <= (n4 + r3) / 2 ? r3 - t4.sqrt((r3 - n4) * (r3 - e3)) / t4.sqrt(2) : e3 > (n4 + r3) / 2 ? n4 + t4.sqrt((r3 - n4) * (e3 - n4)) / t4.sqrt(2) : void 0;
              }, mode: function(n4, t5, r3) {
                return r3;
              }, sample: function(r3, e3, o) {
                var i2 = n3._random_fn();
                return i2 < (o - r3) / (e3 - r3) ? r3 + t4.sqrt(i2 * (e3 - r3) * (o - r3)) : e3 - t4.sqrt((1 - i2) * (e3 - r3) * (e3 - o));
              }, variance: function(n4, t5, r3) {
                return (n4 * n4 + t5 * t5 + r3 * r3 - n4 * t5 - n4 * r3 - t5 * r3) / 18;
              } }), n3.extend(n3.arcsine, { pdf: function(n4, r3, e3) {
                return e3 <= r3 ? NaN : n4 <= r3 || n4 >= e3 ? 0 : 2 / t4.PI * t4.pow(t4.pow(e3 - r3, 2) - t4.pow(2 * n4 - r3 - e3, 2), -0.5);
              }, cdf: function(n4, r3, e3) {
                return n4 < r3 ? 0 : n4 < e3 ? 2 / t4.PI * t4.asin(t4.sqrt((n4 - r3) / (e3 - r3))) : 1;
              }, inv: function(n4, r3, e3) {
                return r3 + (0.5 - 0.5 * t4.cos(t4.PI * n4)) * (e3 - r3);
              }, mean: function(n4, t5) {
                return t5 <= n4 ? NaN : (n4 + t5) / 2;
              }, median: function(n4, t5) {
                return t5 <= n4 ? NaN : (n4 + t5) / 2;
              }, mode: function() {
                throw new Error("mode is not yet implemented");
              }, sample: function(r3, e3) {
                return (r3 + e3) / 2 + (e3 - r3) / 2 * t4.sin(2 * t4.PI * n3.uniform.sample(0, 1));
              }, variance: function(n4, r3) {
                return r3 <= n4 ? NaN : t4.pow(r3 - n4, 2) / 8;
              } }), n3.extend(n3.laplace, { pdf: function(n4, r3, e3) {
                return e3 <= 0 ? 0 : t4.exp(-t4.abs(n4 - r3) / e3) / (2 * e3);
              }, cdf: function(n4, r3, e3) {
                return e3 <= 0 ? 0 : n4 < r3 ? 0.5 * t4.exp((n4 - r3) / e3) : 1 - 0.5 * t4.exp(-(n4 - r3) / e3);
              }, mean: function(n4) {
                return n4;
              }, median: function(n4) {
                return n4;
              }, mode: function(n4) {
                return n4;
              }, variance: function(n4, t5) {
                return 2 * t5 * t5;
              }, sample: function(r3, e3) {
                var o, i2 = n3._random_fn() - 0.5;
                return r3 - e3 * ((o = i2) / t4.abs(o)) * t4.log(1 - 2 * t4.abs(i2));
              } }), n3.extend(n3.tukey, { cdf: function(r3, o, i2) {
                var u = o, a = [0.9894009349916499, 0.9445750230732326, 0.8656312023878318, 0.755404408355003, 0.6178762444026438, 0.45801677765722737, 0.2816035507792589, 0.09501250983763744], f = [0.027152459411754096, 0.062253523938647894, 0.09515851168249279, 0.12462897125553388, 0.14959598881657674, 0.16915651939500254, 0.18260341504492358, 0.1894506104550685];
                if (r3 <= 0) return 0;
                if (i2 < 2 || u < 2) return NaN;
                if (!Number.isFinite(r3)) return 1;
                if (i2 > 25e3) return e2(r3, 1, u);
                var l, c = 0.5 * i2, s = c * t4.log(i2) - i2 * t4.log(2) - n3.gammaln(c), h = c - 1, g = 0.25 * i2;
                l = i2 <= 100 ? 1 : i2 <= 800 ? 0.5 : i2 <= 5e3 ? 0.25 : 0.125, s += t4.log(l);
                for (var p = 0, m = 1; m <= 50; m++) {
                  for (var d = 0, v = (2 * m - 1) * l, E = 1; E <= 16; E++) {
                    var M, N;
                    8 < E ? (M = E - 8 - 1, N = s + h * t4.log(v + a[M] * l) - (a[M] * l + v) * g) : (M = E - 1, N = s + h * t4.log(v - a[M] * l) + (a[M] * l - v) * g), N >= -30 && (d += e2(8 < E ? r3 * t4.sqrt(0.5 * (a[M] * l + v)) : r3 * t4.sqrt(0.5 * (-a[M] * l + v)), 1, u) * f[M] * t4.exp(N));
                  }
                  if (m * l >= 1 && d <= 1e-14) break;
                  p += d;
                }
                if (d > 1e-14) throw new Error("tukey.cdf failed to converge");
                return p > 1 && (p = 1), p;
              }, inv: function(r3, e3, o) {
                if (o < 2 || e3 < 2) return NaN;
                if (r3 < 0 || r3 > 1) return NaN;
                if (0 === r3) return 0;
                if (1 === r3) return 1 / 0;
                var i2, u = (function(n4, r4, e4) {
                  var o2 = 0.5 - 0.5 * n4, i3 = t4.sqrt(t4.log(1 / (o2 * o2))), u2 = i3 + ((((-453642210148e-16 * i3 - 0.204231210125) * i3 - 0.342242088547) * i3 - 1) * i3 + 0.322232421088) / ((((0.0038560700634 * i3 + 0.10353775285) * i3 + 0.531103462366) * i3 + 0.588581570495) * i3 + 0.099348462606);
                  e4 < 120 && (u2 += (u2 * u2 * u2 + u2) / e4 / 4);
                  var a2 = 0.8832 - 0.2368 * u2;
                  return e4 < 120 && (a2 += -1.214 / e4 + 1.208 * u2 / e4), u2 * (a2 * t4.log(r4 - 1) + 1.4142);
                })(r3, e3, o), a = n3.tukey.cdf(u, e3, o) - r3;
                i2 = a > 0 ? t4.max(0, u - 1) : u + 1;
                for (var f, l = n3.tukey.cdf(i2, e3, o) - r3, c = 1; c < 50; c++) if (f = i2 - l * (i2 - u) / (l - a), a = l, u = i2, f < 0 && (f = 0, l = -r3), l = n3.tukey.cdf(f, e3, o) - r3, i2 = f, t4.abs(i2 - u) < 1e-4) return f;
                throw new Error("tukey.inv failed to converge");
              } });
            })(t3, Math), (function(n3, t4) {
              var r2, e2, o = Array.prototype.push, i2 = n3.utils.isArray;
              function u(t5) {
                return i2(t5) || t5 instanceof n3;
              }
              n3.extend({ add: function(t5, r3) {
                return u(r3) ? (u(r3[0]) || (r3 = [r3]), n3.map(t5, (function(n4, t6, e3) {
                  return n4 + r3[t6][e3];
                }))) : n3.map(t5, (function(n4) {
                  return n4 + r3;
                }));
              }, subtract: function(t5, r3) {
                return u(r3) ? (u(r3[0]) || (r3 = [r3]), n3.map(t5, (function(n4, t6, e3) {
                  return n4 - r3[t6][e3] || 0;
                }))) : n3.map(t5, (function(n4) {
                  return n4 - r3;
                }));
              }, divide: function(t5, r3) {
                return u(r3) ? (u(r3[0]) || (r3 = [r3]), n3.multiply(t5, n3.inv(r3))) : n3.map(t5, (function(n4) {
                  return n4 / r3;
                }));
              }, multiply: function(t5, r3) {
                var e3, o2, i3, a, f, l, c, s;
                if (void 0 === t5.length && void 0 === r3.length) return t5 * r3;
                if (f = t5.length, l = t5[0].length, c = n3.zeros(f, i3 = u(r3) ? r3[0].length : l), s = 0, u(r3)) {
                  for (; s < i3; s++) for (e3 = 0; e3 < f; e3++) {
                    for (a = 0, o2 = 0; o2 < l; o2++) a += t5[e3][o2] * r3[o2][s];
                    c[e3][s] = a;
                  }
                  return 1 === f && 1 === s ? c[0][0] : c;
                }
                return n3.map(t5, (function(n4) {
                  return n4 * r3;
                }));
              }, outer: function(t5, r3) {
                return n3.multiply(t5.map((function(n4) {
                  return [n4];
                })), [r3]);
              }, dot: function(t5, r3) {
                u(t5[0]) || (t5 = [t5]), u(r3[0]) || (r3 = [r3]);
                for (var e3, o2, i3 = 1 === t5[0].length && 1 !== t5.length ? n3.transpose(t5) : t5, a = 1 === r3[0].length && 1 !== r3.length ? n3.transpose(r3) : r3, f = [], l = 0, c = i3.length, s = i3[0].length; l < c; l++) {
                  for (f[l] = [], e3 = 0, o2 = 0; o2 < s; o2++) e3 += i3[l][o2] * a[l][o2];
                  f[l] = e3;
                }
                return 1 === f.length ? f[0] : f;
              }, pow: function(r3, e3) {
                return n3.map(r3, (function(n4) {
                  return t4.pow(n4, e3);
                }));
              }, exp: function(r3) {
                return n3.map(r3, (function(n4) {
                  return t4.exp(n4);
                }));
              }, log: function(r3) {
                return n3.map(r3, (function(n4) {
                  return t4.log(n4);
                }));
              }, abs: function(r3) {
                return n3.map(r3, (function(n4) {
                  return t4.abs(n4);
                }));
              }, norm: function(n4, r3) {
                var e3 = 0, o2 = 0;
                for (isNaN(r3) && (r3 = 2), u(n4[0]) && (n4 = n4[0]); o2 < n4.length; o2++) e3 += t4.pow(t4.abs(n4[o2]), r3);
                return t4.pow(e3, 1 / r3);
              }, angle: function(r3, e3) {
                return t4.acos(n3.dot(r3, e3) / (n3.norm(r3) * n3.norm(e3)));
              }, aug: function(n4, t5) {
                var r3, e3 = [];
                for (r3 = 0; r3 < n4.length; r3++) e3.push(n4[r3].slice());
                for (r3 = 0; r3 < e3.length; r3++) o.apply(e3[r3], t5[r3]);
                return e3;
              }, inv: function(t5) {
                for (var r3, e3 = t5.length, o2 = t5[0].length, i3 = n3.identity(e3, o2), u2 = n3.gauss_jordan(t5, i3), a = [], f = 0; f < e3; f++) for (a[f] = [], r3 = o2; r3 < u2[0].length; r3++) a[f][r3 - o2] = u2[f][r3];
                return a;
              }, det: function n4(t5) {
                if (2 === t5.length) return t5[0][0] * t5[1][1] - t5[0][1] * t5[1][0];
                for (var r3 = 0, e3 = 0; e3 < t5.length; e3++) {
                  for (var o2 = [], i3 = 1; i3 < t5.length; i3++) {
                    o2[i3 - 1] = [];
                    for (var u2 = 0; u2 < t5.length; u2++) u2 < e3 ? o2[i3 - 1][u2] = t5[i3][u2] : u2 > e3 && (o2[i3 - 1][u2 - 1] = t5[i3][u2]);
                  }
                  var a = e3 % 2 ? -1 : 1;
                  r3 += n4(o2) * t5[0][e3] * a;
                }
                return r3;
              }, gauss_elimination: function(r3, e3) {
                var o2, i3, u2, a, f = 0, l = 0, c = r3.length, s = r3[0].length, h = 1, g = 0, p = [];
                for (o2 = (r3 = n3.aug(r3, e3))[0].length, f = 0; f < c; f++) {
                  for (i3 = r3[f][f], l = f, a = f + 1; a < s; a++) i3 < t4.abs(r3[a][f]) && (i3 = r3[a][f], l = a);
                  if (l != f) for (a = 0; a < o2; a++) u2 = r3[f][a], r3[f][a] = r3[l][a], r3[l][a] = u2;
                  for (l = f + 1; l < c; l++) for (h = r3[l][f] / r3[f][f], a = f; a < o2; a++) r3[l][a] = r3[l][a] - h * r3[f][a];
                }
                for (f = c - 1; f >= 0; f--) {
                  for (g = 0, l = f + 1; l <= c - 1; l++) g += p[l] * r3[f][l];
                  p[f] = (r3[f][o2 - 1] - g) / r3[f][f];
                }
                return p;
              }, gauss_jordan: function(r3, e3) {
                var o2, i3, u2, a = n3.aug(r3, e3), f = a.length, l = a[0].length, c = 0;
                for (i3 = 0; i3 < f; i3++) {
                  var s = i3;
                  for (u2 = i3 + 1; u2 < f; u2++) t4.abs(a[u2][i3]) > t4.abs(a[s][i3]) && (s = u2);
                  var h = a[i3];
                  for (a[i3] = a[s], a[s] = h, u2 = i3 + 1; u2 < f; u2++) for (c = a[u2][i3] / a[i3][i3], o2 = i3; o2 < l; o2++) a[u2][o2] -= a[i3][o2] * c;
                }
                for (i3 = f - 1; i3 >= 0; i3--) {
                  for (c = a[i3][i3], u2 = 0; u2 < i3; u2++) for (o2 = l - 1; o2 > i3 - 1; o2--) a[u2][o2] -= a[i3][o2] * a[u2][i3] / c;
                  for (a[i3][i3] /= c, o2 = f; o2 < l; o2++) a[i3][o2] /= c;
                }
                return a;
              }, triaUpSolve: function(t5, r3) {
                var e3, o2 = t5[0].length, i3 = n3.zeros(1, o2)[0], u2 = false;
                return null != r3[0].length && (r3 = r3.map((function(n4) {
                  return n4[0];
                })), u2 = true), n3.arange(o2 - 1, -1, -1).forEach((function(u3) {
                  e3 = n3.arange(u3 + 1, o2).map((function(n4) {
                    return i3[n4] * t5[u3][n4];
                  })), i3[u3] = (r3[u3] - n3.sum(e3)) / t5[u3][u3];
                })), u2 ? i3.map((function(n4) {
                  return [n4];
                })) : i3;
              }, triaLowSolve: function(t5, r3) {
                var e3, o2 = t5[0].length, i3 = n3.zeros(1, o2)[0], u2 = false;
                return null != r3[0].length && (r3 = r3.map((function(n4) {
                  return n4[0];
                })), u2 = true), n3.arange(o2).forEach((function(o3) {
                  e3 = n3.arange(o3).map((function(n4) {
                    return t5[o3][n4] * i3[n4];
                  })), i3[o3] = (r3[o3] - n3.sum(e3)) / t5[o3][o3];
                })), u2 ? i3.map((function(n4) {
                  return [n4];
                })) : i3;
              }, lu: function(t5) {
                var r3, e3 = t5.length, o2 = n3.identity(e3), i3 = n3.zeros(t5.length, t5[0].length);
                return n3.arange(e3).forEach((function(n4) {
                  i3[0][n4] = t5[0][n4];
                })), n3.arange(1, e3).forEach((function(u2) {
                  n3.arange(u2).forEach((function(e4) {
                    r3 = n3.arange(e4).map((function(n4) {
                      return o2[u2][n4] * i3[n4][e4];
                    })), o2[u2][e4] = (t5[u2][e4] - n3.sum(r3)) / i3[e4][e4];
                  })), n3.arange(u2, e3).forEach((function(e4) {
                    r3 = n3.arange(u2).map((function(n4) {
                      return o2[u2][n4] * i3[n4][e4];
                    })), i3[u2][e4] = t5[r3.length][e4] - n3.sum(r3);
                  }));
                })), [o2, i3];
              }, cholesky: function(r3) {
                var e3, o2 = r3.length, i3 = n3.zeros(r3.length, r3[0].length);
                return n3.arange(o2).forEach((function(u2) {
                  e3 = n3.arange(u2).map((function(n4) {
                    return t4.pow(i3[u2][n4], 2);
                  })), i3[u2][u2] = t4.sqrt(r3[u2][u2] - n3.sum(e3)), n3.arange(u2 + 1, o2).forEach((function(t5) {
                    e3 = n3.arange(u2).map((function(n4) {
                      return i3[u2][n4] * i3[t5][n4];
                    })), i3[t5][u2] = (r3[u2][t5] - n3.sum(e3)) / i3[u2][u2];
                  }));
                })), i3;
              }, gauss_jacobi: function(r3, e3, o2, i3) {
                for (var u2, a, f, l, c = 0, s = 0, h = r3.length, g = [], p = [], m = []; c < h; c++) for (g[c] = [], p[c] = [], m[c] = [], s = 0; s < h; s++) c > s ? (g[c][s] = r3[c][s], p[c][s] = m[c][s] = 0) : c < s ? (p[c][s] = r3[c][s], g[c][s] = m[c][s] = 0) : (m[c][s] = r3[c][s], g[c][s] = p[c][s] = 0);
                for (f = n3.multiply(n3.multiply(n3.inv(m), n3.add(g, p)), -1), a = n3.multiply(n3.inv(m), e3), u2 = o2, l = n3.add(n3.multiply(f, o2), a), c = 2; t4.abs(n3.norm(n3.subtract(l, u2))) > i3; ) u2 = l, l = n3.add(n3.multiply(f, u2), a), c++;
                return l;
              }, gauss_seidel: function(r3, e3, o2, i3) {
                for (var u2, a, f, l, c, s = 0, h = r3.length, g = [], p = [], m = []; s < h; s++) for (g[s] = [], p[s] = [], m[s] = [], u2 = 0; u2 < h; u2++) s > u2 ? (g[s][u2] = r3[s][u2], p[s][u2] = m[s][u2] = 0) : s < u2 ? (p[s][u2] = r3[s][u2], g[s][u2] = m[s][u2] = 0) : (m[s][u2] = r3[s][u2], g[s][u2] = p[s][u2] = 0);
                for (l = n3.multiply(n3.multiply(n3.inv(n3.add(m, g)), p), -1), f = n3.multiply(n3.inv(n3.add(m, g)), e3), a = o2, c = n3.add(n3.multiply(l, o2), f), s = 2; t4.abs(n3.norm(n3.subtract(c, a))) > i3; ) a = c, c = n3.add(n3.multiply(l, a), f), s += 1;
                return c;
              }, SOR: function(r3, e3, o2, i3, u2) {
                for (var a, f, l, c, s, h = 0, g = r3.length, p = [], m = [], d = []; h < g; h++) for (p[h] = [], m[h] = [], d[h] = [], a = 0; a < g; a++) h > a ? (p[h][a] = r3[h][a], m[h][a] = d[h][a] = 0) : h < a ? (m[h][a] = r3[h][a], p[h][a] = d[h][a] = 0) : (d[h][a] = r3[h][a], p[h][a] = m[h][a] = 0);
                for (c = n3.multiply(n3.inv(n3.add(d, n3.multiply(p, u2))), n3.subtract(n3.multiply(d, 1 - u2), n3.multiply(m, u2))), l = n3.multiply(n3.multiply(n3.inv(n3.add(d, n3.multiply(p, u2))), e3), u2), f = o2, s = n3.add(n3.multiply(c, o2), l), h = 2; t4.abs(n3.norm(n3.subtract(s, f))) > i3; ) f = s, s = n3.add(n3.multiply(c, f), l), h++;
                return s;
              }, householder: function(r3) {
                for (var e3, o2, i3, u2, a = r3.length, f = r3[0].length, l = 0, c = [], s = []; l < a - 1; l++) {
                  for (e3 = 0, u2 = l + 1; u2 < f; u2++) e3 += r3[u2][l] * r3[u2][l];
                  for (e3 = (r3[l + 1][l] > 0 ? -1 : 1) * t4.sqrt(e3), o2 = t4.sqrt((e3 * e3 - r3[l + 1][l] * e3) / 2), (c = n3.zeros(a, 1))[l + 1][0] = (r3[l + 1][l] - e3) / (2 * o2), i3 = l + 2; i3 < a; i3++) c[i3][0] = r3[i3][l] / (2 * o2);
                  s = n3.subtract(n3.identity(a, f), n3.multiply(n3.multiply(c, n3.transpose(c)), 2)), r3 = n3.multiply(s, n3.multiply(r3, s));
                }
                return r3;
              }, QR: (r2 = n3.sum, e2 = n3.arange, function(o2) {
                var i3, u2, a, f = o2.length, l = o2[0].length, c = n3.zeros(l, l);
                for (o2 = n3.copy(o2), u2 = 0; u2 < l; u2++) {
                  for (c[u2][u2] = t4.sqrt(r2(e2(f).map((function(n4) {
                    return o2[n4][u2] * o2[n4][u2];
                  })))), i3 = 0; i3 < f; i3++) o2[i3][u2] = o2[i3][u2] / c[u2][u2];
                  for (a = u2 + 1; a < l; a++) for (c[u2][a] = r2(e2(f).map((function(n4) {
                    return o2[n4][u2] * o2[n4][a];
                  }))), i3 = 0; i3 < f; i3++) o2[i3][a] = o2[i3][a] - o2[i3][u2] * c[u2][a];
                }
                return [o2, c];
              }), lstsq: function(t5, r3) {
                var e3 = false;
                void 0 === r3[0].length && (r3 = r3.map((function(n4) {
                  return [n4];
                })), e3 = true);
                var o2 = n3.QR(t5), i3 = o2[0], u2 = o2[1], a = t5[0].length, f = n3.slice(i3, { col: { end: a } }), l = (function(t6) {
                  var r4 = (t6 = n3.copy(t6)).length, e4 = n3.identity(r4);
                  return n3.arange(r4 - 1, -1, -1).forEach((function(r5) {
                    n3.sliceAssign(e4, { row: r5 }, n3.divide(n3.slice(e4, { row: r5 }), t6[r5][r5])), n3.sliceAssign(t6, { row: r5 }, n3.divide(n3.slice(t6, { row: r5 }), t6[r5][r5])), n3.arange(r5).forEach((function(o3) {
                      var i4 = n3.multiply(t6[o3][r5], -1), u3 = n3.slice(t6, { row: o3 }), a2 = n3.multiply(n3.slice(t6, { row: r5 }), i4);
                      n3.sliceAssign(t6, { row: o3 }, n3.add(u3, a2));
                      var f2 = n3.slice(e4, { row: o3 }), l2 = n3.multiply(n3.slice(e4, { row: r5 }), i4);
                      n3.sliceAssign(e4, { row: o3 }, n3.add(f2, l2));
                    }));
                  })), e4;
                })(n3.slice(u2, { row: { end: a } })), c = n3.transpose(f);
                void 0 === c[0].length && (c = [c]);
                var s = n3.multiply(n3.multiply(l, c), r3);
                return void 0 === s.length && (s = [[s]]), e3 ? s.map((function(n4) {
                  return n4[0];
                })) : s;
              }, jacobi: function(r3) {
                for (var e3, o2, i3, u2, a, f, l, c = 1, s = r3.length, h = n3.identity(s, s), g = []; 1 === c; ) {
                  for (a = r3[0][1], i3 = 0, u2 = 1, e3 = 0; e3 < s; e3++) for (o2 = 0; o2 < s; o2++) e3 != o2 && a < t4.abs(r3[e3][o2]) && (a = t4.abs(r3[e3][o2]), i3 = e3, u2 = o2);
                  for (f = r3[i3][i3] === r3[u2][u2] ? r3[i3][u2] > 0 ? t4.PI / 4 : -t4.PI / 4 : t4.atan(2 * r3[i3][u2] / (r3[i3][i3] - r3[u2][u2])) / 2, (l = n3.identity(s, s))[i3][i3] = t4.cos(f), l[i3][u2] = -t4.sin(f), l[u2][i3] = t4.sin(f), l[u2][u2] = t4.cos(f), h = n3.multiply(h, l), r3 = n3.multiply(n3.multiply(n3.inv(l), r3), l), c = 0, e3 = 1; e3 < s; e3++) for (o2 = 1; o2 < s; o2++) e3 != o2 && t4.abs(r3[e3][o2]) > 1e-3 && (c = 1);
                }
                for (e3 = 0; e3 < s; e3++) g.push(r3[e3][e3]);
                return [h, g];
              }, rungekutta: function(n4, t5, r3, e3, o2, i3) {
                var u2, a, f;
                if (2 === i3) for (; e3 <= r3; ) o2 += ((u2 = t5 * n4(e3, o2)) + (a = t5 * n4(e3 + t5, o2 + u2))) / 2, e3 += t5;
                if (4 === i3) for (; e3 <= r3; ) o2 += ((u2 = t5 * n4(e3, o2)) + 2 * (a = t5 * n4(e3 + t5 / 2, o2 + u2 / 2)) + 2 * (f = t5 * n4(e3 + t5 / 2, o2 + a / 2)) + t5 * n4(e3 + t5, o2 + f)) / 6, e3 += t5;
                return o2;
              }, romberg: function(n4, r3, e3, o2) {
                for (var i3, u2, a, f, l, c = 0, s = (e3 - r3) / 2, h = [], g = [], p = []; c < o2 / 2; ) {
                  for (l = n4(r3), a = r3, f = 0; a <= e3; a += s, f++) h[f] = a;
                  for (i3 = h.length, a = 1; a < i3 - 1; a++) l += (a % 2 != 0 ? 4 : 2) * n4(h[a]);
                  l = s / 3 * (l + n4(e3)), p[c] = l, s /= 2, c++;
                }
                for (u2 = p.length, i3 = 1; 1 !== u2; ) {
                  for (a = 0; a < u2 - 1; a++) g[a] = (t4.pow(4, i3) * p[a + 1] - p[a]) / (t4.pow(4, i3) - 1);
                  u2 = g.length, p = g, g = [], i3++;
                }
                return p;
              }, richardson: function(n4, r3, e3, o2) {
                function i3(n5, t5) {
                  for (var r4, e4 = 0, o3 = n5.length; e4 < o3; e4++) n5[e4] === t5 && (r4 = e4);
                  return r4;
                }
                for (var u2, a, f, l, c, s = t4.abs(e3 - n4[i3(n4, e3) + 1]), h = 0, g = [], p = []; o2 >= s; ) u2 = i3(n4, e3 + o2), a = i3(n4, e3), g[h] = (r3[u2] - 2 * r3[a] + r3[2 * a - u2]) / (o2 * o2), o2 /= 2, h++;
                for (l = g.length, f = 1; 1 != l; ) {
                  for (c = 0; c < l - 1; c++) p[c] = (t4.pow(4, f) * g[c + 1] - g[c]) / (t4.pow(4, f) - 1);
                  l = p.length, g = p, p = [], f++;
                }
                return g;
              }, simpson: function(n4, t5, r3, e3) {
                for (var o2, i3 = (r3 - t5) / e3, u2 = n4(t5), a = [], f = t5, l = 0, c = 1; f <= r3; f += i3, l++) a[l] = f;
                for (o2 = a.length; c < o2 - 1; c++) u2 += (c % 2 != 0 ? 4 : 2) * n4(a[c]);
                return i3 / 3 * (u2 + n4(r3));
              }, hermite: function(n4, t5, r3, e3) {
                for (var o2, i3 = n4.length, u2 = 0, a = 0, f = [], l = [], c = [], s = []; a < i3; a++) {
                  for (f[a] = 1, o2 = 0; o2 < i3; o2++) a != o2 && (f[a] *= (e3 - n4[o2]) / (n4[a] - n4[o2]));
                  for (l[a] = 0, o2 = 0; o2 < i3; o2++) a != o2 && (l[a] += 1 / (n4[a] - n4[o2]));
                  c[a] = (1 - 2 * (e3 - n4[a]) * l[a]) * (f[a] * f[a]), s[a] = (e3 - n4[a]) * (f[a] * f[a]), u2 += c[a] * t5[a] + s[a] * r3[a];
                }
                return u2;
              }, lagrange: function(n4, t5, r3) {
                for (var e3, o2, i3 = 0, u2 = 0, a = n4.length; u2 < a; u2++) {
                  for (o2 = t5[u2], e3 = 0; e3 < a; e3++) u2 != e3 && (o2 *= (r3 - n4[e3]) / (n4[u2] - n4[e3]));
                  i3 += o2;
                }
                return i3;
              }, cubic_spline: function(t5, r3, e3) {
                for (var o2, i3, u2 = t5.length, a = 0, f = [], l = [], c = [], s = [], h = [], g = []; a < u2 - 1; a++) s[a] = t5[a + 1] - t5[a];
                for (c[0] = 0, a = 1; a < u2 - 1; a++) c[a] = 3 / s[a] * (r3[a + 1] - r3[a]) - 3 / s[a - 1] * (r3[a] - r3[a - 1]);
                for (a = 1; a < u2 - 1; a++) f[a] = [], l[a] = [], f[a][a - 1] = s[a - 1], f[a][a] = 2 * (s[a - 1] + s[a]), f[a][a + 1] = s[a], l[a][0] = c[a];
                for (i3 = n3.multiply(n3.inv(f), l), o2 = 0; o2 < u2 - 1; o2++) h[o2] = (r3[o2 + 1] - r3[o2]) / s[o2] - s[o2] * (i3[o2 + 1][0] + 2 * i3[o2][0]) / 3, g[o2] = (i3[o2 + 1][0] - i3[o2][0]) / (3 * s[o2]);
                for (o2 = 0; o2 < u2 && !(t5[o2] > e3); o2++) ;
                return r3[o2 -= 1] + (e3 - t5[o2]) * h[o2] + n3.sq(e3 - t5[o2]) * i3[o2] + (e3 - t5[o2]) * n3.sq(e3 - t5[o2]) * g[o2];
              }, gauss_quadrature: function() {
                throw new Error("gauss_quadrature not yet implemented");
              }, PCA: function(t5) {
                var r3, e3, o2, i3, u2, a = t5.length, f = t5[0].length, l = 0, c = [], s = [], h = [], g = [], p = [], m = [], d = [];
                for (l = 0; l < a; l++) c[l] = n3.sum(t5[l]) / f;
                for (l = 0; l < f; l++) for (p[l] = [], r3 = 0; r3 < a; r3++) p[l][r3] = t5[r3][l] - c[r3];
                for (p = n3.transpose(p), l = 0; l < a; l++) for (m[l] = [], r3 = 0; r3 < a; r3++) m[l][r3] = n3.dot([p[l]], [p[r3]]) / (f - 1);
                for (u2 = (o2 = n3.jacobi(m))[0], s = o2[1], d = n3.transpose(u2), l = 0; l < s.length; l++) for (r3 = l; r3 < s.length; r3++) s[l] < s[r3] && (e3 = s[l], s[l] = s[r3], s[r3] = e3, h = d[l], d[l] = d[r3], d[r3] = h);
                for (i3 = n3.transpose(p), l = 0; l < a; l++) for (g[l] = [], r3 = 0; r3 < i3.length; r3++) g[l][r3] = n3.dot([d[l]], [i3[r3]]);
                return [t5, s, d, g];
              } }), (function(t5) {
                for (var r3 = 0; r3 < t5.length; r3++) !(function(t6) {
                  n3.fn[t6] = function(r4, e3) {
                    var o2 = this;
                    return e3 ? (setTimeout((function() {
                      e3.call(o2, n3.fn[t6].call(o2, r4));
                    }), 15), this) : "number" == typeof n3[t6](this, r4) ? n3[t6](this, r4) : n3(n3[t6](this, r4));
                  };
                })(t5[r3]);
              })("add divide multiply subtract dot pow exp log abs norm angle".split(" "));
            })(t3, Math), (function(n3, t4) {
              var r2 = [].slice, e2 = n3.utils.isNumber, o = n3.utils.isArray;
              function i2(n4, r3, e3, o2) {
                if (n4 > 1 || e3 > 1 || n4 <= 0 || e3 <= 0) throw new Error("Proportions should be greater than 0 and less than 1");
                var i3 = (n4 * r3 + e3 * o2) / (r3 + o2);
                return (n4 - e3) / t4.sqrt(i3 * (1 - i3) * (1 / r3 + 1 / o2));
              }
              n3.extend({ zscore: function() {
                var t5 = r2.call(arguments);
                return e2(t5[1]) ? (t5[0] - t5[1]) / t5[2] : (t5[0] - n3.mean(t5[1])) / n3.stdev(t5[1], t5[2]);
              }, ztest: function() {
                var e3, i3 = r2.call(arguments);
                return o(i3[1]) ? (e3 = n3.zscore(i3[0], i3[1], i3[3]), 1 === i3[2] ? n3.normal.cdf(-t4.abs(e3), 0, 1) : 2 * n3.normal.cdf(-t4.abs(e3), 0, 1)) : i3.length > 2 ? (e3 = n3.zscore(i3[0], i3[1], i3[2]), 1 === i3[3] ? n3.normal.cdf(-t4.abs(e3), 0, 1) : 2 * n3.normal.cdf(-t4.abs(e3), 0, 1)) : (e3 = i3[0], 1 === i3[1] ? n3.normal.cdf(-t4.abs(e3), 0, 1) : 2 * n3.normal.cdf(-t4.abs(e3), 0, 1));
              } }), n3.extend(n3.fn, { zscore: function(n4, t5) {
                return (n4 - this.mean()) / this.stdev(t5);
              }, ztest: function(r3, e3, o2) {
                var i3 = t4.abs(this.zscore(r3, o2));
                return 1 === e3 ? n3.normal.cdf(-i3, 0, 1) : 2 * n3.normal.cdf(-i3, 0, 1);
              } }), n3.extend({ tscore: function() {
                var e3 = r2.call(arguments);
                return 4 === e3.length ? (e3[0] - e3[1]) / (e3[2] / t4.sqrt(e3[3])) : (e3[0] - n3.mean(e3[1])) / (n3.stdev(e3[1], true) / t4.sqrt(e3[1].length));
              }, ttest: function() {
                var o2, i3 = r2.call(arguments);
                return 5 === i3.length ? (o2 = t4.abs(n3.tscore(i3[0], i3[1], i3[2], i3[3])), 1 === i3[4] ? n3.studentt.cdf(-o2, i3[3] - 1) : 2 * n3.studentt.cdf(-o2, i3[3] - 1)) : e2(i3[1]) ? (o2 = t4.abs(i3[0]), 1 == i3[2] ? n3.studentt.cdf(-o2, i3[1] - 1) : 2 * n3.studentt.cdf(-o2, i3[1] - 1)) : (o2 = t4.abs(n3.tscore(i3[0], i3[1])), 1 == i3[2] ? n3.studentt.cdf(-o2, i3[1].length - 1) : 2 * n3.studentt.cdf(-o2, i3[1].length - 1));
              } }), n3.extend(n3.fn, { tscore: function(n4) {
                return (n4 - this.mean()) / (this.stdev(true) / t4.sqrt(this.cols()));
              }, ttest: function(r3, e3) {
                return 1 === e3 ? 1 - n3.studentt.cdf(t4.abs(this.tscore(r3)), this.cols() - 1) : 2 * n3.studentt.cdf(-t4.abs(this.tscore(r3)), this.cols() - 1);
              } }), n3.extend({ anovafscore: function() {
                var e3, o2, i3, u, a, f, l, c, s = r2.call(arguments);
                if (1 === s.length) {
                  for (a = new Array(s[0].length), l = 0; l < s[0].length; l++) a[l] = s[0][l];
                  s = a;
                }
                for (o2 = new Array(), l = 0; l < s.length; l++) o2 = o2.concat(s[l]);
                for (i3 = n3.mean(o2), e3 = 0, l = 0; l < s.length; l++) e3 += s[l].length * t4.pow(n3.mean(s[l]) - i3, 2);
                for (e3 /= s.length - 1, f = 0, l = 0; l < s.length; l++) for (u = n3.mean(s[l]), c = 0; c < s[l].length; c++) f += t4.pow(s[l][c] - u, 2);
                return e3 / (f / (o2.length - s.length));
              }, anovaftest: function() {
                var t5, o2, i3, u, a = r2.call(arguments);
                if (e2(a[0])) return 1 - n3.centralF.cdf(a[0], a[1], a[2]);
                var f = n3.anovafscore(a);
                for (t5 = a.length - 1, i3 = 0, u = 0; u < a.length; u++) i3 += a[u].length;
                return o2 = i3 - t5 - 1, 1 - n3.centralF.cdf(f, t5, o2);
              }, ftest: function(t5, r3, e3) {
                return 1 - n3.centralF.cdf(t5, r3, e3);
              } }), n3.extend(n3.fn, { anovafscore: function() {
                return n3.anovafscore(this.toArray());
              }, anovaftes: function() {
                var t5, r3 = 0;
                for (t5 = 0; t5 < this.length; t5++) r3 += this[t5].length;
                return n3.ftest(this.anovafscore(), this.length - 1, r3 - this.length);
              } }), n3.extend({ qscore: function() {
                var o2, i3, u, a, f, l = r2.call(arguments);
                return e2(l[0]) ? (o2 = l[0], i3 = l[1], u = l[2], a = l[3], f = l[4]) : (o2 = n3.mean(l[0]), i3 = n3.mean(l[1]), u = l[0].length, a = l[1].length, f = l[2]), t4.abs(o2 - i3) / (f * t4.sqrt((1 / u + 1 / a) / 2));
              }, qtest: function() {
                var t5, e3 = r2.call(arguments);
                3 === e3.length ? (t5 = e3[0], e3 = e3.slice(1)) : 7 === e3.length ? (t5 = n3.qscore(e3[0], e3[1], e3[2], e3[3], e3[4]), e3 = e3.slice(5)) : (t5 = n3.qscore(e3[0], e3[1], e3[2]), e3 = e3.slice(3));
                var o2 = e3[0], i3 = e3[1];
                return 1 - n3.tukey.cdf(t5, i3, o2 - i3);
              }, tukeyhsd: function(t5) {
                for (var r3 = n3.pooledstdev(t5), e3 = t5.map((function(t6) {
                  return n3.mean(t6);
                })), o2 = t5.reduce((function(n4, t6) {
                  return n4 + t6.length;
                }), 0), i3 = [], u = 0; u < t5.length; ++u) for (var a = u + 1; a < t5.length; ++a) {
                  var f = n3.qtest(e3[u], e3[a], t5[u].length, t5[a].length, r3, o2, t5.length);
                  i3.push([[u, a], f]);
                }
                return i3;
              } }), n3.extend({ normalci: function() {
                var e3, o2 = r2.call(arguments), i3 = new Array(2);
                return e3 = 4 === o2.length ? t4.abs(n3.normal.inv(o2[1] / 2, 0, 1) * o2[2] / t4.sqrt(o2[3])) : t4.abs(n3.normal.inv(o2[1] / 2, 0, 1) * n3.stdev(o2[2]) / t4.sqrt(o2[2].length)), i3[0] = o2[0] - e3, i3[1] = o2[0] + e3, i3;
              }, tci: function() {
                var e3, o2 = r2.call(arguments), i3 = new Array(2);
                return e3 = 4 === o2.length ? t4.abs(n3.studentt.inv(o2[1] / 2, o2[3] - 1) * o2[2] / t4.sqrt(o2[3])) : t4.abs(n3.studentt.inv(o2[1] / 2, o2[2].length - 1) * n3.stdev(o2[2], true) / t4.sqrt(o2[2].length)), i3[0] = o2[0] - e3, i3[1] = o2[0] + e3, i3;
              }, significant: function(n4, t5) {
                return n4 < t5;
              } }), n3.extend(n3.fn, { normalci: function(t5, r3) {
                return n3.normalci(t5, r3, this.toArray());
              }, tci: function(t5, r3) {
                return n3.tci(t5, r3, this.toArray());
              } }), n3.extend(n3.fn, { oneSidedDifferenceOfProportions: function(t5, r3, e3, o2) {
                var u = i2(t5, r3, e3, o2);
                return n3.ztest(u, 1);
              }, twoSidedDifferenceOfProportions: function(t5, r3, e3, o2) {
                var u = i2(t5, r3, e3, o2);
                return n3.ztest(u, 2);
              } });
            })(t3, Math), t3.models = /* @__PURE__ */ (function() {
              function n3(n4, r3) {
                var e2 = n4.length, o = r3[0].length - 1, i2 = e2 - o - 1, u = t3.lstsq(r3, n4), a = t3.multiply(r3, u.map((function(n5) {
                  return [n5];
                }))).map((function(n5) {
                  return n5[0];
                })), f = t3.subtract(n4, a), l = t3.mean(n4), c = t3.sum(a.map((function(n5) {
                  return Math.pow(n5 - l, 2);
                }))), s = t3.sum(n4.map((function(n5, t4) {
                  return Math.pow(n5 - a[t4], 2);
                }))), h = c + s;
                return { exog: r3, endog: n4, nobs: e2, df_model: o, df_resid: i2, coef: u, predict: a, resid: f, ybar: l, SST: h, SSE: c, SSR: s, R2: c / h };
              }
              function r2(r3) {
                var e2, o, i2 = (e2 = r3.exog, o = e2[0].length, t3.arange(o).map((function(r4) {
                  var i3 = t3.arange(o).filter((function(n4) {
                    return n4 !== r4;
                  }));
                  return n3(t3.col(e2, r4).map((function(n4) {
                    return n4[0];
                  })), t3.col(e2, i3));
                }))), u = Math.sqrt(r3.SSR / r3.df_resid), a = i2.map((function(n4) {
                  var t4 = n4.SST, r4 = n4.R2;
                  return u / Math.sqrt(t4 * (1 - r4));
                })), f = r3.coef.map((function(n4, t4) {
                  return (n4 - 0) / a[t4];
                })), l = f.map((function(n4) {
                  var e3 = t3.studentt.cdf(n4, r3.df_resid);
                  return 2 * (e3 > 0.5 ? 1 - e3 : e3);
                })), c = t3.studentt.inv(0.975, r3.df_resid), s = r3.coef.map((function(n4, t4) {
                  var r4 = c * a[t4];
                  return [n4 - r4, n4 + r4];
                }));
                return { se: a, t: f, p: l, sigmaHat: u, interval95: s };
              }
              return { ols: function(e2, o) {
                var i2 = n3(e2, o), u = r2(i2), a = (function(n4) {
                  var r3, e3, o2, i3 = n4.R2 / n4.df_model / ((1 - n4.R2) / n4.df_resid);
                  return { F_statistic: i3, pvalue: 1 - (r3 = i3, e3 = n4.df_model, o2 = n4.df_resid, t3.beta.cdf(r3 / (o2 / e3 + r3), e3 / 2, o2 / 2)) };
                })(i2), f = 1 - (1 - i2.R2) * ((i2.nobs - 1) / i2.df_resid);
                return i2.t = u, i2.f = a, i2.adjust_R2 = f, i2;
              } };
            })(), t3.extend({ buildxmatrix: function() {
              for (var n3 = new Array(arguments.length), r2 = 0; r2 < arguments.length; r2++) {
                n3[r2] = [1].concat(arguments[r2]);
              }
              return t3(n3);
            }, builddxmatrix: function() {
              for (var n3 = new Array(arguments[0].length), r2 = 0; r2 < arguments[0].length; r2++) {
                n3[r2] = [1].concat(arguments[0][r2]);
              }
              return t3(n3);
            }, buildjxmatrix: function(n3) {
              for (var r2 = new Array(n3.length), e2 = 0; e2 < n3.length; e2++) r2[e2] = n3[e2];
              return t3.builddxmatrix(r2);
            }, buildymatrix: function(n3) {
              return t3(n3).transpose();
            }, buildjymatrix: function(n3) {
              return n3.transpose();
            }, matrixmult: function(n3, r2) {
              var e2, o, i2, u, a;
              if (n3.cols() == r2.rows()) {
                if (r2.rows() > 1) {
                  for (u = [], e2 = 0; e2 < n3.rows(); e2++) for (u[e2] = [], o = 0; o < r2.cols(); o++) {
                    for (a = 0, i2 = 0; i2 < n3.cols(); i2++) a += n3.toArray()[e2][i2] * r2.toArray()[i2][o];
                    u[e2][o] = a;
                  }
                  return t3(u);
                }
                for (u = [], e2 = 0; e2 < n3.rows(); e2++) for (u[e2] = [], o = 0; o < r2.cols(); o++) {
                  for (a = 0, i2 = 0; i2 < n3.cols(); i2++) a += n3.toArray()[e2][i2] * r2.toArray()[o];
                  u[e2][o] = a;
                }
                return t3(u);
              }
            }, regress: function(n3, r2) {
              var e2 = t3.xtranspxinv(n3), o = n3.transpose(), i2 = t3.matrixmult(t3(e2), o);
              return t3.matrixmult(i2, r2);
            }, regresst: function(n3, r2, e2) {
              var o = t3.regress(n3, r2), i2 = { anova: {} }, u = t3.jMatYBar(n3, o);
              i2.yBar = u;
              var a = r2.mean();
              i2.anova.residuals = t3.residuals(r2, u), i2.anova.ssr = t3.ssr(u, a), i2.anova.msr = i2.anova.ssr / (n3[0].length - 1), i2.anova.sse = t3.sse(r2, u), i2.anova.mse = i2.anova.sse / (r2.length - (n3[0].length - 1) - 1), i2.anova.sst = t3.sst(r2, a), i2.anova.mst = i2.anova.sst / (r2.length - 1), i2.anova.r2 = 1 - i2.anova.sse / i2.anova.sst, i2.anova.r2 < 0 && (i2.anova.r2 = 0), i2.anova.fratio = i2.anova.msr / i2.anova.mse, i2.anova.pvalue = t3.anovaftest(i2.anova.fratio, n3[0].length - 1, r2.length - (n3[0].length - 1) - 1), i2.anova.rmse = Math.sqrt(i2.anova.mse), i2.anova.r2adj = 1 - i2.anova.mse / i2.anova.mst, i2.anova.r2adj < 0 && (i2.anova.r2adj = 0), i2.stats = new Array(n3[0].length);
              for (var f, l, c, s = t3.xtranspxinv(n3), h = 0; h < o.length; h++) f = Math.sqrt(i2.anova.mse * Math.abs(s[h][h])), l = Math.abs(o[h] / f), c = t3.ttest(l, r2.length - n3[0].length - 1, e2), i2.stats[h] = [o[h], f, l, c];
              return i2.regress = o, i2;
            }, xtranspx: function(n3) {
              return t3.matrixmult(n3.transpose(), n3);
            }, xtranspxinv: function(n3) {
              var r2 = t3.matrixmult(n3.transpose(), n3);
              return t3.inv(r2);
            }, jMatYBar: function(n3, r2) {
              var e2 = t3.matrixmult(n3, r2);
              return new t3(e2);
            }, residuals: function(n3, r2) {
              return t3.matrixsubtract(n3, r2);
            }, ssr: function(n3, t4) {
              for (var r2 = 0, e2 = 0; e2 < n3.length; e2++) r2 += Math.pow(n3[e2] - t4, 2);
              return r2;
            }, sse: function(n3, t4) {
              for (var r2 = 0, e2 = 0; e2 < n3.length; e2++) r2 += Math.pow(n3[e2] - t4[e2], 2);
              return r2;
            }, sst: function(n3, t4) {
              for (var r2 = 0, e2 = 0; e2 < n3.length; e2++) r2 += Math.pow(n3[e2] - t4, 2);
              return r2;
            }, matrixsubtract: function(n3, r2) {
              for (var e2 = new Array(n3.length), o = 0; o < n3.length; o++) {
                e2[o] = new Array(n3[o].length);
                for (var i2 = 0; i2 < n3[o].length; i2++) e2[o][i2] = n3[o][i2] - r2[o][i2];
              }
              return t3(e2);
            } }), t3.jStat = t3, t3);
          }, 960: function(n2, t3, r2) {
            const e2 = r2(592);
            n2.exports = (function(n3) {
              function t4(n4, t5) {
                const r4 = t5.split(".");
                let e3 = n4;
                for (const n5 of r4) {
                  if (null == e3) return;
                  e3 = e3[n5];
                }
                return e3;
              }
              for (let r4 = 0; r4 < Object.keys(e2).length; r4++) {
                let o2, i3 = Object.keys(e2)[r4], u2 = [];
                if ("object" == typeof e2[i3]) {
                  u2 = Object.keys(e2[i3]), o2 = Object.values(e2[i3]);
                  for (let n4 = 0; n4 < o2.length; n4++) if ("object" == typeof o2[n4]) {
                    let t5 = u2[n4];
                    e2[i3][t5] && (u2 = [...u2, ...Object.keys(e2[i3][t5]).map(((n5) => t5 + "." + n5))], u2.splice(u2.indexOf(t5), 1));
                  }
                }
                if (u2.length < 1) n3[i3] = e2[i3];
                else for (let r5 = 0; r5 < u2.length; r5++) "function" == typeof t4(e2[i3], u2[r5]) && (n3[i3] = t4(e2[i3], u2[r5]));
              }
              let r3 = function(n4) {
                return "number" == typeof n4 && (n4 = parseInt(n4)), n4;
              }, o = null, i2 = null, u = null;
              n3.TABLE = function() {
                return u;
              }, n3.COLUMN = n3.COL = function() {
                return u.tracking && u.tracking.push(l.getColumnNameFromCoords(r3(o), r3(i2))), r3(o) + 1;
              }, n3.ROW = function() {
                return u.tracking && u.tracking.push(l.getColumnNameFromCoords(r3(o), r3(i2))), r3(i2) + 1;
              }, n3.CELL = function() {
                return l.getColumnNameFromCoords(o, i2);
              }, n3.VALUE = function(n4, t5, e3) {
                return u.getValueFromCoords(r3(n4) - 1, r3(t5) - 1, e3);
              }, n3.THISROWCELL = function(n4) {
                return u.getValueFromCoords(r3(n4) - 1, r3(i2));
              };
              const a = function(n4, t5) {
                for (let r4 = 0; r4 < n4.length; r4++) {
                  let e3 = l.getTokensFromRange(n4[r4]);
                  t5 = t5.replace(n4[r4], "[" + e3.join(",") + "]");
                }
                return t5;
              }, f = function(n4) {
                return "string" == typeof n4 && (n4 = n4.trim()), !isNaN(n4) && null !== n4 && "" !== n4;
              }, l = function(n4, t5, r4, e3, l2) {
                u = l2, o = r4, i2 = e3;
                let c = "", s = {};
                if (t5) if (t5.size) {
                  let n5, r5 = null;
                  t5.forEach((function(t6, r6) {
                    n5 = r6.replace(/!/g, "."), -1 !== n5.indexOf(".") && (n5 = n5.split("."), s[n5[0]] = true);
                  })), n5 = Object.keys(s);
                  for (let t6 = 0; t6 < n5.length; t6++) c += "var " + n5[t6] + " = {};";
                  t5.forEach((function(e4, o2) {
                    n5 = o2.replace(/!/g, "."), null === e4 || f(e4) || (r5 = e4.match(/(('.*?'!)|(\w*!))?(\$?[A-Z]+\$?[0-9]*):(\$?[A-Z]+\$?[0-9]*)?/g), r5 && r5.length && (e4 = updateRanges(r5, e4))), n5.indexOf(".") > 0 ? c += n5 + " = " + t5.get(o2) + ";\n" : c += "var " + n5 + " = " + e4 + ";\n";
                  }));
                } else {
                  let n5 = Object.keys(t5);
                  if (n5.length) {
                    let r5, e4 = {};
                    for (let t6 = 0; t6 < n5.length; t6++) if (r5 = n5[t6].replace(/\!/g, "."), r5.indexOf(".") > 0) {
                      let n6 = n6.split(".");
                      e4[n6[0]] = {};
                    }
                    r5 = Object.keys(e4);
                    for (let n6 = 0; n6 < r5.length; n6++) c += "var " + r5[n6] + " = {};";
                    for (let e5 = 0; e5 < n5.length; e5++) {
                      if (r5 = n5[e5].replace(/!/g, "."), null !== t5[n5[e5]] && !f(t5[n5[e5]])) {
                        let r6 = t5[n5[e5]].match(/(('.*?'!)|(\w*!))?(\$?[A-Z]+\$?[0-9]*):(\$?[A-Z]+\$?[0-9]*)?/g);
                        r6 && r6.length && (t5[n5[e5]] = a(r6, t5[n5[e5]]));
                      }
                      r5.indexOf(".") > 0 ? c += r5 + " = " + t5[n5[e5]] + ";\n" : c += "var " + r5 + " = " + t5[n5[e5]] + ";\n";
                    }
                  }
                }
                let h = (n4 = (function(n5, t6) {
                  let r5 = "", e4 = 0, o2 = ["=", "!", ">", "<"];
                  for (let i3 = 0; i3 < n5.length; i3++) '"' === n5[i3] && (e4 = 0 === e4 ? 1 : 0), 1 === e4 ? r5 += n5[i3] : (r5 += n5[i3].toUpperCase(), true === t6 && i3 > 0 && "=" === n5[i3] && -1 === o2.indexOf(n5[i3 - 1]) && -1 === o2.indexOf(n5[i3 + 1]) && (r5 += "="));
                  return r5 = r5.replace(/\^/g, "**"), r5 = r5.replace(/<>/g, "!="), r5 = r5.replace(/&/g, "+"), r5 = r5.replace(/\$/g, ""), r5;
                })(n4 = (n4 = n4.replace(/\$/g, "")).replace(/!/g, "."), true)).match(/(('.*?'!)|(\w*!))?(\$?[A-Z]+\$?[0-9]*):(\$?[A-Z]+\$?[0-9]*)?/g);
                h && h.length && (n4 = a(h, n4));
                let g = new Function(c + "; return " + n4)();
                return null === g && (g = 0), g;
              };
              return l.getColumnNameFromCoords = function(n4, t5) {
                return r4 = parseInt(n4), e3 = "", r4 > 701 ? (e3 += String.fromCharCode(64 + parseInt(r4 / 676)), e3 += String.fromCharCode(64 + parseInt(r4 % 676 / 26))) : r4 > 25 && (e3 += String.fromCharCode(64 + parseInt(r4 / 26))), e3 + String.fromCharCode(65 + r4 % 26) + (parseInt(t5) + 1);
                var r4, e3;
              }, l.getCoordsFromColumnName = function(n4) {
                var t5 = /^[a-zA-Z]+/.exec(n4);
                if (t5) {
                  for (var r4 = 0, e3 = 0; e3 < t5[0].length; e3++) r4 += parseInt(t5[0].charCodeAt(e3) - 64) * Math.pow(26, t5[0].length - 1 - e3);
                  --r4 < 0 && (r4 = 0);
                  var o2 = parseInt(/[0-9]+$/.exec(n4)) || null;
                  return o2 > 0 && o2--, [r4, o2];
                }
              }, l.getRangeFromTokens = function(n4) {
                n4 = n4.filter((function(n5) {
                  return "#REF!" != n5;
                }));
                for (var t5 = "", r4 = "", e3 = 0; e3 < n4.length; e3++) n4[e3].indexOf(".") >= 0 ? t5 = "." : n4[e3].indexOf("!") >= 0 && (t5 = "!"), t5 && (r4 = n4[e3].split(t5), n4[e3] = r4[1], r4 = r4[0] + t5);
                return n4.sort((function(n5, t6) {
                  var r5 = Helpers.getCoordsFromColumnName(n5), e4 = Helpers.getCoordsFromColumnName(t6);
                  return r5[1] > e4[1] ? 1 : r5[1] < e4[1] ? -1 : r5[0] > e4[0] ? 1 : r5[0] < e4[0] ? -1 : 0;
                })), n4.length ? r4 + (n4[0] + ":") + n4[n4.length - 1] : "#REF!";
              }, l.getTokensFromRange = function(n4) {
                if (n4.indexOf(".") > 0) {
                  var t5 = n4.split(".");
                  n4 = t5[1], t5 = t5[0] + ".";
                } else n4.indexOf("!") > 0 ? (t5 = n4.split("!"), n4 = t5[1], t5 = t5[0] + "!") : t5 = "";
                n4 = n4.split(":");
                var r4 = l.getCoordsFromColumnName(n4[0]), e3 = l.getCoordsFromColumnName(n4[1]);
                if (r4[0] <= e3[0]) var o2 = r4[0], i3 = e3[0];
                else o2 = e3[0], i3 = r4[0];
                if (null === r4[1] && null == e3[1]) for (var u2 = null, a2 = null, f2 = Object.keys(vars), c = 0; c < f2.length; c++) {
                  var s = l.getCoordsFromColumnName(f2[c]);
                  s[0] === r4[0] && (null === u2 || s[1] < u2) && (u2 = s[1]), s[0] === e3[0] && (null === a2 || s[1] > a2) && (a2 = s[1]);
                }
                else r4[1] <= e3[1] ? (u2 = r4[1], a2 = e3[1]) : (u2 = e3[1], a2 = r4[1]);
                for (var h = [], g = u2; g <= a2; g++) {
                  var p = [];
                  for (c = o2; c <= i3; c++) p.push(t5 + l.getColumnNameFromCoords(c, g));
                  h.push(p);
                }
                return h;
              }, l.setFormula = function(t5) {
                let r4 = Object.keys(t5);
                for (let e3 = 0; e3 < r4.length; e3++) "function" == typeof t5[r4[e3]] && (n3[r4[e3]] = t5[r4[e3]]);
              }, l.basic = true, l;
            })("undefined" == typeof window ? r2.g : window);
          }, 592: function(n2, t3, r2) {
            "use strict";
            var e2 = r2(162), o = r2(765);
            const i2 = new Error("#NULL!"), u = new Error("#DIV/0!"), a = new Error("#VALUE!"), f = new Error("#REF!"), l = new Error("#NAME?"), c = new Error("#NUM!"), s = new Error("#N/A"), h = new Error("#ERROR!"), g = new Error("#GETTING_DATA");
            var p = Object.freeze({ __proto__: null, data: g, div0: u, error: h, na: s, name: l, nil: i2, num: c, ref: f, value: a });
            function m(n3) {
              const t4 = [];
              return d(n3, ((n4) => {
                t4.push(n4);
              })), t4;
            }
            function d(n3, t4) {
              let r3 = -1;
              const e3 = n3.length;
              for (; ++r3 < e3 && false !== t4(n3[r3], r3, n3); ) ;
              return n3;
            }
            function v(n3) {
              let t4, r3 = n3.length;
              for (; r3--; ) if (t4 = n3[r3], "number" != typeof t4) if (true !== t4) if (false !== t4) {
                if ("string" == typeof t4) {
                  const e3 = R(t4);
                  n3[r3] = e3 instanceof Error ? 0 : e3;
                }
              } else n3[r3] = 0;
              else n3[r3] = 1;
              return n3;
            }
            function E(n3, t4) {
              if (!n3) return a;
              n3.every(((n4) => Array.isArray(n4))) && 0 !== n3.length || (n3 = [[...n3]]), n3.map(((t5, r4) => {
                t5.map(((t6, e4) => {
                  t6 || (n3[r4][e4] = 0);
                }));
              }));
              const r3 = n3.reduce(((t5, r4, e4) => r4.length > n3[t5].length ? e4 : t5), 0), e3 = n3[r3].length;
              return n3.map(((n4) => [...n4, ...Array(e3 - n4.length).fill(t4 || 0)]));
            }
            function M() {
              let n3;
              if (1 === arguments.length) {
                const r3 = arguments[0];
                n3 = null != (t4 = r3) && "number" == typeof t4.length && "string" != typeof t4 ? m.apply(null, arguments) : [r3];
              } else n3 = Array.from(arguments);
              for (var t4; !w(n3); ) n3 = N(n3);
              return n3;
            }
            function N(n3) {
              return n3 && n3.reduce ? n3.reduce(((n4, t4) => {
                const r3 = Array.isArray(n4), e3 = Array.isArray(t4);
                return r3 && e3 ? n4.concat(t4) : r3 ? (n4.push(t4), n4) : e3 ? [n4].concat(t4) : [n4, t4];
              })) : [n3];
            }
            function w(n3) {
              if (!n3) return false;
              for (let t4 = 0; t4 < n3.length; ++t4) if (Array.isArray(n3[t4])) return false;
              return true;
            }
            function y2(n3, t4) {
              return t4 = t4 || 1, n3 && "function" == typeof n3.slice ? n3.slice(t4) : n3;
            }
            function I(n3) {
              return n3 ? n3[0].map(((t4, r3) => n3.map(((n4) => n4[r3])))) : a;
            }
            function b(n3, t4) {
              let r3 = null;
              return d(n3, ((n4, e3) => {
                if (n4[0] === t4) return r3 = e3, false;
              })), null == r3 ? a : r3;
            }
            function T() {
              for (let n3 = 0; n3 < arguments.length; n3++) if (arguments[n3] instanceof Error) return arguments[n3];
            }
            function S() {
              let n3 = arguments.length;
              for (; n3--; ) if (arguments[n3] instanceof Error) return true;
              return false;
            }
            function A(n3) {
              const t4 = 1e14;
              return Math.round(n3 * t4) / t4;
            }
            function C() {
              return M.apply(null, arguments).filter(((n3) => "number" == typeof n3));
            }
            function D(n3) {
              if ("boolean" == typeof n3) return n3;
              if (n3 instanceof Error) return n3;
              if ("number" == typeof n3) return 0 !== n3;
              if ("string" == typeof n3) {
                const t4 = n3.toUpperCase();
                if ("TRUE" === t4) return true;
                if ("FALSE" === t4) return false;
              }
              return n3 instanceof Date && !isNaN(n3) || a;
            }
            function O(n3) {
              if (!isNaN(n3)) {
                if (n3 instanceof Date) return new Date(n3);
                const t4 = parseFloat(n3);
                return t4 < 0 || t4 >= 2958466 ? c : (function(n4) {
                  n4 < 60 && (n4 += 1);
                  const t5 = Math.floor(n4 - 25569), r3 = new Date(86400 * t5 * 1e3), e3 = n4 - Math.floor(n4) + 1e-7;
                  let o2 = Math.floor(86400 * e3);
                  const i3 = o2 % 60;
                  o2 -= i3;
                  const u2 = Math.floor(o2 / 3600), a2 = Math.floor(o2 / 60) % 60;
                  let f2 = r3.getUTCDate(), l2 = r3.getUTCMonth();
                  return n4 >= 60 && n4 < 61 && (f2 = 29, l2 = 1), new Date(r3.getUTCFullYear(), l2, f2, u2, a2, i3);
                })(t4);
              }
              return "string" != typeof n3 || (n3 = /(\d{4})-(\d\d?)-(\d\d?)$/.test(n3) ? /* @__PURE__ */ new Date(n3 + "T00:00:00.000") : new Date(n3), isNaN(n3)) ? a : n3;
            }
            function x2(n3) {
              let t4, r3 = n3.length;
              for (; r3--; ) {
                if (t4 = O(n3[r3]), t4 === a) return t4;
                n3[r3] = t4;
              }
              return n3;
            }
            function R(n3) {
              return n3 instanceof Error ? n3 : null == n3 ? 0 : ("boolean" == typeof n3 && (n3 = +n3), isNaN(n3) || "" === n3 ? a : parseFloat(n3));
            }
            function P(n3) {
              let t4, r3;
              if (!n3 || 0 === (t4 = n3.length)) return a;
              for (; t4--; ) {
                if (n3[t4] instanceof Error) return n3[t4];
                if (r3 = R(n3[t4]), r3 instanceof Error) return r3;
                n3[t4] = r3;
              }
              return n3;
            }
            function L(n3) {
              return n3 instanceof Error ? n3 : null == n3 ? "" : n3.toString();
            }
            function F() {
              let n3 = arguments.length;
              for (; n3--; ) if ("string" == typeof arguments[n3]) return true;
              return false;
            }
            function q(n3) {
              return null != n3;
            }
            const U = "=", _ = [">", ">=", "<", "<=", "=", "<>"], V = "operator", k = "literal", j = [V, k], Y = V, G = k;
            function H(n3, t4) {
              if (-1 === j.indexOf(t4)) throw new Error("Unsupported token type: " + t4);
              return { value: n3, type: t4 };
            }
            function X(n3) {
              return (function(n4) {
                let t4 = "";
                const r3 = [];
                for (let e3 = 0; e3 < n4.length; e3++) {
                  const o2 = n4[e3];
                  0 === e3 && _.indexOf(o2) >= 0 ? r3.push(H(o2, Y)) : t4 += o2;
                }
                return t4.length > 0 && r3.push(H((function(n5) {
                  return "string" != typeof n5 || /^\d+(\.\d+)?$/.test(n5) && (n5 = -1 === n5.indexOf(".") ? parseInt(n5, 10) : parseFloat(n5)), n5;
                })(t4), G)), r3.length > 0 && r3[0].type !== Y && r3.unshift(H(U, Y)), r3;
              })((function(n4) {
                const t4 = n4.length, r3 = [];
                let e3 = 0, o2 = "", i3 = "";
                for (; e3 < t4; ) {
                  const t5 = n4.charAt(e3);
                  switch (t5) {
                    case ">":
                    case "<":
                    case "=":
                      i3 += t5, o2.length > 0 && (r3.push(o2), o2 = "");
                      break;
                    default:
                      i3.length > 0 && (r3.push(i3), i3 = ""), o2 += t5;
                  }
                  e3++;
                }
                return o2.length > 0 && r3.push(o2), i3.length > 0 && r3.push(i3), r3;
              })(n3));
            }
            const B = function(n3) {
              const t4 = [];
              let r3;
              for (let e3 = 0; e3 < n3.length; e3++) {
                const o2 = n3[e3];
                switch (o2.type) {
                  case Y:
                    r3 = o2.value;
                    break;
                  case G:
                    t4.push(o2.value);
                }
              }
              return (function(n4, t5) {
                let r4 = false;
                switch (t5) {
                  case ">":
                    r4 = n4[0] > n4[1];
                    break;
                  case ">=":
                    r4 = n4[0] >= n4[1];
                    break;
                  case "<":
                    r4 = n4[0] < n4[1];
                    break;
                  case "<=":
                    r4 = n4[0] <= n4[1];
                    break;
                  case "=":
                    r4 = n4[0] == n4[1];
                    break;
                  case "<>":
                    r4 = n4[0] != n4[1];
                }
                return r4;
              })(t4, r3);
            }, $2 = {};
            function z(n3) {
              return [a, f, u, c, l, i2].indexOf(n3) >= 0 || "number" == typeof n3 && (isNaN(n3) || !isFinite(n3));
            }
            function W(n3) {
              return z(n3) || n3 === s;
            }
            function K(n3) {
              return true === n3 || false === n3;
            }
            function Q(n3) {
              return "number" == typeof n3 && !isNaN(n3) && isFinite(n3);
            }
            function Z(n3) {
              return "string" == typeof n3;
            }
            function J() {
              const n3 = [];
              for (let t4 = 0; t4 < arguments.length; ++t4) {
                let r3 = false;
                const e3 = arguments[t4];
                for (let t5 = 0; t5 < n3.length && (r3 = n3[t5] === e3, !r3); ++t5) ;
                r3 || n3.push(e3);
              }
              return n3;
            }
            function nn(n3, t4, r3, e3) {
              if (!t4 || !r3) return s;
              e3 = !(0 === e3 || false === e3);
              let o2 = s;
              const i3 = "number" == typeof n3;
              let u2 = false;
              for (let a2 = 0; a2 < t4.length; a2++) {
                const l2 = t4[a2];
                if (l2[0] === n3) {
                  o2 = r3 < l2.length + 1 ? l2[r3 - 1] : f;
                  break;
                }
                !u2 && (i3 && e3 && l2[0] <= n3 || e3 && "string" == typeof l2[0] && l2[0].localeCompare(n3) < 0) && (o2 = r3 < l2.length + 1 ? l2[r3 - 1] : f), i3 && l2[0] > n3 && (u2 = true);
              }
              return o2;
            }
            function tn() {
              const n3 = M(arguments).filter(q);
              if (0 === n3.length) return u;
              const t4 = T.apply(void 0, n3);
              if (t4) return t4;
              const r3 = C(n3), e3 = r3.length;
              let o2, i3 = 0, a2 = 0;
              for (let n4 = 0; n4 < e3; n4++) i3 += r3[n4], a2 += 1;
              return o2 = i3 / a2, isNaN(o2) && (o2 = c), o2;
            }
            function rn() {
              const n3 = M(arguments).filter(q);
              if (0 === n3.length) return u;
              const t4 = T.apply(void 0, n3);
              if (t4) return t4;
              const r3 = n3, e3 = r3.length;
              let o2, i3 = 0, a2 = 0;
              for (let n4 = 0; n4 < e3; n4++) {
                const t5 = r3[n4];
                "number" == typeof t5 && (i3 += t5), true === t5 && i3++, null !== t5 && a2++;
              }
              return o2 = i3 / a2, isNaN(o2) && (o2 = c), o2;
            }
            $2.TYPE = (n3) => {
              switch (n3) {
                case i2:
                  return 1;
                case u:
                  return 2;
                case a:
                  return 3;
                case f:
                  return 4;
                case l:
                  return 5;
                case c:
                  return 6;
                case s:
                  return 7;
                case g:
                  return 8;
              }
              return s;
            };
            const en = { DIST: function(n3, t4, r3, o2, i3, u2) {
              return arguments.length < 4 ? a : (i3 = void 0 === i3 ? 0 : i3, u2 = void 0 === u2 ? 1 : u2, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), i3 = R(i3), u2 = R(u2)) ? a : (n3 = (n3 - i3) / (u2 - i3), o2 ? e2.beta.cdf(n3, t4, r3) : e2.beta.pdf(n3, t4, r3)));
            }, INV: (n3, t4, r3, o2, i3) => (o2 = void 0 === o2 ? 0 : o2, i3 = void 0 === i3 ? 1 : i3, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), o2 = R(o2), i3 = R(i3)) ? a : e2.beta.inv(n3, t4, r3) * (i3 - o2) + o2) }, on = { DIST: (n3, t4, r3, o2) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3), o2 = R(o2)) ? a : o2 ? e2.binomial.cdf(n3, t4, r3) : e2.binomial.pdf(n3, t4, r3) };
            on.DIST.RANGE = (n3, t4, r3, e3) => {
              if (e3 = void 0 === e3 ? r3 : e3, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3))) return a;
              let o2 = 0;
              for (let i3 = r3; i3 <= e3; i3++) o2 += Gn(n3, i3) * Math.pow(t4, i3) * Math.pow(1 - t4, n3 - i3);
              return o2;
            }, on.INV = (n3, t4, r3) => {
              if (S(n3 = R(n3), t4 = R(t4), r3 = R(r3))) return a;
              let o2 = 0;
              for (; o2 <= n3; ) {
                if (e2.binomial.cdf(o2, n3, t4) >= r3) return o2;
                o2++;
              }
            };
            const un = { DIST: (n3, t4, r3) => S(n3 = R(n3), t4 = R(t4)) ? a : r3 ? e2.chisquare.cdf(n3, t4) : e2.chisquare.pdf(n3, t4) };
            un.DIST.RT = (n3, t4) => !n3 | !t4 ? s : n3 < 1 || t4 > Math.pow(10, 10) ? c : "number" != typeof n3 || "number" != typeof t4 ? a : 1 - e2.chisquare.cdf(n3, t4), un.INV = (n3, t4) => S(n3 = R(n3), t4 = R(t4)) ? a : e2.chisquare.inv(n3, t4), un.INV.RT = (n3, t4) => !n3 | !t4 ? s : n3 < 0 || n3 > 1 || t4 < 1 || t4 > Math.pow(10, 10) ? c : "number" != typeof n3 || "number" != typeof t4 ? a : e2.chisquare.inv(1 - n3, t4), un.TEST = function(n3, t4) {
              if (2 !== arguments.length) return s;
              if (!(n3 instanceof Array && t4 instanceof Array)) return a;
              if (n3.length !== t4.length) return a;
              if (n3[0] && t4[0] && n3[0].length !== t4[0].length) return a;
              const r3 = n3.length;
              let e3, o2, i3;
              for (o2 = 0; o2 < r3; o2++) n3[o2] instanceof Array || (e3 = n3[o2], n3[o2] = [], n3[o2].push(e3)), t4[o2] instanceof Array || (e3 = t4[o2], t4[o2] = [], t4[o2].push(e3));
              const u2 = n3[0].length, f2 = 1 === u2 ? r3 - 1 : (r3 - 1) * (u2 - 1);
              let l2 = 0;
              const c2 = Math.PI;
              for (o2 = 0; o2 < r3; o2++) for (i3 = 0; i3 < u2; i3++) l2 += Math.pow(n3[o2][i3] - t4[o2][i3], 2) / t4[o2][i3];
              return Math.round(1e6 * (function(n4, t5) {
                let r4 = Math.exp(-0.5 * n4);
                t5 % 2 == 1 && (r4 *= Math.sqrt(2 * n4 / c2));
                let e4 = t5;
                for (; e4 >= 2; ) r4 = r4 * n4 / e4, e4 -= 2;
                let o3 = r4, i4 = t5;
                for (; o3 > 1e-10 * r4; ) i4 += 2, o3 = o3 * n4 / i4, r4 += o3;
                return 1 - r4;
              })(l2, f2)) / 1e6;
            };
            const an = {};
            function fn() {
              return C(M(arguments)).length;
            }
            function ln() {
              const n3 = M(arguments);
              return n3.length - cn(n3);
            }
            function cn() {
              const n3 = M(arguments);
              let t4, r3 = 0;
              for (let e3 = 0; e3 < n3.length; e3++) t4 = n3[e3], null != t4 && "" !== t4 || r3++;
              return r3;
            }
            an.NORM = (n3, t4, r3) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : e2.normalci(1, n3, t4, r3)[1] - 1, an.T = (n3, t4, r3) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : e2.tci(1, n3, t4, r3)[1] - 1;
            const sn = { P: (n3, t4) => {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              const r3 = e2.mean(n3), o2 = e2.mean(t4);
              let i3 = 0;
              const u2 = n3.length;
              for (let e3 = 0; e3 < u2; e3++) i3 += (n3[e3] - r3) * (t4[e3] - o2);
              return i3 / u2;
            }, S: (n3, t4) => S(n3 = P(M(n3)), t4 = P(M(t4))) ? a : e2.covariance(n3, t4) }, hn = { DIST: (n3, t4, r3) => S(n3 = R(n3), t4 = R(t4)) ? a : r3 ? e2.exponential.cdf(n3, t4) : e2.exponential.pdf(n3, t4) }, gn = {};
            function pn(n3, t4, r3) {
              if (S(n3 = R(n3), t4 = P(M(t4)), r3 = P(M(r3)))) return a;
              const o2 = e2.mean(r3), i3 = e2.mean(t4), u2 = r3.length;
              let f2 = 0, l2 = 0;
              for (let n4 = 0; n4 < u2; n4++) f2 += (r3[n4] - o2) * (t4[n4] - i3), l2 += Math.pow(r3[n4] - o2, 2);
              const c2 = f2 / l2;
              return i3 - c2 * o2 + c2 * n3;
            }
            function mn(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : 0 === n3 || parseInt(n3, 10) === n3 && n3 < 0 ? c : e2.gammafn(n3);
            }
            function dn(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : e2.gammaln(n3);
            }
            gn.DIST = (n3, t4, r3, o2) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : o2 ? e2.centralF.cdf(n3, t4, r3) : e2.centralF.pdf(n3, t4, r3), gn.DIST.RT = function(n3, t4, r3) {
              return 3 !== arguments.length ? s : n3 < 0 || t4 < 1 || r3 < 1 ? c : "number" != typeof n3 || "number" != typeof t4 || "number" != typeof r3 ? a : 1 - e2.centralF.cdf(n3, t4, r3);
            }, gn.INV = (n3, t4, r3) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : n3 <= 0 || n3 > 1 ? c : e2.centralF.inv(n3, t4, r3), gn.INV.RT = function(n3, t4, r3) {
              return 3 !== arguments.length ? s : n3 < 0 || n3 > 1 || t4 < 1 || t4 > Math.pow(10, 10) || r3 < 1 || r3 > Math.pow(10, 10) ? c : "number" != typeof n3 || "number" != typeof t4 || "number" != typeof r3 ? a : e2.centralF.inv(1 - n3, t4, r3);
            }, gn.TEST = (n3, t4) => {
              if (!n3 || !t4) return s;
              if (!(n3 instanceof Array && t4 instanceof Array)) return s;
              if (n3.length < 2 || t4.length < 2) return u;
              const r3 = (n4, t5) => {
                let r4 = 0;
                for (let e4 = 0; e4 < n4.length; e4++) r4 += Math.pow(n4[e4] - t5, 2);
                return r4;
              }, e3 = Qn(n3) / n3.length, o2 = Qn(t4) / t4.length;
              return r3(n3, e3) / (n3.length - 1) / (r3(t4, o2) / (t4.length - 1));
            }, mn.DIST = function(n3, t4, r3, o2) {
              return 4 !== arguments.length ? s : n3 < 0 || t4 <= 0 || r3 <= 0 || "number" != typeof n3 || "number" != typeof t4 || "number" != typeof r3 ? a : o2 ? e2.gamma.cdf(n3, t4, r3, true) : e2.gamma.pdf(n3, t4, r3, false);
            }, mn.INV = function(n3, t4, r3) {
              return 3 !== arguments.length ? s : n3 < 0 || n3 > 1 || t4 <= 0 || r3 <= 0 ? c : "number" != typeof n3 || "number" != typeof t4 || "number" != typeof r3 ? a : e2.gamma.inv(n3, t4, r3);
            }, dn.PRECISE = function(n3) {
              return 1 !== arguments.length ? s : n3 <= 0 ? c : "number" != typeof n3 ? a : e2.gammaln(n3);
            };
            const vn = {};
            function En(n3, t4) {
              return S(n3 = P(M(n3)), t4 = R(t4)) ? n3 : t4 < 0 || n3.length < t4 ? a : n3.sort(((n4, t5) => t5 - n4))[t4 - 1];
            }
            function Mn(n3, t4) {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              const r3 = e2.mean(n3), o2 = e2.mean(t4), i3 = t4.length;
              let u2 = 0, f2 = 0;
              for (let e3 = 0; e3 < i3; e3++) u2 += (t4[e3] - o2) * (n3[e3] - r3), f2 += Math.pow(t4[e3] - o2, 2);
              const l2 = u2 / f2;
              return [l2, r3 - l2 * o2];
            }
            vn.DIST = (n3, t4, r3, e3, o2) => {
              if (S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3))) return a;
              function i3(n4, t5, r4, e4) {
                return Gn(r4, n4) * Gn(e4 - r4, t5 - n4) / Gn(e4, t5);
              }
              return o2 ? (function(n4, t5, r4, e4) {
                let o3 = 0;
                for (let u2 = 0; u2 <= n4; u2++) o3 += i3(u2, t5, r4, e4);
                return o3;
              })(n3, t4, r3, e3) : i3(n3, t4, r3, e3);
            };
            const Nn = {};
            function wn() {
              const n3 = M(arguments), t4 = T.apply(void 0, n3);
              if (t4) return t4;
              const r3 = C(n3);
              return 0 === r3.length ? 0 : Math.max.apply(Math, r3);
            }
            function yn() {
              const n3 = M(arguments), t4 = T.apply(void 0, n3);
              if (t4) return t4;
              const r3 = v(n3);
              let o2 = e2.median(r3);
              return isNaN(o2) && (o2 = c), o2;
            }
            function In() {
              const n3 = M(arguments), t4 = T.apply(void 0, n3);
              if (t4) return t4;
              const r3 = C(n3);
              return 0 === r3.length ? 0 : Math.min.apply(Math, r3);
            }
            Nn.DIST = (n3, t4, r3, o2) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : o2 ? e2.lognormal.cdf(n3, t4, r3) : e2.lognormal.pdf(n3, t4, r3), Nn.INV = (n3, t4, r3) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : e2.lognormal.inv(n3, t4, r3);
            const bn = { MULT: function() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              const t4 = n3.length, r3 = {};
              let e3, o2 = [], i3 = 0;
              for (let u2 = 0; u2 < t4; u2++) e3 = n3[u2], r3[e3] = r3[e3] ? r3[e3] + 1 : 1, r3[e3] > i3 && (i3 = r3[e3], o2 = []), r3[e3] === i3 && (o2[o2.length] = e3);
              return o2;
            }, SNGL: function() {
              const n3 = P(M(arguments));
              return n3 instanceof Error ? n3 : bn.MULT(n3).sort(((n4, t4) => n4 - t4))[0];
            } }, Tn = { DIST: (n3, t4, r3, o2) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : o2 ? e2.negbin.cdf(n3, t4, r3) : e2.negbin.pdf(n3, t4, r3) }, Sn = {};
            function An(n3, t4) {
              if (S(t4 = P(M(t4)), n3 = P(M(n3)))) return a;
              const r3 = e2.mean(n3), o2 = e2.mean(t4), i3 = n3.length;
              let u2 = 0, f2 = 0, l2 = 0;
              for (let e3 = 0; e3 < i3; e3++) u2 += (n3[e3] - r3) * (t4[e3] - o2), f2 += Math.pow(n3[e3] - r3, 2), l2 += Math.pow(t4[e3] - o2, 2);
              return u2 / Math.sqrt(f2 * l2);
            }
            Sn.DIST = (n3, t4, r3, o2) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : r3 <= 0 ? c : o2 ? e2.normal.cdf(n3, t4, r3) : e2.normal.pdf(n3, t4, r3), Sn.INV = (n3, t4, r3) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : e2.normal.inv(n3, t4, r3), Sn.S = {}, Sn.S.DIST = (n3, t4) => (n3 = R(n3)) instanceof Error ? a : t4 ? e2.normal.cdf(n3, 0, 1) : e2.normal.pdf(n3, 0, 1), Sn.S.INV = (n3) => (n3 = R(n3)) instanceof Error ? a : e2.normal.inv(n3, 0, 1);
            const Cn = { EXC: (n3, t4) => {
              if (S(n3 = P(M(n3)), t4 = R(t4))) return a;
              const r3 = (n3 = n3.sort(((n4, t5) => n4 - t5))).length;
              if (t4 < 1 / (r3 + 1) || t4 > 1 - 1 / (r3 + 1)) return c;
              const e3 = t4 * (r3 + 1) - 1, o2 = Math.floor(e3);
              return A(e3 === o2 ? n3[e3] : n3[o2] + (e3 - o2) * (n3[o2 + 1] - n3[o2]));
            }, INC: (n3, t4) => {
              if (S(n3 = P(M(n3)), t4 = R(t4))) return a;
              const r3 = t4 * ((n3 = n3.sort(((n4, t5) => n4 - t5))).length - 1), e3 = Math.floor(r3);
              return A(r3 === e3 ? n3[r3] : n3[e3] + (r3 - e3) * (n3[e3 + 1] - n3[e3]));
            } }, Dn = { EXC: (n3, t4, r3) => {
              if (r3 = void 0 === r3 ? 3 : r3, S(n3 = P(M(n3)), t4 = R(t4), r3 = R(r3))) return a;
              n3 = n3.sort(((n4, t5) => n4 - t5));
              const e3 = J.apply(null, n3), o2 = n3.length, i3 = e3.length, u2 = Math.pow(10, r3);
              let f2 = 0, l2 = false, c2 = 0;
              for (; !l2 && c2 < i3; ) t4 === e3[c2] ? (f2 = (n3.indexOf(e3[c2]) + 1) / (o2 + 1), l2 = true) : t4 >= e3[c2] && (t4 < e3[c2 + 1] || c2 === i3 - 1) && (f2 = (n3.indexOf(e3[c2]) + 1 + (t4 - e3[c2]) / (e3[c2 + 1] - e3[c2])) / (o2 + 1), l2 = true), c2++;
              return Math.floor(f2 * u2) / u2;
            }, INC: (n3, t4, r3) => {
              if (r3 = void 0 === r3 ? 3 : r3, S(n3 = P(M(n3)), t4 = R(t4), r3 = R(r3))) return a;
              n3 = n3.sort(((n4, t5) => n4 - t5));
              const e3 = J.apply(null, n3), o2 = n3.length, i3 = e3.length, u2 = Math.pow(10, r3);
              let f2 = 0, l2 = false, c2 = 0;
              for (; !l2 && c2 < i3; ) t4 === e3[c2] ? (f2 = n3.indexOf(e3[c2]) / (o2 - 1), l2 = true) : t4 >= e3[c2] && (t4 < e3[c2 + 1] || c2 === i3 - 1) && (f2 = (n3.indexOf(e3[c2]) + (t4 - e3[c2]) / (e3[c2 + 1] - e3[c2])) / (o2 - 1), l2 = true), c2++;
              return Math.floor(f2 * u2) / u2;
            } }, On = { DIST: (n3, t4, r3) => S(n3 = R(n3), t4 = R(t4)) ? a : r3 ? e2.poisson.cdf(n3, t4) : e2.poisson.pdf(n3, t4) }, xn = { EXC: (n3, t4) => {
              if (S(n3 = P(M(n3)), t4 = R(t4))) return a;
              switch (t4) {
                case 1:
                  return Cn.EXC(n3, 0.25);
                case 2:
                  return Cn.EXC(n3, 0.5);
                case 3:
                  return Cn.EXC(n3, 0.75);
                default:
                  return c;
              }
            }, INC: (n3, t4) => {
              if (S(n3 = P(M(n3)), t4 = R(t4))) return a;
              switch (t4) {
                case 1:
                  return Cn.INC(n3, 0.25);
                case 2:
                  return Cn.INC(n3, 0.5);
                case 3:
                  return Cn.INC(n3, 0.75);
                default:
                  return c;
              }
            } }, Rn = {};
            function Pn() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              const t4 = e2.mean(n3), r3 = n3.length;
              let o2 = 0;
              for (let e3 = 0; e3 < r3; e3++) o2 += Math.pow(n3[e3] - t4, 3);
              return r3 * o2 / ((r3 - 1) * (r3 - 2) * Math.pow(e2.stdev(n3, true), 3));
            }
            function Ln(n3, t4) {
              return S(n3 = P(M(n3)), t4 = R(t4)) ? n3 : n3.sort(((n4, t5) => n4 - t5))[t4 - 1];
            }
            Rn.AVG = (n3, t4, r3) => {
              if (S(n3 = R(n3), t4 = P(M(t4)))) return a;
              const e3 = (r3 = r3 || false) ? (n4, t5) => n4 - t5 : (n4, t5) => t5 - n4, o2 = (t4 = (t4 = M(t4)).sort(e3)).length;
              let i3 = 0;
              for (let r4 = 0; r4 < o2; r4++) t4[r4] === n3 && i3++;
              return i3 > 1 ? (2 * t4.indexOf(n3) + i3 + 1) / 2 : t4.indexOf(n3) + 1;
            }, Rn.EQ = (n3, t4, r3) => {
              if (S(n3 = R(n3), t4 = P(M(t4)))) return a;
              const e3 = (r3 = r3 || false) ? (n4, t5) => n4 - t5 : (n4, t5) => t5 - n4;
              return (t4 = t4.sort(e3)).indexOf(n3) + 1;
            }, Pn.P = function() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              const t4 = e2.mean(n3), r3 = n3.length;
              let o2 = 0, i3 = 0;
              for (let e3 = 0; e3 < r3; e3++) i3 += Math.pow(n3[e3] - t4, 3), o2 += Math.pow(n3[e3] - t4, 2);
              return i3 /= r3, o2 /= r3, i3 / Math.pow(o2, 1.5);
            };
            const Fn = { P: function() {
              const n3 = Un.P.apply(this, arguments);
              let t4 = Math.sqrt(n3);
              return isNaN(t4) && (t4 = c), t4;
            }, S: function() {
              const n3 = Un.S.apply(this, arguments);
              return Math.sqrt(n3);
            } }, qn = { DIST: (n3, t4, r3) => 1 !== r3 && 2 !== r3 ? c : 1 === r3 ? qn.DIST.RT(n3, t4) : qn.DIST["2T"](n3, t4) };
            qn.DIST["2T"] = function(n3, t4) {
              return 2 !== arguments.length ? s : n3 < 0 || t4 < 1 ? c : "number" != typeof n3 || "number" != typeof t4 ? a : 2 * (1 - e2.studentt.cdf(n3, t4));
            }, qn.DIST.RT = function(n3, t4) {
              return 2 !== arguments.length ? s : n3 < 0 || t4 < 1 ? c : "number" != typeof n3 || "number" != typeof t4 ? a : 1 - e2.studentt.cdf(n3, t4);
            }, qn.INV = (n3, t4) => S(n3 = R(n3), t4 = R(t4)) ? a : e2.studentt.inv(n3, t4), qn.INV["2T"] = (n3, t4) => (n3 = R(n3), t4 = R(t4), n3 <= 0 || n3 > 1 || t4 < 1 ? c : S(n3, t4) ? a : Math.abs(e2.studentt.inv(n3 / 2, t4))), qn.TEST = (n3, t4) => {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              const r3 = e2.mean(n3), o2 = e2.mean(t4);
              let i3, u2 = 0, f2 = 0;
              for (i3 = 0; i3 < n3.length; i3++) u2 += Math.pow(n3[i3] - r3, 2);
              for (i3 = 0; i3 < t4.length; i3++) f2 += Math.pow(t4[i3] - o2, 2);
              u2 /= n3.length - 1, f2 /= t4.length - 1;
              const l2 = Math.abs(r3 - o2) / Math.sqrt(u2 / n3.length + f2 / t4.length);
              return qn.DIST["2T"](l2, n3.length + t4.length - 2);
            };
            const Un = {};
            function _n() {
              const n3 = M(arguments), t4 = n3.length;
              let r3 = 0, e3 = 0;
              const o2 = rn(n3);
              for (let i3 = 0; i3 < t4; i3++) {
                const t5 = n3[i3];
                r3 += "number" == typeof t5 ? Math.pow(t5 - o2, 2) : true === t5 ? Math.pow(1 - o2, 2) : Math.pow(0 - o2, 2), null !== t5 && e3++;
              }
              return r3 / (e3 - 1);
            }
            function Vn() {
              const n3 = M(arguments), t4 = n3.length;
              let r3 = 0, e3 = 0;
              const o2 = rn(n3);
              let i3;
              for (let i4 = 0; i4 < t4; i4++) {
                const t5 = n3[i4];
                r3 += "number" == typeof t5 ? Math.pow(t5 - o2, 2) : true === t5 ? Math.pow(1 - o2, 2) : Math.pow(0 - o2, 2), null !== t5 && e3++;
              }
              return i3 = r3 / e3, isNaN(i3) && (i3 = c), i3;
            }
            Un.P = function() {
              const n3 = C(M(arguments)), t4 = n3.length;
              let r3 = 0;
              const e3 = tn(n3);
              let o2;
              for (let o3 = 0; o3 < t4; o3++) r3 += Math.pow(n3[o3] - e3, 2);
              return o2 = r3 / t4, isNaN(o2) && (o2 = c), o2;
            }, Un.S = function() {
              const n3 = C(M(arguments)), t4 = n3.length;
              let r3 = 0;
              const e3 = tn(n3);
              for (let o2 = 0; o2 < t4; o2++) r3 += Math.pow(n3[o2] - e3, 2);
              return r3 / (t4 - 1);
            };
            const kn = { DIST: (n3, t4, r3, e3) => S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : e3 ? 1 - Math.exp(-Math.pow(n3 / r3, t4)) : Math.pow(n3, t4 - 1) * Math.exp(-Math.pow(n3 / r3, t4)) * t4 / Math.pow(r3, t4) }, jn = {};
            function Yn(n3, t4, r3) {
              const e3 = T(n3 = R(n3), t4 = R(t4), r3 = R(r3));
              if (e3) return e3;
              if (0 === t4) return 0;
              t4 = Math.abs(t4);
              const o2 = -Math.floor(Math.log(t4) / Math.log(10));
              return n3 >= 0 ? Kn(Math.ceil(n3 / t4) * t4, o2) : 0 === r3 ? -Kn(Math.floor(Math.abs(n3) / t4) * t4, o2) : -Kn(Math.ceil(Math.abs(n3) / t4) * t4, o2);
            }
            function Gn(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || (n3 < t4 ? c : Xn(n3) / (Xn(t4) * Xn(n3 - t4)));
            }
            jn.TEST = (n3, t4, r3) => {
              if (S(n3 = P(M(n3)), t4 = R(t4))) return a;
              r3 = r3 || Fn.S(n3);
              const e3 = n3.length;
              return 1 - Sn.S.DIST((tn(n3) - t4) / (r3 / Math.sqrt(e3)), true);
            }, Yn.MATH = Yn, Yn.PRECISE = Yn;
            const Hn = [];
            function Xn(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              const t4 = Math.floor(n3);
              return 0 === t4 || 1 === t4 ? 1 : (Hn[t4] > 0 || (Hn[t4] = Xn(t4 - 1) * t4), Hn[t4]);
            }
            function Bn(n3, t4) {
              const r3 = T(n3 = R(n3), t4 = R(t4));
              if (r3) return r3;
              if (0 === t4) return 0;
              if (!(n3 >= 0 && t4 > 0 || n3 <= 0 && t4 < 0)) return c;
              t4 = Math.abs(t4);
              const e3 = -Math.floor(Math.log(t4) / Math.log(10));
              return n3 >= 0 ? Kn(Math.floor(n3 / t4) * t4, e3) : -Kn(Math.ceil(Math.abs(n3) / t4), e3);
            }
            Bn.MATH = (n3, t4, r3) => {
              if (t4 instanceof Error) return t4;
              t4 = void 0 === t4 ? 0 : t4;
              const e3 = T(n3 = R(n3), t4 = R(t4), r3 = R(r3));
              if (e3) return e3;
              if (0 === t4) return 0;
              t4 = t4 ? Math.abs(t4) : 1;
              const o2 = -Math.floor(Math.log(t4) / Math.log(10));
              return n3 >= 0 ? Kn(Math.floor(n3 / t4) * t4, o2) : 0 === r3 || void 0 === r3 ? -Kn(Math.ceil(Math.abs(n3) / t4) * t4, o2) : -Kn(Math.floor(Math.abs(n3) / t4) * t4, o2);
            }, Bn.PRECISE = Bn.MATH;
            const $n = { CEILING: Yn };
            function zn(n3, t4) {
              const r3 = T(n3 = R(n3), t4 = R(t4));
              if (r3) return r3;
              if (0 === n3 && 0 === t4) return c;
              const e3 = Math.pow(n3, t4);
              return isNaN(e3) ? c : e3;
            }
            function Wn() {
              const n3 = M(arguments).filter(((n4) => null != n4));
              if (0 === n3.length) return 0;
              const t4 = P(n3);
              if (t4 instanceof Error) return t4;
              let r3 = 1;
              for (let n4 = 0; n4 < t4.length; n4++) r3 *= t4[n4];
              return r3;
            }
            function Kn(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || Number(Math.round(Number(n3 + "e" + t4)) + "e" + -1 * t4);
            }
            function Qn() {
              let n3 = 0;
              return d(m(arguments), ((t4) => {
                if (n3 instanceof Error) return false;
                if (t4 instanceof Error) n3 = t4;
                else if ("number" == typeof t4) n3 += t4;
                else if ("string" == typeof t4) {
                  const r3 = parseFloat(t4);
                  !isNaN(r3) && (n3 += r3);
                } else if (Array.isArray(t4)) {
                  const r3 = Qn.apply(null, t4);
                  r3 instanceof Error ? n3 = r3 : n3 += r3;
                }
              })), n3;
            }
            var Zn = Object.freeze({ __proto__: null, ADD: function(n3, t4) {
              if (2 !== arguments.length) return s;
              return T(n3 = R(n3), t4 = R(t4)) || n3 + t4;
            }, DIVIDE: function(n3, t4) {
              if (2 !== arguments.length) return s;
              return T(n3 = R(n3), t4 = R(t4)) || (0 === t4 ? u : n3 / t4);
            }, EQ: function(n3, t4) {
              return 2 !== arguments.length ? s : n3 instanceof Error ? n3 : t4 instanceof Error ? t4 : (null === n3 && (n3 = void 0), null === t4 && (t4 = void 0), n3 === t4);
            }, GT: function(n3, t4) {
              if (2 !== arguments.length) return s;
              if (n3 instanceof Error) return n3;
              if (t4 instanceof Error) return t4;
              F(n3, t4) ? (n3 = L(n3), t4 = L(t4)) : (n3 = R(n3), t4 = R(t4));
              return T(n3, t4) || n3 > t4;
            }, GTE: function(n3, t4) {
              if (2 !== arguments.length) return s;
              F(n3, t4) ? (n3 = L(n3), t4 = L(t4)) : (n3 = R(n3), t4 = R(t4));
              return T(n3, t4) || n3 >= t4;
            }, LT: function(n3, t4) {
              if (2 !== arguments.length) return s;
              F(n3, t4) ? (n3 = L(n3), t4 = L(t4)) : (n3 = R(n3), t4 = R(t4));
              return T(n3, t4) || n3 < t4;
            }, LTE: function(n3, t4) {
              if (2 !== arguments.length) return s;
              F(n3, t4) ? (n3 = L(n3), t4 = L(t4)) : (n3 = R(n3), t4 = R(t4));
              return T(n3, t4) || n3 <= t4;
            }, MINUS: function(n3, t4) {
              if (2 !== arguments.length) return s;
              return T(n3 = R(n3), t4 = R(t4)) || n3 - t4;
            }, MULTIPLY: function(n3, t4) {
              if (2 !== arguments.length) return s;
              return T(n3 = R(n3), t4 = R(t4)) || n3 * t4;
            }, NE: function(n3, t4) {
              return 2 !== arguments.length ? s : n3 instanceof Error ? n3 : t4 instanceof Error ? t4 : (null === n3 && (n3 = void 0), null === t4 && (t4 = void 0), n3 !== t4);
            }, POW: function(n3, t4) {
              return 2 !== arguments.length ? s : zn(n3, t4);
            } });
            const Jn = new Date(Date.UTC(1900, 0, 1)), nt = [void 0, 0, 1, void 0, void 0, void 0, void 0, void 0, void 0, void 0, void 0, void 0, 1, 2, 3, 4, 5, 6, 0], tt = [[], [1, 2, 3, 4, 5, 6, 7], [7, 1, 2, 3, 4, 5, 6], [6, 0, 1, 2, 3, 4, 5], [], [], [], [], [], [], [], [7, 1, 2, 3, 4, 5, 6], [6, 7, 1, 2, 3, 4, 5], [5, 6, 7, 1, 2, 3, 4], [4, 5, 6, 7, 1, 2, 3], [3, 4, 5, 6, 7, 1, 2], [2, 3, 4, 5, 6, 7, 1], [1, 2, 3, 4, 5, 6, 7]], rt = [[], [6, 0], [0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 6], void 0, void 0, void 0, [0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5], [6, 6]];
            function et(n3, t4, r3) {
              r3 = r3.toUpperCase(), n3 = O(n3), t4 = O(t4);
              const e3 = n3.getFullYear(), o2 = n3.getMonth(), i3 = n3.getDate(), u2 = t4.getFullYear(), a2 = t4.getMonth(), f2 = t4.getDate();
              let l2;
              switch (r3) {
                case "Y":
                  l2 = Math.floor(ht(n3, t4));
                  break;
                case "D":
                  l2 = it(t4, n3);
                  break;
                case "M":
                  l2 = a2 - o2 + 12 * (u2 - e3), f2 < i3 && l2--;
                  break;
                case "MD":
                  i3 <= f2 ? l2 = f2 - i3 : (0 === a2 ? (n3.setFullYear(u2 - 1), n3.setMonth(12)) : (n3.setFullYear(u2), n3.setMonth(a2 - 1)), l2 = it(t4, n3));
                  break;
                case "YM":
                  l2 = a2 - o2 + 12 * (u2 - e3), f2 < i3 && l2--, l2 %= 12;
                  break;
                case "YD":
                  a2 > o2 || a2 === o2 && f2 < i3 ? n3.setFullYear(u2) : n3.setFullYear(u2 - 1), l2 = it(t4, n3);
              }
              return l2;
            }
            function ot(n3) {
              const t4 = new Date(n3);
              return t4.setHours(0, 0, 0, 0), t4;
            }
            function it(n3, t4) {
              return n3 = O(n3), t4 = O(t4), n3 instanceof Error ? n3 : t4 instanceof Error ? t4 : gt(ot(n3)) - gt(ot(t4));
            }
            function ut(n3, t4, r3) {
              if (r3 = D(r3 || "false"), n3 = O(n3), t4 = O(t4), n3 instanceof Error) return n3;
              if (t4 instanceof Error) return t4;
              if (r3 instanceof Error) return r3;
              const e3 = n3.getMonth();
              let o2, i3, u2 = t4.getMonth();
              if (r3) o2 = 31 === n3.getDate() ? 30 : n3.getDate(), i3 = 31 === t4.getDate() ? 30 : t4.getDate();
              else {
                const r4 = new Date(n3.getFullYear(), e3 + 1, 0).getDate(), a2 = new Date(t4.getFullYear(), u2 + 1, 0).getDate();
                o2 = n3.getDate() === r4 ? 30 : n3.getDate(), t4.getDate() === a2 ? o2 < 30 ? (u2++, i3 = 1) : i3 = 30 : i3 = t4.getDate();
              }
              return 360 * (t4.getFullYear() - n3.getFullYear()) + 30 * (u2 - e3) + (i3 - o2);
            }
            function at(n3) {
              if ((n3 = O(n3)) instanceof Error) return n3;
              (n3 = ot(n3)).setDate(n3.getDate() + 4 - (n3.getDay() || 7));
              const t4 = new Date(n3.getFullYear(), 0, 1);
              return Math.ceil(((n3 - t4) / 864e5 + 1) / 7);
            }
            function ft(n3, t4, r3) {
              return ft.INTL(n3, t4, 1, r3);
            }
            function lt(n3, t4, r3) {
              return lt.INTL(n3, t4, 1, r3);
            }
            function ct(n3) {
              return 1 === new Date(n3, 1, 29).getMonth();
            }
            function st(n3, t4) {
              return Math.ceil((t4 - n3) / 1e3 / 60 / 60 / 24);
            }
            function ht(n3, t4, r3) {
              if ((n3 = O(n3)) instanceof Error) return n3;
              if ((t4 = O(t4)) instanceof Error) return t4;
              r3 = r3 || 0;
              let e3 = n3.getDate();
              const o2 = n3.getMonth() + 1, i3 = n3.getFullYear();
              let u2 = t4.getDate();
              const a2 = t4.getMonth() + 1, f2 = t4.getFullYear();
              switch (r3) {
                case 0:
                  return 31 === e3 && 31 === u2 ? (e3 = 30, u2 = 30) : 31 === e3 ? e3 = 30 : 30 === e3 && 31 === u2 && (u2 = 30), (u2 + 30 * a2 + 360 * f2 - (e3 + 30 * o2 + 360 * i3)) / 360;
                case 1: {
                  const r4 = (n4, t5) => {
                    const r5 = n4.getFullYear(), e4 = new Date(r5, 2, 1);
                    if (ct(r5) && n4 < e4 && t5 >= e4) return true;
                    const o3 = t5.getFullYear(), i4 = new Date(o3, 2, 1);
                    return ct(o3) && t5 >= i4 && n4 < i4;
                  };
                  let l2 = 365;
                  if (i3 === f2 || i3 + 1 === f2 && (o2 > a2 || o2 === a2 && e3 >= u2)) return (i3 === f2 && ct(i3) || r4(n3, t4) || 1 === a2 && 29 === u2) && (l2 = 366), st(n3, t4) / l2;
                  const c2 = f2 - i3 + 1, s2 = (new Date(f2 + 1, 0, 1) - new Date(i3, 0, 1)) / 1e3 / 60 / 60 / 24 / c2;
                  return st(n3, t4) / s2;
                }
                case 2:
                  return st(n3, t4) / 360;
                case 3:
                  return st(n3, t4) / 365;
                case 4:
                  return (u2 + 30 * a2 + 360 * f2 - (e3 + 30 * o2 + 360 * i3)) / 360;
              }
            }
            function gt(n3) {
              const t4 = n3 > -22038912e5 ? 2 : 1;
              return Math.ceil((n3 - Jn) / 864e5) + t4;
            }
            function pt(n3) {
              return 0 === (n3 = R(n3)) ? a : n3 instanceof Error ? n3 : String.fromCharCode(n3);
            }
            function mt(n3) {
              if (S(n3)) return n3;
              let t4 = (n3 = n3 || "").charCodeAt(0);
              return isNaN(t4) && (t4 = a), t4;
            }
            function dt() {
              const n3 = M(arguments), t4 = T.apply(void 0, n3);
              if (t4) return t4;
              let r3 = 0;
              for (; (r3 = n3.indexOf(true)) > -1; ) n3[r3] = "TRUE";
              let e3 = 0;
              for (; (e3 = n3.indexOf(false)) > -1; ) n3[e3] = "FALSE";
              return n3.join("");
            }
            ft.INTL = (n3, t4, r3, e3) => {
              if ((n3 = O(n3)) instanceof Error) return n3;
              if ((t4 = O(t4)) instanceof Error) return t4;
              let o2 = false;
              const i3 = [], u2 = [1, 2, 3, 4, 5, 6, 0], f2 = new RegExp("^[0|1]{7}$");
              if (void 0 === r3) r3 = rt[1];
              else if ("string" == typeof r3 && f2.test(r3)) {
                o2 = true, r3 = r3.split("");
                for (let n4 = 0; n4 < r3.length; n4++) "1" === r3[n4] && i3.push(u2[n4]);
              } else r3 = rt[r3];
              if (!(r3 instanceof Array)) return a;
              void 0 === e3 ? e3 = [] : e3 instanceof Array || (e3 = [e3]);
              for (let n4 = 0; n4 < e3.length; n4++) {
                const t5 = O(e3[n4]);
                if (t5 instanceof Error) return t5;
                e3[n4] = t5;
              }
              const l2 = Math.round((t4 - n3) / 864e5) + 1;
              let c2 = l2;
              const s2 = n3;
              for (let n4 = 0; n4 < l2; n4++) {
                const n5 = (/* @__PURE__ */ new Date()).getTimezoneOffset() > 0 ? s2.getUTCDay() : s2.getDay();
                let t5 = o2 ? i3.includes(n5) : n5 === r3[0] || n5 === r3[1];
                for (let n6 = 0; n6 < e3.length; n6++) {
                  const r4 = e3[n6];
                  if (r4.getDate() === s2.getDate() && r4.getMonth() === s2.getMonth() && r4.getFullYear() === s2.getFullYear()) {
                    t5 = true;
                    break;
                  }
                }
                t5 && c2--, s2.setDate(s2.getDate() + 1);
              }
              return c2;
            }, lt.INTL = (n3, t4, r3, e3) => {
              if ((n3 = O(n3)) instanceof Error) return n3;
              if ((t4 = R(t4)) instanceof Error) return t4;
              if (t4 < 0) return c;
              if (!((r3 = void 0 === r3 ? rt[1] : rt[r3]) instanceof Array)) return a;
              void 0 === e3 ? e3 = [] : e3 instanceof Array || (e3 = [e3]);
              for (let n4 = 0; n4 < e3.length; n4++) {
                const t5 = O(e3[n4]);
                if (t5 instanceof Error) return t5;
                e3[n4] = t5;
              }
              let o2 = 0;
              for (; o2 < t4; ) {
                n3.setDate(n3.getDate() + 1);
                const t5 = n3.getDay();
                if (t5 !== r3[0] && t5 !== r3[1]) {
                  for (let t6 = 0; t6 < e3.length; t6++) {
                    const r4 = e3[t6];
                    if (r4.getDate() === n3.getDate() && r4.getMonth() === n3.getMonth() && r4.getFullYear() === n3.getFullYear()) {
                      o2--;
                      break;
                    }
                  }
                  o2++;
                }
              }
              return n3;
            };
            const vt = dt;
            function Et(n3, t4 = 2, r3 = false) {
              if (n3 = R(n3), isNaN(n3)) return a;
              if (t4 = R(t4), isNaN(t4)) return a;
              if (t4 < 0) {
                const r4 = Math.pow(10, -t4);
                n3 = Math.round(n3 / r4) * r4;
              } else n3 = n3.toFixed(t4);
              if (r3) n3 = n3.toString().replace(/,/g, "");
              else {
                const t5 = n3.toString().split(".");
                t5[0] = t5[0].replace(/\B(?=(\d{3})+$)/g, ","), n3 = t5.join(".");
              }
              return n3;
            }
            function Mt(n3, t4) {
              return T(n3, t4) || (n3 = L(n3), (t4 = R(t4)) instanceof Error ? t4 : new Array(t4 + 1).join(n3));
            }
            const Nt = pt, wt = mt;
            function yt(n3) {
              return /^[01]{1,10}$/.test(n3);
            }
            function It(n3, t4, r3) {
              if (S(n3 = R(n3), t4 = R(t4))) return n3;
              if ("i" !== (r3 = void 0 === r3 ? "i" : r3) && "j" !== r3) return a;
              if (0 === n3 && 0 === t4) return 0;
              if (0 === n3) return 1 === t4 ? r3 : t4.toString() + r3;
              if (0 === t4) return n3.toString();
              {
                const e3 = t4 > 0 ? "+" : "";
                return n3.toString() + e3 + (1 === t4 ? r3 : t4.toString() + r3);
              }
            }
            function bt(n3, t4) {
              return t4 = void 0 === t4 ? 0 : t4, S(n3 = R(n3), t4 = R(t4)) ? a : e2.erf(n3);
            }
            function Tt(n3) {
              return isNaN(n3) ? a : e2.erfc(n3);
            }
            function St(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              return S(t4, r3) ? a : Math.sqrt(Math.pow(t4, 2) + Math.pow(r3, 2));
            }
            function At(n3) {
              if (void 0 === n3 || true === n3 || false === n3) return a;
              if (0 === n3 || "0" === n3) return 0;
              if (["i", "j"].indexOf(n3) >= 0) return 1;
              let t4 = (n3 = (n3 += "").replace("+i", "+1i").replace("-i", "-1i").replace("+j", "+1j").replace("-j", "-1j")).indexOf("+"), r3 = n3.indexOf("-");
              0 === t4 && (t4 = n3.indexOf("+", 1)), 0 === r3 && (r3 = n3.indexOf("-", 1));
              const e3 = n3.substring(n3.length - 1, n3.length), o2 = "i" === e3 || "j" === e3;
              return t4 >= 0 || r3 >= 0 ? o2 ? t4 >= 0 ? isNaN(n3.substring(0, t4)) || isNaN(n3.substring(t4 + 1, n3.length - 1)) ? c : Number(n3.substring(t4 + 1, n3.length - 1)) : isNaN(n3.substring(0, r3)) || isNaN(n3.substring(r3 + 1, n3.length - 1)) ? c : -Number(n3.substring(r3 + 1, n3.length - 1)) : c : o2 ? isNaN(n3.substring(0, n3.length - 1)) ? c : n3.substring(0, n3.length - 1) : isNaN(n3) ? c : 0;
            }
            function Ct(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              return S(t4, r3) ? a : 0 === t4 && 0 === r3 ? u : 0 === t4 && r3 > 0 ? Math.PI / 2 : 0 === t4 && r3 < 0 ? -Math.PI / 2 : 0 === r3 && t4 > 0 ? 0 : 0 === r3 && t4 < 0 ? -Math.PI : t4 > 0 ? Math.atan(r3 / t4) : t4 < 0 && r3 >= 0 ? Math.atan(r3 / t4) + Math.PI : Math.atan(r3 / t4) - Math.PI;
            }
            function Dt(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              if (S(t4, r3)) return a;
              let e3 = n3.substring(n3.length - 1);
              return e3 = "i" === e3 || "j" === e3 ? e3 : "i", It(Math.cos(t4) * (Math.exp(r3) + Math.exp(-r3)) / 2, -Math.sin(t4) * (Math.exp(r3) - Math.exp(-r3)) / 2, e3);
            }
            function Ot(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              if (S(t4, r3)) return a;
              let e3 = n3.substring(n3.length - 1);
              return e3 = "i" === e3 || "j" === e3 ? e3 : "i", It(Math.cos(r3) * (Math.exp(t4) + Math.exp(-t4)) / 2, Math.sin(r3) * (Math.exp(t4) - Math.exp(-t4)) / 2, e3);
            }
            function xt(n3, t4) {
              const r3 = Rt(n3), e3 = At(n3), o2 = Rt(t4), i3 = At(t4);
              if (S(r3, e3, o2, i3)) return a;
              const u2 = n3.substring(n3.length - 1), f2 = t4.substring(t4.length - 1);
              let l2 = "i";
              if (("j" === u2 || "j" === f2) && (l2 = "j"), 0 === o2 && 0 === i3) return c;
              const s2 = o2 * o2 + i3 * i3;
              return It((r3 * o2 + e3 * i3) / s2, (e3 * o2 - r3 * i3) / s2, l2);
            }
            function Rt(n3) {
              if (void 0 === n3 || true === n3 || false === n3) return a;
              if (0 === n3 || "0" === n3) return 0;
              if (["i", "+i", "1i", "+1i", "-i", "-1i", "j", "+j", "1j", "+1j", "-j", "-1j"].indexOf(n3) >= 0) return 0;
              let t4 = (n3 += "").indexOf("+"), r3 = n3.indexOf("-");
              0 === t4 && (t4 = n3.indexOf("+", 1)), 0 === r3 && (r3 = n3.indexOf("-", 1));
              const e3 = n3.substring(n3.length - 1, n3.length), o2 = "i" === e3 || "j" === e3;
              return t4 >= 0 || r3 >= 0 ? o2 ? t4 >= 0 ? isNaN(n3.substring(0, t4)) || isNaN(n3.substring(t4 + 1, n3.length - 1)) ? c : Number(n3.substring(0, t4)) : isNaN(n3.substring(0, r3)) || isNaN(n3.substring(r3 + 1, n3.length - 1)) ? c : Number(n3.substring(0, r3)) : c : o2 ? isNaN(n3.substring(0, n3.length - 1)) ? c : 0 : isNaN(n3) ? c : n3;
            }
            function Pt(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              if (S(t4, r3)) return a;
              let e3 = n3.substring(n3.length - 1);
              return e3 = "i" === e3 || "j" === e3 ? e3 : "i", It(Math.sin(t4) * (Math.exp(r3) + Math.exp(-r3)) / 2, Math.cos(t4) * (Math.exp(r3) - Math.exp(-r3)) / 2, e3);
            }
            function Lt(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              if (S(t4, r3)) return a;
              let e3 = n3.substring(n3.length - 1);
              return e3 = "i" === e3 || "j" === e3 ? e3 : "i", It(Math.cos(r3) * (Math.exp(t4) - Math.exp(-t4)) / 2, Math.sin(r3) * (Math.exp(t4) + Math.exp(-t4)) / 2, e3);
            }
            bt.PRECISE = () => {
              throw new Error("ERF.PRECISE is not implemented");
            }, Tt.PRECISE = () => {
              throw new Error("ERFC.PRECISE is not implemented");
            };
            const Ft = en.DIST, qt = en.INV, Ut = on.DIST, _t = Yn.MATH, Vt = Yn.PRECISE, kt = un.DIST, jt = un.DIST.RT, Yt = un.INV, Gt = un.INV.RT, Ht = un.TEST, Xt = sn.P, Bt = sn.P, $t = sn.S, zt = on.INV, Wt = Tt.PRECISE, Kt = bt.PRECISE, Qt = hn.DIST, Zt = gn.DIST, Jt = gn.DIST.RT, nr = gn.INV, tr = gn.INV.RT, rr = Bn.MATH, er = Bn.PRECISE, or = gn.TEST, ir = mn.DIST, ur = mn.INV, ar = dn.PRECISE, fr = vn.DIST, lr = Nn.INV, cr = Nn.DIST, sr = Nn.INV, hr = bn.MULT, gr = bn.SNGL, pr = Tn.DIST, mr = ft.INTL, dr = Sn.DIST, vr = Sn.INV, Er = Sn.S.DIST, Mr = Sn.S.INV, Nr = Cn.EXC, wr = Cn.INC, yr = Dn.EXC, Ir = Dn.INC, br = On.DIST, Tr = xn.EXC, Sr = xn.INC, Ar = Rn.AVG, Cr = Rn.EQ, Dr = Pn.P, Or = Fn.P, xr = Fn.S, Rr = qn.DIST, Pr = qn.DIST.RT, Lr = qn.INV, Fr = qn.TEST, qr = Un.P, Ur = Un.S, _r = kn.DIST, Vr = lt.INTL, kr = jn.TEST;
            function jr(n3) {
              const t4 = [];
              return d(n3, ((n4) => {
                n4 && t4.push(n4);
              })), t4;
            }
            function Yr(n3, t4) {
              const r3 = {};
              for (let t5 = 1; t5 < n3[0].length; ++t5) r3[t5] = true;
              let e3 = t4[0].length;
              for (let n4 = 1; n4 < t4.length; ++n4) t4[n4].length > e3 && (e3 = t4[n4].length);
              for (let o3 = 1; o3 < n3.length; ++o3) for (let i3 = 1; i3 < n3[o3].length; ++i3) {
                let u2 = false, a2 = false;
                for (let r4 = 0; r4 < t4.length; ++r4) {
                  const f2 = t4[r4];
                  if (f2.length < e3) continue;
                  const l2 = f2[0];
                  if (n3[o3][0] === l2) {
                    a2 = true;
                    for (let t5 = 1; t5 < f2.length; ++t5) if (!u2) if (void 0 === f2[t5] || "*" === f2[t5]) u2 = true;
                    else {
                      const r5 = X(f2[t5] + ""), e4 = [H(n3[o3][i3], G)].concat(r5);
                      u2 = B(e4);
                    }
                  }
                }
                a2 && (r3[i3] = r3[i3] && u2);
              }
              const o2 = [];
              for (let t5 = 0; t5 < n3[0].length; ++t5) r3[t5] && o2.push(t5 - 1);
              return o2;
            }
            function Gr(n3) {
              return n3 && n3.getTime && !isNaN(n3.getTime());
            }
            function Hr(n3) {
              return n3 instanceof Date ? n3 : new Date(n3);
            }
            function Xr(n3, t4, r3, e3, o2) {
              if (e3 = e3 || 0, o2 = o2 || 0, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3), o2 = R(o2))) return a;
              let i3;
              if (0 === n3) i3 = e3 + r3 * t4;
              else {
                const u2 = Math.pow(1 + n3, t4);
                i3 = 1 === o2 ? e3 * u2 + r3 * (1 + n3) * (u2 - 1) / n3 : e3 * u2 + r3 * (u2 - 1) / n3;
              }
              return -i3;
            }
            function Br(n3, t4, r3, e3, o2, i3) {
              if (o2 = o2 || 0, i3 = i3 || 0, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3), o2 = R(o2), i3 = R(i3))) return a;
              const u2 = zr(n3, r3, e3, o2, i3);
              return (1 === t4 ? 1 === i3 ? 0 : -e3 : 1 === i3 ? Xr(n3, t4 - 2, u2, e3, 1) - u2 : Xr(n3, t4 - 1, u2, e3, 0)) * n3;
            }
            function $r() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              const t4 = n3[0];
              let r3 = 0;
              for (let e3 = 1; e3 < n3.length; e3++) r3 += n3[e3] / Math.pow(1 + t4, e3);
              return r3;
            }
            function zr(n3, t4, r3, e3, o2) {
              if (e3 = e3 || 0, o2 = o2 || 0, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3), o2 = R(o2))) return a;
              let i3;
              if (0 === n3) i3 = (r3 + e3) / t4;
              else {
                const u2 = Math.pow(1 + n3, t4);
                i3 = 1 === o2 ? (e3 * n3 / (u2 - 1) + r3 * n3 / (1 - 1 / u2)) / (1 + n3) : e3 * n3 / (u2 - 1) + r3 * n3 / (1 - 1 / u2);
              }
              return -i3;
            }
            const Wr = { errors: p, symbols: Zn };
            t3.ABS = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.abs(n3);
            }, t3.ACCRINT = function(n3, t4, r3, e3, o2, i3, u2) {
              return n3 = Hr(n3), t4 = Hr(t4), r3 = Hr(r3), Gr(n3) && Gr(t4) && Gr(r3) ? e3 <= 0 || o2 <= 0 || -1 === [1, 2, 4].indexOf(i3) || -1 === [0, 1, 2, 3, 4].indexOf(u2) || r3 <= n3 ? c : (o2 = o2 || 0) * e3 * ht(n3, r3, u2 = u2 || 0) : a;
            }, t3.ACCRINTM = function() {
              throw new Error("ACCRINTM is not implemented");
            }, t3.ACOS = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              let t4 = Math.acos(n3);
              return isNaN(t4) && (t4 = c), t4;
            }, t3.ACOSH = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              let t4 = Math.log(n3 + Math.sqrt(n3 * n3 - 1));
              return isNaN(t4) && (t4 = c), t4;
            }, t3.ACOT = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.atan(1 / n3);
            }, t3.ACOTH = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              let t4 = 0.5 * Math.log((n3 + 1) / (n3 - 1));
              return isNaN(t4) && (t4 = c), t4;
            }, t3.AGGREGATE = function(n3, t4, r3, e3) {
              if (S(n3 = R(n3), R(n3))) return a;
              switch (n3) {
                case 1:
                  return tn(r3);
                case 2:
                  return fn(r3);
                case 3:
                  return ln(r3);
                case 4:
                  return wn(r3);
                case 5:
                  return In(r3);
                case 6:
                  return Wn(r3);
                case 7:
                  return Fn.S(r3);
                case 8:
                  return Fn.P(r3);
                case 9:
                  return Qn(r3);
                case 10:
                  return Un.S(r3);
                case 11:
                  return Un.P(r3);
                case 12:
                  return yn(r3);
                case 13:
                  return bn.SNGL(r3);
                case 14:
                  return En(r3, e3);
                case 15:
                  return Ln(r3, e3);
                case 16:
                  return Cn.INC(r3, e3);
                case 17:
                  return xn.INC(r3, e3);
                case 18:
                  return Cn.EXC(r3, e3);
                case 19:
                  return xn.EXC(r3, e3);
              }
            }, t3.AMORDEGRC = function() {
              throw new Error("AMORDEGRC is not implemented");
            }, t3.AMORLINC = function() {
              throw new Error("AMORLINC is not implemented");
            }, t3.AND = function() {
              const n3 = M(arguments);
              let t4 = a;
              for (let r3 = 0; r3 < n3.length; r3++) {
                if (n3[r3] instanceof Error) return n3[r3];
                void 0 !== n3[r3] && null !== n3[r3] && "string" != typeof n3[r3] && (t4 === a && (t4 = true), n3[r3] || (t4 = false));
              }
              return t4;
            }, t3.ARABIC = function(n3) {
              if (null == n3) return 0;
              if (n3 instanceof Error) return n3;
              if (!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(n3)) return a;
              let t4 = 0;
              return n3.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g, ((n4) => {
                t4 += { M: 1e3, CM: 900, D: 500, CD: 400, C: 100, XC: 90, L: 50, XL: 40, X: 10, IX: 9, V: 5, IV: 4, I: 1 }[n4];
              })), t4;
            }, t3.ASC = function() {
              throw new Error("ASC is not implemented");
            }, t3.ASIN = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              let t4 = Math.asin(n3);
              return isNaN(t4) && (t4 = c), t4;
            }, t3.ASINH = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.log(n3 + Math.sqrt(n3 * n3 + 1));
            }, t3.ATAN = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.atan(n3);
            }, t3.ATAN2 = function(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || Math.atan2(n3, t4);
            }, t3.ATANH = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              let t4 = Math.log((1 + n3) / (1 - n3)) / 2;
              return isNaN(t4) && (t4 = c), t4;
            }, t3.AVEDEV = function() {
              const n3 = M(arguments).filter(q);
              if (0 === n3.length) return c;
              const t4 = P(n3);
              return t4 instanceof Error ? t4 : e2.sum(e2(t4).subtract(e2.mean(t4)).abs()[0]) / t4.length;
            }, t3.AVERAGE = tn, t3.AVERAGEA = rn, t3.AVERAGEIF = function(n3, t4, r3) {
              if (arguments.length <= 1) return s;
              if (r3 = P(M(r3 = r3 || n3).filter(q)), n3 = M(n3), r3 instanceof Error) return r3;
              let e3 = 0, o2 = 0;
              const i3 = void 0 === t4 || "*" === t4, u2 = i3 ? null : X(t4 + "");
              for (let t5 = 0; t5 < n3.length; t5++) {
                const a2 = n3[t5];
                if (i3) o2 += r3[t5], e3++;
                else {
                  const n4 = [H(a2, G)].concat(u2);
                  B(n4) && (o2 += r3[t5], e3++);
                }
              }
              return o2 / e3;
            }, t3.AVERAGEIFS = function() {
              const n3 = m(arguments), t4 = (n3.length - 1) / 2, r3 = M(n3[0]);
              let e3 = 0, o2 = 0;
              for (let i4 = 0; i4 < r3.length; i4++) {
                let u2 = false;
                for (let r4 = 0; r4 < t4; r4++) {
                  const t5 = n3[2 * r4 + 1][i4], e4 = n3[2 * r4 + 2];
                  let o3 = false;
                  if (void 0 === e4 || "*" === e4) o3 = true;
                  else {
                    const n4 = X(e4 + ""), r5 = [H(t5, G)].concat(n4);
                    o3 = B(r5);
                  }
                  if (!o3) {
                    u2 = false;
                    break;
                  }
                  u2 = true;
                }
                u2 && (o2 += r3[i4], e3++);
              }
              const i3 = o2 / e3;
              return isNaN(i3) ? 0 : i3;
            }, t3.BAHTTEXT = function() {
              throw new Error("BAHTTEXT is not implemented");
            }, t3.BASE = function(n3, t4, r3) {
              const e3 = T(n3 = R(n3), t4 = R(t4), r3 = R(r3));
              if (e3) return e3;
              if (0 === t4) return c;
              const o2 = n3.toString(t4);
              return new Array(Math.max(r3 + 1 - o2.length, 0)).join("0") + o2;
            }, t3.BESSELI = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : o.besseli(n3, t4);
            }, t3.BESSELJ = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : o.besselj(n3, t4);
            }, t3.BESSELK = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : o.besselk(n3, t4);
            }, t3.BESSELY = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : o.bessely(n3, t4);
            }, t3.BETA = en, t3.BETADIST = Ft, t3.BETAINV = qt, t3.BIN2DEC = function(n3) {
              if (!yt(n3)) return c;
              const t4 = parseInt(n3, 2), r3 = n3.toString();
              return 10 === r3.length && "1" === r3.substring(0, 1) ? parseInt(r3.substring(1), 2) - 512 : t4;
            }, t3.BIN2HEX = function(n3, t4) {
              if (!yt(n3)) return c;
              const r3 = n3.toString();
              if (10 === r3.length && "1" === r3.substring(0, 1)) return (1099511627264 + parseInt(r3.substring(1), 2)).toString(16);
              const e3 = parseInt(n3, 2).toString(16);
              return void 0 === t4 ? e3 : isNaN(t4) ? a : t4 < 0 ? c : (t4 = Math.floor(t4)) >= e3.length ? Mt("0", t4 - e3.length) + e3 : c;
            }, t3.BIN2OCT = function(n3, t4) {
              if (!yt(n3)) return c;
              const r3 = n3.toString();
              if (10 === r3.length && "1" === r3.substring(0, 1)) return (1073741312 + parseInt(r3.substring(1), 2)).toString(8);
              const e3 = parseInt(n3, 2).toString(8);
              return void 0 === t4 ? e3 : isNaN(t4) ? a : t4 < 0 ? c : (t4 = Math.floor(t4)) >= e3.length ? Mt("0", t4 - e3.length) + e3 : c;
            }, t3.BINOM = on, t3.BINOMDIST = Ut, t3.BITAND = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : n3 < 0 || t4 < 0 || Math.floor(n3) !== n3 || Math.floor(t4) !== t4 || n3 > 281474976710655 || t4 > 281474976710655 ? c : n3 & t4;
            }, t3.BITLSHIFT = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : n3 < 0 || Math.floor(n3) !== n3 || n3 > 281474976710655 || Math.abs(t4) > 53 ? c : t4 >= 0 ? n3 << t4 : n3 >> -t4;
            }, t3.BITOR = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : n3 < 0 || t4 < 0 || Math.floor(n3) !== n3 || Math.floor(t4) !== t4 || n3 > 281474976710655 || t4 > 281474976710655 ? c : n3 | t4;
            }, t3.BITRSHIFT = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : n3 < 0 || Math.floor(n3) !== n3 || n3 > 281474976710655 || Math.abs(t4) > 53 ? c : t4 >= 0 ? n3 >> t4 : n3 << -t4;
            }, t3.BITXOR = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : n3 < 0 || t4 < 0 || Math.floor(n3) !== n3 || Math.floor(t4) !== t4 || n3 > 281474976710655 || t4 > 281474976710655 ? c : n3 ^ t4;
            }, t3.CEILING = Yn, t3.CEILINGMATH = _t, t3.CEILINGPRECISE = Vt, t3.CELL = function() {
              throw new Error("CELL is not implemented");
            }, t3.CHAR = pt, t3.CHIDIST = kt, t3.CHIDISTRT = jt, t3.CHIINV = Yt, t3.CHIINVRT = Gt, t3.CHISQ = un, t3.CHITEST = Ht, t3.CHOOSE = function() {
              if (arguments.length < 2) return s;
              const n3 = arguments[0];
              return n3 < 1 || n3 > 254 || arguments.length < n3 + 1 ? a : arguments[n3];
            }, t3.CLEAN = function(n3) {
              return S(n3) ? n3 : (n3 = n3 || "").replace(/[\0-\x1F]/g, "");
            }, t3.CODE = mt, t3.COLUMN = function(n3, t4) {
              return 2 !== arguments.length ? s : t4 < 0 ? c : n3 instanceof Array && "number" == typeof t4 ? 0 !== n3.length ? e2.col(n3, t4) : void 0 : a;
            }, t3.COLUMNS = function(n3) {
              return 1 !== arguments.length ? s : n3 instanceof Array ? 0 === n3.length ? 0 : e2.cols(n3) : a;
            }, t3.COMBIN = Gn, t3.COMBINA = function(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || (n3 < t4 ? c : 0 === n3 && 0 === t4 ? 1 : Gn(n3 + t4 - 1, n3 - 1));
            }, t3.COMPLEX = It, t3.CONCAT = vt, t3.CONCATENATE = dt, t3.CONFIDENCE = an, t3.CONVERT = function(n3, t4, r3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              const e3 = [["a.u. of action", "?", null, "action", false, false, 105457168181818e-48], ["a.u. of charge", "e", null, "electric_charge", false, false, 160217653141414e-33], ["a.u. of energy", "Eh", null, "energy", false, false, 435974417757576e-32], ["a.u. of length", "a?", null, "length", false, false, 529177210818182e-25], ["a.u. of mass", "m?", null, "mass", false, false, 910938261616162e-45], ["a.u. of time", "?/Eh", null, "time", false, false, 241888432650516e-31], ["admiralty knot", "admkn", null, "speed", false, true, 0.514773333], ["ampere", "A", null, "electric_current", true, false, 1], ["ampere per meter", "A/m", null, "magnetic_field_intensity", true, false, 1], ["\xE5ngstr\xF6m", "\xC5", ["ang"], "length", false, true, 1e-10], ["are", "ar", null, "area", false, true, 100], ["astronomical unit", "ua", null, "length", false, false, 149597870691667e-25], ["bar", "bar", null, "pressure", false, false, 1e5], ["barn", "b", null, "area", false, false, 1e-28], ["becquerel", "Bq", null, "radioactivity", true, false, 1], ["bit", "bit", ["b"], "information", false, true, 1], ["btu", "BTU", ["btu"], "energy", false, true, 1055.05585262], ["byte", "byte", null, "information", false, true, 8], ["candela", "cd", null, "luminous_intensity", true, false, 1], ["candela per square metre", "cd/m?", null, "luminance", true, false, 1], ["coulomb", "C", null, "electric_charge", true, false, 1], ["cubic \xE5ngstr\xF6m", "ang3", ["ang^3"], "volume", false, true, 1e-30], ["cubic foot", "ft3", ["ft^3"], "volume", false, true, 0.028316846592], ["cubic inch", "in3", ["in^3"], "volume", false, true, 16387064e-12], ["cubic light-year", "ly3", ["ly^3"], "volume", false, true, 846786664623715e-61], ["cubic metre", "m?", null, "volume", true, true, 1], ["cubic mile", "mi3", ["mi^3"], "volume", false, true, 416818182544058e-5], ["cubic nautical mile", "Nmi3", ["Nmi^3"], "volume", false, true, 6352182208], ["cubic Pica", "Pica3", ["Picapt3", "Pica^3", "Picapt^3"], "volume", false, true, 758660370370369e-22], ["cubic yard", "yd3", ["yd^3"], "volume", false, true, 0.764554857984], ["cup", "cup", null, "volume", false, true, 2365882365e-13], ["dalton", "Da", ["u"], "mass", false, false, 166053886282828e-41], ["day", "d", ["day"], "time", false, true, 86400], ["degree", "\xB0", null, "angle", false, false, 0.0174532925199433], ["degrees Rankine", "Rank", null, "temperature", false, true, 0.555555555555556], ["dyne", "dyn", ["dy"], "force", false, true, 1e-5], ["electronvolt", "eV", ["ev"], "energy", false, true, 1.60217656514141], ["ell", "ell", null, "length", false, true, 1.143], ["erg", "erg", ["e"], "energy", false, true, 1e-7], ["farad", "F", null, "electric_capacitance", true, false, 1], ["fluid ounce", "oz", null, "volume", false, true, 295735295625e-16], ["foot", "ft", null, "length", false, true, 0.3048], ["foot-pound", "flb", null, "energy", false, true, 1.3558179483314], ["gal", "Gal", null, "acceleration", false, false, 0.01], ["gallon", "gal", null, "volume", false, true, 0.003785411784], ["gauss", "G", ["ga"], "magnetic_flux_density", false, true, 1], ["grain", "grain", null, "mass", false, true, 647989e-10], ["gram", "g", null, "mass", false, true, 1e-3], ["gray", "Gy", null, "absorbed_dose", true, false, 1], ["gross registered ton", "GRT", ["regton"], "volume", false, true, 2.8316846592], ["hectare", "ha", null, "area", false, true, 1e4], ["henry", "H", null, "inductance", true, false, 1], ["hertz", "Hz", null, "frequency", true, false, 1], ["horsepower", "HP", ["h"], "power", false, true, 745.69987158227], ["horsepower-hour", "HPh", ["hh", "hph"], "energy", false, true, 2684519538e-3], ["hour", "h", ["hr"], "time", false, true, 3600], ["imperial gallon (U.K.)", "uk_gal", null, "volume", false, true, 454609e-8], ["imperial hundredweight", "lcwt", ["uk_cwt", "hweight"], "mass", false, true, 50.802345], ["imperial quart (U.K)", "uk_qt", null, "volume", false, true, 0.0011365225], ["imperial ton", "brton", ["uk_ton", "LTON"], "mass", false, true, 1016.046909], ["inch", "in", null, "length", false, true, 0.0254], ["international acre", "uk_acre", null, "area", false, true, 4046.8564224], ["IT calorie", "cal", null, "energy", false, true, 4.1868], ["joule", "J", null, "energy", true, true, 1], ["katal", "kat", null, "catalytic_activity", true, false, 1], ["kelvin", "K", ["kel"], "temperature", true, true, 1], ["kilogram", "kg", null, "mass", true, true, 1], ["knot", "kn", null, "speed", false, true, 0.514444444444444], ["light-year", "ly", null, "length", false, true, 9460730472580800], ["litre", "L", ["l", "lt"], "volume", false, true, 1e-3], ["lumen", "lm", null, "luminous_flux", true, false, 1], ["lux", "lx", null, "illuminance", true, false, 1], ["maxwell", "Mx", null, "magnetic_flux", false, false, 1e-18], ["measurement ton", "MTON", null, "volume", false, true, 1.13267386368], ["meter per hour", "m/h", ["m/hr"], "speed", false, true, 27777777777778e-17], ["meter per second", "m/s", ["m/sec"], "speed", true, true, 1], ["meter per second squared", "m?s??", null, "acceleration", true, false, 1], ["parsec", "pc", ["parsec"], "length", false, true, 30856775814671900], ["meter squared per second", "m?/s", null, "kinematic_viscosity", true, false, 1], ["metre", "m", null, "length", true, true, 1], ["miles per hour", "mph", null, "speed", false, true, 0.44704], ["millimetre of mercury", "mmHg", null, "pressure", false, false, 133.322], ["minute", "?", null, "angle", false, false, 290888208665722e-18], ["minute", "min", ["mn"], "time", false, true, 60], ["modern teaspoon", "tspm", null, "volume", false, true, 5e-6], ["mole", "mol", null, "amount_of_substance", true, false, 1], ["morgen", "Morgen", null, "area", false, true, 2500], ["n.u. of action", "?", null, "action", false, false, 105457168181818e-48], ["n.u. of mass", "m?", null, "mass", false, false, 910938261616162e-45], ["n.u. of speed", "c?", null, "speed", false, false, 299792458], ["n.u. of time", "?/(me?c??)", null, "time", false, false, 128808866778687e-35], ["nautical mile", "M", ["Nmi"], "length", false, true, 1852], ["newton", "N", null, "force", true, true, 1], ["\u0153rsted", "Oe ", null, "magnetic_field_intensity", false, false, 79.5774715459477], ["ohm", "\u03A9", null, "electric_resistance", true, false, 1], ["ounce mass", "ozm", null, "mass", false, true, 0.028349523125], ["pascal", "Pa", null, "pressure", true, false, 1], ["pascal second", "Pa?s", null, "dynamic_viscosity", true, false, 1], ["pferdest\xE4rke", "PS", null, "power", false, true, 735.49875], ["phot", "ph", null, "illuminance", false, false, 1e-4], ["pica (1/6 inch)", "pica", null, "length", false, true, 35277777777778e-17], ["pica (1/72 inch)", "Pica", ["Picapt"], "length", false, true, 0.00423333333333333], ["poise", "P", null, "dynamic_viscosity", false, false, 0.1], ["pond", "pond", null, "force", false, true, 980665e-8], ["pound force", "lbf", null, "force", false, true, 4.4482216152605], ["pound mass", "lbm", null, "mass", false, true, 0.45359237], ["quart", "qt", null, "volume", false, true, 946352946e-12], ["radian", "rad", null, "angle", true, false, 1], ["second", "?", null, "angle", false, false, 484813681109536e-20], ["second", "s", ["sec"], "time", true, true, 1], ["short hundredweight", "cwt", ["shweight"], "mass", false, true, 45.359237], ["siemens", "S", null, "electrical_conductance", true, false, 1], ["sievert", "Sv", null, "equivalent_dose", true, false, 1], ["slug", "sg", null, "mass", false, true, 14.59390294], ["square \xE5ngstr\xF6m", "ang2", ["ang^2"], "area", false, true, 1e-20], ["square foot", "ft2", ["ft^2"], "area", false, true, 0.09290304], ["square inch", "in2", ["in^2"], "area", false, true, 64516e-8], ["square light-year", "ly2", ["ly^2"], "area", false, true, 895054210748189e17], ["square meter", "m?", null, "area", true, true, 1], ["square mile", "mi2", ["mi^2"], "area", false, true, 2589988110336e-6], ["square nautical mile", "Nmi2", ["Nmi^2"], "area", false, true, 3429904], ["square Pica", "Pica2", ["Picapt2", "Pica^2", "Picapt^2"], "area", false, true, 1792111111111e-17], ["square yard", "yd2", ["yd^2"], "area", false, true, 0.83612736], ["statute mile", "mi", null, "length", false, true, 1609.344], ["steradian", "sr", null, "solid_angle", true, false, 1], ["stilb", "sb", null, "luminance", false, false, 1e-4], ["stokes", "St", null, "kinematic_viscosity", false, false, 1e-4], ["stone", "stone", null, "mass", false, true, 6.35029318], ["tablespoon", "tbs", null, "volume", false, true, 147868e-10], ["teaspoon", "tsp", null, "volume", false, true, 492892e-11], ["tesla", "T", null, "magnetic_flux_density", true, true, 1], ["thermodynamic calorie", "c", null, "energy", false, true, 4.184], ["ton", "ton", null, "mass", false, true, 907.18474], ["tonne", "t", null, "mass", false, false, 1e3], ["U.K. pint", "uk_pt", null, "volume", false, true, 56826125e-11], ["U.S. bushel", "bushel", null, "volume", false, true, 0.03523907], ["U.S. oil barrel", "barrel", null, "volume", false, true, 0.158987295], ["U.S. pint", "pt", ["us_pt"], "volume", false, true, 473176473e-12], ["U.S. survey mile", "survey_mi", null, "length", false, true, 1609.347219], ["U.S. survey/statute acre", "us_acre", null, "area", false, true, 4046.87261], ["volt", "V", null, "voltage", true, false, 1], ["watt", "W", null, "power", true, true, 1], ["watt-hour", "Wh", ["wh"], "energy", false, true, 3600], ["weber", "Wb", null, "magnetic_flux", true, false, 1], ["yard", "yd", null, "length", false, true, 0.9144], ["year", "yr", null, "time", false, true, 31557600]], o2 = { Yi: ["yobi", 80, 12089258196146292e8, "Yi", "yotta"], Zi: ["zebi", 70, 11805916207174113e5, "Zi", "zetta"], Ei: ["exbi", 60, 1152921504606847e3, "Ei", "exa"], Pi: ["pebi", 50, 1125899906842624, "Pi", "peta"], Ti: ["tebi", 40, 1099511627776, "Ti", "tera"], Gi: ["gibi", 30, 1073741824, "Gi", "giga"], Mi: ["mebi", 20, 1048576, "Mi", "mega"], ki: ["kibi", 10, 1024, "ki", "kilo"] }, i3 = { Y: ["yotta", 1e24, "Y"], Z: ["zetta", 1e21, "Z"], E: ["exa", 1e18, "E"], P: ["peta", 1e15, "P"], T: ["tera", 1e12, "T"], G: ["giga", 1e9, "G"], M: ["mega", 1e6, "M"], k: ["kilo", 1e3, "k"], h: ["hecto", 100, "h"], e: ["dekao", 10, "e"], d: ["deci", 0.1, "d"], c: ["centi", 0.01, "c"], m: ["milli", 1e-3, "m"], u: ["micro", 1e-6, "u"], n: ["nano", 1e-9, "n"], p: ["pico", 1e-12, "p"], f: ["femto", 1e-15, "f"], a: ["atto", 1e-18, "a"], z: ["zepto", 1e-21, "z"], y: ["yocto", 1e-24, "y"] };
              let u2, a2 = null, f2 = null, l2 = t4, c2 = r3, h2 = 1, g2 = 1;
              for (let n4 = 0; n4 < e3.length; n4++) u2 = null === e3[n4][2] ? [] : e3[n4][2], (e3[n4][1] === l2 || u2.indexOf(l2) >= 0) && (a2 = e3[n4]), (e3[n4][1] === c2 || u2.indexOf(c2) >= 0) && (f2 = e3[n4]);
              if (null === a2) {
                const n4 = o2[t4.substring(0, 2)];
                let r4 = i3[t4.substring(0, 1)];
                "da" === t4.substring(0, 2) && (r4 = ["dekao", 10, "da"]), n4 ? (h2 = n4[2], l2 = t4.substring(2)) : r4 && (h2 = r4[1], l2 = t4.substring(r4[2].length));
                for (let n5 = 0; n5 < e3.length; n5++) u2 = null === e3[n5][2] ? [] : e3[n5][2], (e3[n5][1] === l2 || u2.indexOf(l2) >= 0) && (a2 = e3[n5]);
              }
              if (null === f2) {
                const n4 = o2[r3.substring(0, 2)];
                let t5 = i3[r3.substring(0, 1)];
                "da" === r3.substring(0, 2) && (t5 = ["dekao", 10, "da"]), n4 ? (g2 = n4[2], c2 = r3.substring(2)) : t5 && (g2 = t5[1], c2 = r3.substring(t5[2].length));
                for (let n5 = 0; n5 < e3.length; n5++) u2 = null === e3[n5][2] ? [] : e3[n5][2], (e3[n5][1] === c2 || u2.indexOf(c2) >= 0) && (f2 = e3[n5]);
              }
              return null === a2 || null === f2 || a2[3] !== f2[3] ? s : n3 * a2[6] * h2 / (f2[6] * g2);
            }, t3.CORREL = function(n3, t4) {
              return S(n3 = P(M(n3)), t4 = P(M(t4))) ? a : e2.corrcoeff(n3, t4);
            }, t3.COS = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.cos(n3);
            }, t3.COSH = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : (Math.exp(n3) + Math.exp(-n3)) / 2;
            }, t3.COT = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : 0 === n3 ? u : 1 / Math.tan(n3);
            }, t3.COTH = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              if (0 === n3) return u;
              const t4 = Math.exp(2 * n3);
              return (t4 + 1) / (t4 - 1);
            }, t3.COUNT = fn, t3.COUNTA = ln, t3.COUNTBLANK = cn, t3.COUNTIF = function(n3, t4) {
              if (n3 = M(n3), void 0 === t4 || "*" === t4) return n3.length;
              let r3 = 0;
              const e3 = X(t4 + "");
              for (let t5 = 0; t5 < n3.length; t5++) {
                const o2 = [H(n3[t5], G)].concat(e3);
                B(o2) && r3++;
              }
              return r3;
            }, t3.COUNTIFS = function() {
              const n3 = m(arguments), t4 = new Array(M(n3[0]).length);
              for (let n4 = 0; n4 < t4.length; n4++) t4[n4] = true;
              for (let r4 = 0; r4 < n3.length; r4 += 2) {
                const e3 = M(n3[r4]), o2 = n3[r4 + 1];
                if (void 0 !== o2 && "*" !== o2) {
                  const n4 = X(o2 + "");
                  for (let r5 = 0; r5 < e3.length; r5++) {
                    const o3 = [H(e3[r5], G)].concat(n4);
                    t4[r5] = t4[r5] && B(o3);
                  }
                }
              }
              let r3 = 0;
              for (let n4 = 0; n4 < t4.length; n4++) t4[n4] && r3++;
              return r3;
            }, t3.COUPDAYBS = function() {
              throw new Error("COUPDAYBS is not implemented");
            }, t3.COUPDAYS = function() {
              throw new Error("COUPDAYS is not implemented");
            }, t3.COUPDAYSNC = function() {
              throw new Error("COUPDAYSNC is not implemented");
            }, t3.COUPNCD = function() {
              throw new Error("COUPNCD is not implemented");
            }, t3.COUPNUM = function() {
              throw new Error("COUPNUM is not implemented");
            }, t3.COUPPCD = function() {
              throw new Error("COUPPCD is not implemented");
            }, t3.COVAR = Xt, t3.COVARIANCE = sn, t3.COVARIANCEP = Bt, t3.COVARIANCES = $t, t3.CRITBINOM = zt, t3.CSC = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : 0 === n3 ? u : 1 / Math.sin(n3);
            }, t3.CSCH = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : 0 === n3 ? u : 2 / (Math.exp(n3) - Math.exp(-n3));
            }, t3.CUMIPMT = function(n3, t4, r3, e3, o2, i3) {
              if (S(n3 = R(n3), t4 = R(t4), r3 = R(r3))) return a;
              if (n3 <= 0 || t4 <= 0 || r3 <= 0) return c;
              if (e3 < 1 || o2 < 1 || e3 > o2) return c;
              if (0 !== i3 && 1 !== i3) return c;
              const u2 = zr(n3, t4, r3, 0, i3);
              let f2 = 0;
              1 === e3 && (0 === i3 && (f2 = -r3), e3++);
              for (let t5 = e3; t5 <= o2; t5++) f2 += 1 === i3 ? Xr(n3, t5 - 2, u2, r3, 1) - u2 : Xr(n3, t5 - 1, u2, r3, 0);
              return f2 *= n3, f2;
            }, t3.CUMPRINC = function(n3, t4, r3, e3, o2, i3) {
              if (S(n3 = R(n3), t4 = R(t4), r3 = R(r3))) return a;
              if (n3 <= 0 || t4 <= 0 || r3 <= 0) return c;
              if (e3 < 1 || o2 < 1 || e3 > o2) return c;
              if (0 !== i3 && 1 !== i3) return c;
              const u2 = zr(n3, t4, r3, 0, i3);
              let f2 = 0;
              1 === e3 && (f2 = 0 === i3 ? u2 + r3 * n3 : u2, e3++);
              for (let t5 = e3; t5 <= o2; t5++) f2 += i3 > 0 ? u2 - (Xr(n3, t5 - 2, u2, r3, 1) - u2) * n3 : u2 - Xr(n3, t5 - 1, u2, r3, 0) * n3;
              return f2;
            }, t3.DATE = function(n3, t4, r3) {
              let e3;
              return S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? e3 = a : (e3 = new Date(n3, t4 - 1, r3), e3.getFullYear() < 0 && (e3 = c)), e3;
            }, t3.DATEDIF = et, t3.DATEVALUE = function(n3) {
              if ("string" != typeof n3) return a;
              const t4 = Date.parse(n3);
              return isNaN(t4) ? a : new Date(n3);
            }, t3.DAVERAGE = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              let i3 = 0;
              return d(e3, ((n4) => {
                i3 += o2[n4];
              })), 0 === e3.length ? u : i3 / e3.length;
            }, t3.DAY = function(n3) {
              const t4 = O(n3);
              return t4 instanceof Error ? t4 : t4.getDate();
            }, t3.DAYS = it, t3.DAYS360 = ut, t3.DB = function(n3, t4, r3, e3, o2) {
              if (o2 = void 0 === o2 ? 12 : o2, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3), o2 = R(o2))) return a;
              if (n3 < 0 || t4 < 0 || r3 < 0 || e3 < 0) return c;
              if (-1 === [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].indexOf(o2)) return c;
              if (e3 > r3) return c;
              if (t4 >= n3) return 0;
              const i3 = (1 - Math.pow(t4 / n3, 1 / r3)).toFixed(3), u2 = n3 * i3 * o2 / 12;
              let f2 = u2, l2 = 0;
              const s2 = e3 === r3 ? r3 - 1 : e3;
              for (let t5 = 2; t5 <= s2; t5++) l2 = (n3 - f2) * i3, f2 += l2;
              return 1 === e3 ? u2 : e3 === r3 ? (n3 - f2) * i3 : l2;
            }, t3.DBCS = function() {
              throw new Error("DBCS is not implemented");
            }, t3.DCOUNT = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              const i3 = [];
              return d(e3, ((n4) => {
                i3.push(o2[n4]);
              })), fn(i3);
            }, t3.DCOUNTA = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              const i3 = [];
              return d(e3, ((n4) => {
                i3.push(o2[n4]);
              })), ln(i3);
            }, t3.DDB = function(n3, t4, r3, e3, o2) {
              if (o2 = void 0 === o2 ? 2 : o2, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3), o2 = R(o2))) return a;
              if (n3 < 0 || t4 < 0 || r3 < 0 || e3 < 0 || o2 <= 0) return c;
              if (e3 > r3) return c;
              if (t4 >= n3) return 0;
              let i3 = 0, u2 = 0;
              for (let a2 = 1; a2 <= e3; a2++) u2 = Math.min(o2 / r3 * (n3 - i3), n3 - t4 - i3), i3 += u2;
              return u2;
            }, t3.DEC2BIN = function(n3, t4) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              if (!/^-?[0-9]{1,3}$/.test(n3) || n3 < -512 || n3 > 511) return c;
              if (n3 < 0) return "1" + Mt("0", 9 - (512 + n3).toString(2).length) + (512 + n3).toString(2);
              const r3 = parseInt(n3, 10).toString(2);
              return void 0 === t4 ? r3 : isNaN(t4) ? a : t4 < 0 ? c : (t4 = Math.floor(t4)) >= r3.length ? Mt("0", t4 - r3.length) + r3 : c;
            }, t3.DEC2HEX = function(n3, t4) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              if (!/^-?[0-9]{1,12}$/.test(n3) || n3 < -549755813888 || n3 > 549755813887) return c;
              if (n3 < 0) return (1099511627776 + n3).toString(16);
              const r3 = parseInt(n3, 10).toString(16);
              return void 0 === t4 ? r3 : isNaN(t4) ? a : t4 < 0 ? c : (t4 = Math.floor(t4)) >= r3.length ? Mt("0", t4 - r3.length) + r3 : c;
            }, t3.DEC2OCT = function(n3, t4) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              if (!/^-?[0-9]{1,9}$/.test(n3) || n3 < -536870912 || n3 > 536870911) return c;
              if (n3 < 0) return (1073741824 + n3).toString(8);
              const r3 = parseInt(n3, 10).toString(8);
              return void 0 === t4 ? r3 : isNaN(t4) ? a : t4 < 0 ? c : (t4 = Math.floor(t4)) >= r3.length ? Mt("0", t4 - r3.length) + r3 : c;
            }, t3.DECIMAL = function(n3, t4) {
              if (arguments.length < 1) return a;
              return T(n3 = R(n3), t4 = R(t4)) || (0 === t4 ? c : parseInt(n3, t4));
            }, t3.DEGREES = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : 180 * n3 / Math.PI;
            }, t3.DELTA = function(n3, t4) {
              return t4 = void 0 === t4 ? 0 : t4, S(n3 = R(n3), t4 = R(t4)) ? a : n3 === t4 ? 1 : 0;
            }, t3.DEVSQ = function() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              const t4 = e2.mean(n3);
              let r3 = 0;
              for (let e3 = 0; e3 < n3.length; e3++) r3 += Math.pow(n3[e3] - t4, 2);
              return r3;
            }, t3.DGET = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              return o2 = y2("string" == typeof t4 ? n3[b(n3, t4)] : n3[t4]), 0 === e3.length ? a : e3.length > 1 ? c : o2[e3[0]];
            }, t3.DISC = function(n3, t4, r3, e3, o2) {
              if (S(n3 = O(n3), t4 = O(t4), r3 = R(r3), e3 = R(e3), o2 = (o2 = R(o2)) || 0)) return a;
              if (r3 <= 0 || e3 <= 0) return c;
              if (n3 >= t4) return a;
              let i3, u2;
              switch (o2) {
                case 0:
                  i3 = 360, u2 = ut(n3, t4, false);
                  break;
                case 1:
                case 3:
                  i3 = 365, u2 = et(n3, t4, "D");
                  break;
                case 2:
                  i3 = 360, u2 = et(n3, t4, "D");
                  break;
                case 4:
                  i3 = 360, u2 = ut(n3, t4, true);
                  break;
                default:
                  return c;
              }
              return (e3 - r3) / e3 * i3 / u2;
            }, t3.DMAX = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              let i3 = o2[e3[0]];
              return d(e3, ((n4) => {
                i3 < o2[n4] && (i3 = o2[n4]);
              })), i3;
            }, t3.DMIN = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              let i3 = o2[e3[0]];
              return d(e3, ((n4) => {
                i3 > o2[n4] && (i3 = o2[n4]);
              })), i3;
            }, t3.DOLLAR = function(n3, t4 = 2) {
              if (n3 = R(n3), isNaN(n3)) return a;
              const r3 = { style: "currency", currency: "USD", minimumFractionDigits: t4 >= 0 ? t4 : 0, maximumFractionDigits: t4 >= 0 ? t4 : 0 }, e3 = (n3 = Kn(n3, t4)).toLocaleString("en-US", r3);
              return n3 < 0 ? "$(" + e3.slice(2) + ")" : e3;
            }, t3.DOLLARDE = function(n3, t4) {
              if (S(n3 = R(n3), t4 = R(t4))) return a;
              if (t4 < 0) return c;
              if (t4 >= 0 && t4 < 1) return u;
              t4 = parseInt(t4, 10);
              let r3 = parseInt(n3, 10);
              r3 += n3 % 1 * Math.pow(10, Math.ceil(Math.log(t4) / Math.LN10)) / t4;
              const e3 = Math.pow(10, Math.ceil(Math.log(t4) / Math.LN2) + 1);
              return r3 = Math.round(r3 * e3) / e3, r3;
            }, t3.DOLLARFR = function(n3, t4) {
              if (S(n3 = R(n3), t4 = R(t4))) return a;
              if (t4 < 0) return c;
              if (t4 >= 0 && t4 < 1) return u;
              t4 = parseInt(t4, 10);
              let r3 = parseInt(n3, 10);
              return r3 += n3 % 1 * Math.pow(10, -Math.ceil(Math.log(t4) / Math.LN10)) * t4, r3;
            }, t3.DPRODUCT = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              let i3 = [];
              d(e3, ((n4) => {
                i3.push(o2[n4]);
              })), i3 = jr(i3);
              let u2 = 1;
              return d(i3, ((n4) => {
                u2 *= n4;
              })), u2;
            }, t3.DSTDEV = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              let i3 = [];
              return d(e3, ((n4) => {
                i3.push(o2[n4]);
              })), i3 = jr(i3), Fn.S(i3);
            }, t3.DSTDEVP = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              let i3 = [];
              return d(e3, ((n4) => {
                i3.push(o2[n4]);
              })), i3 = jr(i3), Fn.P(i3);
            }, t3.DSUM = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              const i3 = [];
              return d(e3, ((n4) => {
                i3.push(o2[n4]);
              })), Qn(i3);
            }, t3.DURATION = function() {
              throw new Error("DURATION is not implemented");
            }, t3.DVAR = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              const i3 = [];
              return d(e3, ((n4) => {
                i3.push(o2[n4]);
              })), Un.S(i3);
            }, t3.DVARP = function(n3, t4, r3) {
              if (isNaN(t4) && "string" != typeof t4) return a;
              const e3 = Yr(n3, r3);
              let o2 = [];
              if ("string" == typeof t4) {
                const r4 = b(n3, t4);
                o2 = y2(n3[r4]);
              } else o2 = y2(n3[t4]);
              const i3 = [];
              return d(e3, ((n4) => {
                i3.push(o2[n4]);
              })), Un.P(i3);
            }, t3.EDATE = function(n3, t4) {
              return (n3 = O(n3)) instanceof Error ? n3 : isNaN(t4) ? a : (t4 = parseInt(t4, 10), n3.setMonth(n3.getMonth() + t4), n3);
            }, t3.EFFECT = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : n3 <= 0 || t4 < 1 ? c : (t4 = parseInt(t4, 10), Math.pow(1 + n3 / t4, t4) - 1);
            }, t3.EOMONTH = function(n3, t4) {
              return (n3 = O(n3)) instanceof Error ? n3 : isNaN(t4) ? a : (t4 = parseInt(t4, 10), new Date(n3.getFullYear(), n3.getMonth() + t4 + 1, 0));
            }, t3.ERF = bt, t3.ERFC = Tt, t3.ERFCPRECISE = Wt, t3.ERFPRECISE = Kt, t3.ERROR = $2, t3.EVEN = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Yn(n3, -2, -1);
            }, t3.EXACT = function(n3, t4) {
              if (2 !== arguments.length) return s;
              return T(n3, t4) || (n3 = L(n3)) === L(t4);
            }, t3.EXP = function(n3) {
              return arguments.length < 1 ? s : arguments.length > 1 ? h : (n3 = R(n3)) instanceof Error ? n3 : n3 = Math.exp(n3);
            }, t3.EXPON = hn, t3.EXPONDIST = Qt, t3.F = gn, t3.FACT = Xn, t3.FACTDOUBLE = function n3(t4) {
              if ((t4 = R(t4)) instanceof Error) return t4;
              const r3 = Math.floor(t4);
              return r3 <= 0 ? 1 : r3 * n3(r3 - 2);
            }, t3.FALSE = function() {
              return false;
            }, t3.FDIST = Zt, t3.FDISTRT = Jt, t3.FIND = function(n3, t4, r3) {
              if (arguments.length < 2) return s;
              n3 = L(n3), r3 = void 0 === r3 ? 0 : r3;
              const e3 = (t4 = L(t4)).indexOf(n3, r3 - 1);
              return -1 === e3 ? a : e3 + 1;
            }, t3.FINV = nr, t3.FINVRT = tr, t3.FISHER = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.log((1 + n3) / (1 - n3)) / 2;
            }, t3.FISHERINV = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              const t4 = Math.exp(2 * n3);
              return (t4 - 1) / (t4 + 1);
            }, t3.FIXED = Et, t3.FLOOR = Bn, t3.FLOORMATH = rr, t3.FLOORPRECISE = er, t3.FORECAST = pn, t3.FREQUENCY = function(n3, t4) {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              const r3 = n3.length, e3 = t4.length, o2 = [];
              for (let i3 = 0; i3 <= e3; i3++) {
                o2[i3] = 0;
                for (let u2 = 0; u2 < r3; u2++) 0 === i3 ? n3[u2] <= t4[0] && (o2[0] += 1) : i3 < e3 ? n3[u2] > t4[i3 - 1] && n3[u2] <= t4[i3] && (o2[i3] += 1) : i3 === e3 && n3[u2] > t4[e3 - 1] && (o2[e3] += 1);
              }
              return o2;
            }, t3.FTEST = or, t3.FV = Xr, t3.FVSCHEDULE = function(n3, t4) {
              if (S(n3 = R(n3), t4 = P(M(t4)))) return a;
              const r3 = t4.length;
              let e3 = n3;
              for (let n4 = 0; n4 < r3; n4++) e3 *= 1 + t4[n4];
              return e3;
            }, t3.GAMMA = mn, t3.GAMMADIST = ir, t3.GAMMAINV = ur, t3.GAMMALN = dn, t3.GAMMALNPRECISE = ar, t3.GAUSS = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : e2.normal.cdf(n3, 0, 1) - 0.5;
            }, t3.GCD = function() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              const t4 = n3.length, r3 = n3[0];
              let e3 = r3 < 0 ? -r3 : r3;
              for (let r4 = 1; r4 < t4; r4++) {
                const t5 = n3[r4];
                let o2 = t5 < 0 ? -t5 : t5;
                for (; e3 && o2; ) e3 > o2 ? e3 %= o2 : o2 %= e3;
                e3 += o2;
              }
              return e3;
            }, t3.GEOMEAN = function() {
              const n3 = P(M(arguments));
              return n3 instanceof Error ? n3 : e2.geomean(n3);
            }, t3.GESTEP = function(n3, t4) {
              return S(t4 = t4 || 0, n3 = R(n3)) ? n3 : n3 >= t4 ? 1 : 0;
            }, t3.GROWTH = function(n3, t4, r3, e3) {
              if ((n3 = P(n3)) instanceof Error) return n3;
              let o2;
              if (void 0 === t4) for (t4 = [], o2 = 1; o2 <= n3.length; o2++) t4.push(o2);
              if (void 0 === r3) for (r3 = [], o2 = 1; o2 <= n3.length; o2++) r3.push(o2);
              if (S(t4 = P(t4), r3 = P(r3))) return a;
              void 0 === e3 && (e3 = true);
              const i3 = n3.length;
              let u2, f2, l2 = 0, c2 = 0, s2 = 0, h2 = 0;
              for (o2 = 0; o2 < i3; o2++) {
                const r4 = t4[o2], e4 = Math.log(n3[o2]);
                l2 += r4, c2 += e4, s2 += r4 * e4, h2 += r4 * r4;
              }
              l2 /= i3, c2 /= i3, s2 /= i3, h2 /= i3, e3 ? (u2 = (s2 - l2 * c2) / (h2 - l2 * l2), f2 = c2 - u2 * l2) : (u2 = s2 / h2, f2 = 0);
              const g2 = [];
              for (o2 = 0; o2 < r3.length; o2++) g2.push(Math.exp(f2 + u2 * r3[o2]));
              return g2;
            }, t3.HARMEAN = function() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              const t4 = n3.length;
              let r3 = 0;
              for (let e3 = 0; e3 < t4; e3++) r3 += 1 / n3[e3];
              return t4 / r3;
            }, t3.HEX2BIN = function(n3, t4) {
              if (!/^[0-9A-Fa-f]{1,10}$/.test(n3)) return c;
              const r3 = !(10 !== n3.length || "f" !== n3.substring(0, 1).toLowerCase()), e3 = r3 ? parseInt(n3, 16) - 1099511627776 : parseInt(n3, 16);
              if (e3 < -512 || e3 > 511) return c;
              if (r3) return "1" + Mt("0", 9 - (512 + e3).toString(2).length) + (512 + e3).toString(2);
              const o2 = e3.toString(2);
              return void 0 === t4 ? o2 : isNaN(t4) ? a : t4 < 0 ? c : (t4 = Math.floor(t4)) >= o2.length ? Mt("0", t4 - o2.length) + o2 : c;
            }, t3.HEX2DEC = function(n3) {
              if (!/^[0-9A-Fa-f]{1,10}$/.test(n3)) return c;
              const t4 = parseInt(n3, 16);
              return t4 >= 549755813888 ? t4 - 1099511627776 : t4;
            }, t3.HEX2OCT = function(n3, t4) {
              if (!/^[0-9A-Fa-f]{1,10}$/.test(n3)) return c;
              const r3 = parseInt(n3, 16);
              if (r3 > 536870911 && r3 < 1098974756864) return c;
              if (r3 >= 1098974756864) return (r3 - 1098437885952).toString(8);
              const e3 = r3.toString(8);
              return void 0 === t4 ? e3 : isNaN(t4) ? a : t4 < 0 ? c : (t4 = Math.floor(t4)) >= e3.length ? Mt("0", t4 - e3.length) + e3 : c;
            }, t3.HLOOKUP = function(n3, t4, r3, e3) {
              return nn(n3, I(t4), r3, e3);
            }, t3.HOUR = function(n3) {
              return (n3 = O(n3)) instanceof Error ? n3 : n3.getHours();
            }, t3.HYPGEOM = vn, t3.HYPGEOMDIST = fr, t3.IF = function(n3, t4, r3) {
              return n3 instanceof Error ? n3 : (null == (t4 = !(arguments.length >= 2) || t4) && (t4 = 0), null == (r3 = 3 === arguments.length && r3) && (r3 = 0), n3 ? t4 : r3);
            }, t3.IFERROR = function(n3, t4) {
              return W(n3) ? t4 : n3;
            }, t3.IFNA = function(n3, t4) {
              return n3 === s ? t4 : n3;
            }, t3.IFS = function() {
              for (let n3 = 0; n3 < arguments.length / 2; n3++) if (arguments[2 * n3]) return arguments[2 * n3 + 1];
              return s;
            }, t3.IMABS = St, t3.IMAGINARY = At, t3.IMARGUMENT = Ct, t3.IMCONJUGATE = function(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              if (S(t4, r3)) return a;
              let e3 = n3.substring(n3.length - 1);
              return e3 = "i" === e3 || "j" === e3 ? e3 : "i", 0 !== r3 ? It(t4, -r3, e3) : n3;
            }, t3.IMCOS = Dt, t3.IMCOSH = Ot, t3.IMCOT = function(n3) {
              return S(Rt(n3), At(n3)) ? a : xt(Dt(n3), Pt(n3));
            }, t3.IMCSC = function(n3) {
              return true === n3 || false === n3 ? a : S(Rt(n3), At(n3)) ? c : xt("1", Pt(n3));
            }, t3.IMCSCH = function(n3) {
              return true === n3 || false === n3 ? a : S(Rt(n3), At(n3)) ? c : xt("1", Lt(n3));
            }, t3.IMDIV = xt, t3.IMEXP = function(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              if (S(t4, r3)) return a;
              let e3 = n3.substring(n3.length - 1);
              e3 = "i" === e3 || "j" === e3 ? e3 : "i";
              const o2 = Math.exp(t4);
              return It(o2 * Math.cos(r3), o2 * Math.sin(r3), e3);
            }, t3.IMLN = function(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              if (S(t4, r3)) return a;
              let e3 = n3.substring(n3.length - 1);
              return e3 = "i" === e3 || "j" === e3 ? e3 : "i", It(Math.log(Math.sqrt(t4 * t4 + r3 * r3)), Math.atan(r3 / t4), e3);
            }, t3.IMLOG10 = function(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              if (S(t4, r3)) return a;
              let e3 = n3.substring(n3.length - 1);
              return e3 = "i" === e3 || "j" === e3 ? e3 : "i", It(Math.log(Math.sqrt(t4 * t4 + r3 * r3)) / Math.log(10), Math.atan(r3 / t4) / Math.log(10), e3);
            }, t3.IMLOG2 = function(n3) {
              const t4 = Rt(n3), r3 = At(n3);
              if (S(t4, r3)) return a;
              let e3 = n3.substring(n3.length - 1);
              return e3 = "i" === e3 || "j" === e3 ? e3 : "i", It(Math.log(Math.sqrt(t4 * t4 + r3 * r3)) / Math.log(2), Math.atan(r3 / t4) / Math.log(2), e3);
            }, t3.IMPOWER = function(n3, t4) {
              if (S(t4 = R(t4), Rt(n3), At(n3))) return a;
              let r3 = n3.substring(n3.length - 1);
              r3 = "i" === r3 || "j" === r3 ? r3 : "i";
              const e3 = Math.pow(St(n3), t4), o2 = Ct(n3);
              return It(e3 * Math.cos(t4 * o2), e3 * Math.sin(t4 * o2), r3);
            }, t3.IMPRODUCT = function() {
              let n3 = arguments[0];
              if (!arguments.length) return a;
              for (let t4 = 1; t4 < arguments.length; t4++) {
                const r3 = Rt(n3), e3 = At(n3), o2 = Rt(arguments[t4]), i3 = At(arguments[t4]);
                if (S(r3, e3, o2, i3)) return a;
                n3 = It(r3 * o2 - e3 * i3, r3 * i3 + e3 * o2);
              }
              return n3;
            }, t3.IMREAL = Rt, t3.IMSEC = function(n3) {
              return true === n3 || false === n3 || S(Rt(n3), At(n3)) ? a : xt("1", Dt(n3));
            }, t3.IMSECH = function(n3) {
              return S(Rt(n3), At(n3)) ? a : xt("1", Ot(n3));
            }, t3.IMSIN = Pt, t3.IMSINH = Lt, t3.IMSQRT = function(n3) {
              if (S(Rt(n3), At(n3))) return a;
              let t4 = n3.substring(n3.length - 1);
              t4 = "i" === t4 || "j" === t4 ? t4 : "i";
              const r3 = Math.sqrt(St(n3)), e3 = Ct(n3);
              return It(r3 * Math.cos(e3 / 2), r3 * Math.sin(e3 / 2), t4);
            }, t3.IMSUB = function(n3, t4) {
              const r3 = Rt(n3), e3 = At(n3), o2 = Rt(t4), i3 = At(t4);
              if (S(r3, e3, o2, i3)) return a;
              const u2 = n3.substring(n3.length - 1), f2 = t4.substring(t4.length - 1);
              let l2 = "i";
              return ("j" === u2 || "j" === f2) && (l2 = "j"), It(r3 - o2, e3 - i3, l2);
            }, t3.IMSUM = function() {
              if (!arguments.length) return a;
              const n3 = M(arguments);
              let t4 = n3[0];
              for (let r3 = 1; r3 < n3.length; r3++) {
                const e3 = Rt(t4), o2 = At(t4), i3 = Rt(n3[r3]), u2 = At(n3[r3]);
                if (S(e3, o2, i3, u2)) return a;
                t4 = It(e3 + i3, o2 + u2);
              }
              return t4;
            }, t3.IMTAN = function(n3) {
              return true === n3 || false === n3 || S(Rt(n3), At(n3)) ? a : xt(Pt(n3), Dt(n3));
            }, t3.INDEX = function(n3, t4, r3) {
              const e3 = T(n3, t4, r3);
              if (e3) return e3;
              if (!Array.isArray(n3)) return a;
              const o2 = n3.length > 0 && !Array.isArray(n3[0]);
              return o2 && !r3 ? (r3 = t4, t4 = 1) : (r3 = r3 || 1, t4 = t4 || 1), r3 < 0 || t4 < 0 ? a : o2 && 1 === t4 && r3 <= n3.length ? n3[r3 - 1] : t4 <= n3.length && r3 <= n3[t4 - 1].length ? n3[t4 - 1][r3 - 1] : f;
            }, t3.INFO = function() {
              throw new Error("INFO is not implemented");
            }, t3.INT = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.floor(n3);
            }, t3.INTERCEPT = function(n3, t4) {
              return S(n3 = P(n3), t4 = P(t4)) ? a : n3.length !== t4.length ? s : pn(0, n3, t4);
            }, t3.INTRATE = function() {
              throw new Error("INTRATE is not implemented");
            }, t3.IPMT = Br, t3.IRR = function(n3, t4) {
              if (t4 = t4 || 0, S(n3 = P(M(n3)), t4 = R(t4))) return a;
              const r3 = (n4, t5, r4) => {
                const e4 = r4 + 1;
                let o3 = n4[0];
                for (let r5 = 1; r5 < n4.length; r5++) o3 += n4[r5] / Math.pow(e4, (t5[r5] - t5[0]) / 365);
                return o3;
              }, e3 = (n4, t5, r4) => {
                const e4 = r4 + 1;
                let o3 = 0;
                for (let r5 = 1; r5 < n4.length; r5++) {
                  const i4 = (t5[r5] - t5[0]) / 365;
                  o3 -= i4 * n4[r5] / Math.pow(e4, i4 + 1);
                }
                return o3;
              }, o2 = [];
              let i3 = false, u2 = false;
              for (let t5 = 0; t5 < n3.length; t5++) o2[t5] = 0 === t5 ? 0 : o2[t5 - 1] + 365, n3[t5] > 0 && (i3 = true), n3[t5] < 0 && (u2 = true);
              if (!i3 || !u2) return c;
              let f2, l2, s2, h2 = t4 = void 0 === t4 ? 0.1 : t4, g2 = true;
              do {
                s2 = r3(n3, o2, h2), f2 = h2 - s2 / e3(n3, o2, h2), l2 = Math.abs(f2 - h2), h2 = f2, g2 = l2 > 1e-10 && Math.abs(s2) > 1e-10;
              } while (g2);
              return h2;
            }, t3.ISBLANK = function(n3) {
              return null === n3;
            }, t3.ISERR = z, t3.ISERROR = W, t3.ISEVEN = function(n3) {
              return !(1 & Math.floor(Math.abs(n3)));
            }, t3.ISFORMULA = function() {
              throw new Error("ISFORMULA is not implemented");
            }, t3.ISLOGICAL = K, t3.ISNA = function(n3) {
              return n3 === s;
            }, t3.ISNONTEXT = function(n3) {
              return "string" != typeof n3;
            }, t3.ISNUMBER = Q, t3.ISO = $n, t3.ISODD = function(n3) {
              return !!(1 & Math.floor(Math.abs(n3)));
            }, t3.ISOWEEKNUM = at, t3.ISPMT = function(n3, t4, r3, e3) {
              return S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3)) ? a : e3 * n3 * (t4 / r3 - 1);
            }, t3.ISREF = function() {
              throw new Error("ISREF is not implemented");
            }, t3.ISTEXT = Z, t3.KURT = function() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              const t4 = e2.mean(n3), r3 = n3.length;
              let o2 = 0;
              for (let e3 = 0; e3 < r3; e3++) o2 += Math.pow(n3[e3] - t4, 4);
              return o2 /= Math.pow(e2.stdev(n3, true), 4), r3 * (r3 + 1) / ((r3 - 1) * (r3 - 2) * (r3 - 3)) * o2 - 3 * (r3 - 1) * (r3 - 1) / ((r3 - 2) * (r3 - 3));
            }, t3.LARGE = En, t3.LCM = function() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              for (var t4, r3, e3, o2, i3 = 1; void 0 !== (e3 = n3.pop()); ) {
                if (0 === e3) return 0;
                for (; e3 > 1; ) {
                  if (e3 % 2) {
                    for (t4 = 3, r3 = Math.floor(Math.sqrt(e3)); t4 <= r3 && e3 % t4; t4 += 2) ;
                    o2 = t4 <= r3 ? t4 : e3;
                  } else o2 = 2;
                  for (e3 /= o2, i3 *= o2, t4 = n3.length; t4; n3[--t4] % o2 == 0 && 1 == (n3[t4] /= o2) && n3.splice(t4, 1)) ;
                }
              }
              return i3;
            }, t3.LEFT = function(n3, t4) {
              return T(n3, t4) || (n3 = L(n3), (t4 = R(t4 = void 0 === t4 ? 1 : t4)) instanceof Error || "string" != typeof n3 ? a : n3.substring(0, t4));
            }, t3.LEN = function(n3) {
              return 0 === arguments.length ? h : n3 instanceof Error ? n3 : Array.isArray(n3) ? a : L(n3).length;
            }, t3.LINEST = Mn, t3.LN = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : 0 === n3 ? c : Math.log(n3);
            }, t3.LOG = function(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || (0 === n3 || 0 === t4 ? c : Math.log(n3) / Math.log(t4));
            }, t3.LOG10 = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : 0 === n3 ? c : Math.log(n3) / Math.log(10);
            }, t3.LOGEST = function(n3, t4) {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              if (n3.length !== t4.length) return a;
              for (let t5 = 0; t5 < n3.length; t5++) n3[t5] = Math.log(n3[t5]);
              const r3 = Mn(n3, t4);
              return r3[0] = Math.round(1e6 * Math.exp(r3[0])) / 1e6, r3[1] = Math.round(1e6 * Math.exp(r3[1])) / 1e6, r3;
            }, t3.LOGINV = lr, t3.LOGNORM = Nn, t3.LOGNORMDIST = cr, t3.LOGNORMINV = sr, t3.LOOKUP = function(n3, t4, r3) {
              t4 = M(t4), r3 = r3 ? M(r3) : t4;
              const e3 = "number" == typeof n3;
              let o2 = s;
              for (let i3 = 0; i3 < t4.length; i3++) {
                if (t4[i3] === n3) return r3[i3];
                if (e3 && t4[i3] <= n3 || "string" == typeof t4[i3] && t4[i3].localeCompare(n3) < 0) o2 = r3[i3];
                else if (e3 && t4[i3] > n3) return o2;
              }
              return o2;
            }, t3.LOWER = function(n3) {
              return 1 !== arguments.length ? a : S(n3 = L(n3)) ? n3 : n3.toLowerCase();
            }, t3.MATCH = function(n3, t4, r3) {
              if (!n3 || !t4) return s;
              if (2 === arguments.length && (r3 = 1), !((t4 = M(t4)) instanceof Array)) return s;
              if (-1 !== r3 && 0 !== r3 && 1 !== r3) return s;
              let e3, o2;
              for (let i3 = 0; i3 < t4.length; i3++) if (1 === r3) {
                if (t4[i3] === n3) return i3 + 1;
                t4[i3] < n3 && (o2 ? t4[i3] > o2 && (e3 = i3 + 1, o2 = t4[i3]) : (e3 = i3 + 1, o2 = t4[i3]));
              } else if (0 === r3) {
                if ("string" == typeof n3 && "string" == typeof t4[i3]) {
                  const r4 = n3.toLowerCase().replace(/\?/g, ".").replace(/\*/g, ".*").replace(/~/g, "\\");
                  if (new RegExp("^" + r4 + "$").test(t4[i3].toLowerCase())) return i3 + 1;
                } else if (t4[i3] === n3) return i3 + 1;
              } else if (-1 === r3) {
                if (t4[i3] === n3) return i3 + 1;
                t4[i3] > n3 && (o2 ? t4[i3] < o2 && (e3 = i3 + 1, o2 = t4[i3]) : (e3 = i3 + 1, o2 = t4[i3]));
              }
              return e3 || s;
            }, t3.MAX = wn, t3.MAXA = function() {
              const n3 = M(arguments), t4 = T.apply(void 0, n3);
              if (t4) return t4;
              let r3 = v(n3);
              return r3 = r3.map(((n4) => null == n4 ? 0 : n4)), 0 === r3.length ? 0 : Math.max.apply(Math, r3);
            }, t3.MDURATION = function() {
              throw new Error("MDURATION is not implemented");
            }, t3.MEDIAN = yn, t3.MID = function(n3, t4, r3) {
              if (null == t4) return a;
              if (S(t4 = R(t4), r3 = R(r3)) || "string" != typeof n3) return r3;
              const e3 = t4 - 1, o2 = e3 + r3;
              return n3.substring(e3, o2);
            }, t3.MIN = In, t3.MINA = function() {
              const n3 = M(arguments), t4 = T.apply(void 0, n3);
              if (t4) return t4;
              let r3 = v(n3);
              return r3 = r3.map(((n4) => null == n4 ? 0 : n4)), 0 === r3.length ? 0 : Math.min.apply(Math, r3);
            }, t3.MINUTE = function(n3) {
              return (n3 = O(n3)) instanceof Error ? n3 : n3.getMinutes();
            }, t3.MIRR = function(n3, t4, r3) {
              if (S(n3 = P(M(n3)), t4 = R(t4), r3 = R(r3))) return a;
              const e3 = n3.length, o2 = [], i3 = [];
              for (let t5 = 0; t5 < e3; t5++) n3[t5] < 0 ? o2.push(n3[t5]) : i3.push(n3[t5]);
              const u2 = -$r(r3, i3) * Math.pow(1 + r3, e3 - 1), f2 = $r(t4, o2) * (1 + t4);
              return Math.pow(u2 / f2, 1 / (e3 - 1)) - 1;
            }, t3.MMULT = function(n3, t4) {
              return !Array.isArray(n3) || !Array.isArray(t4) || n3.some(((n4) => !n4.length)) || t4.some(((n4) => !n4.length)) || N(n3).some(((n4) => "number" != typeof n4)) || N(t4).some(((n4) => "number" != typeof n4)) || n3[0].length !== t4.length ? a : Array(n3.length).fill(0).map((() => Array(t4[0].length).fill(0))).map(((r3, e3) => r3.map(((r4, o2) => n3[e3].reduce(((n4, r5, e4) => n4 + r5 * t4[e4][o2]), 0)))));
            }, t3.MOD = function(n3, t4) {
              const r3 = T(n3 = R(n3), t4 = R(t4));
              if (r3) return r3;
              if (0 === t4) return u;
              let e3 = Math.abs(n3 % t4);
              return e3 = n3 < 0 ? t4 - e3 : e3, t4 > 0 ? e3 : -e3;
            }, t3.MODE = bn, t3.MODEMULT = hr, t3.MODESNGL = gr, t3.MONTH = function(n3) {
              return (n3 = O(n3)) instanceof Error ? n3 : n3.getMonth() + 1;
            }, t3.MROUND = function(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || (n3 * t4 == 0 ? 0 : n3 * t4 < 0 ? c : Math.round(n3 / t4) * t4);
            }, t3.MULTINOMIAL = function() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              let t4 = 0, r3 = 1;
              for (let e3 = 0; e3 < n3.length; e3++) t4 += n3[e3], r3 *= Xn(n3[e3]);
              return Xn(t4) / r3;
            }, t3.MUNIT = function(n3) {
              return arguments.length > 1 ? s : !(n3 = parseInt(n3)) || n3 <= 0 ? a : Array(n3).fill(0).map((() => Array(n3).fill(0))).map(((n4, t4) => (n4[t4] = 1, n4)));
            }, t3.N = function(n3) {
              return Q(n3) ? n3 : n3 instanceof Date ? n3.getTime() : true === n3 ? 1 : false === n3 ? 0 : W(n3) ? n3 : 0;
            }, t3.NA = function() {
              return s;
            }, t3.NEGBINOM = Tn, t3.NEGBINOMDIST = pr, t3.NETWORKDAYS = ft, t3.NETWORKDAYSINTL = mr, t3.NOMINAL = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : n3 <= 0 || t4 < 1 ? c : (t4 = parseInt(t4, 10), (Math.pow(n3 + 1, 1 / t4) - 1) * t4);
            }, t3.NORM = Sn, t3.NORMDIST = dr, t3.NORMINV = vr, t3.NORMSDIST = Er, t3.NORMSINV = Mr, t3.NOT = function(n3) {
              return "string" == typeof n3 ? a : n3 instanceof Error ? n3 : !n3;
            }, t3.NOW = function() {
              return /* @__PURE__ */ new Date();
            }, t3.NPER = function(n3, t4, r3, e3, o2) {
              if (o2 = void 0 === o2 ? 0 : o2, e3 = void 0 === e3 ? 0 : e3, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3), o2 = R(o2))) return a;
              if (0 === n3) return -(r3 + e3) / t4;
              {
                const i3 = t4 * (1 + n3 * o2) - e3 * n3, u2 = r3 * n3 + t4 * (1 + n3 * o2);
                return Math.log(i3 / u2) / Math.log(1 + n3);
              }
            }, t3.NPV = $r, t3.NUMBERVALUE = function(n3, t4, r3) {
              return "number" == typeof (n3 = q(n3) ? n3 : "") ? n3 : "string" != typeof n3 ? s : (t4 = void 0 === t4 ? "." : t4, r3 = void 0 === r3 ? "," : r3, Number(n3.replace(t4, ".").replace(r3, "")));
            }, t3.OCT2BIN = function(n3, t4) {
              if (!/^[0-7]{1,10}$/.test(n3)) return c;
              const r3 = !(10 !== n3.length || "7" !== n3.substring(0, 1)), e3 = r3 ? parseInt(n3, 8) - 1073741824 : parseInt(n3, 8);
              if (e3 < -512 || e3 > 511) return c;
              if (r3) return "1" + Mt("0", 9 - (512 + e3).toString(2).length) + (512 + e3).toString(2);
              const o2 = e3.toString(2);
              return void 0 === t4 ? o2 : isNaN(t4) ? a : t4 < 0 ? c : (t4 = Math.floor(t4)) >= o2.length ? Mt("0", t4 - o2.length) + o2 : c;
            }, t3.OCT2DEC = function(n3) {
              if (!/^[0-7]{1,10}$/.test(n3)) return c;
              const t4 = parseInt(n3, 8);
              return t4 >= 536870912 ? t4 - 1073741824 : t4;
            }, t3.OCT2HEX = function(n3, t4) {
              if (!/^[0-7]{1,10}$/.test(n3)) return c;
              const r3 = parseInt(n3, 8);
              if (r3 >= 536870912) return "ff" + (r3 + 3221225472).toString(16);
              const e3 = r3.toString(16);
              return void 0 === t4 ? e3 : isNaN(t4) ? a : t4 < 0 ? c : (t4 = Math.floor(t4)) >= e3.length ? Mt("0", t4 - e3.length) + e3 : c;
            }, t3.ODD = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              let t4 = Math.ceil(Math.abs(n3));
              return t4 = 1 & t4 ? t4 : t4 + 1, n3 >= 0 ? t4 : -t4;
            }, t3.ODDFPRICE = function() {
              throw new Error("ODDFPRICE is not implemented");
            }, t3.ODDFYIELD = function() {
              throw new Error("ODDFYIELD is not implemented");
            }, t3.ODDLPRICE = function() {
              throw new Error("ODDLPRICE is not implemented");
            }, t3.ODDLYIELD = function() {
              throw new Error("ODDLYIELD is not implemented");
            }, t3.OR = function() {
              const n3 = M(arguments);
              let t4 = a;
              for (let r3 = 0; r3 < n3.length; r3++) {
                if (n3[r3] instanceof Error) return n3[r3];
                void 0 !== n3[r3] && null !== n3[r3] && "string" != typeof n3[r3] && (t4 === a && (t4 = false), n3[r3] && (t4 = true));
              }
              return t4;
            }, t3.PDURATION = function(n3, t4, r3) {
              return S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : n3 <= 0 ? c : (Math.log(r3) - Math.log(t4)) / Math.log(1 + n3);
            }, t3.PEARSON = An, t3.PERCENTILE = Cn, t3.PERCENTILEEXC = Nr, t3.PERCENTILEINC = wr, t3.PERCENTRANK = Dn, t3.PERCENTRANKEXC = yr, t3.PERCENTRANKINC = Ir, t3.PERMUT = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : Xn(n3) / Xn(n3 - t4);
            }, t3.PERMUTATIONA = function(n3, t4) {
              return S(n3 = R(n3), t4 = R(t4)) ? a : Math.pow(n3, t4);
            }, t3.PHI = function(n3) {
              return (n3 = R(n3)) instanceof Error ? a : Math.exp(-0.5 * n3 * n3) / 2.5066282746310002;
            }, t3.PI = function() {
              return Math.PI;
            }, t3.PMT = zr, t3.POISSON = On, t3.POISSONDIST = br, t3.POWER = zn, t3.PPMT = function(n3, t4, r3, e3, o2, i3) {
              return o2 = o2 || 0, i3 = i3 || 0, S(n3 = R(n3), r3 = R(r3), e3 = R(e3), o2 = R(o2), i3 = R(i3)) ? a : zr(n3, r3, e3, o2, i3) - Br(n3, t4, r3, e3, o2, i3);
            }, t3.PRICE = function() {
              throw new Error("PRICE is not implemented");
            }, t3.PRICEDISC = function(n3, t4, r3, e3, o2) {
              if (S(n3 = O(n3), t4 = O(t4), r3 = R(r3), e3 = R(e3), o2 = (o2 = R(o2)) || 0)) return a;
              if (r3 <= 0 || e3 <= 0) return c;
              if (n3 >= t4) return a;
              let i3, u2;
              switch (o2) {
                case 0:
                  i3 = 360, u2 = ut(n3, t4, false);
                  break;
                case 1:
                case 3:
                  i3 = 365, u2 = et(n3, t4, "D");
                  break;
                case 2:
                  i3 = 360, u2 = et(n3, t4, "D");
                  break;
                case 4:
                  i3 = 360, u2 = ut(n3, t4, true);
                  break;
                default:
                  return c;
              }
              return e3 - r3 * e3 * u2 / i3;
            }, t3.PRICEMAT = function() {
              throw new Error("PRICEMAT is not implemented");
            }, t3.PROB = function(n3, t4, r3, e3) {
              if (void 0 === r3) return 0;
              if (e3 = void 0 === e3 ? r3 : e3, S(n3 = P(M(n3)), t4 = P(M(t4)), r3 = R(r3), e3 = R(e3))) return a;
              if (r3 === e3) return n3.indexOf(r3) >= 0 ? t4[n3.indexOf(r3)] : 0;
              const o2 = n3.sort(((n4, t5) => n4 - t5)), i3 = o2.length;
              let u2 = 0;
              for (let a2 = 0; a2 < i3; a2++) o2[a2] >= r3 && o2[a2] <= e3 && (u2 += t4[n3.indexOf(o2[a2])]);
              return u2;
            }, t3.PRODUCT = Wn, t3.PRONETIC = function() {
              throw new Error("PRONETIC is not implemented");
            }, t3.PROPER = function(n3) {
              return S(n3) ? n3 : isNaN(n3) && "number" == typeof n3 ? a : (n3 = L(n3)).replace(/\w\S*/g, ((n4) => n4.charAt(0).toUpperCase() + n4.substr(1).toLowerCase()));
            }, t3.PV = function(n3, t4, r3, e3, o2) {
              return e3 = e3 || 0, o2 = o2 || 0, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3), o2 = R(o2)) ? a : 0 === n3 ? -r3 * t4 - e3 : ((1 - Math.pow(1 + n3, t4)) / n3 * r3 * (1 + n3 * o2) - e3) / Math.pow(1 + n3, t4);
            }, t3.QUARTILE = xn, t3.QUARTILEEXC = Tr, t3.QUARTILEINC = Sr, t3.QUOTIENT = function(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || parseInt(n3 / t4, 10);
            }, t3.RADIANS = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : n3 * Math.PI / 180;
            }, t3.RAND = function() {
              return Math.random();
            }, t3.RANDBETWEEN = function(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || n3 + Math.ceil((t4 - n3 + 1) * Math.random()) - 1;
            }, t3.RANK = Rn, t3.RANKAVG = Ar, t3.RANKEQ = Cr, t3.RATE = function(n3, t4, r3, e3, o2, i3) {
              if (i3 = void 0 === i3 ? 0.01 : i3, e3 = void 0 === e3 ? 0 : e3, o2 = void 0 === o2 ? 0 : o2, S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3), o2 = R(o2), i3 = R(i3))) return a;
              const u2 = 1e-10;
              let f2 = i3;
              o2 = o2 ? 1 : 0;
              for (let i4 = 0; i4 < 20; i4++) {
                if (f2 <= -1) return c;
                let i5, a2, l2;
                if (Math.abs(f2) < u2 ? i5 = r3 * (1 + n3 * f2) + t4 * (1 + f2 * o2) * n3 + e3 : (a2 = Math.pow(1 + f2, n3), i5 = r3 * a2 + t4 * (1 / f2 + o2) * (a2 - 1) + e3), Math.abs(i5) < u2) return f2;
                if (Math.abs(f2) < u2) l2 = r3 * n3 + t4 * o2 * n3;
                else {
                  a2 = Math.pow(1 + f2, n3);
                  const e4 = n3 * Math.pow(1 + f2, n3 - 1);
                  l2 = r3 * e4 + t4 * (1 / f2 + o2) * e4 + t4 * (-1 / (f2 * f2)) * (a2 - 1);
                }
                f2 -= i5 / l2;
              }
              return f2;
            }, t3.RECEIVED = function() {
              throw new Error("RECEIVED is not implemented");
            }, t3.REPLACE = function(n3, t4, r3, e3) {
              return S(t4 = R(t4), r3 = R(r3)) || "string" != typeof n3 || "string" != typeof e3 ? a : n3.substr(0, t4 - 1) + e3 + n3.substr(t4 - 1 + r3);
            }, t3.REPT = Mt, t3.RIGHT = function(n3, t4) {
              return T(n3, t4) || (n3 = L(n3), (t4 = R(t4 = void 0 === t4 ? 1 : t4)) instanceof Error ? t4 : n3.substring(n3.length - t4));
            }, t3.ROMAN = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              const t4 = String(n3).split(""), r3 = ["", "C", "CC", "CCC", "CD", "D", "DC", "DCC", "DCCC", "CM", "", "X", "XX", "XXX", "XL", "L", "LX", "LXX", "LXXX", "XC", "", "I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX"];
              let e3 = "", o2 = 3;
              for (; o2--; ) e3 = (r3[+t4.pop() + 10 * o2] || "") + e3;
              return new Array(+t4.join("") + 1).join("M") + e3;
            }, t3.ROUND = Kn, t3.ROUNDDOWN = function(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || (n3 > 0 ? 1 : -1) * Math.floor(Math.abs(n3) * Math.pow(10, t4)) / Math.pow(10, t4);
            }, t3.ROUNDUP = function(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || (n3 > 0 ? 1 : -1) * Math.ceil(Math.abs(n3) * Math.pow(10, t4)) / Math.pow(10, t4);
            }, t3.ROW = function(n3, t4) {
              return 2 !== arguments.length ? s : t4 < 0 ? c : n3 instanceof Array && "number" == typeof t4 ? 0 !== n3.length ? e2.row(n3, t4) : void 0 : a;
            }, t3.ROWS = function(n3) {
              return 1 !== arguments.length ? s : n3 instanceof Array ? 0 === n3.length ? 0 : e2.rows(n3) : a;
            }, t3.RRI = function(n3, t4, r3) {
              return S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : 0 === n3 || 0 === t4 ? c : Math.pow(r3 / t4, 1 / n3) - 1;
            }, t3.RSQ = function(n3, t4) {
              return S(n3 = P(M(n3)), t4 = P(M(t4))) ? a : Math.pow(An(n3, t4), 2);
            }, t3.SEARCH = function(n3, t4, r3) {
              let e3;
              return "string" != typeof n3 || "string" != typeof t4 ? a : (r3 = void 0 === r3 ? 0 : r3, e3 = t4.toLowerCase().indexOf(n3.toLowerCase(), r3 - 1) + 1, 0 === e3 ? a : e3);
            }, t3.SEC = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : 1 / Math.cos(n3);
            }, t3.SECH = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : 2 / (Math.exp(n3) + Math.exp(-n3));
            }, t3.SECOND = function(n3) {
              return (n3 = O(n3)) instanceof Error ? n3 : n3.getSeconds();
            }, t3.SERIESSUM = function(n3, t4, r3, e3) {
              if (S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = P(e3))) return a;
              let o2 = e3[0] * Math.pow(n3, t4);
              for (let i3 = 1; i3 < e3.length; i3++) o2 += e3[i3] * Math.pow(n3, t4 + i3 * r3);
              return o2;
            }, t3.SHEET = function() {
              throw new Error("SHEET is not implemented");
            }, t3.SHEETS = function() {
              throw new Error("SHEETS is not implemented");
            }, t3.SIGN = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : n3 < 0 ? -1 : 0 === n3 ? 0 : 1;
            }, t3.SIN = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.sin(n3);
            }, t3.SINH = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : (Math.exp(n3) - Math.exp(-n3)) / 2;
            }, t3.SKEW = Pn, t3.SKEWP = Dr, t3.SLN = function(n3, t4, r3) {
              return S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : 0 === r3 ? c : (n3 - t4) / r3;
            }, t3.SLOPE = function(n3, t4) {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              const r3 = e2.mean(t4), o2 = e2.mean(n3), i3 = t4.length;
              let u2 = 0, f2 = 0;
              for (let e3 = 0; e3 < i3; e3++) u2 += (t4[e3] - r3) * (n3[e3] - o2), f2 += Math.pow(t4[e3] - r3, 2);
              return u2 / f2;
            }, t3.SMALL = Ln, t3.SORT = function(n3, t4 = 1, r3 = 1, e3 = false) {
              if (!n3 || !Array.isArray(n3)) return s;
              if (0 === n3.length) return 0;
              if (!(t4 = R(t4)) || t4 < 1) return a;
              if (1 !== (r3 = R(r3)) && -1 !== r3) return a;
              if ("boolean" != typeof (e3 = D(e3))) return l;
              const o2 = (n4) => n4.sort(((n5, e4) => (n5 = L(n5[t4 - 1]), e4 = L(e4[t4 - 1]), 1 === r3 ? n5 < e4 ? -1 * r3 : r3 : n5 > e4 ? r3 : -1 * r3))), i3 = E(n3), u2 = e3 ? I(i3) : i3;
              return t4 >= 1 && t4 <= u2[0].length ? e3 ? I(o2(u2)) : o2(u2) : a;
            }, t3.SQRT = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : n3 < 0 ? c : Math.sqrt(n3);
            }, t3.SQRTPI = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.sqrt(n3 * Math.PI);
            }, t3.STANDARDIZE = function(n3, t4, r3) {
              return S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : (n3 - t4) / r3;
            }, t3.STDEV = Fn, t3.STDEVA = function() {
              const n3 = _n.apply(this, arguments);
              return Math.sqrt(n3);
            }, t3.STDEVP = Or, t3.STDEVPA = function() {
              const n3 = Vn.apply(this, arguments);
              let t4 = Math.sqrt(n3);
              return isNaN(t4) && (t4 = c), t4;
            }, t3.STDEVS = xr, t3.STEYX = function(n3, t4) {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              const r3 = e2.mean(t4), o2 = e2.mean(n3), i3 = t4.length;
              let u2 = 0, f2 = 0, l2 = 0;
              for (let e3 = 0; e3 < i3; e3++) u2 += Math.pow(n3[e3] - o2, 2), f2 += (t4[e3] - r3) * (n3[e3] - o2), l2 += Math.pow(t4[e3] - r3, 2);
              return Math.sqrt((u2 - f2 * f2 / l2) / (i3 - 2));
            }, t3.SUBSTITUTE = function(n3, t4, r3, e3) {
              if (arguments.length < 3) return s;
              if (n3 && t4) {
                if (void 0 === e3) return n3.split(t4).join(r3);
                {
                  if (e3 = Math.floor(Number(e3)), Number.isNaN(e3) || e3 <= 0) return a;
                  let o2 = 0, i3 = 0;
                  for (; o2 > -1 && n3.indexOf(t4, o2) > -1; ) if (o2 = n3.indexOf(t4, o2 + 1), i3++, o2 > -1 && i3 === e3) return n3.substring(0, o2) + r3 + n3.substring(o2 + t4.length);
                  return n3;
                }
              }
              return n3;
            }, t3.SUBTOTAL = function(n3, t4) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              switch (n3) {
                case 1:
                case 101:
                  return tn(t4);
                case 2:
                case 102:
                  return fn(t4);
                case 3:
                case 103:
                  return ln(t4);
                case 4:
                case 104:
                  return wn(t4);
                case 5:
                case 105:
                  return In(t4);
                case 6:
                case 106:
                  return Wn(t4);
                case 7:
                case 107:
                  return Fn.S(t4);
                case 8:
                case 108:
                  return Fn.P(t4);
                case 9:
                case 109:
                  return Qn(t4);
                case 10:
                case 110:
                  return Un.S(t4);
                case 11:
                case 111:
                  return Un.P(t4);
              }
            }, t3.SUM = Qn, t3.SUMIF = function(n3, t4, r3) {
              if (n3 = M(n3), r3 = r3 ? M(r3) : n3, n3 instanceof Error) return n3;
              if (null == t4 || t4 instanceof Error) return 0;
              let e3 = 0;
              const o2 = "*" === t4, i3 = o2 ? null : X(t4 + "");
              for (let t5 = 0; t5 < n3.length; t5++) {
                const u2 = n3[t5], a2 = r3[t5];
                if (o2) e3 += u2;
                else {
                  const n4 = [H(u2, G)].concat(i3);
                  e3 += B(n4) ? a2 : 0;
                }
              }
              return e3;
            }, t3.SUMIFS = function() {
              const n3 = m(arguments), t4 = P(M(n3.shift()));
              if (t4 instanceof Error) return t4;
              const r3 = n3, e3 = r3.length / 2;
              for (let n4 = 0; n4 < e3; n4++) r3[2 * n4] = M(r3[2 * n4]);
              let o2 = 0;
              for (let n4 = 0; n4 < t4.length; n4++) {
                let i3 = false;
                for (let t5 = 0; t5 < e3; t5++) {
                  const e4 = r3[2 * t5][n4], o3 = r3[2 * t5 + 1];
                  let u2 = false;
                  if (void 0 === o3 || "*" === o3) u2 = true;
                  else {
                    const n5 = X(o3 + ""), t6 = [H(e4, G)].concat(n5);
                    u2 = B(t6);
                  }
                  if (!u2) {
                    i3 = false;
                    break;
                  }
                  i3 = true;
                }
                i3 && (o2 += t4[n4]);
              }
              return o2;
            }, t3.SUMPRODUCT = function() {
              if (!arguments || 0 === arguments.length) return a;
              const n3 = arguments.length + 1;
              let t4, r3, e3, o2, i3 = 0;
              for (let u2 = 0; u2 < arguments[0].length; u2++) if (arguments[0][u2] instanceof Array) for (let e4 = 0; e4 < arguments[0][u2].length; e4++) {
                for (t4 = 1, r3 = 1; r3 < n3; r3++) {
                  const n4 = arguments[r3 - 1][u2][e4];
                  if (n4 instanceof Error) return n4;
                  if (o2 = R(n4), o2 instanceof Error) return o2;
                  t4 *= o2;
                }
                i3 += t4;
              }
              else {
                for (t4 = 1, r3 = 1; r3 < n3; r3++) {
                  const n4 = arguments[r3 - 1][u2];
                  if (n4 instanceof Error) return n4;
                  if (e3 = R(n4), e3 instanceof Error) return e3;
                  t4 *= e3;
                }
                i3 += t4;
              }
              return i3;
            }, t3.SUMSQ = function() {
              const n3 = P(M(arguments));
              if (n3 instanceof Error) return n3;
              let t4 = 0;
              const r3 = n3.length;
              for (let e3 = 0; e3 < r3; e3++) t4 += Q(n3[e3]) ? n3[e3] * n3[e3] : 0;
              return t4;
            }, t3.SUMX2MY2 = function(n3, t4) {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              let r3 = 0;
              for (let e3 = 0; e3 < n3.length; e3++) r3 += n3[e3] * n3[e3] - t4[e3] * t4[e3];
              return r3;
            }, t3.SUMX2PY2 = function(n3, t4) {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              let r3 = 0;
              n3 = P(M(n3)), t4 = P(M(t4));
              for (let e3 = 0; e3 < n3.length; e3++) r3 += n3[e3] * n3[e3] + t4[e3] * t4[e3];
              return r3;
            }, t3.SUMXMY2 = function(n3, t4) {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)))) return a;
              let r3 = 0;
              n3 = M(n3), t4 = M(t4);
              for (let e3 = 0; e3 < n3.length; e3++) r3 += Math.pow(n3[e3] - t4[e3], 2);
              return r3;
            }, t3.SWITCH = function() {
              let n3;
              if (arguments.length > 0) {
                const t4 = arguments[0], r3 = arguments.length - 1, e3 = Math.floor(r3 / 2);
                let o2 = false;
                const i3 = r3 % 2 != 0, u2 = r3 % 2 == 0 ? null : arguments[arguments.length - 1];
                if (e3) {
                  for (let r4 = 0; r4 < e3; r4++) if (t4 === arguments[2 * r4 + 1]) {
                    n3 = arguments[2 * r4 + 2], o2 = true;
                    break;
                  }
                }
                o2 || (n3 = i3 ? u2 : s);
              } else n3 = a;
              return n3;
            }, t3.SYD = function(n3, t4, r3, e3) {
              return S(n3 = R(n3), t4 = R(t4), r3 = R(r3), e3 = R(e3)) ? a : 0 === r3 || e3 < 1 || e3 > r3 ? c : (n3 - t4) * (r3 - (e3 = parseInt(e3, 10)) + 1) * 2 / (r3 * (r3 + 1));
            }, t3.T = function(n3) {
              return n3 instanceof Error || "string" == typeof n3 ? n3 : "";
            }, t3.TAN = function(n3) {
              return (n3 = R(n3)) instanceof Error ? n3 : Math.tan(n3);
            }, t3.TANH = function(n3) {
              if ((n3 = R(n3)) instanceof Error) return n3;
              const t4 = Math.exp(2 * n3);
              return (t4 - 1) / (t4 + 1);
            }, t3.TBILLEQ = function(n3, t4, r3) {
              return S(n3 = O(n3), t4 = O(t4), r3 = R(r3)) ? a : r3 <= 0 || n3 > t4 || t4 - n3 > 31536e6 ? c : 365 * r3 / (360 - r3 * ut(n3, t4, false));
            }, t3.TBILLPRICE = function(n3, t4, r3) {
              return S(n3 = O(n3), t4 = O(t4), r3 = R(r3)) ? a : r3 <= 0 || n3 > t4 || t4 - n3 > 31536e6 ? c : 100 * (1 - r3 * ut(n3, t4, false) / 360);
            }, t3.TBILLYIELD = function(n3, t4, r3) {
              return S(n3 = O(n3), t4 = O(t4), r3 = R(r3)) ? a : r3 <= 0 || n3 > t4 || t4 - n3 > 31536e6 ? c : 360 * (100 - r3) / (r3 * ut(n3, t4, false));
            }, t3.TDIST = Rr, t3.TDISTRT = Pr, t3.TEXT = function(n3, t4) {
              if (void 0 === n3 || n3 instanceof Error || t4 instanceof Error) return s;
              if (null == t4) return "";
              if ("number" == typeof t4) return String(t4);
              if ("string" != typeof t4) return a;
              const r3 = t4.startsWith("$") ? "$" : "", e3 = t4.endsWith("%");
              return e3 && (n3 *= 100), n3 = (n3 = Et(n3, (t4 = t4.replace(/%/g, "").replace(/\$/g, "")).split(".")[1].match(/0/g).length, !t4.includes(","))).startsWith("-") ? "-" + r3 + (n3 = n3.replace("-", "")) : r3 + n3, e3 && (n3 += "%"), n3;
            }, t3.TEXTJOIN = function(n3, t4, ...r3) {
              if ("boolean" != typeof t4 && (t4 = D(t4)), arguments.length < 3) return s;
              n3 = null != n3 ? n3 : "";
              let e3 = M(r3), o2 = t4 ? e3.filter(((n4) => n4)) : e3;
              if (Array.isArray(n3)) {
                n3 = M(n3);
                let t5 = o2.map(((n4) => [n4])), r4 = 0;
                for (let e4 = 0; e4 < t5.length - 1; e4++) t5[e4].push(n3[r4]), r4++, r4 === n3.length && (r4 = 0);
                return o2 = M(t5), o2.join("");
              }
              return o2.join(n3);
            }, t3.TIME = function(n3, t4, r3) {
              return S(n3 = R(n3), t4 = R(t4), r3 = R(r3)) ? a : n3 < 0 || t4 < 0 || r3 < 0 ? c : (3600 * n3 + 60 * t4 + r3) / 86400;
            }, t3.TIMEVALUE = function(n3) {
              return (n3 = O(n3)) instanceof Error ? n3 : (3600 * n3.getHours() + 60 * n3.getMinutes() + n3.getSeconds()) / 86400;
            }, t3.TINV = Lr, t3.TODAY = function() {
              return ot(/* @__PURE__ */ new Date());
            }, t3.TRANSPOSE = function(n3) {
              return n3 ? I(E(n3)) : s;
            }, t3.TREND = function(n3, t4, r3) {
              if (S(n3 = P(M(n3)), t4 = P(M(t4)), r3 = P(M(r3)))) return a;
              const e3 = Mn(n3, t4), o2 = e3[0], i3 = e3[1], u2 = [];
              return r3.forEach(((n4) => {
                u2.push(o2 * n4 + i3);
              })), u2;
            }, t3.TRIM = function(n3) {
              return (n3 = L(n3)) instanceof Error ? n3 : n3.replace(/\s+/g, " ").trim();
            }, t3.TRIMMEAN = function(n3, t4) {
              if (S(n3 = P(M(n3)), t4 = R(t4))) return a;
              const r3 = Bn(n3.length * t4, 2) / 2;
              return e2.mean((i3 = (i3 = r3) || 1, (o2 = y2(n3.sort(((n4, t5) => n4 - t5)), r3)) && "function" == typeof o2.slice ? o2.slice(0, o2.length - i3) : o2));
              var o2, i3;
            }, t3.TRUE = function() {
              return true;
            }, t3.TRUNC = function(n3, t4) {
              return T(n3 = R(n3), t4 = R(t4)) || (n3 > 0 ? 1 : -1) * Math.floor(Math.abs(n3) * Math.pow(10, t4)) / Math.pow(10, t4);
            }, t3.TTEST = Fr, t3.TYPE = function(n3) {
              return Q(n3) ? 1 : Z(n3) ? 2 : K(n3) ? 4 : W(n3) ? 16 : Array.isArray(n3) ? 64 : void 0;
            }, t3.UNICHAR = Nt, t3.UNICODE = wt, t3.UNIQUE = J, t3.UPPER = function(n3) {
              return (n3 = L(n3)) instanceof Error ? n3 : n3.toUpperCase();
            }, t3.VALUE = function(n3) {
              const t4 = T(n3);
              if (t4) return t4;
              if ("number" == typeof n3) return n3;
              if (q(n3) || (n3 = ""), "string" != typeof n3) return a;
              const r3 = /(%)$/.test(n3) || /^(%)/.test(n3);
              if ("" === (n3 = (n3 = (n3 = n3.replace(/^[^0-9-]{0,3}/, "")).replace(/[^0-9]{0,3}$/, "")).replace(/[ ,]/g, ""))) return 0;
              let e3 = Number(n3);
              return isNaN(e3) ? a : (e3 = e3 || 0, r3 && (e3 *= 0.01), e3);
            }, t3.VAR = Un, t3.VARA = _n, t3.VARP = qr, t3.VARPA = Vn, t3.VARS = Ur, t3.VDB = function() {
              throw new Error("VDB is not implemented");
            }, t3.VLOOKUP = nn, t3.WEEKDAY = function(n3, t4) {
              if ((n3 = O(n3)) instanceof Error) return n3;
              void 0 === t4 && (t4 = 1);
              const r3 = n3.getDay();
              return tt[t4][r3];
            }, t3.WEEKNUM = function(n3, t4) {
              if ((n3 = O(n3)) instanceof Error) return n3;
              if (void 0 === t4 && (t4 = 1), 21 === t4) return at(n3);
              const r3 = nt[t4];
              let e3 = new Date(n3.getFullYear(), 0, 1);
              const o2 = e3.getDay() < r3 ? 1 : 0;
              return e3 -= 24 * Math.abs(e3.getDay() - r3) * 60 * 60 * 1e3, Math.floor((n3 - e3) / 864e5 / 7 + 1) + o2;
            }, t3.WEIBULL = kn, t3.WEIBULLDIST = _r, t3.WORKDAY = lt, t3.WORKDAYINTL = Vr, t3.XIRR = function(n3, t4, r3) {
              if (S(n3 = P(M(n3)), t4 = x2(M(t4)), r3 = R(r3))) return a;
              const e3 = (n4, t5, r4) => {
                const e4 = r4 + 1;
                let o3 = n4[0];
                for (let r5 = 1; r5 < n4.length; r5++) o3 += n4[r5] / Math.pow(e4, it(t5[r5], t5[0]) / 365);
                return o3;
              }, o2 = (n4, t5, r4) => {
                const e4 = r4 + 1;
                let o3 = 0;
                for (let r5 = 1; r5 < n4.length; r5++) {
                  const i4 = it(t5[r5], t5[0]) / 365;
                  o3 -= i4 * n4[r5] / Math.pow(e4, i4 + 1);
                }
                return o3;
              };
              let i3 = false, u2 = false;
              for (let t5 = 0; t5 < n3.length; t5++) n3[t5] > 0 && (i3 = true), n3[t5] < 0 && (u2 = true);
              if (!i3 || !u2) return c;
              let f2, l2, s2, h2 = r3 = r3 || 0.1, g2 = true;
              do {
                s2 = e3(n3, t4, h2), f2 = h2 - s2 / o2(n3, t4, h2), l2 = Math.abs(f2 - h2), h2 = f2, g2 = l2 > 1e-10 && Math.abs(s2) > 1e-10;
              } while (g2);
              return h2;
            }, t3.XNPV = function(n3, t4, r3) {
              if (S(n3 = R(n3), t4 = P(M(t4)), r3 = x2(M(r3)))) return a;
              let e3 = 0;
              for (let o2 = 0; o2 < t4.length; o2++) e3 += t4[o2] / Math.pow(1 + n3, it(r3[o2], r3[0]) / 365);
              return e3;
            }, t3.XOR = function() {
              const n3 = M(arguments);
              let t4 = a;
              for (let r3 = 0; r3 < n3.length; r3++) {
                if (n3[r3] instanceof Error) return n3[r3];
                void 0 !== n3[r3] && null !== n3[r3] && "string" != typeof n3[r3] && (t4 === a && (t4 = 0), n3[r3] && t4++);
              }
              return t4 === a ? t4 : !!(1 & Math.floor(Math.abs(t4)));
            }, t3.YEAR = function(n3) {
              return (n3 = O(n3)) instanceof Error ? n3 : n3.getFullYear();
            }, t3.YEARFRAC = ht, t3.YIELD = function() {
              throw new Error("YIELD is not implemented");
            }, t3.YIELDDISC = function() {
              throw new Error("YIELDDISC is not implemented");
            }, t3.YIELDMAT = function() {
              throw new Error("YIELDMAT is not implemented");
            }, t3.Z = jn, t3.ZTEST = kr, t3.utils = Wr;
          } }, t2 = {};
          function r(e2) {
            var o = t2[e2];
            if (void 0 !== o) return o.exports;
            var i2 = t2[e2] = { exports: {} };
            return n[e2].call(i2.exports, i2, i2.exports, r), i2.exports;
          }
          r.g = (function() {
            if ("object" == typeof globalThis) return globalThis;
            try {
              return this || new Function("return this")();
            } catch (n2) {
              if ("object" == typeof window) return window;
            }
          })();
          var e = r(960);
          Formula = e;
        })();
        return Formula;
      }));
    }
  });

  // node_modules/jspreadsheet-ce/dist/index.js
  var require_dist2 = __commonJS({
    "node_modules/jspreadsheet-ce/dist/index.js"(exports, module) {
      if (!jSuites && typeof __require === "function") {
        jSuites = require_jsuites();
      }
      var jSuites;
      if (!formula && typeof __require === "function") {
        formula = require_dist();
      }
      var formula;
      (function(global, factory2) {
        typeof exports === "object" && typeof module !== "undefined" ? module.exports = factory2() : typeof define === "function" && define.amd ? define(factory2) : global.jspreadsheet = factory2();
      })(exports, (function() {
        var jspreadsheet;
        (function() {
          "use strict";
          var __webpack_modules__ = { 805: function(e, t2) {
            const s = function(e2) {
              const t3 = this, s2 = [];
              for (let n2 = 0; n2 < e2.length; n2++) {
                const o2 = e2[n2].x, r = e2[n2].y, l = t3.options.columns[o2].name ? t3.options.columns[o2].name : o2;
                s2[r] || (s2[r] = { row: r, data: {} }), s2[r].data[l] = e2[n2].value;
              }
              return s2.filter((function(e3) {
                return null != e3;
              }));
            }, n = function(e2, t3) {
              const s2 = this, n2 = o.call(s2.parent, "onbeforesave", s2.parent, s2, t3);
              if (n2) t3 = n2;
              else if (false === n2) return false;
              jSuites.ajax({ url: e2, method: "POST", dataType: "json", data: { data: JSON.stringify(t3) }, success: function(e3) {
                o.call(s2, "onsave", s2.parent, s2, t3);
              } });
            }, o = function(e2) {
              const t3 = this;
              let o2 = null, r = t3.parent ? t3.parent : t3;
              if (!r.ignoreEvents && ("function" == typeof r.config.onevent && (o2 = r.config.onevent.apply(this, arguments)), "function" == typeof r.config[e2] && (o2 = r.config[e2].apply(this, Array.prototype.slice.call(arguments, 1))), "object" == typeof r.plugins)) {
                const e3 = Object.keys(r.plugins);
                for (let t4 = 0; t4 < e3.length; t4++) {
                  const s2 = e3[t4], n2 = r.plugins[s2];
                  "function" == typeof n2.onevent && (o2 = n2.onevent.apply(this, arguments));
                }
              }
              if ("onafterchanges" == e2) {
                const e3 = arguments;
                if ("object" == typeof r.plugins && Object.entries(r.plugins).forEach((function([, s2]) {
                  "function" == typeof s2.persistence && s2.persistence(t3, "setValue", { data: e3[2] });
                })), t3.options.persistence) {
                  const e4 = 1 == t3.options.persistence ? t3.options.url : t3.options.persistence, o3 = s.call(t3, arguments[2]);
                  n.call(t3, e4, o3);
                }
              }
              return o2;
            };
            t2.A = o;
          }, 829: function(e, t2, s) {
            s.d(t2, { F8: function() {
              return l;
            }, N$: function() {
              return r;
            }, dr: function() {
              return i2;
            } });
            var n = s(530), o = s(657);
            const r = function(e2) {
              const t3 = this;
              if (t3.options.filters) {
                e2 = parseInt(e2), t3.resetSelection();
                let s2 = [];
                if ("checkbox" == t3.options.columns[e2].type) s2.push({ id: "true", name: "True" }), s2.push({ id: "false", name: "False" });
                else {
                  const n3 = [];
                  let o2 = false;
                  for (let s3 = 0; s3 < t3.options.data.length; s3++) {
                    const r4 = t3.options.data[s3][e2], l2 = t3.records[s3][e2].element.innerHTML;
                    r4 && l2 ? n3[r4] = l2 : o2 = true;
                  }
                  const r3 = Object.keys(n3);
                  s2 = [];
                  for (let e3 = 0; e3 < r3.length; e3++) s2.push({ id: r3[e3], name: n3[r3[e3]] });
                  o2 && s2.push({ value: "", id: "", name: "(Blanks)" });
                }
                const n2 = document.createElement("div");
                t3.filter.children[e2 + 1].innerHTML = "", t3.filter.children[e2 + 1].appendChild(n2), t3.filter.children[e2 + 1].style.paddingLeft = "0px", t3.filter.children[e2 + 1].style.paddingRight = "0px", t3.filter.children[e2 + 1].style.overflow = "initial";
                const r2 = { data: s2, multiple: true, autocomplete: true, opened: true, value: void 0 !== t3.filters[e2] ? t3.filters[e2] : null, width: "100%", position: 1 == t3.options.tableOverflow || 1 == t3.parent.config.fullscreen, onclose: function(s3) {
                  i2.call(t3), t3.filters[e2] = s3.dropdown.getValue(true), t3.filter.children[e2 + 1].innerHTML = s3.dropdown.getText(), t3.filter.children[e2 + 1].style.paddingLeft = "", t3.filter.children[e2 + 1].style.paddingRight = "", t3.filter.children[e2 + 1].style.overflow = "", l.call(t3, e2), o.G9.call(t3);
                } };
                jSuites.dropdown(n2, r2);
              } else console.log("Jspreadsheet: filters not enabled.");
            }, l = function(e2) {
              const t3 = this;
              if (!e2) for (let s3 = 0; s3 < t3.filter.children.length; s3++) t3.filters[s3] && (e2 = s3);
              const s2 = function(e3, s3, n2) {
                for (let o3 = 0; o3 < e3.length; o3++) {
                  const r2 = "" + t3.options.data[n2][s3], l2 = "" + t3.records[n2][s3].element.innerHTML;
                  if (e3[o3] == r2 || e3[o3] == l2) return true;
                }
                return false;
              }, o2 = t3.filters[e2];
              t3.results = [];
              for (let n2 = 0; n2 < t3.options.data.length; n2++) s2(o2, e2, n2) && t3.results.push(n2);
              t3.results.length || (t3.results = null), n.hG.call(t3);
            }, i2 = function() {
              const e2 = this;
              if (e2.options.filters) for (let t3 = 0; t3 < e2.filter.children.length; t3++) e2.filter.children[t3].innerHTML = "&nbsp;", e2.filters[t3] = null;
              e2.results = null, n.hG.call(e2);
            };
          }, 160: function(e, t2, s) {
            s.d(t2, { e: function() {
              return o;
            } });
            var n = s(530);
            const o = function(e2) {
              const t3 = this;
              if (e2 && (t3.options.footers = e2), t3.options.footers) {
                t3.tfoot || (t3.tfoot = document.createElement("tfoot"), t3.table.appendChild(t3.tfoot));
                for (let e3 = 0; e3 < t3.options.footers.length; e3++) {
                  let s2;
                  if (t3.tfoot.children[e3]) s2 = t3.tfoot.children[e3];
                  else {
                    s2 = document.createElement("tr");
                    const e4 = document.createElement("td");
                    s2.appendChild(e4), t3.tfoot.appendChild(s2);
                  }
                  for (let o2 = 0; o2 < t3.headers.length; o2++) {
                    let r;
                    if (t3.options.footers[e3][o2] || (t3.options.footers[e3][o2] = ""), t3.tfoot.children[e3].children[o2 + 1]) r = t3.tfoot.children[e3].children[o2 + 1];
                    else {
                      r = document.createElement("td"), s2.appendChild(r);
                      const e4 = t3.options.columns[o2].align || t3.options.defaultColAlign || "center";
                      r.style.textAlign = e4;
                    }
                    r.textContent = n.$x.call(t3, +t3.records.length + o2, e3, t3.options.footers[e3][o2]), r.style.display = t3.cols[o2].colElement.style.display;
                  }
                }
              }
            };
          }, 296: function(e, t2, s) {
            s.d(t2, { w: function() {
              return n;
            } });
            const n = function() {
              const e2 = this;
              let t3 = 0;
              if (e2.options.freezeColumns > 0) for (let s2 = 0; s2 < e2.options.freezeColumns; s2++) {
                let n2;
                n2 = e2.options.columns && e2.options.columns[s2] && void 0 !== e2.options.columns[s2].width ? parseInt(e2.options.columns[s2].width) : void 0 !== e2.options.defaultColWidth ? parseInt(e2.options.defaultColWidth) : 100, t3 += n2;
              }
              return t3;
            };
          }, 978: function(e, t2, s) {
            s.r(t2), s.d(t2, { createFromTable: function() {
              return u;
            }, getCaretIndex: function() {
              return o;
            }, getCellNameFromCoords: function() {
              return i2;
            }, getColumnName: function() {
              return l;
            }, getCoordsFromCellName: function() {
              return a;
            }, getCoordsFromRange: function() {
              return c;
            }, invert: function() {
              return r;
            }, parseCSV: function() {
              return d;
            } });
            var n = s(689);
            const o = function(e2) {
              let t3;
              t3 = this.config.root ? this.config.root : window;
              let s2 = 0;
              const n2 = t3.getSelection();
              if (n2 && 0 !== n2.rangeCount) {
                const t4 = n2.getRangeAt(0), o2 = t4.cloneRange();
                o2.selectNodeContents(e2), o2.setEnd(t4.endContainer, t4.endOffset), s2 = o2.toString().length;
              }
              return s2;
            }, r = function(e2) {
              const t3 = [], s2 = Object.keys(e2);
              for (let n2 = 0; n2 < s2.length; n2++) t3[e2[s2[n2]]] = s2[n2];
              return t3;
            }, l = function(e2) {
              let t3, s2 = e2 + 1, n2 = "";
              for (; s2 > 0; ) t3 = (s2 - 1) % 26, n2 = String.fromCharCode(65 + t3).toString() + n2, s2 = parseInt((s2 - t3) / 26);
              return n2;
            }, i2 = function(e2, t3) {
              return l(parseInt(e2)) + (parseInt(t3) + 1);
            }, a = function(e2) {
              const t3 = /^[a-zA-Z]+/.exec(e2);
              if (t3) {
                let s2 = 0;
                for (let e3 = 0; e3 < t3[0].length; e3++) s2 += parseInt(t3[0].charCodeAt(e3) - 64) * Math.pow(26, t3[0].length - 1 - e3);
                s2--, s2 < 0 && (s2 = 0);
                let n2 = parseInt(/[0-9]+$/.exec(e2)) || null;
                return n2 > 0 && n2--, [s2, n2];
              }
            }, c = function(e2) {
              const [t3, s2] = e2.split(":");
              return [...a(t3), ...a(s2)];
            }, d = function(e2, t3) {
              t3 = t3 || ",", e2 = e2.replace(/\r?\n$|\r$|\n$/g, "");
              const s2 = [];
              let n2 = false, o2 = 0, r2 = 0, l2 = 0;
              for (let i3 = 0; i3 < e2.length; i3++) {
                const a2 = e2[i3], c2 = e2[i3 + 1];
                s2[r2] = s2[r2] || [], s2[r2][l2] = s2[r2][l2] || "", '"' == a2 && n2 && '"' == c2 ? (s2[r2][l2] += a2, ++i3) : '"' != a2 ? a2 != t3 || n2 ? "\r" != a2 || "\n" != c2 || n2 ? "\n" == a2 && !n2 || "\r" == a2 && !n2 ? (++r2, o2 = Math.max(o2, l2), l2 = 0) : s2[r2][l2] += a2 : (++r2, o2 = Math.max(o2, l2), l2 = 0, ++i3) : ++l2 : n2 = !n2;
              }
              return s2.forEach(((e3, t4) => {
                for (let t5 = e3.length; t5 <= o2; t5++) e3.push("");
              })), s2;
            }, u = function(e2, t3) {
              if ("TABLE" == e2.tagName) {
                t3 || (t3 = {}), t3.columns = [], t3.data = [];
                const s2 = e2.querySelectorAll("colgroup > col");
                if (s2.length) for (let e3 = 0; e3 < s2.length; e3++) {
                  let n2 = s2[e3].style.width;
                  n2 || (n2 = s2[e3].getAttribute("width")), n2 && (t3.columns[e3] || (t3.columns[e3] = {}), t3.columns[e3].width = n2);
                }
                const o2 = function(e3, s3) {
                  let n2 = e3.getBoundingClientRect();
                  const o3 = n2.width > 50 ? n2.width : 50;
                  t3.columns[s3] || (t3.columns[s3] = {}), e3.getAttribute("data-celltype") ? t3.columns[s3].type = e3.getAttribute("data-celltype") : t3.columns[s3].type = "text", t3.columns[s3].width = o3 + "px", t3.columns[s3].title = e3.innerHTML, e3.style.textAlign && (t3.columns[s3].align = e3.style.textAlign), (n2 = e3.getAttribute("name")) && (t3.columns[s3].name = n2), (n2 = e3.getAttribute("id")) && (t3.columns[s3].id = n2), (n2 = e3.getAttribute("data-mask")) && (t3.columns[s3].mask = n2);
                }, r2 = [];
                let l2 = e2.querySelectorAll(":scope > thead > tr");
                if (l2.length) {
                  for (let e3 = 0; e3 < l2.length - 1; e3++) {
                    const t4 = [];
                    for (let s3 = 0; s3 < l2[e3].children.length; s3++) {
                      const n2 = { title: l2[e3].children[s3].textContent, colspan: l2[e3].children[s3].getAttribute("colspan") || 1 };
                      t4.push(n2);
                    }
                    r2.push(t4);
                  }
                  l2 = l2[l2.length - 1].children;
                  for (let e3 = 0; e3 < l2.length; e3++) o2(l2[e3], e3);
                }
                let i3 = 0;
                const a2 = {}, c2 = {}, d2 = {}, u2 = {};
                let p = e2.querySelectorAll(":scope > tr, :scope > tbody > tr");
                for (let e3 = 0; e3 < p.length; e3++) if (t3.data[i3] = [], 1 != t3.parseTableFirstRowAsHeader || l2.length || 0 != e3) {
                  for (let s3 = 0; s3 < p[e3].children.length; s3++) {
                    let o3 = p[e3].children[s3].getAttribute("data-formula");
                    o3 ? "=" != o3.substr(0, 1) && (o3 = "=" + o3) : o3 = p[e3].children[s3].innerHTML, t3.data[i3].push(o3);
                    const r3 = (0, n.t3)([s3, e3]), l3 = p[e3].children[s3].getAttribute("class");
                    l3 && (u2[r3] = l3);
                    const c3 = parseInt(p[e3].children[s3].getAttribute("colspan")) || 0, h = parseInt(p[e3].children[s3].getAttribute("rowspan")) || 0;
                    (c3 || h) && (a2[r3] = [c3 || 1, h || 1]), p[e3].children[s3].style && "none" == p[e3].children[s3].style.display && (p[e3].children[s3].style.display = "");
                    const m = p[e3].children[s3].getAttribute("style");
                    m && (d2[r3] = m), p[e3].children[s3].classList.contains("styleBold") && (d2[r3] ? d2[r3] += "; font-weight:bold;" : d2[r3] = "font-weight:bold;");
                  }
                  p[e3].style && p[e3].style.height && (c2[e3] = { height: p[e3].style.height }), i3++;
                } else for (let t4 = 0; t4 < p[e3].children.length; t4++) o2(p[e3].children[t4], t4);
                if (Object.keys(r2).length > 0 && (t3.nestedHeaders = r2), Object.keys(d2).length > 0 && (t3.style = d2), Object.keys(a2).length > 0 && (t3.mergeCells = a2), Object.keys(c2).length > 0 && (t3.rows = c2), Object.keys(u2).length > 0 && (t3.classes = u2), p = e2.querySelectorAll("tfoot tr"), p.length) {
                  const e3 = [];
                  for (let t4 = 0; t4 < p.length; t4++) {
                    let s3 = [];
                    for (let e4 = 0; e4 < p[t4].children.length; e4++) s3.push(p[t4].children[e4].textContent);
                    e3.push(s3);
                  }
                  Object.keys(e3).length > 0 && (t3.footers = e3);
                }
                if (1 == t3.parseTableAutoCellType) {
                  const e3 = [];
                  for (let s3 = 0; s3 < t3.columns.length; s3++) {
                    let n2 = true, o3 = true;
                    e3[s3] = [];
                    for (let r4 = 0; r4 < t3.data.length; r4++) {
                      const l3 = t3.data[r4][s3];
                      e3[s3][l3] || (e3[s3][l3] = 0), e3[s3][l3]++, l3.length > 25 && (n2 = false), 10 == l3.length && "-" == l3.substr(4, 1) && "-" == l3.substr(7, 1) || (o3 = false);
                    }
                    const r3 = Object.keys(e3[s3]).length;
                    o3 ? t3.columns[s3].type = "calendar" : 1 == n2 && r3 > 1 && r3 <= parseInt(0.1 * t3.data.length) && (t3.columns[s3].type = "dropdown", t3.columns[s3].source = Object.keys(e3[s3]));
                  }
                }
                return t3;
              }
              console.log("Element is not a table");
            };
          }, 911: function(e, t2, s) {
            s.d(t2, { Dh: function() {
              return c;
            }, ZS: function() {
              return h;
            }, tN: function() {
              return p;
            } });
            var n = s(805), o = s(689), r = s(530), l = s(910), i2 = s(94), a = s(657);
            const c = function(e2) {
              const t3 = this;
              if (1 != t3.ignoreHistory) {
                const s2 = ++t3.historyIndex;
                t3.history = t3.history = t3.history.slice(0, s2 + 1), t3.history[s2] = e2;
              }
            }, d = function(e2, t3) {
              const s2 = this, n2 = t3.insertBefore ? +t3.rowNumber : t3.rowNumber + 1;
              if (1 == s2.options.search && s2.results && s2.results.length != s2.rows.length && s2.resetSearch(), 1 == e2) {
                const e3 = t3.numOfRows;
                for (let t4 = n2; t4 < e3 + n2; t4++) s2.rows[t4].element.parentNode.removeChild(s2.rows[t4].element);
                s2.records.splice(n2, e3), s2.options.data.splice(n2, e3), s2.rows.splice(n2, e3), a.at.call(s2, 1, n2, e3 + n2 - 1);
              } else {
                const e3 = t3.rowRecords.map(((e4) => [...e4]));
                s2.records = (0, o.Hh)(s2.records, n2, e3);
                const r2 = t3.rowData.map(((e4) => [...e4]));
                s2.options.data = (0, o.Hh)(s2.options.data, n2, r2), s2.rows = (0, o.Hh)(s2.rows, n2, t3.rowNode);
                let l2 = 0;
                for (let e4 = n2; e4 < t3.numOfRows + n2; e4++) s2.tbody.insertBefore(t3.rowNode[l2].element, s2.tbody.children[e4]), l2++;
              }
              for (let e3 = n2; e3 < s2.rows.length; e3++) s2.rows[e3].y = e3;
              for (let e3 = n2; e3 < s2.records.length; e3++) for (let t4 = 0; t4 < s2.records[e3].length; t4++) s2.records[e3][t4].y = e3;
              s2.options.pagination > 0 && s2.page(s2.pageNumber), r.o8.call(s2);
            }, u = function(e2, t3) {
              const s2 = this, n2 = t3.insertBefore ? t3.columnNumber : t3.columnNumber + 1;
              if (1 == e2) {
                const e3 = t3.numOfColumns;
                s2.options.columns.splice(n2, e3);
                for (let t4 = n2; t4 < e3 + n2; t4++) s2.headers[t4].parentNode.removeChild(s2.headers[t4]), s2.cols[t4].colElement.parentNode.removeChild(s2.cols[t4].colElement);
                s2.headers.splice(n2, e3), s2.cols.splice(n2, e3);
                for (let o2 = 0; o2 < t3.data.length; o2++) {
                  for (let t4 = n2; t4 < e3 + n2; t4++) s2.records[o2][t4].element.parentNode.removeChild(s2.records[o2][t4].element);
                  s2.records[o2].splice(n2, e3), s2.options.data[o2].splice(n2, e3);
                }
                if (s2.options.footers) for (let t4 = 0; t4 < s2.options.footers.length; t4++) s2.options.footers[t4].splice(n2, e3);
              } else {
                s2.options.columns = (0, o.Hh)(s2.options.columns, n2, t3.columns), s2.headers = (0, o.Hh)(s2.headers, n2, t3.headers), s2.cols = (0, o.Hh)(s2.cols, n2, t3.cols);
                let e3 = 0;
                for (let o2 = n2; o2 < t3.numOfColumns + n2; o2++) s2.headerContainer.insertBefore(t3.headers[e3], s2.headerContainer.children[o2 + 1]), s2.colgroupContainer.insertBefore(t3.cols[e3].colElement, s2.colgroupContainer.children[o2 + 1]), e3++;
                for (let e4 = 0; e4 < t3.data.length; e4++) {
                  s2.options.data[e4] = (0, o.Hh)(s2.options.data[e4], n2, t3.data[e4]), s2.records[e4] = (0, o.Hh)(s2.records[e4], n2, t3.records[e4]);
                  let r2 = 0;
                  for (let o2 = n2; o2 < t3.numOfColumns + n2; o2++) s2.rows[e4].element.insertBefore(t3.records[e4][r2].element, s2.rows[e4].element.children[o2 + 1]), r2++;
                }
                if (s2.options.footers) for (let e4 = 0; e4 < s2.options.footers.length; e4++) s2.options.footers[e4] = (0, o.Hh)(s2.options.footers[e4], n2, t3.footers[e4]);
              }
              for (let e3 = n2; e3 < s2.cols.length; e3++) s2.cols[e3].x = e3;
              for (let e3 = 0; e3 < s2.records.length; e3++) for (let t4 = n2; t4 < s2.records[e3].length; t4++) s2.records[e3][t4].x = t4;
              if (s2.options.nestedHeaders && s2.options.nestedHeaders.length > 0 && s2.options.nestedHeaders[0] && s2.options.nestedHeaders[0][0]) for (let n3 = 0; n3 < s2.options.nestedHeaders.length; n3++) {
                let o2;
                o2 = 1 == e2 ? parseInt(s2.options.nestedHeaders[n3][s2.options.nestedHeaders[n3].length - 1].colspan) - t3.numOfColumns : parseInt(s2.options.nestedHeaders[n3][s2.options.nestedHeaders[n3].length - 1].colspan) + t3.numOfColumns, s2.options.nestedHeaders[n3][s2.options.nestedHeaders[n3].length - 1].colspan = o2, s2.thead.children[n3].children[s2.thead.children[n3].children.length - 1].setAttribute("colspan", o2);
              }
              r.o8.call(s2);
            }, p = function() {
              const e2 = this, t3 = !!e2.parent.ignoreEvents, s2 = !!e2.ignoreHistory;
              e2.parent.ignoreEvents = true, e2.ignoreHistory = true;
              const o2 = [];
              let r2;
              if (e2.historyIndex >= 0) {
                if (r2 = e2.history[e2.historyIndex--], "insertRow" == r2.action) d.call(e2, 1, r2);
                else if ("deleteRow" == r2.action) d.call(e2, 0, r2);
                else if ("insertColumn" == r2.action) u.call(e2, 1, r2);
                else if ("deleteColumn" == r2.action) u.call(e2, 0, r2);
                else if ("moveRow" == r2.action) e2.moveRow(r2.newValue, r2.oldValue);
                else if ("moveColumn" == r2.action) e2.moveColumn(r2.newValue, r2.oldValue);
                else if ("setMerge" == r2.action) e2.removeMerge(r2.column, r2.data);
                else if ("setStyle" == r2.action) e2.setStyle(r2.oldValue, null, null, 1);
                else if ("setWidth" == r2.action) e2.setWidth(r2.column, r2.oldValue);
                else if ("setHeight" == r2.action) e2.setHeight(r2.row, r2.oldValue);
                else if ("setHeader" == r2.action) e2.setHeader(r2.column, r2.oldValue);
                else if ("setComments" == r2.action) e2.setComments(r2.oldValue);
                else if ("orderBy" == r2.action) {
                  let t4 = [];
                  for (let e3 = 0; e3 < r2.rows.length; e3++) t4[r2.rows[e3]] = e3;
                  i2.Th.call(e2, r2.column, r2.order ? 0 : 1), i2.iY.call(e2, t4);
                } else if ("setValue" == r2.action) {
                  for (let t4 = 0; t4 < r2.records.length; t4++) o2.push({ x: r2.records[t4].x, y: r2.records[t4].y, value: r2.records[t4].oldValue }), r2.oldStyle && e2.resetStyle(r2.oldStyle);
                  e2.setValue(o2), r2.selection && e2.updateSelectionFromCoords(r2.selection[0], r2.selection[1], r2.selection[2], r2.selection[3]);
                }
              }
              e2.parent.ignoreEvents = t3, e2.ignoreHistory = s2, n.A.call(e2, "onundo", e2, r2);
            }, h = function() {
              const e2 = this, t3 = !!e2.parent.ignoreEvents, s2 = !!e2.ignoreHistory;
              let o2;
              if (e2.parent.ignoreEvents = true, e2.ignoreHistory = true, e2.historyIndex < e2.history.length - 1) {
                if (o2 = e2.history[++e2.historyIndex], "insertRow" == o2.action) d.call(e2, 0, o2);
                else if ("deleteRow" == o2.action) d.call(e2, 1, o2);
                else if ("insertColumn" == o2.action) u.call(e2, 0, o2);
                else if ("deleteColumn" == o2.action) u.call(e2, 1, o2);
                else if ("moveRow" == o2.action) e2.moveRow(o2.oldValue, o2.newValue);
                else if ("moveColumn" == o2.action) e2.moveColumn(o2.oldValue, o2.newValue);
                else if ("setMerge" == o2.action) l.FU.call(e2, o2.column, o2.colspan, o2.rowspan, 1);
                else if ("setStyle" == o2.action) e2.setStyle(o2.newValue, null, null, 1);
                else if ("setWidth" == o2.action) e2.setWidth(o2.column, o2.newValue);
                else if ("setHeight" == o2.action) e2.setHeight(o2.row, o2.newValue);
                else if ("setHeader" == o2.action) e2.setHeader(o2.column, o2.newValue);
                else if ("setComments" == o2.action) e2.setComments(o2.newValue);
                else if ("orderBy" == o2.action) i2.Th.call(e2, o2.column, o2.order), i2.iY.call(e2, o2.rows);
                else if ("setValue" == o2.action) {
                  e2.setValue(o2.records);
                  for (let t4 = 0; t4 < o2.records.length; t4++) o2.oldStyle && e2.resetStyle(o2.newStyle);
                  o2.selection && e2.updateSelectionFromCoords(o2.selection[0], o2.selection[1], o2.selection[2], o2.selection[3]);
                }
              }
              e2.parent.ignoreEvents = t3, e2.ignoreHistory = s2, n.A.call(e2, "onredo", e2, o2);
            };
          }, 530: function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            __webpack_require__.d(__webpack_exports__, { $O: function() {
              return getWorksheetActive;
            }, $x: function() {
              return parseValue;
            }, C6: function() {
              return showIndex;
            }, Em: function() {
              return executeFormula;
            }, P9: function() {
              return createCell;
            }, Rs: function() {
              return updateScroll;
            }, TI: function() {
              return hideIndex;
            }, Xr: function() {
              return getCellFromCoords;
            }, Y5: function() {
              return fullscreen;
            }, am: function() {
              return updateTable;
            }, dw: function() {
              return isFormula;
            }, eN: function() {
              return getWorksheetInstance;
            }, hG: function() {
              return updateResult;
            }, ju: function() {
              return createNestedHeader;
            }, k9: function() {
              return updateCell;
            }, o8: function() {
              return updateTableReferences;
            }, p9: function() {
              return getLabel;
            }, rS: function() {
              return getMask;
            }, tT: function() {
              return getCell;
            }, xF: function() {
              return updateFormulaChain;
            }, yB: function() {
              return updateFormula;
            } });
            var _dispatch_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(805), _selection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(657), _helpers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(978), _meta_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(654), _freeze_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(296), _pagination_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(167), _footer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(160), _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(689);
            const updateTable = function() {
              const e = this;
              if (e.options.minSpareRows > 0) {
                let t2 = 0;
                for (let s = e.rows.length - 1; s >= 0; s--) {
                  let n = false;
                  for (let t3 = 0; t3 < e.headers.length; t3++) e.options.data[s][t3] && (n = true);
                  if (n) break;
                  t2++;
                }
                e.options.minSpareRows - t2 > 0 && e.insertRow(e.options.minSpareRows - t2);
              }
              if (e.options.minSpareCols > 0) {
                let t2 = 0;
                for (let s = e.headers.length - 1; s >= 0; s--) {
                  let n = false;
                  for (let t3 = 0; t3 < e.rows.length; t3++) e.options.data[t3][s] && (n = true);
                  if (n) break;
                  t2++;
                }
                e.options.minSpareCols - t2 > 0 && e.insertColumn(e.options.minSpareCols - t2);
              }
              e.options.footers && _footer_js__WEBPACK_IMPORTED_MODULE_0__.e.call(e), setTimeout((function() {
                _selection_js__WEBPACK_IMPORTED_MODULE_1__.Aq.call(e);
              }), 0);
            }, parseNumber = function(e, t2) {
              const s = t2 && this.options.columns[t2].decimal ? this.options.columns[t2].decimal : ".";
              let n = "" + e;
              return n = n.split(s), n[0] = n[0].match(/[+-]?[0-9]/g), n[0] && (n[0] = n[0].join("")), n[1] && (n[1] = n[1].match(/[0-9]*/g).join("")), n[0] && Number.isInteger(Number(n[0])) ? n[1] ? Number(n[0] + "." + n[1]) : Number(n[0] + ".00") : null;
            }, executeFormula = function(expression, x, y) {
              const obj = this, formulaResults = [], formulaLoopProtection = [], execute = function(expression, x, y) {
                const parentId = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.t3)([x, y]);
                if (formulaLoopProtection[parentId]) return console.error("Reference loop detected"), "#ERROR";
                formulaLoopProtection[parentId] = true;
                const tokensUpdate = function(e) {
                  for (let t2 = 0; t2 < e.length; t2++) {
                    const s = [], n = e[t2].split(":"), o = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.vu)(n[0], true), r = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.vu)(n[1], true);
                    let l, i2, a, c;
                    o[0] <= r[0] ? (l = o[0], i2 = r[0]) : (l = r[0], i2 = o[0]), o[1] <= r[1] ? (a = o[1], c = r[1]) : (a = r[1], c = o[1]);
                    for (let e2 = a; e2 <= c; e2++) for (let t3 = l; t3 <= i2; t3++) s.push((0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.t3)([t3, e2]));
                    expression = expression.replace(e[t2], s.join(","));
                  }
                };
                expression = expression.replace(/\$?([A-Z]+)\$?([0-9]+)/g, "$1$2");
                let tokens = expression.match(/([A-Z]+[0-9]+)\:([A-Z]+[0-9]+)/g);
                if (tokens && tokens.length && tokensUpdate(tokens), tokens = expression.match(/([A-Z]+[0-9]+)/g), tokens && tokens.indexOf(parentId) > -1) return console.error("Self Reference detected"), "#ERROR";
                {
                  const formulaExpressions = {};
                  if (tokens) {
                    for (let i = 0; i < tokens.length; i++) if (obj.formula[tokens[i]] || (obj.formula[tokens[i]] = []), obj.formula[tokens[i]].indexOf(parentId) < 0 && obj.formula[tokens[i]].push(parentId), eval("typeof(" + tokens[i] + ') == "undefined"')) {
                      const e = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.vu)(tokens[i], 1);
                      let t2;
                      if (t2 = void 0 !== obj.options.data[e[1]] && void 0 !== obj.options.data[e[1]][e[0]] ? obj.options.data[e[1]][e[0]] : "", "=" == ("" + t2).substr(0, 1) && (void 0 !== formulaResults[tokens[i]] ? t2 = formulaResults[tokens[i]] : (t2 = execute(t2, e[0], e[1]), formulaResults[tokens[i]] = t2)), "" == ("" + t2).trim()) formulaExpressions[tokens[i]] = null;
                      else if (t2 == Number(t2) && 0 != obj.parent.config.autoCasting) formulaExpressions[tokens[i]] = Number(t2);
                      else {
                        const s = parseNumber.call(obj, t2, e[0]);
                        0 != obj.parent.config.autoCasting && s ? formulaExpressions[tokens[i]] = s : formulaExpressions[tokens[i]] = '"' + t2 + '"';
                      }
                    }
                  }
                  const ret = _dispatch_js__WEBPACK_IMPORTED_MODULE_3__.A.call(obj, "onbeforeformula", obj, expression, x, y);
                  if (false === ret) return expression;
                  let res;
                  ret && (expression = ret);
                  try {
                    res = formula(expression.substr(1), formulaExpressions, x, y, obj), "function" == typeof res && (res = "#ERROR");
                  } catch (e) {
                    res = "#ERROR", true === obj.parent.config.debugFormulas && console.log(expression.substr(1), formulaExpressions, e);
                  }
                  return res;
                }
              };
              return execute(expression, x, y);
            }, parseValue = function(e, t2, s, n) {
              const o = this;
              "=" == ("" + s).substr(0, 1) && 0 != o.parent.config.parseFormulas && (s = executeFormula.call(o, s, e, t2));
              const r = o.options.columns && o.options.columns[e];
              if (r && !isFormula(s)) {
                let e2 = null;
                if (e2 = getMask(r)) {
                  s && s == Number(s) && (s = Number(s));
                  let t3 = jSuites.mask.render(s, e2, true);
                  if (n && e2.mask) {
                    const o2 = e2.mask.split(";");
                    o2[1] && (o2[1].match(new RegExp("\\[Red\\]", "gi")) && (s < 0 ? n.classList.add("red") : n.classList.remove("red")), o2[1].match(new RegExp("\\(", "gi")) && s < 0 && (t3 = "(" + t3 + ")"));
                  }
                  t3 && (s = t3);
                }
              }
              return s;
            }, getDropDownValue = function(e, t2) {
              const s = this, n = [];
              if (s.options.columns && s.options.columns[e] && s.options.columns[e].source) {
                const o = [], r = s.options.columns[e].source;
                for (let e2 = 0; e2 < r.length; e2++) "object" == typeof r[e2] ? o[r[e2].id] = r[e2].name : o[r[e2]] = r[e2];
                const l = Array.isArray(t2) ? t2 : ("" + t2).split(";");
                for (let e2 = 0; e2 < l.length; e2++) "object" == typeof l[e2] ? n.push(o[l[e2].id]) : o[l[e2]] && n.push(o[l[e2]]);
              } else console.error("Invalid column");
              return n.length > 0 ? n.join("; ") : "";
            }, validDate = function(e) {
              return "-" == (e = "" + e).substr(4, 1) && "-" == e.substr(7, 1) || 4 == (e = e.split("-"))[0].length && e[0] == Number(e[0]) && 2 == e[1].length && e[1] == Number(e[1]);
            }, stripScript = function(e) {
              const t2 = new Option();
              t2.innerHTML = e;
              let s = null;
              for (e = t2.getElementsByTagName("script"); s = e[0]; ) s.parentNode.removeChild(s);
              return t2.innerHTML;
            }, createCell = function(e, t2, s) {
              const n = this;
              let o = document.createElement("td");
              if (o.setAttribute("data-x", e), o.setAttribute("data-y", t2), "none" === n.headers[e].style.display && (o.style.display = "none"), "=" == ("" + s).substr(0, 1) && 1 == n.options.secureFormulas) {
                const e2 = secureFormula(s);
                e2 != s && (s = e2);
              }
              if (n.options.columns && n.options.columns[e] && "object" == typeof n.options.columns[e].type) true === n.parent.config.parseHTML ? o.innerHTML = s : o.textContent = s, "function" == typeof n.options.columns[e].type.createCell && n.options.columns[e].type.createCell(o, s, parseInt(e), parseInt(t2), n, n.options.columns[e]);
              else if (n.options.columns && n.options.columns[e] && "hidden" == n.options.columns[e].type) o.style.display = "none", o.textContent = s;
              else if (n.options.columns && n.options.columns[e] && ("checkbox" == n.options.columns[e].type || "radio" == n.options.columns[e].type)) {
                const r2 = document.createElement("input");
                r2.type = n.options.columns[e].type, r2.name = "c" + e, r2.checked = 1 == s || 1 == s || "true" == s, r2.onclick = function() {
                  n.setValue(o, this.checked);
                }, 1 != n.options.columns[e].readOnly && 0 != n.options.editable || r2.setAttribute("disabled", "disabled"), o.appendChild(r2), n.options.data[t2][e] = r2.checked;
              } else if (n.options.columns && n.options.columns[e] && "calendar" == n.options.columns[e].type) {
                let t3 = null;
                if (!validDate(s)) {
                  const o2 = jSuites.calendar.extractDateFromString(s, n.options.columns[e].options && n.options.columns[e].options.format || "YYYY-MM-DD");
                  o2 && (t3 = o2);
                }
                o.textContent = jSuites.calendar.getDateString(t3 || s, n.options.columns[e].options && n.options.columns[e].options.format);
              } else if (n.options.columns && n.options.columns[e] && "dropdown" == n.options.columns[e].type) o.classList.add("jss_dropdown"), o.textContent = getDropDownValue.call(n, e, s);
              else if (n.options.columns && n.options.columns[e] && "color" == n.options.columns[e].type) if ("square" == n.options.columns[e].render) {
                const e2 = document.createElement("div");
                e2.className = "color", e2.style.backgroundColor = s, o.appendChild(e2);
              } else o.style.color = s, o.textContent = s;
              else if (n.options.columns && n.options.columns[e] && "image" == n.options.columns[e].type) {
                if (s && "data:image" == s.substr(0, 10)) {
                  const e2 = document.createElement("img");
                  e2.src = s, o.appendChild(e2);
                }
              } else n.options.columns && n.options.columns[e] && "html" == n.options.columns[e].type || true === n.parent.config.parseHTML ? o.innerHTML = stripScript(parseValue.call(this, e, t2, s, o)) : o.textContent = parseValue.call(this, e, t2, s, o);
              n.options.columns && n.options.columns[e] && 1 == n.options.columns[e].readOnly && (o.className = "readonly");
              const r = n.options.columns && n.options.columns[e] && n.options.columns[e].align || n.options.defaultColAlign || "center";
              return o.style.textAlign = r, n.options.columns && n.options.columns[e] && 0 == n.options.columns[e].wordWrap || !(1 == n.options.wordWrap || n.options.columns && n.options.columns[e] && 1 == n.options.columns[e].wordWrap || o.innerHTML.length > 200) || (o.style.whiteSpace = "pre-wrap"), e > 0 && 1 == this.options.textOverflow && (s || o.innerHTML ? n.records[t2][e - 1].element.style.overflow = "hidden" : e == n.options.columns.length - 1 && (o.style.overflow = "hidden")), _dispatch_js__WEBPACK_IMPORTED_MODULE_3__.A.call(n, "oncreatecell", n, o, e, t2, s), o;
            }, updateCell = function(e, t2, s, n) {
              const o = this;
              let r;
              if (1 != o.records[t2][e].element.classList.contains("readonly") || n) {
                if ("=" == ("" + s).substr(0, 1) && 1 == o.options.secureFormulas) {
                  const e2 = secureFormula(s);
                  e2 != s && (s = e2);
                }
                const n2 = _dispatch_js__WEBPACK_IMPORTED_MODULE_3__.A.call(o, "onbeforechange", o, o.records[t2][e].element, e, t2, s);
                if (null != n2 && (s = n2), o.options.columns && o.options.columns[e] && "object" == typeof o.options.columns[e].type && "function" == typeof o.options.columns[e].type.updateCell) {
                  const n3 = o.options.columns[e].type.updateCell(o.records[t2][e].element, s, parseInt(e), parseInt(t2), o, o.options.columns[e]);
                  void 0 !== n3 && (s = n3);
                }
                r = { x: e, y: t2, col: e, row: t2, value: s, oldValue: o.options.data[t2][e] };
                let l = o.options.columns && o.options.columns[e] && "object" == typeof o.options.columns[e].type ? o.options.columns[e].type : null;
                if (l) o.options.data[t2][e] = s, "function" == typeof l.setValue && l.setValue(o.records[t2][e].element, s);
                else if (o.options.columns && o.options.columns[e] && ("checkbox" == o.options.columns[e].type || "radio" == o.options.columns[e].type)) {
                  if ("radio" == o.options.columns[e].type) for (let t3 = 0; t3 < o.options.data.length; t3++) o.options.data[t3][e] = false;
                  o.records[t2][e].element.children[0].checked = 1 == s || 1 == s || "true" == s || "TRUE" == s, o.options.data[t2][e] = o.records[t2][e].element.children[0].checked;
                } else if (o.options.columns && o.options.columns[e] && "dropdown" == o.options.columns[e].type) o.options.data[t2][e] = s, o.records[t2][e].element.textContent = getDropDownValue.call(o, e, s);
                else if (o.options.columns && o.options.columns[e] && "calendar" == o.options.columns[e].type) {
                  let n3 = null;
                  if (!validDate(s)) {
                    const t3 = jSuites.calendar.extractDateFromString(s, o.options.columns[e].options && o.options.columns[e].options.format || "YYYY-MM-DD");
                    t3 && (n3 = t3);
                  }
                  o.options.data[t2][e] = s, o.records[t2][e].element.textContent = jSuites.calendar.getDateString(n3 || s, o.options.columns[e].options && o.options.columns[e].options.format);
                } else if (o.options.columns && o.options.columns[e] && "color" == o.options.columns[e].type) if (o.options.data[t2][e] = s, "square" == o.options.columns[e].render) {
                  const n3 = document.createElement("div");
                  n3.className = "color", n3.style.backgroundColor = s, o.records[t2][e].element.textContent = "", o.records[t2][e].element.appendChild(n3);
                } else o.records[t2][e].element.style.color = s, o.records[t2][e].element.textContent = s;
                else if (o.options.columns && o.options.columns[e] && "image" == o.options.columns[e].type) {
                  if (s = "" + s, o.options.data[t2][e] = s, o.records[t2][e].element.innerHTML = "", s && "data:image" == s.substr(0, 10)) {
                    const n3 = document.createElement("img");
                    n3.src = s, o.records[t2][e].element.appendChild(n3);
                  }
                } else o.options.data[t2][e] = s, o.options.columns && o.options.columns[e] && "html" == o.options.columns[e].type ? o.records[t2][e].element.innerHTML = stripScript(parseValue.call(o, e, t2, s)) : true === o.parent.config.parseHTML ? o.records[t2][e].element.innerHTML = stripScript(parseValue.call(o, e, t2, s, o.records[t2][e].element)) : o.records[t2][e].element.textContent = parseValue.call(o, e, t2, s, o.records[t2][e].element), o.options.columns && o.options.columns[e] && 0 == o.options.columns[e].wordWrap || !(1 == o.options.wordWrap || o.options.columns && o.options.columns[e] && 1 == o.options.columns[e].wordWrap || o.records[t2][e].element.innerHTML.length > 200) ? o.records[t2][e].element.style.whiteSpace = "" : o.records[t2][e].element.style.whiteSpace = "pre-wrap";
                e > 0 && (o.records[t2][e - 1].element.style.overflow = s ? "hidden" : ""), o.options.columns && o.options.columns[e] && "function" == typeof o.options.columns[e].render && o.options.columns[e].render(o.records[t2] && o.records[t2][e] ? o.records[t2][e].element : null, s, parseInt(e), parseInt(t2), o, o.options.columns[e]), _dispatch_js__WEBPACK_IMPORTED_MODULE_3__.A.call(o, "onchange", o, o.records[t2] && o.records[t2][e] ? o.records[t2][e].element : null, e, t2, s, r.oldValue);
              } else r = { x: e, y: t2, col: e, row: t2 };
              return r;
            }, isFormula = function(e) {
              const t2 = ("" + e)[0];
              return "=" == t2 || "#" == t2;
            }, getMask = function(e) {
              if (e.format || e.mask || e.locale) {
                const t2 = {};
                return e.mask ? t2.mask = e.mask : e.format ? t2.mask = e.format : (t2.locale = e.locale, t2.options = e.options), e.decimal && (t2.options || (t2.options = {}), t2.options = { decimal: e.decimal }), t2;
              }
              return null;
            }, secureFormula = function(e) {
              let t2 = "", s = 0;
              for (let n = 0; n < e.length; n++) '"' == e[n] && (s = 0 == s ? 1 : 0), t2 += 1 == s ? e[n] : e[n].toUpperCase();
              return t2;
            };
            let chainLoopProtection = [];
            const updateFormulaChain = function(e, t2, s) {
              const n = this, o = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.t3)([e, t2]);
              if (n.formula[o] && n.formula[o].length > 0) if (chainLoopProtection[o]) n.records[t2][e].element.innerHTML = "#ERROR", n.formula[o] = "";
              else {
                chainLoopProtection[o] = true;
                for (let e2 = 0; e2 < n.formula[o].length; e2++) {
                  const t3 = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.vu)(n.formula[o][e2], true), r = "" + n.options.data[t3[1]][t3[0]];
                  "=" == r.substr(0, 1) ? s.push(updateCell.call(n, t3[0], t3[1], r, true)) : Object.keys(n.formula)[e2] = null, updateFormulaChain.call(n, t3[0], t3[1], s);
                }
              }
              chainLoopProtection = [];
            }, updateFormula = function(e, t2) {
              const s = /[A-Z]/, n = /[0-9]/;
              let o = "", r = null, l = null, i2 = "";
              for (let a = 0; a < e.length; a++) s.exec(e[a]) ? (r = 1, l = 0, i2 += e[a]) : n.exec(e[a]) ? (l = r ? 1 : 0, i2 += e[a]) : (r && l && (i2 = t2[i2] ? t2[i2] : i2), o += i2, o += e[a], r = 0, l = 0, i2 = "");
              return i2 && (r && l && (i2 = t2[i2] ? t2[i2] : i2), o += i2), o;
            }, updateFormulas = function(e) {
              const t2 = this;
              for (let s2 = 0; s2 < t2.options.data.length; s2++) for (let n2 = 0; n2 < t2.options.data[0].length; n2++) {
                const o = "" + t2.options.data[s2][n2];
                if ("=" == o.substr(0, 1)) {
                  const r = updateFormula(o, e);
                  r != o && (t2.options.data[s2][n2] = r);
                }
              }
              const s = [], n = Object.keys(t2.formula);
              for (let o = 0; o < n.length; o++) {
                let r = n[o];
                const l = t2.formula[r];
                e[r] && (r = e[r]), s[r] = [];
                for (let t3 = 0; t3 < l.length; t3++) {
                  let n2 = l[t3];
                  e[n2] && (n2 = e[n2]), s[r].push(n2);
                }
              }
              t2.formula = s;
            }, updateTableReferences = function() {
              const e = this;
              if (e.skipUpdateTableReferences) return;
              for (let t3 = 0; t3 < e.headers.length; t3++) e.headers[t3].getAttribute("data-x") != t3 && (e.headers[t3].setAttribute("data-x", t3), e.headers[t3].getAttribute("title") || (e.headers[t3].innerHTML = (0, _helpers_js__WEBPACK_IMPORTED_MODULE_4__.getColumnName)(t3)));
              for (let t3 = 0; t3 < e.rows.length; t3++) e.rows[t3] && e.rows[t3].element.getAttribute("data-y") != t3 && (e.rows[t3].element.setAttribute("data-y", t3), e.rows[t3].element.children[0].setAttribute("data-y", t3), e.rows[t3].element.children[0].innerHTML = t3 + 1);
              const t2 = [], s = [], n = function(s2, n2, o2, r) {
                if (s2 != o2 && e.records[r][o2].element.setAttribute("data-x", o2), n2 != r && e.records[r][o2].element.setAttribute("data-y", r), s2 != o2 || n2 != r) {
                  const e2 = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.t3)([s2, n2]), l = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.t3)([o2, r]);
                  t2[e2] = l;
                }
              };
              for (let t3 = 0; t3 < e.records.length; t3++) for (let o2 = 0; o2 < e.records[0].length; o2++) if (e.records[t3][o2]) {
                const r = e.records[t3][o2].element.getAttribute("data-x"), l = e.records[t3][o2].element.getAttribute("data-y");
                if (e.records[t3][o2].element.getAttribute("data-merged")) {
                  const e2 = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.t3)([r, l]), n2 = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.t3)([o2, t3]);
                  if (null == s[e2]) if (e2 == n2) s[e2] = false;
                  else {
                    const i2 = parseInt(o2 - r), a = parseInt(t3 - l);
                    s[e2] = [n2, i2, a];
                  }
                } else n(r, l, o2, t3);
              }
              const o = Object.keys(s);
              if (o.length) {
                for (let t3 = 0; t3 < o.length; t3++) if (s[o[t3]]) {
                  const r = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.vu)(o[t3], true);
                  let l = r[0], i2 = r[1];
                  n(l, i2, l + s[o[t3]][1], i2 + s[o[t3]][2]);
                  const a = o[t3], c = s[o[t3]][0];
                  for (let n2 = 0; n2 < e.options.mergeCells[a][2].length; n2++) l = parseInt(e.options.mergeCells[a][2][n2].getAttribute("data-x")), i2 = parseInt(e.options.mergeCells[a][2][n2].getAttribute("data-y")), e.options.mergeCells[a][2][n2].setAttribute("data-x", l + s[o[t3]][1]), e.options.mergeCells[a][2][n2].setAttribute("data-y", i2 + s[o[t3]][2]);
                  e.options.mergeCells[c] = e.options.mergeCells[a], delete e.options.mergeCells[a];
                }
              }
              updateFormulas.call(e, t2), _meta_js__WEBPACK_IMPORTED_MODULE_5__.hs.call(e, t2), _selection_js__WEBPACK_IMPORTED_MODULE_1__.G9.call(e), updateTable.call(e);
            }, updateScroll = function(e) {
              const t2 = this, s = t2.content.getBoundingClientRect(), n = s.left, o = s.top, r = s.width, l = s.height, i2 = t2.records[t2.selectedCell[3]][t2.selectedCell[2]].element.getBoundingClientRect(), a = i2.left, c = i2.top, d = i2.width, u = i2.height;
              let p, h;
              0 == e || 1 == e ? (p = a - n + t2.content.scrollLeft, h = c - o + t2.content.scrollTop - 2) : (p = a - n + t2.content.scrollLeft + d, h = c - o + t2.content.scrollTop + u), h > t2.content.scrollTop + 30 && h < t2.content.scrollTop + l || (h < t2.content.scrollTop + 30 ? t2.content.scrollTop = h - u : t2.content.scrollTop = h - (l - 2));
              const m = _freeze_js__WEBPACK_IMPORTED_MODULE_6__.w.call(t2);
              p > t2.content.scrollLeft + m && p < t2.content.scrollLeft + r || (p < t2.content.scrollLeft + 30 ? (t2.content.scrollLeft = p, t2.content.scrollLeft < 50 && (t2.content.scrollLeft = 0)) : p < t2.content.scrollLeft + m ? t2.content.scrollLeft = p - m - 1 : t2.content.scrollLeft = p - (r - 20));
            }, updateResult = function() {
              const e = this;
              let t2 = 0, s = 0;
              for (t2 = 1 == e.options.lazyLoading ? 100 : e.options.pagination > 0 ? e.options.pagination : e.results ? e.results.length : e.rows.length; e.tbody.firstChild; ) e.tbody.removeChild(e.tbody.firstChild);
              for (let n = 0; n < e.rows.length; n++) !e.results || e.results.indexOf(n) > -1 ? (s < t2 && (e.tbody.appendChild(e.rows[n].element), s++), e.rows[n].element.style.display = "") : e.rows[n].element.style.display = "none";
              return e.options.pagination > 0 && _pagination_js__WEBPACK_IMPORTED_MODULE_7__.IV.call(e), _selection_js__WEBPACK_IMPORTED_MODULE_1__.Aq.call(e), t2;
            }, getCell = function(e, t2) {
              if ("string" == typeof e) {
                const s = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.vu)(e, true);
                e = s[0], t2 = s[1];
              }
              return this.records[t2][e].element;
            }, getCellFromCoords = function(e, t2) {
              return this.records[t2][e].element;
            }, getLabel = function(e, t2) {
              if ("string" == typeof e) {
                const s = (0, _internalHelpers_js__WEBPACK_IMPORTED_MODULE_2__.vu)(e, true);
                e = s[0], t2 = s[1];
              }
              return this.records[t2][e].element.innerHTML;
            }, fullscreen = function(e) {
              const t2 = this;
              null == e && (e = !t2.config.fullscreen), t2.config.fullscreen != e && (t2.config.fullscreen = e, 1 == e ? t2.element.classList.add("fullscreen") : t2.element.classList.remove("fullscreen"));
            }, showIndex = function() {
              this.table.classList.remove("jss_hidden_index");
            }, hideIndex = function() {
              this.table.classList.add("jss_hidden_index");
            }, createNestedHeader = function(e) {
              const t2 = this, s = document.createElement("tr");
              s.classList.add("jss_nested");
              const n = document.createElement("td");
              n.classList.add("jss_selectall"), s.appendChild(n), e.element = s;
              let o = 0;
              for (let n2 = 0; n2 < e.length; n2++) {
                e[n2].colspan || (e[n2].colspan = 1), e[n2].title || (e[n2].title = ""), e[n2].id || (e[n2].id = "");
                let r = e[n2].colspan;
                const l = [];
                for (let e2 = 0; e2 < r; e2++) t2.options.columns[o] && "hidden" == t2.options.columns[o].type && r++, l.push(o), o++;
                const i2 = document.createElement("td");
                i2.setAttribute("data-column", l.join(",")), i2.setAttribute("colspan", e[n2].colspan), i2.setAttribute("align", e[n2].align || "center"), i2.setAttribute("id", e[n2].id), i2.textContent = e[n2].title, s.appendChild(i2);
              }
              return s;
            }, getWorksheetActive = function() {
              const e = this.parent ? this.parent : this;
              return e.element.tabs ? e.element.tabs.getActive() : 0;
            }, getWorksheetInstance = function(e) {
              const t2 = void 0 !== e ? e : getWorksheetActive.call(this);
              return this.worksheets[t2];
            };
          }, 689: function(e, t2, s) {
            s.d(t2, { Hh: function() {
              return o;
            }, t3: function() {
              return l;
            }, vu: function() {
              return r;
            } });
            var n = s(978);
            const o = function(e2, t3, s2) {
              if (t3 <= e2.length) return e2.slice(0, t3).concat(s2).concat(e2.slice(t3));
              const n2 = e2.slice(0, e2.length);
              for (; t3 > n2.length; ) n2.push(void 0);
              return n2.concat(s2);
            }, r = function(e2, t3) {
              const s2 = /^[a-zA-Z]+/.exec(e2);
              if (s2) {
                let n2 = 0;
                for (let e3 = 0; e3 < s2[0].length; e3++) n2 += parseInt(s2[0].charCodeAt(e3) - 64) * Math.pow(26, s2[0].length - 1 - e3);
                n2--, n2 < 0 && (n2 = 0);
                let o2 = parseInt(/[0-9]+$/.exec(e2));
                o2 > 0 && o2--, e2 = 1 == t3 ? [n2, o2] : n2 + "-" + o2;
              }
              return e2;
            }, l = function(e2) {
              return Array.isArray(e2) || (e2 = e2.split("-")), (0, n.getColumnName)(parseInt(e2[0])) + (parseInt(e2[1]) + 1);
            };
          }, 497: function(e, t2, s) {
            s.d(t2, { AG: function() {
              return o;
            }, G_: function() {
              return r;
            }, p6: function() {
              return l;
            }, wu: function() {
              return n;
            } });
            const n = function(e2) {
              const t3 = this;
              let s2;
              s2 = 1 != t3.options.search && 1 != t3.options.filters || !t3.results ? t3.rows : t3.results;
              const n2 = 100;
              null != e2 && -1 != e2 || (e2 = Math.ceil(s2.length / n2) - 1);
              let o2 = e2 * n2, r2 = e2 * n2 + n2;
              r2 > s2.length && (r2 = s2.length), o2 = r2 - 100, o2 < 0 && (o2 = 0);
              for (let e3 = o2; e3 < r2; e3++) 1 != t3.options.search && 1 != t3.options.filters || !t3.results ? t3.tbody.appendChild(t3.rows[e3].element) : t3.tbody.appendChild(t3.rows[s2[e3]].element), t3.tbody.children.length > n2 && t3.tbody.removeChild(t3.tbody.firstChild);
            }, o = function() {
              const e2 = this;
              if (e2.selectedCell) {
                const t3 = parseInt(e2.tbody.firstChild.getAttribute("data-y")) / 100, s2 = parseInt(e2.selectedCell[3] / 100), n2 = parseInt(e2.rows.length / 100);
                if (t3 != s2 && s2 <= n2 && !Array.prototype.indexOf.call(e2.tbody.children, e2.rows[e2.selectedCell[3]].element)) return e2.loadPage(s2), true;
              }
              return false;
            }, r = function() {
              const e2 = this;
              let t3;
              t3 = 1 != e2.options.search && 1 != e2.options.filters || !e2.results ? e2.rows : e2.results;
              let s2 = 0;
              if (t3.length > 100) {
                let n2 = parseInt(e2.tbody.firstChild.getAttribute("data-y"));
                if (1 != e2.options.search && 1 != e2.options.filters || !e2.results || (n2 = t3.indexOf(n2)), n2 > 0) for (let o2 = 0; o2 < 30; o2++) n2 -= 1, n2 > -1 && (1 != e2.options.search && 1 != e2.options.filters || !e2.results ? e2.tbody.insertBefore(e2.rows[n2].element, e2.tbody.firstChild) : e2.tbody.insertBefore(e2.rows[t3[n2]].element, e2.tbody.firstChild), e2.tbody.children.length > 100 && (e2.tbody.removeChild(e2.tbody.lastChild), s2 = 1));
              }
              return s2;
            }, l = function() {
              const e2 = this;
              let t3;
              t3 = 1 != e2.options.search && 1 != e2.options.filters || !e2.results ? e2.rows : e2.results;
              let s2 = 0;
              if (t3.length > 100) {
                let n2 = parseInt(e2.tbody.lastChild.getAttribute("data-y"));
                if (1 != e2.options.search && 1 != e2.options.filters || !e2.results || (n2 = t3.indexOf(n2)), n2 < e2.rows.length - 1) for (let o2 = 0; o2 <= 30; o2++) n2 < t3.length && (1 != e2.options.search && 1 != e2.options.filters || !e2.results ? e2.tbody.appendChild(e2.rows[n2].element) : e2.tbody.appendChild(e2.rows[t3[n2]].element), e2.tbody.children.length > 100 && (e2.tbody.removeChild(e2.tbody.firstChild), s2 = 1)), n2 += 1;
              }
              return s2;
            };
          }, 910: function(e, t2, s) {
            s.d(t2, { D0: function() {
              return c;
            }, FU: function() {
              return u;
            }, Lt: function() {
              return a;
            }, VP: function() {
              return h;
            }, Zp: function() {
              return p;
            }, fd: function() {
              return d;
            } });
            var n = s(689), o = s(530), r = s(911), l = s(805), i2 = s(657);
            const a = function(e2, t3) {
              const s2 = this, o2 = [];
              if (s2.options.mergeCells) {
                const r2 = Object.keys(s2.options.mergeCells);
                for (let l2 = 0; l2 < r2.length; l2++) {
                  const i3 = (0, n.vu)(r2[l2], true), a2 = s2.options.mergeCells[r2[l2]][0], c2 = i3[0], d2 = i3[0] + (a2 > 1 ? a2 - 1 : 0);
                  null == t3 ? c2 <= e2 && d2 >= e2 && o2.push(r2[l2]) : t3 ? c2 < e2 && d2 >= e2 && o2.push(r2[l2]) : c2 <= e2 && d2 > e2 && o2.push(r2[l2]);
                }
              }
              return o2;
            }, c = function(e2, t3) {
              const s2 = this, o2 = [];
              if (s2.options.mergeCells) {
                const r2 = Object.keys(s2.options.mergeCells);
                for (let l2 = 0; l2 < r2.length; l2++) {
                  const i3 = (0, n.vu)(r2[l2], true), a2 = s2.options.mergeCells[r2[l2]][1], c2 = i3[1], d2 = i3[1] + (a2 > 1 ? a2 - 1 : 0);
                  null == t3 ? c2 <= e2 && d2 >= e2 && o2.push(r2[l2]) : t3 ? c2 < e2 && d2 >= e2 && o2.push(r2[l2]) : c2 <= e2 && d2 > e2 && o2.push(r2[l2]);
                }
              }
              return o2;
            }, d = function(e2) {
              const t3 = this;
              let s2 = {};
              if (e2) s2 = t3.options.mergeCells && t3.options.mergeCells[e2] ? [t3.options.mergeCells[e2][0], t3.options.mergeCells[e2][1]] : null;
              else if (t3.options.mergeCells) {
                t3.options.mergeCells;
                const e3 = Object.keys(t3.options.mergeCells);
                for (let n2 = 0; n2 < e3.length; n2++) s2[e3[n2]] = [t3.options.mergeCells[e3[n2]][0], t3.options.mergeCells[e3[n2]][1]];
              }
              return s2;
            }, u = function(e2, t3, s2, a2) {
              const c2 = this;
              let d2 = false;
              if (e2) {
                if ("string" != typeof e2) return null;
              } else {
                if (!c2.highlighted.length) return alert(jSuites.translate("No cells selected")), null;
                {
                  const o2 = parseInt(c2.highlighted[0].getAttribute("data-x")), r2 = parseInt(c2.highlighted[0].getAttribute("data-y")), l2 = parseInt(c2.highlighted[c2.highlighted.length - 1].getAttribute("data-x")), i3 = parseInt(c2.highlighted[c2.highlighted.length - 1].getAttribute("data-y"));
                  e2 = (0, n.t3)([o2, r2]), t3 = l2 - o2 + 1, s2 = i3 - r2 + 1;
                }
              }
              const u2 = (0, n.vu)(e2, true);
              if (c2.options.mergeCells && c2.options.mergeCells[e2]) c2.records[u2[1]][u2[0]].element.getAttribute("data-merged") && (d2 = "Cell already merged");
              else if ((!t3 || t3 < 2) && (!s2 || s2 < 2)) d2 = "Invalid merged properties";
              else for (let e3 = u2[1]; e3 < u2[1] + s2; e3++) for (let s3 = u2[0]; s3 < u2[0] + t3; s3++) (0, n.t3)([s3, e3]), c2.records[e3][s3].element.getAttribute("data-merged") && (d2 = "There is a conflict with another merged cell");
              if (d2) alert(jSuites.translate(d2));
              else {
                t3 > 1 ? c2.records[u2[1]][u2[0]].element.setAttribute("colspan", t3) : t3 = 1, s2 > 1 ? c2.records[u2[1]][u2[0]].element.setAttribute("rowspan", s2) : s2 = 1, c2.options.mergeCells || (c2.options.mergeCells = {}), c2.options.mergeCells[e2] = [t3, s2, []], c2.records[u2[1]][u2[0]].element.setAttribute("data-merged", "true"), c2.records[u2[1]][u2[0]].element.style.overflow = "hidden";
                const n2 = [];
                for (let r2 = u2[1]; r2 < u2[1] + s2; r2++) for (let s3 = u2[0]; s3 < u2[0] + t3; s3++) u2[0] == s3 && u2[1] == r2 || (n2.push(c2.options.data[r2][s3]), o.k9.call(c2, s3, r2, "", true), c2.options.mergeCells[e2][2].push(c2.records[r2][s3].element), c2.records[r2][s3].element.style.display = "none", c2.records[r2][s3].element = c2.records[u2[1]][u2[0]].element);
                i2.c6.call(c2, c2.records[u2[1]][u2[0]].element), a2 || (r.Dh.call(c2, { action: "setMerge", column: e2, colspan: t3, rowspan: s2, data: n2 }), l.A.call(c2, "onmerge", c2, { [e2]: [t3, s2] }));
              }
            }, p = function(e2, t3, s2) {
              const r2 = this;
              if (r2.options.mergeCells && r2.options.mergeCells[e2]) {
                const l2 = (0, n.vu)(e2, true);
                r2.records[l2[1]][l2[0]].element.removeAttribute("colspan"), r2.records[l2[1]][l2[0]].element.removeAttribute("rowspan"), r2.records[l2[1]][l2[0]].element.removeAttribute("data-merged");
                const a2 = r2.options.mergeCells[e2];
                let c2, d2, u2 = 0;
                for (c2 = 0; c2 < a2[1]; c2++) for (d2 = 0; d2 < a2[0]; d2++) (c2 > 0 || d2 > 0) && (r2.records[l2[1] + c2][l2[0] + d2].element = a2[2][u2], r2.records[l2[1] + c2][l2[0] + d2].element.style.display = "", t3 && t3[u2] && o.k9.call(r2, l2[0] + d2, l2[1] + c2, t3[u2]), u2++);
                i2.c6.call(r2, r2.records[l2[1]][l2[0]].element, r2.records[l2[1] + c2 - 1][l2[0] + d2 - 1].element), s2 || delete r2.options.mergeCells[e2];
              }
            }, h = function(e2) {
              const t3 = this;
              if (t3.options.mergeCells) {
                t3.options.mergeCells;
                const s2 = Object.keys(t3.options.mergeCells);
                for (let n2 = 0; n2 < s2.length; n2++) p.call(t3, s2[n2], null, e2);
              }
            };
          }, 654: function(e, t2, s) {
            s.d(t2, { IQ: function() {
              return o;
            }, hs: function() {
              return r;
            }, iZ: function() {
              return l;
            } });
            var n = s(805);
            const o = function(e2, t3) {
              const s2 = this;
              return e2 ? t3 ? s2.options.meta && s2.options.meta[e2] && s2.options.meta[e2][t3] ? s2.options.meta[e2][t3] : null : s2.options.meta && s2.options.meta[e2] ? s2.options.meta[e2] : null : s2.options.meta;
            }, r = function(e2) {
              const t3 = this;
              if (t3.options.meta) {
                const s2 = {}, n2 = Object.keys(t3.options.meta);
                for (let o2 = 0; o2 < n2.length; o2++) e2[n2[o2]] ? s2[e2[n2[o2]]] = t3.options.meta[n2[o2]] : s2[n2[o2]] = t3.options.meta[n2[o2]];
                t3.options.meta = s2;
              }
            }, l = function(e2, t3, s2) {
              const o2 = this;
              if (o2.options.meta || (o2.options.meta = {}), t3 && s2) o2.options.meta[e2] || (o2.options.meta[e2] = {}), o2.options.meta[e2][t3] = s2, n.A.call(o2, "onchangemeta", o2, { [e2]: { [t3]: s2 } });
              else {
                const t4 = Object.keys(e2);
                for (let s3 = 0; s3 < t4.length; s3++) {
                  o2.options.meta[t4[s3]] || (o2.options.meta[t4[s3]] = {});
                  const n2 = Object.keys(e2[t4[s3]]);
                  for (let r2 = 0; r2 < n2.length; r2++) o2.options.meta[t4[s3]][n2[r2]] = e2[t4[s3]][n2[r2]];
                }
                n.A.call(o2, "onchangemeta", o2, e2);
              }
            };
          }, 94: function(e, t2, s) {
            s.d(t2, { My: function() {
              return d;
            }, Th: function() {
              return a;
            }, iY: function() {
              return c;
            } });
            var n = s(911), o = s(805), r = s(530), l = s(497), i2 = s(829);
            const a = function(e2, t3) {
              const s2 = this;
              for (let e3 = 0; e3 < s2.headers.length; e3++) s2.headers[e3].classList.remove("arrow-up"), s2.headers[e3].classList.remove("arrow-down");
              t3 ? s2.headers[e2].classList.add("arrow-up") : s2.headers[e2].classList.add("arrow-down");
            }, c = function(e2) {
              const t3 = this;
              let s2 = [];
              for (let n2 = 0; n2 < e2.length; n2++) s2[n2] = t3.options.data[e2[n2]];
              t3.options.data = s2, s2 = [];
              for (let n2 = 0; n2 < e2.length; n2++) {
                s2[n2] = t3.records[e2[n2]];
                for (let e3 = 0; e3 < s2[n2].length; e3++) s2[n2][e3].y = n2;
              }
              t3.records = s2, s2 = [];
              for (let n2 = 0; n2 < e2.length; n2++) s2[n2] = t3.rows[e2[n2]], s2[n2].y = n2;
              if (t3.rows = s2, r.o8.call(t3), t3.results && t3.results.length) t3.searchInput.value ? t3.search(t3.searchInput.value) : i2.F8.call(t3);
              else if (t3.results = null, t3.pageNumber = 0, t3.options.pagination > 0) t3.page(0);
              else if (1 == t3.options.lazyLoading) l.wu.call(t3, 0);
              else for (let e3 = 0; e3 < t3.rows.length; e3++) t3.tbody.appendChild(t3.rows[e3].element);
            }, d = function(e2, t3) {
              const s2 = this;
              if (e2 >= 0) {
                if (s2.options.mergeCells && Object.keys(s2.options.mergeCells).length > 0) {
                  if (!confirm(jSuites.translate("This action will destroy any existing merged cells. Are you sure?"))) return false;
                  s2.destroyMerge();
                }
                t3 = null == t3 ? s2.headers[e2].classList.contains("arrow-down") ? 1 : 0 : t3 ? 1 : 0;
                let r2 = [];
                if (s2.options.columns && s2.options.columns[e2] && ("number" == s2.options.columns[e2].type || "numeric" == s2.options.columns[e2].type || "percentage" == s2.options.columns[e2].type || "autonumber" == s2.options.columns[e2].type || "color" == s2.options.columns[e2].type)) for (let t4 = 0; t4 < s2.options.data.length; t4++) r2[t4] = [t4, Number(s2.options.data[t4][e2])];
                else if (s2.options.columns && s2.options.columns[e2] && ("calendar" == s2.options.columns[e2].type || "checkbox" == s2.options.columns[e2].type || "radio" == s2.options.columns[e2].type)) for (let t4 = 0; t4 < s2.options.data.length; t4++) r2[t4] = [t4, s2.options.data[t4][e2]];
                else for (let t4 = 0; t4 < s2.options.data.length; t4++) r2[t4] = [t4, s2.records[t4][e2].element.textContent.toLowerCase()];
                "function" != typeof s2.parent.config.sorting && (s2.parent.config.sorting = function(e3) {
                  return function(t4, s3) {
                    const n2 = t4[1], o2 = s3[1];
                    return e3 ? "" === n2 && "" !== o2 ? 1 : "" !== n2 && "" === o2 || n2 > o2 ? -1 : n2 < o2 ? 1 : 0 : "" === n2 && "" !== o2 ? 1 : "" !== n2 && "" === o2 ? -1 : n2 > o2 ? 1 : n2 < o2 ? -1 : 0;
                  };
                }), r2 = r2.sort(s2.parent.config.sorting(t3));
                const l2 = [];
                for (let e3 = 0; e3 < r2.length; e3++) l2[e3] = r2[e3][0];
                return n.Dh.call(s2, { action: "orderBy", rows: l2, column: e2, order: t3 }), a.call(s2, e2, t3), c.call(s2, l2), o.A.call(s2, "onsort", s2, e2, t3, l2.map(((e3) => e3))), true;
              }
            };
          }, 167: function(e, t2, s) {
            s.d(t2, { $f: function() {
              return a;
            }, IV: function() {
              return l;
            }, MY: function() {
              return i2;
            }, ho: function() {
              return r;
            } });
            var n = s(805), o = s(657);
            const r = function(e2) {
              const t3 = this;
              return 1 != t3.options.search && 1 != t3.options.filters || !t3.results || (e2 = t3.results.indexOf(e2)), Math.ceil((parseInt(e2) + 1) / parseInt(t3.options.pagination)) - 1;
            }, l = function() {
              const e2 = this;
              if (e2.pagination.children[0].innerHTML = "", e2.pagination.children[1].innerHTML = "", e2.options.pagination) {
                let t3;
                if (t3 = 1 != e2.options.search && 1 != e2.options.filters || !e2.results ? e2.rows.length : e2.results.length, t3) {
                  const s2 = Math.ceil(t3 / e2.options.pagination);
                  let n2, o2;
                  if (e2.pageNumber < 6 ? (n2 = 1, o2 = s2 < 10 ? s2 : 10) : s2 - e2.pageNumber < 5 ? (n2 = s2 - 9, o2 = s2, n2 < 1 && (n2 = 1)) : (n2 = e2.pageNumber - 4, o2 = e2.pageNumber + 5), n2 > 1) {
                    const t4 = document.createElement("div");
                    t4.className = "jss_page", t4.innerHTML = "<", t4.title = 1, e2.pagination.children[1].appendChild(t4);
                  }
                  for (let t4 = n2; t4 <= o2; t4++) {
                    const s3 = document.createElement("div");
                    s3.className = "jss_page", s3.innerHTML = t4, e2.pagination.children[1].appendChild(s3), e2.pageNumber == t4 - 1 && s3.classList.add("jss_page_selected");
                  }
                  if (o2 < s2) {
                    const t4 = document.createElement("div");
                    t4.className = "jss_page", t4.innerHTML = ">", t4.title = s2, e2.pagination.children[1].appendChild(t4);
                  }
                  const r2 = function(e3) {
                    const t4 = Array.prototype.slice.call(arguments, 1);
                    return e3.replace(/{(\d+)}/g, (function(e4, s3) {
                      return void 0 !== t4[s3] ? t4[s3] : e4;
                    }));
                  };
                  e2.pagination.children[0].innerHTML = r2(jSuites.translate("Showing page {0} of {1} entries"), e2.pageNumber + 1, s2);
                } else e2.pagination.children[0].innerHTML = jSuites.translate("No records found");
              }
            }, i2 = function(e2) {
              const t3 = this, s2 = t3.pageNumber;
              let r2;
              r2 = 1 != t3.options.search && 1 != t3.options.filters || !t3.results ? t3.rows : t3.results;
              const i3 = parseInt(t3.options.pagination);
              null != e2 && -1 != e2 || (e2 = Math.ceil(r2.length / i3) - 1), t3.pageNumber = e2;
              let a2 = e2 * i3, c = e2 * i3 + i3;
              for (c > r2.length && (c = r2.length), a2 < 0 && (a2 = 0); t3.tbody.firstChild; ) t3.tbody.removeChild(t3.tbody.firstChild);
              for (let e3 = a2; e3 < c; e3++) 1 != t3.options.search && 1 != t3.options.filters || !t3.results ? t3.tbody.appendChild(t3.rows[e3].element) : t3.tbody.appendChild(t3.rows[r2[e3]].element);
              t3.options.pagination > 0 && l.call(t3), o.Aq.call(t3), n.A.call(t3, "onchangepage", t3, e2, s2, t3.options.pagination);
            }, a = function() {
              const e2 = this;
              let t3;
              return t3 = 1 != e2.options.search && 1 != e2.options.filters || !e2.results ? e2.rows.length : e2.results.length, Math.ceil(t3 / e2.options.pagination);
            };
          }, 657: function(e, t2, s) {
            s.d(t2, { AH: function() {
              return m;
            }, Aq: function() {
              return d;
            }, G9: function() {
              return g;
            }, Jg: function() {
              return f;
            }, Lo: function() {
              return v;
            }, R5: function() {
              return _;
            }, Ub: function() {
              return B;
            }, at: function() {
              return w;
            }, c6: function() {
              return p;
            }, eO: function() {
              return x2;
            }, ef: function() {
              return A;
            }, gE: function() {
              return u;
            }, gG: function() {
              return y2;
            }, kA: function() {
              return h;
            }, kF: function() {
              return C;
            }, kV: function() {
              return k;
            }, sp: function() {
              return E;
            }, tW: function() {
              return j;
            } });
            var n = s(805), o = s(296), r = s(978), l = s(911), i2 = s(530), a = s(689), c = s(392);
            const d = function() {
              const e2 = this;
              if (e2.highlighted && e2.highlighted.length) {
                const t3 = e2.highlighted[e2.highlighted.length - 1].element, s2 = t3.getAttribute("data-x"), n2 = e2.content.getBoundingClientRect(), r2 = n2.left, l2 = n2.top, i3 = t3.getBoundingClientRect(), a2 = i3.left, c2 = i3.top, d2 = i3.width, u2 = i3.height, p2 = a2 - r2 + e2.content.scrollLeft + d2 - 4, h2 = c2 - l2 + e2.content.scrollTop + u2 - 4;
                if (e2.corner.style.top = h2 + "px", e2.corner.style.left = p2 + "px", e2.options.freezeColumns) {
                  const t4 = o.w.call(e2);
                  s2 > e2.options.freezeColumns - 1 && a2 - r2 + d2 < t4 ? e2.corner.style.display = "none" : 0 != e2.options.selectionCopy && (e2.corner.style.display = "");
                } else 0 != e2.options.selectionCopy && (e2.corner.style.display = "");
              } else e2.corner.style.top = "-2000px", e2.corner.style.left = "-2000px";
              (0, c.nK)(e2);
            }, u = function(e2) {
              const t3 = this;
              let s2;
              if (t3.highlighted && t3.highlighted.length) {
                s2 = 1;
                for (let e3 = 0; e3 < t3.highlighted.length; e3++) {
                  t3.highlighted[e3].element.classList.remove("highlight"), t3.highlighted[e3].element.classList.remove("highlight-left"), t3.highlighted[e3].element.classList.remove("highlight-right"), t3.highlighted[e3].element.classList.remove("highlight-top"), t3.highlighted[e3].element.classList.remove("highlight-bottom"), t3.highlighted[e3].element.classList.remove("highlight-selected");
                  const s3 = parseInt(t3.highlighted[e3].element.getAttribute("data-x")), n2 = parseInt(t3.highlighted[e3].element.getAttribute("data-y"));
                  let o2, r2;
                  if (t3.highlighted[e3].element.getAttribute("data-merged")) {
                    const l2 = parseInt(t3.highlighted[e3].element.getAttribute("colspan")), i3 = parseInt(t3.highlighted[e3].element.getAttribute("rowspan"));
                    o2 = l2 > 0 ? s3 + (l2 - 1) : s3, r2 = i3 > 0 ? n2 + (i3 - 1) : n2;
                  } else o2 = s3, r2 = n2;
                  for (let e4 = s3; e4 <= o2; e4++) t3.headers[e4] && t3.headers[e4].classList.remove("selected");
                  for (let e4 = n2; e4 <= r2; e4++) t3.rows[e4] && t3.rows[e4].element.classList.remove("selected");
                }
              } else s2 = 0;
              return t3.highlighted = [], t3.selectedCell = null, t3.corner.style.top = "-2000px", t3.corner.style.left = "-2000px", 1 == e2 && 1 == s2 && n.A.call(t3, "onblur", t3), s2;
            }, p = function(e2, t3, s2) {
              const n2 = e2.getAttribute("data-x"), o2 = e2.getAttribute("data-y");
              let r2, l2;
              t3 ? (r2 = t3.getAttribute("data-x"), l2 = t3.getAttribute("data-y")) : (r2 = n2, l2 = o2), m.call(this, n2, o2, r2, l2, s2);
            }, h = function() {
              const e2 = document.querySelectorAll(".jss_worksheet .copying");
              for (let t3 = 0; t3 < e2.length; t3++) e2[t3].classList.remove("copying"), e2[t3].classList.remove("copying-left"), e2[t3].classList.remove("copying-right"), e2[t3].classList.remove("copying-top"), e2[t3].classList.remove("copying-bottom");
            }, m = function(e2, t3, s2, o2, r2) {
              const l2 = this;
              if (null == t3) {
                if (t3 = 0, o2 = l2.rows.length - 1, null == e2) return;
              } else null == e2 && (e2 = 0, s2 = l2.options.data[0].length - 1);
              null == s2 && (s2 = e2), null == o2 && (o2 = t3), e2 >= l2.headers.length && (e2 = l2.headers.length - 1), t3 >= l2.rows.length && (t3 = l2.rows.length - 1), s2 >= l2.headers.length && (s2 = l2.headers.length - 1), o2 >= l2.rows.length && (o2 = l2.rows.length - 1);
              let i3, a2, c2, u2, p2 = null, m2 = null, f2 = null, g2 = null;
              parseInt(e2) < parseInt(s2) ? (i3 = parseInt(e2), a2 = parseInt(s2)) : (i3 = parseInt(s2), a2 = parseInt(e2)), parseInt(t3) < parseInt(o2) ? (c2 = parseInt(t3), u2 = parseInt(o2)) : (c2 = parseInt(o2), u2 = parseInt(t3));
              for (let e3 = i3; e3 <= a2; e3++) for (let t4 = c2; t4 <= u2; t4++) if (l2.records[t4][e3] && l2.records[t4][e3].element.getAttribute("data-merged")) {
                const s3 = parseInt(l2.records[t4][e3].element.getAttribute("data-x")), n2 = parseInt(l2.records[t4][e3].element.getAttribute("data-y")), o3 = parseInt(l2.records[t4][e3].element.getAttribute("colspan")), r3 = parseInt(l2.records[t4][e3].element.getAttribute("rowspan"));
                o3 > 1 && (s3 < i3 && (i3 = s3), s3 + o3 > a2 && (a2 = s3 + o3 - 1)), r3 && (n2 < c2 && (c2 = n2), n2 + r3 > u2 && (u2 = n2 + r3 - 1));
              }
              for (let e3 = c2; e3 <= u2; e3++) "none" != l2.rows[e3].element.style.display && (null == f2 && (f2 = e3), g2 = e3);
              for (let e3 = i3; e3 <= a2; e3++) for (let t4 = c2; t4 <= u2; t4++) l2.options.columns && l2.options.columns[e3] && "hidden" == l2.options.columns[e3].type || (null == p2 && (p2 = e3), m2 = e3);
              if (p2 || (p2 = 0), m2 || (m2 = 0), false === n.A.call(l2, "onbeforeselection", l2, p2, f2, m2, g2, r2)) return false;
              const y3 = l2.resetSelection();
              l2.selectedCell = [e2, t3, s2, o2], l2.records[t3][e2] && l2.records[t3][e2].element.classList.add("highlight-selected");
              for (let e3 = i3; e3 <= a2; e3++) for (let t4 = c2; t4 <= u2; t4++) "none" != l2.rows[t4].element.style.display && "none" != l2.records[t4][e3].element.style.display && (l2.records[t4][e3].element.classList.add("highlight"), l2.highlighted.push(l2.records[t4][e3]));
              for (let e3 = p2; e3 <= m2; e3++) l2.options.columns && l2.options.columns[e3] && "hidden" == l2.options.columns[e3].type || !l2.cols[e3].colElement.style || "none" == l2.cols[e3].colElement.style.display || (l2.records[f2] && l2.records[f2][e3] && l2.records[f2][e3].element.classList.add("highlight-top"), l2.records[g2] && l2.records[g2][e3] && l2.records[g2][e3].element.classList.add("highlight-bottom"), l2.headers[e3].classList.add("selected"));
              for (let e3 = f2; e3 <= g2; e3++) l2.rows[e3] && "none" != l2.rows[e3].element.style.display && (l2.records[e3][p2].element.classList.add("highlight-left"), l2.records[e3][m2].element.classList.add("highlight-right"), l2.rows[e3].element.classList.add("selected"));
              l2.selectedContainer = [p2, f2, m2, g2], 0 == y3 && (n.A.call(l2, "onfocus", l2), h()), n.A.call(l2, "onselection", l2, p2, f2, m2, g2, r2), d.call(l2);
            }, f = function(e2) {
              const t3 = this;
              if (!t3.selectedCell) return [];
              const s2 = [];
              for (let n2 = Math.min(t3.selectedCell[0], t3.selectedCell[2]); n2 <= Math.max(t3.selectedCell[0], t3.selectedCell[2]); n2++) e2 && "none" == t3.headers[n2].style.display || s2.push(n2);
              return s2;
            }, g = function() {
              const e2 = this;
              e2.selectedCell && e2.updateSelectionFromCoords(e2.selectedCell[0], e2.selectedCell[1], e2.selectedCell[2], e2.selectedCell[3]);
            }, y2 = function() {
              const e2 = this;
              for (let t3 = 0; t3 < e2.selection.length; t3++) e2.selection[t3].classList.remove("selection"), e2.selection[t3].classList.remove("selection-left"), e2.selection[t3].classList.remove("selection-right"), e2.selection[t3].classList.remove("selection-top"), e2.selection[t3].classList.remove("selection-bottom");
              e2.selection = [];
            }, b = function(e2) {
              return 1 == (e2 = "" + e2).length && (e2 = "0" + e2), e2;
            }, C = function(e2, t3) {
              const s2 = this, o2 = s2.getData(true, false), r2 = s2.selectedContainer, c2 = parseInt(e2.getAttribute("data-x")), d2 = parseInt(e2.getAttribute("data-y")), u2 = parseInt(t3.getAttribute("data-x")), p2 = parseInt(t3.getAttribute("data-y")), h2 = [];
              let m2, f2, g2 = false;
              r2[0] == c2 ? (m2 = d2 < r2[1] ? d2 - r2[1] : 1, f2 = 0) : (f2 = c2 < r2[0] ? c2 - r2[0] : 1, m2 = 0);
              let y3 = 0, C2 = 0;
              for (let e3 = d2; e3 <= p2; e3++) if (!s2.rows[e3] || "none" != s2.rows[e3].element.style.display) {
                null == o2[C2] && (C2 = 0), y3 = 0, r2[0] != c2 && (f2 = c2 < r2[0] ? c2 - r2[0] : 1);
                for (let t4 = c2; t4 <= u2; t4++) {
                  if (s2.records[e3][t4] && !s2.records[e3][t4].element.classList.contains("readonly") && "none" != s2.records[e3][t4].element.style.display && 0 == g2) {
                    if (!s2.selection.length && "" != s2.options.data[e3][t4]) {
                      g2 = true;
                      continue;
                    }
                    (null == o2[C2] || null == o2[C2][y3]) && (y3 = 0);
                    let n2 = o2[C2][y3];
                    if (n2 && !o2[1] && 0 != s2.parent.config.autoIncrement) if (!s2.options.columns || !s2.options.columns[t4] || s2.options.columns[t4].type && "text" != s2.options.columns[t4].type && "number" != s2.options.columns[t4].type) {
                      if (s2.options.columns && s2.options.columns[t4] && "calendar" == s2.options.columns[t4].type) {
                        const e4 = new Date(n2);
                        e4.setDate(e4.getDate() + m2), n2 = e4.getFullYear() + "-" + b(parseInt(e4.getMonth() + 1)) + "-" + b(e4.getDate()) + " 00:00:00";
                      }
                    } else if ("=" == ("" + n2).substr(0, 1)) {
                      const e4 = n2.match(/([A-Z]+[0-9]+)/g);
                      if (e4) {
                        const t5 = [];
                        for (let s3 = 0; s3 < e4.length; s3++) {
                          const n3 = (0, a.vu)(e4[s3], 1);
                          n3[0] += f2, n3[1] += m2, n3[1] < 0 && (n3[1] = 0);
                          const o3 = (0, a.t3)([n3[0], n3[1]]);
                          o3 != e4[s3] && (t5[e4[s3]] = o3);
                        }
                        t5 && (n2 = (0, i2.yB)(n2, t5));
                      }
                    } else n2 == Number(n2) && (n2 = Number(n2) + m2);
                    h2.push(i2.k9.call(s2, t4, e3, n2)), i2.xF.call(s2, t4, e3, h2);
                  }
                  y3++, r2[0] != c2 && f2++;
                }
                C2++, m2++;
              }
              l.Dh.call(s2, { action: "setValue", records: h2, selection: s2.selectedCell }), i2.am.call(s2);
              const j2 = h2.map((function(e3) {
                return { x: e3.x, y: e3.y, value: e3.value, oldValue: e3.oldValue };
              }));
              n.A.call(s2, "onafterchanges", s2, j2);
            }, j = function(e2) {
              let t3, s2, n2 = 0;
              if (!e2 || 0 === e2.length) return n2;
              for (t3 = 0; t3 < e2.length; t3++) s2 = e2.charCodeAt(t3), n2 = (n2 << 5) - n2 + s2, n2 |= 0;
              return n2;
            }, w = function(e2, t3, s2) {
              const n2 = this;
              if (1 == e2) {
                if (n2.selectedCell && (t3 >= n2.selectedCell[1] && t3 <= n2.selectedCell[3] || s2 >= n2.selectedCell[1] && s2 <= n2.selectedCell[3])) return void n2.resetSelection();
              } else if (n2.selectedCell && (t3 >= n2.selectedCell[0] && t3 <= n2.selectedCell[2] || s2 >= n2.selectedCell[0] && s2 <= n2.selectedCell[2])) return void n2.resetSelection();
            }, _ = function(e2) {
              const t3 = this;
              if (!t3.selectedCell) return [];
              const s2 = [];
              for (let n2 = Math.min(t3.selectedCell[1], t3.selectedCell[3]); n2 <= Math.max(t3.selectedCell[1], t3.selectedCell[3]); n2++) e2 && "none" == t3.rows[n2].element.style.display || s2.push(n2);
              return s2;
            }, B = function() {
              const e2 = this;
              e2.selectedCell || (e2.selectedCell = []), e2.selectedCell[0] = 0, e2.selectedCell[1] = 0, e2.selectedCell[2] = e2.headers.length - 1, e2.selectedCell[3] = e2.records.length - 1, e2.updateSelectionFromCoords(e2.selectedCell[0], e2.selectedCell[1], e2.selectedCell[2], e2.selectedCell[3]);
            }, v = function() {
              const e2 = this;
              return e2.selectedCell ? [Math.min(e2.selectedCell[0], e2.selectedCell[2]), Math.min(e2.selectedCell[1], e2.selectedCell[3]), Math.max(e2.selectedCell[0], e2.selectedCell[2]), Math.max(e2.selectedCell[1], e2.selectedCell[3])] : null;
            }, A = function(e2) {
              const t3 = this, s2 = v.call(t3);
              if (!s2) return [];
              const n2 = [];
              for (let o2 = s2[1]; o2 <= s2[3]; o2++) for (let l2 = s2[0]; l2 <= s2[2]; l2++) e2 ? n2.push((0, r.getCellNameFromCoords)(l2, o2)) : n2.push(t3.records[o2][l2]);
              return n2;
            }, x2 = function() {
              const e2 = this, t3 = v.call(e2);
              if (!t3) return "";
              const s2 = (0, r.getCellNameFromCoords)(t3[0], t3[1]), n2 = (0, r.getCellNameFromCoords)(t3[2], t3[3]);
              return s2 === n2 ? e2.options.worksheetName + "!" + s2 : e2.options.worksheetName + "!" + s2 + ":" + n2;
            }, E = function(e2, t3) {
              const s2 = v.call(this);
              return e2 >= s2[0] && e2 <= s2[2] && t3 >= s2[1] && t3 <= s2[3];
            }, k = function() {
              const e2 = v.call(this);
              return e2 ? [e2] : [];
            };
          }, 392: function(e, t2, s) {
            s.d(t2, { Ar: function() {
              return u;
            }, ll: function() {
              return d;
            }, nK: function() {
              return c;
            } });
            var n = s(978), o = s(530);
            const r = function(e2, t3) {
              0 != t3.options.editable ? e2.classList.remove("jtoolbar-disabled") : e2.classList.add("jtoolbar-disabled");
            }, l = function() {
              const e2 = [], t3 = this, s2 = function() {
                return o.eN.call(t3);
              };
              e2.push({ content: "undo", onclick: function() {
                s2().undo();
              } }), e2.push({ content: "redo", onclick: function() {
                s2().redo();
              } }), e2.push({ content: "save", onclick: function() {
                const e3 = s2();
                e3 && e3.download();
              } }), e2.push({ type: "divisor" }), e2.push({ type: "select", width: "120px", options: ["Default", "Verdana", "Arial", "Courier New"], render: function(e3) {
                return '<span style="font-family:' + e3 + '">' + e3 + "</span>";
              }, onchange: function(e3, t4, n2, o2, r2) {
                const l3 = s2();
                let i3 = l3.getSelected(true);
                if (i3) {
                  let e4 = r2 ? o2 : "";
                  l3.setStyle(Object.fromEntries(i3.map((function(t5) {
                    return [t5, "font-family: " + e4];
                  }))));
                }
              }, updateState: function(e3, t4, n2) {
                r(n2, s2());
              } }), e2.push({ type: "select", width: "48px", content: "format_size", options: ["x-small", "small", "medium", "large", "x-large"], render: function(e3) {
                return '<span style="font-size:' + e3 + '">' + e3 + "</span>";
              }, onchange: function(e3, t4, n2, o2) {
                const r2 = s2();
                let l3 = r2.getSelected(true);
                l3 && r2.setStyle(Object.fromEntries(l3.map((function(e4) {
                  return [e4, "font-size: " + o2];
                }))));
              }, updateState: function(e3, t4, n2) {
                r(n2, s2());
              } }), e2.push({ type: "select", options: ["left", "center", "right", "justify"], render: function(e3) {
                return '<i class="material-icons">format_align_' + e3 + "</i>";
              }, onchange: function(e3, t4, n2, o2) {
                const r2 = s2();
                let l3 = r2.getSelected(true);
                l3 && r2.setStyle(Object.fromEntries(l3.map((function(e4) {
                  return [e4, "text-align: " + o2];
                }))));
              }, updateState: function(e3, t4, n2) {
                r(n2, s2());
              } }), e2.push({ content: "format_bold", onclick: function(e3, t4, n2) {
                const o2 = s2();
                let r2 = o2.getSelected(true);
                r2 && o2.setStyle(Object.fromEntries(r2.map((function(e4) {
                  return [e4, "font-weight:bold"];
                }))));
              }, updateState: function(e3, t4, n2) {
                r(n2, s2());
              } }), e2.push({ type: "color", content: "format_color_text", k: "color", updateState: function(e3, t4, n2) {
                r(n2, s2());
              } }), e2.push({ type: "color", content: "format_color_fill", k: "background-color", updateState: function(e3, t4, n2, o2) {
                r(n2, s2());
              } });
              let l2 = ["top", "middle", "bottom"];
              return e2.push({ type: "select", options: ["vertical_align_top", "vertical_align_center", "vertical_align_bottom"], render: function(e3) {
                return '<i class="material-icons">' + e3 + "</i>";
              }, value: 1, onchange: function(e3, t4, n2, o2, r2) {
                const i3 = s2();
                let a2 = i3.getSelected(true);
                a2 && i3.setStyle(Object.fromEntries(a2.map((function(e4) {
                  return [e4, "vertical-align: " + l2[r2]];
                }))));
              }, updateState: function(e3, t4, n2) {
                r(n2, s2());
              } }), e2.push({ content: "web", tooltip: jSuites.translate("Merge the selected cells"), onclick: function() {
                const e3 = s2();
                if (e3.selectedCell && confirm(jSuites.translate("The merged cells will retain the value of the top-left cell only. Are you sure?"))) {
                  const t4 = [Math.min(e3.selectedCell[0], e3.selectedCell[2]), Math.min(e3.selectedCell[1], e3.selectedCell[3]), Math.max(e3.selectedCell[0], e3.selectedCell[2]), Math.max(e3.selectedCell[1], e3.selectedCell[3])];
                  let s3 = (0, n.getCellNameFromCoords)(t4[0], t4[1]);
                  if (e3.records[t4[1]][t4[0]].element.getAttribute("data-merged")) e3.removeMerge(s3);
                  else {
                    let n2 = t4[2] - t4[0] + 1, o2 = t4[3] - t4[1] + 1;
                    1 === n2 && 1 === o2 || e3.setMerge(s3, n2, o2);
                  }
                }
              }, updateState: function(e3, t4, n2) {
                r(n2, s2());
              } }), e2.push({ type: "select", options: ["border_all", "border_outer", "border_inner", "border_horizontal", "border_vertical", "border_left", "border_top", "border_right", "border_bottom", "border_clear"], columns: 5, render: function(e3) {
                return '<i class="material-icons">' + e3 + "</i>";
              }, right: true, onchange: function(e3, t4, o2, r2) {
                const l3 = s2();
                if (l3.selectedCell) {
                  const e4 = [Math.min(l3.selectedCell[0], l3.selectedCell[2]), Math.min(l3.selectedCell[1], l3.selectedCell[3]), Math.max(l3.selectedCell[0], l3.selectedCell[2]), Math.max(l3.selectedCell[1], l3.selectedCell[3])];
                  let s3 = r2;
                  if (e4) {
                    let o3 = t4.thickness || 1, r3 = t4.color || "black";
                    const i3 = t4.style || "solid";
                    "double" === i3 && (o3 += 2);
                    let a2 = {}, c2 = e4[0], d2 = e4[1], u2 = e4[2], p = e4[3];
                    const h = function(e5, t5, n2) {
                      let l4 = ["", "", "", ""];
                      l4[0] = ("border_top" === s3 || "border_outer" === s3) && n2 === d2 || ("border_inner" === s3 || "border_horizontal" === s3) && n2 > d2 || "border_all" === s3 ? "border-top: " + o3 + "px " + i3 + " " + r3 : "border-top: ", l4[1] = "border_all" !== s3 && "border_right" !== s3 && "border_outer" !== s3 || t5 !== u2 ? "border-right: " : "border-right: " + o3 + "px " + i3 + " " + r3, l4[2] = "border_all" !== s3 && "border_bottom" !== s3 && "border_outer" !== s3 || n2 !== p ? "border-bottom: " : "border-bottom: " + o3 + "px " + i3 + " " + r3, l4[3] = ("border_left" === s3 || "border_outer" === s3) && t5 === c2 || ("border_inner" === s3 || "border_vertical" === s3) && t5 > c2 || "border_all" === s3 ? "border-left: " + o3 + "px " + i3 + " " + r3 : "border-left: ", a2[e5] = l4.join(";");
                    };
                    for (let t5 = e4[1]; t5 <= e4[3]; t5++) for (let s4 = e4[0]; s4 <= e4[2]; s4++) h((0, n.getCellNameFromCoords)(s4, t5), s4, t5), l3.records[t5][s4].element.getAttribute("data-merged") && h((0, n.getCellNameFromCoords)(e4[0], e4[1]), s4, t5);
                    Object.keys(a2) && l3.setStyle(a2);
                  }
                }
              }, onload: function(e3, t4) {
                let s3 = document.createElement("div"), n2 = document.createElement("div");
                s3.appendChild(n2);
                let o2 = jSuites.color(n2, { closeOnChange: false, onchange: function(e4, s4) {
                  e4.parentNode.children[1].style.color = s4, t4.color = s4;
                } }), r2 = document.createElement("i");
                r2.classList.add("material-icons"), r2.innerHTML = "color_lens", r2.onclick = function() {
                  o2.open();
                }, s3.appendChild(r2), e3.children[1].appendChild(s3), n2 = document.createElement("div"), jSuites.picker(n2, { type: "select", data: [1, 2, 3, 4, 5], render: function(e4) {
                  return '<div style="height: ' + e4 + 'px; width: 30px; background-color: black;"></div>';
                }, onchange: function(e4, s4, n3, o3) {
                  t4.thickness = o3;
                }, width: "50px" }), e3.children[1].appendChild(n2);
                const l3 = document.createElement("div");
                jSuites.picker(l3, { type: "select", data: ["solid", "dotted", "dashed", "double"], render: function(e4) {
                  return "double" === e4 ? '<div style="width: 30px; border-top: 3px ' + e4 + ' black;"></div>' : '<div style="width: 30px; border-top: 2px ' + e4 + ' black;"></div>';
                }, onchange: function(e4, s4, n3, o3) {
                  t4.style = o3;
                }, width: "50px" }), e3.children[1].appendChild(l3), n2 = document.createElement("div"), n2.style.flex = "1", e3.children[1].appendChild(n2);
              }, updateState: function(e3, t4, n2) {
                r(n2, s2());
              } }), e2.push({ type: "divisor" }), e2.push({ content: "fullscreen", tooltip: "Toggle Fullscreen", onclick: function(e3, s3, n2) {
                "fullscreen" === n2.children[0].textContent ? (t3.fullscreen(true), n2.children[0].textContent = "fullscreen_exit") : (t3.fullscreen(false), n2.children[0].textContent = "fullscreen");
              }, updateState: function(e3, t4, s3, n2) {
                true === n2.parent.config.fullscreen ? s3.children[0].textContent = "fullscreen_exit" : s3.children[0].textContent = "fullscreen";
              } }), e2;
            }, i2 = function(e2) {
              const t3 = this, s2 = e2.items;
              for (let e3 = 0; e3 < s2.length; e3++) s2[e3].tooltip && (s2[e3].title = s2[e3].tooltip, delete s2[e3].tooltip), "select" == s2[e3].type ? s2[e3].options ? (s2[e3].data = s2[e3].options, delete s2[e3].options) : (s2[e3].data = s2[e3].v, delete s2[e3].v, s2[e3].k && !s2[e3].onchange && (s2[e3].onchange = function(n2, r2, l2) {
                const i3 = o.eN.call(t3), a2 = i3.getSelected(true);
                i3.setStyle(Object.fromEntries(a2.map((function(t4) {
                  return [t4, s2[e3].k + ": " + l2];
                }))));
              })) : "color" == s2[e3].type && (s2[e3].type = "i", s2[e3].onclick = function(n2, r2, l2) {
                l2.color || (jSuites.color(l2, { onchange: function(n3, r3) {
                  const l3 = o.eN.call(t3), i3 = l3.getSelected(true);
                  l3.setStyle(Object.fromEntries(i3.map((function(t4) {
                    return [t4, s2[e3].k + ": " + r3];
                  }))));
                }, onopen: function(e4) {
                  e4.color.select("");
                } }), l2.color.open());
              });
            }, a = function(e2) {
              const t3 = this, s2 = document.createElement("div");
              return s2.classList.add("jss_toolbar"), i2.call(t3, e2), "object" == typeof t3.plugins && Object.entries(t3.plugins).forEach((function([, t4]) {
                if ("function" == typeof t4.toolbar) {
                  const s3 = t4.toolbar(e2);
                  s3 && (e2 = s3);
                }
              })), jSuites.toolbar(s2, e2), s2;
            }, c = function(e2) {
              e2.parent.toolbar && e2.parent.toolbar.toolbar.update(e2);
            }, d = function() {
              const e2 = this;
              if (e2.config.toolbar && !e2.toolbar) {
                let t3;
                Array.isArray(e2.config.toolbar) ? t3 = { items: e2.config.toolbar } : "object" == typeof e2.config.toolbar ? t3 = e2.config.toolbar : (t3 = { items: l.call(e2) }, "function" == typeof e2.config.toolbar && (t3 = e2.config.toolbar(t3))), e2.toolbar = e2.element.insertBefore(a.call(e2, t3), e2.element.children[1]);
              }
            }, u = function() {
              const e2 = this;
              e2.toolbar && (e2.toolbar.parentNode.removeChild(e2.toolbar), delete e2.toolbar);
            };
          } }, __webpack_module_cache__ = {};
          function __webpack_require__(e) {
            var t2 = __webpack_module_cache__[e];
            if (void 0 !== t2) return t2.exports;
            var s = __webpack_module_cache__[e] = { exports: {} };
            return __webpack_modules__[e](s, s.exports, __webpack_require__), s.exports;
          }
          __webpack_require__.d = function(e, t2) {
            for (var s in t2) __webpack_require__.o(t2, s) && !__webpack_require__.o(e, s) && Object.defineProperty(e, s, { enumerable: true, get: t2[s] });
          }, __webpack_require__.o = function(e, t2) {
            return Object.prototype.hasOwnProperty.call(e, t2);
          }, __webpack_require__.r = function(e) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: true });
          };
          var __webpack_exports__ = {};
          __webpack_require__.d(__webpack_exports__, { default: function() {
            return src;
          } });
          const lib = { jspreadsheet: {} };
          var libraryBase = lib, dispatch = __webpack_require__(805), internal = __webpack_require__(530), utils_history = __webpack_require__(911);
          const openEditor = function(e, t2, s) {
            const n = this, o = e.getAttribute("data-y"), r = e.getAttribute("data-x");
            dispatch.A.call(n, "oneditionstart", n, e, parseInt(r), parseInt(o)), r > 0 && (n.records[o][r - 1].element.style.overflow = "hidden");
            const l = function(t3) {
              const s2 = e.getBoundingClientRect(), n2 = document.createElement(t3);
              return n2.style.width = s2.width + "px", n2.style.height = s2.height - 2 + "px", n2.style.minHeight = s2.height - 2 + "px", e.classList.add("editor"), e.innerHTML = "", e.appendChild(n2), n2;
            };
            if (1 == e.classList.contains("readonly")) ;
            else if (n.edition = [n.records[o][r].element, n.records[o][r].element.innerHTML, r, o], n.options.columns && n.options.columns[r] && "object" == typeof n.options.columns[r].type) n.options.columns[r].type.openEditor(e, n.options.data[o][r], parseInt(r), parseInt(o), n, n.options.columns[r], s), dispatch.A.call(n, "oncreateeditor", n, e, parseInt(r), parseInt(o), null, n.options.columns[r]);
            else if (n.options.columns && n.options.columns[r] && "hidden" == n.options.columns[r].type) ;
            else if (n.options.columns && n.options.columns[r] && ("checkbox" == n.options.columns[r].type || "radio" == n.options.columns[r].type)) {
              const t3 = !e.children[0].checked;
              n.setValue(e, t3), n.edition = null;
            } else if (n.options.columns && n.options.columns[r] && "dropdown" == n.options.columns[r].type) {
              let t3, s2 = n.options.data[o][r];
              n.options.columns[r].multiple && !Array.isArray(s2) && (s2 = s2.split(";")), t3 = "function" == typeof n.options.columns[r].filter ? n.options.columns[r].filter(n.element, e, r, o, n.options.columns[r].source) : n.options.columns[r].source;
              const i2 = [];
              if (t3) for (let e2 = 0; e2 < t3.length; e2++) i2.push(t3[e2]);
              const a = l("div");
              dispatch.A.call(n, "oncreateeditor", n, e, parseInt(r), parseInt(o), null, n.options.columns[r]);
              const c = { data: i2, multiple: !!n.options.columns[r].multiple, autocomplete: !!n.options.columns[r].autocomplete, opened: true, value: s2, width: "100%", height: a.style.minHeight, position: 1 == n.options.tableOverflow || 1 == n.parent.config.fullscreen, onclose: function() {
                closeEditor.call(n, e, true);
              } };
              n.options.columns[r].options && n.options.columns[r].options.type && (c.type = n.options.columns[r].options.type), jSuites.dropdown(a, c);
            } else if (n.options.columns && n.options.columns[r] && ("calendar" == n.options.columns[r].type || "color" == n.options.columns[r].type)) {
              const t3 = n.options.data[o][r], s2 = l("input");
              dispatch.A.call(n, "oncreateeditor", n, e, parseInt(r), parseInt(o), null, n.options.columns[r]), s2.value = t3;
              const i2 = n.options.columns[r].options ? { ...n.options.columns[r].options } : {};
              if (1 != n.options.tableOverflow && 1 != n.parent.config.fullscreen || (i2.position = true), i2.value = n.options.data[o][r], i2.opened = true, i2.onclose = function(t4, s3) {
                closeEditor.call(n, e, true);
              }, "color" == n.options.columns[r].type) {
                jSuites.color(s2, i2);
                const t4 = e.getBoundingClientRect();
                i2.position && (s2.nextSibling.children[1].style.top = t4.top + t4.height + "px", s2.nextSibling.children[1].style.left = t4.left + "px");
              } else i2.format || (i2.format = "YYYY-MM-DD"), jSuites.calendar(s2, i2);
              s2.focus();
            } else if (n.options.columns && n.options.columns[r] && "html" == n.options.columns[r].type) {
              const t3 = n.options.data[o][r], s2 = l("div");
              dispatch.A.call(n, "oncreateeditor", n, e, parseInt(r), parseInt(o), null, n.options.columns[r]), s2.style.position = "relative";
              const i2 = document.createElement("div");
              i2.classList.add("jss_richtext"), s2.appendChild(i2), jSuites.editor(i2, { focus: true, value: t3 });
              const a = e.getBoundingClientRect(), c = i2.getBoundingClientRect();
              window.innerHeight < a.bottom + c.height ? i2.style.top = a.bottom - (c.height + 2) + "px" : i2.style.top = a.top + "px", window.innerWidth < a.left + c.width ? i2.style.left = a.right - (c.width + 2) + "px" : i2.style.left = a.left + "px";
            } else if (n.options.columns && n.options.columns[r] && "image" == n.options.columns[r].type) {
              const t3 = e.children[0], s2 = l("div");
              dispatch.A.call(n, "oncreateeditor", n, e, parseInt(r), parseInt(o), null, n.options.columns[r]), s2.style.position = "relative";
              const i2 = document.createElement("div");
              i2.classList.add("jclose"), t3 && t3.src && i2.appendChild(t3), s2.appendChild(i2), jSuites.image(i2, n.options.columns[r]);
              const a = e.getBoundingClientRect(), c = i2.getBoundingClientRect();
              window.innerHeight < a.bottom + c.height ? i2.style.top = a.top - (c.height + 2) + "px" : i2.style.top = a.top + "px", i2.style.left = a.left + "px";
            } else {
              const s2 = 1 == t2 ? "" : n.options.data[o][r];
              let i2;
              i2 = n.options.columns && n.options.columns[r] && 0 == n.options.columns[r].wordWrap || !(1 == n.options.wordWrap || n.options.columns && n.options.columns[r] && 1 == n.options.columns[r].wordWrap) ? l("input") : l("textarea"), dispatch.A.call(n, "oncreateeditor", n, e, parseInt(r), parseInt(o), null, n.options.columns[r]), i2.focus(), i2.value = s2;
              const a = n.options.columns && n.options.columns[r];
              if (!(0, internal.dw)(s2) && a) {
                const e2 = (0, internal.rS)(a);
                if (e2) {
                  if (!a.disabledMaskOnEdition) if (a.mask) {
                    const e3 = a.mask.split(";");
                    i2.setAttribute("data-mask", e3[0]);
                  } else a.locale && i2.setAttribute("data-locale", a.locale);
                  e2.input = i2, i2.mask = e2, jSuites.mask.render(s2, e2, false);
                }
              }
              i2.onblur = function() {
                closeEditor.call(n, e, true);
              }, i2.scrollLeft = i2.scrollWidth;
            }
          }, closeEditor = function(e, t2) {
            const s = this, n = parseInt(e.getAttribute("data-x")), o = parseInt(e.getAttribute("data-y"));
            let r;
            if (1 == t2) {
              if (s.options.columns && s.options.columns[n] && "object" == typeof s.options.columns[n].type) r = s.options.columns[n].type.closeEditor(e, t2, parseInt(n), parseInt(o), s, s.options.columns[n]);
              else if (s.options.columns && s.options.columns[n] && ("checkbox" == s.options.columns[n].type || "radio" == s.options.columns[n].type || "hidden" == s.options.columns[n].type)) ;
              else if (s.options.columns && s.options.columns[n] && "dropdown" == s.options.columns[n].type) r = e.children[0].dropdown.close(true);
              else if (s.options.columns && s.options.columns[n] && "calendar" == s.options.columns[n].type) r = e.children[0].calendar.close(true);
              else if (s.options.columns && s.options.columns[n] && "color" == s.options.columns[n].type) r = e.children[0].color.close(true);
              else if (s.options.columns && s.options.columns[n] && "html" == s.options.columns[n].type) r = e.children[0].children[0].editor.getData();
              else if (s.options.columns && s.options.columns[n] && "image" == s.options.columns[n].type) {
                const t3 = e.children[0].children[0].children[0];
                r = t3 && "IMG" == t3.tagName ? t3.src : "";
              } else if (s.options.columns && s.options.columns[n] && "numeric" == s.options.columns[n].type) r = e.children[0].value, "=" != ("" + r).substr(0, 1) && "" == r && (r = s.options.columns[n].allowEmpty ? "" : 0), e.children[0].onblur = null;
              else {
                r = e.children[0].value, e.children[0].onblur = null;
                const t3 = s.options.columns && s.options.columns[n];
                if (t3) {
                  const e2 = (0, internal.rS)(t3);
                  if (e2 && "" !== r && !(0, internal.dw)(r) && "number" != typeof r) {
                    const t4 = jSuites.mask.extract(r, e2, true);
                    t4 && "" !== t4.value && (r = t4.value);
                  }
                }
              }
              s.options.data[o][n] == r ? e.innerHTML = s.edition[1] : s.setValue(e, r);
            } else s.options.columns && s.options.columns[n] && "object" == typeof s.options.columns[n].type ? s.options.columns[n].type.closeEditor(e, t2, parseInt(n), parseInt(o), s, s.options.columns[n]) : s.options.columns && s.options.columns[n] && "dropdown" == s.options.columns[n].type ? e.children[0].dropdown.close(true) : s.options.columns && s.options.columns[n] && "calendar" == s.options.columns[n].type ? e.children[0].calendar.close(true) : s.options.columns && s.options.columns[n] && "color" == s.options.columns[n].type ? e.children[0].color.close(true) : e.children[0].onblur = null, e.innerHTML = s.edition && s.edition[1] ? s.edition[1] : "";
            dispatch.A.call(s, "oneditionend", s, e, n, o, r, t2), e.classList.remove("editor"), s.edition = null;
          }, setCheckRadioValue = function() {
            const e = this, t2 = [], s = Object.keys(e.highlighted);
            for (let n = 0; n < s.length; n++) {
              const s2 = e.highlighted[n].element.getAttribute("data-x"), o = e.highlighted[n].element.getAttribute("data-y");
              "checkbox" != e.options.columns[s2].type && "radio" != e.options.columns[s2].type || t2.push(internal.k9.call(e, s2, o, !e.options.data[o][s2]));
            }
            if (t2.length) {
              utils_history.Dh.call(e, { action: "setValue", records: t2, selection: e.selectedCell });
              const s2 = t2.map((function(e2) {
                return { x: e2.x, y: e2.y, value: e2.value, oldValue: e2.oldValue };
              }));
              dispatch.A.call(e, "onafterchanges", e, s2);
            }
          };
          var lazyLoading = __webpack_require__(497);
          const upGet = function(e, t2) {
            const s = this;
            e = parseInt(e);
            for (let n = (t2 = parseInt(t2)) - 1; n >= 0; n--) if ("none" != s.records[n][e].element.style.display && "none" != s.rows[n].element.style.display) {
              if (s.records[n][e].element.getAttribute("data-merged") && s.records[n][e].element == s.records[t2][e].element) continue;
              t2 = n;
              break;
            }
            return t2;
          }, upVisible = function(e, t2) {
            const s = this;
            let n, o;
            if (0 == e ? (n = parseInt(s.selectedCell[0]), o = parseInt(s.selectedCell[1])) : (n = parseInt(s.selectedCell[2]), o = parseInt(s.selectedCell[3])), 0 == t2) {
              for (let e2 = 0; e2 < o; e2++) if ("none" != s.records[e2][n].element.style.display && "none" != s.rows[e2].element.style.display) {
                o = e2;
                break;
              }
            } else o = upGet.call(s, n, o);
            0 == e ? (s.selectedCell[0] = n, s.selectedCell[1] = o) : (s.selectedCell[2] = n, s.selectedCell[3] = o);
          }, up = function(e, t2) {
            const s = this;
            if (e ? s.selectedCell[3] > 0 && upVisible.call(s, 1, t2 ? 0 : 1) : (s.selectedCell[1] > 0 && upVisible.call(s, 0, t2 ? 0 : 1), s.selectedCell[2] = s.selectedCell[0], s.selectedCell[3] = s.selectedCell[1]), s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]), 1 == s.options.lazyLoading) if (0 == s.selectedCell[1] || 0 == s.selectedCell[3]) lazyLoading.wu.call(s, 0), s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]);
            else if (lazyLoading.AG.call(s)) s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]);
            else {
              const e2 = parseInt(s.tbody.firstChild.getAttribute("data-y"));
              s.selectedCell[1] - e2 < 30 && (lazyLoading.G_.call(s), s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]));
            }
            else if (s.options.pagination > 0) {
              const e2 = s.whichPage(s.selectedCell[3]);
              e2 != s.pageNumber && s.page(e2);
            }
            internal.Rs.call(s, 1);
          }, rightGet = function(e, t2) {
            const s = this;
            e = parseInt(e), t2 = parseInt(t2);
            for (let n = e + 1; n < s.headers.length; n++) if ("none" != s.records[t2][n].element.style.display) {
              if (s.records[t2][n].element.getAttribute("data-merged") && s.records[t2][n].element == s.records[t2][e].element) continue;
              e = n;
              break;
            }
            return e;
          }, rightVisible = function(e, t2) {
            const s = this;
            let n, o;
            if (0 == e ? (n = parseInt(s.selectedCell[0]), o = parseInt(s.selectedCell[1])) : (n = parseInt(s.selectedCell[2]), o = parseInt(s.selectedCell[3])), 0 == t2) {
              for (let e2 = s.headers.length - 1; e2 > n; e2--) if ("none" != s.records[o][e2].element.style.display) {
                n = e2;
                break;
              }
            } else n = rightGet.call(s, n, o);
            0 == e ? (s.selectedCell[0] = n, s.selectedCell[1] = o) : (s.selectedCell[2] = n, s.selectedCell[3] = o);
          }, right = function(e, t2) {
            const s = this;
            e ? s.selectedCell[2] < s.headers.length - 1 && rightVisible.call(s, 1, t2 ? 0 : 1) : (s.selectedCell[0] < s.headers.length - 1 && rightVisible.call(s, 0, t2 ? 0 : 1), s.selectedCell[2] = s.selectedCell[0], s.selectedCell[3] = s.selectedCell[1]), s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]), internal.Rs.call(s, 2);
          }, downGet = function(e, t2) {
            const s = this;
            e = parseInt(e);
            for (let n = (t2 = parseInt(t2)) + 1; n < s.rows.length; n++) if ("none" != s.records[n][e].element.style.display && "none" != s.rows[n].element.style.display) {
              if (s.records[n][e].element.getAttribute("data-merged") && s.records[n][e].element == s.records[t2][e].element) continue;
              t2 = n;
              break;
            }
            return t2;
          }, downVisible = function(e, t2) {
            const s = this;
            let n, o;
            if (0 == e ? (n = parseInt(s.selectedCell[0]), o = parseInt(s.selectedCell[1])) : (n = parseInt(s.selectedCell[2]), o = parseInt(s.selectedCell[3])), 0 == t2) {
              for (let e2 = s.rows.length - 1; e2 > o; e2--) if ("none" != s.records[e2][n].element.style.display && "none" != s.rows[e2].element.style.display) {
                o = e2;
                break;
              }
            } else o = downGet.call(s, n, o);
            0 == e ? (s.selectedCell[0] = n, s.selectedCell[1] = o) : (s.selectedCell[2] = n, s.selectedCell[3] = o);
          }, down = function(e, t2) {
            const s = this;
            if (e ? s.selectedCell[3] < s.records.length - 1 && downVisible.call(s, 1, t2 ? 0 : 1) : (s.selectedCell[1] < s.records.length - 1 && downVisible.call(s, 0, t2 ? 0 : 1), s.selectedCell[2] = s.selectedCell[0], s.selectedCell[3] = s.selectedCell[1]), s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]), 1 == s.options.lazyLoading) s.selectedCell[1] == s.records.length - 1 || s.selectedCell[3] == s.records.length - 1 ? (lazyLoading.wu.call(s, -1), s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3])) : lazyLoading.AG.call(s) ? s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]) : parseInt(s.tbody.lastChild.getAttribute("data-y")) - s.selectedCell[3] < 30 && (lazyLoading.p6.call(s), s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]));
            else if (s.options.pagination > 0) {
              const e2 = s.whichPage(s.selectedCell[3]);
              e2 != s.pageNumber && s.page(e2);
            }
            internal.Rs.call(s, 3);
          }, leftGet = function(e, t2) {
            const s = this;
            e = parseInt(e), t2 = parseInt(t2);
            for (let n = e - 1; n >= 0; n--) if ("none" != s.records[t2][n].element.style.display) {
              if (s.records[t2][n].element.getAttribute("data-merged") && s.records[t2][n].element == s.records[t2][e].element) continue;
              e = n;
              break;
            }
            return e;
          }, leftVisible = function(e, t2) {
            const s = this;
            let n, o;
            if (0 == e ? (n = parseInt(s.selectedCell[0]), o = parseInt(s.selectedCell[1])) : (n = parseInt(s.selectedCell[2]), o = parseInt(s.selectedCell[3])), 0 == t2) {
              for (let e2 = 0; e2 < n; e2++) if ("none" != s.records[o][e2].element.style.display) {
                n = e2;
                break;
              }
            } else n = leftGet.call(s, n, o);
            0 == e ? (s.selectedCell[0] = n, s.selectedCell[1] = o) : (s.selectedCell[2] = n, s.selectedCell[3] = o);
          }, left = function(e, t2) {
            const s = this;
            e ? s.selectedCell[2] > 0 && leftVisible.call(s, 1, t2 ? 0 : 1) : (s.selectedCell[0] > 0 && leftVisible.call(s, 0, t2 ? 0 : 1), s.selectedCell[2] = s.selectedCell[0], s.selectedCell[3] = s.selectedCell[1]), s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]), internal.Rs.call(s, 0);
          }, first = function(e, t2) {
            const s = this;
            if (e ? t2 ? s.selectedCell[3] = 0 : leftVisible.call(s, 1, 0) : (t2 ? s.selectedCell[1] = 0 : leftVisible.call(s, 0, 0), s.selectedCell[2] = s.selectedCell[0], s.selectedCell[3] = s.selectedCell[1]), 1 != s.options.lazyLoading || 0 != s.selectedCell[1] && 0 != s.selectedCell[3]) {
              if (s.options.pagination > 0) {
                const e2 = s.whichPage(s.selectedCell[3]);
                e2 != s.pageNumber && s.page(e2);
              }
            } else lazyLoading.wu.call(s, 0);
            s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]), internal.Rs.call(s, 1);
          }, last = function(e, t2) {
            const s = this;
            if (e ? t2 ? s.selectedCell[3] = s.records.length - 1 : rightVisible.call(s, 1, 0) : (t2 ? s.selectedCell[1] = s.records.length - 1 : rightVisible.call(s, 0, 0), s.selectedCell[2] = s.selectedCell[0], s.selectedCell[3] = s.selectedCell[1]), 1 != s.options.lazyLoading || s.selectedCell[1] != s.records.length - 1 && s.selectedCell[3] != s.records.length - 1) {
              if (s.options.pagination > 0) {
                const e2 = s.whichPage(s.selectedCell[3]);
                e2 != s.pageNumber && s.page(e2);
              }
            } else lazyLoading.wu.call(s, -1);
            s.updateSelectionFromCoords(s.selectedCell[0], s.selectedCell[1], s.selectedCell[2], s.selectedCell[3]), internal.Rs.call(s, 3);
          };
          var merges = __webpack_require__(910), selection = __webpack_require__(657), helpers = __webpack_require__(978), internalHelpers = __webpack_require__(689);
          const copy = function(e, t2, s, n, o, r, l) {
            const i2 = this;
            t2 || (t2 = "	");
            const a = new RegExp(t2, "ig"), c = [];
            let d = [], u = [];
            const p = [], h = [], m = i2.options.data[0].length, f = i2.options.data.length;
            let g = "", y2 = false, b = "", C = "", j = 0, w = 0, _ = 0, B = 0, v = true;
            for (let t3 = 0; t3 < f; t3++) for (let s2 = 0; s2 < m; s2++) e && !i2.records[t3][s2].element.classList.contains("highlight") || (_ <= s2 && (_ = s2), B <= t3 && (B = t3));
            if (m === _ + 1 && f === B + 1 && false, o && (1 == i2.parent.config.includeHeadersOnDownload || n)) {
              if (i2.options.nestedHeaders && i2.options.nestedHeaders.length > 0) {
                g = i2.options.nestedHeaders;
                for (let e2 = 0; e2 < g.length; e2++) {
                  const s2 = [];
                  for (let t3 = 0; t3 < g[e2].length; t3++) {
                    const n2 = parseInt(g[e2][t3].colspan);
                    s2.push(g[e2][t3].title);
                    for (let e3 = 0; e3 < n2 - 1; e3++) s2.push("");
                  }
                  C += s2.join(t2) + "\r\n";
                }
              }
              y2 = true;
            }
            i2.style = [];
            for (let s2 = 0; s2 < f; s2++) {
              d = [], u = [];
              for (let t3 = 0; t3 < m; t3++) if (!e || i2.records[s2][t3].element.classList.contains("highlight")) {
                1 == y2 && c.push(i2.headers[t3].textContent);
                let e2, n2 = i2.options.data[s2][t3];
                n2.match && (n2.match(a) || n2.match(/,/g) || n2.match(/\n/) || n2.match(/\"/)) && (n2 = n2.replace(new RegExp('"', "g"), '""'), n2 = '"' + n2 + '"'), d.push(n2), i2.options.columns && i2.options.columns[t3] && ("checkbox" == i2.options.columns[t3].type || "radio" == i2.options.columns[t3].type) ? e2 = n2 : (e2 = i2.records[s2][t3].element.innerHTML, e2.match && (e2.match(a) || e2.match(/,/g) || e2.match(/\n/) || e2.match(/\"/)) && (e2 = e2.replace(new RegExp('"', "g"), '""'), e2 = '"' + e2 + '"')), u.push(e2), g = i2.records[s2][t3].element.getAttribute("style"), g = g.replace("display: none;", ""), i2.style.push(g || "");
              }
              d.length && (y2 && (j = d.length, p.push(c.join(t2))), p.push(d.join(t2))), u.length && (w++, y2 && (h.push(c.join(t2)), y2 = false), h.push(u.join(t2)));
            }
            m == j && f == w && (b = C);
            const A = b + p.join("\r\n");
            let x2 = b + h.join("\r\n");
            if (!s) {
              const e2 = [Math.min(i2.selectedCell[0], i2.selectedCell[2]), Math.min(i2.selectedCell[1], i2.selectedCell[3]), Math.max(i2.selectedCell[0], i2.selectedCell[2]), Math.max(i2.selectedCell[1], i2.selectedCell[3])], t3 = dispatch.A.call(i2, "oncopy", i2, e2, x2, r);
              if (t3) x2 = t3;
              else if (false === t3) return false;
              i2.textarea.value = x2, i2.textarea.select(), document.execCommand("copy");
            }
            if (i2.data = 1 == l ? x2 : A, i2.hashString = selection.tW.call(i2, i2.data), !s && (selection.kA.call(i2), i2.highlighted)) for (let e2 = 0; e2 < i2.highlighted.length; e2++) i2.highlighted[e2].element.classList.add("copying"), i2.highlighted[e2].element.classList.contains("highlight-left") && i2.highlighted[e2].element.classList.add("copying-left"), i2.highlighted[e2].element.classList.contains("highlight-right") && i2.highlighted[e2].element.classList.add("copying-right"), i2.highlighted[e2].element.classList.contains("highlight-top") && i2.highlighted[e2].element.classList.add("copying-top"), i2.highlighted[e2].element.classList.contains("highlight-bottom") && i2.highlighted[e2].element.classList.add("copying-bottom");
            return i2.data;
          }, paste = function(e, t2, s) {
            const n = this, o = (0, selection.tW)(s);
            let r = o == n.hashString ? n.style : null;
            o == n.hashString && (s = n.data), s = (0, helpers.parseCSV)(s, "	");
            const l = n.selectedCell[2] - e + 1, i2 = n.selectedCell[3] - t2 + 1, a = s[0].length;
            if (l > 1 & Number.isInteger(l / a)) {
              const e2 = l / a;
              if (r) {
                const t4 = [];
                for (let s2 = 0; s2 < r.length; s2 += a) {
                  const n2 = r.slice(s2, s2 + a);
                  for (let s3 = 0; s3 < e2; s3++) t4.push(...n2);
                }
                r = t4;
              }
              const t3 = s.map((function(t4, s2) {
                const n2 = Array.apply(null, { length: e2 * t4.length }).map((function(e3, s3) {
                  return t4[s3 % t4.length];
                }));
                return n2;
              }));
              s = t3;
            }
            const c = s.length;
            if (i2 > 1 & Number.isInteger(i2 / c)) {
              const e2 = i2 / c;
              if (r) {
                const t4 = [];
                for (let s2 = 0; s2 < e2; s2++) t4.push(...r);
                r = t4;
              }
              const t3 = Array.apply(null, { length: e2 * c }).map((function(e3, t4) {
                return s[t4 % c];
              }));
              s = t3;
            }
            const d = dispatch.A.call(n, "onbeforepaste", n, s.map((function(e2) {
              return e2.map((function(e3) {
                return { value: e3 };
              }));
            })), e, t2);
            if (false === d) return false;
            if (d && (s = d), null != e && null != t2 && s) {
              let o2 = 0, l2 = 0;
              const i3 = [], a2 = {}, c2 = {};
              let d2 = 0, u = parseInt(e), p = parseInt(t2), h = null;
              const m = n.headers.slice(u).filter(((e2) => "none" === e2.style.display)).length, f = u + m + s[0].length, g = n.headers.length;
              f > g && (n.skipUpdateTableReferences = true, n.insertColumn(f - g));
              const y2 = n.rows.slice(p).filter(((e2) => "none" === e2.element.style.display)).length, b = p + y2 + s.length, C = n.rows.length;
              for (b > C && (n.skipUpdateTableReferences = true, n.insertRow(b - C)), n.skipUpdateTableReferences && (n.skipUpdateTableReferences = false, internal.o8.call(n)); h = s[l2]; ) {
                for (o2 = 0, u = parseInt(e); null != h[o2]; ) {
                  let e2 = h[o2];
                  n.options.columns && n.options.columns[o2] && "calendar" == n.options.columns[o2].type && (e2 = jSuites.calendar.extractDateFromString(e2, n.options.columns[o2].options && n.options.columns[o2].options.format || "YYYY-MM-DD"));
                  const t3 = internal.k9.call(n, u, p, e2);
                  if (i3.push(t3), internal.xF.call(n, u, p, i3), r && r[d2]) {
                    const e3 = (0, internalHelpers.t3)([u, p]);
                    a2[e3] = r[d2], c2[e3] = n.getStyle(e3), n.records[p][u].element.setAttribute("style", r[d2]), d2++;
                  }
                  if (o2++, null != h[o2]) {
                    if (u >= n.headers.length - 1) {
                      if (0 == n.options.allowInsertColumn) break;
                      n.insertColumn();
                    }
                    u = rightGet.call(n, u, p);
                  }
                }
                if (l2++, s[l2]) {
                  if (p >= n.rows.length - 1) {
                    if (0 == n.options.allowInsertRow) break;
                    n.insertRow();
                  }
                  p = downGet.call(n, e, p);
                }
              }
              selection.AH.call(n, e, t2, u, p), utils_history.Dh.call(n, { action: "setValue", records: i3, selection: n.selectedCell, newStyle: a2, oldStyle: c2 }), internal.am.call(n);
              const j = [];
              for (let n2 = 0; n2 < s.length; n2++) for (let o3 = 0; o3 < s[n2].length; o3++) j.push({ x: o3 + e, y: n2 + t2, value: s[n2][o3] });
              dispatch.A.call(n, "onpaste", n, j);
              const w = i3.map((function(e2) {
                return { x: e2.x, y: e2.y, value: e2.value, oldValue: e2.oldValue };
              }));
              dispatch.A.call(n, "onafterchanges", n, w);
            }
            (0, selection.kA)();
          };
          var filter = __webpack_require__(829), footer = __webpack_require__(160);
          const getNumberOfColumns = function() {
            const e = this;
            let t2 = e.options.columns && e.options.columns.length || 0;
            if (e.options.data && void 0 !== e.options.data[0]) {
              const s = Object.keys(e.options.data[0]);
              s.length > t2 && (t2 = s.length);
            }
            return e.options.minDimensions && e.options.minDimensions[0] > t2 && (t2 = e.options.minDimensions[0]), t2;
          }, createCellHeader = function(e) {
            const t2 = this, s = t2.options.columns && t2.options.columns[e] && t2.options.columns[e].width || t2.options.defaultColWidth || 100, n = t2.options.columns && t2.options.columns[e] && t2.options.columns[e].align || t2.options.defaultColAlign || "center";
            t2.headers[e] = document.createElement("td"), t2.headers[e].textContent = t2.options.columns && t2.options.columns[e] && t2.options.columns[e].title || (0, helpers.getColumnName)(e), t2.headers[e].setAttribute("data-x", e), t2.headers[e].style.textAlign = n, t2.options.columns && t2.options.columns[e] && t2.options.columns[e].title && t2.headers[e].setAttribute("title", t2.headers[e].innerText), t2.options.columns && t2.options.columns[e] && t2.options.columns[e].id && t2.headers[e].setAttribute("id", t2.options.columns[e].id);
            const o = document.createElement("col");
            o.setAttribute("width", s), t2.cols[e] = { colElement: o, x: e }, t2.options.columns && t2.options.columns[e] && "hidden" == t2.options.columns[e].type && (t2.headers[e].style.display = "none", o.style.display = "none");
          }, insertColumn = function(e, t2, s, n) {
            const o = this;
            if (0 != o.options.allowInsertColumn) {
              let r, l = [];
              Array.isArray(e) ? (r = 1, e && (l = e)) : r = "number" == typeof e ? e : 1, s = !!s;
              const i2 = Math.max(o.options.columns.length, ...o.options.data.map((function(e2) {
                return e2.length;
              }))) - 1;
              (null == t2 || t2 >= parseInt(i2) || t2 < 0) && (t2 = i2), n || (n = []);
              for (let e2 = 0; e2 < r; e2++) n[e2] || (n[e2] = {});
              const a = [];
              if (Array.isArray(e)) {
                const r2 = [];
                for (let t3 = 0; t3 < o.options.data.length; t3++) r2.push(t3 < e.length ? e[t3] : "");
                const l2 = { column: t2 + (s ? 0 : 1), options: Object.assign({}, n[0]), data: r2 };
                a.push(l2);
              } else for (let o2 = 0; o2 < e; o2++) {
                const e2 = { column: t2 + o2 + (s ? 0 : 1), options: Object.assign({}, n[o2]) };
                a.push(e2);
              }
              if (false === dispatch.A.call(o, "onbeforeinsertcolumn", o, a)) return false;
              if (o.options.mergeCells && Object.keys(o.options.mergeCells).length > 0 && merges.Lt.call(o, t2, s).length) {
                if (!confirm(jSuites.translate("This action will destroy any existing merged cells. Are you sure?"))) return false;
                o.destroyMerge();
              }
              const c = s ? t2 : t2 + 1;
              o.options.columns = (0, internalHelpers.Hh)(o.options.columns, c, n);
              const d = o.headers.splice(c), u = o.cols.splice(c), p = [], h = [], m = [], f = [], g = [];
              for (let e2 = c; e2 < r + c; e2++) createCellHeader.call(o, e2), o.headerContainer.insertBefore(o.headers[e2], o.headerContainer.children[e2 + 1]), o.colgroupContainer.insertBefore(o.cols[e2].colElement, o.colgroupContainer.children[e2 + 1]), p.push(o.headers[e2]), h.push(o.cols[e2]);
              if (o.options.footers) for (let e2 = 0; e2 < o.options.footers.length; e2++) {
                g[e2] = [];
                for (let t3 = 0; t3 < r; t3++) g[e2].push("");
                o.options.footers[e2].splice(c, 0, g[e2]);
              }
              for (let e2 = 0; e2 < o.options.data.length; e2++) {
                const t3 = o.options.data[e2].splice(c), s2 = o.records[e2].splice(c);
                f[e2] = [], m[e2] = [];
                for (let t4 = c; t4 < r + c; t4++) {
                  const s3 = l[e2] ? l[e2] : "";
                  o.options.data[e2][t4] = s3;
                  const n2 = internal.P9.call(o, t4, e2, o.options.data[e2][t4]);
                  o.records[e2][t4] = { element: n2, y: e2 }, o.rows[e2] && o.rows[e2].element.insertBefore(n2, o.rows[e2].element.children[t4 + 1]), o.options.columns && o.options.columns[t4] && "function" == typeof o.options.columns[t4].render && o.options.columns[t4].render(n2, s3, parseInt(t4), parseInt(e2), o, o.options.columns[t4]), f[e2].push(s3), m[e2].push({ element: n2, x: t4, y: e2 });
                }
                Array.prototype.push.apply(o.options.data[e2], t3), Array.prototype.push.apply(o.records[e2], s2);
              }
              Array.prototype.push.apply(o.headers, d), Array.prototype.push.apply(o.cols, u);
              for (let e2 = c; e2 < o.cols.length; e2++) o.cols[e2].x = e2;
              for (let e2 = 0; e2 < o.records.length; e2++) for (let t3 = 0; t3 < o.records[e2].length; t3++) o.records[e2][t3].x = t3;
              if (o.options.nestedHeaders && o.options.nestedHeaders.length > 0 && o.options.nestedHeaders[0] && o.options.nestedHeaders[0][0]) for (let e2 = 0; e2 < o.options.nestedHeaders.length; e2++) {
                const t3 = parseInt(o.options.nestedHeaders[e2][o.options.nestedHeaders[e2].length - 1].colspan) + r;
                o.options.nestedHeaders[e2][o.options.nestedHeaders[e2].length - 1].colspan = t3, o.thead.children[e2].children[o.thead.children[e2].children.length - 1].setAttribute("colspan", t3);
                let s2 = o.thead.children[e2].children[o.thead.children[e2].children.length - 1].getAttribute("data-column");
                s2 = s2.split(",");
                for (let e3 = c; e3 < r + c; e3++) s2.push(e3);
                o.thead.children[e2].children[o.thead.children[e2].children.length - 1].setAttribute("data-column", s2);
              }
              utils_history.Dh.call(o, { action: "insertColumn", columnNumber: t2, numOfColumns: r, insertBefore: s, columns: n, headers: p, cols: h, records: m, footers: g, data: f }), internal.o8.call(o), dispatch.A.call(o, "oninsertcolumn", o, a);
            }
          }, moveColumn = function(e, t2) {
            const s = this;
            if (s.options.mergeCells && Object.keys(s.options.mergeCells).length > 0) {
              let n2;
              if (n2 = e > t2 ? 1 : 0, merges.Lt.call(s, e).length || merges.Lt.call(s, t2, n2).length) {
                if (!confirm(jSuites.translate("This action will destroy any existing merged cells. Are you sure?"))) return false;
                s.destroyMerge();
              }
            }
            if ((e = parseInt(e)) > (t2 = parseInt(t2))) {
              s.headerContainer.insertBefore(s.headers[e], s.headers[t2]), s.colgroupContainer.insertBefore(s.cols[e].colElement, s.cols[t2].colElement);
              for (let n2 = 0; n2 < s.rows.length; n2++) s.rows[n2].element.insertBefore(s.records[n2][e].element, s.records[n2][t2].element);
            } else {
              s.headerContainer.insertBefore(s.headers[e], s.headers[t2].nextSibling), s.colgroupContainer.insertBefore(s.cols[e].colElement, s.cols[t2].colElement.nextSibling);
              for (let n2 = 0; n2 < s.rows.length; n2++) s.rows[n2].element.insertBefore(s.records[n2][e].element, s.records[n2][t2].element.nextSibling);
            }
            s.options.columns.splice(t2, 0, s.options.columns.splice(e, 1)[0]), s.headers.splice(t2, 0, s.headers.splice(e, 1)[0]), s.cols.splice(t2, 0, s.cols.splice(e, 1)[0]);
            const n = Math.min(e, t2), o = Math.max(e, t2);
            for (let n2 = 0; n2 < s.rows.length; n2++) s.options.data[n2].splice(t2, 0, s.options.data[n2].splice(e, 1)[0]), s.records[n2].splice(t2, 0, s.records[n2].splice(e, 1)[0]);
            for (let e2 = n; e2 <= o; e2++) s.cols[e2].x = e2;
            for (let e2 = 0; e2 < s.records.length; e2++) for (let t3 = n; t3 <= o; t3++) s.records[e2][t3].x = t3;
            if (s.options.footers) for (let n2 = 0; n2 < s.options.footers.length; n2++) s.options.footers[n2].splice(t2, 0, s.options.footers[n2].splice(e, 1)[0]);
            utils_history.Dh.call(s, { action: "moveColumn", oldValue: e, newValue: t2 }), internal.o8.call(s), dispatch.A.call(s, "onmovecolumn", s, e, t2, 1);
          }, deleteColumn = function(e, t2) {
            const s = this;
            if (0 != s.options.allowDeleteColumn) if (s.headers.length > 1) {
              if (null == e) {
                const n2 = s.getSelectedColumns(true);
                n2.length ? (e = parseInt(n2[0]), t2 = parseInt(n2.length)) : (e = s.headers.length - 1, t2 = 1);
              }
              const n = s.options.data[0].length - 1;
              (null == e || e > n || e < 0) && (e = n), t2 || (t2 = 1), t2 > s.options.data[0].length - e && (t2 = s.options.data[0].length - e);
              const o = [];
              for (let s2 = 0; s2 < t2; s2++) o.push(s2 + e);
              if (false === dispatch.A.call(s, "onbeforedeletecolumn", s, o)) return false;
              if (parseInt(e) > -1) {
                let n2 = false;
                if (s.options.mergeCells && Object.keys(s.options.mergeCells).length > 0) for (let o2 = e; o2 < e + t2; o2++) merges.Lt.call(s, o2, null).length && (n2 = true);
                if (n2) {
                  if (!confirm(jSuites.translate("This action will destroy any existing merged cells. Are you sure?"))) return false;
                  s.destroyMerge();
                }
                const r = s.options.columns ? s.options.columns.splice(e, t2) : void 0;
                for (let n3 = e; n3 < e + t2; n3++) s.cols[n3].colElement.className = "", s.headers[n3].className = "", s.cols[n3].colElement.parentNode.removeChild(s.cols[n3].colElement), s.headers[n3].parentNode.removeChild(s.headers[n3]);
                const l = s.headers.splice(e, t2), i2 = s.cols.splice(e, t2), a = [], c = [], d = [];
                for (let n3 = 0; n3 < s.options.data.length; n3++) for (let o2 = e; o2 < e + t2; o2++) s.records[n3][o2].element.className = "", s.records[n3][o2].element.parentNode.removeChild(s.records[n3][o2].element);
                for (let n3 = 0; n3 < s.options.data.length; n3++) c[n3] = s.options.data[n3].splice(e, t2), a[n3] = s.records[n3].splice(e, t2);
                for (let t3 = e; t3 < s.cols.length; t3++) s.cols[t3].x = t3;
                for (let t3 = 0; t3 < s.records.length; t3++) for (let n3 = e; n3 < s.records[t3].length; n3++) s.records[t3][n3].x = n3;
                if (s.options.footers) for (let n3 = 0; n3 < s.options.footers.length; n3++) d[n3] = s.options.footers[n3].splice(e, t2);
                if (selection.at.call(s, 0, e, e + t2 - 1), s.options.nestedHeaders && s.options.nestedHeaders.length > 0 && s.options.nestedHeaders[0] && s.options.nestedHeaders[0][0]) for (let e2 = 0; e2 < s.options.nestedHeaders.length; e2++) {
                  const n3 = parseInt(s.options.nestedHeaders[e2][s.options.nestedHeaders[e2].length - 1].colspan) - t2;
                  s.options.nestedHeaders[e2][s.options.nestedHeaders[e2].length - 1].colspan = n3, s.thead.children[e2].children[s.thead.children[e2].children.length - 1].setAttribute("colspan", n3);
                }
                utils_history.Dh.call(s, { action: "deleteColumn", columnNumber: e, numOfColumns: t2, insertBefore: 1, columns: r, headers: l, cols: i2, records: a, footers: d, data: c }), internal.o8.call(s), dispatch.A.call(s, "ondeletecolumn", s, o);
              }
            } else console.error("Jspreadsheet: It is not possible to delete the last column");
          }, getWidth = function(e) {
            const t2 = this;
            let s;
            if (void 0 === e) {
              s = [];
              for (let e2 = 0; e2 < t2.headers.length; e2++) s.push(t2.options.columns && t2.options.columns[e2] && t2.options.columns[e2].width || t2.options.defaultColWidth || 100);
            } else s = parseInt(t2.cols[e].colElement.getAttribute("width"));
            return s;
          }, setWidth = function(e, t2, s) {
            const n = this;
            if (t2) {
              if (Array.isArray(e)) {
                s || (s = []);
                for (let o = 0; o < e.length; o++) {
                  s[o] || (s[o] = parseInt(n.cols[e[o]].colElement.getAttribute("width")));
                  const r = Array.isArray(t2) && t2[o] ? t2[o] : t2;
                  n.cols[e[o]].colElement.setAttribute("width", r), n.options.columns || (n.options.columns = []), n.options.columns[e[o]] || (n.options.columns[e[o]] = {}), n.options.columns[e[o]].width = r;
                }
              } else s || (s = parseInt(n.cols[e].colElement.getAttribute("width"))), n.cols[e].colElement.setAttribute("width", t2), n.options.columns || (n.options.columns = []), n.options.columns[e] || (n.options.columns[e] = {}), n.options.columns[e].width = t2;
              utils_history.Dh.call(n, { action: "setWidth", column: e, oldValue: s, newValue: t2 }), dispatch.A.call(n, "onresizecolumn", n, e, t2, s), selection.Aq.call(n);
            }
          }, showColumn = function(e) {
            const t2 = this;
            Array.isArray(e) || (e = [e]);
            for (let s = 0; s < e.length; s++) {
              const n = e[s];
              t2.headers[n].style.display = "", t2.cols[n].colElement.style.display = "", t2.filter && t2.filter.children.length > n + 1 && (t2.filter.children[n + 1].style.display = "");
              for (let e2 = 0; e2 < t2.options.data.length; e2++) t2.records[e2][n].element.style.display = "";
            }
            t2.options.footers && footer.e.call(t2), t2.resetSelection();
          }, hideColumn = function(e) {
            const t2 = this;
            Array.isArray(e) || (e = [e]);
            for (let s = 0; s < e.length; s++) {
              const n = e[s];
              t2.headers[n].style.display = "none", t2.cols[n].colElement.style.display = "none", t2.filter && t2.filter.children.length > n + 1 && (t2.filter.children[n + 1].style.display = "none");
              for (let e2 = 0; e2 < t2.options.data.length; e2++) t2.records[e2][n].element.style.display = "none";
            }
            t2.options.footers && footer.e.call(t2), t2.resetSelection();
          }, getColumnData = function(e, t2) {
            const s = this, n = [];
            for (let o = 0; o < s.options.data.length; o++) t2 ? n.push(s.records[o][e].element.innerHTML) : n.push(s.options.data[o][e]);
            return n;
          }, setColumnData = function(e, t2, s) {
            const n = this;
            for (let o = 0; o < n.rows.length; o++) {
              const r = (0, internalHelpers.t3)([e, o]);
              null != t2[o] && n.setValue(r, t2[o], s);
            }
          }, createRow = function(e, t2) {
            const s = this;
            s.records[e] || (s.records[e] = []), t2 || (t2 = s.options.data[e]);
            const n = { element: document.createElement("tr"), y: e };
            s.rows[e] = n, n.element.setAttribute("data-y", e);
            let o = null;
            s.options.defaultRowHeight && (n.element.style.height = s.options.defaultRowHeight + "px"), s.options.rows && s.options.rows[e] && (s.options.rows[e].height && (n.element.style.height = s.options.rows[e].height), s.options.rows[e].title && (o = s.options.rows[e].title)), o || (o = parseInt(e + 1));
            const r = document.createElement("td");
            r.innerHTML = o, r.setAttribute("data-y", e), r.className = "jss_row", n.element.appendChild(r);
            const l = getNumberOfColumns.call(s);
            for (let o2 = 0; o2 < l; o2++) s.records[e][o2] = { element: internal.P9.call(this, o2, e, t2[o2]), x: o2, y: e }, n.element.appendChild(s.records[e][o2].element), s.options.columns && s.options.columns[o2] && "function" == typeof s.options.columns[o2].render && s.options.columns[o2].render(s.records[e][o2].element, t2[o2], parseInt(o2), parseInt(e), s, s.options.columns[o2]);
            return n;
          }, insertRow = function(e, t2, s) {
            const n = this;
            if (0 != n.options.allowInsertRow) {
              let o, r = [];
              Array.isArray(e) ? (o = 1, e && (r = e)) : o = void 0 !== e ? e : 1, s = !!s;
              const l = n.options.data.length - 1;
              (null == t2 || t2 >= parseInt(l) || t2 < 0) && (t2 = l);
              const i2 = [];
              for (let e2 = 0; e2 < o; e2++) {
                const o2 = [];
                for (let e3 = 0; e3 < n.options.columns.length; e3++) o2[e3] = r[e3] ? r[e3] : "";
                i2.push({ row: e2 + t2 + (s ? 0 : 1), data: o2 });
              }
              if (false === dispatch.A.call(n, "onbeforeinsertrow", n, i2)) return false;
              if (n.options.mergeCells && Object.keys(n.options.mergeCells).length > 0 && merges.D0.call(n, t2, s).length) {
                if (!confirm(jSuites.translate("This action will destroy any existing merged cells. Are you sure?"))) return false;
                n.destroyMerge();
              }
              if (1 == n.options.search) {
                if (n.results && n.results.length != n.rows.length) {
                  if (!confirm(jSuites.translate("This action will clear your search results. Are you sure?"))) return false;
                  n.resetSearch();
                }
                n.results = null;
              }
              const a = s ? t2 : t2 + 1, c = n.records.splice(a), d = n.options.data.splice(a), u = n.rows.splice(a), p = [], h = [], m = [];
              for (let e2 = a; e2 < o + a; e2++) {
                n.options.data[e2] = [];
                for (let t3 = 0; t3 < n.options.columns.length; t3++) n.options.data[e2][t3] = r[t3] ? r[t3] : "";
                const s2 = createRow.call(n, e2, n.options.data[e2]);
                u[0] ? Array.prototype.indexOf.call(n.tbody.children, u[0].element) >= 0 && n.tbody.insertBefore(s2.element, u[0].element) : Array.prototype.indexOf.call(n.tbody.children, n.rows[t2].element) >= 0 && n.tbody.appendChild(s2.element), p.push([...n.records[e2]]), h.push([...n.options.data[e2]]), m.push(s2);
              }
              Array.prototype.push.apply(n.records, c), Array.prototype.push.apply(n.options.data, d), Array.prototype.push.apply(n.rows, u);
              for (let e2 = a; e2 < n.rows.length; e2++) n.rows[e2].y = e2;
              for (let e2 = a; e2 < n.records.length; e2++) for (let t3 = 0; t3 < n.records[e2].length; t3++) n.records[e2][t3].y = e2;
              n.options.pagination > 0 && n.page(n.pageNumber), utils_history.Dh.call(n, { action: "insertRow", rowNumber: t2, numOfRows: o, insertBefore: s, rowRecords: p, rowData: h, rowNode: m }), internal.o8.call(n), dispatch.A.call(n, "oninsertrow", n, i2);
            }
          }, moveRow = function(e, t2, s) {
            const n = this;
            if (n.options.mergeCells && Object.keys(n.options.mergeCells).length > 0) {
              let s2;
              if (s2 = e > t2 ? 1 : 0, merges.D0.call(n, e).length || merges.D0.call(n, t2, s2).length) {
                if (!confirm(jSuites.translate("This action will destroy any existing merged cells. Are you sure?"))) return false;
                n.destroyMerge();
              }
            }
            if (1 == n.options.search) {
              if (n.results && n.results.length != n.rows.length) {
                if (!confirm(jSuites.translate("This action will clear your search results. Are you sure?"))) return false;
                n.resetSearch();
              }
              n.results = null;
            }
            s || (Array.prototype.indexOf.call(n.tbody.children, n.rows[t2].element) >= 0 ? e > t2 ? n.tbody.insertBefore(n.rows[e].element, n.rows[t2].element) : n.tbody.insertBefore(n.rows[e].element, n.rows[t2].element.nextSibling) : n.tbody.removeChild(n.rows[e].element)), n.rows.splice(t2, 0, n.rows.splice(e, 1)[0]), n.records.splice(t2, 0, n.records.splice(e, 1)[0]), n.options.data.splice(t2, 0, n.options.data.splice(e, 1)[0]);
            const o = Math.min(e, t2), r = Math.max(e, t2);
            for (let e2 = o; e2 <= r; e2++) n.rows[e2].y = e2;
            for (let e2 = o; e2 <= r; e2++) for (let t3 = 0; t3 < n.records[e2].length; t3++) n.records[e2][t3].y = e2;
            n.options.pagination > 0 && n.tbody.children.length != n.options.pagination && n.page(n.pageNumber), utils_history.Dh.call(n, { action: "moveRow", oldValue: e, newValue: t2 }), internal.o8.call(n), dispatch.A.call(n, "onmoverow", n, parseInt(e), parseInt(t2), 1);
          }, deleteRow = function(e, t2) {
            const s = this;
            if (0 != s.options.allowDeleteRow) if (1 == s.options.allowDeletingAllRows || s.options.data.length > 1) {
              if (null == e) {
                const n2 = selection.R5.call(s);
                0 === n2.length ? (e = s.options.data.length - 1, t2 = 1) : (e = n2[0], t2 = n2.length);
              }
              let n = s.options.data.length - 1;
              (null == e || e > n || e < 0) && (e = n), t2 || (t2 = 1), e + t2 >= s.options.data.length && (t2 = s.options.data.length - e);
              const o = [];
              for (let s2 = 0; s2 < t2; s2++) o.push(s2 + e);
              if (false === dispatch.A.call(s, "onbeforedeleterow", s, o)) return false;
              if (parseInt(e) > -1) {
                let r = false;
                if (s.options.mergeCells && Object.keys(s.options.mergeCells).length > 0) for (let n2 = e; n2 < e + t2; n2++) merges.D0.call(s, n2, false).length && (r = true);
                if (r) {
                  if (!confirm(jSuites.translate("This action will destroy any existing merged cells. Are you sure?"))) return false;
                  s.destroyMerge();
                }
                if (1 == s.options.search) {
                  if (s.results && s.results.length != s.rows.length) {
                    if (!confirm(jSuites.translate("This action will clear your search results. Are you sure?"))) return false;
                    s.resetSearch();
                  }
                  s.results = null;
                }
                1 != s.options.allowDeletingAllRows && n + 1 === t2 && (t2--, console.error("Jspreadsheet: It is not possible to delete the last row"));
                for (let n2 = e; n2 < e + t2; n2++) Array.prototype.indexOf.call(s.tbody.children, s.rows[n2].element) >= 0 && (s.rows[n2].element.className = "", s.rows[n2].element.parentNode.removeChild(s.rows[n2].element));
                const l = s.records.splice(e, t2), i2 = s.options.data.splice(e, t2), a = s.rows.splice(e, t2);
                for (let t3 = e; t3 < s.rows.length; t3++) s.rows[t3].y = t3;
                for (let t3 = e; t3 < s.records.length; t3++) for (let e2 = 0; e2 < s.records[t3].length; e2++) s.records[t3][e2].y = t3;
                s.options.pagination > 0 && s.tbody.children.length != s.options.pagination && s.page(s.pageNumber), selection.at.call(s, 1, e, e + t2 - 1), utils_history.Dh.call(s, { action: "deleteRow", rowNumber: e, numOfRows: t2, insertBefore: 1, rowRecords: l, rowData: i2, rowNode: a }), internal.o8.call(s), dispatch.A.call(s, "ondeleterow", s, o);
              }
            } else console.error("Jspreadsheet: It is not possible to delete the last row");
          }, getHeight = function(e) {
            const t2 = this;
            let s;
            if (void 0 === e) {
              s = [];
              for (let e2 = 0; e2 < t2.rows.length; e2++) {
                const n = t2.rows[e2].element.style.height;
                n && (s[e2] = n);
              }
            } else "object" == typeof e && (e = $(e).getAttribute("data-y")), s = t2.rows[e].element.style.height;
            return s;
          }, setHeight = function(e, t2, s) {
            const n = this;
            t2 > 0 && (s || (s = n.rows[e].element.getAttribute("height")) || (s = n.rows[e].element.getBoundingClientRect().height), t2 = parseInt(t2), n.rows[e].element.style.height = t2 + "px", n.options.rows || (n.options.rows = []), n.options.rows[e] || (n.options.rows[e] = {}), n.options.rows[e].height = t2, utils_history.Dh.call(n, { action: "setHeight", row: e, oldValue: s, newValue: t2 }), dispatch.A.call(n, "onresizerow", n, e, t2, s), selection.Aq.call(n));
          }, showRow = function(e) {
            const t2 = this;
            Array.isArray(e) || (e = [e]), e.forEach((function(e2) {
              t2.rows[e2].element.style.display = "";
            }));
          }, hideRow = function(e) {
            const t2 = this;
            Array.isArray(e) || (e = [e]), e.forEach((function(e2) {
              t2.rows[e2].element.style.display = "none";
            }));
          }, getRowData = function(e, t2) {
            return t2 ? this.records[e].map((function(e2) {
              return e2.element.innerHTML;
            })) : this.options.data[e];
          }, setRowData = function(e, t2, s) {
            const n = this;
            for (let o = 0; o < n.headers.length; o++) {
              const r = (0, internalHelpers.t3)([o, e]);
              null != t2[o] && n.setValue(r, t2[o], s);
            }
          };
          var version = { version: "5.0.0", host: "https://bossanova.uk/jspreadsheet", license: "MIT", print: function() {
            return [["Jspreadsheet CE", this.version, this.host, this.license].join("\r\n")];
          } };
          const getElement = function(e) {
            let t2 = 0, s = 0;
            return (function e2(n) {
              n.className && (n.classList.contains("jss_container") && (s = n), n.classList.contains("jss_spreadsheet") && (s = n.querySelector(":scope > .jtabs-content > .jtabs-selected"))), "THEAD" == n.tagName ? t2 = 1 : "TBODY" == n.tagName && (t2 = 2), n.parentNode && (s || e2(n.parentNode));
            })(e), [s, t2];
          }, mouseUpControls = function(e) {
            if (libraryBase.jspreadsheet.current) if (libraryBase.jspreadsheet.current.resizing) {
              if (libraryBase.jspreadsheet.current.resizing.column) {
                const e2 = parseInt(libraryBase.jspreadsheet.current.cols[libraryBase.jspreadsheet.current.resizing.column].colElement.getAttribute("width")), t2 = libraryBase.jspreadsheet.current.getSelectedColumns();
                if (t2.length > 1) {
                  const s = [];
                  for (let e3 = 0; e3 < t2.length; e3++) s.push(parseInt(libraryBase.jspreadsheet.current.cols[t2[e3]].colElement.getAttribute("width")));
                  s[t2.indexOf(parseInt(libraryBase.jspreadsheet.current.resizing.column))] = libraryBase.jspreadsheet.current.resizing.width, setWidth.call(libraryBase.jspreadsheet.current, t2, e2, s);
                } else setWidth.call(libraryBase.jspreadsheet.current, parseInt(libraryBase.jspreadsheet.current.resizing.column), e2, libraryBase.jspreadsheet.current.resizing.width);
                libraryBase.jspreadsheet.current.headers[libraryBase.jspreadsheet.current.resizing.column].classList.remove("resizing");
                for (let e3 = 0; e3 < libraryBase.jspreadsheet.current.records.length; e3++) libraryBase.jspreadsheet.current.records[e3][libraryBase.jspreadsheet.current.resizing.column] && libraryBase.jspreadsheet.current.records[e3][libraryBase.jspreadsheet.current.resizing.column].element.classList.remove("resizing");
              } else {
                libraryBase.jspreadsheet.current.rows[libraryBase.jspreadsheet.current.resizing.row].element.children[0].classList.remove("resizing");
                let e2 = libraryBase.jspreadsheet.current.rows[libraryBase.jspreadsheet.current.resizing.row].element.getAttribute("height");
                setHeight.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.resizing.row, e2, libraryBase.jspreadsheet.current.resizing.height), libraryBase.jspreadsheet.current.resizing.element.classList.remove("resizing");
              }
              libraryBase.jspreadsheet.current.resizing = null;
            } else if (libraryBase.jspreadsheet.current.dragging) {
              if (libraryBase.jspreadsheet.current.dragging) {
                if (libraryBase.jspreadsheet.current.dragging.column) {
                  const t2 = e.target.getAttribute("data-x");
                  libraryBase.jspreadsheet.current.headers[libraryBase.jspreadsheet.current.dragging.column].classList.remove("dragging");
                  for (let e2 = 0; e2 < libraryBase.jspreadsheet.current.rows.length; e2++) libraryBase.jspreadsheet.current.records[e2][libraryBase.jspreadsheet.current.dragging.column] && libraryBase.jspreadsheet.current.records[e2][libraryBase.jspreadsheet.current.dragging.column].element.classList.remove("dragging");
                  for (let e2 = 0; e2 < libraryBase.jspreadsheet.current.headers.length; e2++) libraryBase.jspreadsheet.current.headers[e2].classList.remove("dragging-left"), libraryBase.jspreadsheet.current.headers[e2].classList.remove("dragging-right");
                  t2 && libraryBase.jspreadsheet.current.dragging.column != libraryBase.jspreadsheet.current.dragging.destination && libraryBase.jspreadsheet.current.moveColumn(libraryBase.jspreadsheet.current.dragging.column, libraryBase.jspreadsheet.current.dragging.destination);
                } else {
                  let e2;
                  libraryBase.jspreadsheet.current.dragging.element.nextSibling ? (e2 = parseInt(libraryBase.jspreadsheet.current.dragging.element.nextSibling.getAttribute("data-y")), libraryBase.jspreadsheet.current.dragging.row < e2 && (e2 -= 1)) : e2 = parseInt(libraryBase.jspreadsheet.current.dragging.element.previousSibling.getAttribute("data-y")), libraryBase.jspreadsheet.current.dragging.row != libraryBase.jspreadsheet.current.dragging.destination && moveRow.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.dragging.row, e2, true), libraryBase.jspreadsheet.current.dragging.element.classList.remove("dragging");
                }
                libraryBase.jspreadsheet.current.dragging = null;
              }
            } else libraryBase.jspreadsheet.current.selectedCorner && (libraryBase.jspreadsheet.current.selectedCorner = false, libraryBase.jspreadsheet.current.selection.length > 0 && (selection.kF.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.selection[0], libraryBase.jspreadsheet.current.selection[libraryBase.jspreadsheet.current.selection.length - 1]), selection.gG.call(libraryBase.jspreadsheet.current)));
            libraryBase.jspreadsheet.timeControl && (clearTimeout(libraryBase.jspreadsheet.timeControl), libraryBase.jspreadsheet.timeControl = null), libraryBase.jspreadsheet.isMouseAction = false;
          }, mouseDownControls = function(e) {
            let t2;
            t2 = (e = e || window.event).buttons ? e.buttons : e.button ? e.button : e.which;
            const s = getElement(e.target);
            if (s[0] ? libraryBase.jspreadsheet.current != s[0].jssWorksheet && (libraryBase.jspreadsheet.current && (libraryBase.jspreadsheet.current.edition && closeEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.edition[0], true), libraryBase.jspreadsheet.current.resetSelection()), libraryBase.jspreadsheet.current = s[0].jssWorksheet) : libraryBase.jspreadsheet.current && (libraryBase.jspreadsheet.current.edition && closeEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.edition[0], true), e.target.classList.contains("jss_object") || (selection.gE.call(libraryBase.jspreadsheet.current, true), libraryBase.jspreadsheet.current = null)), libraryBase.jspreadsheet.current && 1 == t2) {
              if (e.target.classList.contains("jss_selectall")) libraryBase.jspreadsheet.current && selection.Ub.call(libraryBase.jspreadsheet.current);
              else if (e.target.classList.contains("jss_corner")) 0 != libraryBase.jspreadsheet.current.options.editable && (libraryBase.jspreadsheet.current.selectedCorner = true);
              else {
                if (1 == s[1]) {
                  const t3 = e.target.getAttribute("data-x");
                  if (t3) {
                    const s2 = e.target.getBoundingClientRect();
                    if (0 != libraryBase.jspreadsheet.current.options.columnResize && s2.width - e.offsetX < 6) {
                      libraryBase.jspreadsheet.current.resizing = { mousePosition: e.pageX, column: t3, width: s2.width }, libraryBase.jspreadsheet.current.headers[t3].classList.add("resizing");
                      for (let e2 = 0; e2 < libraryBase.jspreadsheet.current.records.length; e2++) libraryBase.jspreadsheet.current.records[e2][t3] && libraryBase.jspreadsheet.current.records[e2][t3].element.classList.add("resizing");
                    } else if (0 != libraryBase.jspreadsheet.current.options.columnDrag && s2.height - e.offsetY < 6) if (merges.Lt.call(libraryBase.jspreadsheet.current, t3).length) console.error("Jspreadsheet: This column is part of a merged cell.");
                    else {
                      libraryBase.jspreadsheet.current.resetSelection(), libraryBase.jspreadsheet.current.dragging = { element: e.target, column: t3, destination: t3 }, libraryBase.jspreadsheet.current.headers[t3].classList.add("dragging");
                      for (let e2 = 0; e2 < libraryBase.jspreadsheet.current.records.length; e2++) libraryBase.jspreadsheet.current.records[e2][t3] && libraryBase.jspreadsheet.current.records[e2][t3].element.classList.add("dragging");
                    }
                    else {
                      let s3, n;
                      libraryBase.jspreadsheet.current.selectedHeader && (e.shiftKey || e.ctrlKey) ? (s3 = libraryBase.jspreadsheet.current.selectedHeader, n = t3) : (libraryBase.jspreadsheet.current.selectedHeader == t3 && 0 != libraryBase.jspreadsheet.current.options.allowRenameColumn && (libraryBase.jspreadsheet.timeControl = setTimeout((function() {
                        libraryBase.jspreadsheet.current.setHeader(t3);
                      }), 800)), libraryBase.jspreadsheet.current.selectedHeader = t3, s3 = t3, n = t3), selection.AH.call(libraryBase.jspreadsheet.current, s3, 0, n, libraryBase.jspreadsheet.current.options.data.length - 1, e);
                    }
                  } else if (e.target.parentNode.classList.contains("jss_nested")) {
                    let t4, s2;
                    if (e.target.getAttribute("data-column")) {
                      const n = e.target.getAttribute("data-column").split(",");
                      t4 = parseInt(n[0]), s2 = parseInt(n[n.length - 1]);
                    } else t4 = 0, s2 = libraryBase.jspreadsheet.current.options.columns.length - 1;
                    selection.AH.call(libraryBase.jspreadsheet.current, t4, 0, s2, libraryBase.jspreadsheet.current.options.data.length - 1, e);
                  }
                } else libraryBase.jspreadsheet.current.selectedHeader = false;
                if (2 == s[1]) {
                  const t3 = parseInt(e.target.getAttribute("data-y"));
                  if (e.target.classList.contains("jss_row")) {
                    const s2 = e.target.getBoundingClientRect();
                    if (0 != libraryBase.jspreadsheet.current.options.rowResize && s2.height - e.offsetY < 6) libraryBase.jspreadsheet.current.resizing = { element: e.target.parentNode, mousePosition: e.pageY, row: t3, height: s2.height }, e.target.parentNode.classList.add("resizing");
                    else if (0 != libraryBase.jspreadsheet.current.options.rowDrag && s2.width - e.offsetX < 6) merges.D0.call(libraryBase.jspreadsheet.current, t3).length ? console.error("Jspreadsheet: This row is part of a merged cell") : 1 == libraryBase.jspreadsheet.current.options.search && libraryBase.jspreadsheet.current.results ? console.error("Jspreadsheet: Please clear your search before perform this action") : (libraryBase.jspreadsheet.current.resetSelection(), libraryBase.jspreadsheet.current.dragging = { element: e.target.parentNode, row: t3, destination: t3 }, e.target.parentNode.classList.add("dragging"));
                    else {
                      let s3, n;
                      libraryBase.jspreadsheet.current.selectedRow && (e.shiftKey || e.ctrlKey) ? (s3 = libraryBase.jspreadsheet.current.selectedRow, n = t3) : (libraryBase.jspreadsheet.current.selectedRow = t3, s3 = t3, n = t3), selection.AH.call(libraryBase.jspreadsheet.current, null, s3, null, n, e);
                    }
                  } else if (e.target.classList.contains("jclose") && e.target.clientWidth - e.offsetX < 50 && e.offsetY < 50) closeEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.edition[0], true);
                  else {
                    const t4 = function(e2) {
                      const s3 = e2.getAttribute("data-x"), n = e2.getAttribute("data-y");
                      return s3 && n ? [s3, n] : e2.parentNode ? t4(e2.parentNode) : void 0;
                    }, s2 = t4(e.target);
                    if (s2) {
                      const t5 = s2[0], n = s2[1];
                      libraryBase.jspreadsheet.current.edition && (libraryBase.jspreadsheet.current.edition[2] == t5 && libraryBase.jspreadsheet.current.edition[3] == n || closeEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.edition[0], true)), libraryBase.jspreadsheet.current.edition || (e.shiftKey ? selection.AH.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.selectedCell[0], libraryBase.jspreadsheet.current.selectedCell[1], t5, n, e) : selection.AH.call(libraryBase.jspreadsheet.current, t5, n, void 0, void 0, e)), libraryBase.jspreadsheet.current.selectedHeader = null, libraryBase.jspreadsheet.current.selectedRow = null;
                    }
                  }
                } else libraryBase.jspreadsheet.current.selectedRow = false;
                e.target.classList.contains("jss_page") && ("<" == e.target.textContent ? libraryBase.jspreadsheet.current.page(0) : ">" == e.target.textContent ? libraryBase.jspreadsheet.current.page(e.target.getAttribute("title") - 1) : libraryBase.jspreadsheet.current.page(e.target.textContent - 1));
              }
              libraryBase.jspreadsheet.current.edition ? libraryBase.jspreadsheet.isMouseAction = false : libraryBase.jspreadsheet.isMouseAction = true;
            } else libraryBase.jspreadsheet.isMouseAction = false;
          }, mouseMoveControls = function(e) {
            let t2;
            if (t2 = (e = e || window.event).buttons ? e.buttons : e.button ? e.button : e.which, t2 || (libraryBase.jspreadsheet.isMouseAction = false), libraryBase.jspreadsheet.current) if (1 == libraryBase.jspreadsheet.isMouseAction) {
              if (libraryBase.jspreadsheet.current.resizing) if (libraryBase.jspreadsheet.current.resizing.column) {
                const t3 = e.pageX - libraryBase.jspreadsheet.current.resizing.mousePosition;
                if (libraryBase.jspreadsheet.current.resizing.width + t3 > 0) {
                  const e2 = libraryBase.jspreadsheet.current.resizing.width + t3;
                  libraryBase.jspreadsheet.current.cols[libraryBase.jspreadsheet.current.resizing.column].colElement.setAttribute("width", e2), selection.Aq.call(libraryBase.jspreadsheet.current);
                }
              } else {
                const t3 = e.pageY - libraryBase.jspreadsheet.current.resizing.mousePosition;
                if (libraryBase.jspreadsheet.current.resizing.height + t3 > 0) {
                  const e2 = libraryBase.jspreadsheet.current.resizing.height + t3;
                  libraryBase.jspreadsheet.current.rows[libraryBase.jspreadsheet.current.resizing.row].element.setAttribute("height", e2), selection.Aq.call(libraryBase.jspreadsheet.current);
                }
              }
              else if (libraryBase.jspreadsheet.current.dragging) if (libraryBase.jspreadsheet.current.dragging.column) {
                const t3 = e.target.getAttribute("data-x");
                if (t3) if (merges.Lt.call(libraryBase.jspreadsheet.current, t3).length) console.error("Jspreadsheet: This column is part of a merged cell.");
                else {
                  for (let e2 = 0; e2 < libraryBase.jspreadsheet.current.headers.length; e2++) libraryBase.jspreadsheet.current.headers[e2].classList.remove("dragging-left"), libraryBase.jspreadsheet.current.headers[e2].classList.remove("dragging-right");
                  libraryBase.jspreadsheet.current.dragging.column == t3 ? libraryBase.jspreadsheet.current.dragging.destination = parseInt(t3) : e.target.clientWidth / 2 > e.offsetX ? (libraryBase.jspreadsheet.current.dragging.column < t3 ? libraryBase.jspreadsheet.current.dragging.destination = parseInt(t3) - 1 : libraryBase.jspreadsheet.current.dragging.destination = parseInt(t3), libraryBase.jspreadsheet.current.headers[t3].classList.add("dragging-left")) : (libraryBase.jspreadsheet.current.dragging.column < t3 ? libraryBase.jspreadsheet.current.dragging.destination = parseInt(t3) : libraryBase.jspreadsheet.current.dragging.destination = parseInt(t3) + 1, libraryBase.jspreadsheet.current.headers[t3].classList.add("dragging-right"));
                }
              } else {
                const t3 = e.target.getAttribute("data-y");
                if (t3) if (merges.D0.call(libraryBase.jspreadsheet.current, t3).length) console.error("Jspreadsheet: This row is part of a merged cell.");
                else {
                  const t4 = e.target.clientHeight / 2 > e.offsetY ? e.target.parentNode.nextSibling : e.target.parentNode;
                  libraryBase.jspreadsheet.current.dragging.element != t4 && (e.target.parentNode.parentNode.insertBefore(libraryBase.jspreadsheet.current.dragging.element, t4), libraryBase.jspreadsheet.current.dragging.destination = Array.prototype.indexOf.call(libraryBase.jspreadsheet.current.dragging.element.parentNode.children, libraryBase.jspreadsheet.current.dragging.element));
                }
              }
            } else {
              const t3 = e.target.getAttribute("data-x"), s = e.target.getAttribute("data-y"), n = e.target.getBoundingClientRect();
              libraryBase.jspreadsheet.current.cursor && (libraryBase.jspreadsheet.current.cursor.style.cursor = "", libraryBase.jspreadsheet.current.cursor = null), e.target.parentNode.parentNode && e.target.parentNode.parentNode.className && (e.target.parentNode.parentNode.classList.contains("resizable") && (e.target && t3 && !s && n.width - (e.clientX - n.left) < 6 ? (libraryBase.jspreadsheet.current.cursor = e.target, libraryBase.jspreadsheet.current.cursor.style.cursor = "col-resize") : e.target && !t3 && s && n.height - (e.clientY - n.top) < 6 && (libraryBase.jspreadsheet.current.cursor = e.target, libraryBase.jspreadsheet.current.cursor.style.cursor = "row-resize")), e.target.parentNode.parentNode.classList.contains("draggable") && (e.target && !t3 && s && n.width - (e.clientX - n.left) < 6 || e.target && t3 && !s && n.height - (e.clientY - n.top) < 6) && (libraryBase.jspreadsheet.current.cursor = e.target, libraryBase.jspreadsheet.current.cursor.style.cursor = "move"));
            }
          }, updateCopySelection = function(e, t2) {
            const s = this;
            selection.gG.call(s);
            const n = s.selectedContainer[0], o = s.selectedContainer[1], r = s.selectedContainer[2], l = s.selectedContainer[3];
            if (null != e && null != t2) {
              let i2, a, c, d;
              e - r > 0 ? (i2 = parseInt(r) + 1, a = parseInt(e)) : (i2 = parseInt(e), a = parseInt(n) - 1), t2 - l > 0 ? (c = parseInt(l) + 1, d = parseInt(t2)) : (c = parseInt(t2), d = parseInt(o) - 1), a - i2 <= d - c ? (i2 = parseInt(n), a = parseInt(r)) : (c = parseInt(o), d = parseInt(l));
              for (let e2 = c; e2 <= d; e2++) for (let t3 = i2; t3 <= a; t3++) s.records[e2][t3] && "none" != s.rows[e2].element.style.display && "none" != s.records[e2][t3].element.style.display && (s.records[e2][t3].element.classList.add("selection"), s.records[c][t3].element.classList.add("selection-top"), s.records[d][t3].element.classList.add("selection-bottom"), s.records[e2][i2].element.classList.add("selection-left"), s.records[e2][a].element.classList.add("selection-right"), s.selection.push(s.records[e2][t3].element));
            }
          }, mouseOverControls = function(e) {
            let t2;
            if (t2 = (e = e || window.event).buttons ? e.buttons : e.button ? e.button : e.which, t2 || (libraryBase.jspreadsheet.isMouseAction = false), libraryBase.jspreadsheet.current && 1 == libraryBase.jspreadsheet.isMouseAction) {
              const t3 = getElement(e.target);
              if (t3[0]) {
                if (libraryBase.jspreadsheet.current != t3[0].jssWorksheet && libraryBase.jspreadsheet.current) return false;
                let s = e.target.getAttribute("data-x");
                const n = e.target.getAttribute("data-y");
                if (libraryBase.jspreadsheet.current.resizing || libraryBase.jspreadsheet.current.dragging) ;
                else {
                  if (1 == t3[1] && libraryBase.jspreadsheet.current.selectedHeader) {
                    s = e.target.getAttribute("data-x");
                    const t4 = libraryBase.jspreadsheet.current.selectedHeader, n2 = s;
                    selection.AH.call(libraryBase.jspreadsheet.current, t4, 0, n2, libraryBase.jspreadsheet.current.options.data.length - 1, e);
                  }
                  if (2 == t3[1]) if (e.target.classList.contains("jss_row")) {
                    if (libraryBase.jspreadsheet.current.selectedRow) {
                      const t4 = libraryBase.jspreadsheet.current.selectedRow, s2 = n;
                      selection.AH.call(libraryBase.jspreadsheet.current, 0, t4, libraryBase.jspreadsheet.current.options.data[0].length - 1, s2, e);
                    }
                  } else libraryBase.jspreadsheet.current.edition || s && n && (libraryBase.jspreadsheet.current.selectedCorner ? updateCopySelection.call(libraryBase.jspreadsheet.current, s, n) : libraryBase.jspreadsheet.current.selectedCell && selection.AH.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.selectedCell[0], libraryBase.jspreadsheet.current.selectedCell[1], s, n, e));
                }
              }
            }
            libraryBase.jspreadsheet.timeControl && (clearTimeout(libraryBase.jspreadsheet.timeControl), libraryBase.jspreadsheet.timeControl = null);
          }, doubleClickControls = function(e) {
            if (libraryBase.jspreadsheet.current) if (e.target.classList.contains("jss_corner")) {
              if (libraryBase.jspreadsheet.current.highlighted.length > 0) {
                const e2 = libraryBase.jspreadsheet.current.highlighted[0].element.getAttribute("data-x"), t2 = parseInt(libraryBase.jspreadsheet.current.highlighted[libraryBase.jspreadsheet.current.highlighted.length - 1].element.getAttribute("data-y")) + 1, s = libraryBase.jspreadsheet.current.highlighted[libraryBase.jspreadsheet.current.highlighted.length - 1].element.getAttribute("data-x"), n = libraryBase.jspreadsheet.current.records.length - 1;
                selection.kF.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.records[t2][e2].element, libraryBase.jspreadsheet.current.records[n][s].element);
              }
            } else if (e.target.classList.contains("jss_column_filter")) {
              const t2 = e.target.getAttribute("data-x");
              filter.N$.call(libraryBase.jspreadsheet.current, t2);
            } else {
              const t2 = getElement(e.target);
              if (1 == t2[1] && 0 != libraryBase.jspreadsheet.current.options.columnSorting) {
                const t3 = e.target.getAttribute("data-x");
                t3 && libraryBase.jspreadsheet.current.orderBy(parseInt(t3));
              }
              if (2 == t2[1] && 0 != libraryBase.jspreadsheet.current.options.editable && !libraryBase.jspreadsheet.current.edition) {
                const t3 = function(e2) {
                  if (e2.parentNode) {
                    const s2 = e2.getAttribute("data-x"), n = e2.getAttribute("data-y");
                    return s2 && n ? e2 : t3(e2.parentNode);
                  }
                }, s = t3(e.target);
                s && s.classList.contains("highlight") && openEditor.call(libraryBase.jspreadsheet.current, s, void 0, e);
              }
            }
          }, pasteControls = function(e) {
            libraryBase.jspreadsheet.current && libraryBase.jspreadsheet.current.selectedCell && (libraryBase.jspreadsheet.current.edition || 0 != libraryBase.jspreadsheet.current.options.editable && (e && e.clipboardData ? (paste.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.selectedCell[0], libraryBase.jspreadsheet.current.selectedCell[1], e.clipboardData.getData("text")), e.preventDefault()) : window.clipboardData && paste.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.selectedCell[0], libraryBase.jspreadsheet.current.selectedCell[1], window.clipboardData.getData("text"))));
          }, getRole = function(e) {
            if (e.classList.contains("jss_selectall")) return "select-all";
            if (e.classList.contains("jss_corner")) return "fill-handle";
            let t2 = e;
            for (; !t2.classList.contains("jss_spreadsheet"); ) {
              if (t2.classList.contains("jss_row")) return "row";
              if (t2.classList.contains("jss_nested")) return "nested";
              if (t2.classList.contains("jtabs-headers")) return "tabs";
              if (t2.classList.contains("jtoolbar")) return "toolbar";
              if (t2.classList.contains("jss_pagination")) return "pagination";
              if ("TBODY" === t2.tagName) return "cell";
              if ("TFOOT" === t2.tagName) return 0 === getElementIndex(e) ? "grid" : "footer";
              if ("THEAD" === t2.tagName) return "header";
              t2 = t2.parentElement;
            }
            return "applications";
          }, defaultContextMenu = function(e, t2, s, n) {
            const o = [];
            if ("header" === n && (0 != e.options.allowInsertColumn && o.push({ title: jSuites.translate("Insert a new column before"), onclick: function() {
              e.insertColumn(1, parseInt(t2), 1);
            } }), 0 != e.options.allowInsertColumn && o.push({ title: jSuites.translate("Insert a new column after"), onclick: function() {
              e.insertColumn(1, parseInt(t2), 0);
            } }), 0 != e.options.allowDeleteColumn && o.push({ title: jSuites.translate("Delete selected columns"), onclick: function() {
              e.deleteColumn(e.getSelectedColumns().length ? void 0 : parseInt(t2));
            } }), 0 != e.options.allowRenameColumn && o.push({ title: jSuites.translate("Rename this column"), onclick: function() {
              const s2 = e.getHeader(t2), n2 = prompt(jSuites.translate("Column name"), s2);
              e.setHeader(t2, n2);
            } }), 0 != e.options.columnSorting && (o.push({ type: "line" }), o.push({ title: jSuites.translate("Order ascending"), onclick: function() {
              e.orderBy(t2, 0);
            } }), o.push({ title: jSuites.translate("Order descending"), onclick: function() {
              e.orderBy(t2, 1);
            } }))), "row" !== n && "cell" !== n || (0 != e.options.allowInsertRow && (o.push({ title: jSuites.translate("Insert a new row before"), onclick: function() {
              e.insertRow(1, parseInt(s), 1);
            } }), o.push({ title: jSuites.translate("Insert a new row after"), onclick: function() {
              e.insertRow(1, parseInt(s));
            } })), 0 != e.options.allowDeleteRow && o.push({ title: jSuites.translate("Delete selected rows"), onclick: function() {
              e.deleteRow(e.getSelectedRows().length ? void 0 : parseInt(s));
            } })), "cell" === n && 0 != e.options.allowComments) {
              o.push({ type: "line" });
              const n2 = e.records[s][t2].element.getAttribute("title") || "";
              o.push({ title: jSuites.translate(n2 ? "Edit comments" : "Add comments"), onclick: function() {
                const o2 = prompt(jSuites.translate("Comments"), n2);
                o2 && e.setComments((0, helpers.getCellNameFromCoords)(t2, s), o2);
              } }), n2 && o.push({ title: jSuites.translate("Clear comments"), onclick: function() {
                e.setComments((0, helpers.getCellNameFromCoords)(t2, s), "");
              } });
            }
            return 0 !== o.length && o.push({ type: "line" }), "header" !== n && "row" !== n && "cell" !== n || (o.push({ title: jSuites.translate("Copy") + "...", shortcut: "Ctrl + C", onclick: function() {
              copy.call(e, true);
            } }), navigator && navigator.clipboard && o.push({ title: jSuites.translate("Paste") + "...", shortcut: "Ctrl + V", onclick: function() {
              e.selectedCell && navigator.clipboard.readText().then((function(t3) {
                t3 && paste.call(e, e.selectedCell[0], e.selectedCell[1], t3);
              }));
            } })), 0 != e.parent.config.allowExport && o.push({ title: jSuites.translate("Save as") + "...", shortcut: "Ctrl + S", onclick: function() {
              e.download();
            } }), 0 != e.parent.config.about && o.push({ title: jSuites.translate("About"), onclick: function() {
              void 0 === e.parent.config.about || true === e.parent.config.about ? alert(version.print()) : alert(e.parent.config.about);
            } }), o;
          }, getElementIndex = function(e) {
            const t2 = e.parentElement.children;
            for (let s = 0; s < t2.length; s++) if (e === t2[s]) return s;
            return -1;
          }, contextMenuControls = function(e) {
            if ("buttons" in (e = e || window.event) ? e.buttons : e.which || e.button, libraryBase.jspreadsheet.current) {
              const t2 = libraryBase.jspreadsheet.current.parent;
              if (libraryBase.jspreadsheet.current.edition) e.preventDefault();
              else if (t2.contextMenu.contextmenu.close(), libraryBase.jspreadsheet.current) {
                const s = getRole(e.target);
                let n = null, o = null;
                if ("cell" === s) {
                  let t3 = e.target;
                  for (; "TD" !== t3.tagName; ) t3 = t3.parentNode;
                  o = t3.getAttribute("data-y"), n = t3.getAttribute("data-x"), (!libraryBase.jspreadsheet.current.selectedCell || n < parseInt(libraryBase.jspreadsheet.current.selectedCell[0]) || n > parseInt(libraryBase.jspreadsheet.current.selectedCell[2]) || o < parseInt(libraryBase.jspreadsheet.current.selectedCell[1]) || o > parseInt(libraryBase.jspreadsheet.current.selectedCell[3])) && selection.AH.call(libraryBase.jspreadsheet.current, n, o, n, o, e);
                } else if ("row" === s || "header" === s) "row" === s ? o = e.target.getAttribute("data-y") : n = e.target.getAttribute("data-x"), (!libraryBase.jspreadsheet.current.selectedCell || n < parseInt(libraryBase.jspreadsheet.current.selectedCell[0]) || n > parseInt(libraryBase.jspreadsheet.current.selectedCell[2]) || o < parseInt(libraryBase.jspreadsheet.current.selectedCell[1]) || o > parseInt(libraryBase.jspreadsheet.current.selectedCell[3])) && selection.AH.call(libraryBase.jspreadsheet.current, n, o, n, o, e);
                else if ("nested" === s) {
                  const t3 = e.target.getAttribute("data-column").split(",");
                  n = getElementIndex(e.target) - 1, o = getElementIndex(e.target.parentElement), libraryBase.jspreadsheet.current.selectedCell && t3[0] == parseInt(libraryBase.jspreadsheet.current.selectedCell[0]) && t3[t3.length - 1] == parseInt(libraryBase.jspreadsheet.current.selectedCell[2]) && null == libraryBase.jspreadsheet.current.selectedCell[1] && null == libraryBase.jspreadsheet.current.selectedCell[3] || selection.AH.call(libraryBase.jspreadsheet.current, t3[0], null, t3[t3.length - 1], null, e);
                } else "select-all" === s ? selection.Ub.call(libraryBase.jspreadsheet.current) : "tabs" === s ? n = getElementIndex(e.target) : "footer" === s && (n = getElementIndex(e.target) - 1, o = getElementIndex(e.target.parentElement));
                let r = defaultContextMenu(libraryBase.jspreadsheet.current, parseInt(n), parseInt(o), s);
                if ("function" == typeof t2.config.contextMenu) {
                  const l = t2.config.contextMenu(libraryBase.jspreadsheet.current, n, o, e, r, s, n, o);
                  if (l) r = l;
                  else if (false === l) return;
                }
                "object" == typeof t2.plugins && Object.entries(t2.plugins).forEach((function([, t3]) {
                  if ("function" == typeof t3.contextMenu) {
                    const l = t3.contextMenu(libraryBase.jspreadsheet.current, null !== n ? parseInt(n) : null, null !== o ? parseInt(o) : null, e, r, s, null !== n ? parseInt(n) : null, null !== o ? parseInt(o) : null);
                    l && (r = l);
                  }
                })), t2.contextMenu.contextmenu.open(e, r), e.preventDefault();
              }
            }
          }, touchStartControls = function(e) {
            const t2 = getElement(e.target);
            if (t2[0] ? libraryBase.jspreadsheet.current != t2[0].jssWorksheet && (libraryBase.jspreadsheet.current && libraryBase.jspreadsheet.current.resetSelection(), libraryBase.jspreadsheet.current = t2[0].jssWorksheet) : libraryBase.jspreadsheet.current && (libraryBase.jspreadsheet.current.resetSelection(), libraryBase.jspreadsheet.current = null), libraryBase.jspreadsheet.current && !libraryBase.jspreadsheet.current.edition) {
              const t3 = e.target.getAttribute("data-x"), s = e.target.getAttribute("data-y");
              t3 && s && (selection.AH.call(libraryBase.jspreadsheet.current, t3, s, void 0, void 0, e), libraryBase.jspreadsheet.timeControl = setTimeout((function() {
                "color" == libraryBase.jspreadsheet.current.options.columns[t3].type ? libraryBase.jspreadsheet.tmpElement = null : libraryBase.jspreadsheet.tmpElement = e.target, openEditor.call(libraryBase.jspreadsheet.current, e.target, false, e);
              }), 500));
            }
          }, touchEndControls = function(e) {
            libraryBase.jspreadsheet.timeControl && (clearTimeout(libraryBase.jspreadsheet.timeControl), libraryBase.jspreadsheet.timeControl = null, libraryBase.jspreadsheet.tmpElement && "INPUT" == libraryBase.jspreadsheet.tmpElement.children[0].tagName && libraryBase.jspreadsheet.tmpElement.children[0].focus(), libraryBase.jspreadsheet.tmpElement = null);
          }, cutControls = function(e) {
            libraryBase.jspreadsheet.current && (libraryBase.jspreadsheet.current.edition || (copy.call(libraryBase.jspreadsheet.current, true, void 0, void 0, void 0, void 0, true), 0 != libraryBase.jspreadsheet.current.options.editable && libraryBase.jspreadsheet.current.setValue(libraryBase.jspreadsheet.current.highlighted.map((function(e2) {
              return e2.element;
            })), "")));
          }, copyControls = function(e) {
            libraryBase.jspreadsheet.current && copyControls.enabled && (libraryBase.jspreadsheet.current.edition || copy.call(libraryBase.jspreadsheet.current, true));
          }, isMac = function() {
            return navigator.platform.toUpperCase().indexOf("MAC") >= 0;
          }, isCtrl = function(e) {
            return isMac() ? e.metaKey : e.ctrlKey;
          }, keyDownControls = function(e) {
            if (libraryBase.jspreadsheet.current) {
              if (libraryBase.jspreadsheet.current.edition) if (27 == e.which) libraryBase.jspreadsheet.current.edition && closeEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.edition[0], false), e.preventDefault();
              else if (13 == e.which) if (libraryBase.jspreadsheet.current.options.columns && libraryBase.jspreadsheet.current.options.columns[libraryBase.jspreadsheet.current.edition[2]] && "calendar" == libraryBase.jspreadsheet.current.options.columns[libraryBase.jspreadsheet.current.edition[2]].type) closeEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.edition[0], true);
              else if (libraryBase.jspreadsheet.current.options.columns && libraryBase.jspreadsheet.current.options.columns[libraryBase.jspreadsheet.current.edition[2]] && "dropdown" == libraryBase.jspreadsheet.current.options.columns[libraryBase.jspreadsheet.current.edition[2]].type) ;
              else if ((1 == libraryBase.jspreadsheet.current.options.wordWrap || libraryBase.jspreadsheet.current.options.columns && libraryBase.jspreadsheet.current.options.columns[libraryBase.jspreadsheet.current.edition[2]] && 1 == libraryBase.jspreadsheet.current.options.columns[libraryBase.jspreadsheet.current.edition[2]].wordWrap || libraryBase.jspreadsheet.current.options.data[libraryBase.jspreadsheet.current.edition[3]][libraryBase.jspreadsheet.current.edition[2]] && libraryBase.jspreadsheet.current.options.data[libraryBase.jspreadsheet.current.edition[3]][libraryBase.jspreadsheet.current.edition[2]].length > 200) && e.altKey) {
                const e2 = libraryBase.jspreadsheet.current.edition[0].children[0];
                let t2 = libraryBase.jspreadsheet.current.edition[0].children[0].value;
                const s = e2.selectionStart;
                t2 = t2.slice(0, s) + "\n" + t2.slice(s), e2.value = t2, e2.focus(), e2.selectionStart = s + 1, e2.selectionEnd = s + 1;
              } else libraryBase.jspreadsheet.current.edition[0].children[0].blur();
              else 9 == e.which && (libraryBase.jspreadsheet.current.options.columns && libraryBase.jspreadsheet.current.options.columns[libraryBase.jspreadsheet.current.edition[2]] && ["calendar", "html"].includes(libraryBase.jspreadsheet.current.options.columns[libraryBase.jspreadsheet.current.edition[2]].type) ? closeEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.edition[0], true) : libraryBase.jspreadsheet.current.edition[0].children[0].blur());
              if (!libraryBase.jspreadsheet.current.edition && libraryBase.jspreadsheet.current.selectedCell) if (37 == e.which) left.call(libraryBase.jspreadsheet.current, e.shiftKey, e.ctrlKey), e.preventDefault();
              else if (39 == e.which) right.call(libraryBase.jspreadsheet.current, e.shiftKey, e.ctrlKey), e.preventDefault();
              else if (38 == e.which) up.call(libraryBase.jspreadsheet.current, e.shiftKey, e.ctrlKey), e.preventDefault();
              else if (40 == e.which) down.call(libraryBase.jspreadsheet.current, e.shiftKey, e.ctrlKey), e.preventDefault();
              else if (36 == e.which) first.call(libraryBase.jspreadsheet.current, e.shiftKey, e.ctrlKey), e.preventDefault();
              else if (35 == e.which) last.call(libraryBase.jspreadsheet.current, e.shiftKey, e.ctrlKey), e.preventDefault();
              else if (46 == e.which || 8 == e.which) 0 != libraryBase.jspreadsheet.current.options.editable && (libraryBase.jspreadsheet.current.selectedRow ? 0 != libraryBase.jspreadsheet.current.options.allowDeleteRow && confirm(jSuites.translate("Are you sure to delete the selected rows?")) && libraryBase.jspreadsheet.current.deleteRow() : libraryBase.jspreadsheet.current.selectedHeader ? 0 != libraryBase.jspreadsheet.current.options.allowDeleteColumn && confirm(jSuites.translate("Are you sure to delete the selected columns?")) && libraryBase.jspreadsheet.current.deleteColumn() : libraryBase.jspreadsheet.current.setValue(libraryBase.jspreadsheet.current.highlighted.map((function(e2) {
                return e2.element;
              })), ""));
              else if (13 == e.which) e.shiftKey ? up.call(libraryBase.jspreadsheet.current) : (0 != libraryBase.jspreadsheet.current.options.allowInsertRow && 0 != libraryBase.jspreadsheet.current.options.allowManualInsertRow && libraryBase.jspreadsheet.current.selectedCell[1] == libraryBase.jspreadsheet.current.options.data.length - 1 && libraryBase.jspreadsheet.current.insertRow(), down.call(libraryBase.jspreadsheet.current)), e.preventDefault();
              else if (9 == e.which) e.shiftKey ? left.call(libraryBase.jspreadsheet.current) : (0 != libraryBase.jspreadsheet.current.options.allowInsertColumn && 0 != libraryBase.jspreadsheet.current.options.allowManualInsertColumn && libraryBase.jspreadsheet.current.selectedCell[0] == libraryBase.jspreadsheet.current.options.data[0].length - 1 && libraryBase.jspreadsheet.current.insertColumn(), right.call(libraryBase.jspreadsheet.current)), e.preventDefault();
              else if (!e.ctrlKey && !e.metaKey || e.shiftKey) {
                if (libraryBase.jspreadsheet.current.selectedCell && 0 != libraryBase.jspreadsheet.current.options.editable) {
                  const t2 = libraryBase.jspreadsheet.current.selectedCell[1], s = libraryBase.jspreadsheet.current.selectedCell[0];
                  32 == e.keyCode ? (e.preventDefault(), "checkbox" == libraryBase.jspreadsheet.current.options.columns[s].type || "radio" == libraryBase.jspreadsheet.current.options.columns[s].type ? setCheckRadioValue.call(libraryBase.jspreadsheet.current) : openEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.records[t2][s].element, true, e)) : 113 == e.keyCode ? openEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.records[t2][s].element, false, e) : 1 !== e.key.length && "Process" !== e.key || e.altKey || isCtrl(e) || (openEditor.call(libraryBase.jspreadsheet.current, libraryBase.jspreadsheet.current.records[t2][s].element, true, e), libraryBase.jspreadsheet.current.options.columns && libraryBase.jspreadsheet.current.options.columns[s] && "calendar" == libraryBase.jspreadsheet.current.options.columns[s].type && e.preventDefault());
                }
              } else 65 == e.which ? (selection.Ub.call(libraryBase.jspreadsheet.current), e.preventDefault()) : 83 == e.which ? (libraryBase.jspreadsheet.current.download(), e.preventDefault()) : 89 == e.which ? (libraryBase.jspreadsheet.current.redo(), e.preventDefault()) : 90 == e.which ? (libraryBase.jspreadsheet.current.undo(), e.preventDefault()) : 67 == e.which ? (copy.call(libraryBase.jspreadsheet.current, true), e.preventDefault()) : 88 == e.which ? (0 != libraryBase.jspreadsheet.current.options.editable ? cutControls() : copyControls(), e.preventDefault()) : 86 == e.which && pasteControls();
              else e.target.classList.contains("jss_search") && (libraryBase.jspreadsheet.timeControl && clearTimeout(libraryBase.jspreadsheet.timeControl), libraryBase.jspreadsheet.timeControl = setTimeout((function() {
                libraryBase.jspreadsheet.current.search(e.target.value);
              }), 200));
            }
          }, wheelControls = function(e) {
            const t2 = this;
            1 == t2.options.lazyLoading && null == libraryBase.jspreadsheet.timeControlLoading && (libraryBase.jspreadsheet.timeControlLoading = setTimeout((function() {
              t2.content.scrollTop + t2.content.clientHeight >= t2.content.scrollHeight - 10 ? lazyLoading.p6.call(t2) && (t2.content.scrollTop + t2.content.clientHeight > t2.content.scrollHeight - 10 && (t2.content.scrollTop = t2.content.scrollTop - t2.content.clientHeight), selection.Aq.call(t2)) : t2.content.scrollTop <= t2.content.clientHeight && lazyLoading.G_.call(t2) && (t2.content.scrollTop < 10 && (t2.content.scrollTop = t2.content.scrollTop + t2.content.clientHeight), selection.Aq.call(t2)), libraryBase.jspreadsheet.timeControlLoading = null;
            }), 100));
          };
          let scrollLeft = 0;
          const updateFreezePosition = function() {
            const e = this;
            scrollLeft = e.content.scrollLeft;
            let t2 = 0;
            if (scrollLeft > 50) for (let s = 0; s < e.options.freezeColumns; s++) {
              if (s > 0 && (!e.options.columns || !e.options.columns[s - 1] || "hidden" !== e.options.columns[s - 1].type)) {
                let n;
                n = e.options.columns && e.options.columns[s - 1] && void 0 !== e.options.columns[s - 1].width ? parseInt(e.options.columns[s - 1].width) : void 0 !== e.options.defaultColWidth ? parseInt(e.options.defaultColWidth) : 100, t2 += parseInt(n);
              }
              e.headers[s].classList.add("jss_freezed"), e.headers[s].style.left = t2 + "px";
              for (let t3 = 0; t3 < e.rows.length; t3++) if (e.rows[t3] && e.records[t3][s]) {
                const n = scrollLeft + (s > 0 ? e.records[t3][s - 1].element.style.width : 0) - 51 + "px";
                e.records[t3][s].element.classList.add("jss_freezed"), e.records[t3][s].element.style.left = n;
              }
            }
            else for (let t3 = 0; t3 < e.options.freezeColumns; t3++) {
              e.headers[t3].classList.remove("jss_freezed"), e.headers[t3].style.left = "";
              for (let s = 0; s < e.rows.length; s++) e.records[s][t3] && (e.records[s][t3].element.classList.remove("jss_freezed"), e.records[s][t3].element.style.left = "");
            }
            selection.Aq.call(e);
          }, scrollControls = function(e) {
            const t2 = this;
            wheelControls.call(t2), t2.options.freezeColumns > 0 && t2.content.scrollLeft != scrollLeft && updateFreezePosition.call(t2), 1 != t2.options.lazyLoading && 1 != t2.options.tableOverflow || t2.edition && "jdropdown" != e.target.className.substr(0, 9) && closeEditor.call(t2, t2.edition[0], true);
          }, setEvents = function(e) {
            destroyEvents(e), e.addEventListener("mouseup", mouseUpControls), e.addEventListener("mousedown", mouseDownControls), e.addEventListener("mousemove", mouseMoveControls), e.addEventListener("mouseover", mouseOverControls), e.addEventListener("dblclick", doubleClickControls), e.addEventListener("paste", pasteControls), e.addEventListener("contextmenu", contextMenuControls), e.addEventListener("touchstart", touchStartControls), e.addEventListener("touchend", touchEndControls), e.addEventListener("touchcancel", touchEndControls), e.addEventListener("touchmove", touchEndControls), document.addEventListener("keydown", keyDownControls);
          }, destroyEvents = function(e) {
            e.removeEventListener("mouseup", mouseUpControls), e.removeEventListener("mousedown", mouseDownControls), e.removeEventListener("mousemove", mouseMoveControls), e.removeEventListener("mouseover", mouseOverControls), e.removeEventListener("dblclick", doubleClickControls), e.removeEventListener("paste", pasteControls), e.removeEventListener("contextmenu", contextMenuControls), e.removeEventListener("touchstart", touchStartControls), e.removeEventListener("touchend", touchEndControls), e.removeEventListener("touchcancel", touchEndControls), document.removeEventListener("keydown", keyDownControls);
          };
          var toolbar = __webpack_require__(392), pagination = __webpack_require__(167);
          const setData = function(e) {
            const t2 = this;
            if (e && (t2.options.data = e), t2.options.data || (t2.options.data = []), t2.options.data && t2.options.data[0] && !Array.isArray(t2.options.data[0])) {
              e = [];
              for (let s2 = 0; s2 < t2.options.data.length; s2++) {
                const n2 = [];
                for (let e2 = 0; e2 < t2.options.columns.length; e2++) n2[e2] = t2.options.data[s2][t2.options.columns[e2].name];
                e.push(n2);
              }
              t2.options.data = e;
            }
            let s = 0, n = 0;
            const o = t2.options.columns && t2.options.columns.length || 0, r = t2.options.data.length, l = t2.options.minDimensions[0], i2 = t2.options.minDimensions[1], a = l > o ? l : o, c = i2 > r ? i2 : r;
            for (s = 0; s < c; s++) for (n = 0; n < a; n++) null == t2.options.data[s] && (t2.options.data[s] = []), null == t2.options.data[s][n] && (t2.options.data[s][n] = "");
            let d, u;
            for (t2.rows = [], t2.results = null, t2.records = [], t2.history = [], t2.historyIndex = -1, t2.tbody.innerHTML = "", 1 == t2.options.lazyLoading ? (d = 0, u = t2.options.data.length < 100 ? t2.options.data.length : 100, t2.options.pagination && (t2.options.pagination = false, console.error("Jspreadsheet: Pagination will be disable due the lazyLoading"))) : t2.options.pagination ? (t2.pageNumber || (t2.pageNumber = 0), t2.options.pagination, d = t2.options.pagination * t2.pageNumber, u = t2.options.pagination * t2.pageNumber + t2.options.pagination, t2.options.data.length < u && (u = t2.options.data.length)) : (d = 0, u = t2.options.data.length), s = 0; s < t2.options.data.length; s++) {
              const e2 = createRow.call(t2, s, t2.options.data[s]);
              s >= d && s < u && t2.tbody.appendChild(e2.element);
            }
            if (1 == t2.options.lazyLoading || t2.options.pagination && pagination.IV.call(t2), t2.options.mergeCells) {
              const e2 = Object.keys(t2.options.mergeCells);
              for (let s2 = 0; s2 < e2.length; s2++) {
                const n2 = t2.options.mergeCells[e2[s2]];
                merges.FU.call(t2, e2[s2], n2[0], n2[1], 1);
              }
            }
            internal.am.call(t2);
          }, getValue = function(e, t2) {
            const s = this;
            let n, o;
            if ("string" != typeof e) return null;
            n = (e = (0, internalHelpers.vu)(e, true))[0], o = e[1];
            let r = null;
            return null != n && null != o && (s.records[o] && s.records[o][n] && t2 ? r = s.records[o][n].element.innerHTML : s.options.data[o] && "undefined" != s.options.data[o][n] && (r = s.options.data[o][n])), r;
          }, getValueFromCoords = function(e, t2, s) {
            const n = this;
            let o = null;
            return null != e && null != t2 && (n.records[t2] && n.records[t2][e] && s ? o = n.records[t2][e].element.innerHTML : n.options.data[t2] && "undefined" != n.options.data[t2][e] && (o = n.options.data[t2][e])), o;
          }, setValue = function(e, t2, s) {
            const n = this, o = [];
            if ("string" == typeof e) {
              const r2 = (0, internalHelpers.vu)(e, true), l = r2[0], i2 = r2[1];
              o.push(internal.k9.call(n, l, i2, t2, s)), internal.xF.call(n, l, i2, o);
            } else {
              let r2 = null, l = null;
              if (e && e.getAttribute && (r2 = e.getAttribute("data-x"), l = e.getAttribute("data-y")), null != r2 && null != l) o.push(internal.k9.call(n, r2, l, t2, s)), internal.xF.call(n, r2, l, o);
              else {
                const r3 = Object.keys(e);
                if (r3.length > 0) for (let l2 = 0; l2 < r3.length; l2++) {
                  let r4, i2;
                  if ("string" == typeof e[l2]) {
                    const t3 = (0, internalHelpers.vu)(e[l2], true);
                    r4 = t3[0], i2 = t3[1];
                  } else null != e[l2].x && null != e[l2].y ? (r4 = e[l2].x, i2 = e[l2].y, null != e[l2].value && (t2 = e[l2].value)) : (r4 = e[l2].getAttribute("data-x"), i2 = e[l2].getAttribute("data-y"));
                  null != r4 && null != i2 && (o.push(internal.k9.call(n, r4, i2, t2, s)), internal.xF.call(n, r4, i2, o));
                }
              }
            }
            utils_history.Dh.call(n, { action: "setValue", records: o, selection: n.selectedCell }), internal.am.call(n);
            const r = o.map((function(e2) {
              return { x: e2.x, y: e2.y, value: e2.value, oldValue: e2.oldValue };
            }));
            dispatch.A.call(n, "onafterchanges", n, r);
          }, setValueFromCoords = function(e, t2, s, n) {
            const o = this, r = [];
            r.push(internal.k9.call(o, e, t2, s, n)), internal.xF.call(o, e, t2, r), utils_history.Dh.call(o, { action: "setValue", records: r, selection: o.selectedCell }), internal.am.call(o);
            const l = r.map((function(e2) {
              return { x: e2.x, y: e2.y, value: e2.value, oldValue: e2.oldValue };
            }));
            dispatch.A.call(o, "onafterchanges", o, l);
          }, getData = function(e, t2, s, n) {
            const o = this, r = [];
            let l = 0, i2 = 0;
            const a = Math.max(...o.options.data.map((function(e2) {
              return e2.length;
            }))), c = o.options.data.length;
            for (let s2 = 0; s2 < c; s2++) {
              l = 0;
              for (let n2 = 0; n2 < a; n2++) e && !o.records[s2][n2].element.classList.contains("highlight") || (r[i2] || (r[i2] = []), r[i2][l] = t2 ? o.records[s2][n2].element.innerHTML : o.options.data[s2][n2], l++);
              l > 0 && i2++;
            }
            return s ? r.map((function(e2) {
              return e2.join(s);
            })).join("\r\n") + "\r\n" : n ? r.map((function(e2) {
              const t3 = {};
              return e2.forEach((function(e3, s2) {
                t3[s2] = e3;
              })), t3;
            })) : r;
          }, getDataFromRange = function(e, t2) {
            const s = this, n = (0, helpers.getCoordsFromRange)(e), o = [];
            for (let e2 = n[1]; e2 <= n[3]; e2++) {
              o.push([]);
              for (let r = n[0]; r <= n[2]; r++) t2 ? o[o.length - 1].push(s.records[e2][r].element.innerHTML) : o[o.length - 1].push(s.options.data[e2][r]);
            }
            return o;
          }, search = function(e) {
            const t2 = this;
            if (t2.options.filters && filter.dr.call(t2), t2.resetSelection(), t2.pageNumber = 0, t2.results = [], e) {
              t2.searchInput.value !== e && (t2.searchInput.value = e);
              const s = function(e2, s2, n2) {
                for (let o2 = 0; o2 < e2.length; o2++) if (("" + e2[o2]).toLowerCase().search(s2) >= 0 || ("" + t2.records[n2][o2].element.innerHTML).toLowerCase().search(s2) >= 0) return true;
                return false;
              }, n = function(e2) {
                -1 == t2.results.indexOf(e2) && t2.results.push(e2);
              };
              let o = e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
              o = new RegExp(o, "i"), t2.options.data.forEach((function(e2, r) {
                if (s(e2, o, r)) {
                  const e3 = merges.D0.call(t2, r);
                  if (e3.length) for (let s2 = 0; s2 < e3.length; s2++) {
                    const o2 = (0, internalHelpers.vu)(e3[s2], true);
                    for (let r2 = 0; r2 < t2.options.mergeCells[e3[s2]][1]; r2++) n(o2[1] + r2);
                  }
                  else n(r);
                }
              }));
            } else t2.results = null;
            internal.hG.call(t2);
          }, resetSearch = function() {
            const e = this;
            e.searchInput.value = "", e.search(""), e.results = null;
          }, getHeader = function(e) {
            return this.headers[e].textContent;
          }, getHeaders = function(e) {
            const t2 = this, s = [];
            for (let e2 = 0; e2 < t2.headers.length; e2++) s.push(t2.getHeader(e2));
            return e ? s : s.join(t2.options.csvDelimiter);
          }, setHeader = function(e, t2) {
            const s = this;
            if (s.headers[e]) {
              const n = s.headers[e].textContent, o = s.options.columns && s.options.columns[e] && s.options.columns[e].title || "";
              t2 || (t2 = (0, helpers.getColumnName)(e)), s.headers[e].textContent = t2, s.headers[e].setAttribute("title", t2), s.options.columns || (s.options.columns = []), s.options.columns[e] || (s.options.columns[e] = {}), s.options.columns[e].title = t2, utils_history.Dh.call(s, { action: "setHeader", column: e, oldValue: n, newValue: t2 }), dispatch.A.call(s, "onchangeheader", s, parseInt(e), t2, o);
            }
          }, getStyle = function(e, t2) {
            const s = this;
            if (e) return e = (0, internalHelpers.vu)(e, true), t2 ? s.records[e[1]][e[0]].element.style[t2] : s.records[e[1]][e[0]].element.getAttribute("style");
            {
              const e2 = {}, n = s.options.data[0].length, o = s.options.data.length;
              for (let r = 0; r < o; r++) for (let o2 = 0; o2 < n; o2++) {
                const n2 = t2 ? s.records[r][o2].element.style[t2] : s.records[r][o2].element.getAttribute("style");
                n2 && (e2[(0, internalHelpers.t3)([o2, r])] = n2);
              }
              return e2;
            }
          }, setStyle = function(e, t2, s, n, o) {
            const r = this, l = {}, i2 = {}, a = function(e2, t3, s2) {
              const o2 = (0, internalHelpers.vu)(e2, true);
              if (r.records[o2[1]] && r.records[o2[1]][o2[0]] && (0 == r.records[o2[1]][o2[0]].element.classList.contains("readonly") || n)) {
                const a2 = r.records[o2[1]][o2[0]].element.style[t3];
                a2 != s2 || n ? r.records[o2[1]][o2[0]].element.style[t3] = s2 : (s2 = "", r.records[o2[1]][o2[0]].element.style[t3] = ""), i2[e2] || (i2[e2] = []), l[e2] || (l[e2] = []), i2[e2].push([t3 + ":" + a2]), l[e2].push([t3 + ":" + s2]);
              }
            };
            if (t2 && s) "string" == typeof e && a(e, t2, s);
            else {
              const t3 = Object.keys(e);
              for (let s2 = 0; s2 < t3.length; s2++) {
                let n2 = e[t3[s2]];
                "string" == typeof n2 && (n2 = n2.split(";"));
                for (let e2 = 0; e2 < n2.length; e2++) "string" == typeof n2[e2] && (n2[e2] = n2[e2].split(":")), n2[e2][0].trim() && a(t3[s2], n2[e2][0].trim(), n2[e2][1]);
              }
            }
            let c = Object.keys(i2);
            for (let e2 = 0; e2 < c.length; e2++) i2[c[e2]] = i2[c[e2]].join(";");
            c = Object.keys(l);
            for (let e2 = 0; e2 < c.length; e2++) l[c[e2]] = l[c[e2]].join(";");
            o || utils_history.Dh.call(r, { action: "setStyle", oldValue: i2, newValue: l }), dispatch.A.call(r, "onchangestyle", r, l);
          }, resetStyle = function(e, t2) {
            const s = this, n = Object.keys(e);
            for (let e2 = 0; e2 < n.length; e2++) {
              const t3 = (0, internalHelpers.vu)(n[e2], true);
              s.records[t3[1]] && s.records[t3[1]][t3[0]] && s.records[t3[1]][t3[0]].element.setAttribute("style", "");
            }
            s.setStyle(e, null, null, null, t2);
          }, download = function(e, t2) {
            const s = this;
            if (0 == s.parent.config.allowExport) console.error("Export not allowed");
            else {
              let n = "";
              n += copy.call(s, false, s.options.csvDelimiter, true, e, true, void 0, t2);
              const o = new Blob(["\uFEFF" + n], { type: "text/csv;charset=utf-8;" });
              if (window.navigator && window.navigator.msSaveOrOpenBlob) window.navigator.msSaveOrOpenBlob(o, (s.options.csvFileName || s.options.worksheetName) + ".csv");
              else {
                const e2 = document.createElement("a");
                e2.setAttribute("target", "_top");
                const t3 = URL.createObjectURL(o);
                e2.href = t3, e2.setAttribute("download", (s.options.csvFileName || s.options.worksheetName) + ".csv"), document.body.appendChild(e2), e2.click(), e2.parentNode.removeChild(e2);
              }
            }
          }, getComments = function(e) {
            const t2 = this;
            if (e) return "string" != typeof e ? getComments.call(t2) : (e = (0, internalHelpers.vu)(e, true), t2.records[e[1]][e[0]].element.getAttribute("title") || "");
            {
              const e2 = {};
              for (let s = 0; s < t2.options.data.length; s++) for (let n = 0; n < t2.options.columns.length; n++) {
                const o = t2.records[s][n].element.getAttribute("title");
                o && (e2[(0, internalHelpers.t3)([n, s])] = o);
              }
              return e2;
            }
          }, setComments = function(e, t2) {
            const s = this;
            let n;
            n = "string" == typeof e ? { [e]: t2 } : e;
            const o = {};
            Object.entries(n).forEach((function([e2, t3]) {
              const n2 = (0, helpers.getCoordsFromCellName)(e2);
              o[e2] = s.records[n2[1]][n2[0]].element.getAttribute("title"), s.records[n2[1]][n2[0]].element.setAttribute("title", t3 || ""), t3 ? (s.records[n2[1]][n2[0]].element.classList.add("jss_comments"), s.options.comments || (s.options.comments = {}), s.options.comments[e2] = t3) : (s.records[n2[1]][n2[0]].element.classList.remove("jss_comments"), s.options.comments && s.options.comments[e2] && delete s.options.comments[e2]);
            })), utils_history.Dh.call(s, { action: "setComments", newValue: n, oldValue: o }), dispatch.A.call(s, "oncomments", s, n, o);
          };
          var orderBy = __webpack_require__(94);
          const getWorksheetConfig = function() {
            return this.options;
          }, getSpreadsheetConfig = function() {
            return this.config;
          }, setConfig = function(e, t2) {
            const s = this, n = Object.keys(e);
            let o;
            s.parent ? o = s.parent : (t2 = true, o = s), n.forEach((function(n2) {
              t2 ? (o.config[n2] = e[n2], "toolbar" === n2 && (true === e[n2] ? o.showToolbar() : false === e[n2] && o.hideToolbar())) : s.options[n2] = e[n2];
            }));
          };
          var meta = __webpack_require__(654);
          const setReadOnly = function(e, t2) {
            const s = this;
            let n;
            if ("string" == typeof e) {
              const t3 = (0, helpers.getCoordsFromCellName)(e);
              n = s.records[t3[1]][t3[0]];
            } else {
              const t3 = parseInt(e.getAttribute("data-x")), o = parseInt(e.getAttribute("data-y"));
              n = s.records[o][t3];
            }
            t2 ? n.element.classList.add("readonly") : n.element.classList.remove("readonly");
          }, isReadOnly = function(e, t2) {
            if ("string" == typeof e && void 0 === t2) {
              const s = (0, helpers.getCoordsFromCellName)(e);
              [e, t2] = s;
            }
            return this.records[t2][e].element.classList.contains("readonly");
          }, setWorksheetFunctions = function(e) {
            for (let t2 = 0; t2 < worksheetPublicMethodsLength; t2++) {
              const [s, n] = worksheetPublicMethods[t2];
              e[s] = n.bind(e);
            }
          }, createTable = function() {
            let e = this;
            setWorksheetFunctions(e), e.table = document.createElement("table"), e.thead = document.createElement("thead"), e.tbody = document.createElement("tbody"), e.headers = [], e.cols = [], e.content = document.createElement("div"), e.content.classList.add("jss_content"), e.content.onscroll = function(t3) {
              scrollControls.call(e, t3);
            }, e.content.onwheel = function(t3) {
              wheelControls.call(e, t3);
            };
            const t2 = document.createElement("div"), s = document.createElement("label");
            s.innerHTML = jSuites.translate("Search") + ": ", t2.appendChild(s), e.searchInput = document.createElement("input"), e.searchInput.classList.add("jss_search"), s.appendChild(e.searchInput), e.searchInput.onfocus = function() {
              e.resetSelection();
            };
            const n = document.createElement("div");
            if (e.options.pagination > 0 && e.options.paginationOptions && e.options.paginationOptions.length > 0) {
              e.paginationDropdown = document.createElement("select"), e.paginationDropdown.classList.add("jss_pagination_dropdown"), e.paginationDropdown.onchange = function() {
                e.options.pagination = parseInt(this.value), e.page(0);
              };
              for (let t3 = 0; t3 < e.options.paginationOptions.length; t3++) {
                const s2 = document.createElement("option");
                s2.value = e.options.paginationOptions[t3], s2.innerHTML = e.options.paginationOptions[t3], e.paginationDropdown.appendChild(s2);
              }
              e.paginationDropdown.value = e.options.pagination, n.appendChild(document.createTextNode(jSuites.translate("Show "))), n.appendChild(e.paginationDropdown), n.appendChild(document.createTextNode(jSuites.translate("entries")));
            }
            const o = document.createElement("div");
            o.classList.add("jss_filter"), o.appendChild(n), o.appendChild(t2), e.colgroupContainer = document.createElement("colgroup");
            let r = document.createElement("col");
            if (r.setAttribute("width", "50"), e.colgroupContainer.appendChild(r), e.options.nestedHeaders && e.options.nestedHeaders.length > 0 && e.options.nestedHeaders[0] && e.options.nestedHeaders[0][0]) for (let t3 = 0; t3 < e.options.nestedHeaders.length; t3++) e.thead.appendChild(internal.ju.call(e, e.options.nestedHeaders[t3]));
            e.headerContainer = document.createElement("tr"), r = document.createElement("td"), r.classList.add("jss_selectall"), e.headerContainer.appendChild(r);
            const l = getNumberOfColumns.call(e);
            for (let t3 = 0; t3 < l; t3++) createCellHeader.call(e, t3), e.headerContainer.appendChild(e.headers[t3]), e.colgroupContainer.appendChild(e.cols[t3].colElement);
            if (e.thead.appendChild(e.headerContainer), 1 == e.options.filters) {
              e.filter = document.createElement("tr");
              const t3 = document.createElement("td");
              e.filter.appendChild(t3);
              for (let t4 = 0; t4 < e.options.columns.length; t4++) {
                const s2 = document.createElement("td");
                s2.innerHTML = "&nbsp;", s2.setAttribute("data-x", t4), s2.className = "jss_column_filter", "hidden" == e.options.columns[t4].type && (s2.style.display = "none"), e.filter.appendChild(s2);
              }
              e.thead.appendChild(e.filter);
            }
            e.table = document.createElement("table"), e.table.classList.add("jss_worksheet"), e.table.setAttribute("cellpadding", "0"), e.table.setAttribute("cellspacing", "0"), e.table.setAttribute("unselectable", "yes"), e.table.appendChild(e.colgroupContainer), e.table.appendChild(e.thead), e.table.appendChild(e.tbody), e.options.textOverflow || e.table.classList.add("jss_overflow"), e.corner = document.createElement("div"), e.corner.className = "jss_corner", e.corner.setAttribute("unselectable", "on"), e.corner.setAttribute("onselectstart", "return false"), 0 == e.options.selectionCopy && (e.corner.style.display = "none"), e.textarea = document.createElement("textarea"), e.textarea.className = "jss_textarea", e.textarea.id = "jss_textarea", e.textarea.tabIndex = "-1", e.textarea.ariaHidden = "true";
            const i2 = document.createElement("a");
            i2.setAttribute("href", "https://bossanova.uk/jspreadsheet/"), e.ads = document.createElement("div"), e.ads.className = "jss_about";
            const a = document.createElement("span");
            a.innerHTML = "Jspreadsheet CE", i2.appendChild(a), e.ads.appendChild(i2), document.createElement("div").classList.add("jss_table"), e.pagination = document.createElement("div"), e.pagination.classList.add("jss_pagination");
            const c = document.createElement("div"), d = document.createElement("div");
            if (e.pagination.appendChild(c), e.pagination.appendChild(d), e.options.pagination || (e.pagination.style.display = "none"), 1 == e.options.search && e.element.appendChild(o), e.content.appendChild(e.table), e.content.appendChild(e.corner), e.content.appendChild(e.textarea), e.element.appendChild(e.content), e.element.appendChild(e.pagination), e.element.appendChild(e.ads), e.element.classList.add("jss_container"), e.element.jssWorksheet = e, e.element.jspreadsheet = e, 1 == e.options.tableOverflow && (e.options.tableHeight && (e.content.style["overflow-y"] = "auto", e.content.style["box-shadow"] = "rgb(221 221 221) 2px 2px 5px 0.1px", e.content.style.maxHeight = "string" == typeof e.options.tableHeight ? e.options.tableHeight : e.options.tableHeight + "px"), e.options.tableWidth && (e.content.style["overflow-x"] = "auto", e.content.style.width = "string" == typeof e.options.tableWidth ? e.options.tableWidth : e.options.tableWidth + "px")), 1 != e.options.tableOverflow && e.parent.config.toolbar && e.element.classList.add("with-toolbar"), 0 != e.options.columnDrag && e.thead.classList.add("draggable"), 0 != e.options.columnResize && e.thead.classList.add("resizable"), 0 != e.options.rowDrag && e.tbody.classList.add("draggable"), 0 != e.options.rowResize && e.tbody.classList.add("resizable"), e.setData.call(e), e.options.style && (e.setStyle(e.options.style, null, null, 1, 1), delete e.options.style), Object.defineProperty(e.options, "style", { enumerable: true, configurable: true, get() {
              return e.getStyle();
            } }), e.options.comments && e.setComments(e.options.comments), e.options.classes) {
              const t3 = Object.keys(e.options.classes);
              for (let s2 = 0; s2 < t3.length; s2++) {
                const n2 = (0, internalHelpers.vu)(t3[s2], true);
                e.records[n2[1]][n2[0]].element.classList.add(e.options.classes[t3[s2]]);
              }
            }
          }, prepareTable = function() {
            const e = this;
            1 == e.options.lazyLoading && 1 != e.options.tableOverflow && 1 != e.parent.config.fullscreen && (console.error("Jspreadsheet: The lazyloading only works when tableOverflow = yes or fullscreen = yes"), e.options.lazyLoading = false), e.options.columns || (e.options.columns = []);
            let t2, s = e.options.columns.length;
            if (e.options.data && void 0 !== e.options.data[0]) if (Array.isArray(e.options.data[0])) {
              const t3 = e.options.data[0].length;
              t3 > s && (s = t3);
            } else t2 = Object.keys(e.options.data[0]), t2.length > s && (s = t2.length);
            e.options.minDimensions || (e.options.minDimensions = [0, 0]), e.options.minDimensions[0] > s && (s = e.options.minDimensions[0]);
            const n = [];
            for (let o = 0; o < s; o++) e.options.columns[o] || (e.options.columns[o] = {}), !e.options.columns[o].name && t2 && t2[o] && (e.options.columns[o].name = t2[o]), "dropdown" == e.options.columns[o].type && e.options.columns[o].url && n.push({ url: e.options.columns[o].url, index: o, method: "GET", dataType: "json", success: function(t3) {
              e.options.columns[this.index].source || (e.options.columns[this.index].source = []);
              for (let s2 = 0; s2 < t3.length; s2++) e.options.columns[this.index].source.push(t3[s2]);
            } });
            n.length ? jSuites.ajax(n, (function() {
              createTable.call(e);
            })) : createTable.call(e);
          }, getNextDefaultWorksheetName = function(e) {
            const t2 = /^Sheet(\d+)$/;
            let s = 0;
            return e.worksheets.forEach((function(e2) {
              const n = t2.exec(e2.options.worksheetName);
              n && (s = Math.max(s, parseInt(n[1])));
            })), "Sheet" + (s + 1);
          }, buildWorksheet = async function() {
            const e = this, t2 = (e.element, e.parent);
            "object" == typeof t2.plugins && Object.entries(t2.plugins).forEach((function([, t3]) {
              "function" == typeof t3.beforeinit && t3.beforeinit(e);
            })), libraryBase.jspreadsheet.current = e;
            const s = [];
            if (e.options.csv) {
              const t3 = new Promise(((t4) => {
                jSuites.ajax({ url: e.options.csv, method: "GET", dataType: "text", success: function(s2) {
                  const n = (0, helpers.parseCSV)(s2, e.options.csvDelimiter);
                  if (1 == e.options.csvHeaders && n.length > 0) {
                    const t5 = n.shift();
                    if (t5.length > 0) {
                      e.options.columns || (e.options.columns = []);
                      for (let s3 = 0; s3 < t5.length; s3++) e.options.columns[s3] || (e.options.columns[s3] = {}), void 0 === e.options.columns[s3].title && (e.options.columns[s3].title = t5[s3]);
                    }
                  }
                  e.options.data = n, prepareTable.call(e), t4();
                } });
              }));
              s.push(t3);
            } else if (e.options.url) {
              const t3 = new Promise(((t4) => {
                jSuites.ajax({ url: e.options.url, method: "GET", dataType: "json", success: function(s2) {
                  e.options.data = s2.data ? s2.data : s2, prepareTable.call(e), t4();
                } });
              }));
              s.push(t3);
            } else prepareTable.call(e);
            await Promise.all(s), "object" == typeof t2.plugins && Object.entries(t2.plugins).forEach((function([, t3]) {
              "function" == typeof t3.init && t3.init(e);
            }));
          }, createWorksheetObj = function(e) {
            const t2 = this.parent;
            e.worksheetName || (e.worksheetName = getNextDefaultWorksheetName(this.parent));
            const s = { parent: t2, options: e, filters: [], formula: [], history: [], selection: [], historyIndex: -1 };
            return t2.config.worksheets.push(s.options), t2.worksheets.push(s), s;
          }, createWorksheet = function(e) {
            const t2 = this.parent;
            t2.creationThroughJss = true, createWorksheetObj.call(this, e), t2.element.tabs.create(e.worksheetName);
          }, openWorksheet = function(e) {
            this.parent.element.tabs.open(e);
          }, deleteWorksheet = function(e) {
            const t2 = this;
            t2.parent.element.tabs.remove(e);
            const s = t2.parent.worksheets.splice(e, 1)[0];
            dispatch.A.call(t2.parent, "ondeleteworksheet", s, e);
          }, worksheetPublicMethods = [["selectAll", selection.Ub], ["updateSelectionFromCoords", function(e, t2, s, n) {
            return selection.AH.call(this, e, t2, s, n);
          }], ["resetSelection", function() {
            return selection.gE.call(this);
          }], ["getSelection", selection.Lo], ["getSelected", selection.ef], ["getSelectedColumns", selection.Jg], ["getSelectedRows", selection.R5], ["getData", getData], ["setData", setData], ["getValue", getValue], ["getValueFromCoords", getValueFromCoords], ["setValue", setValue], ["setValueFromCoords", setValueFromCoords], ["getWidth", getWidth], ["setWidth", function(e, t2) {
            return setWidth.call(this, e, t2);
          }], ["insertRow", insertRow], ["moveRow", function(e, t2) {
            return moveRow.call(this, e, t2);
          }], ["deleteRow", deleteRow], ["hideRow", hideRow], ["showRow", showRow], ["getRowData", getRowData], ["setRowData", setRowData], ["getHeight", getHeight], ["setHeight", function(e, t2) {
            return setHeight.call(this, e, t2);
          }], ["getMerge", merges.fd], ["setMerge", function(e, t2, s) {
            return merges.FU.call(this, e, t2, s);
          }], ["destroyMerge", function() {
            return merges.VP.call(this);
          }], ["removeMerge", function(e, t2) {
            return merges.Zp.call(this, e, t2);
          }], ["search", search], ["resetSearch", resetSearch], ["getHeader", getHeader], ["getHeaders", getHeaders], ["setHeader", setHeader], ["getStyle", getStyle], ["setStyle", function(e, t2, s, n) {
            return setStyle.call(this, e, t2, s, n);
          }], ["resetStyle", resetStyle], ["insertColumn", insertColumn], ["moveColumn", moveColumn], ["deleteColumn", deleteColumn], ["getColumnData", getColumnData], ["setColumnData", setColumnData], ["whichPage", pagination.ho], ["page", pagination.MY], ["download", download], ["getComments", getComments], ["setComments", setComments], ["orderBy", orderBy.My], ["undo", utils_history.tN], ["redo", utils_history.ZS], ["getCell", internal.tT], ["getCellFromCoords", internal.Xr], ["getLabel", internal.p9], ["getConfig", getWorksheetConfig], ["setConfig", setConfig], ["getMeta", function(e) {
            return meta.IQ.call(this, e);
          }], ["setMeta", meta.iZ], ["showColumn", showColumn], ["hideColumn", hideColumn], ["showIndex", internal.C6], ["hideIndex", internal.TI], ["getWorksheetActive", internal.$O], ["openEditor", openEditor], ["closeEditor", closeEditor], ["createWorksheet", createWorksheet], ["openWorksheet", openWorksheet], ["deleteWorksheet", deleteWorksheet], ["copy", function(e) {
            e ? cutControls() : copy.call(this, true);
          }], ["paste", paste], ["executeFormula", internal.Em], ["getDataFromRange", getDataFromRange], ["quantiyOfPages", pagination.$f], ["getRange", selection.eO], ["isSelected", selection.sp], ["setReadOnly", setReadOnly], ["isReadOnly", isReadOnly], ["getHighlighted", selection.kV], ["dispatch", dispatch.A], ["down", down], ["first", first], ["last", last], ["left", left], ["right", right], ["up", up], ["openFilter", filter.N$], ["resetFilters", filter.dr]], worksheetPublicMethodsLength = worksheetPublicMethods.length, factory = function() {
          }, createWorksheets = async function(e, t2, s) {
            let n = t2.worksheets;
            if (!n) throw new Error("JSS: worksheets are not defined");
            {
              let o = { animation: true, onbeforecreate: function(t3, s2) {
                return s2 || getNextDefaultWorksheetName(e);
              }, oncreate: function(s2, n2) {
                if (e.creationThroughJss) e.creationThroughJss = false;
                else {
                  const t3 = s2.tabs.headers.children[s2.tabs.headers.children.length - 2].innerHTML;
                  createWorksheetObj.call(e.worksheets[0], { minDimensions: [10, 15], worksheetName: t3 });
                }
                const o2 = e.worksheets[e.worksheets.length - 1];
                o2.element = n2, buildWorksheet.call(o2).then((function() {
                  (0, toolbar.nK)(o2), dispatch.A.call(o2, "oncreateworksheet", o2, t2, e.worksheets.length - 1);
                }));
              }, onchange: function(t3, s2, n2) {
                0 != e.worksheets.length && e.worksheets[n2] && (0, toolbar.nK)(e.worksheets[n2]);
              } };
              1 == t2.tabs ? o.allowCreate = true : o.hideHeaders = true, o.data = [];
              let r = 1;
              for (let e2 = 0; e2 < n.length; e2++) n[e2].worksheetName || (n[e2].worksheetName = "Sheet" + r++), o.data.push({ title: n[e2].worksheetName, content: "" });
              s.classList.add("jss_spreadsheet"), s.tabIndex = 0;
              const l = jSuites.tabs(s, o), i2 = t2.style;
              delete t2.style;
              for (let t3 = 0; t3 < n.length; t3++) n[t3].style && Object.entries(n[t3].style).forEach((function([e2, s2]) {
                "number" == typeof s2 && (n[t3].style[e2] = i2[s2]);
              })), e.worksheets.push({ parent: e, element: l.content.children[t3], options: n[t3], filters: [], formula: [], history: [], selection: [], historyIndex: -1 }), await buildWorksheet.call(e.worksheets[t3]);
            }
          };
          factory.spreadsheet = async function(e, t2, s) {
            if ("TABLE" == e.tagName) {
              t2 || (t2 = {}), t2.worksheets || (t2.worksheets = []);
              const s2 = (0, helpers.createFromTable)(e, t2.worksheets[0]);
              t2.worksheets[0] = s2;
              const n2 = document.createElement("div");
              e.parentNode.insertBefore(n2, e), e.remove(), e = n2;
            }
            let n = { worksheets: s, config: t2, element: e, el: e };
            return n.contextMenu = document.createElement("div"), n.contextMenu.className = "jss_contextmenu", n.getWorksheetActive = internal.$O.bind(n), n.fullscreen = internal.Y5.bind(n), n.showToolbar = toolbar.ll.bind(n), n.hideToolbar = toolbar.Ar.bind(n), n.getConfig = getSpreadsheetConfig.bind(n), n.setConfig = setConfig.bind(n), n.setPlugins = function(e2) {
              n.plugins || (n.plugins = {}), "object" == typeof e2 && Object.entries(e2).forEach((function([e3, t3]) {
                n.plugins[e3] = t3.call(libraryBase.jspreadsheet, n, {}, n.config);
              }));
            }, n.setPlugins(t2.plugins), await createWorksheets(n, t2, e), n.element.appendChild(n.contextMenu), jSuites.contextmenu(n.contextMenu, { onclick: function() {
              n.contextMenu.contextmenu.close(false);
            } }), 1 == n.config.fullscreen && n.element.classList.add("fullscreen"), toolbar.ll.call(n), t2.root ? setEvents(t2.root) : setEvents(document), e.spreadsheet = n, n;
          }, factory.worksheet = function(e, t2, s) {
            let n = { parent: e, options: {} };
            return void 0 === s ? e.worksheets.push(n) : e.worksheets.splice(s, 0, n), Object.assign(n.options, t2), n;
          };
          var utils_factory = factory;
          libraryBase.jspreadsheet = function(e, t2) {
            try {
              let s = [];
              return utils_factory.spreadsheet(e, t2, s).then(((e2) => {
                libraryBase.jspreadsheet.spreadsheet.push(e2), dispatch.A.call(e2, "onload", e2);
              })), s;
            } catch (e2) {
              console.error(e2);
            }
          }, libraryBase.jspreadsheet.getWorksheetInstanceByName = function(e, t2) {
            const s = libraryBase.jspreadsheet.spreadsheet.find(((e2) => e2.config.namespace === t2));
            if (s) return {};
            if (null == e) {
              const e2 = s.worksheets.map(((e3) => [e3.options.worksheetName, e3]));
              return Object.fromEntries(e2);
            }
            return s.worksheets.find(((t3) => t3.options.worksheetName === e));
          }, libraryBase.jspreadsheet.setDictionary = function(e) {
            jSuites.setDictionary(e);
          }, libraryBase.jspreadsheet.destroy = function(e, t2) {
            if (e.spreadsheet) {
              const s = libraryBase.jspreadsheet.spreadsheet.indexOf(e.spreadsheet);
              libraryBase.jspreadsheet.spreadsheet.splice(s, 1);
              const n = e.spreadsheet.config.root || document;
              e.spreadsheet = null, e.innerHTML = "", t2 && destroyEvents(n);
            }
          }, libraryBase.jspreadsheet.destroyAll = function() {
            for (let e = 0; e < libraryBase.jspreadsheet.spreadsheet.length; e++) {
              const t2 = libraryBase.jspreadsheet.spreadsheet[e];
              libraryBase.jspreadsheet.destroy(t2.element);
            }
          }, libraryBase.jspreadsheet.current = null, libraryBase.jspreadsheet.spreadsheet = [], libraryBase.jspreadsheet.helpers = {}, libraryBase.jspreadsheet.version = function() {
            return version;
          }, Object.entries(helpers).forEach((([e, t2]) => {
            libraryBase.jspreadsheet.helpers[e] = t2;
          }));
          var src = libraryBase.jspreadsheet;
          jspreadsheet = __webpack_exports__.default;
        })();
        return jspreadsheet;
      }));
    }
  });

  // node_modules/jspreadsheet-ce/dist/jspreadsheet.css
  var init_jspreadsheet = __esm({
    "node_modules/jspreadsheet-ce/dist/jspreadsheet.css"() {
    }
  });

  // node_modules/jsuites/dist/jsuites.css
  var init_jsuites = __esm({
    "node_modules/jsuites/dist/jsuites.css"() {
    }
  });

  // spreadsheet-builder.js
  async function buildSpreadsheet(container, data, opts = {}) {
    console.log("[SHADOW DOM] Starting clean jspreadsheet integration...");
    const { cleanContainer, mainWrapper } = await setupCleanContainer(container);
    const correctionsBatcher = opts.apiClient ? new CorrectionsBatcher(opts.apiClient) : null;
    if (!correctionsBatcher) {
      console.warn("[CORRECTIONS] No API client provided - corrections will not be sent");
    }
    if (!data || data.length === 0) {
      console.log("[SPREADSHEET] No data provided, showing empty spreadsheet");
      data = [];
    }
    const columns = [
      {
        title: "\u{1F4C4}",
        // Document icon column (preview/open)
        width: 25,
        type: "html",
        readOnly: true,
        fieldName: null,
        editable: false
      },
      {
        title: "Invoice #",
        width: 70,
        // Compact width
        type: "text",
        fieldName: "invoiceNumber",
        editable: true,
        filter: true
      },
      {
        title: "Entity Name",
        width: 90,
        // Compact width
        type: "text",
        fieldName: "entityName",
        editable: true,
        filter: true
      },
      {
        title: "Vendor Name",
        width: 100,
        // Compact width
        type: "text",
        fieldName: "vendor.name",
        editable: true,
        filter: true
      },
      {
        title: "Description",
        width: 120,
        // Compact width
        type: "text",
        fieldName: "description",
        editable: true,
        filter: true
      },
      {
        title: "Period",
        width: 50,
        // Compact width
        type: "text",
        fieldName: "period",
        editable: true,
        filter: true
      },
      {
        title: "Amount",
        width: 70,
        // Compact width
        type: "numeric",
        mask: "$ #,##.00",
        fieldName: "amount",
        editable: true,
        filter: true
      },
      {
        title: "Currency",
        width: 60,
        // Slightly wider for "Currency" header
        type: "dropdown",
        source: ["USD", "INR", "EUR", "GBP", "CAD", "AUD", "JPY", "CNY", "OTHER"],
        fieldName: "currency",
        editable: true,
        filter: true,
        options: {
          type: "default",
          placeholder: "Select Currency"
        }
      },
      {
        title: "Issue Date",
        width: 80,
        // Slightly wider for "Issue Date" header
        type: "calendar",
        options: { format: "YYYY-MM-DD" },
        fieldName: "issueDate",
        editable: true,
        filter: true
      },
      {
        title: "Due Date",
        width: 80,
        // Excel-like width
        type: "calendar",
        options: { format: "YYYY-MM-DD" },
        fieldName: "dueDate",
        editable: true,
        filter: true
      },
      {
        title: "Terms",
        width: 50,
        // Excel-like width
        type: "text",
        fieldName: "paymentTerms",
        editable: true,
        filter: true
      },
      {
        title: "Status",
        width: 80,
        // Excel-like width
        type: "dropdown",
        source: ["pending", "approved", "rejected", "paid", "on_hold", "requires_review", "partially_approved", "ready_for_payment", "duplicate", "unknown"],
        fieldName: "status",
        editable: true,
        filter: true
      },
      {
        title: "\u{1F4E4}",
        // Gmail icon column (moved next to Status)
        width: 30,
        // Excel-like width
        type: "html",
        readOnly: true,
        fieldName: null,
        editable: false
      },
      {
        title: "Approver",
        width: 80,
        // Excel-like width
        type: "dropdown",
        source: ["PENDING", "APPROVED", "REJECTED"],
        fieldName: "approvalStatus",
        editable: true,
        filter: true,
        options: {
          type: "default",
          placeholder: "Select Status"
        }
      },
      {
        title: "Notes",
        width: 120,
        // Excel-like width
        type: "text",
        fieldName: "notes",
        editable: true,
        filter: true
      },
      {
        title: "Actions",
        width: 60,
        // Excel-like width
        type: "html",
        readOnly: true,
        fieldName: null,
        editable: false
      }
    ];
    const pdfCache = /* @__PURE__ */ new Map();
    const spreadsheetData = transformDataForSpreadsheet(data);
    console.log("[SPREADSHEET] \u{1F4CA} Transformed data for jspreadsheet:", spreadsheetData);
    console.log("[SPREADSHEET] \u{1F4CB} Number of rows to display:", spreadsheetData.length);
    const metaInformation = generateMetaInformation(data);
    const containerDimensions = calculateOptimalDimensions(container);
    const isLargeDataset = spreadsheetData.length > 50;
    console.log("[JS001] Creating jspreadsheet, data rows:", spreadsheetData.length);
    console.log("[JS001] Column configuration:", columns);
    if (typeof jspreadsheet === "undefined") {
      console.error("[JS001] jspreadsheet library not loaded!");
      throw new Error("jspreadsheet library is not available");
    }
    console.log("[JS001] jspreadsheet library loaded:", typeof jspreadsheet);
    const originalAppendChild = document.body.appendChild;
    const originalInsertBefore = document.body.insertBefore;
    const applyDropdownFix = (node) => {
      if (node && node.classList && (node.classList.contains("jdropdown-container") || node.classList.contains("jdropdown-backdrop") || node.classList.contains("jcontextmenu") || node.classList.contains("jdropdown-menu") || node.classList.contains("jdropdown-content") || node.classList.contains("jdropdown-item") || node.classList.contains("jdropdown-header") || node.classList.contains("jdropdown-searchbar") || node.className.includes("jdropdown"))) {
        node.style.zIndex = "999999";
        node.style.overflow = "visible";
        node.style.position = "fixed";
        console.log("[DROPDOWN FIX] Applied z-index fix to:", node.className, node);
        setTimeout(() => {
          if (node.style.display === "none") {
            node.style.display = "block";
          }
          if (node.style.visibility === "hidden") {
            node.style.visibility = "visible";
          }
        }, 10);
      }
    };
    document.body.appendChild = function(node) {
      applyDropdownFix(node);
      return originalAppendChild.call(this, node);
    };
    document.body.insertBefore = function(node, referenceNode) {
      applyDropdownFix(node);
      return originalInsertBefore.call(this, node, referenceNode);
    };
    const observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        mutation.addedNodes.forEach(function(node) {
          if (node.nodeType === 1 && node.classList && (node.classList.contains("jdropdown-container") || node.classList.contains("jdropdown-backdrop") || node.classList.contains("jcontextmenu"))) {
            node.style.zIndex = "999999";
            node.style.overflow = "visible";
            console.log("[DROPDOWN FIX] MutationObserver applied z-index fix to:", node.className);
          }
        });
      });
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true
    });
    const spreadsheet = jspreadsheet(cleanContainer, {
      toolbar: true,
      // Enable the toolbar with tools
      worksheets: [{
        data: spreadsheetData,
        columns,
        meta: metaInformation,
        // Hidden metadata for linking to Gmail threads/messages
        // === ROW HEIGHT CONFIGURATION ===
        defaultRowHeight: 12,
        // Excel-like compact row height
        minDimensions: [15, 100],
        // [columns, rows] - ensure we have enough space
        // === PAGINATION CONFIGURATION ===
        pagination: 10,
        // Show 10 rows per page
        paginationOptions: [10, 25, 50, 100],
        // Available page size options
        showPagination: true,
        // Ensure pagination controls are visible
        // === SEARCH CONFIGURATION ===
        search: true,
        // Enable search functionality
        // === USE JSPREADSHEET DEFAULTS ===
        allowComments: true,
        tableOverflow: true,
        // Built-in scrolling
        tableWidth: "100%",
        tableHeight: "auto",
        editable: true,
        allowInsertRow: true,
        allowDeleteRow: true,
        allowInsertColumn: true,
        allowDeleteColumn: true,
        allowRenameColumn: true,
        // Enable column header editing
        columnSorting: true,
        columnResize: true,
        rowResize: true,
        filters: true,
        // Enhanced scrolling options
        scrollbars: true,
        horizontalScroll: true,
        verticalScroll: true
      }],
      // === SEARCH EVENT HANDLERS ===
      // Let jspreadsheet handle search natively
      // === ENHANCE EXISTING SEARCH WITH REAL-TIME FUNCTIONALITY ===
      oncreateworksheet: function(worksheet) {
        console.log("[DROPDOWN] Worksheet created - initializing dropdown functionality");
        console.log("[DROPDOWN] Worksheet element:", worksheet.element);
        setTimeout(() => {
          console.log("[DROPDOWN] Initializing dropdown cells...");
          if (typeof window.jsuites === "undefined") {
            console.warn("[DROPDOWN] jsuites not available - dropdowns may not work properly");
            return;
          }
          const dropdownCells = worksheet.element.querySelectorAll(".jss_dropdown");
          console.log("[DROPDOWN] Found dropdown cells:", dropdownCells.length);
          dropdownCells.forEach((cell, index) => {
            console.log(`[DROPDOWN] Initializing cell ${index}:`, cell);
            if (!cell.classList.contains("jss_dropdown")) {
              cell.classList.add("jss_dropdown");
            }
            cell.addEventListener("click", function(e) {
              console.log("[DROPDOWN] Cell clicked:", cell);
              e.stopPropagation();
              if (cell.querySelector(".jdropdown-container") === null) {
                console.log("[DROPDOWN] Manually triggering dropdown for cell");
                const event = new Event("click", { bubbles: true });
                cell.dispatchEvent(event);
              }
            });
            cell.style.cursor = "pointer";
            cell.title = "Click to open dropdown";
          });
          const filterCells = worksheet.element.querySelectorAll(".jss_column_filter");
          console.log("[DROPDOWN] Found filter cells:", filterCells.length);
          filterCells.forEach((cell, index) => {
            console.log(`[DROPDOWN] Initializing filter cell ${index}:`, cell);
            cell.style.cursor = "pointer";
            cell.title = "Click to filter";
            if (!cell.classList.contains("jss_column_filter")) {
              cell.classList.add("jss_column_filter");
            }
            cell.addEventListener("click", function(e) {
              console.log("[FILTER] Filter cell clicked:", cell);
              e.stopPropagation();
              const columnIndex = Array.from(cell.parentNode.children).indexOf(cell);
              const columnDef = columns[columnIndex];
              if (columnDef && columnDef.filter) {
                console.log("[FILTER] Column is filterable:", columnDef.title);
              }
            });
          });
          const filterRow = worksheet.element.querySelector("thead tr.jss_filter");
          if (filterRow) {
            console.log("[FILTER] Found filter row, ensuring proper styling");
            filterRow.style.background = "#10b981";
            filterRow.style.color = "white";
            const filterCellsInRow = filterRow.querySelectorAll("td");
            filterCellsInRow.forEach((cell, index) => {
              cell.style.background = "#10b981";
              cell.style.color = "white";
              cell.style.border = "1px solid #047857";
              if (!cell.querySelector(".jss_column_filter")) {
                cell.classList.add("jss_column_filter");
              }
            });
          }
        }, 1500);
        console.log("[SEARCH] oncreateworksheet event fired!");
        console.log("[SEARCH] Worksheet element:", worksheet.element);
        setTimeout(() => {
          const existingSearchInput = worksheet.element.querySelector('input[type="text"]') || worksheet.element.querySelector(".jss_search") || worksheet.element.querySelector('input[placeholder*="Search"]') || worksheet.element.querySelector('input[placeholder*="search"]');
          console.log("[SEARCH] Found existing search input:", !!existingSearchInput);
          if (existingSearchInput) {
            existingSearchInput.addEventListener("input", (e) => {
              const searchTerm = e.target.value;
              console.log("[SEARCH] Real-time input change:", searchTerm);
              if (worksheet.search) {
                worksheet.search(searchTerm);
              }
            });
            existingSearchInput.addEventListener("keydown", (e) => {
              if (e.key === "Enter") {
                const searchTerm = e.target.value;
                console.log("[SEARCH] Enter pressed, searching for:", searchTerm);
                if (worksheet.search) {
                  worksheet.search(searchTerm);
                }
              }
            });
            console.log("[SEARCH] Real-time search functionality added to existing input");
          } else {
            console.log("[SEARCH] No existing search input found, creating custom one");
            const searchContainer = document.createElement("div");
            searchContainer.style.cssText = `
          display: flex;
          align-items: center;
          gap: 10px;
          margin: 10px 0;
          padding: 10px;
          background: #059669;
          border-radius: 4px;
        `;
            const searchInput = document.createElement("input");
            searchInput.type = "text";
            searchInput.placeholder = "Search invoices...";
            searchInput.style.cssText = `
          flex: 1;
          padding: 8px 12px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
        `;
            const searchButton = document.createElement("button");
            searchButton.textContent = "Search";
            searchButton.style.cssText = `
          padding: 8px 16px;
          background: #007bff;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 14px;
        `;
            const performSearch = () => {
              const searchTerm = searchInput.value;
              console.log("[SEARCH] Custom search for:", searchTerm);
              if (worksheet.search) {
                worksheet.search(searchTerm);
              }
            };
            searchButton.addEventListener("click", performSearch);
            searchInput.addEventListener("input", (e) => {
              const searchTerm = e.target.value;
              console.log("[SEARCH] Custom real-time search:", searchTerm);
              if (worksheet.search) {
                worksheet.search(searchTerm);
              }
            });
            searchInput.addEventListener("keydown", (e) => {
              if (e.key === "Enter") {
                performSearch();
              }
            });
            searchContainer.appendChild(searchInput);
            searchContainer.appendChild(searchButton);
            worksheet.element.insertBefore(searchContainer, worksheet.element.firstChild);
            console.log("[SEARCH] Custom search container created");
          }
        }, 1e3);
      },
      // === FIELD EDIT HANDLER (v5 top-level) ===
      onchange: function(instance, cell, x2, y2, value) {
        console.log("[JS002] Cell edit triggered, x:", x2, "y:", y2, "value:", value);
        const columnIndex = parseInt(x2);
        const rowIndex = parseInt(y2);
        const columnDef = columns[columnIndex];
        if (!columnDef || !columnDef.fieldName || !columnDef.editable) {
          return;
        }
        const invoice = data[rowIndex];
        if (!invoice) return;
        console.log(`[JS003] Processing field: ${columnDef.fieldName} = ${value}`);
        handleFieldEdit(invoice, columnDef.fieldName, value, rowIndex, correctionsBatcher);
      }
    });
    const sheet = Array.isArray(spreadsheet) ? spreadsheet[0] : spreadsheet;
    console.log("[JS005] sheets:", Array.isArray(spreadsheet) ? spreadsheet.length : 1);
    setTimeout(() => {
      const fullscreenButton = cleanContainer.querySelector('.jss_toolbar button[title*="fullscreen"], .jss_toolbar button[title*="Fullscreen"], .jss_toolbar button[aria-label*="fullscreen"]');
      if (fullscreenButton) {
        console.log("[FULLSCREEN] Found fullscreen button, adding click handler");
        fullscreenButton.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();
          console.log("[FULLSCREEN] Toggle fullscreen clicked");
          const isFullscreen = mainWrapper.classList.contains("fullscreen");
          if (isFullscreen) {
            mainWrapper.classList.remove("fullscreen");
            document.body.style.overflow = "";
            console.log("[FULLSCREEN] Exited fullscreen mode");
          } else {
            mainWrapper.classList.add("fullscreen");
            document.body.style.overflow = "hidden";
            console.log("[FULLSCREEN] Entered fullscreen mode");
          }
        });
      } else {
        console.log("[FULLSCREEN] Fullscreen button not found");
      }
    }, 1e3);
    console.log("[SEARCH DEBUG] Sheet object:", sheet);
    console.log("[SEARCH DEBUG] Search method available:", typeof sheet?.search);
    console.log("[SEARCH DEBUG] ResetSearch method available:", typeof sheet?.resetSearch);
    console.log("[SEARCH DEBUG] ShowSearch method available:", typeof sheet?.showSearch);
    setTimeout(() => {
      console.log("[SEARCH FALLBACK] Looking for existing search input");
      const existingSearchInput = cleanContainer.querySelector('input[type="text"]') || cleanContainer.querySelector(".jss_search") || cleanContainer.querySelector('input[placeholder*="Search"]') || cleanContainer.querySelector('input[placeholder*="search"]');
      if (existingSearchInput) {
        console.log("[SEARCH FALLBACK] Found existing search input, adding real-time functionality");
        existingSearchInput.addEventListener("input", (e) => {
          const searchTerm = e.target.value;
          console.log("[SEARCH FALLBACK] Real-time input change:", searchTerm);
          if (sheet && sheet.search) {
            sheet.search(searchTerm);
          }
        });
        existingSearchInput.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            const searchTerm = e.target.value;
            console.log("[SEARCH FALLBACK] Enter pressed, searching for:", searchTerm);
            if (sheet && sheet.search) {
              sheet.search(searchTerm);
            }
          }
        });
        console.log("[SEARCH FALLBACK] Real-time search added to existing input");
      } else {
        console.log("[SEARCH FALLBACK] No existing search found, creating custom one");
        const searchContainer = document.createElement("div");
        searchContainer.style.cssText = `
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 10px 0;
        padding: 10px;
        background: #059669;
        border-radius: 4px;
      `;
        const searchInput = document.createElement("input");
        searchInput.type = "text";
        searchInput.placeholder = "Search invoices...";
        searchInput.style.cssText = `
        flex: 1;
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
      `;
        const searchButton = document.createElement("button");
        searchButton.textContent = "Search";
        searchButton.style.cssText = `
        padding: 8px 16px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
      `;
        const performSearch = () => {
          const searchTerm = searchInput.value;
          console.log("[SEARCH FALLBACK] Custom search for:", searchTerm);
          if (sheet && sheet.search) {
            sheet.search(searchTerm);
          }
        };
        searchButton.addEventListener("click", performSearch);
        searchInput.addEventListener("input", (e) => {
          const searchTerm = e.target.value;
          console.log("[SEARCH FALLBACK] Custom real-time search:", searchTerm);
          if (sheet && sheet.search) {
            sheet.search(searchTerm);
          }
        });
        searchInput.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            performSearch();
          }
        });
        searchContainer.appendChild(searchInput);
        searchContainer.appendChild(searchButton);
        cleanContainer.insertBefore(searchContainer, cleanContainer.firstChild);
        console.log("[SEARCH FALLBACK] Custom search container created");
      }
    }, 2e3);
    const searchControls = {
      // Search for specific terms
      search: (terms) => {
        console.log("[SEARCH] Searching for:", terms);
        if (sheet && sheet.search) {
          sheet.search(terms);
        } else {
          console.warn("[SEARCH] Sheet or search method not available");
        }
      },
      // Reset search and show all rows
      resetSearch: () => {
        console.log("[SEARCH] Resetting search");
        if (sheet && sheet.resetSearch) {
          sheet.resetSearch();
        } else {
          console.warn("[SEARCH] Sheet or resetSearch method not available");
        }
      },
      // Show search input box
      showSearch: () => {
        console.log("[SEARCH] Showing search input");
        if (sheet && sheet.showSearch) {
          sheet.showSearch();
        } else {
          console.warn("[SEARCH] Sheet or showSearch method not available");
        }
      },
      // Hide search input box
      hideSearch: () => {
        console.log("[SEARCH] Hiding search input");
        if (sheet && sheet.hideSearch) {
          sheet.hideSearch();
        } else {
          console.warn("[SEARCH] Sheet or hideSearch method not available");
        }
      },
      // Update search results
      updateSearch: () => {
        console.log("[SEARCH] Updating search results");
        if (sheet && sheet.updateSearch) {
          sheet.updateSearch();
        } else {
          console.warn("[SEARCH] Sheet or updateSearch method not available");
        }
      },
      // Debug method to check search functionality
      debugSearch: () => {
        console.log("[SEARCH DEBUG] Sheet available:", !!sheet);
        console.log("[SEARCH DEBUG] Sheet methods:", sheet ? Object.getOwnPropertyNames(sheet) : "N/A");
        console.log("[SEARCH DEBUG] Search input element:", document.querySelector(".jss_search"));
        console.log("[SEARCH DEBUG] Search container:", document.querySelector(".jspreadsheet-search"));
        console.log("[SEARCH DEBUG] All search inputs:", document.querySelectorAll(".jss_search"));
        console.log("[SEARCH DEBUG] All filter containers:", document.querySelectorAll(".jss_filter"));
        console.log("[SEARCH DEBUG] Sheet element:", sheet ? sheet.element : "N/A");
        console.log("[SEARCH DEBUG] Sheet search method:", sheet ? typeof sheet.search : "N/A");
        if (sheet && sheet.element) {
          const searchInSheet = sheet.element.querySelector(".jss_search");
          console.log("[SEARCH DEBUG] Search input in sheet element:", !!searchInSheet);
          if (searchInSheet) {
            console.log("[SEARCH DEBUG] Search input value:", searchInSheet.value);
            console.log("[SEARCH DEBUG] Search input events:", searchInSheet.oninput, searchInSheet.onkeydown);
          }
        }
      },
      // Debug method to check dropdown functionality
      debugDropdowns: () => {
        console.log("[DROPDOWN DEBUG] jsuites available:", typeof window.jsuites);
        console.log("[DROPDOWN DEBUG] jspreadsheet available:", typeof jspreadsheet);
        if (sheet && sheet.element) {
          const dropdownCells = sheet.element.querySelectorAll(".jss_dropdown");
          console.log("[DROPDOWN DEBUG] Dropdown cells found:", dropdownCells.length);
          dropdownCells.forEach((cell, index) => {
            console.log(`[DROPDOWN DEBUG] Cell ${index}:`, {
              element: cell,
              classes: cell.className,
              textContent: cell.textContent,
              hasDropdown: !!cell.querySelector(".jdropdown-container")
            });
          });
          const filterCells = sheet.element.querySelectorAll(".jss_column_filter");
          console.log("[DROPDOWN DEBUG] Filter cells found:", filterCells.length);
          const allDropdowns = document.querySelectorAll(".jdropdown-container");
          console.log("[DROPDOWN DEBUG] Active dropdowns:", allDropdowns.length);
        }
      }
    };
    console.log("[POPOUT] Setting up click event delegation on spreadsheet container");
    setTimeout(() => {
      cleanContainer.addEventListener("click", function(e) {
        const clickedElement = e.target.closest(".gmail-popout-icon");
        if (clickedElement) {
          console.log("[POPOUT] Clicked on Gmail popout icon");
          const threadId = clickedElement.getAttribute("data-thread-id");
          const messageId = clickedElement.getAttribute("data-message-id");
          console.log("[POPOUT] Retrieved data from icon:", { threadId, messageId });
          const accountPath = window.getCurrentGmailAccount ? window.getCurrentGmailAccount() : "/u/0";
          console.log("[POPOUT] Current Gmail account detected:", accountPath);
          if (messageId && messageId !== "undefined") {
            const gmailMessageUrl = `https://mail.google.com/mail${accountPath}/#inbox/${messageId}`;
            console.log("[POPOUT] Opening Gmail message with sidebar action:", gmailMessageUrl);
            window.location.href = `${gmailMessageUrl}?stamp_action=open_sidebar`;
          } else if (threadId && threadId !== "undefined") {
            const gmailThreadUrl = `https://mail.google.com/mail${accountPath}/#inbox/${threadId}`;
            console.log("[POPOUT] Opening Gmail thread with sidebar action:", gmailThreadUrl);
            window.location.href = `${gmailThreadUrl}?stamp_action=open_sidebar`;
          } else {
            console.warn("[POPOUT] No valid threadId or messageId found on the icon.");
          }
        }
      });
      let previewEl = null;
      let overlayEl = null;
      let previewTimeout = null;
      let isPreviewHovered = false;
      const showPreview = (iconEl) => {
        if (previewTimeout) {
          clearTimeout(previewTimeout);
          previewTimeout = null;
        }
        const docUrl = iconEl.getAttribute("data-doc-url");
        const thumbUrl = iconEl.getAttribute("data-thumb-url");
        if (!docUrl) return;
        const rect = iconEl.getBoundingClientRect();
        if (!previewEl) {
          previewEl = document.createElement("div");
          previewEl.style.cssText = "position:fixed; z-index:2147483646; width:360px; height:280px; background:#fff; box-shadow:0 20px 40px rgba(0,0,0,0.15), 0 8px 16px rgba(0,0,0,0.1), 0 0 0 1px rgba(0,0,0,0.05); border:none; border-radius:16px; overflow:hidden; backdrop-filter:blur(12px); transform:scale(1); transition:all 0.2s ease;";
          document.body.appendChild(previewEl);
          previewEl.addEventListener("mouseenter", () => {
            isPreviewHovered = true;
            if (previewTimeout) {
              clearTimeout(previewTimeout);
              previewTimeout = null;
            }
          });
          previewEl.addEventListener("mouseleave", () => {
            isPreviewHovered = false;
            previewTimeout = setTimeout(() => {
              if (!isPreviewHovered) {
                previewEl.style.display = "none";
              }
            }, 100);
          });
        }
        const previewContent = thumbUrl ? `<div style="display:flex; flex-direction:column; height:100%; background:#fff; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;">
           <div style="flex:1; background:url('${thumbUrl}') center/cover; display:flex; align-items:center; justify-content:center; background-color:#4CAF50; border-radius:12px 12px 0 0; position:relative; min-height:160px;">
             <div style="text-align:center; color:#fff; font-size:16px; background:rgba(0,0,0,0.1); padding:20px; border-radius:12px; backdrop-filter:blur(4px); border:1px solid rgba(255,255,255,0.2);">
               <div style="font-size:32px; margin-bottom:12px; filter:drop-shadow(0 2px 4px rgba(0,0,0,0.3));">\u{1F4C4}</div>
               <div style="font-weight:700; margin-bottom:6px; font-size:18px; text-shadow:0 1px 2px rgba(0,0,0,0.3);">Sample Invoice</div>
               <div style="font-size:13px; opacity:0.9; font-weight:500;">Sample Document Preview</div>
               <div style="font-size:11px; opacity:0.8; margin-top:4px;">Click to open full document</div>
             </div>
           </div>
           <div style="padding:16px; background:linear-gradient(135deg, #10b981 0%, #059669 100%); border-top:1px solid #065f46; text-align:center; border-radius:0 0 12px 12px;">
             <button id="preview-open-doc-btn" data-doc-url="${docUrl}" style="background:linear-gradient(135deg, #1a73e8 0%, #1557b0 100%); color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-size:14px; font-weight:600; transition:all 0.2s ease; box-shadow:0 2px 8px rgba(26,115,232,0.3); min-width:140px;">Open Document</button>
           </div>
         </div>` : `<div style="display:flex; flex-direction:column; height:100%; background:#fff; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;">
           <div style="flex:1; display:flex; align-items:center; justify-content:center; background:linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius:12px 12px 0 0; position:relative; min-height:160px;">
             <div style="text-align:center; color:#fff; font-size:16px; background:rgba(0,0,0,0.1); padding:20px; border-radius:12px; backdrop-filter:blur(4px); border:1px solid rgba(255,255,255,0.2);">
               <div style="font-size:32px; margin-bottom:12px; filter:drop-shadow(0 2px 4px rgba(0,0,0,0.3));">\u{1F4C4}</div>
               <div style="font-weight:700; margin-bottom:6px; font-size:18px; text-shadow:0 1px 2px rgba(0,0,0,0.3);">Document Preview</div>
               <div style="font-size:13px; opacity:0.9; font-weight:500;">Click to open document</div>
               <div style="font-size:11px; opacity:0.8; margin-top:4px;">External documents open in new tab</div>
             </div>
           </div>
           <div style="padding:16px; background:linear-gradient(135deg, #10b981 0%, #059669 100%); border-top:1px solid #065f46; text-align:center; border-radius:0 0 12px 12px;">
             <button id="preview-open-doc-btn" data-doc-url="${docUrl}" style="background:linear-gradient(135deg, #1a73e8 0%, #1557b0 100%); color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-size:14px; font-weight:600; transition:all 0.2s ease; box-shadow:0 2px 8px rgba(26,115,232,0.3); min-width:140px;">Open Document</button>
           </div>
         </div>`;
        previewEl.innerHTML = previewContent;
        const openDocBtn = previewEl.querySelector("#preview-open-doc-btn");
        if (openDocBtn) {
          openDocBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            const docUrl2 = openDocBtn.getAttribute("data-doc-url");
            if (docUrl2) {
              window.open(docUrl2, "_blank");
            }
          });
          openDocBtn.addEventListener("mouseenter", () => {
            openDocBtn.style.background = "linear-gradient(135deg, #1557b0 0%, #0d47a1 100%)";
            openDocBtn.style.transform = "translateY(-2px) scale(1.02)";
            openDocBtn.style.boxShadow = "0 4px 12px rgba(26,115,232,0.4)";
          });
          openDocBtn.addEventListener("mouseleave", () => {
            openDocBtn.style.background = "linear-gradient(135deg, #1a73e8 0%, #1557b0 100%)";
            openDocBtn.style.transform = "translateY(0) scale(1)";
            openDocBtn.style.boxShadow = "0 2px 8px rgba(26,115,232,0.3)";
          });
        }
        const bridge = document.createElement("div");
        bridge.style.cssText = "position:absolute; z-index:2147483645; width:20px; height:8px; background:transparent; top:-8px; left:10px;";
        previewEl.appendChild(bridge);
        bridge.addEventListener("mouseenter", () => {
          isPreviewHovered = true;
          if (previewTimeout) {
            clearTimeout(previewTimeout);
            previewTimeout = null;
          }
        });
        const rectLeft = Math.max(8, rect.left - 20);
        previewEl.style.top = `${Math.round(rect.bottom + 4)}px`;
        previewEl.style.left = `${Math.round(rectLeft)}px`;
        previewEl.style.display = "block";
        previewEl.style.opacity = "0";
        previewEl.style.transform = "scale(0.9) translateY(10px)";
        requestAnimationFrame(() => {
          previewEl.style.transition = "all 0.2s ease";
          previewEl.style.opacity = "1";
          previewEl.style.transform = "scale(1) translateY(0)";
        });
      };
      const hidePreview = () => {
        previewTimeout = setTimeout(() => {
          if (!isPreviewHovered && previewEl) {
            previewEl.style.display = "none";
          }
        }, 150);
      };
      const ensureOverlay = () => {
        if (!overlayEl) {
          overlayEl = document.createElement("div");
          overlayEl.style.cssText = "position:fixed; inset:0; background:rgba(32,33,36,0.6); z-index:2147483647; display:flex; align-items:center; justify-content:center;";
          overlayEl.innerHTML = `
          <div style="width:80vw; height:80vh; background:#fff; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,0.35); display:flex; flex-direction:column; overflow:hidden;">
            <div style="padding:10px; border-bottom:1px solid #e0e0e0; display:flex; align-items:center; justify-content:space-between;">
              <div style="font-weight:600; color:#202124;">Document Preview</div>
              <div style="display:flex; align-items:center; gap:8px;">
                <button id="stamp-doc-zoom-out" style="border:none; background:#f3f4f6; color:#374151; padding:6px 10px; border-radius:6px; cursor:pointer; font-weight:600; font-size:14px;">\u2212</button>
                <span id="stamp-doc-zoom-level" style="font-size:14px; color:#374151; min-width:50px; text-align:center;">100%</span>
                <button id="stamp-doc-zoom-in" style="border:none; background:#f3f4f6; color:#374151; padding:6px 10px; border-radius:6px; cursor:pointer; font-weight:600; font-size:14px;">+</button>
                <button id="stamp-doc-fit-width" style="border:none; background:#e5e7eb; color:#374151; padding:6px 10px; border-radius:6px; cursor:pointer; font-weight:600; font-size:12px;">Fit Width</button>
                <button id="stamp-doc-close" style="border:none; background:#eef2f7; color:#1f2937; padding:6px 10px; border-radius:6px; cursor:pointer; font-weight:600;">Close</button>
              </div>
            </div>
            <div id="stamp-doc-container" style="flex:1; overflow:auto; position:relative;">
              <iframe id="stamp-doc-frame" src="" style="width:100%; height:100%; border:0; transform-origin:top left;" loading="eager"></iframe>
            </div>
          </div>`;
          document.body.appendChild(overlayEl);
          let currentZoom = 1;
          const zoomLevel = overlayEl.querySelector("#stamp-doc-zoom-level");
          const iframe = overlayEl.querySelector("#stamp-doc-frame");
          const container2 = overlayEl.querySelector("#stamp-doc-container");
          const updateZoom = (newZoom) => {
            currentZoom = Math.max(0.25, Math.min(3, newZoom));
            iframe.style.transform = `scale(${currentZoom})`;
            iframe.style.width = `${100 / currentZoom}%`;
            iframe.style.height = `${100 / currentZoom}%`;
            zoomLevel.textContent = `${Math.round(currentZoom * 100)}%`;
          };
          const fitToWidth = () => {
            currentZoom = 1;
            iframe.style.transform = "scale(1)";
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            zoomLevel.textContent = "100%";
          };
          overlayEl.querySelector("#stamp-doc-zoom-out").addEventListener("click", (e) => {
            e.stopPropagation();
            updateZoom(currentZoom - 0.25);
          });
          overlayEl.querySelector("#stamp-doc-zoom-in").addEventListener("click", (e) => {
            e.stopPropagation();
            updateZoom(currentZoom + 0.25);
          });
          overlayEl.querySelector("#stamp-doc-fit-width").addEventListener("click", (e) => {
            e.stopPropagation();
            fitToWidth();
          });
          const handleKeydown = (e) => {
            if (e.key === "Escape") {
              overlayEl.style.display = "none";
            } else if (e.key === "+" || e.key === "=") {
              e.preventDefault();
              updateZoom(currentZoom + 0.25);
            } else if (e.key === "-") {
              e.preventDefault();
              updateZoom(currentZoom - 0.25);
            } else if (e.key === "0") {
              e.preventDefault();
              fitToWidth();
            }
          };
          overlayEl.addEventListener("keydown", handleKeydown);
          overlayEl.setAttribute("tabindex", "0");
          overlayEl.focus();
          overlayEl.addEventListener("click", (evt) => {
            if (evt.target && (evt.target.id === "stamp-doc-close" || evt.target === overlayEl)) {
              overlayEl.style.display = "none";
              document.removeEventListener("keydown", handleKeydown);
            }
          });
        }
        ;
        reader.readAsDataURL(blob);
      };
      cleanContainer.addEventListener("mouseout", (e) => {
        const icon = e.target.closest(".doc-preview-icon");
        if (icon) {
          const previewEl2 = document.querySelector(".doc-preview-icon-iframe");
          if (previewEl2) previewEl2.style.display = "none";
        }
      });
      let rightPreviewPanel = null;
      let currentPreviewData = null;
      const showGreenModal = (iconEl) => {
        const docUrl = iconEl.getAttribute("data-doc-url");
        const thumbUrl = iconEl.getAttribute("data-thumb-url");
        const docName = iconEl.getAttribute("data-doc-name") || "Document";
        console.log("[GREEN MODAL] Document data:", { docUrl, thumbUrl, docName });
        if (!docUrl) {
          console.warn("[GREEN MODAL] No document URL found");
          return;
        }
        const modalOverlay = document.createElement("div");
        modalOverlay.style.cssText = `
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 2147483647;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      `;
        const modalContent = `
        <div style="
          width: 400px;
          max-width: 90vw;
          background: linear-gradient(135deg, #10b981 0%, #059669 100%);
          border-radius: 16px;
          box-shadow: 0 20px 40px rgba(0,0,0,0.3);
          position: relative;
          overflow: hidden;
        ">
          <!-- Close button -->
          <button id="green-modal-close" style="
            position: absolute;
            top: 16px;
            right: 16px;
            width: 32px;
            height: 32px;
            border: none;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            transition: all 0.2s ease;
          " onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">\xD7</button>
          
          <!-- Document icon -->
          <div style="
            text-align: center;
            padding: 40px 20px 20px 20px;
          ">
            <div style="
              font-size: 48px;
              margin-bottom: 16px;
              filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
            ">\u{1F4C4}</div>
            <div style="
              font-weight: 700;
              margin-bottom: 8px;
              font-size: 20px;
              text-shadow: 0 1px 2px rgba(0,0,0,0.3);
              color: #ffffff;
            ">${docName.replace(".pdf", "").replace(".PDF", "")}</div>
            <div style="
              font-size: 14px;
              opacity: 0.9;
              font-weight: 500;
              color: #ffffff;
              margin-bottom: 4px;
            ">Sample Document Preview</div>
            <div style="
              font-size: 12px;
              opacity: 0.8;
              color: #ffffff;
            ">Click to open full document</div>
          </div>
          
          <!-- Action button -->
          <div style="
            padding: 20px;
            text-align: center;
            background: rgba(255,255,255,0.1);
            border-top: 1px solid rgba(255,255,255,0.2);
          ">
            <button id="green-modal-open-doc" data-doc-url="${docUrl}" style="
              background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%);
              color: white;
              border: none;
              padding: 12px 24px;
              border-radius: 8px;
              cursor: pointer;
              font-size: 14px;
              font-weight: 600;
              transition: all 0.2s ease;
              box-shadow: 0 4px 12px rgba(26,115,232,0.3);
              min-width: 160px;
            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(26,115,232,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(26,115,232,0.3)'">Open Document</button>
          </div>
        </div>
      `;
        modalOverlay.innerHTML = modalContent;
        document.body.appendChild(modalOverlay);
        const closeBtn = modalOverlay.querySelector("#green-modal-close");
        const openDocBtn = modalOverlay.querySelector("#green-modal-open-doc");
        const closeModal = () => {
          modalOverlay.remove();
        };
        closeBtn.addEventListener("click", closeModal);
        modalOverlay.addEventListener("click", (e) => {
          if (e.target === modalOverlay) {
            closeModal();
          }
        });
        openDocBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          closeModal();
          showRightPreview(iconEl);
        });
        const handleKeydown = (e) => {
          if (e.key === "Escape") {
            closeModal();
            document.removeEventListener("keydown", handleKeydown);
          }
        };
        document.addEventListener("keydown", handleKeydown);
        console.log("[GREEN MODAL] Modal should now be visible");
      };
      const showRightPreview = (iconEl) => {
        const docUrl = iconEl.getAttribute("data-doc-url");
        const thumbUrl = iconEl.getAttribute("data-thumb-url");
        const docName = iconEl.getAttribute("data-doc-name") || "Document";
        console.log("[PREVIEW] Document data:", { docUrl, thumbUrl, docName });
        if (!docUrl) {
          console.warn("[PREVIEW] No document URL found");
          return;
        }
        const isImage = /\.(jpg|jpeg|png|gif|webp|svg|bmp|tiff)$/i.test(docUrl);
        const isPdf = /\.pdf$/i.test(docUrl);
        const fileType = isImage ? "Image" : isPdf ? "PDF Document" : "Document";
        console.log("[PREVIEW] Document URL is:", docUrl);
        console.log("[PREVIEW] Document name is:", docName);
        console.log("[PREVIEW] File type detected:", fileType);
        if (!rightPreviewPanel) {
          rightPreviewPanel = document.createElement("div");
          rightPreviewPanel.id = "stamp-right-preview-panel";
          rightPreviewPanel.style.cssText = `
          position: fixed;
          top: 0;
          right: 0;
          width: 400px;
          height: 100vh;
          background: #10b981;
          border-left: 1px solid #059669;
          box-shadow: -4px 0 12px rgba(0,0,0,0.1);
          z-index: 2147483647;
          display: none;
          flex-direction: column;
          transform: translateX(100%);
          transition: transform 0.3s ease;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        `;
          const closeBtn = document.createElement("button");
          closeBtn.innerHTML = "\xD7";
          closeBtn.style.cssText = `
          position: absolute;
          top: 16px;
          right: 16px;
          width: 32px;
          height: 32px;
          border: none;
          background: #059669;
          border-radius: 50%;
          cursor: pointer;
          font-size: 18px;
          font-weight: bold;
          color: #ffffff;
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1001;
        `;
          closeBtn.addEventListener("click", () => {
            hideRightPreview();
          });
          rightPreviewPanel.appendChild(closeBtn);
          document.body.appendChild(rightPreviewPanel);
        }
        const previewContent = `
        <div style="flex: 1; display: flex; flex-direction: column; padding: 20px; overflow-y: auto;">
          <div style="margin-bottom: 20px;">
            <h3 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 600; color: #ffffff;">Document Preview</h3>
            <p style="margin: 0; font-size: 14px; color: #ffffff;">${docName}</p>
          </div>
          
          <div style="flex: 1; display: flex; flex-direction: column; background: #059669; border-radius: 8px; overflow: hidden; margin-bottom: 20px; position: relative;">
            ${docUrl ? `
              <div style="flex: 1; min-height: 300px; position: relative; background: #059669; border-radius: 8px 8px 0 0; overflow: hidden;">
                ${isImage ? `
                  <!-- Image Viewer Container -->
                  <div id="image-viewer-container" style="width: 100%; height: 100%; position: relative; background: #10b981; display: flex; align-items: center; justify-content: center;">
                    <div id="image-loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #ffffff;">
                      <div style="font-size: 24px; margin-bottom: 12px;">\u{1F5BC}\uFE0F</div>
                      <div style="font-size: 16px; font-weight: 500;">Loading Image...</div>
                      <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Please wait</div>
                    </div>
                    <div id="image-error" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #fbbf24;">
                      <div style="font-size: 24px; margin-bottom: 12px;">\u26A0\uFE0F</div>
                      <div style="font-size: 16px; font-weight: 500;">Failed to load Image</div>
                      <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Click "View Image" to open in new tab</div>
                    </div>
                    <img id="preview-image" 
                      src="${docUrl}" 
                      style="max-width: 100%; max-height: 100%; object-fit: contain; display: none; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                  </div>
                ` : `
                  <!-- PDF Viewer Container -->
                  <div id="pdf-viewer-container" style="width: 100%; height: 100%; position: relative; background: #10b981;">
                    <div id="pdf-loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #ffffff;">
                      <div style="font-size: 24px; margin-bottom: 12px;">\u{1F4C4}</div>
                      <div style="font-size: 16px; font-weight: 500;">Loading PDF...</div>
                      <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Please wait</div>
                    </div>
                    <div id="pdf-error" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #fbbf24;">
                      <div style="font-size: 24px; margin-bottom: 12px;">\u26A0\uFE0F</div>
                      <div style="font-size: 16px; font-weight: 500;">Failed to load PDF</div>
                      <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Click "View PDF" to open in new tab</div>
                    </div>
                    <iframe id="pdf-google-viewer" 
                      src="https://docs.google.com/gview?url=${encodeURIComponent(docUrl)}&embedded=true" 
                      style="width: 100%; height: 100%; border: none; display: none;">
                    </iframe>
                  </div>
                `}
                
                <!-- Document Info Card -->
                <div style="background: #059669; padding: 16px; border-top: 1px solid #065f46;">
                  <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #ffffff;">Document Details</div>
                  <div style="font-size: 12px; color: #ffffff; margin-bottom: 4px;"><strong>File:</strong> ${docName}</div>
                  <div style="font-size: 12px; color: #ffffff; margin-bottom: 4px;"><strong>Type:</strong> ${fileType}</div>
                  <div style="font-size: 12px; color: #ffffff; margin-bottom: 8px;"><strong>Status:</strong> <span id="document-status">Loading...</span></div>
                  
                  <!-- Quick Actions -->
                  <div style="display: flex; gap: 8px; margin-top: 12px; justify-content: center;">
                    <button id="preview-quick-view-btn" data-doc-url="${docUrl}" style="
                      padding: 6px 12px; 
                      background: #10b981; 
                      color: white; 
                      border: none; 
                      border-radius: 4px; 
                      cursor: pointer; 
                      font-size: 11px; 
                      font-weight: 500;
                      transition: all 0.2s ease;
                    ">
                      View ${isImage ? "Image" : "PDF"}
                    </button>
                    <button id="preview-quick-download-btn" data-doc-url="${docUrl}" data-doc-name="${docName}" style="
                      padding: 6px 12px; 
                      background: #059669; 
                      color: white; 
                      border: none; 
                      border-radius: 4px; 
                      cursor: pointer; 
                      font-size: 11px; 
                      font-weight: 500;
                      transition: all 0.2s ease;
                    ">
                      Download
                    </button>
                    <button id="preview-quick-copy-btn" data-doc-url="${docUrl}" style="
                      padding: 6px 12px; 
                      background: #047857; 
                      color: white; 
                      border: none; 
                      border-radius: 4px; 
                      cursor: pointer; 
                      font-size: 11px; 
                      font-weight: 500;
                      transition: all 0.2s ease;
                    ">
                      Copy Link
                    </button>
                  </div>
                </div>
              </div>
            ` : `
              <div style="flex: 1; display: flex; align-items: center; justify-content: center; background: #f5f5f5; min-height: 200px;">
                <div style="text-align: center; color: #ffffff;">
                  <div style="font-size: 48px; margin-bottom: 12px;">\u{1F4C4}</div>
                  <div style="font-size: 16px; font-weight: 500;">Document Preview</div>
                  <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">No document available</div>
                </div>
              </div>
            `}
          </div>
          
          <div style="display: flex; gap: 12px;">
            <button id="preview-open-doc-btn" data-doc-url="${docUrl}" style="
              flex: 1;
              padding: 12px 20px;
              background: linear-gradient(135deg, #10b981 0%, #059669 100%);
              color: white;
              border: none;
              border-radius: 8px;
              cursor: pointer;
              font-size: 14px;
              font-weight: 600;
              transition: all 0.2s ease;
              box-shadow: 0 2px 8px rgba(16,185,129,0.3);
            ">Open Document</button>
            <button id="preview-download-btn" data-doc-url="${docUrl}" data-doc-name="${docName}" style="
              padding: 12px 20px;
              background: #059669;
              color: #ffffff;
              border: 1px solid #047857;
              border-radius: 8px;
              cursor: pointer;
              font-size: 14px;
              font-weight: 500;
              transition: all 0.2s ease;
            ">Download</button>
          </div>
        </div>
      `;
        rightPreviewPanel.innerHTML = previewContent;
        const previewImage = rightPreviewPanel.querySelector("#preview-image");
        const imageLoading = rightPreviewPanel.querySelector("#image-loading");
        const imageError = rightPreviewPanel.querySelector("#image-error");
        const documentStatus = rightPreviewPanel.querySelector("#document-status");
        if (previewImage) {
          const handleImageLoad = () => {
            console.log("[PREVIEW] Image loaded successfully");
            if (imageLoading) imageLoading.style.display = "none";
            if (imageError) imageError.style.display = "none";
            if (previewImage) previewImage.style.display = "block";
            if (documentStatus) documentStatus.textContent = "Ready to View";
          };
          const handleImageError = () => {
            console.log("[PREVIEW] Image failed to load");
            if (imageLoading) imageLoading.style.display = "none";
            if (imageError) imageError.style.display = "block";
            if (previewImage) previewImage.style.display = "none";
            if (documentStatus) documentStatus.textContent = "Failed to Load";
          };
          previewImage.addEventListener("load", handleImageLoad);
          previewImage.addEventListener("error", handleImageError);
          setTimeout(() => {
            if (imageLoading && imageLoading.style.display !== "none") {
              console.log("[PREVIEW] Image loading timeout");
              handleImageError();
            }
          }, 5e3);
        }
        const pdfGoogleViewer = rightPreviewPanel.querySelector("#pdf-google-viewer");
        const pdfLoading = rightPreviewPanel.querySelector("#pdf-loading");
        const pdfError = rightPreviewPanel.querySelector("#pdf-error");
        if (pdfGoogleViewer) {
          const handlePdfLoad = () => {
            console.log("[PREVIEW] PDF loaded successfully via Google Docs viewer");
            if (pdfLoading) pdfLoading.style.display = "none";
            if (pdfError) pdfError.style.display = "none";
            if (pdfGoogleViewer) pdfGoogleViewer.style.display = "block";
            if (documentStatus) documentStatus.textContent = "Ready to View";
          };
          const handlePdfError = () => {
            console.log("[PREVIEW] PDF failed to load via Google Docs viewer");
            if (pdfLoading) pdfLoading.style.display = "none";
            if (pdfError) pdfError.style.display = "block";
            if (pdfGoogleViewer) pdfGoogleViewer.style.display = "none";
            if (documentStatus) documentStatus.textContent = 'Cannot Embed - Click "View PDF"';
          };
          pdfGoogleViewer.addEventListener("load", handlePdfLoad);
          pdfGoogleViewer.addEventListener("error", handlePdfError);
          setTimeout(() => {
            if (pdfLoading && pdfLoading.style.display !== "none") {
              console.log("[PREVIEW] PDF loading timeout - trying Google Docs viewer");
              handlePdfError();
            }
          }, 8e3);
          const originalError = console.error;
          console.error = function(...args) {
            if (args[0] && args[0].includes && args[0].includes("Refused to frame")) {
              console.log("[PREVIEW] Detected CSP frame error");
              setTimeout(() => handlePdfError(), 1e3);
            }
            originalError.apply(console, args);
          };
        }
        const openDocBtn = rightPreviewPanel.querySelector("#preview-open-doc-btn");
        const downloadBtn = rightPreviewPanel.querySelector("#preview-download-btn");
        if (openDocBtn) {
          openDocBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            const docUrl2 = openDocBtn.getAttribute("data-doc-url");
            if (docUrl2) {
              window.open(docUrl2, "_blank");
            }
          });
          openDocBtn.addEventListener("mouseenter", () => {
            openDocBtn.style.background = "linear-gradient(135deg, #1557b0 0%, #0d47a1 100%)";
            openDocBtn.style.transform = "translateY(-1px)";
            openDocBtn.style.boxShadow = "0 4px 12px rgba(26,115,232,0.4)";
          });
          openDocBtn.addEventListener("mouseleave", () => {
            openDocBtn.style.background = "linear-gradient(135deg, #1a73e8 0%, #1557b0 100%)";
            openDocBtn.style.transform = "translateY(0)";
            openDocBtn.style.boxShadow = "0 2px 8px rgba(26,115,232,0.3)";
          });
        }
        if (downloadBtn) {
          downloadBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            const docUrl2 = downloadBtn.getAttribute("data-doc-url");
            if (docUrl2) {
              const link = document.createElement("a");
              link.href = docUrl2;
              link.download = docName;
              link.click();
            }
          });
          downloadBtn.addEventListener("mouseenter", () => {
            downloadBtn.style.background = "#e5e7eb";
            downloadBtn.style.borderColor = "#9ca3af";
          });
          downloadBtn.addEventListener("mouseleave", () => {
            downloadBtn.style.background = "#f8f9fa";
            downloadBtn.style.borderColor = "#d1d5db";
          });
        }
        const quickViewBtn = rightPreviewPanel.querySelector("#preview-quick-view-btn");
        const quickDownloadBtn = rightPreviewPanel.querySelector("#preview-quick-download-btn");
        const quickCopyBtn = rightPreviewPanel.querySelector("#preview-quick-copy-btn");
        if (quickViewBtn) {
          quickViewBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            const docUrl2 = quickViewBtn.getAttribute("data-doc-url");
            if (docUrl2) {
              window.open(docUrl2, "_blank");
            }
          });
          quickViewBtn.addEventListener("mouseenter", () => {
            quickViewBtn.style.background = "rgba(255,255,255,0.3)";
          });
          quickViewBtn.addEventListener("mouseleave", () => {
            quickViewBtn.style.background = "rgba(255,255,255,0.2)";
          });
        }
        if (quickDownloadBtn) {
          quickDownloadBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            const docUrl2 = quickDownloadBtn.getAttribute("data-doc-url");
            const docName2 = quickDownloadBtn.getAttribute("data-doc-name");
            if (docUrl2) {
              const link = document.createElement("a");
              link.href = docUrl2;
              link.download = docName2 || "document.pdf";
              link.click();
            }
          });
          quickDownloadBtn.addEventListener("mouseenter", () => {
            quickDownloadBtn.style.background = "rgba(255,255,255,0.3)";
          });
          quickDownloadBtn.addEventListener("mouseleave", () => {
            quickDownloadBtn.style.background = "rgba(255,255,255,0.2)";
          });
        }
        if (quickCopyBtn) {
          quickCopyBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            const docUrl2 = quickCopyBtn.getAttribute("data-doc-url");
            if (docUrl2) {
              window.copyDocumentLink(docUrl2);
            }
          });
          quickCopyBtn.addEventListener("mouseenter", () => {
            quickCopyBtn.style.background = "rgba(255,255,255,0.3)";
          });
          quickCopyBtn.addEventListener("mouseleave", () => {
            quickCopyBtn.style.background = "rgba(255,255,255,0.2)";
          });
        }
        window.downloadDocument = function(url, filename) {
          console.log("[PREVIEW] Downloading document:", { url, filename });
          try {
            const link = document.createElement("a");
            link.href = url;
            link.download = filename || "document";
            link.click();
          } catch (error) {
            console.error("[PREVIEW] Download failed:", error);
          }
        };
        window.copyDocumentLink = function(url) {
          console.log("[PREVIEW] Copying document link:", url);
          try {
            navigator.clipboard.writeText(url).then(() => {
              const notification = document.createElement("div");
              notification.textContent = "Link copied to clipboard!";
              notification.style.cssText = `
              position: fixed;
              top: 20px;
              right: 20px;
              background: #10b981;
              color: white;
              padding: 12px 20px;
              border-radius: 8px;
              font-size: 14px;
              font-weight: 500;
              z-index: 10000;
              box-shadow: 0 4px 12px rgba(16,185,129,0.3);
            `;
              document.body.appendChild(notification);
              setTimeout(() => {
                document.body.removeChild(notification);
              }, 3e3);
            });
          } catch (error) {
            console.error("[PREVIEW] Copy failed:", error);
            alert("Failed to copy link. Please copy manually: " + url);
          }
        };
        console.log("[PREVIEW] Showing right preview panel");
        console.log("[PREVIEW] Panel element:", rightPreviewPanel);
        console.log("[PREVIEW] Panel computed style before:", window.getComputedStyle(rightPreviewPanel).display);
        rightPreviewPanel.style.display = "flex";
        rightPreviewPanel.offsetHeight;
        console.log("[PREVIEW] Panel computed style after:", window.getComputedStyle(rightPreviewPanel).display);
        console.log("[PREVIEW] Panel position:", rightPreviewPanel.getBoundingClientRect());
        rightPreviewPanel.style.transform = "translateX(0)";
        currentPreviewData = { docUrl, thumbUrl, docName };
        console.log("[PREVIEW] Panel should now be visible");
      };
      const hideRightPreview = () => {
        if (rightPreviewPanel) {
          rightPreviewPanel.style.transform = "translateX(100%)";
          setTimeout(() => {
            if (rightPreviewPanel) {
              rightPreviewPanel.style.display = "none";
            }
          }, 300);
        }
      };
      const showRightPreviewWithBlob = (iconEl, blob2) => {
        const docName = iconEl.getAttribute("data-doc-name") || "Document";
        const docUrl = iconEl.getAttribute("data-doc-url");
        const isImage = blob2.type.startsWith("image/");
        const isPdf = blob2.type === "application/pdf";
        const fileType = isImage ? "Image" : isPdf ? "PDF Document" : "Document";
        console.log("[PREVIEW] Showing preview with blob for:", docName, "Type:", fileType);
        if (!rightPreviewPanel) {
          rightPreviewPanel = document.createElement("div");
          rightPreviewPanel.id = "stamp-right-preview-panel";
          rightPreviewPanel.style.cssText = `
          position: fixed;
          top: 0;
          right: 0;
          width: 400px;
          height: 100vh;
          background: #10b981;
          border-left: 1px solid #059669;
          box-shadow: -4px 0 12px rgba(0,0,0,0.1);
          z-index: 2147483647;
          display: none;
          flex-direction: column;
          transform: translateX(100%);
          transition: transform 0.3s ease;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        `;
          const closeBtn = document.createElement("button");
          closeBtn.innerHTML = "\xD7";
          closeBtn.style.cssText = `
          position: absolute;
          top: 16px;
          right: 16px;
          width: 32px;
          height: 32px;
          border: none;
          background: #059669;
          border-radius: 50%;
          cursor: pointer;
          font-size: 18px;
          font-weight: bold;
          color: #ffffff;
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1001;
        `;
          closeBtn.addEventListener("click", () => {
            hideRightPreview();
          });
          rightPreviewPanel.appendChild(closeBtn);
          document.body.appendChild(rightPreviewPanel);
        }
        const reader2 = new FileReader();
        reader2.onload = () => {
          const dataUrl = reader2.result;
          console.log("[PREVIEW] Blob converted to data URL, length:", dataUrl.length);
          const objectUrl = URL.createObjectURL(blob2);
          let viewerContent = "";
          if (isImage) {
            viewerContent = `
            <!-- Image Viewer Container -->
            <div id="image-viewer-container" style="width: 100%; height: 100%; position: relative; background: #10b981; display: flex; align-items: center; justify-content: center;">
              <div id="image-loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #ffffff;">
                <div style="font-size: 24px; margin-bottom: 12px;">\u{1F5BC}\uFE0F</div>
                <div style="font-size: 16px; font-weight: 500;">Loading Image...</div>
                <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Please wait</div>
              </div>
              <div id="image-error" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #fbbf24;">
                <div style="font-size: 24px; margin-bottom: 12px;">\u26A0\uFE0F</div>
                <div style="font-size: 16px; font-weight: 500;">Failed to load Image</div>
                <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Click "View Image" to open in new tab</div>
              </div>
              <img id="preview-image" 
                src="${dataUrl}" 
                style="max-width: 100%; max-height: 100%; object-fit: contain; display: none; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            </div>
          `;
          } else if (isPdf) {
            viewerContent = `
            <!-- PDF Viewer Container -->
            <div id="pdf-viewer-container" style="width: 100%; height: 100%; position: relative; background: #10b981;">
              <div id="pdf-loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #ffffff;">
                <div style="font-size: 24px; margin-bottom: 12px;">\u{1F4C4}</div>
                <div style="font-size: 16px; font-weight: 500;">Loading PDF...</div>
                <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Please wait</div>
              </div>
              <div id="pdf-error" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #fbbf24;">
                <div style="font-size: 24px; margin-bottom: 12px;">\u26A0\uFE0F</div>
                <div style="font-size: 16px; font-weight: 500;">Failed to load PDF</div>
                <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Click "View PDF" to open in new tab</div>
              </div>
              <iframe id="pdf-iframe" 
                src="${dataUrl}#toolbar=0&navpanes=0&scrollbar=0&page=1&view=FitH" 
                style="width: 100%; height: 100%; border: none; display: none;">
              </iframe>
            </div>
          `;
          } else {
            viewerContent = `
            <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; text-align: center; color: #ffffff;">
              <div>
                <div style="font-size: 24px; margin-bottom: 12px;">\u{1F4C4}</div>
                <div style="font-size: 16px; font-weight: 500;">Unsupported File Type</div>
                <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Click "View Document" to open in new tab</div>
              </div>
            </div>
          `;
          }
          const previewContent = `
          <div style="flex: 1; display: flex; flex-direction: column; padding: 20px; overflow-y: auto;">
            <div style="margin-bottom: 20px;">
              <h3 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 600; color: #ffffff;">Document Preview</h3>
              <p style="margin: 0; font-size: 14px; color: #ffffff;">${docName}</p>
            </div>
            
            <div style="flex: 1; display: flex; flex-direction: column; background: #059669; border-radius: 8px; overflow: hidden; margin-bottom: 20px; position: relative;">
              <div style="flex: 1; min-height: 300px; position: relative; background: #059669; border-radius: 8px 8px 0 0; overflow: hidden;">
                ${viewerContent}
                
                <!-- Document Info Card -->
                <div style="background: #059669; padding: 16px; border-top: 1px solid #065f46;">
                  <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #ffffff;">Document Details</div>
                  <div style="font-size: 12px; color: #ffffff; margin-bottom: 4px;"><strong>File:</strong> ${docName}</div>
                  <div style="font-size: 12px; color: #ffffff; margin-bottom: 4px;"><strong>Type:</strong> ${fileType}</div>
                  <div style="font-size: 12px; color: #ffffff; margin-bottom: 8px;"><strong>Status:</strong> <span id="document-status">Loading...</span></div>
                  
                  <!-- Quick Actions -->
                  <div style="display: flex; gap: 8px; margin-top: 12px; justify-content: center;">
                    <button id="preview-quick-view-btn" data-object-url="${objectUrl}" style="
                      padding: 6px 12px; 
                      background: #1a73e8; 
                      color: white; 
                      border: none; 
                      border-radius: 4px; 
                      cursor: pointer; 
                      font-size: 11px; 
                      font-weight: 500;
                      transition: all 0.2s ease;
                    ">
                      View ${isImage ? "Image" : isPdf ? "PDF" : "Document"}
                    </button>
                    <button id="preview-quick-download-btn" data-object-url="${objectUrl}" data-doc-name="${docName}" style="
                      padding: 6px 12px; 
                      background: #34a853; 
                      color: white; 
                      border: none; 
                      border-radius: 4px; 
                      cursor: pointer; 
                      font-size: 11px; 
                      font-weight: 500;
                      transition: all 0.2s ease;
                    ">
                      Download
                    </button>
                    <button id="preview-quick-copy-btn" data-object-url="${objectUrl}" style="
                      padding: 6px 12px; 
                      background: #ea4335; 
                      color: white; 
                      border: none; 
                      border-radius: 4px; 
                      cursor: pointer; 
                      font-size: 11px; 
                      font-weight: 500;
                      transition: all 0.2s ease;
                    ">
                      Copy Link
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <div style="display: flex; gap: 12px;">
              <button id="preview-open-doc-btn" data-object-url="${objectUrl}" style="
                flex: 1;
                padding: 12px 20px;
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                color: white;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 600;
                transition: all 0.2s ease;
                box-shadow: 0 2px 8px rgba(16,185,129,0.3);
              ">Open Document</button>
              <button id="preview-download-btn" data-object-url="${objectUrl}" data-doc-name="${docName}" style="
                padding: 12px 20px;
                background: #059669;
                color: #ffffff;
                border: 1px solid #047857;
                border-radius: 8px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.2s ease;
              ">Download</button>
            </div>
          </div>
        `;
          rightPreviewPanel.innerHTML = previewContent;
          const documentStatus = rightPreviewPanel.querySelector("#document-status");
          if (isImage) {
            const previewImage = rightPreviewPanel.querySelector("#preview-image");
            const imageLoading = rightPreviewPanel.querySelector("#image-loading");
            const imageError = rightPreviewPanel.querySelector("#image-error");
            if (previewImage) {
              const handleImageLoad = () => {
                console.log("[PREVIEW] Image data URL loaded successfully");
                if (imageLoading) imageLoading.style.display = "none";
                if (imageError) imageError.style.display = "none";
                if (previewImage) previewImage.style.display = "block";
                if (documentStatus) documentStatus.textContent = "Ready to View";
              };
              const handleImageError = () => {
                console.log("[PREVIEW] Image data URL failed to load");
                if (imageLoading) imageLoading.style.display = "none";
                if (imageError) imageError.style.display = "block";
                if (previewImage) previewImage.style.display = "none";
                if (documentStatus) documentStatus.textContent = "Failed to Load";
              };
              previewImage.addEventListener("load", handleImageLoad);
              previewImage.addEventListener("error", handleImageError);
              setTimeout(() => {
                if (imageLoading && imageLoading.style.display !== "none") {
                  console.log("[PREVIEW] Image loading timeout, showing error");
                  handleImageError();
                }
              }, 1e4);
            }
          } else if (isPdf) {
            const pdfIframe = rightPreviewPanel.querySelector("#pdf-iframe");
            const pdfLoading = rightPreviewPanel.querySelector("#pdf-loading");
            const pdfError = rightPreviewPanel.querySelector("#pdf-error");
            if (pdfIframe) {
              const handlePdfLoad = () => {
                console.log("[PREVIEW] PDF data URL loaded successfully via iframe");
                if (pdfLoading) pdfLoading.style.display = "none";
                if (pdfError) pdfError.style.display = "none";
                if (pdfIframe) pdfIframe.style.display = "block";
                if (documentStatus) documentStatus.textContent = "Ready to View";
              };
              const handlePdfError = () => {
                console.log("[PREVIEW] PDF data URL failed to load via iframe");
                if (pdfLoading) pdfLoading.style.display = "none";
                if (pdfError) pdfError.style.display = "block";
                if (pdfIframe) pdfIframe.style.display = "none";
                if (documentStatus) documentStatus.textContent = "Failed to Load";
              };
              pdfIframe.addEventListener("load", handlePdfLoad);
              pdfIframe.addEventListener("error", handlePdfError);
              setTimeout(() => {
                if (pdfLoading && pdfLoading.style.display !== "none") {
                  console.log("[PREVIEW] PDF loading timeout, showing error");
                  handlePdfError();
                }
              }, 1e4);
            }
          } else {
            if (documentStatus) documentStatus.textContent = "Ready to View";
          }
          const openDocBtn = rightPreviewPanel.querySelector("#preview-open-doc-btn");
          const downloadBtn = rightPreviewPanel.querySelector("#preview-download-btn");
          if (openDocBtn) {
            openDocBtn.addEventListener("click", (e) => {
              e.preventDefault();
              e.stopPropagation();
              const objectUrl2 = openDocBtn.getAttribute("data-object-url");
              if (objectUrl2) {
                window.open(objectUrl2, "_blank");
              }
            });
          }
          if (downloadBtn) {
            downloadBtn.addEventListener("click", (e) => {
              e.preventDefault();
              e.stopPropagation();
              const objectUrl2 = downloadBtn.getAttribute("data-object-url");
              const docName2 = downloadBtn.getAttribute("data-doc-name");
              if (objectUrl2) {
                const link = document.createElement("a");
                link.href = objectUrl2;
                link.download = docName2 || "document.pdf";
                link.click();
              }
            });
          }
          const quickViewBtn = rightPreviewPanel.querySelector("#preview-quick-view-btn");
          const quickDownloadBtn = rightPreviewPanel.querySelector("#preview-quick-download-btn");
          const quickCopyBtn = rightPreviewPanel.querySelector("#preview-quick-copy-btn");
          if (quickViewBtn) {
            quickViewBtn.addEventListener("click", (e) => {
              e.preventDefault();
              e.stopPropagation();
              const objectUrl2 = quickViewBtn.getAttribute("data-object-url");
              if (objectUrl2) {
                window.open(objectUrl2, "_blank");
              }
            });
          }
          if (quickDownloadBtn) {
            quickDownloadBtn.addEventListener("click", (e) => {
              e.preventDefault();
              e.stopPropagation();
              const objectUrl2 = quickDownloadBtn.getAttribute("data-object-url");
              const docName2 = quickDownloadBtn.getAttribute("data-doc-name");
              if (objectUrl2) {
                const link = document.createElement("a");
                link.href = objectUrl2;
                link.download = docName2 || "document.pdf";
                link.click();
              }
            });
          }
          if (quickCopyBtn) {
            quickCopyBtn.addEventListener("click", (e) => {
              e.preventDefault();
              e.stopPropagation();
              const objectUrl2 = quickCopyBtn.getAttribute("data-object-url");
              if (objectUrl2) {
                navigator.clipboard.writeText(objectUrl2).then(() => {
                  const notification = document.createElement("div");
                  notification.textContent = "Link copied to clipboard!";
                  notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                z-index: 10000;
                box-shadow: 0 4px 12px rgba(16,185,129,0.3);
              `;
                  document.body.appendChild(notification);
                  setTimeout(() => {
                    document.body.removeChild(notification);
                  }, 3e3);
                }).catch(() => {
                  alert("Failed to copy link. Please copy manually: " + objectUrl2);
                });
              }
            });
          }
          console.log("[PREVIEW] Showing right preview panel with blob");
          rightPreviewPanel.style.display = "flex";
          rightPreviewPanel.offsetHeight;
          rightPreviewPanel.style.transform = "translateX(0)";
          const originalHideRightPreview = hideRightPreview;
          const hideRightPreviewWithCleanup = () => {
            URL.revokeObjectURL(objectUrl);
            originalHideRightPreview();
          };
          const closeBtn = rightPreviewPanel.querySelector("button");
          if (closeBtn) {
            closeBtn.onclick = hideRightPreviewWithCleanup;
          }
        };
        reader2.onerror = () => {
          console.error("[PREVIEW] Failed to convert blob to data URL");
          const previewContent = `
          <div style="flex: 1; display: flex; flex-direction: column; padding: 20px; overflow-y: auto;">
            <div style="margin-bottom: 20px;">
              <h3 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 600; color: #ffffff;">Document Preview</h3>
              <p style="margin: 0; font-size: 14px; color: #ffffff;">${docName}</p>
            </div>
            <div style="flex: 1; display: flex; align-items: center; justify-content: center; background: #ffffff; border-radius: 8px;">
              <div style="text-align: center; color: #fbbf24;">
                <div style="font-size: 24px; margin-bottom: 12px;">\u26A0\uFE0F</div>
                <div style="font-size: 16px; font-weight: 500;">Failed to load Document</div>
                <div style="font-size: 14px; margin-top: 4px; opacity: 0.8;">Unable to convert blob to data URL</div>
              </div>
            </div>
          </div>
        `;
          rightPreviewPanel.innerHTML = previewContent;
        };
        reader2.readAsDataURL(blob2);
      };
      cleanContainer.addEventListener("click", async (e) => {
        console.log("[DOC] Click detected on:", e.target);
        const icon = e.target.closest(".doc-preview-icon");
        console.log("[DOC] Found doc icon:", icon);
        if (!icon) return;
        const hasDoc = icon.getAttribute("data-has-doc") === "1";
        console.log("[DOC] Has document:", hasDoc);
        if (!hasDoc) return;
        const threadId = icon.getAttribute("data-thread-id");
        const documentName = icon.getAttribute("data-doc-name");
        console.log("[DOC] Using blob preview functionality");
        if (threadId && documentName && opts.fetchPdf) {
          const cacheKey = `${threadId}|${documentName}`;
          let cachedBlob = pdfCache.get(cacheKey);
          if (cachedBlob) {
            console.log("[DOC] Using cached PDF blob");
            showRightPreviewWithBlob(icon, cachedBlob);
            return;
          }
          try {
            console.log("[DOC] Fetching PDF from backend:", { threadId, documentName });
            const blob2 = await opts.fetchPdf({ threadId, documentName });
            if (pdfCache.size > 25) {
              const firstKey = pdfCache.keys().next().value;
              pdfCache.delete(firstKey);
            }
            pdfCache.set(cacheKey, blob2);
            console.log("[DOC] PDF fetched successfully, showing blob preview");
            showRightPreviewWithBlob(icon, blob2);
          } catch (err) {
            console.error("[DOC] Failed to fetch PDF from backend:", err);
            alert(`Failed to load PDF from backend: ${err.message}`);
          }
        } else {
          console.log("[DOC] No backend fetch available");
          alert("No PDF fetch function available. Please ensure the backend is properly configured.");
        }
      });
    }, 500);
    return {
      spreadsheet,
      correctionsBatcher,
      searchControls,
      cleanup: () => {
        console.log("[CLEANUP] Spreadsheet cleanup called");
      }
    };
  }
  async function setupCleanContainer(container) {
    console.log("[CONTAINER] Creating clean container for jspreadsheet...");
    await loadJspreadsheetAssets();
    const mainWrapper = document.createElement("div");
    mainWrapper.className = "jspreadsheet-main-wrapper";
    mainWrapper.style.cssText = `
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    max-height: calc(100vh - 100px);
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    background: #ffffff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  `;
    const cleanContainer = document.createElement("div");
    cleanContainer.className = "jspreadsheet-clean-container jspreadsheet-container";
    cleanContainer.style.cssText = `
    width: 100%;
    height: 100%;
    position: relative;
    overflow-x: auto;
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    max-width: 100%;
    box-sizing: border-box;
  `;
    container.innerHTML = "";
    container.appendChild(mainWrapper);
    mainWrapper.appendChild(cleanContainer);
    return { cleanContainer, mainWrapper };
  }
  async function loadJspreadsheetAssets() {
    try {
      if (!chrome.runtime?.id) {
        console.warn("[ASSETS] Extension context invalidated. Halting asset load.");
        return false;
      }
      console.log("[ASSETS] Loading jspreadsheet assets...");
      const jspreadsheetUrl = chrome.runtime.getURL("jspreadsheet.css?v=" + Date.now());
      const jsuitesUrl = chrome.runtime.getURL("jsuites.css?v=" + Date.now());
      const jsuitesJsUrl = chrome.runtime.getURL("jsuites.js?v=" + Date.now());
      const stampThemeUrl = chrome.runtime.getURL("stamp-spreadsheet-theme.css?v=" + Date.now());
      console.log("[ASSETS] Asset URLs:", {
        jspreadsheet: jspreadsheetUrl,
        jsuites: jsuitesUrl,
        jsuitesJs: jsuitesJsUrl,
        stampTheme: stampThemeUrl
      });
      if (!document.querySelector(`script[src="${jsuitesJsUrl}"]`)) {
        const jsuitesScript = document.createElement("script");
        jsuitesScript.src = jsuitesJsUrl;
        jsuitesScript.type = "text/javascript";
        document.head.appendChild(jsuitesScript);
        await new Promise((resolve, reject) => {
          jsuitesScript.onload = () => {
            console.log("[ASSETS] \u2705 jsuites.js loaded successfully");
            if (typeof window.jsuites === "undefined" && typeof jsuites !== "undefined") {
              window.jsuites = jsuites;
            }
            resolve();
          };
          jsuitesScript.onerror = (error) => {
            console.error("[ASSETS] \u274C Failed to load jsuites.js:", error);
            reject(error);
          };
          setTimeout(() => {
            if (typeof window.jsuites !== "undefined" || typeof jsuites !== "undefined") {
              console.log("[ASSETS] \u2705 jsuites.js loaded (timeout fallback)");
              resolve();
            } else {
              console.warn("[ASSETS] \u26A0\uFE0F jsuites.js loading timeout - dropdowns may not work");
              resolve();
            }
          }, 3e3);
        });
      } else {
        console.log("[ASSETS] \u2705 jsuites.js already loaded");
      }
      const cssFiles = [
        { url: jspreadsheetUrl, name: "jspreadsheet.css" },
        { url: jsuitesUrl, name: "jsuites.css" },
        { url: stampThemeUrl, name: "stamp-spreadsheet-theme.css" }
      ];
      for (const cssFile of cssFiles) {
        if (!document.querySelector(`link[href*="${cssFile.name}"]`)) {
          const link = document.createElement("link");
          link.rel = "stylesheet";
          link.href = cssFile.url;
          document.head.appendChild(link);
          console.log(`[ASSETS] \u2705 ${cssFile.name} loaded with URL: ${cssFile.url}`);
          link.onload = () => {
            console.log(`[ASSETS] \u2705 ${cssFile.name} CSS loaded and applied`);
            if (cssFile.name === "jspreadsheet.css") {
              setTimeout(() => {
                const testElement = document.querySelector(".jss_worksheet");
                if (testElement) {
                  const computedStyle = window.getComputedStyle(testElement);
                  console.log("[DEBUG] jss_worksheet min-width:", computedStyle.minWidth);
                  console.log("[DEBUG] jss_worksheet overflow-x:", computedStyle.overflowX);
                }
              }, 1e3);
            }
          };
        }
      }
      if (!document.querySelector('link[href*="Material+Icons"]')) {
        const materialIconsLink = document.createElement("link");
        materialIconsLink.href = "https://fonts.googleapis.com/css?family=Material+Icons";
        materialIconsLink.rel = "stylesheet";
        document.head.appendChild(materialIconsLink);
        console.log("[ASSETS] \u2705 Material Icons font loaded");
      }
      if (!document.querySelector("#jspreadsheet-fullscreen-styles")) {
        const fullscreenStyles = document.createElement("style");
        fullscreenStyles.id = "jspreadsheet-fullscreen-styles";
        fullscreenStyles.textContent = `
        /* Fullscreen mode styling */
        .jspreadsheet-main-wrapper.fullscreen {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          width: 100vw !important;
          height: 100vh !important;
          z-index: 999999 !important;
          background: #ffffff !important;
          display: flex !important;
          flex-direction: column !important;
          max-height: none !important;
          border: none !important;
          border-radius: 0 !important;
          box-shadow: none !important;
        }

        .jspreadsheet-main-wrapper.fullscreen .jss_toolbar {
          flex-shrink: 0 !important;
        }

        .jspreadsheet-main-wrapper.fullscreen .jss_filter {
          flex-shrink: 0 !important;
        }

        .jspreadsheet-main-wrapper.fullscreen .jspreadsheet-clean-container {
          flex: 1 !important;
          max-height: none !important;
          height: auto !important;
        }
        
        /* Ensure proper scrolling within the container - NO bottom scrollbar */
        .jspreadsheet-main-wrapper {
          overflow: hidden !important;
          max-height: 100vh !important;
          height: 100% !important;
        }
        
        .jspreadsheet-clean-container {
          overflow-x: hidden !important;
          overflow-y: auto !important;
          max-height: calc(100vh - 200px) !important;
        }
        
        /* Fix dropdown z-index issues */
        .jdropdown-container,
        .jdropdown-menu,
        .jdropdown-content,
        .jdropdown-backdrop {
        z-index: 999999 !important;
        }
        
        /* Ensure spreadsheet table has proper width constraints */
        .jexcel table, .jspreadsheet table {
          width: 100% !important;
          min-width: 1200px !important; /* Minimum width to ensure all columns are visible */
          table-layout: fixed !important;
        }
        
        /* Force horizontal scrolling for table overflow - override jspreadsheet defaults */
        .jexcel, .jspreadsheet, .jss_container, .jss_worksheet {
          width: 100% !important;
          overflow-x: auto !important;
          overflow-y: auto !important;
          max-width: 100% !important;
        }
        
        
        /* Ensure the spreadsheet container forces horizontal scroll */
      .jspreadsheet-clean-container {
          overflow-x: hidden !important;
          overflow-y: auto !important;
          width: 100% !important;
          max-width: 100% !important;
        }
        
        /* Ensure the spreadsheet container handles overflow properly */
        .jspreadsheet-clean-container {
          overflow-x: hidden !important;
          overflow-y: auto !important;
        }
        
        /* Remove any bottom scrollbars from the main wrapper */
        .jspreadsheet-main-wrapper {
          overflow: hidden !important;
        }
        
        /* Ensure body and html don't have scrollbars */
        body, html {
          overflow-x: hidden !important;
          max-width: 100% !important;
        }
        
        /* Ensure the main container doesn't cause page overflow */
        .jspreadsheet-main-wrapper {
          max-width: 100% !important;
          box-sizing: border-box !important;
        }
        
        /* Excel-like cell styling */
      .jexcel td, .jspreadsheet td, .jexcel th, .jspreadsheet th {
          padding: 2px 3px !important;
          height: 20px !important;
          font-size: 11px !important;
          line-height: 1.1 !important;
          white-space: nowrap !important;
          overflow: hidden !important;
          text-overflow: ellipsis !important;
          box-sizing: border-box !important;
          border: 1px solid #ccc !important;
        }
        
        /* Header styling */
      .jexcel thead th, .jspreadsheet thead th,
      .jexcel thead td, .jspreadsheet thead td,
      .jss_worksheet thead td {
        background: #10b981 !important;
        color: white !important;
          font-weight: 700 !important;
          text-transform: uppercase !important;
          letter-spacing: 0.3px !important;
          font-size: 10px !important;
          text-align: center !important;
          padding: 4px 3px !important;
          height: 24px !important;
        }
        
        /* Excel-like row styling */
        .jexcel tbody tr, .jspreadsheet tbody tr {
          height: 20px !important;
        }
        
        .jexcel tbody tr:nth-child(even) td, .jspreadsheet tbody tr:nth-child(even) td {
          background-color: #f8f9fa !important;
        }
        
        .jexcel tbody tr:hover td, .jspreadsheet tbody tr:hover td {
          background-color: #e3f2fd !important;
        }
        
        /* Selection styling */
        .jexcel .selected, .jspreadsheet .selected {
          background-color: #1976d2 !important;
        color: white !important;
        }
        
        /* Responsive column adjustments */
        @media (max-width: 1400px) {
          .jexcel td, .jspreadsheet td, .jexcel th, .jspreadsheet th {
        font-size: 9px !important;
            padding: 1px 2px !important;
          }
        }
        
        @media (max-width: 1200px) {
          .jexcel td, .jspreadsheet td, .jexcel th, .jspreadsheet th {
            font-size: 8px !important;
            padding: 1px !important;
          }
        }
        
        /* Remove all custom scrollbar styling - use browser default */
        
        
        /* Additional table container styling for proper horizontal scrolling */
        .jspreadsheet-clean-container .jexcel,
        .jspreadsheet-clean-container .jspreadsheet,
        .jspreadsheet-clean-container .jss_container,
        .jspreadsheet-clean-container .jss_worksheet {
          width: 100% !important;
          overflow-x: auto !important;
          overflow-y: auto !important;
          max-width: 100% !important;
        }
        
        /* Force the table to be contained within the container */
        .jspreadsheet-clean-container .jexcel table,
        .jspreadsheet-clean-container .jspreadsheet table {
          width: 100% !important;
          min-width: 1200px !important;
          max-width: none !important;
        }
        
        /* Ensure the table itself can scroll horizontally */
        .jspreadsheet-clean-container table {
          min-width: 1200px !important;
          width: 100% !important;
        }
        
        
        /* Make sure the spreadsheet container is properly sized */
        .jspreadsheet-clean-container {
          width: 100% !important;
          height: 100% !important;
        position: relative !important;
        }
        
        /* Ensure no overflow on the main page */
        .jspreadsheet-main-wrapper {
          width: 100% !important;
          max-width: 100% !important;
        }
        
        /* Excel-like table borders */
        .jexcel, .jspreadsheet, .jss_container, .jss_worksheet {
          border: 1px solid #d0d7de !important;
          border-radius: 6px !important;
        }
        
        /* Excel-like cell focus */
        .jexcel td:focus, .jspreadsheet td:focus {
          outline: 2px solid #1976d2 !important;
          outline-offset: -2px !important;
        }
        
        /* Excel-like dropdown styling */
        .jss_worksheet > tbody > tr > td.jss_dropdown {
          background-repeat: no-repeat !important;
          background-position: top 50% right 5px !important;
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5H7z' fill='%23666'/%3E%3C/svg%3E") !important;
        }
        
        /* Fix dropdown visibility by allowing overflow for dropdown containers */
        .jss_container {
          overflow: visible !important;
        }
        
        .jss_worksheet {
          width: 100% !important;
          max-width: 100% !important;
          table-layout: fixed !important;
          overflow: visible !important;
        }
        
        .jss_overflow > tbody > tr > td {
          overflow: visible !important;
        }
        
        .jss_worksheet > tbody > tr > td:last-child {
          overflow: visible !important;
        }
        
        /* Allow dropdowns to overflow the container */
        .jspreadsheet-clean-container {
          overflow-x: hidden !important;
          overflow-y: auto !important;
          width: 100% !important;
          max-width: 100% !important;
        }
        
        /* Ensure dropdown content can overflow */
        .jspreadsheet-clean-container .jss_content {
          overflow: visible !important;
          width: 100% !important;
        }
        
        /* Critical: Allow dropdowns to escape container bounds */
        .jss_worksheet > tbody > tr > td.jss_dropdown {
          overflow: visible !important;
          position: relative !important;
        }
        
        /* Ensure dropdown containers can appear outside their parent */
        .jdropdown-container {
          position: fixed !important;
          z-index: 999999 !important;
        }
        
        /* Constrain all jspreadsheet elements to prevent overflow */
        .jspreadsheet-main-wrapper * {
          max-width: 100% !important;
          box-sizing: border-box !important;
        }
        
        /* Ensure toolbar doesn't cause overflow */
        .jspreadsheet-main-wrapper .jss_toolbar {
          overflow-x: auto !important;
          overflow-y: hidden !important;
          max-width: 100% !important;
        }
        
        /* Ensure filter bar doesn't cause overflow */
        .jspreadsheet-main-wrapper .jss_filter {
          overflow-x: auto !important;
          max-width: 100% !important;
        }
        
        /* Ensure pagination doesn't cause overflow */
        .jspreadsheet-main-wrapper .jss_pagination {
          overflow-x: auto !important;
          max-width: 100% !important;
        }
      `;
        document.head.appendChild(fullscreenStyles);
        console.log("[ASSETS] \u2705 Fullscreen styles added");
      }
      console.log("[ASSETS] \u2705 All jspreadsheet assets loaded successfully");
      return true;
    } catch (err) {
      console.error("[ASSETS] Failed to load jspreadsheet assets:", err);
      return false;
    }
  }
  function calculateOptimalDimensions(container) {
    const containerRect = container.getBoundingClientRect();
    const availableWidth = containerRect.width || window.innerWidth - 100;
    const availableHeight = Math.min(
      window.innerHeight - 250,
      // Account for Gmail UI
      800
      // Maximum height
    );
    return {
      width: Math.max(availableWidth, 1e3),
      // Minimum width for horizontal scroll
      height: Math.max(availableHeight, 400)
      // Minimum height
    };
  }
  function transformDataForSpreadsheet(invoices) {
    if (!invoices) {
      return [];
    }
    return invoices.map((invoice) => {
      const details = invoice.document?.details || {};
      const documentType = invoice.documentType;
      const isReceipt = documentType === "receipt";
      const statusThreadId = invoice.statusThreadId || "";
      const statusMessageId = invoice.statusMessageId || "";
      const docThreadId = invoice.document?.thread_id || "";
      const docName = invoice.document?.document_name || "";
      const docUrl = details.documentUrl || details.document_url || invoice.document?.url || "";
      const thumbUrl = details.thumbnailUrl || details.thumbnail_url || invoice.document?.thumbnailUrl || invoice.document?.thumbnail_url || "";
      const hasDoc = !!(docThreadId && docName);
      const hasSampleDoc = !!(docUrl && docUrl.includes("w3.org"));
      const docIcon = `
      <span class="doc-preview-icon" 
            data-doc-url="${docUrl}"
            data-thumb-url="${thumbUrl}"
            data-has-doc="${hasDoc ? "1" : "0"}"
            data-thread-id="${docThreadId}"
            data-doc-name="${docName}"
            title="${hasDoc ? hasSampleDoc ? "Sample Document - Preview available" : "Preview document" : "No document available"}"
            style="${hasDoc ? hasSampleDoc ? "cursor: pointer; color: #1a73e8; background: #e8f0fe; border: 1px solid #dadce0; border-radius: 4px;" : "cursor: pointer; color: #5f6368;" : "cursor: not-allowed; color: #c0c0c0;"} font-size: 14px; padding: 4px; margin: 0; line-height: 1; height: 24px; width: 24px; display: flex; align-items: center; justify-content: center; user-select: none; transition: all 0.2s ease;">${hasSampleDoc ? "\u{1F4CB}" : "\u{1F4C4}"}</span>
    `;
      const popoutIcon = invoice.document?.thread_id || invoice.document?.message_id ? `<span class="gmail-popout-icon" 
            data-thread-id="${invoice.document?.thread_id || ""}" 
            data-message-id="${invoice.document?.message_id || ""}"
            title="Open in Gmail"
            style="cursor: pointer; font-size: 14px; color: #1a73e8; padding: 2px; margin: 0; line-height: 1; height: 20px; width: 20px; display: flex; align-items: center; justify-content: center; user-select: none;">\u{1F4E4}</span>` : '<span style="color: #ccc; font-size: 12px;">-</span>';
      const latestActions = /* @__PURE__ */ new Map();
      if (Array.isArray(invoice.involvementHistory)) {
        invoice.involvementHistory.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        invoice.involvementHistory.forEach((entry) => {
          const person = entry.actor?.name || entry.actor?.email;
          if (person && !latestActions.has(person)) {
            latestActions.set(person, entry.action_type || "No action specified");
          }
        });
      }
      const involvementText = Array.from(latestActions).map(([person, action]) => `${person} | ${action}`).join("\n");
      const invoiceNumber = isReceipt ? invoice.receiptNumber || "N/A" : details.invoiceNumber || "N/A";
      const entityName = details.entityName || null;
      const description = isReceipt ? details.notes || invoice.notes || "" : details.description || "";
      const issueDate = isReceipt ? details.date || "" : details.issueDate || "";
      console.log(`[STATUS DEBUG] Invoice structure:`, {
        "invoice.status": invoice.status,
        "invoice.document?.details?.status": invoice.document?.details?.status,
        "topLevelFields": Object.keys(invoice),
        "fullInvoice": invoice
      });
      const status = invoice.document?.details?.status || invoice.status || "unknown";
      console.log(`[STATUS DEBUG] Final status for invoice ${invoice.document?.details?.invoiceNumber || "unknown"}: "${status}"`);
      if (invoice.status !== status) {
        console.warn(`[STATUS MISMATCH] Expected "${invoice.status}" but got "${status}"`);
      }
      return [
        docIcon,
        // New first column
        invoiceNumber,
        // Updated for receipts
        entityName,
        // Updated for receipts
        details.vendor?.name || invoice.vendor?.name || "N/A",
        description,
        // Updated for receipts
        details.period || "",
        details.amount || invoice.amount || null,
        details.currency || invoice.currency || "USD",
        issueDate,
        // Updated for receipts
        details.dueDate || "",
        details.paymentTerms || "",
        status,
        // Updated for receipts
        popoutIcon,
        involvementText || "",
        details.notes || invoice.notes || "",
        statusThreadId ? `<button class="view-thread-btn" data-thread-id="${statusThreadId}">View Thread</button>` : ""
      ];
    });
  }
  function generateMetaInformation(invoices) {
    if (!invoices || invoices.length === 0) {
      return {};
    }
    const metaInfo = {};
    invoices.forEach((invoice, rowIndex) => {
      const row = rowIndex + 2;
      console.log(`[META DEBUG] Invoice ${rowIndex} raw data:`, {
        statusThreadId: invoice.statusThreadId,
        statusMessageId: invoice.statusMessageId,
        doc_thread_id: invoice.document?.thread_id,
        doc_message_id: invoice.document?.message_id,
        invoiceNumber: invoice.document?.details?.invoiceNumber
      });
      const threadId = invoice.statusThreadId;
      const messageId = invoice.statusMessageId;
      if (threadId || messageId) {
        const invoiceCell = `B${row}`;
        metaInfo[invoiceCell] = {
          threadId,
          invoiceNumber: invoice.document?.details?.invoiceNumber,
          type: "invoice_identifier"
        };
        const statusCell = `L${row}`;
        metaInfo[statusCell] = {
          threadId,
          messageId,
          type: "status_cell"
        };
      }
    });
    return metaInfo;
  }
  function handleFieldEdit(invoice, fieldName, newValue, invoiceIndex, batcher) {
    console.log(`[EDIT] Invoice ${invoiceIndex}: ${fieldName} = ${newValue}`);
    if (fieldName.includes(".")) {
      const [parent, child] = fieldName.split(".");
      if (!invoice[parent]) invoice[parent] = {};
      invoice[parent][child] = newValue;
    } else {
      invoice[fieldName] = newValue;
    }
    const messageId = invoice.document?.message_id;
    const contentHash = invoice.document?.content_hash;
    const documentId = invoice.document?.details?.id;
    const documentType = invoice.documentType || "invoice";
    console.log(`[EDIT] \u2705 Extracted document ID: ${documentId} for field: ${fieldName}`);
    if (documentId && batcher) {
      batcher.addCorrection(messageId, contentHash, documentId, documentType, fieldName, newValue);
    } else if (!documentId) {
      console.warn(`[EDIT] \u274C No document_id found at invoice.document.details.id for invoice ${invoiceIndex}`);
    }
  }
  var CorrectionsBatcher;
  var init_spreadsheet_builder = __esm({
    "spreadsheet-builder.js"() {
      "use strict";
      CorrectionsBatcher = class {
        constructor(apiClient) {
          this.apiClient = apiClient;
          this.pendingCorrections = /* @__PURE__ */ new Map();
          this.sent = false;
        }
        addCorrection(messageId, contentHash, documentId, documentType, fieldName, newValue) {
          console.log(`[JS004] Queued correction: ${fieldName} = ${newValue}`);
          const correctionKey = `${documentId}_${fieldName}_${Date.now()}`;
          this.pendingCorrections.set(correctionKey, {
            document_id: documentId || null,
            document_type: documentType || "invoice",
            field_name: fieldName,
            new_value: newValue
          });
          console.log(`[BATCH] ${this.pendingCorrections.size} corrections queued`);
        }
        // Send via regular async API call
        async sendBatch() {
          if (this.sent || this.pendingCorrections.size === 0) return;
          this.sent = true;
          const edits = Array.from(this.pendingCorrections.values());
          console.log(`[BATCH] Sending ${edits.length} corrections`);
          try {
            const response = await this.apiClient.makeAuthenticatedRequest("/api/finops/documents/corrections", {
              method: "POST",
              body: JSON.stringify({
                edits,
                propagate: true
              })
            });
            if (response.ok) {
              console.log("[BATCH] \u2705 Corrections sent successfully");
              this.pendingCorrections.clear();
            } else {
              throw new Error(`API error: ${response.status}`);
            }
          } catch (error) {
            console.error("[BATCH] \u274C Failed to send corrections:", error);
            this.sent = false;
          }
        }
        // Send via sendBeacon for guaranteed delivery during page unload
        sendBeaconBatch() {
          if (this.sent || this.pendingCorrections.size === 0) return;
          this.sent = true;
          const edits = Array.from(this.pendingCorrections.values());
          const success = navigator.sendBeacon("/api/finops/documents/corrections", JSON.stringify({
            edits,
            propagate: true
          }));
          if (success) {
            console.log(`[BATCH] \u2705 Sent ${edits.length} corrections via sendBeacon`);
            this.pendingCorrections.clear();
          } else {
            console.error("[BATCH] \u274C sendBeacon failed");
            this.sent = false;
          }
        }
        hasPendingCorrections() {
          return this.pendingCorrections.size > 0;
        }
      };
    }
  });

  // thread-data-manager.js
  var CACHE_KEY, CACHE_TTL_MS, ThreadDataManager;
  var init_thread_data_manager = __esm({
    "thread-data-manager.js"() {
      "use strict";
      CACHE_KEY = "stampThreadCache";
      CACHE_TTL_MS = 5 * 60 * 1e3;
      ThreadDataManager = class {
        constructor(apiClient) {
          this.apiClient = apiClient;
          console.log("[ThreadDataManager] Initialized.");
        }
        /**
         * Retrieves data for a list of thread IDs, utilizing a cache to minimize requests.
         * @param {string[]} threadIds - An array of Gmail thread IDs.
         * @returns {Promise<object>} A promise that resolves to a map of threadId -> threadData.
         */
        async getThreadData(threadIds) {
          console.log("[ThreadDataManager] getThreadData called for:", threadIds);
          const cache = await this._getCache();
          const now = Date.now();
          const threadsToFetch = [];
          const threadsFromCache = {};
          for (const id of threadIds) {
            if (cache[id] && now - cache[id].timestamp < CACHE_TTL_MS) {
              threadsFromCache[id] = cache[id].data;
            } else {
              threadsToFetch.push(id);
            }
          }
          console.log(`[ThreadDataManager] From cache: ${Object.keys(threadsFromCache).length}, To fetch: ${threadsToFetch.length}`);
          if (threadsToFetch.length === 0) {
            return threadsFromCache;
          }
          let newlyFetchedData = {};
          if (this.apiClient) {
            try {
              console.log(`[ThreadDataManager] Making API call to /api/thread-status with ${threadsToFetch.length} thread IDs`);
              const response = await this.apiClient.makeAuthenticatedRequest(`/api/thread-status?threadIds=${threadsToFetch.join(",")}`, {
                method: "GET"
              });
              const apiResponse = await response.json();
              console.log(`[ThreadDataManager] API response received:`, apiResponse);
              newlyFetchedData = this._transformApiResponse(apiResponse);
              console.log(`[ThreadDataManager] Transformed data:`, newlyFetchedData);
            } catch (error) {
              console.error("[ThreadDataManager] API call failed:", error);
              newlyFetchedData = {};
            }
          } else {
            console.warn("[ThreadDataManager] No API client available, returning empty data");
            newlyFetchedData = {};
          }
          for (const id in newlyFetchedData) {
            cache[id] = {
              data: newlyFetchedData[id],
              timestamp: now
            };
          }
          await this._setCache(cache);
          return { ...threadsFromCache, ...newlyFetchedData };
        }
        /**
         * Transforms the backend API response format to our expected format.
         * @param {object} apiResponse - The raw API response
         * @returns {object} Transformed data in our expected format
         */
        _transformApiResponse(apiResponse) {
          const transformedData = {};
          console.log("[TRANSFORM] Starting API response transformation.", { apiResponse });
          if (apiResponse && Array.isArray(apiResponse.results)) {
            console.log(`[TRANSFORM] Found ${apiResponse.results.length} results to process.`);
            apiResponse.results.forEach((result) => {
              if (result.status === "success" && result.thread_id && result.data) {
                const threadId = result.thread_id;
                console.log(`[TRANSFORM] Processing successful result for thread: ${threadId}`, { data: result.data });
                transformedData[threadId] = {
                  threadId,
                  threadLabels: result.data.thread_labels || [],
                  processedEntities: result.data.processed_entities || [],
                  entities: result.data.entities || []
                };
              } else {
                console.warn("[TRANSFORM] Skipping a result due to failure status or missing data.", { result });
              }
            });
          } else {
            console.warn('[TRANSFORM] API response is not in the expected format (missing or invalid "results" array).', { apiResponse });
          }
          console.log("[TRANSFORM] Transformation complete.", { transformedData });
          return transformedData;
        }
        /**
         * Retrieves all invoices for the Invoice Tracker view.
         * @returns {Promise<Array<object>>} A promise that resolves to an array of all invoices.
         */
        async getAllInvoices() {
          console.log("[ThreadDataManager] \u{1F3AF} getAllInvoices called.");
          if (!this.apiClient) {
            console.warn("[ThreadDataManager] \u26A0\uFE0F No API client available, returning empty data for invoices.");
            return [];
          }
          try {
            console.log("[ThreadDataManager] \u{1F4E1} Fetching detailed documents from the backend...");
            const invoices = await this.apiClient.getDetailedDocuments();
            console.log("[ThreadDataManager] \u2705 Received detailed documents response:", invoices);
            console.log("[ThreadDataManager] \u{1F4CA} Response type:", typeof invoices);
            console.log("[ThreadDataManager] \u{1F4CB} Invoices array length:", invoices?.length || 0);
            console.log("[ThreadDataManager] \u{1F3AF} Returning invoices array with", (invoices || []).length, "items");
            if (invoices && invoices.length > 0) {
              console.log("[ThreadDataManager] \u{1F4DD} Sample invoice structure:", invoices[0]);
            }
            return invoices || [];
          } catch (error) {
            console.error("[ThreadDataManager] \u274C Failed to fetch detailed documents:", error);
            console.error("[ThreadDataManager] \u274C Error details:", {
              message: error.message,
              stack: error.stack
            });
            return [];
          }
        }
        /**
         * Merges and persists labels for a given thread into the same cache used by both
         * thread row labeling and open-thread labeling flows.
         * @param {string} threadId
         * @param {string[]} labels
         */
        async addThreadLabels(threadId, labels) {
          try {
            if (!threadId || !Array.isArray(labels) || labels.length === 0) return;
            const cache = await this._getCache();
            const now = Date.now();
            const existing = cache[threadId]?.data || {
              threadId,
              threadLabels: [],
              processedEntities: [],
              entities: []
            };
            const existingLabels = Array.isArray(existing.threadLabels) ? existing.threadLabels : [];
            const merged = Array.from(/* @__PURE__ */ new Set([...existingLabels, ...labels]));
            const updatedEntry = {
              data: {
                ...existing,
                threadLabels: merged
              },
              timestamp: now
            };
            cache[threadId] = updatedEntry;
            await this._setCache(cache);
            console.log("[ThreadDataManager] \u{1F5C2}\uFE0F Cache labels updated for thread", threadId, merged);
          } catch (err) {
            console.warn("[ThreadDataManager] Failed to update cached thread labels:", err);
          }
        }
        /**
         * Private helper to get the cache from chrome.storage.local.
         */
        async _getCache() {
          try {
            const result = await chrome.storage.local.get([CACHE_KEY]);
            return result[CACHE_KEY] || {};
          } catch (error) {
            console.error("[ThreadDataManager] Error reading from cache:", error);
            return {};
          }
        }
        /**
         * Private helper to save the cache to chrome.storage.local.
         */
        async _setCache(cacheData) {
          try {
            await chrome.storage.local.set({ [CACHE_KEY]: cacheData });
          } catch (error) {
            console.error("[ThreadDataManager] Error writing to cache:", error);
          }
        }
      };
    }
  });

  // ai-loading-component.js
  function showAIStyleLoading(container) {
    console.log("[AI LOADING] \u{1F680} Initializing AI-style loading component");
    const styleElement = document.createElement("style");
    styleElement.textContent = AI_LOADING_CSS;
    if (!document.querySelector("#ai-loading-styles")) {
      styleElement.id = "ai-loading-styles";
      document.head.appendChild(styleElement);
    }
    const loadingHTML = `
    <div class="ai-loading-container">
      <div class="ai-loading-header">
        <div class="ai-loading-icon">\u{1F916}</div>
        <h3>Invoice Tracker</h3>
        <p>Processing your financial data...</p>
      </div>
      
      <div class="ai-loading-steps">
        <div class="ai-step" data-step="fetching">
          <div class="ai-step-icon">\u23F3</div>
          <div class="ai-step-content">
            <div class="ai-step-title">Getting all invoices</div>
            <div class="ai-step-description">Connecting to your backend...</div>
          </div>
        </div>
        
        <div class="ai-step" data-step="details">
          <div class="ai-step-icon">\u{1F4CB}</div>
          <div class="ai-step-content">
            <div class="ai-step-title">Getting invoice details</div>
            <div class="ai-step-description">Extracting vendor, amounts, dates...</div>
          </div>
        </div>
        
        <div class="ai-step" data-step="status">
          <div class="ai-step-icon">\u{1F4CA}</div>
          <div class="ai-step-content">
            <div class="ai-step-title">Getting invoice status</div>
            <div class="ai-step-description">Checking approval status...</div>
          </div>
        </div>
      </div>
    </div>
  `;
    container.innerHTML = loadingHTML;
    return {
      updateStep: (stepName, status) => updateStep(container, stepName, status),
      showError: (error) => showErrorState(container, error),
      hide: () => hideLoading(container)
    };
  }
  function updateStep(container, stepName, status) {
    console.log(`[AI LOADING] \u{1F4DD} Updating step '${stepName}' to '${status}'`);
    const stepElement = container.querySelector(`[data-step="${stepName}"]`);
    if (!stepElement) {
      console.warn(`[AI LOADING] \u26A0\uFE0F Step '${stepName}' not found`);
      return;
    }
    stepElement.classList.remove("active", "completed", "error");
    stepElement.classList.add(status);
    const iconElement = stepElement.querySelector(".ai-step-icon");
    if (iconElement) {
      switch (status) {
        case "completed":
          iconElement.textContent = "\u2705";
          break;
        case "active":
          iconElement.textContent = "\u23F3";
          break;
        case "error":
          iconElement.textContent = "\u274C";
          break;
        default:
          iconElement.textContent = "\u23F3";
      }
    }
    console.log(`[AI LOADING] \u2705 Step '${stepName}' updated to '${status}'`);
  }
  function showErrorState(container, error) {
    console.error("[AI LOADING] \u274C Showing error state:", error);
    container.innerHTML = `
    <div class="ai-error-container">
      <div class="ai-error-icon">\u274C</div>
      <h3>Failed to load invoices</h3>
      <p>${error.message || "An unexpected error occurred"}</p>
      <button class="ai-retry-button" onclick="location.reload()">Try Again</button>
    </div>
  `;
  }
  function hideLoading(container) {
    console.log("[AI LOADING] \u{1F3AF} Hiding loading component");
    container.innerHTML = "";
  }
  function createLoadingController(container) {
    const controller = showAIStyleLoading(container);
    return {
      ...controller,
      // Convenience methods for common flows
      startFetching: () => controller.updateStep("fetching", "active"),
      completeFetching: () => controller.updateStep("fetching", "completed"),
      startDetails: () => controller.updateStep("details", "active"),
      completeDetails: () => controller.updateStep("details", "completed"),
      startStatus: () => controller.updateStep("status", "active"),
      completeStatus: () => controller.updateStep("status", "completed"),
      completeAll: () => {
        controller.updateStep("fetching", "completed");
        controller.updateStep("details", "completed");
        controller.updateStep("status", "completed");
      }
    };
  }
  var AI_LOADING_CSS;
  var init_ai_loading_component = __esm({
    "ai-loading-component.js"() {
      "use strict";
      AI_LOADING_CSS = `
  .ai-loading-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: 40px;
    background: #f8f9fa;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    min-height: 400px;
  }

  .ai-loading-header {
    text-align: center;
    margin-bottom: 40px;
  }

  .ai-loading-icon {
    font-size: 48px;
    margin-bottom: 16px;
    animation: pulse 2s infinite;
  }

  .ai-loading-header h3 {
    margin: 0 0 8px 0;
    font-size: 24px;
    font-weight: 600;
    color: #1a1a1a;
  }

  .ai-loading-header p {
    margin: 0;
    color: #666;
    font-size: 16px;
  }

  .ai-loading-steps {
    width: 100%;
    max-width: 400px;
  }

  .ai-step {
    display: flex;
    align-items: center;
    padding: 16px;
    margin-bottom: 12px;
    background: white;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    transition: all 0.3s ease;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }

  .ai-step.active {
    border-color: #4285f4;
    background: #f8f9ff;
    box-shadow: 0 2px 8px rgba(66, 133, 244, 0.2);
  }

  .ai-step.completed {
    border-color: #34a853;
    background: #f8fff8;
    box-shadow: 0 2px 8px rgba(52, 168, 83, 0.2);
  }

  .ai-step-icon {
    font-size: 20px;
    margin-right: 12px;
    transition: all 0.3s ease;
    width: 24px;
    text-align: center;
  }

  .ai-step.completed .ai-step-icon {
    color: #34a853;
  }

  .ai-step.active .ai-step-icon {
    color: #4285f4;
  }

  .ai-step-content {
    flex: 1;
  }

  .ai-step-title {
    font-weight: 500;
    margin-bottom: 4px;
    color: #1a1a1a;
  }

  .ai-step-description {
    font-size: 14px;
    color: #666;
  }

  .ai-error-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: 40px;
    text-align: center;
  }

  .ai-error-icon {
    font-size: 48px;
    margin-bottom: 16px;
    color: #dc3545;
  }

  .ai-error-container h3 {
    margin: 0 0 8px 0;
    color: #dc3545;
  }

  .ai-error-container p {
    margin: 0 0 16px 0;
    color: #666;
  }

  .ai-retry-button {
    padding: 8px 16px;
    background: #4285f4;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
  }

  .ai-retry-button:hover {
    background: #3367d6;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .ai-step {
    animation: slideIn 0.3s ease;
  }
`;
    }
  });

  // content.js
  var require_content = __commonJS({
    "content.js"(exports2) {
      var InboxSDK = __toESM(require_inboxsdk());
      var import_jspreadsheet_ce = __toESM(require_dist2());
      var import_jsuites = __toESM(require_jsuites());
      init_jspreadsheet();
      init_jsuites();
      init_spreadsheet_builder();
      init_thread_data_manager();
      init_ai_loading_component();
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }
      console.log("[CONTENT SCRIPT] \u2705 Content script loaded and executing");
      window.jspreadsheet = import_jspreadsheet_ce.default;
      window.jsuites = import_jsuites.default;
      var currentWorksheet = null;
      function getThreadIdFromInvoiceCell(cellAddress) {
        if (!currentWorksheet) {
          console.warn("[META INFO] Worksheet not available - navigate to invoice tracker first");
          return null;
        }
        const meta2 = currentWorksheet.getMeta(cellAddress);
        return meta2?.threadId || null;
      }
      function getIdsFromStatusCell(cellAddress) {
        if (!currentWorksheet) {
          console.warn("[META INFO] Worksheet not available - navigate to invoice tracker first");
          return null;
        }
        const meta2 = currentWorksheet.getMeta(cellAddress);
        if (meta2 && meta2.type === "status_tracker") {
          return {
            threadId: meta2.threadId,
            messageId: meta2.messageId,
            status: meta2.status,
            lastUpdated: meta2.lastUpdated
          };
        }
        return null;
      }
      function updateStatusMeta(cellAddress, newStatus) {
        if (!currentWorksheet) {
          console.warn("[META INFO] Worksheet not available - navigate to invoice tracker first");
          return;
        }
        const existingMeta = currentWorksheet.getMeta(cellAddress) || {};
        currentWorksheet.setMeta(cellAddress, {
          ...existingMeta,
          status: newStatus,
          lastUpdated: (/* @__PURE__ */ new Date()).toISOString()
        });
        console.log("[META INFO] Updated status meta for", cellAddress, "to:", newStatus);
      }
      function getGmailUrlFromCell(cellAddress) {
        if (!currentWorksheet) {
          console.warn("[META INFO] Worksheet not available - navigate to invoice tracker first");
          return null;
        }
        const meta2 = currentWorksheet.getMeta(cellAddress);
        if (meta2?.threadId) {
          const accountPath = getCurrentGmailAccount();
          return `https://mail.google.com/mail${accountPath}/#inbox/${meta2.threadId}`;
        }
        return null;
      }
      window.SpreadsheetMetaUtils = {
        getThreadIdFromInvoiceCell,
        getIdsFromStatusCell,
        updateStatusMeta,
        getGmailUrlFromCell
      };
      if (typeof globalThis !== "undefined") {
        globalThis.SpreadsheetMetaUtils = window.SpreadsheetMetaUtils;
      }
      if (typeof self !== "undefined") {
        self.SpreadsheetMetaUtils = window.SpreadsheetMetaUtils;
      }
      exports2.SpreadsheetMetaUtils = window.SpreadsheetMetaUtils;
      window.setCurrentWorksheet = function(worksheet) {
        currentWorksheet = worksheet;
        console.log("[META INFO] \u2705 SpreadsheetMetaUtils now ready for use");
        setTimeout(() => {
          console.log("\n=== SPREADSHEET LOADED - META DATA TEST ===");
          console.log('[DEBUG] getThreadIdFromInvoiceCell("A2"):', window.SpreadsheetMetaUtils.getThreadIdFromInvoiceCell("A2"));
          console.log('[DEBUG] getThreadIdFromInvoiceCell("A3"):', window.SpreadsheetMetaUtils.getThreadIdFromInvoiceCell("A3"));
          console.log('[DEBUG] getIdsFromStatusCell("E2"):', window.SpreadsheetMetaUtils.getIdsFromStatusCell("E2"));
          console.log('[DEBUG] getIdsFromStatusCell("E3"):', window.SpreadsheetMetaUtils.getIdsFromStatusCell("E3"));
          console.log('[DEBUG] getGmailUrlFromCell("A2"):', window.SpreadsheetMetaUtils.getGmailUrlFromCell("A2"));
          console.log('[DEBUG] getGmailUrlFromCell("G2"):', window.SpreadsheetMetaUtils.getGmailUrlFromCell("G2"));
          console.log("[DEBUG] Raw meta A1 (header):", worksheet.getMeta("A1"));
          console.log("[DEBUG] Raw meta A2 (first data):", worksheet.getMeta("A2"));
          console.log("[DEBUG] Raw meta E2 (first status):", worksheet.getMeta("E2"));
          console.log("[DEBUG] Raw meta G2 (first thread):", worksheet.getMeta("G2"));
          console.log("==========================================\n");
        }, 500);
      };
      console.log("[META INFO] \u2705 SpreadsheetMetaUtils available globally");
      console.log("[DEBUG] window.SpreadsheetMetaUtils:", window.SpreadsheetMetaUtils);
      console.log("[DEBUG] typeof SpreadsheetMetaUtils:", typeof window.SpreadsheetMetaUtils);
      console.log("[DEBUG] Testing direct access - this.SpreadsheetMetaUtils:", exports2.SpreadsheetMetaUtils);
      setTimeout(() => {
        console.log("\n=== SPREADSHEET META UTILS DEBUG TEST ===");
        console.log('[DEBUG] Testing getThreadIdFromInvoiceCell("A2"):', window.SpreadsheetMetaUtils.getThreadIdFromInvoiceCell("A2"));
        console.log('[DEBUG] Testing getIdsFromStatusCell("E2"):', window.SpreadsheetMetaUtils.getIdsFromStatusCell("E2"));
        console.log('[DEBUG] Testing getGmailUrlFromCell("A2"):', window.SpreadsheetMetaUtils.getGmailUrlFromCell("A2"));
        console.log("[DEBUG] All utility functions available:", Object.keys(window.SpreadsheetMetaUtils));
        console.log("============================================\n");
      }, 1e3);
      if (typeof CONFIG === "undefined") {
        globalThis.CONFIG = {
          API_ENDPOINT: "https://nmuo25f2da.execute-api.us-east-2.amazonaws.com/prod",
          AUTH_ENDPOINT: "https://70h4jbuv95.execute-api.us-east-2.amazonaws.com/prod/email-poller",
          CLIENT_ID: "759225635526-gs69pgupgap87o4ul9ud9pv8pjrupcgc.apps.googleusercontent.com",
          CLIENT_SECRET: null,
          CHROME_CLIENT_ID: "759225635526-gs69pgupgap87o4ul9ud9pv8pjrupcgc.apps.googleusercontent.com"
        };
      }
      var API_ENDPOINT = CONFIG.API_ENDPOINT;
      var AUTH_ENDPOINT = CONFIG.AUTH_ENDPOINT;
      var CLIENT_ID = CONFIG.CLIENT_ID;
      var CLIENT_SECRET = CONFIG.CLIENT_SECRET;
      var CHROME_CLIENT_ID = CONFIG.CHROME_CLIENT_ID;
      if (!API_ENDPOINT) {
        console.error("[CONFIG] API_ENDPOINT is not set");
      }
      if (!AUTH_ENDPOINT) {
        console.error("[CONFIG] AUTH_ENDPOINT is not set (falling back to API_ENDPOINT)");
      }
      var getCurrentGmailAccount = () => {
        try {
          const pathMatch = window.location.pathname.match(/(\/u\/\d+)\//i);
          if (pathMatch) {
            return pathMatch[1];
          }
          return "/u/0";
        } catch (error) {
          console.warn("[UTILS] Error detecting Gmail account, using default:", error);
          return "/u/0";
        }
      };
      window.getCurrentGmailAccount = getCurrentGmailAccount;
      if (!CHROME_CLIENT_ID) {
        console.warn("[CONFIG] CHROME_CLIENT_ID is not set - Chrome extension OAuth may not work");
      }
      if (!CLIENT_ID) {
        console.warn("[CONFIG] CLIENT_ID is not set - some features may not work");
      }
      console.log("[CONFIG] \u{1F50D} CLIENT ID CONFIGURATION:");
      console.log("[CONFIG] \u{1F310} WEB OAUTH CLIENT_ID:", CLIENT_ID);
      console.log("[CONFIG] \u{1F527} CHROME EXTENSION CLIENT_ID:", CHROME_CLIENT_ID);
      console.log("[CONFIG] \u{1F4E1} AUTH_ENDPOINT:", AUTH_ENDPOINT);
      var ApiClient = class {
        constructor() {
          this.baseUrl = API_ENDPOINT;
        }
        /**
         * Makes an authenticated request to the backend.
         * The backend will handle token refresh and validation.
         * Uses installation ID and user email for authentication (no Chrome tokens).
         */
        async makeAuthenticatedRequest(endpoint, options = {}) {
          if (!chrome.runtime?.id) {
            console.warn("[API] Extension context invalidated. Halting request.");
            return Promise.reject(new Error("Extension context invalidated."));
          }
          const { installationId, userEmail } = await chrome.storage.local.get(["installationId", "userEmail"]);
          console.log("[DEBUG] Chrome storage values:", { installationId, userEmail });
          if (!installationId) {
            throw new Error("User not authenticated. Please sign in first.");
          }
          if (!userEmail) {
            console.warn("[DEBUG] userEmail is missing from Chrome storage");
          }
          const url = `${this.baseUrl}${endpoint}`;
          const headers = {
            "X-Installation-ID": installationId,
            "X-User-Email": userEmail,
            "ngrok-skip-browser-warning": "true",
            // Add ngrok header
            "Origin": "chrome-extension://" + chrome.runtime.id,
            "User-Agent": "Chrome Extension Stamp v1.0",
            ...options.headers
          };
          if (options.method === "POST" && options.body) {
            headers["Content-Type"] = "application/json";
          }
          console.log("[API] Request headers:", JSON.stringify(headers, null, 2));
          try {
            const response = await fetch(url, {
              ...options,
              headers
            });
            if (!response.ok) {
              const errorText = await response.text();
              console.error("[API] Request failed:", {
                status: response.status,
                statusText: response.statusText,
                error: errorText,
                endpoint
              });
              throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);
            }
            return response;
          } catch (error) {
            if (error instanceof TypeError && error.message.includes("Failed to fetch")) {
              console.error("[API] Network error (possibly ngrok):", error);
              throw new Error("Cannot connect to backend server. Please check your connection.");
            }
            throw error;
          }
        }
        /**
         * Gets user data from the backend.
         */
        async getUserData() {
          const response = await this.makeAuthenticatedRequest("/user");
          return response.json();
        }
        /**
         * Checks business rules table for document storage rules.
         * @returns {Promise<object|null>} The document storage rule if found, null otherwise
         */
        async getDocumentStorageRule() {
          try {
            console.log("[API] Checking for document storage business rules...");
            console.log("[API] Calling endpoint: /api/business-rules/rules");
            console.log("[API] Base URL:", this.baseUrl);
            const response = await this.makeAuthenticatedRequest("/api/business-rules/rules");
            const data = await response.json();
            console.log("[API] Business rules response:", data);
            if (!data.success || !data.rules || !Array.isArray(data.rules)) {
              console.log("[API] Invalid business rules response format");
              return null;
            }
            const storageRule = data.rules.find(
              (rule) => rule.rule_category === "document_storage" && rule.status === "active"
            );
            if (storageRule) {
              console.log("[API] Found document storage rule:", storageRule);
              return storageRule;
            } else {
              console.log("[API] No active document storage rule found");
              return null;
            }
          } catch (error) {
            console.error("[API] Error fetching business rules:", error);
            console.log("[API] This is expected if the business rules endpoint is not implemented yet");
            console.log("[API] Cards will display without storage buttons until the endpoint is available");
            return null;
          }
        }
        /**
         * Executes a business rule using the MCP AI rules endpoint.
         * @param {object} payload - The payload containing ruleId and cardData (uses cardData.fullDetails as natural_language_input)
         * @returns {Promise<object>} The execution result
         */
        async executeBusinessRule(payload) {
          try {
            console.log("[API] Executing business rule:", {
              ruleId: payload.ruleId,
              cardTitle: payload.cardData.title
            });
            const naturalLanguageInput = {
              message_id: payload.cardData.messageId,
              ...payload.cardData.fullDetails
            };
            console.log("[API] Natural language input:", {
              hasFullDetails: !!naturalLanguageInput,
              messageId: naturalLanguageInput?.message_id,
              entityType: naturalLanguageInput?.type,
              entityValue: naturalLanguageInput?.value
            });
            const response = await this.makeAuthenticatedRequest("/mcp/ai-rules/tools/execute_rule_with_nl", {
              method: "POST",
              body: JSON.stringify({
                rule_id: String(payload.ruleId),
                natural_language_input: naturalLanguageInput
              })
            });
            const result = await response.json();
            console.log("[API] Business rule execution result:", result);
            return result;
          } catch (error) {
            console.error("[API] Error executing business rule:", error);
            throw error;
          }
        }
        /**
         * Formats card data for rule execution.
         * @param {object} cardData - The card data object
         * @returns {object} The card data and details as JSON
         */
        _formatCardDataForRule(cardData) {
          return {
            cardData: {
              cardType: cardData.cardType,
              title: cardData.title,
              icon: cardData.icon,
              status: cardData.status,
              vendor: cardData.vendor,
              amount: cardData.amount,
              currency: cardData.currency,
              hasDetails: cardData.hasDetails,
              messageId: cardData.messageId,
              docThreadId: cardData.docThreadId,
              docMessageId: cardData.docMessageId,
              statusMessageId: cardData.statusMessageId,
              statusThreadId: cardData.statusThreadId,
              firstThreadId: cardData.firstThreadId,
              firstMessageId: cardData.firstMessageId
            },
            documentDetails: cardData.fullDetails?.document?.details || {},
            documentMetadata: {
              message_id: cardData.fullDetails?.document?.message_id,
              thread_id: cardData.fullDetails?.document?.thread_id,
              final_status: cardData.fullDetails?.document?.final_status,
              status_message_id: cardData.fullDetails?.document?.status_message_id,
              status_thread_id: cardData.fullDetails?.document?.status_thread_id,
              first_thread_id: cardData.fullDetails?.document?.first_thread_id,
              first_message_id: cardData.fullDetails?.document?.first_message_id
            },
            fullDetails: cardData.fullDetails
          };
        }
        /**
         * Gets email processing status from the backend.
         */
        async getEmailStatus() {
          const response = await this.makeAuthenticatedRequest("/status");
          return response.json();
        }
        /**
         * Gets detailed document data from the backend.
         */
        async getDetailedDocuments() {
          console.log("[API] \u{1F680} Starting getDetailedDocuments request...");
          const response = await this.makeAuthenticatedRequest("/api/finops/documents/detailed");
          console.log("[API] \u2705 Raw response received from /api/finops/documents/detailed");
          const jsonData = await response.json();
          console.log("[API] \u{1F4CA} Parsed JSON response. It is an array of length:", jsonData?.length || 0);
          if (jsonData && jsonData.length > 0) {
            console.log("[API] \u{1F50D} First document structure for ID debugging:", jsonData[0]);
            console.log("[API] \u{1F50D} Available top-level fields:", Object.keys(jsonData[0]));
            if (jsonData[0].document) {
              console.log("[API] \u{1F50D} Document nested fields:", Object.keys(jsonData[0].document));
            }
          }
          return jsonData;
        }
        /**
         * Fetches a Gmail attachment PDF by calling the backend, which then uses its own
         * server-side OAuth tokens to access the Gmail API.
         */
        async fetchGmailAttachmentPdf({ threadId, documentName }) {
          if (!threadId || !documentName) {
            throw new Error("[API] fetchGmailAttachmentPdf: missing threadId or documentName");
          }
          console.log("[API] \u{1F4C4} Requesting Gmail attachment PDF from backend:", { threadId, documentName });
          try {
            const endpoint = `/api/finops/files/gmail/attachment?thread_id=${encodeURIComponent(threadId)}&filename=${encodeURIComponent(documentName)}`;
            const backendUrl = `${this.baseUrl}${endpoint}`;
            console.log("[API] \u{1F4C4} Fetching PDF from backend:", backendUrl);
            console.log("[API] \u{1F504} Sending fetch request to background script...");
            const response = await new Promise((resolve, reject) => {
              chrome.runtime.sendMessage({
                type: "fetchFileForPreview",
                url: backendUrl
              }, (response2) => {
                if (chrome.runtime.lastError) {
                  console.error("[API] \u274C Chrome runtime error:", chrome.runtime.lastError);
                  reject(new Error(chrome.runtime.lastError.message));
                } else if (response2.success) {
                  console.log("[API] \u2705 Background script response received:", {
                    hasDataUrl: !!response2.dataUrl,
                    mimeType: response2.mimeType,
                    fileSize: response2.fileSize,
                    originalUrl: response2.originalUrl
                  });
                  const byteCharacters = atob(response2.dataUrl.split(",")[1]);
                  const byteNumbers = new Array(byteCharacters.length);
                  for (let i2 = 0; i2 < byteCharacters.length; i2++) {
                    byteNumbers[i2] = byteCharacters.charCodeAt(i2);
                  }
                  const byteArray = new Uint8Array(byteNumbers);
                  const blob2 = new Blob([byteArray], { type: response2.mimeType || "application/pdf" });
                  console.log("[API] \u{1F504} Data URL converted back to blob:", {
                    type: blob2.type,
                    size: blob2.size,
                    sizeKB: Math.round(blob2.size / 1024)
                  });
                  resolve(blob2);
                } else {
                  console.error("[API] \u274C Background script error:", response2.error);
                  reject(new Error(response2.error || "Failed to fetch file"));
                }
              });
            });
            console.log("[API] \u2705 Successfully received PDF from backend.");
            console.log("[API] \u{1F4CA} PDF blob details:", {
              type: response.type,
              size: response.size,
              sizeKB: Math.round(response.size / 1024)
            });
            return response;
          } catch (error) {
            console.error("[API] \u274C Error fetching PDF from backend:", error);
            throw error;
          }
        }
        /**
         * Validates Chrome extension token with the backend.
         * This endpoint validates the token and returns user/installation info.
         */
        async validateChromeToken() {
          console.log("[API] Validating Chrome extension token with backend...");
          try {
            const { installationId, userEmail } = await chrome.storage.local.get(["installationId", "userEmail"]);
            if (!installationId) {
              throw new Error("User not authenticated. Please sign in first.");
            }
            console.log("[API] Getting Chrome extension access token for validation...");
            const tokenResult = await this._getChromeExtensionToken();
            if (!tokenResult.accessToken) {
              throw new Error("Could not obtain Chrome extension access token for validation");
            }
            const url = `${AUTH_ENDPOINT}/auth/validate-chrome-token`;
            console.log("[API] Chrome token validation URL:", url);
            const response = await fetch(url, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                "X-Installation-ID": installationId,
                "X-User-Email": userEmail,
                "X-Chrome-Token": tokenResult.accessToken,
                "ngrok-skip-browser-warning": "true"
              },
              body: JSON.stringify({})
              // Empty body as per backend documentation
            });
            if (!response.ok) {
              const errorText = await response.text();
              console.error("[API] Chrome token validation failed:", {
                status: response.status,
                statusText: response.statusText,
                error: errorText
              });
              throw new Error(`Chrome token validation failed: ${response.status} ${response.statusText} - ${errorText}`);
            }
            const result = await response.json();
            console.log("[API] Chrome token validation result:", result);
            return result;
          } catch (error) {
            console.error("[API] Chrome token validation failed:", error);
            throw error;
          }
        }
        /**
         * Gets a fresh Chrome extension access token for direct Gmail API access.
         * This token is used for Gmail API calls, not backend authentication.
         */
        async _getChromeExtensionToken() {
          console.log("[API] Getting fresh Chrome extension token for Gmail API access...");
          return new Promise((resolve, reject) => {
            chrome.runtime.sendMessage({ type: "GET_CHROME_ACCESS_TOKEN" }, (response) => {
              if (chrome.runtime.lastError) {
                console.error("[API] Chrome access token error:", chrome.runtime.lastError.message);
                reject(new Error(chrome.runtime.lastError.message));
                return;
              }
              if (response.error) {
                console.error("[API] Chrome access token failed:", response.error);
                reject(new Error(response.error));
                return;
              }
              console.log("[API] Chrome extension token obtained successfully");
              resolve(response);
            });
          });
        }
      };
      var AuthService = class {
        constructor(uiManager) {
          this.uiManager = uiManager;
        }
        /**
         * Implements the complete dual OAuth flow for Chrome extension.
         * Step 1: Initiate Web OAuth flow for backend refresh tokens
         * Step 2: Wait for Web OAuth completion
         * Step 3: Get Chrome extension access token and user email
         * Step 4: Call backend install endpoint with dual_oauth mode
         * Step 5: Complete installation
         */
        async signInWithGoogle() {
          console.log("[AUTH] Starting dual OAuth sign-in flow");
          try {
            console.log("[AUTH] Step 1: Starting Web OAuth flow");
            const webOAuthResult = await this._initiateWebClientOAuth();
            if (!webOAuthResult.success) {
              throw new Error(`Web OAuth flow failed: ${webOAuthResult.error}`);
            }
            console.log("[AUTH] Web OAuth completed successfully");
            console.log("[AUTH] Step 2: Clearing Chrome identity cache for fresh sign-up");
            await this._clearChromeIdentityCache();
            console.log("[AUTH] Step 3: Getting Chrome extension access token");
            const chromeTokenResult = await this._getChromeExtensionAccessToken();
            const userEmail = chromeTokenResult.userEmail;
            if (!userEmail) {
              const errorMsg = chromeTokenResult.error || "Unknown error";
              console.error("[AUTH] Chrome extension OAuth failed:", {
                error: errorMsg,
                debug: chromeTokenResult.debug
              });
              console.error("[AUTH] Full chromeTokenResult:", chromeTokenResult);
              throw new Error(`Could not retrieve user email from Chrome extension OAuth: ${errorMsg}`);
            }
            console.log("[AUTH] User email obtained:", userEmail);
            console.log("[AUTH] Step 4: Calling backend install endpoint");
            const installResponse = await fetch(`${AUTH_ENDPOINT}/install`, {
              method: "POST",
              headers: {
                "Content-Type": "application/json"
                //'ngrok-skip-browser-warning': 'true'
              },
              body: JSON.stringify({
                installation_type: "dual_oauth",
                user_email: userEmail
              })
            });
            if (!installResponse.ok) {
              const errorText = await installResponse.text();
              console.error("[AUTH] Installation failed:", installResponse.status, errorText);
              throw new Error(`Backend installation failed: ${errorText}`);
            }
            const installResult = await installResponse.json();
            const installationId = installResult.installationId;
            console.log("[AUTH] Installation successful, ID:", installationId);
            await chrome.storage.local.set({
              installationId,
              userEmail,
              installationComplete: true,
              installationDate: (/* @__PURE__ */ new Date()).toISOString()
            });
            console.log("[AUTH] Step 5: Validating Chrome token");
            try {
              const validationResult = await this.uiManager.apiClient.validateChromeToken();
              if (!validationResult.success) {
                throw new Error(`Chrome token validation failed: ${validationResult.error || "Unknown error"}`);
              }
              console.log("[AUTH] Chrome token validation successful");
            } catch (error) {
              console.error("[AUTH] Chrome token validation failed:", error.message);
              console.warn("[AUTH] Installation completed but token validation failed");
            }
            console.log("[AUTH] Dual OAuth installation completed successfully");
            console.log("[AUTH] \u{1F4CA} OAUTH CLIENT ID COMPARISON SUMMARY:");
            console.log("[AUTH] \u{1F527} Chrome Extension OAuth used: manifest.json client_id");
            console.log("[AUTH] \u{1F310} Web OAuth used: backend server client_id");
            console.log("[AUTH] \u{1F4DD} Check browser console for detailed client ID values");
          } catch (error) {
            console.error("[AUTH] Dual OAuth sign-in flow failed:", error.message);
            try {
              const { userEmail } = await chrome.storage.local.get(["userEmail"]);
              if (userEmail) {
                console.error("[AUTH] Sign-up failed for email:", userEmail);
              } else {
                console.error("[AUTH] Sign-up failed - no user email found in storage");
              }
            } catch (storageError) {
              console.error("[AUTH] Sign-up failed - could not retrieve user email from storage");
            }
            await this._cleanupPartialInstallation();
            if (error instanceof TypeError && error.message.includes("Failed to fetch")) {
              throw new Error("Cannot connect to backend server. Please check your connection.");
            }
            throw error;
          }
        }
        /**
         * Initiates the Web client OAuth flow for backend refresh token storage.
         * This opens a new tab to the backend OAuth start endpoint and waits for completion.
         */
        async _initiateWebClientOAuth() {
          console.log("[AUTH] Initiating Web client OAuth flow...");
          console.log("[AUTH] \u{1F310} Web OAuth will use backend server at:", AUTH_ENDPOINT);
          console.log("[AUTH] \u{1F4DD} Backend will determine the client ID for this flow");
          return new Promise((resolve, reject) => {
            chrome.runtime.sendMessage({ type: "START_WEB_OAUTH_FLOW" }, (response) => {
              if (chrome.runtime.lastError) {
                console.error("[AUTH] Web OAuth initiation error:", chrome.runtime.lastError.message);
                reject(new Error(chrome.runtime.lastError.message));
                return;
              }
              if (response.error) {
                console.error("[AUTH] Web OAuth initiation failed:", response.error);
                reject(new Error(response.error));
                return;
              }
              console.log("[AUTH] Web OAuth flow completed successfully");
              resolve(response);
            });
          });
        }
        /**
         * Gets Chrome extension access token and user email using chrome.identity API.
         * This is used for the extension's own API calls and to get user email if needed.
         * Does NOT send tokens to backend - they're for extension use only.
         */
        async _getChromeExtensionAccessToken() {
          console.log("[AUTH] Getting Chrome extension access token for direct API access...");
          const { userEmail } = await chrome.storage.local.get(["userEmail"]);
          console.log("[AUTH] \u{1F50D} Attempting OAuth for user email:", userEmail || "NOT_FOUND");
          return new Promise((resolve, reject) => {
            chrome.runtime.sendMessage({ type: "GET_CHROME_ACCESS_TOKEN" }, (response) => {
              if (chrome.runtime.lastError) {
                console.error("[AUTH] Chrome access token error:", chrome.runtime.lastError.message);
                reject(new Error(chrome.runtime.lastError.message));
                return;
              }
              if (response.error) {
                console.error("[AUTH] Chrome access token failed:", response.error);
                reject(new Error(response.error));
                return;
              }
              console.log("[AUTH] Chrome extension access token obtained successfully");
              resolve(response);
            });
          });
        }
        /**
         * Clears Chrome identity cache and storage to ensure fresh authentication during sign-up.
         * This is only called during the sign-up flow, not during regular API calls.
         */
        async _clearChromeIdentityCache() {
          console.log("[AUTH] Clearing Chrome identity cache and storage for fresh sign-up...");
          try {
            console.log("[AUTH] Clearing Chrome storage...");
            await chrome.storage.local.remove(["installationId", "userEmail", "installationComplete"]);
            console.log("[AUTH] Chrome storage cleared successfully");
            return new Promise((resolve, reject) => {
              chrome.runtime.sendMessage({ type: "CLEAR_CHROME_IDENTITY_CACHE" }, (response) => {
                if (chrome.runtime.lastError) {
                  console.error("[AUTH] Clear cache error:", chrome.runtime.lastError.message);
                  reject(new Error(chrome.runtime.lastError.message));
                  return;
                }
                if (response.error) {
                  console.log("[AUTH] Cache clearing had issues (non-critical):", response.error);
                }
                console.log("[AUTH] Chrome identity cache cleared successfully");
                resolve(response);
              });
            });
          } catch (error) {
            console.error("[AUTH] Error clearing Chrome storage:", error);
            throw error;
          }
        }
        /**
         * Cleans up partial installation state on failure.
         */
        async _cleanupPartialInstallation() {
          try {
            console.log("[AUTH] Cleaning up partial installation state...");
            await chrome.storage.local.remove([
              "installationId",
              "userEmail",
              "installationComplete",
              "installationDate"
            ]);
            console.log("[AUTH] Partial installation cleanup completed");
          } catch (error) {
            console.error("[AUTH] Failed to cleanup partial installation:", error);
          }
        }
        /**
         * Checks local storage for installation state and authentication status.
         */
        async getAuthState() {
          const result = await chrome.storage.local.get([
            "installationId",
            "userEmail",
            "installationComplete",
            "installationDate"
          ]);
          return {
            isLoggedIn: !!result.installationId,
            isInstalled: !!result.installationComplete,
            userEmail: result.userEmail || null,
            installationId: result.installationId || null,
            installationDate: result.installationDate || null
          };
        }
        /**
         * Gets the user email from local storage.
         */
        async getUserEmail() {
          const { userEmail } = await chrome.storage.local.get(["userEmail"]);
          return userEmail || null;
        }
        /**
         * Gets the installation ID from local storage.
         */
        async getInstallationId() {
          const { installationId } = await chrome.storage.local.get(["installationId"]);
          return installationId || null;
        }
        /**
         * Standard sign-out that clears local extension storage.
         * Does not revoke Google OAuth permissions.
         */
        async signOut() {
          try {
            console.log("[AUTH] Starting standard sign-out...");
            const { installationId } = await chrome.storage.local.get("installationId");
            if (installationId) {
              console.log("[AUTH] Notifying backend of sign-out for installation:", installationId);
              await fetch(`${AUTH_ENDPOINT}/revoke`, {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                  "X-Installation-ID": installationId,
                  "ngrok-skip-browser-warning": "true"
                }
              });
            }
            console.log("[AUTH] Clearing local storage...");
            await chrome.storage.local.remove([
              "installationId",
              "userEmail",
              "installationComplete",
              "installationDate"
            ]);
            console.log("[AUTH] Sign-out complete.");
          } catch (error) {
            console.error("[AUTH] Sign out failed:", error);
            throw error;
          }
        }
        /**
         * Development tool to completely reset the auth state.
         * Clears all local data and notifies backend to revoke tokens.
         */
        async hardReset() {
          try {
            console.log("[AUTH] Starting hard reset...");
            const { installationId } = await chrome.storage.local.get(["installationId"]);
            if (installationId) {
              console.log("[AUTH] Step 1: Notifying backend to revoke all tokens...");
              try {
                await fetch(`${AUTH_ENDPOINT}/hard-reset`, {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    "X-Installation-ID": installationId,
                    "ngrok-skip-browser-warning": "true"
                  }
                });
                console.log("[AUTH] Backend token revocation requested");
              } catch (error) {
                console.warn("[AUTH] Failed to notify backend of hard reset:", error.message);
              }
            }
            console.log("[AUTH] Step 2: Performing thorough local cleanup...");
            await this._cleanupPartialInstallation();
            try {
              await chrome.storage.sync.clear();
              console.log("[AUTH] Sync storage cleared");
            } catch (error) {
              console.warn("[AUTH] Could not clear sync storage:", error.message);
            }
            console.log("[AUTH] Hard reset completed successfully.");
          } catch (error) {
            console.error("[AUTH] Hard reset failed:", error);
            try {
              await this._cleanupPartialInstallation();
            } catch (cleanupError) {
              console.error("[AUTH] Final cleanup also failed:", cleanupError);
            }
            throw error;
          }
        }
      };
      var INVOICE_STAGES = {
        PENDING_APPROVAL: "Pending Approval",
        IN_REVIEW: "In Review",
        APPROVED: "Approved",
        PAID: "Paid",
        OVERDUE: "Overdue",
        REJECTED: "Rejected"
      };
      var STAGE_COLORS = {
        [INVOICE_STAGES.PENDING_APPROVAL]: "#ffc107",
        [INVOICE_STAGES.IN_REVIEW]: "#9c27b0",
        [INVOICE_STAGES.APPROVED]: "#2196f3",
        [INVOICE_STAGES.PAID]: "#4caf50",
        [INVOICE_STAGES.OVERDUE]: "#f44336",
        [INVOICE_STAGES.REJECTED]: "#607d8b"
      };
      var THREAD_STAGE_ASSIGNMENTS = {
        // Real Gmail thread IDs with their assigned stages
        "thread-1": INVOICE_STAGES.PENDING_APPROVAL,
        "thread-2": INVOICE_STAGES.PENDING_APPROVAL,
        "thread-3": INVOICE_STAGES.IN_REVIEW,
        "thread-4": INVOICE_STAGES.APPROVED,
        "thread-5": INVOICE_STAGES.PAID,
        "thread-6": INVOICE_STAGES.OVERDUE,
        "thread-7": INVOICE_STAGES.REJECTED,
        "thread-8": INVOICE_STAGES.PENDING_APPROVAL,
        "thread-9": INVOICE_STAGES.IN_REVIEW,
        "thread-10": INVOICE_STAGES.APPROVED,
        "thread-11": INVOICE_STAGES.PAID,
        "thread-12": INVOICE_STAGES.OVERDUE,
        "thread-13": INVOICE_STAGES.REJECTED,
        "thread-14": INVOICE_STAGES.PENDING_APPROVAL,
        "thread-15": INVOICE_STAGES.IN_REVIEW
      };
      var INVOICE_STATUS_COLORS = {
        // Core statuses
        pending: { backgroundColor: "#FFC107", textColor: "#000000", description: "Awaiting approval" },
        approved: { backgroundColor: "#4CAF50", textColor: "#FFFFFF", description: "Approved" },
        rejected: { backgroundColor: "#F44336", textColor: "#FFFFFF", description: "Rejected" },
        paid: { backgroundColor: "#2196F3", textColor: "#FFFFFF", description: "Payment confirmed" },
        // Extended statuses
        on_hold: { backgroundColor: "#9E9E9E", textColor: "#FFFFFF", description: "On hold" },
        requires_review: { backgroundColor: "#FF9800", textColor: "#000000", description: "Requires review" },
        partially_approved: { backgroundColor: "#81C784", textColor: "#FFFFFF", description: "Partially approved" },
        ready_for_payment: { backgroundColor: "#26A69A", textColor: "#FFFFFF", description: "Ready for payment" },
        duplicate: { backgroundColor: "#607D8B", textColor: "#FFFFFF", description: "Duplicate detected" },
        // Legacy/optional
        submitted: { backgroundColor: "#90CAF9", textColor: "#000000", description: "Invoice initially detected" }
      };
      var PRIMARY_INTENT_COLORS = {
        // Financial Intents - Blues
        "payment_status_inquiry": {
          backgroundColor: "#E3F2FD",
          textColor: "#1565C0"
        },
        "payment_confirmation": {
          backgroundColor: "#BBDEFB",
          textColor: "#1565C0"
        },
        "refund_request": {
          backgroundColor: "#90CAF9",
          textColor: "#000000"
        },
        // Document Processing - Greens
        "invoice_submission": {
          backgroundColor: "#E8F5E9",
          textColor: "#2E7D32"
        },
        "expense_report": {
          backgroundColor: "#C8E6C9",
          textColor: "#2E7D32"
        },
        "tax_documentation": {
          backgroundColor: "#A5D6A7",
          textColor: "#000000"
        },
        // Inquiries - Purples
        "billing_inquiry": {
          backgroundColor: "#F3E5F5",
          textColor: "#6A1B9A"
        },
        "status_request": {
          backgroundColor: "#E1BEE7",
          textColor: "#6A1B9A"
        },
        "information_sharing": {
          backgroundColor: "#CE93D8",
          textColor: "#000000"
        },
        // Action Items - Warm Colors
        "approval_request": {
          backgroundColor: "#FFF3E0",
          textColor: "#E65100"
        },
        "urgent_request": {
          backgroundColor: "#FFE0B2",
          textColor: "#E65100"
        },
        "task_assignment": {
          backgroundColor: "#FFCC80",
          textColor: "#000000"
        },
        // Issues & Resolution - Reds
        "quality_issue": {
          backgroundColor: "#FFEBEE",
          textColor: "#C62828"
        },
        "dispute_resolution": {
          backgroundColor: "#FFCDD2",
          textColor: "#C62828"
        },
        "escalation": {
          backgroundColor: "#EF9A9A",
          textColor: "#000000"
        },
        // Administrative - Grays
        "vendor_onboarding": {
          backgroundColor: "#FAFAFA",
          textColor: "#424242"
        },
        "account_setup": {
          backgroundColor: "#F5F5F5",
          textColor: "#424242"
        },
        "system_access": {
          backgroundColor: "#EEEEEE",
          textColor: "#000000"
        },
        // Communication - Teals
        "follow_up": {
          backgroundColor: "#E0F2F1",
          textColor: "#00695C"
        },
        "routine_update": {
          backgroundColor: "#B2DFDB",
          textColor: "#00695C"
        },
        "general_communication": {
          backgroundColor: "#80CBC4",
          textColor: "#000000"
        }
      };
      function createLabelFromThreadLabel(labelText) {
        if (!labelText) {
          console.warn("[LABEL_CREATION] Received empty label text");
          return null;
        }
        const normalizedText = labelText.toLowerCase();
        console.log(`[LABEL_CREATION] Processing label text: "${labelText}"`);
        if (normalizedText.includes("no definitive label found")) {
          console.log('[LABEL_CREATION] Skipping label creation for "No definitive label found"');
          return null;
        }
        for (const status of Object.keys(INVOICE_STATUS_COLORS)) {
          if (normalizedText.includes(status)) {
            const colorConfig = INVOICE_STATUS_COLORS[status];
            console.log(`[LABEL_CREATION] Found invoice status keyword "${status}" in: "${normalizedText}"`, colorConfig);
            return {
              title: labelText,
              backgroundColor: colorConfig.backgroundColor,
              textColor: colorConfig.textColor,
              iconUrl: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
            };
          }
        }
        for (const intent of Object.keys(PRIMARY_INTENT_COLORS)) {
          if (normalizedText.includes(intent)) {
            const colorConfig = PRIMARY_INTENT_COLORS[intent];
            console.log(`[LABEL_CREATION] Found primary intent keyword "${intent}" in: "${normalizedText}"`, colorConfig);
            return {
              title: labelText,
              backgroundColor: colorConfig.backgroundColor,
              textColor: colorConfig.textColor,
              iconUrl: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
            };
          }
        }
        console.log(`[LABEL_CREATION] No mapping found for: "${normalizedText}". Skipping label.`);
        return null;
      }
      var ENTITY_CONFIG = {
        inv: { displayName: "Invoice", icon: "\u{1F9FE}" },
        quote: { displayName: "Quote", icon: "\u{1F4CA}" },
        contract: { displayName: "Contract", icon: "\u270D\uFE0F" },
        po: { displayName: "Purchase Order", icon: "\u{1F4C4}" },
        statement: { displayName: "Statement", icon: "\u{1F4CB}" },
        approval: { displayName: "Approval", icon: "\u{1F44D}" },
        default: { displayName: "Document", icon: "\u{1F4CE}" }
      };
      function transformProcessedEntitiesForSidebar(processedEntities) {
        if (!processedEntities || !Array.isArray(processedEntities)) {
          return [];
        }
        return processedEntities.map((entity) => {
          const hasDetails = !!(entity.document && entity.document.details && Object.keys(entity.document.details).length > 0);
          const config = ENTITY_CONFIG[entity.type] || ENTITY_CONFIG.default;
          const details = entity.document?.details || {};
          return {
            cardType: entity.type,
            title: `${config.displayName} ${entity.value}`,
            icon: config.icon,
            status: entity.document?.final_status || null,
            messageId: entity.document?.message_id,
            hasDetails,
            fullDetails: entity,
            // Conditionally add specific details
            vendor: hasDetails ? details.vendor?.name || "Unknown Vendor" : null,
            amount: hasDetails ? details.amount || 0 : null,
            currency: hasDetails ? details.currency || "USD" : null,
            filename: details.filename || null,
            // Add filename for attachment matching
            // Add status message information for invoices
            statusMessageId: entity.document?.status_message_id || null,
            statusThreadId: entity.document?.status_thread_id || null,
            // Add document source information
            docThreadId: entity.document?.thread_id || null,
            docMessageId: entity.document?.message_id || null,
            firstThreadId: entity.document?.first_thread_id || null,
            firstMessageId: entity.document?.first_message_id || null
          };
        });
      }
      function createEntityCard(cardData, threadId) {
        const statusConfig = cardData.status ? INVOICE_STATUS_COLORS[cardData.status] || { backgroundColor: "#E0E0E0", textColor: "#000000", description: "" } : null;
        const amountFormatted = cardData.hasDetails ? new Intl.NumberFormat("en-US", { style: "currency", currency: cardData.currency }).format(cardData.amount) : null;
        const isClickable = cardData.hasDetails;
        const fullDetailsString = isClickable ? JSON.stringify(cardData.fullDetails).replace(/'/g, "&apos;") : "";
        const cursorStyle = isClickable ? "cursor: pointer;" : "cursor: default;";
        const cardClass = isClickable ? "entity-card" : "entity-card non-clickable";
        const cardId = `${cardData.cardType}-${cardData.messageId || "unknown"}`;
        const accountPath = getCurrentGmailAccount();
        const messageLink = cardData.messageId ? `https://mail.google.com/mail${accountPath}/#inbox/${threadId}/${cardData.messageId}` : null;
        const titleHtml = messageLink ? `<a href="${messageLink}" target="_blank" style="text-decoration: none; color: #1a73e8;" onclick="event.stopPropagation();">${cardData.title}</a>` : cardData.title;
        const sublineHtml = isClickable && (cardData.vendor || amountFormatted) ? `<div style="margin-top:4px; font-size:12px; color:#64748b; display:flex; align-items:center; gap:8px; flex-wrap:wrap;">
         ${cardData.vendor ? `<span style="white-space:nowrap;">${cardData.vendor}</span>` : ""}
         ${cardData.vendor && amountFormatted ? `<span aria-hidden="true" style="color:#cbd5e1;">\u2022</span>` : ""}
         ${amountFormatted ? `<span style="white-space:nowrap;">${amountFormatted}</span>` : ""}
       </div>` : "";
        return `
    <div class="${cardClass}" 
         data-card-id="${cardId}"
         ${isClickable ? `data-full-details='${fullDetailsString}'` : ""} 
         style="
           background: white; 
           border: 1px solid #e5e0e0; 
           border-radius: 12px; 
           margin-bottom: 12px; 
           padding: 12px 14px; 
           ${cursorStyle} 
           transition: all 0.2s;
         ">
      <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
        <div style="display:flex; flex-direction:column; min-width:0;">
          <h4 style="margin: 0; font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 8px; color:#1f2937;">
            <span style="font-size: 18px;">${cardData.icon}</span>
            <span style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">${titleHtml}</span>
          </h4>
          ${sublineHtml}
        </div>
        ${statusConfig ? `
        <span class="status-tag" title="${statusConfig.description || ""}" style="display:inline-flex; align-items:center; gap:6px; background-color: ${statusConfig.backgroundColor}; color: ${statusConfig.textColor}; padding: 4px 8px; border-radius: 999px; font-size: 11px; font-weight: 700; text-transform: capitalize; white-space:nowrap;">
          <span style="display:inline-block; width:8px; height:8px; border-radius:50%; background:${statusConfig.textColor === "#000000" ? "#111827" : "#ffffff"}; opacity:0.6;"></span>
          ${cardData.status.replace(/_/g, " ")}
        </span>
        ` : ""}
      </div>
    </div>
  `;
      }
      function createDetailsSidebarContent(details) {
        console.log("[DETAILS] Full details object:", details);
        const doc = details.document;
        const docDetails = doc.details;
        console.log("[DETAILS] Document object:", doc);
        console.log("[DETAILS] Document details object:", docDetails);
        console.log("[DETAILS] Available keys in docDetails:", Object.keys(docDetails));
        const amountFormatted = new Intl.NumberFormat("en-US", {
          style: "currency",
          currency: docDetails.currency || "USD"
        }).format(docDetails.amount || 0);
        let detailsHtml = "";
        for (const [key, value] of Object.entries(docDetails)) {
          if (value !== null && value !== void 0 && typeof value !== "object") {
            let displayValue = value;
            if (key === "amount" && docDetails.currency) {
              displayValue = new Intl.NumberFormat("en-US", {
                style: "currency",
                currency: docDetails.currency
              }).format(value);
            } else if (key.includes("date") || key.includes("Date")) {
              try {
                displayValue = new Date(value).toLocaleDateString();
              } catch (e) {
                displayValue = value;
              }
            }
            detailsHtml += `
              <div style="margin-bottom: 12px;">
                <strong style="color: #5f6368; font-size: 12px; display: block;">${key.replace(/_/g, " ").replace(/\b\w/g, (l) => l.toUpperCase())}</strong>
                <div style="font-weight: 500; font-size: 14px;">${displayValue}</div>
              </div>
            `;
          }
        }
        if (docDetails.vendor && typeof docDetails.vendor === "object") {
          detailsHtml += `
          <div style="margin-bottom: 12px;">
            <strong style="color: #5f6368; font-size: 12px; display: block;">Vendor Name</strong>
            <div style="font-weight: 500; font-size: 14px;">${docDetails.vendor.name || "N/A"}</div>
          </div>
        `;
          if (docDetails.vendor.email) {
            detailsHtml += `
              <div style="margin-bottom: 12px;">
                <strong style="color: #5f6368; font-size: 12px; display: block;">Vendor Email</strong>
                <div style="font-weight: 500; font-size: 14px;">${docDetails.vendor.email}</div>
              </div>
            `;
          }
        }
        if (docDetails.lineItems && Array.isArray(docDetails.lineItems) && docDetails.lineItems.length > 0) {
          detailsHtml += `
          <div style="margin-bottom: 12px;">
            <strong style="color: #5f6368; font-size: 12px; display: block;">Line Items</strong>
            <div style="margin-top: 8px;">
        `;
          docDetails.lineItems.forEach((item, index) => {
            const itemAmount = item.amount ? new Intl.NumberFormat("en-US", {
              style: "currency",
              currency: docDetails.currency || "USD"
            }).format(item.amount) : "N/A";
            detailsHtml += `
              <div style="background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 4px; padding: 8px; margin-bottom: 4px;">
                <div style="font-weight: 500; font-size: 13px;">${item.description || "No description"}</div>
                <div style="font-size: 12px; color: #666;">
                  Quantity: ${item.quantity || "N/A"} | 
                  Unit Price: ${item.unitPrice ? new Intl.NumberFormat("en-US", { style: "currency", currency: docDetails.currency || "USD" }).format(item.unitPrice) : "N/A"} | 
                  Amount: ${itemAmount}
                </div>
                ${item.sku ? `<div style="font-size: 11px; color: #999;">SKU: ${item.sku}</div>` : ""}
              </div>
            `;
          });
          detailsHtml += `
            </div>
          </div>
        `;
        }
        if (doc.final_status) {
          detailsHtml += `
          <div style="margin-bottom: 12px;">
            <strong style="color: #5f6368; font-size: 12px; display: block;">Status</strong>
            <div style="font-weight: 500; font-size: 14px; text-transform: capitalize;">${doc.final_status}</div>
          </div>
        `;
        }
        if (doc.document_name) {
          detailsHtml += `
          <div style="margin-bottom: 12px;">
            <strong style="color: #5f6368; font-size: 12px; display: block;">Document Name</strong>
            <div style="font-weight: 500; font-size: 14px;">${doc.document_name}</div>
          </div>
        `;
        }
        if (doc.message_id) {
          detailsHtml += `
          <div style="margin-bottom: 12px;">
            <strong style="color: #5f6368; font-size: 12px; display: block;">Message ID</strong>
            <div style="font-family: monospace; font-size: 12px; color: #666;">${doc.message_id}</div>
          </div>
        `;
        }
        if (doc.first_message_id && doc.first_message_id !== doc.message_id) {
          detailsHtml += `
          <div style="margin-bottom: 12px;">
            <strong style="color: #5f6368; font-size: 12px; display: block;">First Message ID</strong>
            <div style="font-family: monospace; font-size: 12px; color: #666;">${doc.first_message_id}</div>
          </div>
        `;
        }
        return `
      <div style="padding: 16px;">
        <div style="margin-bottom: 16px;">
          <button id="back-to-cards" style="background: #f1f3f4; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 13px; color: #5f6368;">
            \u2190 Back to Documents
          </button>
        </div>
        
        <h3 style="margin: 0 0 16px 0; color: #202124; font-size: 18px;">Document Details</h3>
        
        <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px;">
          ${detailsHtml}
        </div>
      </div>
    `;
      }
      var UIManager = class {
        constructor(sdk) {
          this.sdk = sdk;
          this.authService = null;
          this.apiClient = null;
          this.sidebarPanel = null;
          this.sidebarElement = null;
          this.dataManager = new ThreadDataManager(null);
          this.floatingChatManager = null;
          this._messageIndex = /* @__PURE__ */ new Map();
          this._documentStorageRule = null;
        }
        // NOTE: Old reactive message indexing removed in favor of proactive indexing in _indexAllThreadMessages()
        // This ensures we index ALL messages in a thread (including collapsed ones) when the thread opens
        /**
         * Initializes and caches the document storage business rule.
         * Called once during UI setup.
         */
        async initializeBusinessRules() {
          if (!this.apiClient) {
            console.log("[UI] API client not available, skipping business rules initialization");
            return;
          }
          try {
            console.log("[UI] Initializing business rules...");
            this._documentStorageRule = await this.apiClient.getDocumentStorageRule();
            if (this._documentStorageRule) {
              console.log("[UI] Document storage rule initialized:", this._documentStorageRule);
            } else {
              console.log("[UI] No document storage rule found");
            }
          } catch (error) {
            console.error("[UI] Error initializing business rules:", error);
            this._documentStorageRule = null;
          }
        }
        /**
         * Handles storing a document to Google Drive using business rules.
         * @param {object} cardData - The card data to store
         */
        async handleDocumentStorage(cardData) {
          if (!this._documentStorageRule) {
            console.error("[UI] No document storage rule available");
            return;
          }
          try {
            console.log("[UI] Starting document storage for card:", cardData.title);
            console.log("[UI] Using business rule ID:", this._documentStorageRule.id);
            const cachedCardData = this._currentCardData || [];
            console.log("[UI] Cached card data available:", cachedCardData.length, "items");
            console.log("[UI] Looking for document:", {
              title: cardData.title,
              messageId: cardData.messageId,
              docMessageId: cardData.docMessageId
            });
            const matchingCachedData = this.findMatchingCachedDocument(cachedCardData, cardData);
            if (matchingCachedData) {
              console.log("[UI] \u2705 Found matching cached data for:", matchingCachedData.title);
              console.log("[UI] Cached document details:", {
                title: matchingCachedData.title,
                messageId: matchingCachedData.messageId,
                docMessageId: matchingCachedData.docMessageId,
                vendor: matchingCachedData.vendor,
                amount: matchingCachedData.amount
              });
            } else {
              console.log("[UI] \u274C No matching cached data found, using provided cardData");
              console.log("[UI] Available cached documents:", cachedCardData.map((doc) => ({
                title: doc.title,
                messageId: doc.messageId,
                docMessageId: doc.docMessageId
              })));
            }
            const payload = {
              ruleId: this._documentStorageRule.id,
              cardData: matchingCachedData || cardData,
              timestamp: (/* @__PURE__ */ new Date()).toISOString()
            };
            console.log("[UI] Sending storage request with payload:", {
              ruleId: payload.ruleId,
              cardTitle: payload.cardData.title,
              hasMatchingData: !!matchingCachedData
            });
            const result = await this.apiClient.executeBusinessRule(payload);
            console.log("[UI] Document storage result:", result);
            this.showNotification("Document stored successfully in Google Drive!", "success");
          } catch (error) {
            console.error("[UI] Error storing document:", error);
            this.showNotification("Failed to store document. Please try again.", "error");
          }
        }
        /**
         * Finds the matching cached document data for a specific document being stored.
         * Uses exact filename matching between cached.filename and targetCardData.title.
         * @param {Array} cachedCardData - Array of all cached documents from sidebar creation
         * @param {Object} targetCardData - The specific document we're trying to store
         * @returns {Object|null} The matching cached document or null if not found
         */
        findMatchingCachedDocument(cachedCardData, targetCardData) {
          if (!cachedCardData || cachedCardData.length === 0) {
            console.log("[MATCH] No cached data available");
            return null;
          }
          console.log("[MATCH] Searching for document match...");
          console.log("[MATCH] Target data:", {
            filename: targetCardData.filename,
            messageId: targetCardData.messageId,
            title: targetCardData.title
          });
          if (targetCardData.filename && targetCardData.messageId) {
            const filenameMessageMatch = cachedCardData.find((cached) => {
              return cached.filename === targetCardData.filename && cached.messageId === targetCardData.messageId;
            });
            if (filenameMessageMatch) {
              console.log("[MATCH] \u2705 Found filename + messageId match:", {
                filename: filenameMessageMatch.filename,
                messageId: filenameMessageMatch.messageId,
                title: filenameMessageMatch.title
              });
              return filenameMessageMatch;
            }
          }
          if (targetCardData.messageId) {
            const messageIdMatch = cachedCardData.find((cached) => {
              return cached.messageId === targetCardData.messageId;
            });
            if (messageIdMatch) {
              console.log("[MATCH] \u2705 Found messageId match:", {
                messageId: messageIdMatch.messageId,
                title: messageIdMatch.title,
                filename: messageIdMatch.filename
              });
              return messageIdMatch;
            }
          }
          if (targetCardData.title) {
            const titleMatch = cachedCardData.find((cached) => {
              return cached.title === targetCardData.title;
            });
            if (titleMatch) {
              console.log("[MATCH] \u2705 Found title match:", {
                title: titleMatch.title,
                filename: titleMatch.filename,
                messageId: titleMatch.messageId
              });
              return titleMatch;
            }
          }
          console.log("[MATCH] \u274C No match found");
          console.log("[MATCH] Available cached documents:");
          cachedCardData.forEach((doc, index) => {
            console.log(`[MATCH]   ${index + 1}. Title: "${doc.title}", Filename: "${doc.filename || "N/A"}", MessageId: "${doc.messageId || "N/A"}"`);
          });
          return null;
        }
        /**
         * Shows a notification to the user.
         * @param {string} message - The notification message
         * @param {string} type - The notification type ('success', 'error', 'info')
         */
        showNotification(message, type = "info") {
          const notification = document.createElement("div");
          notification.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 10000;
      padding: 12px 16px;
      border-radius: 8px;
      color: white;
      font-weight: 500;
      font-size: 14px;
      max-width: 300px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      animation: slideIn 0.3s ease-out;
      background: ${type === "success" ? "#10b981" : type === "error" ? "#ef4444" : "#3b82f6"};
    `;
          notification.textContent = message;
          document.body.appendChild(notification);
          if (!document.getElementById("notification-styles")) {
            const style = document.createElement("style");
            style.id = "notification-styles";
            style.textContent = `
        @keyframes slideIn {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOut {
          from { transform: translateX(0); opacity: 1; }
          to { transform: translateX(100%); opacity: 0; }
        }
      `;
            document.head.appendChild(style);
          }
          setTimeout(() => {
            notification.style.animation = "slideOut 0.3s ease-in";
            setTimeout(() => {
              if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
              }
            }, 300);
          }, 5e3);
        }
        async _indexAllThreadMessages(threadView) {
          try {
            console.log("[THREAD_INDEX] Proactively indexing all messages in thread...");
            const allMessageViews = threadView.getMessageViewsAll();
            console.log("[THREAD_INDEX] Found", allMessageViews.length, "total messages in thread (including collapsed)");
            for (let i2 = 0; i2 < allMessageViews.length; i2++) {
              const messageView = allMessageViews[i2];
              try {
                const messageId = await messageView.getMessageIDAsync();
                if (!this._messageIndex.has(messageId)) {
                  this._messageIndex.set(messageId, messageView);
                  console.log("[THREAD_INDEX] Proactively indexed message:", messageId, "isLoaded:", messageView.isLoaded ? messageView.isLoaded() : "unknown");
                  messageView.on("destroy", () => {
                    this._messageIndex.delete(messageId);
                    console.log("[THREAD_INDEX] Removed proactively indexed message:", messageId);
                  });
                } else {
                  console.log("[THREAD_INDEX] Message already indexed:", messageId);
                }
              } catch (e) {
                console.log("[THREAD_INDEX] Failed to index message", i2, ":", e.message);
              }
            }
            console.log("[THREAD_INDEX] Finished indexing. Total messages in index:", this._messageIndex.size);
            console.log("[THREAD_INDEX] All indexed message IDs:", Array.from(this._messageIndex.keys()));
          } catch (e) {
            console.error("[THREAD_INDEX] Failed to proactively index thread messages:", e);
          }
        }
        setAuthService(authService) {
          this.authService = authService;
        }
        setApiClient(apiClient) {
          this.apiClient = apiClient;
          this.dataManager.apiClient = apiClient;
        }
        initializeFloatingChat() {
          console.log("[FLOATING CHAT] Starting initialization...");
          try {
            this.loadFloatingChatScripts().then(() => {
              console.log("[FLOATING CHAT] Scripts loaded successfully");
              this.floatingChatManager = new FloatingChatManager(this);
              console.log("[FLOATING CHAT] Manager initialized:", this.floatingChatManager);
            }).catch((error) => {
              console.error("[FLOATING CHAT] Failed to load scripts:", error);
            });
          } catch (error) {
            console.error("[FLOATING CHAT] Failed to initialize floating chat:", error);
          }
        }
        async loadFloatingChatScripts() {
          console.log("[FLOATING CHAT] Requesting script injection from background script...");
          try {
            const cssLink = document.createElement("link");
            cssLink.rel = "stylesheet";
            cssLink.href = chrome.runtime.getURL("floating-chat/floating-chat.css");
            console.log("[FLOATING CHAT] Injected CSS link.");
            document.head.appendChild(cssLink);
            const response = await chrome.runtime.sendMessage({
              type: "INJECT_FLOATING_CHAT_SCRIPTS"
            });
            if (response && response.success) {
              console.log("[FLOATING CHAT] Background script confirmed injection.");
            } else {
              throw new Error(response.error || "Unknown error during script injection.");
            }
          } catch (error) {
            console.error("[FLOATING CHAT] Failed to load scripts via background script:", error);
            throw error;
          }
        }
        // Test method for floating chat (can be called from console)
        testFloatingChat() {
          if (this.floatingChatManager) {
            console.log("[TEST] Floating chat state:", this.floatingChatManager.getState());
            this.floatingChatManager.addMessage("This is a test message from the console!", "assistant");
          } else {
            console.log("[TEST] Floating chat manager not initialized");
          }
        }
        /**
         * Initializes the UI by checking the auth state and rendering the correct view.
         */
        async initialize() {
          console.log("[UI DEBUG] 1. UIManager initializing...");
          this.setupURLObserver();
          try {
            const authState = await this.authService.getAuthState();
            if (authState.isLoggedIn) {
              console.log("[UI DEBUG] 2. User is logged in. Calling renderMainView.");
              this.renderMainView();
              this.initializeFloatingChat();
            } else {
              console.log("[UI DEBUG] 2. User is NOT logged in. Calling renderLoginView.");
              this.renderLoginView();
            }
          } catch (error) {
            console.error("[UI] Failed to initialize:", error);
            this.renderLoginView();
          }
        }
        // Method to update the sidebar with invoice details for the current thread
        async handleThreadView(threadView) {
          const threadId = await threadView.getThreadIDAsync();
          console.log("[UI] Thread view changed:", threadId);
          this._currentThreadView = threadView;
          if (!this._documentStorageRule && this.apiClient) {
            console.log("[UI] Business rules not initialized yet, initializing now...");
            await this.initializeBusinessRules();
          }
          await this._indexAllThreadMessages(threadView);
          const threadDataMap = await this.dataManager.getThreadData([threadId]);
          const threadInfo = threadDataMap[threadId];
          try {
            const labels = threadInfo && threadInfo.threadLabels ? threadInfo.threadLabels : [];
            await this.applyLabelsToThreadView(threadView, labels);
            try {
              await this.dataManager.addThreadLabels(threadId, labels);
            } catch {
            }
          } catch (e) {
            console.warn("[ThreadViewLabels] Failed to apply labels to open thread:", e);
          }
          const cardDataArray = threadInfo && threadInfo.processedEntities ? transformProcessedEntitiesForSidebar(threadInfo.processedEntities) : [];
          if (this.sidebarElement) {
            this.sidebarElement.innerHTML = this.createSidebarContent(threadId, cardDataArray);
            this.attachCardClickListeners(this.sidebarElement);
            if (cardDataArray && cardDataArray.length > 0) {
              console.log("[UI] Auto-opening sidebar for thread with documents:", threadId);
              setTimeout(() => {
                this.openSidebar();
              }, 500);
            } else {
              console.log("[UI] No documents found for thread, keeping sidebar closed:", threadId);
            }
          } else {
            console.log("[DEBUG] this.sidebarElement is not available");
          }
        }
        // Method to restore the original chat interface in the sidebar
        restoreChatInterface() {
          if (this.sidebarElement) {
            console.log("[DEBUG] Restoring chat interface using this.sidebarElement");
            this.sidebarElement.innerHTML = this.createMainAppContent();
            this.attachChatEventListeners(this.sidebarElement);
          } else {
            console.log("[DEBUG] this.sidebarElement is not available for restore");
          }
        }
        /**
         * Method to handle individual file attachment cards (for existing attachments).
         * Uses filename + messageId matching to determine if attachment has been AI-processed.
         * Only adds "Store in Google Drive" button if matching cached data is found.
         */
        handleFileAttachmentCard(attachmentCard) {
          if (!this._documentStorageRule) {
            return;
          }
          try {
            const attachmentFilename = attachmentCard.getTitle();
            const messageView = attachmentCard.getMessageView();
            const attachmentMessageId = messageView.getMessageID();
            console.log("[ATTACHMENT] Processing existing attachment card:", {
              filename: attachmentFilename,
              messageId: attachmentMessageId
            });
            const cachedCardData = this._currentCardData || [];
            console.log("[ATTACHMENT] Checking if attachment matches cached documents");
            console.log("[ATTACHMENT] Available cached documents:", cachedCardData.length);
            const matchingCachedData = this.findMatchingCachedDocument(cachedCardData, {
              filename: attachmentFilename,
              messageId: attachmentMessageId
            });
            if (matchingCachedData) {
              console.log("[ATTACHMENT] \u2705 Found matching cached data, adding Store in Drive button:", {
                title: matchingCachedData.title,
                messageId: matchingCachedData.messageId,
                filename: matchingCachedData.filename
              });
              attachmentCard.addButton({
                iconUrl: chrome.runtime.getURL("stamp-logo.png"),
                tooltip: "Store in Google Drive",
                onClick: (event) => {
                  console.log("[ATTACHMENT] Store button clicked for existing attachment:", attachmentFilename);
                  console.log("[ATTACHMENT] Using cached data:", {
                    title: matchingCachedData.title,
                    messageId: matchingCachedData.messageId,
                    vendor: matchingCachedData.vendor,
                    amount: matchingCachedData.amount
                  });
                  this.handleDocumentStorageWithConfirmation(matchingCachedData);
                }
              });
            } else {
              console.log("[ATTACHMENT] \u274C No matching cached data found for attachment:", attachmentFilename);
              console.log("[ATTACHMENT] Available cached data:", cachedCardData.map((doc) => ({ filename: doc.filename || "N/A", messageId: doc.messageId || "N/A", title: doc.title })));
              console.log("[ATTACHMENT] Skipping Store in Drive button for this attachment");
            }
          } catch (error) {
            console.error("[ATTACHMENT] Error processing file attachment card:", error);
          }
        }
        // Method to handle existing attachment cards in message views
        async handleExistingAttachmentCards(messageView) {
          if (!this._documentStorageRule && this.apiClient) {
            console.log("[ATTACHMENT] Business rules not initialized, initializing now...");
            await this.initializeBusinessRules();
          }
          if (!this._documentStorageRule) {
            return;
          }
          try {
            const messageId = messageView.getMessageID();
            console.log("[ATTACHMENT] Processing existing attachments for message:", messageId);
            const threadView = messageView.getThreadView();
            const threadId = await threadView.getThreadIDAsync();
            const threadDataMap = await this.dataManager.getThreadData([threadId]);
            const threadInfo = threadDataMap[threadId];
            if (!threadInfo || !threadInfo.processedEntities) {
              console.log("[ATTACHMENT] No processed entities for thread:", threadId);
              return;
            }
            const cardDataArray = transformProcessedEntitiesForSidebar(threadInfo.processedEntities);
            const messageCards = cardDataArray.filter(
              (card) => card.docMessageId === messageId
            );
            if (messageCards.length === 0) {
              console.log("[ATTACHMENT] No tracked documents found for message:", messageId);
              return;
            }
            const existingAttachments = messageView.getFileAttachmentCardViews();
            console.log("[ATTACHMENT] Found", existingAttachments.length, "existing attachment cards");
            existingAttachments.forEach((attachmentCard, index) => {
              const attachmentTitle = attachmentCard.getTitle();
              console.log(`[ATTACHMENT] Existing attachment ${index + 1}:`, attachmentTitle);
              const matchingCard = messageCards.find(
                (card) => attachmentTitle.includes(card.title) || card.title.includes(attachmentTitle) || attachmentTitle.toLowerCase().includes("invoice") || attachmentTitle.toLowerCase().includes("receipt")
              );
              if (matchingCard) {
                console.log("[ATTACHMENT] Adding enhanced Store button for tracked document:", matchingCard.title);
                attachmentCard.addButton({
                  iconUrl: chrome.runtime.getURL("stamp-logo.png"),
                  tooltip: `Store ${matchingCard.title} in Google Drive`,
                  onClick: (event) => {
                    console.log("[ATTACHMENT] Enhanced store button clicked for:", matchingCard.title);
                    this.handleDocumentStorageWithConfirmation(matchingCard);
                  }
                });
              }
            });
          } catch (error) {
            console.error("[ATTACHMENT] Error processing existing attachment cards:", error);
          }
        }
        // Method to handle document storage with confirmation modal
        async handleDocumentStorageWithConfirmation(cardData) {
          try {
            const isAlreadyStored = false;
            if (isAlreadyStored) {
              this.showAlreadyStoredModal(cardData);
              return;
            }
            const modal = this.sdk.Widgets.showModalView({
              title: `Store Document in Google Drive`,
              el: this.createConfirmationModalContent(cardData),
              buttons: [
                {
                  text: "Store in Drive",
                  type: "PRIMARY_ACTION",
                  onClick: async (event) => {
                    event.modalView.close();
                    await this.handleDocumentStorage(cardData);
                    this.showSuccessModal(cardData);
                  }
                },
                {
                  text: "Cancel",
                  onClick: (event) => {
                    event.modalView.close();
                  }
                }
              ]
            });
          } catch (error) {
            console.error("[ATTACHMENT] Error in document storage confirmation:", error);
          }
        }
        // Create confirmation modal content
        createConfirmationModalContent(cardData) {
          const el = document.createElement("div");
          el.style.padding = "20px";
          el.style.minWidth = "600px";
          el.style.maxWidth = "800px";
          const naturalLanguageDescription = this._documentStorageRule?.natural_language_description || "Store this document in Google Drive?";
          const cachedCardData = this._currentCardData || [];
          const matchingCachedData = this.findMatchingCachedDocument(cachedCardData, cardData);
          const payload = {
            ruleId: this._documentStorageRule?.id,
            cardData: matchingCachedData || cardData,
            timestamp: (/* @__PURE__ */ new Date()).toISOString()
          };
          const naturalLanguageInput = {
            message_id: payload.cardData.messageId,
            ...payload.cardData.fullDetails
          };
          const actualApiPayload = {
            rule_id: String(payload.ruleId),
            natural_language_input: JSON.stringify(naturalLanguageInput)
          };
          el.innerHTML = `
      <div style="text-align: center; margin-bottom: 20px;">
        <div style="font-size: 48px; margin-bottom: 16px;">${cardData.icon || "\u{1F4C4}"}</div>
        <div style="color: #1f2937; font-size: 16px; line-height: 1.5; margin-bottom: 20px;">${naturalLanguageDescription}</div>
      </div>
      
    `;
          return el;
        }
        // Show success modal after storage
        showSuccessModal(cardData) {
          const modal = this.sdk.Widgets.showModalView({
            title: "Document Stored Successfully",
            el: this.createSuccessModalContent(cardData),
            buttons: [
              {
                text: "Close",
                type: "PRIMARY_ACTION",
                onClick: (event) => {
                  event.modalView.close();
                }
              }
            ]
          });
        }
        // Create success modal content
        createSuccessModalContent(cardData) {
          const el = document.createElement("div");
          el.style.padding = "20px";
          el.style.textAlign = "center";
          el.innerHTML = `
      <div style="color: #10b981; font-size: 48px; margin-bottom: 16px;">\u2705</div>
      <h3 style="margin: 0 0 8px 0; color: #1f2937;">Success!</h3>
      <p style="margin: 0; color: #6b7280;">${cardData.title} has been stored in Google Drive.</p>
    `;
          return el;
        }
        // Show already stored modal
        showAlreadyStoredModal(cardData) {
          const modal = this.sdk.Widgets.showModalView({
            title: "Document Already Stored",
            el: this.createAlreadyStoredContent(cardData),
            buttons: [
              {
                text: "View in Drive",
                type: "PRIMARY_ACTION",
                onClick: (event) => {
                  window.open("https://drive.google.com", "_blank");
                  event.modalView.close();
                }
              },
              {
                text: "Store Again",
                onClick: async (event) => {
                  event.modalView.close();
                  await this.handleDocumentStorage(cardData);
                  this.showSuccessModal(cardData);
                }
              },
              {
                text: "Close",
                onClick: (event) => {
                  event.modalView.close();
                }
              }
            ]
          });
        }
        // Create already stored modal content
        createAlreadyStoredContent(cardData) {
          const el = document.createElement("div");
          el.style.padding = "20px";
          el.style.textAlign = "center";
          el.innerHTML = `
      <div style="color: #f59e0b; font-size: 48px; margin-bottom: 16px;">\u26A0\uFE0F</div>
      <h3 style="margin: 0 0 8px 0; color: #1f2937;">Already Stored</h3>
      <p style="margin: 0; color: #6b7280;">${cardData.title} is already stored in Google Drive.</p>
    `;
          return el;
        }
        // Updated method to create sidebar content dynamically
        createSidebarContent(threadId, cardDataArray) {
          this._currentCardData = cardDataArray;
          if (cardDataArray && cardDataArray.length > 0) {
            const cardsHtml = cardDataArray.map((cardData) => {
              const cardHtml = createEntityCard(cardData, threadId);
              const cardWithThreadId = cardHtml.replace('class="entity-card"', `class="entity-card" data-thread-id="${threadId}"`);
              let capsulesRow = "";
              if (cardData.cardType === "inv") {
                console.log("[SIDEBAR] Building capsules for invoice:", cardData.title);
                console.log("[SIDEBAR] Card data:", {
                  statusMessageId: cardData.statusMessageId,
                  statusThreadId: cardData.statusThreadId,
                  docMessageId: cardData.docMessageId,
                  docThreadId: cardData.docThreadId,
                  currentThreadId: threadId
                });
                let statusState = "missing";
                let statusLink = null;
                if (cardData.statusMessageId && cardData.statusThreadId) {
                  if (cardData.statusThreadId === threadId) {
                    statusState = "same-thread";
                    console.log('[SIDEBAR] Status is in same thread - will show "Show" button');
                  } else {
                    statusState = "link";
                    statusLink = `https://mail.google.com/mail/u/0/#inbox/${cardData.statusThreadId}/${cardData.statusMessageId}`;
                    console.log("[SIDEBAR] Status is in different thread - will show link:", statusLink);
                  }
                } else {
                  console.log("[SIDEBAR] No status source data available");
                }
                let docState = "missing";
                let docLink = null;
                if (cardData.docMessageId && cardData.docThreadId) {
                  if (cardData.docThreadId === threadId) {
                    docState = "same-thread";
                    console.log("[SIDEBAR] Document is in same thread - will show button");
                    console.log("[SIDEBAR] Document messageId for same-thread:", cardData.docMessageId);
                  } else {
                    docState = "link";
                    const accountPath = getCurrentGmailAccount();
                    docLink = `https://mail.google.com/mail${accountPath}/#inbox/${cardData.docThreadId}/${cardData.docMessageId}`;
                    console.log("[SIDEBAR] Document is in different thread - will show link:", docLink);
                  }
                } else {
                  console.log("[SIDEBAR] No document source data available - docMessageId:", cardData.docMessageId, "docThreadId:", cardData.docThreadId);
                }
                const statusCapsule = this._renderSourceCapsule({ kind: "status", state: statusState, link: statusLink });
                const docCapsule = this._renderSourceCapsule({ kind: "document", state: docState, link: docLink });
                const statusDataAttr = statusState === "same-thread" ? `data-status-mid="${cardData.statusMessageId}"` : "";
                const docDataAttr = docState === "same-thread" ? `data-doc-mid="${cardData.docMessageId}"` : "";
                console.log("[SIDEBAR] Building data attributes:", {
                  statusDataAttr,
                  docDataAttr,
                  statusState,
                  docState,
                  statusMessageId: cardData.statusMessageId,
                  docMessageId: cardData.docMessageId
                });
                capsulesRow = `
            <div class="stamp-sources" style="margin-top: 10px; display:flex; gap:8px; flex-wrap:wrap;" ${statusDataAttr} ${docDataAttr}>
              ${statusCapsule}
              ${docCapsule}
            </div>`;
                console.log("[SIDEBAR] Capsules row built with data attributes:", {
                  statusMid: statusState === "same-thread" ? cardData.statusMessageId : null,
                  docMid: docState === "same-thread" ? cardData.docMessageId : null,
                  statusState,
                  docState
                });
                console.log("[SIDEBAR] HTML data attributes will be:", {
                  "data-status-mid": statusState === "same-thread" ? cardData.statusMessageId : "not-set",
                  "data-doc-mid": docState === "same-thread" ? cardData.docMessageId : "not-set"
                });
              }
              return `
          <div class="card-container" style="margin-bottom: 16px;">
            ${cardWithThreadId}
            ${capsulesRow}
          </div>`;
            }).join("");
            const containerHtml = `
        <div style="padding: 12px; border-bottom: 1px solid #e0e0e0; background: #fafafa;">
          <h3 style="margin: 0; font-size: 16px;">Documents in this thread</h3>
        </div>
        <div id="stamp-cards-container" style="padding: 16px;">
          ${cardsHtml}
        </div>
      `;
            return containerHtml;
          } else {
            return `
        <div style="padding: 16px;">
          <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 6px;">
            <div style="font-size: 48px; margin-bottom: 16px;">\u{1F9FE}</div>
            <h4 style="margin: 0 0 8px 0; color: #333;">No Documents Found</h4>
            <p style="margin: 0; color: #666; font-size: 14px;">This email thread doesn't contain any recognized documents.</p>
          </div>
        </div>
      `;
          }
        }
        // Method to attach card click event listeners
        attachCardClickListeners(container) {
          console.log("[CARD_CLICKS] Attaching click listeners to container");
          container.removeEventListener("click", this._cardClickHandler);
          this._cardClickHandler = (event) => {
            console.log("[CARD_CLICKS] Click event detected on:", event.target);
            const card = event.target.closest(".entity-card");
            if (card && card.dataset.fullDetails) {
              console.log("[CARD_CLICKS] Card clicked, parsing details...");
              try {
                const fullDetails = JSON.parse(card.dataset.fullDetails);
                console.log("[CARD_CLICKS] Parsed details:", fullDetails);
                const detailsHtml = createDetailsSidebarContent(fullDetails);
                const threadId = card.dataset.threadId;
                const cardDataArray = this._currentCardData;
                container.innerHTML = detailsHtml;
                console.log("[CARD_CLICKS] Updated container with details HTML");
                const backButton = container.querySelector("#back-to-cards");
                console.log("[CARD_CLICKS] Back button found:", !!backButton);
                if (backButton) {
                  console.log("[CARD_CLICKS] Adding click listener to back button");
                  backButton.addEventListener("click", (e) => {
                    console.log("[CARD_CLICKS] Back button clicked");
                    e.stopPropagation();
                    container.innerHTML = this.createSidebarContent(threadId, cardDataArray);
                    console.log("[CARD_CLICKS] Restored cards view");
                    this.attachCardClickListeners(container);
                  });
                } else {
                  console.error("[CARD_CLICKS] Back button not found in container");
                }
              } catch (e) {
                console.error("Error parsing card details or showing details:", e);
              }
            } else {
              console.log("[CARD_CLICKS] Click was not on a card or card has no details");
            }
          };
          container.addEventListener("click", this._cardClickHandler);
        }
        // Method to attach chat event listeners
        attachChatEventListeners(sidebarElement) {
          const self2 = this;
          sidebarElement.querySelector("#sign-out-btn").addEventListener("click", async () => {
            console.log("[UI] Sign-out button clicked");
            await self2.authService.signOut();
            self2.sidebarPanel.remove();
            self2.renderLoginView();
          });
          sidebarElement.querySelector("#hard-reset-btn").addEventListener("click", async () => {
            console.log("[UI] Dev: Hard-reset button clicked");
            if (confirm("This will completely revoke Google OAuth permissions. You will need to re-authorize the extension. Continue?")) {
              try {
                await self2.authService.hardReset();
                self2.sidebarPanel.remove();
                self2.renderLoginView();
              } catch (error) {
                alert("Hard reset failed: " + error.message);
              }
            }
          });
          const settingsBtn = sidebarElement.querySelector("#settings-btn");
          const settingsMenu = sidebarElement.querySelector("#settings-menu");
          const closeSettingsBtn = sidebarElement.querySelector("#close-settings-btn");
          settingsBtn.addEventListener("click", () => {
            settingsMenu.style.display = "flex";
            settingsMenu.style.opacity = "0";
            setTimeout(() => {
              settingsMenu.style.opacity = "1";
            }, 10);
          });
          const closeSettings = () => {
            settingsMenu.style.opacity = "0";
            setTimeout(() => {
              settingsMenu.style.display = "none";
            }, 2e3);
          };
          closeSettingsBtn.addEventListener("click", closeSettings);
          settingsMenu.addEventListener("click", (e) => {
            if (e.target === settingsMenu) {
              closeSettings();
            }
          });
          document.addEventListener("keydown", (e) => {
            if (e.key === "Escape" && settingsMenu.style.display === "flex") {
              closeSettings();
            }
          });
          const questionInput = sidebarElement.querySelector("#question-input");
          const sendButton = sidebarElement.querySelector("#send-question-btn");
          const chatOutput = sidebarElement.querySelector("#chat-output");
          const sendQuestion = async () => {
            const question = questionInput.value.trim();
            if (!question) return;
            const userDiv = document.createElement("div");
            userDiv.style.cssText = `
        display: flex;
        align-items: flex-start;
        gap: 12px;
        margin-bottom: 16px;
        justify-content: flex-end;
      `;
            userDiv.innerHTML = `
        <div style="
          background: linear-gradient(135deg, #10b981 0%, #059669 100%);
          border-radius: 12px;
          padding: 16px 20px;
          max-width: 85%;
          color: white;
          box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
        ">
          <p style="
            margin: 0;
            font-size: 15px;
            line-height: 1.6;
            font-weight: 500;
          ">${question}</p>
        </div>
        <div style="
          width: 32px;
          height: 32px;
          background: #f1f5f9;
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 14px;
          font-weight: 600;
          color: #64748b;
        ">\u{1F464}</div>
      `;
            chatOutput.appendChild(userDiv);
            questionInput.value = "";
            questionInput.style.height = "auto";
            const assistantDiv = document.createElement("div");
            assistantDiv.style.cssText = `
        display: flex;
        align-items: flex-start;
        gap: 12px;
        margin-bottom: 16px;
      `;
            assistantDiv.innerHTML = `
        <div style="
          width: 32px;
          height: 32px;
          background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 14px;
          font-weight: 600;
          color: white;
        ">\u{1F916}</div>
        <div style="
          background: white;
          border-radius: 12px;
          padding: 16px 20px;
          max-width: 85%;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          flex: 1;
        ">
          <div id="progress-indicator" style="display: none;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
              <div style="width: 16px; height: 16px; border: 2px solid #e5e7eb; border-top: 2px solid #3b82f6; border-radius: 50%; animation: spin 1s linear infinite;"></div>
              <span style="font-size: 14px; color: #6b7280;">Processing...</span>
            </div>
          </div>
          <div id="reasoning-section" style="display: none; margin-bottom: 12px;">
            <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 12px; border-radius: 6px;">
              <div style="font-weight: 600; color: #92400e; margin-bottom: 4px;">\u{1F914} Reasoning</div>
              <div id="reasoning-content" style="color: #92400e; font-size: 14px; line-height: 1.5;"></div>
            </div>
          </div>
          <div id="main-content" style="color: #374151; line-height: 1.6; font-size: 15px;"></div>
          <div id="tool-calls-section" style="display: none; margin-top: 12px;">
            <div style="background: #f3f4f6; border-left: 4px solid #6b7280; padding: 12px; border-radius: 6px;">
              <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">\u{1F527} Tool Calls</div>
              <div id="tool-calls-content" style="color: #6b7280; font-size: 14px; line-height: 1.5;"></div>
            </div>
          </div>
        </div>
      `;
            chatOutput.appendChild(assistantDiv);
            chatOutput.scrollTop = chatOutput.scrollHeight;
            try {
              self2.showLoading(assistantDiv);
              const response = await self2.apiClient.makeAuthenticatedRequest("/api/finops/stream", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify({
                  question,
                  userEmail: await self2.authService.getUserEmail(),
                  installationId: await self2.authService.getInstallationId()
                })
              });
              console.log("[CHAT] Raw response object:", response);
              console.log("[CHAT] Response headers:", {
                contentType: response.headers.get("content-type"),
                status: response.status,
                statusText: response.statusText
              });
              self2.hideLoading(assistantDiv);
              const contentType = response.headers.get("content-type");
              if (contentType && contentType.includes("text/event-stream")) {
                console.log("[CHAT] Handling streaming response");
                await self2.handleStreamingResponse(response, assistantDiv);
              } else {
                console.log("[CHAT] Handling JSON response");
                const data = await response.json();
                console.log("[CHAT] Parsed response data:", data);
                console.log("[CHAT] Response data type:", typeof data);
                console.log("[CHAT] Response keys:", Object.keys(data));
                if (data.response) {
                  console.log("[CHAT] Found response content:", data.response);
                  assistantDiv.querySelector("#main-content").textContent = data.response;
                } else if (data.AGENT_OUTPUT) {
                  console.log("[CHAT] Found AGENT_OUTPUT:", data.AGENT_OUTPUT);
                  assistantDiv.querySelector("#main-content").textContent = data.AGENT_OUTPUT;
                } else if (data.answer) {
                  console.log("[CHAT] Found answer:", data.answer);
                  assistantDiv.querySelector("#main-content").textContent = data.answer;
                } else {
                  console.warn("[CHAT] No recognized response format found in:", data);
                  assistantDiv.querySelector("#main-content").textContent = "I received your question but no response was provided.";
                }
              }
            } catch (error) {
              console.error("[UI] Failed to send question:", error);
              self2.hideLoading(assistantDiv);
              self2.showError(assistantDiv, `Failed to send question: ${error.message}`);
            }
          };
          sendButton.addEventListener("click", sendQuestion);
          questionInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter" && !e.shiftKey) {
              e.preventDefault();
              sendQuestion();
            }
          });
          questionInput.addEventListener("input", () => {
            questionInput.style.height = "auto";
            questionInput.style.height = Math.min(questionInput.scrollHeight, 120) + "px";
          });
        }
        async handleStreamingResponse(response, assistantDiv) {
          console.log("[STREAM] Starting to handle streaming response...");
          const reader2 = response.body.getReader();
          const decoder = new TextDecoder();
          const mainContent = assistantDiv.querySelector("#main-content");
          let buffer = "";
          let contentBuffer = "";
          let reasoningBuffer = "";
          mainContent.textContent = "";
          try {
            while (true) {
              const { done, value } = await reader2.read();
              if (done) {
                console.log("[STREAM] Stream finished.");
                break;
              }
              buffer += decoder.decode(value, { stream: true });
              console.log(`[STREAM] Received chunk, buffer is now: "${buffer}"`);
              const lines = buffer.split("\n");
              buffer = lines.pop() || "";
              for (const line of lines) {
                if (line.startsWith("data: ")) {
                  try {
                    const eventData = JSON.parse(line.slice(6));
                    console.log("[STREAM] Parsed event:", eventData);
                    console.log("[STREAM] Event type:", eventData.type);
                    if (eventData.type === "content") {
                      const content = eventData.data.content || "";
                      contentBuffer += content;
                      let contentDiv = mainContent.querySelector("#content-display");
                      if (!contentDiv) {
                        contentDiv = document.createElement("div");
                        contentDiv.id = "content-display";
                        contentDiv.style.marginTop = "10px";
                        mainContent.appendChild(contentDiv);
                      }
                      contentDiv.textContent = contentBuffer;
                    } else if (eventData.type === "reasoning") {
                      const reasoning = eventData.data.content || "";
                      reasoningBuffer += reasoning + "\n";
                      let reasoningDiv = mainContent.querySelector("#reasoning-display");
                      if (!reasoningDiv) {
                        reasoningDiv = document.createElement("div");
                        reasoningDiv.id = "reasoning-display";
                        reasoningDiv.style.color = "#666";
                        reasoningDiv.style.fontStyle = "italic";
                        reasoningDiv.style.marginBottom = "10px";
                        reasoningDiv.style.borderLeft = "3px solid #ddd";
                        reasoningDiv.style.paddingLeft = "10px";
                        mainContent.appendChild(reasoningDiv);
                      }
                      reasoningDiv.textContent = reasoningBuffer;
                    } else if (eventData.type === "workflow_start") {
                      console.log("[STREAM] Workflow started");
                    } else if (eventData.type === "agent_start") {
                      console.log("[STREAM] Agent started:", eventData.data.agent_name);
                    } else if (eventData.type === "synthesis") {
                      console.log("[STREAM] Synthesis step completed");
                    } else if (eventData.type === "workflow_complete") {
                      console.log("[STREAM] Workflow completed successfully");
                    } else if (eventData.type === "tool_call") {
                      console.log("[STREAM] Tool call (hidden from user):", eventData.data.tool_name);
                    } else if (eventData.type === "tool_result") {
                      console.log("[STREAM] Tool result (hidden from user):", eventData.data.tool_name);
                    } else if (eventData.type === "error") {
                      const errorDiv = document.createElement("div");
                      errorDiv.style.color = "#d32f2f";
                      errorDiv.style.fontWeight = "bold";
                      errorDiv.textContent = `\u274C Error: ${eventData.data.error}`;
                      mainContent.appendChild(errorDiv);
                    } else {
                      console.log("[STREAM] Unhandled event type:", eventData.type, eventData);
                    }
                    const chatOutput = assistantDiv.closest("#chat-output");
                    if (chatOutput) {
                      chatOutput.scrollTop = chatOutput.scrollHeight;
                    }
                  } catch (parseError) {
                    console.error("[STREAM] Failed to parse event:", line, parseError);
                  }
                }
              }
            }
          } catch (error) {
            console.error("[STREAM] Error reading stream:", error);
            const errorDiv = document.createElement("div");
            errorDiv.style.color = "#d32f2f";
            errorDiv.style.fontWeight = "bold";
            errorDiv.textContent = `\u274C Error reading stream: ${error.message}`;
            mainContent.appendChild(errorDiv);
          }
        }
        createLoginContent() {
          return `
        <div style="padding: 24px; text-align: center; font-family: 'Google Sans', Roboto, Arial, sans-serif;">
          <img src="${chrome.runtime.getURL("stamp-logo.png")}" alt="Stamp Logo" style="width: 64px; height: 64px; margin-bottom: 16px;">
          <h2 style="margin-top: 0; margin-bottom: 8px; font-size: 22px;">Connect to Stamp</h2>
          <p style="margin-top: 0; margin-bottom: 24px; color: #5f6368;">Manage your Accounts Payable directly within Gmail.</p>
          <div id="loading-indicator" style="display: none; padding: 10px; text-align: center; color: #5f6368;">Loading...</div>
          <div id="error-indicator" style="display: none; padding: 10px; text-align: center; color: #d93025; background: #fce8e6; border: 1px solid #f9c6c2; border-radius: 4px; margin-bottom: 16px;"></div>
          <button id="google-signin-btn" style="background-color: #4285F4; color: white; border: none; padding: 10px 24px; font-size: 14px; border-radius: 4px; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; font-weight: 500;">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTkuMDAwMDEgMTcuOTk5OEMxMy45NzQ0IDE3Ljk5OTggMTcuOTk5OSAxMy45NzQ0IDE3Ljk5OTkgOS4wMDAwMUMxNy45OTk5IDQuMDI1NTcgMTMuOTc0NCAwIDkuMDAwMDEgMEM0LjAyNTU3IDAgMCA0LjAyNTU3IDAgOS4wMDAwMUMwIDEzLjk3NDQgNC4wMjU1NyAxNy45OTk4IDkuMDAwMDEgMTcuOTk5OFoiIGZpbGw9IiM0Mjg1RjQiLz4KPHBhdGggZD0iTTkuMDAwMDEgMTcuOTk5OEMxMy45NzQ0IDE3Ljk5OTggMTcuOTk5OSAxMy45NzQ0IDE3Ljk5OTkgOS4wMDAwMUMxNy45OTk5IDQuMDI1NTcgMTMuOTc0NCAwIDkuMDAwMDEgMEM0LjAyNTU3IDAgMCA0LjAyNTU3IDAgOS4wMDAwMUMwIDEzLjk3NDQgNC4yNTU3IDE3Ljk5OTggOS4wMDAwMSAxNy45OTk4WiIgZmlsbD0iIzQyODVGNCIvPgo8L3N2Zz4K" alt="Google Logo" style="width: 18px; height: 18px; margin-right: 12px;">
            Sign in with Google
          </button>
        </div>
      `;
        }
        createMainAppContent() {
          return `
            <div style="
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
                background: #ffffff;
                min-height: 100vh;
                padding: 0;
                margin: 0;
            ">
                <!-- Header -->
                <div style="
                    background: white;
                    border-bottom: 1px solid #f0f0f0;
                    padding: 16px 20px;
                    position: sticky;
                    top: 0;
                    z-index: 10;
                ">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="
                                width: 32px;
                                height: 32px;
                                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                                border-radius: 8px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                color: white;
                                font-weight: 700;
                                font-size: 16px;
                                box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
                            ">S</div>
                            <div>
                                <h1 style="
                                    margin: 0;
                                    font-size: 20px;
                                    font-weight: 700;
                                    color: #1e293b;
                                    letter-spacing: -0.025em;
                                ">Stamp</h1>
                                <p style="
                                    margin: 0;
                                    font-size: 13px;
                                    color: #64748b;
                                    font-weight: 500;
                                ">AI Assistant</p>
                            </div>
                        </div>
                        
                        <!-- Settings Button -->
                        <button id="settings-btn" style="
                            width: 36px;
                            height: 36px;
                            background: #f8fafc;
                            border: 1px solid #e2e8f0;
                            border-radius: 8px;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s ease;
                            color: #64748b;
                        ">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Main Content -->
                        <div style="
                    display: flex;
                    flex-direction: column;
                    height: calc(100vh - 80px);
                    padding: 0;
                ">
                            <!-- Chat Messages -->
                            <div id="chat-output" style="
                        flex: 1;
                                padding: 20px;
                                overflow-y: auto;
                                background: #ffffff;
                            ">
                                <div style="
                                    display: flex;
                                    align-items: flex-start;
                                    gap: 12px;
                            margin-bottom: 20px;
                                ">
                                    <div style="
                                width: 32px;
                                height: 32px;
                                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                                border-radius: 8px;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        color: white;
                                font-size: 14px;
                                font-weight: 700;
                                        flex-shrink: 0;
                                box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
                                    ">S</div>
                                    <div style="
                                        background: #f8fafc;
                                        border-radius: 12px;
                                padding: 16px 20px;
                                        max-width: 85%;
                                        border: 1px solid #e2e8f0;
                                    ">
                                        <p style="
                                            margin: 0;
                                    font-size: 15px;
                                    color: #374151;
                                    line-height: 1.6;
                                ">Hi! I'm your Stamp AI assistant. Ask me anything about your invoices, payments, or accounts payable data. I'm here to help you stay on top of your financial operations.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Input Area -->
                            <div style="
                        padding: 20px;
                        background: #ffffff;
                            ">
                                <div style="
                                    display: flex;
                                    gap: 12px;
                                    align-items: flex-end;
                            max-width: 900px;
                            margin: 0 auto;
                                ">
                                    <div style="flex: 1; position: relative;">
                                <textarea id="question-input" placeholder="Ask me about your invoices, payments, or accounts payable..." style="
                                            width: 100%;
                                    padding: 16px 20px;
                                            border: 1px solid #e2e8f0;
                                    border-radius: 12px;
                                    font-size: 15px;
                                            font-family: inherit;
                                            resize: none;
                                    min-height: 56px;
                                            max-height: 120px;
                                            outline: none;
                                            transition: all 0.2s ease;
                                    background: #ffffff;
                                            color: #1e293b;
                                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                                        "></textarea>
                                    </div>
                                    <button id="send-question-btn" style="
                                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                                        color: white;
                                        border: none;
                                padding: 16px 24px;
                                border-radius: 12px;
                                        cursor: pointer;
                                font-size: 15px;
                                        font-weight: 600;
                                        white-space: nowrap;
                                        transition: all 0.2s ease;
                                min-width: 100px;
                                box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
                                    ">Send</button>
                        </div>
                    </div>
                </div>

                <!-- Settings Menu (Hidden by default) -->
                <div id="settings-menu" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.5);
                    backdrop-filter: blur(4px);
                    z-index: 1000;
                    display: none;
                    align-items: center;
                    justify-content: center;
                ">
                    <div style="
                        background: white;
                        border-radius: 12px;
                        padding: 24px;
                        max-width: 400px;
                        width: 90%;
                        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                        position: relative;
                    ">
                        <!-- Close Button -->
                        <button id="close-settings-btn" style="
                            position: absolute;
                            top: 16px;
                            right: 16px;
                            width: 32px;
                            height: 32px;
                            background: #f1f5f9;
                            border: none;
                            border-radius: 6px;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            color: #64748b;
                            transition: all 0.2s ease;
                        ">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>

                        <h2 style="
                            margin: 0 0 20px 0;
                            font-size: 20px;
                            font-weight: 600;
                            color: #1e293b;
                        ">Settings</h2>

                        <!-- Account Section -->
                        <div style="margin-bottom: 24px;">
                            <h3 style="
                                margin: 0 0 12px 0;
                                font-size: 14px;
                                font-weight: 600;
                                color: #374151;
                                text-transform: uppercase;
                                letter-spacing: 0.05em;
                            ">Account</h3>
                            <button id="sign-out-btn" style="
                                width: 100%;
                                padding: 12px 16px;
                                background: #f8fafc;
                                border: 1px solid #e2e8f0;
                                border-radius: 8px;
                                cursor: pointer;
                                font-size: 14px;
                                color: #64748b;
                                font-weight: 500;
                                transition: all 0.2s ease;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                            ">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                    <polyline points="16,17 21,12 16,7"></polyline>
                                    <line x1="21" y1="12" x2="9" y2="12"></line>
                                </svg>
                                Sign Out
                            </button>
                        </div>

                        <!-- Developer Tools Section -->
                        <div style="
                            background: #fef3c7;
                            border: 1px solid #f59e0b;
                            padding: 16px;
                            border-radius: 8px;
                            margin-bottom: 16px;
                        ">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                <span style="font-size: 16px;">\u{1F6E0}\uFE0F</span>
                                <h3 style="
                                    margin: 0;
                                    font-size: 14px;
                                    font-weight: 600;
                                    color: #92400e;
                                    text-transform: uppercase;
                                    letter-spacing: 0.05em;
                                ">Developer Tools</h3>
                            </div>
                            <button id="hard-reset-btn" style="
                                width: 100%;
                                background: #dc2626;
                                color: white;
                                border: none;
                                padding: 10px 16px;
                                border-radius: 6px;
                                cursor: pointer;
                                font-size: 13px;
                                font-weight: 500;
                                transition: all 0.2s ease;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                            ">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="1,4 1,10 7,10"></polyline>
                                    <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                                </svg>
                                Hard Reset & Sign Out
                            </button>
                            <div style="
                                font-size: 11px;
                                color: #92400e;
                                margin-top: 8px;
                                opacity: 0.8;
                                line-height: 1.4;
                            ">\u26A0\uFE0F This will completely revoke Google OAuth permissions and require re-authorization.</div>
                        </div>

                        <!-- Version Info -->
                        <div style="
                            text-align: center;
                            padding-top: 16px;
                            border-top: 1px solid #e2e8f0;
                            font-size: 11px;
                            color: #9ca3af;
                        ">
                            Stamp Extension v1.0.0
                        </div>
                    </div>
                </div>

                <style>
                    @keyframes pulse {
                        0%, 100% { opacity: 1; }
                        50% { opacity: 0.5; }
                    }
                    
                    #question-input:focus {
                        border-color: #10b981;
                        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
                        outline: none;
                    }
                    
                    #send-question-btn:hover {
                        background: linear-gradient(135deg, #059669 0%, #047857 100%);
                        transform: translateY(-1px);
                        box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);
                    }
                    
                    #send-question-btn:active {
                        transform: translateY(0);
                        box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
                    }
                    
                    #settings-btn:hover {
                        background: #f1f5f9;
                        border-color: #cbd5e1;
                        transform: scale(1.05);
                    }
                    
                    #sign-out-btn:hover {
                        background: #f1f5f9;
                        border-color: #cbd5e1;
                    }
                    
                    #hard-reset-btn:hover {
                        background: #b91c1c;
                    }
                </style>
            </div>
        `;
        }
        renderLoginView() {
          const self2 = this;
          const el = document.createElement("div");
          el.innerHTML = this.createLoginContent();
          const setupPanel = async () => {
            self2.sidebarPanel = await self2.sdk.Global.addSidebarContentPanel({
              title: "Stamp",
              iconUrl: chrome.runtime.getURL("stamp-logo.png"),
              el
            });
            el.querySelector("#google-signin-btn").addEventListener("click", async () => {
              console.log('[UI] "Sign in with Google" button clicked - starting sign-up process');
              self2.showLoading(el);
              self2.hideError(el);
              try {
                await self2.authService.signInWithGoogle();
                if (self2.sidebarPanel) {
                  self2.sidebarPanel.remove();
                }
                self2.renderMainView();
              } catch (error) {
                console.error("[UI] Sign-in failed:", error);
                self2.hideLoading(el);
                self2.showError(el, `Sign-in failed: ${error.message}. Please try again.`);
              }
            });
          };
          setupPanel();
        }
        renderMainView() {
          console.log("[UI DEBUG] 3. Entered renderMainView.");
          const self2 = this;
          const el = this.createAndMount(this.createMainAppContent(), async (el2) => {
            console.log("[UI DEBUG] Initializing business rules...");
            await this.initializeBusinessRules();
            console.log("[UI DEBUG] Creating sidebar panel...");
            this.sidebarPanel = await this.sdk.Global.addSidebarContentPanel({
              title: "Stamp",
              iconUrl: chrome.runtime.getURL("stamp-logo.png"),
              el: el2
            });
            console.log("[UI DEBUG] Sidebar panel created:", this.sidebarPanel);
            this.sidebarElement = el2;
            console.log("[UI DEBUG] Sidebar element stored:", this.sidebarElement);
            this.attachChatEventListeners(el2);
            console.log("[UI DEBUG] Chat event listeners attached");
            el2.addEventListener("click", (evt) => {
              console.log("[CLICK] Click detected on sidebar element");
              const row = evt.target && evt.target.closest && evt.target.closest(".stamp-sources");
              if (!row) {
                console.log("[CLICK] Click not on a stamp-sources row, ignoring");
                return;
              }
              console.log("[CLICK] Click is on a stamp-sources row");
              const target = evt.target;
              const capsule = target.closest(".stamp-capsule");
              const isButton = capsule && capsule.tagName.toLowerCase() === "button";
              if (!isButton) {
                console.log("[CLICK] Click not on a button capsule, ignoring");
                return;
              }
              console.log("[CLICK] Click is on a button capsule");
              evt.preventDefault();
              evt.stopPropagation();
              const statusMid = row.getAttribute("data-status-mid");
              const docMid = row.getAttribute("data-doc-mid");
              console.log("[CLICK] Row data attributes:", { statusMid, docMid });
              const capsuleText = capsule ? capsule.textContent : "";
              const isStatus = capsuleText.includes("Status");
              const isDocument = capsuleText.includes("Document");
              const mid = isStatus ? statusMid : docMid;
              console.log("[CLICK] Capsule text:", capsuleText);
              console.log("[CLICK] isStatus:", isStatus, "isDocument:", isDocument);
              console.log("[CLICK] Determined click type:", isStatus ? "status" : "document", "messageId:", mid);
              console.log("[CLICK] Available messageIds - statusMid:", statusMid, "docMid:", docMid);
              if (mid) {
                console.log("[CLICK] Calling _showMessageInThisThread with messageId:", mid);
                this._showMessageInThisThread(mid);
              } else {
                console.warn("[CLICK] No messageId found for clicked capsule");
              }
            });
          });
        }
        showLoading(container) {
          const loadingIndicator = container.querySelector("#loading-indicator");
          if (loadingIndicator) {
            loadingIndicator.style.display = "block";
          }
        }
        hideLoading(container) {
          const loadingIndicator = container.querySelector("#loading-indicator");
          if (loadingIndicator) {
            loadingIndicator.style.display = "none";
          }
        }
        showError(container, message) {
          const errorIndicator = container.querySelector("#error-indicator");
          if (errorIndicator) {
            errorIndicator.textContent = message;
            errorIndicator.style.display = "block";
          }
        }
        hideError(container) {
          const errorIndicator = container.querySelector("#error-indicator");
          if (errorIndicator) {
            errorIndicator.style.display = "none";
          }
        }
        createAndMount(innerHTML, onMount) {
          const el = document.createElement("div");
          el.innerHTML = innerHTML;
          onMount(el);
          return el;
        }
        // Method to open the sidebar panel
        openSidebar() {
          if (this.sidebarPanel) {
            console.log("[UI] Programmatically opening sidebar panel.");
            try {
              this.sidebarPanel.open();
              console.log("[UI] Sidebar panel opened successfully.");
            } catch (error) {
              console.error("[UI] Error opening sidebar panel:", error);
            }
          } else {
            console.warn("[UI] Sidebar panel reference not available. Cannot open.");
            console.log("[UI] Sidebar panel state:", {
              hasSidebarPanel: !!this.sidebarPanel,
              hasSidebarElement: !!this.sidebarElement,
              sidebarPanelType: this.sidebarPanel ? typeof this.sidebarPanel : "undefined"
            });
          }
        }
        // Sets up the MutationObserver to watch for URL changes
        setupURLObserver() {
          const titleObserver = new MutationObserver(() => this.handleStampURLActions());
          const titleElement = document.querySelector("title");
          if (titleElement) {
            titleObserver.observe(titleElement, { childList: true });
          }
        }
        // Handles Stamp-specific actions from URL parameters
        handleStampURLActions() {
          const url = new URL(window.location.href);
          const stampAction = url.searchParams.get("stamp_action");
          if (stampAction === "open_sidebar") {
            console.log('[STAMP ACTION] Detected "open_sidebar" action.');
            setTimeout(() => {
              this.openSidebar();
            }, 1e3);
            url.searchParams.delete("stamp_action");
            window.history.replaceState({}, document.title, url.href);
          }
        }
        // Adds labels into the open thread header using InboxSDK ThreadView.addLabel
        async applyLabelsToThreadView(threadView, threadLabels) {
          try {
            if (!Array.isArray(threadLabels) || threadLabels.length === 0) {
              return;
            }
            if (!this._threadViewLabelHandles) {
              this._threadViewLabelHandles = /* @__PURE__ */ new Map();
            }
            const threadId = await threadView.getThreadIDAsync();
            const previousHandles = this._threadViewLabelHandles.get(threadId) || [];
            for (const handle of previousHandles) {
              try {
                handle.remove();
              } catch (e) {
              }
            }
            const applyOnce = () => {
              const newHandles = [];
              for (const labelText of threadLabels) {
                const labelDescriptor = createLabelFromThreadLabel(labelText);
                if (!labelDescriptor) continue;
                try {
                  const handle = threadView.addLabel(labelDescriptor);
                  newHandles.push(handle);
                } catch (err) {
                  console.warn("[ThreadViewLabels] addLabel failed for", labelText, err);
                  throw err;
                }
              }
              this._threadViewLabelHandles.set(threadId, newHandles);
              console.log("[ThreadViewLabels] Added", newHandles.length, "labels to open thread header");
            };
            const hasHeaderContainer = () => !!document.querySelector(".ha .J-J5-Ji");
            const delays = [0, 120, 240, 400, 600, 900, 1200, 1600];
            let attempt = 0;
            const tryApplyWithRetry = () => {
              if (threadView.destroyed) {
                console.warn("[ThreadViewLabels] Aborting label apply: threadView destroyed");
                return;
              }
              const delay = delays[Math.min(attempt, delays.length - 1)];
              setTimeout(() => {
                const containerPresent = hasHeaderContainer();
                console.log("[ThreadViewLabels] Attempt", attempt + 1, "containerPresent:", containerPresent);
                try {
                  if (!containerPresent) throw new Error("Header label container not ready");
                  applyOnce();
                  const container = document.querySelector(".ha .J-J5-Ji");
                  const hasAnyPill = !!(container && container.querySelector(".inboxsdk__thread_label, .inboxsdk__label, .stamp-fallback-pill"));
                  if (!hasAnyPill && container) {
                    const fallback = document.createElement("span");
                    fallback.className = "stamp-fallback-pill";
                    fallback.textContent = Array.isArray(threadLabels) && threadLabels[0] ? threadLabels[0] : "Stamp";
                    fallback.style.cssText = "display:inline-block;padding:2px 8px;background:#E0F2F1;color:#00695C;border-radius:12px;margin-left:6px;font-size:11px;font-weight:600;";
                    container.appendChild(fallback);
                    if (!this._threadViewFallbackPills) this._threadViewFallbackPills = /* @__PURE__ */ new Map();
                    const arr = this._threadViewFallbackPills.get(threadId) || [];
                    arr.push(fallback);
                    this._threadViewFallbackPills.set(threadId, arr);
                    console.log("[ThreadViewLabels] Fallback-injected a visible label pill");
                  }
                } catch (e) {
                  attempt++;
                  if (attempt < delays.length) {
                    tryApplyWithRetry();
                  } else {
                    console.warn("[ThreadViewLabels] Giving up after retries:", e);
                  }
                }
              }, delay);
            };
            tryApplyWithRetry();
            threadView.on("destroy", () => {
              const handles = this._threadViewLabelHandles.get(threadId) || [];
              for (const handle of handles) {
                try {
                  handle.remove();
                } catch (e) {
                }
              }
              this._threadViewLabelHandles.delete(threadId);
              const fallbacks = this._threadViewFallbackPills && this._threadViewFallbackPills.get(threadId) || [];
              for (const node of fallbacks) {
                try {
                  node.remove();
                } catch (e) {
                }
              }
              if (this._threadViewFallbackPills) this._threadViewFallbackPills.delete(threadId);
            });
          } catch (error) {
            console.warn("[ThreadViewLabels] Failed to apply labels to thread view:", error);
          }
        }
        // Scroll to a message in the current thread and highlight briefly
        async _showMessageInThisThread(messageId) {
          console.log("[INTHREAD] Attempting to show message in current thread:", messageId);
          console.log("[INTHREAD] Current message index size:", this._messageIndex.size);
          console.log("[INTHREAD] Available message IDs in index:", Array.from(this._messageIndex.keys()));
          let messageView = this._messageIndex.get(messageId);
          if (messageView && messageView.getElement) {
            const el = messageView.getElement();
            if (el) {
              console.log("[INTHREAD] Found message via index, scrolling into view");
              el.scrollIntoView({ behavior: "smooth", block: "center" });
              el.style.transition = "background-color 0.6s ease";
              const prev = el.style.backgroundColor;
              el.style.backgroundColor = "rgba(255, 235, 59, 0.35)";
              console.log("[INTHREAD] Applied highlight, will remove in 1200ms");
              setTimeout(() => {
                el.style.backgroundColor = prev || "";
                console.log("[INTHREAD] Highlight removed");
              }, 1200);
              return;
            }
          }
          console.log("[INTHREAD] Message not found immediately, waiting for messages to load...");
          const delays = [200, 500, 1e3];
          for (const delay of delays) {
            await new Promise((resolve) => setTimeout(resolve, delay));
            console.log("[INTHREAD] Retrying after", delay, "ms. Index size:", this._messageIndex.size);
            console.log("[INTHREAD] Available IDs:", Array.from(this._messageIndex.keys()));
            messageView = this._messageIndex.get(messageId);
            if (messageView && messageView.getElement) {
              const el = messageView.getElement();
              if (el) {
                console.log("[INTHREAD] Found message after retry, scrolling into view");
                el.scrollIntoView({ behavior: "smooth", block: "center" });
                el.style.transition = "background-color 0.6s ease";
                const prev = el.style.backgroundColor;
                el.style.backgroundColor = "rgba(255, 235, 59, 0.35)";
                setTimeout(() => {
                  el.style.backgroundColor = prev || "";
                }, 1200);
                return;
              }
            }
          }
          console.warn("[INTHREAD] Message still not found after retries:", messageId);
          console.log("[INTHREAD] Final index state - size:", this._messageIndex.size, "IDs:", Array.from(this._messageIndex.keys()));
        }
        _renderSourceCapsule({ kind, state, link, onClickTitle }) {
          const icon = kind === "status" ? "\u{1F4E7}" : "\u{1F4CE}";
          const label = kind === "status" ? "Status" : "Document";
          console.log("[CAPSULE] Rendering", kind, "capsule with state:", state, "link:", link);
          if (state === "same-thread") {
            return `
      <button class="stamp-capsule" title="Show in this thread" style="display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid #e6e7ea;border-radius:999px;background:#fff;color:#334155;cursor:pointer;">
        <span>${icon}</span>
        <span style="font-size:12px;font-weight:600;">${label}</span>
      </button>`;
          } else if (state === "link") {
            return `
      <a class="stamp-capsule" href="${link}" target="_blank" onclick="event.stopPropagation();" title="Open in Gmail" style="display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid #e6e7ea;border-radius:999px;background:#fff;color:#1a73e8;text-decoration:none;">
        <span>${icon}</span>
        <span style="font-size:12px;font-weight:600;">${label}</span>
        <span style="margin-left:6px;font-size:12px;">\u2192</span>
      </a>`;
          } else {
            return `
      <div class="stamp-capsule" title="Not found" style="display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px dashed #e6e7ea;border-radius:999px;background:#fafafa;color:#9aa0a6;cursor:not-allowed;">
        <span>${icon}</span>
        <span style="font-size:12px;font-weight:600;">${label}</span>
      </div>`;
          }
        }
      };
      InboxSDK.load(2, "sdk_stamp-extension_0b8df882e1").then((sdk) => {
        console.log("Stamp Extension: InboxSDK loaded successfully.");
        const apiClient = new ApiClient();
        const dataManager = new ThreadDataManager(apiClient);
        const threadViewRegistry = /* @__PURE__ */ new Map();
        let debounceTimer = null;
        const processThreadQueue = async () => {
          if (threadViewRegistry.size === 0) {
            return;
          }
          const idsToProcess = [...threadViewRegistry.keys()];
          const viewsToUpdate = new Map(threadViewRegistry);
          threadViewRegistry.clear();
          console.log(`[Batching] Processing batch of ${idsToProcess.length} threads.`, { threadIds: idsToProcess });
          try {
            const threadDataMap = await dataManager.getThreadData(idsToProcess);
            console.log("[Batching] Received data from ThreadDataManager:", threadDataMap);
            for (const threadId in threadDataMap) {
              const threadInfo = threadDataMap[threadId];
              const threadRowView = viewsToUpdate.get(threadId);
              console.log(`[LABEL_APPLY] Preparing to apply labels for thread: ${threadId}`, { hasView: !!threadRowView, isDestroyed: threadRowView ? threadRowView.destroyed : "N/A", threadInfo });
              if (threadRowView && !threadRowView.destroyed && threadInfo) {
                if (threadInfo.threadLabels && Array.isArray(threadInfo.threadLabels) && threadInfo.threadLabels.length > 0) {
                  console.log(`[LABEL_APPLY] Found ${threadInfo.threadLabels.length} labels to apply.`, { labels: threadInfo.threadLabels });
                  threadInfo.threadLabels.forEach((labelText) => {
                    const label = createLabelFromThreadLabel(labelText);
                    if (label) {
                      console.log(`[LABEL_APPLY] ADDING label to view for thread ${threadId}:`, label);
                      threadRowView.addLabel(label);
                    } else {
                      console.warn(`[LABEL_APPLY] SKIPPED adding a null or invalid label for text: "${labelText}"`);
                    }
                  });
                  try {
                    await dataManager.addThreadLabels(threadId, threadInfo.threadLabels);
                  } catch (e) {
                    console.warn("[LABEL_APPLY] Failed to persist labels to cache", e);
                  }
                } else {
                  console.log(`[LABEL_APPLY] No labels to apply for thread ${threadId}.`, { threadLabels: threadInfo.threadLabels });
                }
              } else {
                console.warn(`[LABEL_APPLY] Skipped applying labels for thread ${threadId} due to invalid view or missing info.`);
              }
            }
          } catch (error) {
            console.error("[Batching] Failed to process thread queue:", error);
          }
        };
        const debouncedProcessThreadQueue = debounce(processThreadQueue, 100);
        sdk.Lists.registerThreadRowViewHandler(async function(threadRowView) {
          const threadId = await threadRowView.getThreadIDAsync();
          threadViewRegistry.set(threadId, threadRowView);
          clearTimeout(debounceTimer);
          debounceTimer = setTimeout(debouncedProcessThreadQueue, 150);
        });
        sdk.Router.handleCustomRoute("invoice-tracker-view", async (customRouteView) => {
          console.log('[UI DEBUG] "invoice-tracker-view" route loaded.');
          customRouteView.setFullWidth(true);
          const container = document.createElement("div");
          container.style.cssText = `
      padding: 0 !important;
      height: 100% !important;
      width: 100% !important;
      box-sizing: border-box !important;
      display: flex !important;
      flex-direction: column !important;
      background: #fff !important;
    `;
          customRouteView.getElement().appendChild(container);
          try {
            const authState = await uiManager.authService.getAuthState();
            if (!authState.isLoggedIn) {
              console.log("[UI DEBUG] User not authenticated, showing login view in route");
              container.innerHTML = uiManager.createLoginContent();
              const signInBtn = container.querySelector("#google-signin-btn");
              if (signInBtn) {
                signInBtn.addEventListener("click", async () => {
                  console.log('[UI] "Sign in with Google" button clicked from route');
                  const loadingIndicator = container.querySelector("#loading-indicator");
                  const errorIndicator = container.querySelector("#error-indicator");
                  if (loadingIndicator) loadingIndicator.style.display = "block";
                  if (errorIndicator) errorIndicator.style.display = "none";
                  try {
                    await uiManager.authService.signInWithGoogle();
                    console.log("[UI] Login successful, reloading route");
                    sdk.Router.goto("invoice-tracker-view");
                  } catch (error) {
                    console.error("[UI] Sign-in failed:", error);
                    if (loadingIndicator) loadingIndicator.style.display = "none";
                    if (errorIndicator) {
                      errorIndicator.style.display = "block";
                      errorIndicator.textContent = `Sign-in failed: ${error.message}. Please try again.`;
                    }
                  }
                });
              }
              return;
            }
          } catch (error) {
            console.error("[UI] Failed to check auth state:", error);
            container.innerHTML = uiManager.createLoginContent();
            return;
          }
          console.log("[UI DEBUG] User is authenticated, loading invoice data");
          const loadingController = createLoadingController(container);
          let spreadsheetResult = null;
          let handleCleanup = () => {
          };
          try {
            loadingController.startFetching();
            console.log("[AI LOADING] \u{1F680} Starting invoice fetch...");
            const allInvoices = await dataManager.getAllInvoices();
            loadingController.completeFetching();
            console.log("[AI LOADING] \u2705 Invoice fetch completed");
            loadingController.startDetails();
            loadingController.completeDetails();
            console.log("[AI LOADING] \u2705 Invoice details processed");
            loadingController.startStatus();
            loadingController.completeStatus();
            console.log("[AI LOADING] \u2705 Invoice status processed");
            spreadsheetResult = await buildSpreadsheet(container, allInvoices, {
              apiClient,
              fetchPdf: (params) => apiClient.fetchGmailAttachmentPdf(params),
              // Correctly use apiClient
              sdk
            });
            console.log("[SPREADSHEET] Spreadsheet built and rendered successfully.");
            handleCleanup = () => {
              if (spreadsheetResult?.correctionsBatcher?.hasPendingCorrections()) {
                console.log("[CLEANUP] Sending pending corrections via sendBeacon");
                spreadsheetResult.correctionsBatcher.sendBeaconBatch();
              }
            };
            window.addEventListener("pagehide", handleCleanup);
          } catch (error) {
            console.error("[AI LOADING] \u274C Error during invoice loading:", error);
            loadingController.showError(error);
          }
          customRouteView.on("destroy", () => {
            console.log("[UI DEBUG] Cleaning up invoice tracker view");
            if (spreadsheetResult?.correctionsBatcher?.hasPendingCorrections()) {
              console.log("[CLEANUP] Sending final corrections on route destroy");
              spreadsheetResult.correctionsBatcher.sendBatch();
            }
            window.removeEventListener("pagehide", handleCleanup);
            if (container._resizeObserver) {
              container._resizeObserver.disconnect();
              console.log("[UI DEBUG] Resize observer disconnected");
            }
          });
        });
        sdk.Router.handleAllRoutes((routeView) => {
          console.log("[ROUTE DEBUG] Route changed:", routeView.getRouteID(), routeView.getRouteType());
        });
        const addNavItemWithRetry = (retries = 5, delay = 1e3) => {
          try {
            console.log(`[UI DEBUG] Attempting to add NavItem (attempt ${6 - retries}/5)...`);
            const navMenuContainer = document.querySelector('[role="navigation"]');
            if (!navMenuContainer) {
              throw new Error("Gmail navigation not ready - no navigation role element found");
            }
            const navItem = sdk.NavMenu.addNavItem({
              name: "Invoice Tracker",
              iconUrl: chrome.runtime.getURL("stamp-logo.png"),
              routeID: "invoice-tracker-view"
            });
            console.log("[UI DEBUG] \u2705 NavItem added successfully!", navItem);
            return navItem;
          } catch (error) {
            console.error(`[UI DEBUG] \u274C NavItem creation failed (attempt ${6 - retries}/5):`, error.message);
            if (retries > 0) {
              console.log(`[UI DEBUG] \u{1F504} Retrying in ${delay}ms... (${retries} retries left)`);
              setTimeout(() => addNavItemWithRetry(retries - 1, Math.min(delay * 1.5, 5e3)), delay);
            } else {
              console.error("[UI DEBUG] \u{1F480} All retry attempts exhausted. NavItem will not be visible.");
              console.error("[UI DEBUG] Final error details:", error);
              console.log("[UI DEBUG] Gmail DOM state:", {
                hasNavigation: !!document.querySelector('[role="navigation"]'),
                hasLeftNav: !!document.querySelector('[data-testid="sidenav"]'),
                hasNavItems: !!document.querySelector(".TK"),
                inboxSDKNavMenu: !!document.querySelector(".inboxsdk__navMenu"),
                currentUrl: window.location.href,
                gmailMode: window.location.hash
              });
            }
          }
        };
        const waitForGmailAndAddNavItem = () => {
          if (window.location.hostname !== "mail.google.com") {
            console.error("[UI DEBUG] Not on Gmail, skipping nav item creation");
            return;
          }
          const checkGmailReady = () => {
            const navigation = document.querySelector('[role="navigation"]');
            const main = document.querySelector('[role="main"]');
            if (navigation && main) {
              console.log("[UI DEBUG] \u{1F3AF} Gmail appears ready, attempting nav item creation...");
              setTimeout(() => addNavItemWithRetry(), 500);
            } else {
              console.log("[UI DEBUG] \u23F3 Gmail not fully loaded yet, waiting...");
              setTimeout(checkGmailReady, 1e3);
            }
          };
          checkGmailReady();
        };
        waitForGmailAndAddNavItem();
        const uiManager = new UIManager(sdk);
        const authService = new AuthService(uiManager);
        uiManager.setAuthService(authService);
        uiManager.setApiClient(apiClient);
        uiManager.initialize();
        window.uiManager = uiManager;
        window.sharedHandleStreamingResponse = uiManager.handleStreamingResponse.bind(uiManager);
        window.testFloatingChat = () => {
          console.log("[GLOBAL TEST] Testing floating chat...");
          if (window.uiManager) {
            window.uiManager.testFloatingChat();
          } else {
            console.log("[GLOBAL TEST] UIManager not available");
          }
        };
        window.createFloatingChat = () => {
          console.log("[GLOBAL TEST] Manually creating floating chat...");
          if (window.uiManager && window.uiManager.apiClient && window.uiManager.authService) {
            try {
              const floatingChat = new FloatingChat(
                window.uiManager.apiClient,
                window.uiManager.authService
              );
              console.log("[GLOBAL TEST] Floating chat created:", floatingChat);
              return floatingChat;
            } catch (error) {
              console.error("[GLOBAL TEST] Failed to create floating chat:", error);
            }
          } else {
            console.log("[GLOBAL TEST] UIManager or dependencies not available");
          }
        };
        const materialIconsLink = document.createElement("link");
        materialIconsLink.rel = "stylesheet";
        materialIconsLink.href = "https://fonts.googleapis.com/icon?family=Material+Icons";
        document.head.appendChild(materialIconsLink);
        window.stampUIManager = uiManager;
        sdk.Conversations.registerThreadViewHandler(async (threadView) => {
          await uiManager.handleThreadView(threadView);
        });
        sdk.Conversations.registerFileAttachmentCardViewHandler((attachmentCard) => {
          uiManager.handleFileAttachmentCard(attachmentCard);
        });
        sdk.Conversations.registerMessageViewHandler(async (messageView) => {
          await uiManager.handleExistingAttachmentCards(messageView);
        });
        sdk.Router.handleAllRoutes((routeView) => {
          console.log("[ROUTE DEBUG] Route changed:", routeView.getRouteID(), routeView.getRouteType());
        });
      }).catch((error) => {
        console.error("Stamp Extension: Failed to load InboxSDK.", error);
      });
      chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
        console.log("[Content] Received message from popup:", message.type);
        if (message.type === "START_INSTALLATION") {
          (async () => {
            try {
              console.log("[Content] Starting installation from popup request");
              if (!window.uiManager || !window.uiManager.authService) {
                throw new Error("Authentication service not available. Please refresh Gmail and try again.");
              }
              await window.uiManager.authService.signInWithGoogle();
              console.log("[Content] Installation completed successfully");
              sendResponse({ success: true });
            } catch (error) {
              console.error("[Content] Installation failed:", error);
              sendResponse({ error: error.message });
            }
          })();
          return true;
        }
        if (message.type === "SIGN_OUT") {
          (async () => {
            try {
              console.log("[Content] Starting sign out from popup request");
              if (!window.uiManager || !window.uiManager.authService) {
                throw new Error("Authentication service not available. Please refresh Gmail and try again.");
              }
              await window.uiManager.authService.signOut();
              if (window.uiManager.sidebarPanel) {
                window.uiManager.sidebarPanel.remove();
              }
              window.uiManager.renderLoginView();
              console.log("[Content] Sign out completed successfully");
              sendResponse({ success: true });
            } catch (error) {
              console.error("[Content] Sign out failed:", error);
              sendResponse({ error: error.message });
            }
          })();
          return true;
        }
        if (message.type === "CLEANUP_INSTALLATION") {
          (async () => {
            try {
              console.log("[Content] Cleaning up installation state");
              if (window.uiManager && window.uiManager.authService) {
                await window.uiManager.authService._cleanupPartialInstallation();
              }
              sendResponse({ success: true });
            } catch (error) {
              console.error("[Content] Cleanup failed:", error);
              sendResponse({ error: error.message });
            }
          })();
          return true;
        }
        return false;
      });
    }
  });
  require_content();
})();
/*! Bundled license information:

@inboxsdk/core/inboxsdk.js:
  (*!
   * InboxSDK
   * https://www.inboxsdk.com/
   *
   * The use of InboxSDK is governed by the Terms of Services located at
   * https://www.inboxsdk.com/terms
  
  
   *  __    __            _     _          _                _                      ___                 _ _ ___
   * / / /\ \ \__ _ _ __ | |_  | |_ ___   | |__   __ _  ___| | __   ___  _ __     / _ \_ __ ___   __ _(_) / _ \
   * \ \/  \/ / _` | '_ \| __| | __/ _ \  | '_ \ / _` |/ __| |/ /  / _ \| '_ \   / /_\/ '_ ` _ \ / _` | | \// /
   *  \  /\  / (_| | | | | |_  | || (_) | | | | | (_| | (__|   <  | (_) | | | | / /_\\| | | | | | (_| | | | \/
   *   \/  \/ \__,_|_| |_|\__|  \__\___/  |_| |_|\__,_|\___|_|\_\  \___/|_| |_| \____/|_| |_| |_|\__,_|_|_| ()
   *
   * Like complex reverse engineering? Want to make Gmail and Inbox a hackable platform?
   *
   * Join us at: www.streak.com/careers?source=sdk
   *)
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*!
    Copyright (c) 2018 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! Kefir.js v3.8.8
   *  https://github.com/kefirjs/kefir
   *)
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
//# sourceMappingURL=content.js.map
